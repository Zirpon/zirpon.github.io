<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Golang æºç ç¼–è¯‘å®‰è£… CentOS 7 note</title>
    <url>/2019/03/04/Golang-%E6%BA%90%E7%A0%81-CentOS-%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85-note/</url>
    <content><![CDATA[<h2 id="1-prefix"><a class="header-anchor" href="#1-prefix">ğŸŒ³</a>1. Prefix</h2>
<ul>
<li>
<p>éœ€è¦ä¸‹è½½çš„æ–‡ä»¶: <strong><a href="https://golang.org/dl/">Download</a></strong></p>
<ul>
<li>go1.12.src.tar.gz</li>
<li>go1.4.3.src.tar.gz</li>
<li>gcc glibc-devel</li>
</ul>
</li>
<li>
<p>go1.4ä»¥ä¸Šç‰ˆæœ¬å®‰è£… <strong>ä¾èµ–</strong> <em><strong>go1.4</strong></em> éœ€è¦å…ˆç¼–è¯‘å®‰è£…go1.4, å¦åˆ™ä¼šæŠ¥é”™ (è¿™ä¸ªè®¾å®š å¾ˆå¥‡æ€ª ä¸è¿‡ never mind just do it)<br>
æŠ¥é”™æç¤ºä¿¡æ¯å¦‚ä¸‹:</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Building Go cmd/dist using /root/go1.4.</span><br><span class="line">ERROR: Cannot find /root/go1.4/bin/go.</span><br><span class="line">Set <span class="variable">$GOROOT_BOOTSTRAP</span> to a working Go tree &gt;= Go 1.4.</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å®‰è£… gcc ç”¨äºç¼–è¯‘ go 1.4</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum install -y gcc glibc-devel</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="2-install-go1-4-3-src-tar-gz"><a class="header-anchor" href="#2-install-go1-4-3-src-tar-gz">ğŸŒ³</a>2. Install go1.4.3.src.tar.gz</h2>
<h3 id="2-1-å®‰è£…-go1-4-3"><a class="header-anchor" href="#2-1-å®‰è£…-go1-4-3">ğŸŒ³</a>2.1 å®‰è£… go1.4.3</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /root/go1.4</span><br><span class="line">tar -xvf go1.4.3.src.tar.gz -C /root/go1.4</span><br><span class="line"><span class="built_in">cd</span> /root/go1.4/src</span><br><span class="line">./all.bash</span><br></pre></td></tr></table></figure>
<h3 id="2-2-install-error"><a class="header-anchor" href="#2-2-install-error">ğŸŒ³</a>2.2 install error</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">--- FAIL: TestParseInLocation (0.00s)</span><br><span class="line">	format_test.go:202: ParseInLocation(Feb 01 2013 AST, Baghdad) = 2013-02-01 00:00:00 +0000 AST, want 2013-02-01 00:00:00 +0300 +03</span><br><span class="line">--- FAIL: TestLoadFixed (0.00s)</span><br><span class="line">	time_test.go:929: Now().In(loc).Zone() = <span class="string">&quot;-01&quot;</span>, -3600, want <span class="string">&quot;GMT+1&quot;</span>, -3600</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸¤ä¸ªé”™è¯¯å…¶å®æ˜¯æµ‹è¯•æ–‡ä»¶çš„æŠ¥é”™ ä¸å·¥ç¨‹ç¼–è¯‘åŸºæœ¬æ²¡ä»€ä¹ˆå…³ç³» ä¹Ÿä¸å¤ªå½±å“ å¯ä»¥è·³è¿‡ æ€ä¹ˆè·³è¿‡ è¯·çœ‹ä¸‹é¢</p>
<ol>
<li>
<p><strong>TestParseInLocation é”™è¯¯</strong></p>
<ul>
<li>
<p><em>è¿™ä¸ªé”™è¯¯æ˜¯å› ä¸º</em>:</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">The tzdata 2017a update (2017-02-28) changed the abbreviation of the</span><br><span class="line">Asia/Baghdad <span class="keyword">time</span> zone (used <span class="keyword">in</span> TestParseInLocation) from <span class="string">&#x27;AST&#x27;</span> to the</span><br><span class="line">numeric <span class="string">&#x27;+03&#x27;</span>.</span><br></pre></td></tr></table></figure>
<p>è¯·å‚è€ƒ <code>Red Hat Enterprise Linux Timezone Data</code> çš„å£°æ˜:</p>
<ul>
<li><strong><a href="https://access.redhat.com/articles/1187353">Red Hat Enterprise Linux Timezone Data (tzdata) - Development Status Page</a></strong></li>
<li><strong><a href="https://mm.icann.org/pipermail/tz-announce/2017-February/000045.html">2017a release of tz code and data available</a></strong></li>
</ul>
</li>
<li>
<p><em>è§£å†³</em></p>
<p>è¿™æ˜¯ <code>src/time/format_test.go</code> æ–‡ä»¶ 202 è¡Œçš„æŠ¥é”™<br>
(ä¸åŒ1.4 go çš„ç‰ˆæœ¬ è¡Œæ•°å¯èƒ½ä¸ä¸€æ · è¯·æ ¹æ® å‡½æ•° <code>TestParseInLocation</code> æŸ¥æ‰¾)</p>
<p><img src="/2019/03/04/Golang-%E6%BA%90%E7%A0%81-CentOS-%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85-note/TestParseInLocation_diff.png" alt="TestParseInLocation_diff.png"></p>
<p>è¿™ä¸ª golang github æºç æè¿‡çš„ä¸€ä¸ª <strong><a href="https://github.com/golang/go/issues/19457">issue</a></strong> å·²ç»è§£å†³çš„</p>
<p><code>gopherbot</code> comment äº†ä¿®æ”¹ issue çš„ <strong><a href="https://go-review.googlesource.com/c/go/+/37964/">é“¾æ¥</a></strong> æˆ‘å°±æ˜¯ä»é‚£é‡Œæˆªå›¾è¿‡æ¥çš„ å¦‚æœè®¿é—®ä¸åˆ°è¿™ä¸ªé“¾æ¥ æŒ‰ç…§æˆªå›¾æ”¹å°±è¡Œ</p>
</li>
</ul>
</li>
<li>
<p><strong>TestLoadFixed é”™è¯¯</strong></p>
<ul>
<li>
<p><em>é”™è¯¯åŸå› </em></p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">The tzdata 2017a update (2016-09-18) changed the <span class="keyword">time</span> zone abbreviation from a long English-language string</span><br><span class="line">(such as: <span class="string">&quot;GMT+1&quot;</span>) to <span class="string">&quot;-01&quot;</span>.</span><br></pre></td></tr></table></figure>
<p>è¯·å‚è€ƒ <code>Red Hat Enterprise Linux Timezone Data</code> çš„å£°æ˜ :</p>
<ul>
<li><strong><a href="https://access.redhat.com/articles/1187353">Red Hat Enterprise Linux Timezone Data (tzdata) - Development Status Page</a></strong></li>
<li><strong><a href="https://mm.icann.org/pipermail/tz-announce/2016-September/000041.html">2016g release of tz code and data available</a></strong></li>
</ul>
</li>
<li>
<p><em>Fix</em></p>
<p>è¿™æ˜¯ <code>src/time/time_test.go</code> æ–‡ä»¶ 929 è¡Œçš„æŠ¥é”™</p>
<p><img src="/2019/03/04/Golang-%E6%BA%90%E7%A0%81-CentOS-%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85-note/TestLoadFixed_diff.png" alt="TestLoadFixed_diff"></p>
<p>issue ä¿®æ”¹ <strong><a href="https://go-review.googlesource.com/c/go/+/29995/3/src/time/time_test.go#b951">é“¾æ¥</a></strong> å¦‚æœè®¿é—®ä¸åˆ°è¿™ä¸ªé“¾æ¥ æŒ‰ç…§æˆªå›¾æ”¹å°±è¡Œ</p>
</li>
</ul>
</li>
</ol>
<h3 id="2-3-install-success"><a class="header-anchor" href="#2-3-install-success">ğŸŒ³</a>2.3 install success</h3>
<ul>
<li>
<p>å®‰è£…æˆåŠŸæç¤º</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ALL TESTS PASSED</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">Installed Go <span class="keyword">for</span> linux/amd64 <span class="keyword">in</span> /home/you/go.</span><br><span class="line">Installed commands <span class="keyword">in</span> /root/go1.4/bin.</span><br><span class="line">*** You need to add /home/go1.4/bin to your <span class="variable">$PATH</span>. ***</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>çœ‹åˆ°è¿™ä¸ªå®‰è£…æˆåŠŸçš„æç¤ºä»¥å è®¾ç½®ä¸€ä¸‹ <code>go1.4</code> çš„ç¯å¢ƒå˜é‡(å¾…ä¼šå„¿å†æŠŠå®ƒæ”¹å› <code>go1.12</code>)</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;export PATH=<span class="variable">$PATH</span>:/root/go1.4/bin&quot;</span> &gt;&gt; /etc/profile</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;export GOROOT=/root/go1.4&quot;</span> &gt;&gt; /etc/profile</span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è¿è¡Œ <code>go version</code> æŸ¥çœ‹ç‰ˆæœ¬å·</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">go version go1.4.3 linux/amd64</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="3-install-go1-12-src-tar-gz"><a class="header-anchor" href="#3-install-go1-12-src-tar-gz">ğŸŒ³</a>3. Install go1.12.src.tar.gz</h2>
<ul>
<li>
<p>å®‰è£… go1.12</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /root/go1.12</span><br><span class="line">tar -xvf go1.12.src.tar.gz -C /root/go1.12</span><br><span class="line"><span class="built_in">cd</span> /root/go1.12/src</span><br><span class="line">./all.bash</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å®‰è£…æˆåŠŸä»¥å æ¸…æ‰åŸæ¥ <code>go1.4</code> çš„ç¯å¢ƒå˜é‡ æ·»åŠ å¦‚ä¸‹ç¯å¢ƒå˜é‡</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/root/go1.12/bin</span><br><span class="line"><span class="built_in">export</span> GOROOT=/root/go1.12</span><br><span class="line"><span class="built_in">export</span> GOPATH=/root/go1.12/go-projects</span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è¿è¡Œ <code>go version</code> æŸ¥çœ‹ç‰ˆæœ¬å·</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">go version go1.12 linux/amd64</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>Golang</category>
        <category>è®¡ç®—æœºç§‘å­¦</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>CentOS</tag>
        <tag>Linux</tag>
        <tag>æºç ç¼–è¯‘</tag>
      </tags>
  </entry>
  <entry>
    <title>Obsidian ä½¿ç”¨æŠ€å·§</title>
    <url>/2022/04/10/Obsidian%20%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/</url>
    <content><![CDATA[<h1>Obsidian ä½¿ç”¨æŠ€å·§</h1>
<h2 id="1-quickadd-cmenu-templater-kanban-æ’ä»¶"><a class="header-anchor" href="#1-quickadd-cmenu-templater-kanban-æ’ä»¶">ğŸŒ³</a>1. quickadd + cmenu +templater + kanban æ’ä»¶</h2>
<blockquote>
<p>å­¦ä¹ èµ„æ–™è§†é¢‘ï¼š<a href="https://www.bilibili.com/video/BV1j34y197cw">obsidian æ— éšœç¢è”åŠ¨æ•ˆç‡æ’ä»¶ | æ‰‹æŠŠæ‰‹æ‰“é€ é«˜æ•ˆåŒé“¾ä¸ªäººçŸ¥è¯†åº“ | å…¨ä¸»è§‚åˆ†äº«ä¸æ¨è | template | quickadd | cmenu</a></p>
</blockquote>
<blockquote>
<p>å­¦ä¹ è§†é¢‘å†…åµŒæ¨¡å¼</p>
</blockquote>
<iframe src="//player.bilibili.com/player.html?aid=807319927&bvid=BV1j34y197cw&cid=459209679&page=2" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>
<ol>
<li>templater ç”¨äºè®¾ç½®æ–‡ç« æ¨¡æ¿</li>
<li>quickadd  + cmenu ç”¨äºç”Ÿæˆ <code>æ ¹æ®æ¨¡æ¿æ–°å»ºæ–‡ç« </code> çš„å¿«æ·æŒ‰é’®</li>
<li>kanban ç”¨äºæ ¹æ® ä»»åŠ¡ <code>- [ ]</code>ç”Ÿæˆ çœ‹æ¿ ä¸»è¦ç”¨äºæ—¥å¸¸ todolist</li>
<li>ä½¿ç”¨ taskList + checklist è¿½è¸ª <code>#check</code> ä»»åŠ¡</li>
<li>calendar  + daily note æ—¥è®°</li>
<li>banner æ–‡ç« é¡¶éƒ¨èƒŒæ™¯</li>
<li>Linter + YAML æ¨¡æ¿å¤´</li>
<li>admonition æ’ä»¶ ç”¨åš æ±‡æ€»æŸ¥è¯¢ todolist çš„èƒŒæ™¯éƒ¨ä»¶ å…·ä½“çœ‹ <code>diaryTemplate</code> æ¨¡æ¿</li>
<li>Tasksæ’ä»¶çš„æŸ¥è¯¢è¯­æ³•è¯¦æƒ…è¯·çœ‹<a href="https://www.bilibili.com/read/cv14259903">ã€æ•ˆç‡åŠå…¬ã€‘Obsidainæ’ä»¶ä¹‹Tasks-ä»»åŠ¡ç®¡ç†åˆ©å™¨</a></li>
</ol>
<h2 id="2-dataview"><a class="header-anchor" href="#2-dataview">ğŸŒ³</a>2. Dataview</h2>
<h3 id="1-dataview-æŸ¥è¯¢è¯­æ³•"><a class="header-anchor" href="#1-dataview-æŸ¥è¯¢è¯­æ³•">ğŸŒ³</a>1. Dataview æŸ¥è¯¢è¯­æ³•</h3>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">```dataview</span><br><span class="line">TABLE|LIST|TASKï¼ˆå±•ç°å½¢å¼ï¼‰   &lt;field&gt; [AS &quot;æ˜¾ç¤ºåˆ—å&quot;],..., &lt;field&gt; ï¼ˆæ˜¾ç¤ºå­—æ®µï¼‰</span><br><span class="line"></span><br><span class="line">FROM &lt;source&gt; (like #tag or &quot;folder&quot;)  ï¼ˆæŸ¥è¯¢åœ°å€ï¼‰</span><br><span class="line"></span><br><span class="line">WHERE &lt;expression&gt; (like &#x27;field = value&#x27;)ã€contains(tags,&quot;ob/obæ’ä»¶&quot;)  ï¼ˆæŸ¥è¯¢æ¡ä»¶ï¼‰</span><br><span class="line"></span><br><span class="line">SORT &lt;expression&gt; [ASC/DESC] (like &#x27;field ASC&#x27;)  ï¼ˆæ’åºï¼‰</span><br><span class="line"></span><br><span class="line">...other data commands  ï¼ˆå…¶ä»–å‘½ä»¤ï¼Œå¦‚limit,group byç­‰ï¼‰</span><br><span class="line"></span><br><span class="line">```</span><br></pre></td></tr></table></figure>
<p>å­¦ä¹ èµ„æ–™:</p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/480239685">ã€æ•ˆç‡åŠå…¬ã€‘Obsidainæ’ä»¶ä¹‹DataView-é«˜æ•ˆä¿¡æ¯åŠ¨æ€æŸ¥è¯¢æ’ä»¶</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/393550306">obsidianæ’ä»¶dataviewå®˜æ–¹æ–‡æ¡£ç¿»è¯‘</a></li>
<li><a href="https://www.jianshu.com/p/d1e19530897a">Step3-çŸ¥å…¶æ‰€ä»¥ç„¶ï¼šä¸€æ–‡è®²é€Obsidianæ’ä»¶DataviewJS</a></li>
</ul>
<ol>
<li>
<p>List æŸ¥è¯¢<br>
<img src="https://pic3.zhimg.com/80/v2-15696f4b94599e36caeff3853bf4e95a_720w.jpg" alt="ListæŸ¥è¯¢"></p>
</li>
<li>
<p>Table æŸ¥è¯¢<br>
<img src="https://pic1.zhimg.com/80/v2-b832f990bcf903ee780a4e045255643c_720w.jpg" alt></p>
</li>
<li>
<p>TaskæŸ¥è¯¢<br>
<img src="https://pic3.zhimg.com/80/v2-11243c43b5af8f1381cb9d390896238a_720w.jpg" alt></p>
</li>
<li>
<p>Calendar æŸ¥è¯¢<br>
<img src="https://pic3.zhimg.com/80/v2-727b843c979e9259f2b7331795d8d4b2_720w.jpg" alt></p>
</li>
<li>
<p>DataView æŸ¥è¯¢å­—æ®µåŠå‘½ä»¤<br>
<img src="https://pic2.zhimg.com/80/v2-51a5b1ea04461d2a55817fc543d79b5d_720w.jpg" alt><br>
<img src="https://pic4.zhimg.com/80/v2-4f1b5823824ac4dd4175e7fd45811a9b_720w.jpg" alt></p>
</li>
<li>
<p>DataView å­—æ®µæ ‡è¯†<br>
<img src="https://pic2.zhimg.com/80/v2-6332b4ff68d06f5b920db268cfe27d91_720w.jpg" alt></p>
</li>
<li>
<p>éšå«å­—æ®µ</p>
<p>dataviewèƒ½è‡ªåŠ¨çš„å¯¹æ¯ä¸ªé¡µé¢æ·»åŠ å¤§é‡çš„å…ƒæ•°æ®ã€‚</p>
<ul>
<li><code>file.name</code>: è¯¥æ–‡ä»¶æ ‡é¢˜(å­—ç¬¦ä¸²)ã€‚</li>
<li><code>file.folder</code>: è¯¥æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹çš„è·¯å¾„(å­—ç¬¦ä¸²)ã€‚</li>
<li><code>file.path</code>: è¯¥æ–‡ä»¶çš„å®Œæ•´è·¯å¾„(å­—ç¬¦ä¸²)ã€‚</li>
<li><code>file.link</code>: è¯¥æ–‡ä»¶çš„ä¸€ä¸ªé“¾æ¥(é“¾æ¥)ã€‚</li>
<li><code>file.size</code>: è¯¥æ–‡ä»¶çš„å¤§å°(bytes)(æ•°å­—)</li>
<li><code>file.ctime</code>: è¯¥æ–‡ä»¶çš„åˆ›å»ºæ—¥æœŸ(æ—¥æœŸå’Œæ—¶é—´)ã€‚</li>
<li><code>file.cday</code>: è¯¥æ–‡ä»¶çš„åˆ›å»ºæ—¥æœŸ(ä»…æ—¥æœŸ)ã€‚</li>
<li><code>file.mtime</code>: è¯¥æ–‡ä»¶æœ€åç¼–è¾‘æ—¥æœŸ(æ—¥æœŸå’Œæ—¶é—´)ã€‚</li>
<li><code>file.mday</code>: è¯¥æ–‡ä»¶æœ€åç¼–è¾‘æ—¥æœŸ(ä»…æ—¥æœŸ)ã€‚</li>
<li><code>file.tags</code>: ç¬”è®°ä¸­æ‰€æœ‰æ ‡ç­¾ç»„æˆçš„æ•°ç»„ã€‚å­æ ‡ç­¾æŒ‰æ¯ä¸ªçº§åˆ«è¿›è¡Œç»†åˆ†ï¼Œæ‰€ä»¥<code>#Tag/1/A</code>å°†ä¼šåœ¨æ•°ç»„ä¸­å‚¨å­˜ä¸º<code>[#Tag, #Tag/1, #Tag/1/A]</code>ã€‚</li>
<li><code>file.etags</code>: ç¬”è®°ä¸­æ‰€æœ‰æ˜¾å¼æ ‡ç­¾ç»„æˆçš„æ•°ç»„ï¼›ä¸åŒäº<code>file.tags</code>ï¼Œä¸åŒ…å«å­æ ‡ç­¾ã€‚</li>
<li><code>file.outlinks</code>: è¯¥æ–‡ä»¶æ‰€æœ‰å¤–é“¾(outgoing link)ç»„æˆçš„æ•°ç»„ã€‚</li>
<li><code>file.aliases</code>: ç¬”è®°ä¸­æ‰€æœ‰åˆ«åç»„æˆçš„æ•°ç»„ã€‚<br>
å¦‚æœæ–‡ä»¶çš„æ ‡é¢˜å†…æœ‰ä¸€ä¸ªæ—¥æœŸï¼ˆæ ¼å¼ä¸ºyyyy-mm-ddæˆ–yyyymmddï¼‰ï¼Œæˆ–è€…æœ‰ä¸€ä¸ªDateå­—æ®µ/inlineå­—æ®µï¼Œå®ƒä¹Ÿæœ‰ä»¥ä¸‹å±æ€§:</li>
<li><code>file.day</code>: ä¸€ä¸ªè¯¥æ–‡ä»¶çš„éšå«æ—¥æœŸã€‚</li>
</ul>
</li>
</ol>
<h3 id="2-dataviewjs-api"><a class="header-anchor" href="#2-dataviewjs-api">ğŸŒ³</a>2. Dataviewjs API</h3>
<ol>
<li>åŸå§‹API</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/** A function which maps an array element to some value. */</span></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">ArrayFunc</span>&lt;T, O&gt; = <span class="function">(<span class="params">elem: T, index: number, arr: T[]</span>) =&gt;</span> O;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** A function which compares two types (plus their indices, if relevant). */</span></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">ArrayComparator</span>&lt;T&gt; = <span class="function">(<span class="params">a: T, b: T</span>) =&gt;</span> number;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Proxied interface which allows manipulating array-based data. All functions on a data array produce a NEW array</span></span><br><span class="line"><span class="comment"> * (i.e., the arrays are immutable).</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> interface <span class="title class_">DataArray</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="comment">/** The total number of elements in the array. */</span></span><br><span class="line">    <span class="attr">length</span>: number;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Filter the data array down to just elements which match the given predicate. */</span></span><br><span class="line">    <span class="title function_">where</span>(<span class="attr">predicate</span>: <span class="title class_">ArrayFunc</span>&lt;T, boolean&gt;): <span class="title class_">DataArray</span>&lt;T&gt;;</span><br><span class="line">    <span class="comment">/** Alias for &#x27;where&#x27; for people who want array semantics. */</span></span><br><span class="line">    <span class="title function_">filter</span>(<span class="attr">predicate</span>: <span class="title class_">ArrayFunc</span>&lt;T, boolean&gt;): <span class="title class_">DataArray</span>&lt;T&gt;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Map elements in the data array by applying a function to each. */</span></span><br><span class="line">    map&lt;U&gt;(<span class="attr">f</span>: <span class="title class_">ArrayFunc</span>&lt;T, U&gt;): <span class="title class_">DataArray</span>&lt;U&gt;;</span><br><span class="line">    <span class="comment">/** Map elements in the data array by applying a function to each, then flatten the results to produce a new array. */</span></span><br><span class="line">    flatMap&lt;U&gt;(<span class="attr">f</span>: <span class="title class_">ArrayFunc</span>&lt;T, U[]&gt;): <span class="title class_">DataArray</span>&lt;U&gt;;</span><br><span class="line">    <span class="comment">/** Mutably change each value in the array, returning the same array which you can further chain off of. */</span></span><br><span class="line">    <span class="title function_">mutate</span>(<span class="attr">f</span>: <span class="title class_">ArrayFunc</span>&lt;T, any&gt;): <span class="title class_">DataArray</span>&lt;any&gt;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Limit the total number of entries in the array to the given value. */</span></span><br><span class="line">    <span class="title function_">limit</span>(<span class="attr">count</span>: number): <span class="title class_">DataArray</span>&lt;T&gt;;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Take a slice of the array. If `start` is undefined, it is assumed to be 0; if `end` is undefined, it is assumbed</span></span><br><span class="line"><span class="comment">     * to be the end of the array.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">slice</span>(start?: number, end?: number): <span class="title class_">DataArray</span>&lt;T&gt;;</span><br><span class="line">    <span class="comment">/** Concatenate the values in this data array with those of another data array. */</span></span><br><span class="line">    <span class="title function_">concat</span>(<span class="attr">other</span>: <span class="title class_">DataArray</span>&lt;T&gt;): <span class="title class_">DataArray</span>&lt;T&gt;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Return the first index of the given (optionally starting the search) */</span></span><br><span class="line">    <span class="title function_">indexOf</span>(<span class="attr">element</span>: T, fromIndex?: number): number;</span><br><span class="line">    <span class="comment">/** Return the first element that satisfies the given predicate. */</span></span><br><span class="line">    <span class="title function_">find</span>(<span class="attr">pred</span>: <span class="title class_">ArrayFunc</span>&lt;T, boolean&gt;): T | <span class="literal">undefined</span>;</span><br><span class="line">    <span class="comment">/** Find the index of the first element that satisfies the given predicate. Returns -1 if nothing was found. */</span></span><br><span class="line">    <span class="title function_">findIndex</span>(<span class="attr">pred</span>: <span class="title class_">ArrayFunc</span>&lt;T, boolean&gt;): number;</span><br><span class="line">    <span class="comment">/** Returns true if the array contains the given element, and false otherwise. */</span></span><br><span class="line">    <span class="title function_">includes</span>(<span class="attr">element</span>: T): boolean;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Return a sorted array sorted by the given key; an optional comparator can be provided, which will</span></span><br><span class="line"><span class="comment">     * be used to compare the keys in leiu of the default dataview comparator.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    sort&lt;U&gt;(<span class="attr">key</span>: <span class="title class_">ArrayFunc</span>&lt;T, U&gt;, direction?: <span class="string">&#x27;asc&#x27;</span> | <span class="string">&#x27;desc&#x27;</span>, comparator?: <span class="title class_">ArrayComparator</span>&lt;U&gt;): <span class="title class_">DataArray</span>&lt;T&gt;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Return an array where elements are grouped by the given key; the resulting array will have objects of the form</span></span><br><span class="line"><span class="comment">     * &#123; key: &lt;key value&gt;, rows: DataArray &#125;.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    groupBy&lt;U&gt;(<span class="attr">key</span>: <span class="title class_">ArrayFunc</span>&lt;T, U&gt;, comparator?: <span class="title class_">ArrayComparator</span>&lt;U&gt;): <span class="title class_">DataArray</span>&lt;&#123; <span class="attr">key</span>: U, <span class="attr">rows</span>: <span class="title class_">DataArray</span>&lt;T&gt; &#125;&gt;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Return distinct entries. If a key is provided, then rows with distinct keys are returned.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    distinct&lt;U&gt;(key?: <span class="title class_">ArrayFunc</span>&lt;T, U&gt;, comparator?: <span class="title class_">ArrayComparator</span>&lt;U&gt;): <span class="title class_">DataArray</span>&lt;T&gt;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Return true if the predicate is true for all values. */</span></span><br><span class="line">    <span class="title function_">every</span>(<span class="attr">f</span>: <span class="title class_">ArrayFunc</span>&lt;T, boolean&gt;): boolean;</span><br><span class="line">    <span class="comment">/** Return true if the predicate is true for at least one value. */</span></span><br><span class="line">    <span class="title function_">some</span>(<span class="attr">f</span>: <span class="title class_">ArrayFunc</span>&lt;T, boolean&gt;): boolean;</span><br><span class="line">    <span class="comment">/** Return true if the predicate is FALSE for all values. */</span></span><br><span class="line">    <span class="title function_">none</span>(<span class="attr">f</span>: <span class="title class_">ArrayFunc</span>&lt;T, boolean&gt;): boolean;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Return the first element in the data array. Returns undefined if the array is empty. */</span></span><br><span class="line">    <span class="title function_">first</span>(): T;</span><br><span class="line">    <span class="comment">/** Return the last element in the data array. Returns undefined if the array is empty. */</span></span><br><span class="line">    <span class="title function_">last</span>(): T;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Map every element in this data array to the given key, and then flatten it.*/</span></span><br><span class="line">    <span class="title function_">to</span>(<span class="attr">key</span>: string): <span class="title class_">DataArray</span>&lt;any&gt;;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Recursively expand the given key, flattening a tree structure based on the key into a flat array. Useful for handling</span></span><br><span class="line"><span class="comment">     * heirarchical data like tasks with &#x27;subtasks&#x27;.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">expand</span>(<span class="attr">key</span>: string): <span class="title class_">DataArray</span>&lt;any&gt;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Run a lambda on each element in the array. */</span></span><br><span class="line">    <span class="title function_">forEach</span>(<span class="attr">f</span>: <span class="title class_">ArrayFunc</span>&lt;T, <span class="keyword">void</span>&gt;): <span class="keyword">void</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Convert this to a plain javascript array. */</span></span><br><span class="line">    <span class="title function_">array</span>(): T[];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Allow iterating directly over the array. */</span></span><br><span class="line">    [<span class="title class_">Symbol</span>.<span class="property">iterator</span>](): <span class="title class_">Iterator</span>&lt;T&gt;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Map indexes to values. */</span></span><br><span class="line">    [<span class="attr">index</span>: number]: any;</span><br><span class="line">    <span class="comment">/** Automatic flattening of fields. */</span></span><br><span class="line">    [<span class="attr">field</span>: string]: any;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>ä»£ç å—å‚è€ƒ</li>
</ol>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">```dataviewjs</span><br><span class="line">dv.table([], ...)</span><br><span class="line"></span><br><span class="line">dv.current()</span><br><span class="line"></span><br><span class="line">dv.pages(&quot;#books&quot;) =&gt; all pages with tag &#x27;books&#x27;</span><br><span class="line">dv.pages(&#x27;&quot;folder&quot;&#x27;) =&gt; all pages from folder &quot;folder&quot;</span><br><span class="line">dv.pages(&quot;#yes or -#no&quot;) =&gt; all pages with tag #yes, or which DON&#x27;T have tag #no</span><br><span class="line"></span><br><span class="line">dv.pagePaths(&quot;#books&quot;) =&gt; the paths of pages with tag &#x27;books&#x27;</span><br><span class="line"></span><br><span class="line">dv.page(&quot;Index&quot;) =&gt; The page object for /Index</span><br><span class="line">dv.page(&quot;books/The Raisin.md&quot;) =&gt; The page object for /books/The Raisin.md</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">dv.list([1, 2, 3]) =&gt; list of 1, 2, 3</span><br><span class="line">dv.list(dv.pages().file.name) =&gt; list of all file names</span><br><span class="line">dv.list(dv.pages().file.link) =&gt; list of all file links</span><br><span class="line">dv.list(dv.pages(&quot;#book&quot;).where(p =&gt; p.rating &gt; 7)) =&gt; list of all books with rating greater than </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// List all tasks from pages marked &#x27;#project&#x27;</span><br><span class="line">dv.taskList(dv.pages(&quot;#project&quot;).file.tasks)</span><br><span class="line"></span><br><span class="line">// List all *uncompleted* tasks from pages marked #project</span><br><span class="line">dv.taskList(dv.pages(&quot;#project&quot;).file.tasks</span><br><span class="line">    .where(t =&gt; !t.completed))</span><br><span class="line"></span><br><span class="line">// List all tasks tagged with &#x27;#tag&#x27; from pages marked #project</span><br><span class="line">dv.taskList(dv.pages(&quot;#project&quot;).file.tasks</span><br><span class="line">	.where(t =&gt; t.text.includes(&quot;#tag&quot;)))</span><br><span class="line"></span><br><span class="line">// Render a simple table of book info sorted by rating.</span><br><span class="line">dv.table([&quot;File&quot;, &quot;Genre&quot;, &quot;Time Read&quot;, &quot;Rating&quot;], dv.pages(&quot;#book&quot;)</span><br><span class="line">    .sort(b =&gt; b.rating)</span><br><span class="line">    .map(b =&gt; [b.file.link, b.genre, b[&quot;time-read&quot;], b.rating]))</span><br><span class="line">    </span><br><span class="line">```</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>æŸ¥è¯¢ä¾‹å­ï¼š</li>
</ol>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">```dataviewjs</span><br><span class="line">for (let group of dv.pages(&quot;#book&quot;).where(p =&gt; p[&quot;time-read&quot;].year == 2021).groupBy(p =&gt; p.genre)) &#123;</span><br><span class="line"> 	dv.header(3, group.key);</span><br><span class="line"> 	dv.table([&quot;Name&quot;, &quot;Time Read&quot;, &quot;Rating&quot;],</span><br><span class="line">	 group.rows</span><br><span class="line">		 .sort(k =&gt; k.rating, &#x27;desc&#x27;)</span><br><span class="line">		 .map(k =&gt; [k.file.link, k[&quot;time-read&quot;], k.rating]))</span><br><span class="line">&#125;</span><br><span class="line">```</span><br></pre></td></tr></table></figure>
<h2 id="3-é…ç½®æ–‡ä»¶-picgo-core"><a class="header-anchor" href="#3-é…ç½®æ–‡ä»¶-picgo-core">ğŸŒ³</a>3. <a href="https://picgo.github.io/PicGo-Core-Doc/zh/guide/config.html#%E6%89%8B%E5%8A%A8%E7%94%9F%E6%88%90">é…ç½®æ–‡ä»¶ | PicGo-Core</a></h2>
]]></content>
      <categories>
        <category>quickadd</category>
        <category>cmenu</category>
        <category>templater</category>
        <category>kanban</category>
        <category>calendar</category>
        <category>obsidian</category>
        <category>dataview</category>
        <category>banner</category>
        <category>dataviewjs</category>
        <category>Linter</category>
        <category>admonition - è®¡ç®—æœºç§‘å­¦</category>
      </categories>
      <tags>
        <tag>diary/year2022</tag>
        <tag>diary/month04</tag>
        <tag>quickadd</tag>
        <tag>cmenu</tag>
        <tag>templater</tag>
        <tag>kanban</tag>
        <tag>calendar</tag>
        <tag>obsidian</tag>
        <tag>dataview</tag>
        <tag>banner</tag>
        <tag>dataviewjs</tag>
        <tag>Linter</tag>
        <tag>admonition</tag>
      </tags>
  </entry>
  <entry>
    <title>bash è„šæœ¬</title>
    <url>/2024/07/07/bash-%E8%84%9A%E6%9C%AC/</url>
    <content><![CDATA[<h1>bash è„šæœ¬</h1>
<h2 id="basic"><a class="header-anchor" href="#basic">ğŸŒ³</a>basic</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">history  5</span><br><span class="line">grep -10 &#x27;qsm&#x27; test.log//æ‰“å°åŒ¹é…è¡Œçš„å‰å10è¡Œ</span><br></pre></td></tr></table></figure>
<h2 id="åˆ†å‰²å¤§æ–‡æœ¬æ–‡ä»¶"><a class="header-anchor" href="#åˆ†å‰²å¤§æ–‡æœ¬æ–‡ä»¶">ğŸŒ³</a>åˆ†å‰²å¤§æ–‡æœ¬æ–‡ä»¶</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">wc</span> -l all.log</span><br><span class="line"><span class="built_in">split</span> -l 35000 -d --verbose all.log all-log-split-</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">ls</span> | grep all-log-split-`;<span class="keyword">do</span> a=`<span class="built_in">echo</span> <span class="variable">$i</span>.txt`; <span class="built_in">mv</span> <span class="variable">$i</span> <span class="variable">$a</span>;<span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>Here is a footnote reference,[^1] and another.[^longnote]</p>
<h2 id="endnotes"><a class="header-anchor" href="#endnotes">ğŸŒ³</a>Endnotes</h2>
<p>[^1]: Here is the footnote.<br>
[^longnote]: Hereâ€™s one with multiple blocks.</p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºç§‘å­¦</category>
      </categories>
      <tags>
        <tag>bash</tag>
      </tags>
  </entry>
  <entry>
    <title>C++11ã€C++14ã€C++17ã€C++20æ–°ç‰¹æ€§æ€»ç»“ï¼ˆ5ä¸‡å­—è¯¦è§£ï¼‰</title>
    <url>/2023/06/04/C++11%E3%80%81C++14%E3%80%81C++17%E3%80%81C++20%E6%96%B0%E7%89%B9%E6%80%A7%E6%80%BB%E7%BB%93%EF%BC%885%E4%B8%87%E5%AD%97%E8%AF%A6%E8%A7%A3%EF%BC%89/</url>
    <content><![CDATA[<p><a href="https://blog.csdn.net/qq_41854911/article/details/119657617">C++11ã€C++14ã€C++17ã€C++20æ–°ç‰¹æ€§æ€»ç»“ï¼ˆ5ä¸‡å­—è¯¦è§£ï¼‰_c++20 c++17_å°ç†Šcoderçš„åšå®¢-CSDNåšå®¢</a></p>
<h1>C++11ã€C++14ã€C++17ã€C++20æ–°ç‰¹æ€§æ€»ç»“ï¼ˆ5ä¸‡å­—è¯¦è§£ï¼‰</h1>
<h2 id="æ–‡ç« ç›®å½•"><a class="header-anchor" href="#æ–‡ç« ç›®å½•">ğŸŒ³</a>æ–‡ç« ç›®å½•</h2>
<ul>
<li><a href="#c11c14c17c20%E6%96%B0%E7%89%B9%E6%80%A7%E6%80%BB%E7%BB%935%E4%B8%87%E5%AD%97%E8%AF%A6%E8%A7%A3">C++11ã€C++14ã€C++17ã€C++20æ–°ç‰¹æ€§æ€»ç»“ï¼ˆ5ä¸‡å­—è¯¦è§£ï¼‰</a>
<ul>
<li><a href="#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">æ–‡ç« ç›®å½•</a>
<ul>
<li><a href="#c-11%E6%98%AF%E4%BB%80%E4%B9%88c-11%E6%A0%87%E5%87%86%E7%9A%84%E7%94%B1%E6%9D%A5">C++ 11æ˜¯ä»€ä¹ˆï¼ŒC++ 11æ ‡å‡†çš„ç”±æ¥</a></li>
<li><a href="#c-auto%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC%E5%AE%8C%E5%85%A8%E6%94%BB%E7%95%A5">C++ autoç±»å‹æ¨å¯¼å®Œå…¨æ”»ç•¥</a>
<ul>
<li><a href="#auto-%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC%E7%9A%84%E8%AF%AD%E6%B3%95%E5%92%8C%E8%A7%84%E5%88%99">auto ç±»å‹æ¨å¯¼çš„è¯­æ³•å’Œè§„åˆ™</a></li>
<li><a href="#auto-%E7%9A%84%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95">auto çš„é«˜çº§ç”¨æ³•</a></li>
<li><a href="#auto-%E7%9A%84%E9%99%90%E5%88%B6">auto çš„é™åˆ¶</a></li>
<li><a href="#auto-%E7%9A%84%E5%BA%94%E7%94%A8">auto çš„åº”ç”¨</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8-auto-%E5%AE%9A%E4%B9%89%E8%BF%AD%E4%BB%A3%E5%99%A8">ä½¿ç”¨ auto å®šä¹‰è¿­ä»£å™¨</a></li>
<li><a href="#auto-%E7%94%A8%E4%BA%8E%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B">auto ç”¨äºæ³›å‹ç¼–ç¨‹</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#c-decltype%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC%E5%AE%8C%E5%85%A8%E6%94%BB%E7%95%A5">C++ decltypeç±»å‹æ¨å¯¼å®Œå…¨æ”»ç•¥</a>
<ul>
<li><a href="#exp-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">exp æ³¨æ„äº‹é¡¹</a></li>
</ul>
</li>
<li><a href="#decltype-%E6%8E%A8%E5%AF%BC%E8%A7%84%E5%88%99">decltype æ¨å¯¼è§„åˆ™</a></li>
<li><a href="#decltype-%E7%9A%84%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8">decltype çš„å®é™…åº”ç”¨</a></li>
<li><a href="#%E6%B1%87%E6%80%BBauto%E5%92%8Cdecltype%E7%9A%84%E5%8C%BA%E5%88%AB">æ±‡æ€»autoå’Œdecltypeçš„åŒºåˆ«</a>
<ul>
<li><a href="#%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB">è¯­æ³•æ ¼å¼çš„åŒºåˆ«</a></li>
<li><a href="#%E5%AF%B9-cv-%E9%99%90%E5%AE%9A%E7%AC%A6%E7%9A%84%E5%A4%84%E7%90%86">å¯¹ cv é™å®šç¬¦çš„å¤„ç†</a></li>
<li><a href="#%E5%AF%B9%E5%BC%95%E7%94%A8%E7%9A%84%E5%A4%84%E7%90%86">å¯¹å¼•ç”¨çš„å¤„ç†</a></li>
<li><a href="#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li>
</ul>
</li>
<li><a href="#c%E8%BF%94%E5%9B%9E%E5%80%BC%E7%B1%BB%E5%9E%8B%E5%90%8E%E7%BD%AE%E8%B7%9F%E8%B8%AA%E8%BF%94%E5%9B%9E%E5%80%BC%E7%B1%BB%E5%9E%8B">C++è¿”å›å€¼ç±»å‹åç½®ï¼ˆè·Ÿè¸ªè¿”å›å€¼ç±»å‹ï¼‰</a></li>
<li><a href="#c11%E5%AF%B9%E6%A8%A1%E6%9D%BF%E5%AE%9E%E4%BE%8B%E5%8C%96%E4%B8%AD%E8%BF%9E%E7%BB%AD%E5%8F%B3%E5%B0%96%E6%8B%AC%E5%8F%B7%E7%9A%84%E6%94%B9%E8%BF%9B">C++11å¯¹æ¨¡æ¿å®ä¾‹åŒ–ä¸­è¿ç»­å³å°–æ‹¬å·&gt;&gt;çš„æ”¹è¿›</a>
<ul>
<li><a href="#%E6%89%A9%E5%B1%95%E9%98%85%E8%AF%BB">æ‰©å±•é˜…è¯»</a></li>
</ul>
</li>
<li><a href="#c11%E4%BD%BF%E7%94%A8using%E5%AE%9A%E4%B9%89%E5%88%AB%E5%90%8D%E6%9B%BF%E4%BB%A3typedef">C++11ä½¿ç”¨usingå®šä¹‰åˆ«åï¼ˆæ›¿ä»£typedefï¼‰</a></li>
<li><a href="#c11%E6%94%AF%E6%8C%81%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E7%9A%84%E9%BB%98%E8%AE%A4%E6%A8%A1%E6%9D%BF%E5%8F%82%E6%95%B0">C++11æ”¯æŒå‡½æ•°æ¨¡æ¿çš„é»˜è®¤æ¨¡æ¿å‚æ•°</a></li>
<li><a href="#c11%E5%9C%A8%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E5%92%8C%E7%B1%BB%E6%A8%A1%E6%9D%BF%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0">C++11åœ¨å‡½æ•°æ¨¡æ¿å’Œç±»æ¨¡æ¿ä¸­ä½¿ç”¨å¯å˜å‚æ•°</a>
<ul>
<li><a href="#%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E6%A8%A1%E6%9D%BF">å¯å˜å‚æ•°æ¨¡æ¿</a>
<ul>
<li><a href="#1-%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF">1) å¯å˜å‚æ•°å‡½æ•°æ¨¡æ¿</a></li>
<li><a href="#2-%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E7%B1%BB%E6%A8%A1%E6%9D%BF">2) å¯å˜å‚æ•°ç±»æ¨¡æ¿</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#c11-tuple%E5%85%83%E7%BB%84%E8%AF%A6%E8%A7%A3">C++11 tupleå…ƒç»„è¯¦è§£</a>
<ul>
<li><a href="#tuple%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA">tupleå¯¹è±¡çš„åˆ›å»º</a>
<ul>
<li><a href="#1-%E7%B1%BB%E7%9A%84%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0">1) ç±»çš„æ„é€ å‡½æ•°</a></li>
<li><a href="#2-make_tuple%E5%87%BD%E6%95%B0">2) make_tuple()å‡½æ•°</a></li>
</ul>
</li>
<li><a href="#tuple%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0">tupleå¸¸ç”¨å‡½æ•°</a></li>
</ul>
</li>
<li><a href="#c11%E5%88%97%E8%A1%A8%E5%88%9D%E5%A7%8B%E5%8C%96%E7%BB%9F%E4%B8%80%E4%BA%86%E5%88%9D%E5%A7%8B%E5%8C%96%E6%96%B9%E5%BC%8F">C++11åˆ—è¡¨åˆå§‹åŒ–ï¼ˆç»Ÿä¸€äº†åˆå§‹åŒ–æ–¹å¼ï¼‰</a>
<ul>
<li><a href="#%E7%BB%9F%E4%B8%80%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96">ç»Ÿä¸€çš„åˆå§‹åŒ–</a></li>
</ul>
</li>
<li><a href="#c11-lambda%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3">C++11 lambdaåŒ¿åå‡½æ•°ç”¨æ³•è¯¦è§£</a>
<ul>
<li><a href="#lambda%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0%E7%9A%84%E5%AE%9A%E4%B9%89">lambdaåŒ¿åå‡½æ•°çš„å®šä¹‰</a>
<ul>
<li><a href="#lambda%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84%E5%A4%96%E9%83%A8%E5%8F%98%E9%87%8F">lambdaåŒ¿åå‡½æ•°ä¸­çš„[å¤–éƒ¨å˜é‡]</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#c11%E9%9D%9E%E5%8F%97%E9%99%90%E8%81%94%E5%90%88%E4%BD%93union">C++11éå—é™è”åˆä½“ï¼ˆunionï¼‰</a>
<ul>
<li><a href="#1-c11-%E5%85%81%E8%AE%B8%E9%9D%9E-pod-%E7%B1%BB%E5%9E%8B">1. C++11 å…è®¸é POD ç±»å‹</a></li>
<li><a href="#2-c11-%E5%85%81%E8%AE%B8%E8%81%94%E5%90%88%E4%BD%93%E6%9C%89%E9%9D%99%E6%80%81%E6%88%90%E5%91%98">2. C++11 å…è®¸è”åˆä½“æœ‰é™æ€æˆå‘˜</a></li>
</ul>
</li>
<li><a href="#%E9%9D%9E%E5%8F%97%E9%99%90%E8%81%94%E5%90%88%E4%BD%93%E7%9A%84%E8%B5%8B%E5%80%BC%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">éå—é™è”åˆä½“çš„èµ‹å€¼æ³¨æ„äº‹é¡¹</a>
<ul>
<li><a href="#placement-new-%E6%98%AF%E4%BB%80%E4%B9%88">placement new æ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
</ul>
</li>
<li><a href="#%E9%9D%9E%E5%8F%97%E9%99%90%E8%81%94%E5%90%88%E4%BD%93%E7%9A%84%E5%8C%BF%E5%90%8D%E5%A3%B0%E6%98%8E%E5%92%8C%E6%9E%9A%E4%B8%BE%E5%BC%8F%E7%B1%BB">éå—é™è”åˆä½“çš„åŒ¿åå£°æ˜å’Œâ€œæšä¸¾å¼ç±»â€</a></li>
<li><a href="#c11-for%E5%BE%AA%E7%8E%AF%E5%9F%BA%E4%BA%8E%E8%8C%83%E5%9B%B4%E7%9A%84%E5%BE%AA%E7%8E%AF%E8%AF%A6%E8%A7%A3">C++11 forå¾ªç¯ï¼ˆåŸºäºèŒƒå›´çš„å¾ªç¯ï¼‰è¯¦è§£</a></li>
<li><a href="#c11-for%E5%BE%AA%E7%8E%AF%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">C++11 forå¾ªç¯ä½¿ç”¨æ³¨æ„äº‹é¡¹</a></li>
<li><a href="#c11-constexpr%E9%AA%8C%E8%AF%81%E6%98%AF%E5%90%A6%E4%B8%BA%E5%B8%B8%E9%87%8F%E8%A1%A8%E8%BE%BE%E5%BC%8F%E9%95%BF%E7%AF%87%E7%A5%9E%E6%96%87">C++11 constexprï¼šéªŒè¯æ˜¯å¦ä¸ºå¸¸é‡è¡¨è¾¾å¼ï¼ˆé•¿ç¯‡ç¥æ–‡ï¼‰</a>
<ul>
<li><a href="#constexpr%E4%BF%AE%E9%A5%B0%E6%99%AE%E9%80%9A%E5%8F%98%E9%87%8F">constexprä¿®é¥°æ™®é€šå˜é‡</a></li>
<li><a href="#constexpr%E4%BF%AE%E9%A5%B0%E5%87%BD%E6%95%B0">constexprä¿®é¥°å‡½æ•°</a></li>
<li><a href="#constexpr%E4%BF%AE%E9%A5%B0%E7%B1%BB%E7%9A%84%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0">constexprä¿®é¥°ç±»çš„æ„é€ å‡½æ•°</a></li>
<li><a href="#constexpr%E4%BF%AE%E9%A5%B0%E6%A8%A1%E6%9D%BF%E5%87%BD%E6%95%B0">constexprä¿®é¥°æ¨¡æ¿å‡½æ•°</a></li>
</ul>
</li>
<li><a href="#c11-constexpr%E5%92%8Cconst%E7%9A%84%E5%8C%BA%E5%88%AB">C++11 constexprå’Œconstçš„åŒºåˆ«</a></li>
<li><a href="#c11-long-long%E8%B6%85%E9%95%BF%E6%95%B4%E5%BD%A2%E8%AF%A6%E8%A7%A3">C++11 long longè¶…é•¿æ•´å½¢è¯¦è§£</a></li>
<li><a href="#c11%E5%8F%B3%E5%80%BC%E5%BC%95%E7%94%A8%E4%B8%80%E7%9C%8B%E5%8D%B3%E6%87%82">C++11å³å€¼å¼•ç”¨ï¼ˆä¸€çœ‹å³æ‡‚ï¼‰</a>
<ul>
<li><a href="#c%E5%B7%A6%E5%80%BC%E5%92%8C%E5%8F%B3%E5%80%BC">C++å·¦å€¼å’Œå³å€¼</a></li>
<li><a href="#c%E5%8F%B3%E5%80%BC%E5%BC%95%E7%94%A8">C++å³å€¼å¼•ç”¨</a></li>
</ul>
</li>
<li><a href="#c11%E7%A7%BB%E5%8A%A8%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%9A%84%E5%8A%9F%E8%83%BD%E5%92%8C%E7%94%A8%E6%B3%95">C++11ç§»åŠ¨æ„é€ å‡½æ•°çš„åŠŸèƒ½å’Œç”¨æ³•</a>
<ul>
<li><a href="#c11%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%E6%98%AF%E4%BB%80%E4%B9%88">C++11ç§»åŠ¨è¯­ä¹‰æ˜¯ä»€ä¹ˆ</a></li>
<li><a href="#c%E7%A7%BB%E5%8A%A8%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%E7%9A%84%E5%85%B7%E4%BD%93%E5%AE%9E%E7%8E%B0">C++ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆç§»åŠ¨è¯­ä¹‰çš„å…·ä½“å®ç°ï¼‰</a></li>
</ul>
</li>
<li><a href="#c11-move%E5%87%BD%E6%95%B0%E5%B0%86%E5%B7%A6%E5%80%BC%E5%BC%BA%E5%88%B6%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%8F%B3%E5%80%BC">C++11 move()å‡½æ•°ï¼šå°†å·¦å€¼å¼ºåˆ¶è½¬æ¢ä¸ºå³å€¼</a></li>
<li><a href="#c11%E5%BC%95%E7%94%A8%E9%99%90%E5%AE%9A%E7%AC%A6%E7%9A%84%E7%94%A8%E6%B3%95">C++11å¼•ç”¨é™å®šç¬¦çš„ç”¨æ³•</a>
<ul>
<li><a href="#const%E5%92%8C%E5%BC%95%E7%94%A8%E9%99%90%E5%AE%9A%E7%AC%A6">constå’Œå¼•ç”¨é™å®šç¬¦</a></li>
</ul>
</li>
<li><a href="#c11%E5%AE%8C%E7%BE%8E%E8%BD%AC%E5%8F%91%E5%8F%8A%E5%85%B6%E5%AE%9E%E7%8E%B0">C++11å®Œç¾è½¬å‘åŠå…¶å®ç°</a></li>
<li><a href="#c11-nullptr%E5%88%9D%E5%A7%8B%E5%8C%96%E7%A9%BA%E6%8C%87%E9%92%88">C++11 nullptrï¼šåˆå§‹åŒ–ç©ºæŒ‡é’ˆ</a></li>
<li><a href="#c11-shared_ptr%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88%E8%B6%85%E7%BA%A7%E8%AF%A6%E7%BB%86">C++11 shared_ptræ™ºèƒ½æŒ‡é’ˆï¼ˆè¶…çº§è¯¦ç»†ï¼‰</a>
<ul>
<li><a href="#c11-shared_ptr%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88">C++11 shared_ptræ™ºèƒ½æŒ‡é’ˆ</a>
<ul>
<li><a href="#1shared_ptr%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88%E7%9A%84%E5%88%9B%E5%BB%BA">1ã€shared_ptræ™ºèƒ½æŒ‡é’ˆçš„åˆ›å»º</a></li>
<li><a href="#2shared_ptr%E6%A8%A1%E6%9D%BF%E7%B1%BB%E6%8F%90%E4%BE%9B%E7%9A%84%E6%88%90%E5%91%98%E6%96%B9%E6%B3%95">2ã€shared_ptræ¨¡æ¿ç±»æä¾›çš„æˆå‘˜æ–¹æ³•</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#c11-unique_ptr%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88">C++11 unique_ptræ™ºèƒ½æŒ‡é’ˆ</a>
<ul>
<li><a href="#unique_ptr%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88%E7%9A%84%E5%88%9B%E5%BB%BA">unique_ptræ™ºèƒ½æŒ‡é’ˆçš„åˆ›å»º</a></li>
<li><a href="#unique_ptr%E6%A8%A1%E6%9D%BF%E7%B1%BB%E6%8F%90%E4%BE%9B%E7%9A%84%E6%88%90%E5%91%98%E6%96%B9%E6%B3%95">unique_ptræ¨¡æ¿ç±»æä¾›çš„æˆå‘˜æ–¹æ³•</a></li>
</ul>
</li>
<li><a href="#c11-weak_ptr%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88">C++11 weak_ptræ™ºèƒ½æŒ‡é’ˆ</a>
<ul>
<li><a href="#c11-weak_ptr%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88-1">C++11 weak_ptræ™ºèƒ½æŒ‡é’ˆ</a>
<ul>
<li><a href="#1weak_ptr%E6%8C%87%E9%92%88%E7%9A%84%E5%88%9B%E5%BB%BA">1ã€weak_ptræŒ‡é’ˆçš„åˆ›å»º</a></li>
<li><a href="#2-weak_ptr%E6%A8%A1%E6%9D%BF%E7%B1%BB%E6%8F%90%E4%BE%9B%E7%9A%84%E6%88%90%E5%91%98%E6%96%B9%E6%B3%95">2) weak_ptræ¨¡æ¿ç±»æä¾›çš„æˆå‘˜æ–¹æ³•</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#c14-%E6%96%B0%E7%89%B9%E6%80%A7%E6%80%BB%E7%BB%93">C++14 æ–°ç‰¹æ€§æ€»ç»“</a>
<ul>
<li><a href="#%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E5%80%BC%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC">å‡½æ•°è¿”å›å€¼ç±»å‹æ¨å¯¼</a></li>
<li><a href="#lambda%E5%8F%82%E6%95%B0auto">lambdaå‚æ•°auto</a></li>
<li><a href="#%E5%8F%98%E9%87%8F%E6%A8%A1%E6%9D%BF">å˜é‡æ¨¡æ¿</a></li>
<li><a href="#%E5%88%AB%E5%90%8D%E6%A8%A1%E6%9D%BF">åˆ«åæ¨¡æ¿</a></li>
<li><a href="#constexpr%E7%9A%84%E9%99%90%E5%88%B6">constexprçš„é™åˆ¶</a></li>
<li><a href="#deprecated%E6%A0%87%E8%AE%B0">[[<code>deprecated</code>]]æ ‡è®°</a></li>
<li><a href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AD%97%E9%9D%A2%E9%87%8F%E4%B8%8E%E6%95%B4%E5%BD%A2%E5%AD%97%E9%9D%A2%E9%87%8F%E5%88%86%E9%9A%94%E7%AC%A6">äºŒè¿›åˆ¶å­—é¢é‡ä¸æ•´å½¢å­—é¢é‡åˆ†éš”ç¬¦</a></li>
<li><a href="#stdmake_unique">std::make_unique</a></li>
<li><a href="#stdshared_timed_mutex%E4%B8%8Estdshared_lock">std::shared_timed_mutexä¸std::shared_lock</a></li>
<li><a href="#stdinteger_sequence">std::integer_sequence</a></li>
<li><a href="#stdexchange">std::exchange</a></li>
<li><a href="#stdquoted">std::quoted</a></li>
</ul>
</li>
<li><a href="#c17%E6%96%B0%E7%89%B9%E6%80%A7%E6%80%BB%E7%BB%93">C++17æ–°ç‰¹æ€§æ€»ç»“</a>
<ul>
<li><a href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E6%8E%A8%E5%AF%BC">æ„é€ å‡½æ•°æ¨¡æ¿æ¨å¯¼</a></li>
<li><a href="#%E7%BB%93%E6%9E%84%E5%8C%96%E7%BB%91%E5%AE%9A">ç»“æ„åŒ–ç»‘å®š</a></li>
<li><a href="#if-switch%E8%AF%AD%E5%8F%A5%E5%88%9D%E5%A7%8B%E5%8C%96">if-switchè¯­å¥åˆå§‹åŒ–</a></li>
<li><a href="#%E5%86%85%E8%81%94%E5%8F%98%E9%87%8F">å†…è”å˜é‡</a></li>
<li><a href="#%E6%8A%98%E5%8F%A0%E8%A1%A8%E8%BE%BE%E5%BC%8F">æŠ˜å è¡¨è¾¾å¼</a></li>
<li><a href="#constexpr-lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F">constexpr lambdaè¡¨è¾¾å¼</a></li>
<li><a href="#namespace%E5%B5%8C%E5%A5%97">namespaceåµŒå¥—</a></li>
<li><a href="#__has_include%E9%A2%84%E5%A4%84%E7%90%86%E8%A1%A8%E8%BE%BE%E5%BC%8F">__has_includeé¢„å¤„ç†è¡¨è¾¾å¼</a></li>
<li><a href="#%E5%9C%A8lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8this%E6%8D%95%E8%8E%B7%E5%AF%B9%E8%B1%A1%E5%89%AF%E6%9C%AC">åœ¨lambdaè¡¨è¾¾å¼ç”¨*thisæ•è·å¯¹è±¡å‰¯æœ¬</a></li>
<li><a href="#%E6%96%B0%E5%A2%9Eattribute">æ–°å¢Attribute</a></li>
<li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%8D%A2">å­—ç¬¦ä¸²è½¬æ¢</a></li>
<li><a href="#stdvariant">std::variant</a></li>
</ul>
</li>
<li><a href="#stdoptional">std::optional</a>
<ul>
<li><a href="#stdany">std::any</a></li>
<li><a href="#stdapply">std::apply</a></li>
<li><a href="#stdmake_from_tuple">std::make_from_tuple</a></li>
<li><a href="#stdstring_view">std::string_view</a></li>
<li><a href="#as_const">as_const</a></li>
<li><a href="#file_system">file_system</a></li>
<li><a href="#stdshared_mutex">std::shared_mutex</a></li>
</ul>
</li>
<li><a href="#c20-%E6%96%B0%E5%A2%9E%E7%89%B9%E6%80%A7%E6%80%BB%E7%BB%93">C++20 æ–°å¢ç‰¹æ€§æ€»ç»“</a>
<ul>
<li><a href="#%E6%96%B0%E5%A2%9E%E5%85%B3%E9%94%AE%E5%AD%97keywords">æ–°å¢å…³é”®å­—(keywords)</a></li>
<li><a href="#%E6%96%B0%E5%A2%9E%E6%A0%87%E8%AF%86%E7%AC%A6identifies">æ–°å¢æ ‡è¯†ç¬¦(Identifies)</a></li>
<li><a href="#%E6%A8%A1%E5%9D%97modules">æ¨¡å—(Modules)</a>
<ul>
<li><a href="#%E4%BC%98%E7%82%B9">ä¼˜ç‚¹</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%9D%97">åˆ›å»ºæ¨¡å—</a></li>
<li><a href="#%E5%BC%95%E7%94%A8%E6%A8%A1%E5%9D%97">å¼•ç”¨æ¨¡å—</a></li>
<li><a href="#import-%E5%A4%B4%E6%96%87%E4%BB%B6">import å¤´æ–‡ä»¶</a></li>
</ul>
</li>
<li><a href="#ranges">Ranges</a>
<ul>
<li><a href="#%E4%BE%8B%E5%AD%90">ä¾‹å­</a></li>
</ul>
</li>
<li><a href="#%E5%8D%8F%E7%A8%8Bcoroutines">åç¨‹(Coroutines)</a>
<ul>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%8D%8F%E7%A8%8B">ä»€ä¹ˆæ˜¯åç¨‹</a></li>
<li><a href="#%E4%BE%8B%E5%AD%90vc">ä¾‹å­(VC++)</a></li>
</ul>
</li>
<li><a href="#concepts">Concepts</a>
<ul>
<li><a href="#%E5%A6%82%E4%BD%95%E5%AE%9A%E4%B9%89">å¦‚ä½•å®šä¹‰</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8">ä½¿ç”¨</a></li>
<li><a href="#%E4%BE%8B%E5%AD%90-1">ä¾‹å­</a></li>
</ul>
</li>
<li><a href="#lambda-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E6%9B%B4%E6%96%B0">Lambda è¡¨è¾¾å¼çš„æ›´æ–°</a>
<ul>
<li><a href="#-this-%E9%9C%80%E8%A6%81%E6%98%BE%E5%BC%8F%E6%8D%95%E8%8E%B7this%E5%8F%98%E9%87%8F">[=, this] éœ€è¦æ˜¾å¼æ•è·<code>this</code>å˜é‡</a></li>
<li><a href="#%E6%A8%A1%E6%9D%BF%E5%BD%A2%E5%BC%8F%E7%9A%84-lambda-%E8%A1%A8%E8%BE%BE%E5%BC%8F">æ¨¡æ¿å½¢å¼çš„ Lambda è¡¨è¾¾å¼</a></li>
<li><a href="#lambda-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%8D%95%E8%8E%B7%E6%94%AF%E6%8C%81%E6%89%93%E5%8C%85%E5%B1%95%E5%BC%80pack-expansion">Lambda è¡¨è¾¾å¼æ•è·æ”¯æŒæ‰“åŒ…å±•å¼€(Pack Expansion)</a></li>
</ul>
</li>
<li><a href="#%E5%B8%B8%E9%87%8F%E8%A1%A8%E8%BE%BE%E5%BC%8Fconstexpr-%E7%9A%84%E6%9B%B4%E6%96%B0">å¸¸é‡è¡¨è¾¾å¼(<code>constexpr</code>) çš„æ›´æ–°</a>
<ul>
<li><a href="#constexpr-string--vector"><code>constexpr</code> string &amp; vector</a></li>
</ul>
</li>
<li><a href="#%E5%8E%9F%E5%AD%90atomic%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88">åŸå­(Atomic)æ™ºèƒ½æŒ‡é’ˆ</a>
<ul>
<li><a href="#%E4%BE%8B%E5%AD%90-2">ä¾‹å­</a></li>
</ul>
</li>
<li><a href="#%E8%87%AA%E5%8A%A8%E5%90%88%E6%B5%81joining-%E5%8F%AF%E4%B8%AD%E6%96%ADcancellable-%E7%9A%84%E7%BA%BF%E7%A8%8B">è‡ªåŠ¨åˆæµ(Joining), å¯ä¸­æ–­(Cancellable) çš„çº¿ç¨‹</a>
<ul>
<li><a href="#%E4%BE%8B%E5%AD%90-3">ä¾‹å­</a></li>
</ul>
</li>
<li><a href="#c20-%E5%90%8C%E6%AD%A5synchronization%E5%BA%93">C++20 åŒæ­¥(Synchronization)åº“</a>
<ul>
<li><a href="#stdatomic_ref">std::atomic_ref</a></li>
</ul>
</li>
<li><a href="#%E5%85%B6%E4%BB%96%E6%9B%B4%E6%96%B0">å…¶ä»–æ›´æ–°</a>
<ul>
<li><a href="#%E6%8C%87%E5%AE%9A%E5%88%9D%E5%A7%8B%E5%8C%96designated-initializers">æŒ‡å®šåˆå§‹åŒ–(Designated Initializers)</a></li>
<li><a href="#%E8%88%AA%E5%A4%A9%E9%A3%9E%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%AC%A6-">èˆªå¤©é£æœºæ“ä½œç¬¦ &lt;=&gt;</a></li>
<li><a href="#%E8%8C%83%E5%9B%B4-for-%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5%E6%94%AF%E6%8C%81%E5%88%9D%E5%A7%8B%E5%8C%96%E8%AF%AD%E5%8F%A5">èŒƒå›´ for å¾ªç¯è¯­å¥æ”¯æŒåˆå§‹åŒ–è¯­å¥</a></li>
<li><a href="#%E9%9D%9E%E7%B1%BB%E5%9E%8B%E6%A8%A1%E6%9D%BF%E5%BD%A2%E5%8F%82%E6%94%AF%E6%8C%81%E5%AD%97%E7%AC%A6%E4%B8%B2">éç±»å‹æ¨¡æ¿å½¢å‚æ”¯æŒå­—ç¬¦ä¸²</a></li>
<li><a href="#likely-unlikely">[[likely]], [[unlikely]]</a></li>
<li><a href="#%E6%97%A5%E5%8E%86calendar%E5%92%8C%E6%97%B6%E5%8C%BAtimezone%E5%8A%9F%E8%83%BD">æ—¥å†(Calendar)å’Œæ—¶åŒº(Timezone)åŠŸèƒ½</a></li>
<li><a href="#stdspan">std::span</a></li>
<li><a href="#%E7%89%B9%E6%80%A7%E6%B5%8B%E8%AF%95%E5%AE%8F">ç‰¹æ€§æµ‹è¯•å®</a></li>
<li><a href="#"></a></li>
<li><a href="#consteval-%E5%87%BD%E6%95%B0"><code>consteval</code> å‡½æ•°</a></li>
<li><a href="#constinit"><code>constinit</code></a></li>
<li><a href="#%E7%94%A8-using-%E5%BC%95%E7%94%A8-enum-%E7%B1%BB%E5%9E%8B">ç”¨ <code>using</code> å¼•ç”¨ <code>enum</code> ç±»å‹</a></li>
<li><a href="#%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%BA%93stdformat">æ ¼å¼åŒ–åº“(<code>std::format</code>)</a></li>
<li><a href="#%E5%A2%9E%E5%8A%A0%E6%95%B0%E5%AD%A6%E5%B8%B8%E9%87%8F">å¢åŠ æ•°å­¦å¸¸é‡</a></li>
<li><a href="#stdsource_location">std::source_location</a></li>
<li><a href="#nodiscardreason">[[nodiscard(reason)]]</a></li>
<li><a href="#%E4%BD%8D%E8%BF%90%E7%AE%97">ä½è¿ç®—</a></li>
<li><a href="#%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%9B%B4%E6%96%B0">ä¸€äº›å°æ›´æ–°</a></li>
<li><a href="#%E7%9B%AE%E5%BD%95">ç›®å½•</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="c-11æ˜¯ä»€ä¹ˆ-c-11æ ‡å‡†çš„ç”±æ¥"><a class="header-anchor" href="#c-11æ˜¯ä»€ä¹ˆ-c-11æ ‡å‡†çš„ç”±æ¥">ğŸŒ³</a>C++ 11æ˜¯ä»€ä¹ˆï¼ŒC++ 11æ ‡å‡†çš„ç”±æ¥</h3>
<p>C++ è¿™é—¨ç¼–ç¨‹è¯­è¨€çš„å†å²å¯ä»¥è¿½æº¯è‡³ 1979 å¹´ï¼Œå½“æ—¶çš„ Bjarne Stroustrupï¼ˆC++ ä¹‹çˆ¶ï¼Œåç»­ç®€ç§° Stroustrupï¼‰è¿˜åœ¨ä½¿ç”¨ Simula è¯­è¨€è¿›è¡Œå¼€å‘å·¥ä½œã€‚</p>
<p>å›¾ 1 C++ä¹‹çˆ¶ï¼ŒBjarne Stroustrup</p>
<p>Simula è¯­è¨€è¢«è®¤ä¸ºæ˜¯ç¬¬ä¸€ä¸ªé¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ã€‚Stroustrup ä¹Ÿéå¸¸èµèµ Simula è¯­è¨€çš„è¿™ç§ç‰¹æ€§ï¼Œä½†ç”±äºå®ä¾‹å¼€å‘ä¸­ Simula è¯­è¨€çš„æ‰§è¡Œæ•ˆç‡å¤ªä½ï¼Œæ‰€ä»¥æ­¤åä¸ä¹…ï¼ŒStroustrup å¼€å§‹ä»äº‹â€œå¸¦ç±»çš„Câ€ç¼–ç¨‹è¯­è¨€çš„å¼€å‘å·¥ä½œã€‚</p>
<blockquote>
<p>æ³¨æ„åœ¨å¼€å‘åˆæœŸï¼Œå¹¶æ²¡æœ‰ C++ è¿™ä¸ªç§°è°“ã€‚æ‰€è°“â€œå¸¦ç±»çš„Câ€ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯åœ¨ C è¯­è¨€çš„åŸºç¡€ä¸Šï¼Œä¸ºå…¶åŠ å…¥é¢å‘å¯¹è±¡çš„æ€æƒ³ï¼ˆæ‰©å¢ä¸€äº›å†™å¥½çš„ç±»å’Œå¯¹è±¡ï¼‰ã€‚åˆæœŸçš„ C++ é™¤äº†å…·å¤‡ C è¯­è¨€çš„æ‰€æœ‰åŠŸèƒ½å¤–ï¼Œè¿˜å…·æœ‰ç±»ã€åŸºæœ¬ç»§æ‰¿ã€å†…è”å‡½æ•°ã€é»˜è®¤å‡½æ•°å‚æ•°ä»¥åŠå¼ºç±»å‹æ£€æŸ¥ç­‰ç®€å•åŠŸèƒ½ã€‚</p>
</blockquote>
<p>ä¸ä»…å¦‚æ­¤ï¼ŒStroustrup è¿˜åœ¨ CPreï¼ˆCè¯­è¨€ç¼–è¯‘å™¨ï¼‰çš„åŸºç¡€ä¸Šï¼Œä¸“é—¨ä¸ºâ€œå¸¦ç±»çš„Câ€å¼€å‘äº†ä¸€ä¸ªç¼–è¯‘å™¨ï¼Œç§°ä¸º Cfrontï¼Œå®ƒå¯ä»¥å°†å¸¦æœ‰ç±»çš„ C ä»£ç è‡ªåŠ¨è½¬æ¢ä¸ºæ™®é€š C è¯­è¨€ç¨‹åºã€‚å€¼å¾—ä¸€æçš„æ˜¯åœ¨ 1993 å¹´ï¼ŒCfront å› éš¾ä»¥æ”¯æŒ C++ å¼‚å¸¸æœºåˆ¶è¢«å¼ƒç”¨ã€‚</p>
<p>1983 å¹´ï¼Œâ€œå¸¦ç±»çš„Câ€æ­£å¼è¢«ç§°ä¸ºâ€œC++â€ï¼Œå…¶ä¸­â€œ++â€å°±å–è‡ª C è¯­è¨€ä¸­çš„â€œ++â€è¿ç®—ç¬¦ï¼Œè¿™ä¹Ÿä»ä¾§é¢è¡¨æ˜äº† Stroustrup å¯¹äº C++ è¿™é—¨ç¼–ç¨‹è¯­è¨€çš„å®šä½ã€‚ ä¸æ­¤åŒæ—¶ï¼ŒC++è¿˜å¢æ·»äº†å¾ˆå¤šåŠŸèƒ½ï¼Œæ¯”å¦‚è™šå‡½æ•°ã€å‡½æ•°é‡è½½ã€å¼•ç”¨ã€const å…³é”®å­—ä»¥åŠ // æ³¨é‡Šç¬¦å·ç­‰ã€‚</p>
<blockquote>
<p>åœ¨éšåçš„å‡ å¹´æ—¶é—´é‡Œï¼ŒC++ å¾—åˆ°äº†å¿«é€Ÿåœ°å‘å±•ã€‚æ¯”å¦‚è¯´ï¼Œ C++ ä¸æ–­åœ°è¢«æ›´æ–°ï¼Œç±»ä¸­å¢åŠ äº†å—ä¿æŠ¤æˆå‘˜ï¼ˆprotectedï¼‰å’Œç§æœ‰æˆå‘˜ï¼ˆprivateï¼‰ï¼Œå¹¶å…è®¸ä½¿ç”¨å¤šç»§æ‰¿ç­‰ï¼›Stroustrup å‡ºç‰ˆäº† ã€Šå¸¦æ³¨é‡Šçš„C++å‚è€ƒæ‰‹å†Œã€‹ä¸€ä¹¦ï¼Œå…¶ä¸€åº¦è¢«å½“åš C++ å¼€å‘çš„é‡è¦å‚è€ƒï¼›Borland å‘å¸ƒäº† Turbo C ++ç¼–è¯‘å™¨ï¼Œè¯¥ç¼–è¯‘å™¨åŒ…å«æœ‰å¤§é‡çš„ç¬¬ä¸‰æ–¹ C++ åº“ï¼Œæå¤§ä¾¿åˆ©äº† C ++ çš„å¼€å‘ï¼Œç­‰ç­‰ã€‚</p>
</blockquote>
<p>ç›´åˆ° 1998 å¹´ï¼ŒC++ æ ‡å‡†å§”å‘˜ä¼šå‘å¸ƒäº†ç¬¬ä¸€ç‰ˆ C++ æ ‡å‡†ï¼Œå¹¶å°†å…¶å‘½åä¸º C++ 98 æ ‡å‡†ã€‚æ®ä¸çŸ¥åäººå£«é€éœ²ï¼Œã€Šå¸¦æ³¨é‡Šçš„C++å‚è€ƒæ‰‹å†Œã€‹è¿™æœ¬ä¹¦å¯¹ C++ 98 æ ‡å‡†çš„åˆ¶å®šäº§ç”Ÿäº†å¾ˆå¤§çš„å½±å“ã€‚</p>
<p>ç»è¿‡ä½œè€…çš„ä¸æ–­è¿­ä»£ï¼Œä¸€æœ¬ä¹¦å¾€å¾€ä¼šå…ˆåå‘å¸ƒå¾ˆå¤šä¸ªç‰ˆæœ¬ï¼Œå…¶ä¸­æ¯ä¸ªæ–°ç‰ˆæœ¬éƒ½æ˜¯å¯¹å‰ä¸€ä¸ªç‰ˆæœ¬çš„ä¿®æ­£å’Œæ›´æ–°ã€‚C++ ç¼–ç¨‹è¯­è¨€çš„å‘å±•ä¹Ÿæ˜¯å¦‚æ­¤ã€‚æˆªæ­¢åˆ°ç›®å‰ï¼ˆ2020 å¹´ï¼‰ï¼ŒC++ çš„å‘å±•å†ç»äº†ä»¥ä¸‹ 3 ä¸ªä¸ªæ ‡å‡†ï¼š</p>
<ul>
<li>[?] #check dd</li>
</ul>
<ul>
<li>2011 å¹´ï¼Œæ–°çš„ C++ 11 æ ‡å‡†è¯ç”Ÿï¼Œç”¨äºå–ä»£ C++ 98 æ ‡å‡†ã€‚æ­¤æ ‡å‡†è¿˜æœ‰ä¸€ä¸ªåˆ«åï¼Œä¸ºâ€œC++ 0xâ€ï¼›</li>
<li>2014 å¹´ï¼ŒC++ 14 æ ‡å‡†å‘å¸ƒï¼Œè¯¥æ ‡å‡†åº“å¯¹ C++ 11 æ ‡å‡†åº“åšäº†æ›´ä¼˜çš„ä¿®æ”¹å’Œæ›´æ–°ï¼›</li>
<li>2017 å¹´åº•ï¼ŒC++ 17 æ ‡å‡†æ­£å¼é¢å¸ƒã€‚</li>
</ul>
<blockquote>
<p>æ‰€è°“æ ‡å‡†ï¼Œå³æ˜ç¡® C++ ä»£ç çš„ç¼–å†™è§„èŒƒï¼Œæ‰€æœ‰çš„ C++ ç¨‹åºå‘˜éƒ½åº”éµå®ˆæ­¤æ ‡å‡†ã€‚</p>
</blockquote>
<p>å€¼å¾—ä¸€æçš„æ˜¯åœ¨ C++ 11 æ ‡å‡†ä¹‹å‰ï¼ŒC++ æ ‡å‡†å§”å‘˜ä¼šè¿˜åœ¨ 2003 å¹´å¯¹ C++ 98 æ ‡å‡†åšäº†ä¸€æ¬¡ä¿®æ”¹ï¼ˆç§°ä¸º C++ 03 æ ‡å‡†ï¼‰ï¼Œä½†ç”±äºå…¶ä»…ä»…ä¿®å¤äº†ä¸€äº› C++ 98 æ ‡å‡†ä¸­å­˜åœ¨çš„æ¼æ´ï¼Œå¹¶æœªä¿®æ”¹æ ¸å¿ƒè¯­æ³•ï¼Œå› æ­¤äººä»¬ä¹ æƒ¯å°†è¿™æ¬¡ä¿®è®¢å’Œ C++ 98 åˆç§°ä¸º C++98/03 æ ‡å‡†ã€‚</p>
<p>ä»¥ä¸Š 3 ä¸ªæ ‡å‡†ä¸­ï¼Œç›¸æ¯”å¯¹å‰ä¸€ä¸ªç‰ˆæœ¬çš„ä¿®æ”¹å’Œæ›´æ–°ç¨‹åº¦ï¼ŒC++ 11 æ ‡å‡†æ— ç–‘æ˜¯é¢ è¦†æ€§çš„ï¼Œè¯¥æ ‡å‡†åœ¨ C++ 98 çš„åŸºç¡€ä¸Šä¿®æ­£äº†çº¦ 600 ä¸ª C++ è¯­è¨€ä¸­å­˜åœ¨çš„ç¼ºé™·ï¼ŒåŒæ—¶æ·»åŠ äº†çº¦ 140 ä¸ªæ–°ç‰¹æ€§ï¼Œè¿™äº›æ›´æ–°ä½¿å¾— C++ è¯­è¨€ç„•ç„¶ä¸€æ–°ã€‚è¯»è€…å¯ä»¥è¿™æ ·ç†è§£ C++ 11 æ ‡å‡†ï¼Œå®ƒåœ¨ C++ 98/03 æ ‡å‡†çš„åŸºç¡€ä¸Šå­•è‚²å‡ºäº†å…¨æ–°çš„ C++ ç¼–ç¨‹è¯­è¨€ï¼Œé€ å°±äº† C++ æ–°çš„å¼€å§‹ã€‚</p>
<p>é‚£ä¹ˆï¼ŒC++ 11 æ ‡å‡†åˆ°åº•åŒ…å«å“ªäº›æ–°ç‰¹æ€§å‘¢ï¼Ÿåˆ«æ€¥ï¼Œæ¥ä¸‹æ¥ä¼šåˆ†ç¯‡ç»™å¤§å®¶åšè¯¦ç»†åœ°è®²è§£ã€‚</p>
<h3 id="c-autoç±»å‹æ¨å¯¼å®Œå…¨æ”»ç•¥"><a class="header-anchor" href="#c-autoç±»å‹æ¨å¯¼å®Œå…¨æ”»ç•¥">ğŸŒ³</a>C++ autoç±»å‹æ¨å¯¼å®Œå…¨æ”»ç•¥</h3>
<p>åœ¨ <a href="http://c.biancheng.net/cplus/">C++</a>11 ä¹‹å‰çš„ç‰ˆæœ¬ï¼ˆC++98 å’Œ C++ 03ï¼‰ä¸­ï¼Œå®šä¹‰å˜é‡æˆ–è€…å£°æ˜å˜é‡ä¹‹å‰éƒ½å¿…é¡»æŒ‡æ˜å®ƒçš„ç±»å‹ï¼Œæ¯”å¦‚ intã€char ç­‰ï¼›ä½†æ˜¯åœ¨ä¸€äº›æ¯”è¾ƒçµæ´»çš„è¯­è¨€ä¸­ï¼Œæ¯”å¦‚ <a href="http://c.biancheng.net/csharp/">C#</a>ã€<a href="http://c.biancheng.net/js/">JavaScript</a>ã€<a href="http://c.biancheng.net/php/">PHP</a>ã€<a href="http://c.biancheng.net/python/">Python</a> ç­‰ï¼Œç¨‹åºå‘˜åœ¨å®šä¹‰å˜é‡æ—¶å¯ä»¥ä¸æŒ‡æ˜å…·ä½“çš„ç±»å‹ï¼Œè€Œæ˜¯è®©ç¼–è¯‘å™¨ï¼ˆæˆ–è€…è§£é‡Šå™¨ï¼‰è‡ªå·±å»æ¨å¯¼ï¼Œè¿™å°±è®©ä»£ç çš„ç¼–å†™æ›´åŠ æ–¹ä¾¿ã€‚</p>
<p>C++11 ä¸ºäº†é¡ºåº”è¿™ç§è¶‹åŠ¿ä¹Ÿå¼€å§‹æ”¯æŒè‡ªåŠ¨ç±»å‹æ¨å¯¼äº†ï¼C++11 ä½¿ç”¨ <strong>auto</strong> å…³é”®å­—æ¥æ”¯æŒè‡ªåŠ¨ç±»å‹æ¨å¯¼ã€‚</p>
<h4 id="auto-ç±»å‹æ¨å¯¼çš„è¯­æ³•å’Œè§„åˆ™"><a class="header-anchor" href="#auto-ç±»å‹æ¨å¯¼çš„è¯­æ³•å’Œè§„åˆ™">ğŸŒ³</a>auto ç±»å‹æ¨å¯¼çš„è¯­æ³•å’Œè§„åˆ™</h4>
<p>åœ¨ä¹‹å‰çš„ C++ ç‰ˆæœ¬ä¸­ï¼Œauto å…³é”®å­—ç”¨æ¥æŒ‡æ˜å˜é‡çš„å­˜å‚¨ç±»å‹ï¼Œå®ƒå’Œ static å…³é”®å­—æ˜¯ç›¸å¯¹çš„ã€‚auto è¡¨ç¤ºå˜é‡æ˜¯è‡ªåŠ¨å­˜å‚¨çš„ï¼Œè¿™ä¹Ÿæ˜¯ç¼–è¯‘å™¨çš„é»˜è®¤è§„åˆ™ï¼Œæ‰€ä»¥å†™ä¸å†™éƒ½ä¸€æ ·ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¹Ÿä¸å†™ï¼Œè¿™ä½¿å¾— auto å…³é”®å­—çš„å­˜åœ¨å˜å¾—éå¸¸é¸¡è‚‹ã€‚</p>
<p>C++11 èµ‹äºˆ auto å…³é”®å­—æ–°çš„å«ä¹‰ï¼Œä½¿ç”¨å®ƒæ¥åšè‡ªåŠ¨ç±»å‹æ¨å¯¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨äº† auto å…³é”®å­—ä»¥åï¼Œç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘æœŸé—´è‡ªåŠ¨æ¨å¯¼å‡ºå˜é‡çš„ç±»å‹ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨æ‰‹åŠ¨æŒ‡æ˜å˜é‡çš„æ•°æ®ç±»å‹äº†ã€‚</p>
<p>auto å…³é”®å­—åŸºæœ¬çš„ä½¿ç”¨è¯­æ³•å¦‚ä¸‹ï¼š</p>
<p>auto name = value;</p>
<p>name æ˜¯å˜é‡çš„åå­—ï¼Œvalue æ˜¯å˜é‡çš„åˆå§‹å€¼ã€‚</p>
<p>æ³¨æ„ï¼šauto ä»…ä»…æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œåœ¨ç¼–è¯‘å™¨æœŸé—´å®ƒä¼šè¢«çœŸæ­£çš„ç±»å‹æ‰€æ›¿ä»£ã€‚æˆ–è€…è¯´ï¼ŒC++ ä¸­çš„å˜é‡å¿…é¡»æ˜¯æœ‰æ˜ç¡®ç±»å‹çš„ï¼Œåªæ˜¯è¿™ä¸ªç±»å‹æ˜¯ç”±ç¼–è¯‘å™¨è‡ªå·±æ¨å¯¼å‡ºæ¥çš„ã€‚</p>
<p>auto ç±»å‹æ¨å¯¼çš„ç®€å•ä¾‹å­ï¼š</p>
<p>auto n = 10;<br>
auto f = 12.8;<br>
auto p = &amp;n;<br>
auto url = â€œ<a href="http://c.biancheng.net/cplus/%E2%80%9D;">http://c.biancheng.net/cplus/â€;</a></p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹ï¼š</p>
<ul>
<li>ç¬¬ 1 è¡Œä¸­ï¼Œ10 æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œé»˜è®¤æ˜¯ int ç±»å‹ï¼Œæ‰€ä»¥æ¨å¯¼å‡ºå˜é‡ n çš„ç±»å‹æ˜¯ intã€‚</li>
<li>ç¬¬ 2 è¡Œä¸­ï¼Œ12.8 æ˜¯ä¸€ä¸ªå°æ•°ï¼Œé»˜è®¤æ˜¯ double ç±»å‹ï¼Œæ‰€ä»¥æ¨å¯¼å‡ºå˜é‡ f çš„ç±»å‹æ˜¯ doubleã€‚</li>
<li>ç¬¬ 3 è¡Œä¸­ï¼Œ&amp;n çš„ç»“æœæ˜¯ä¸€ä¸ª int* ç±»å‹çš„æŒ‡é’ˆï¼Œæ‰€ä»¥æ¨å¯¼å‡ºå˜é‡ p çš„ç±»å‹æ˜¯ int*ã€‚</li>
<li>ç¬¬ 4 è¡Œä¸­ï¼Œç”±åŒå¼•å·<code>&quot;&quot;</code>åŒ…å›´èµ·æ¥çš„å­—ç¬¦ä¸²æ˜¯ const char* ç±»å‹ï¼Œæ‰€ä»¥æ¨å¯¼å‡ºå˜é‡ url çš„ç±»å‹æ˜¯ const char*ï¼Œä¹Ÿå³ä¸€ä¸ªå¸¸é‡æŒ‡é’ˆã€‚</li>
</ul>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿ç»­å®šä¹‰å¤šä¸ªå˜é‡ï¼š</p>
<p>int n = 20;<br>
auto *p = &amp;n, m = 99;</p>
<p>å…ˆçœ‹å‰é¢çš„ç¬¬ä¸€ä¸ªå­è¡¨è¾¾å¼ï¼Œ&amp;n çš„ç±»å‹æ˜¯ int*ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ® auto *p æ¨å¯¼å‡º auto ä¸º intã€‚åé¢çš„ m å˜é‡è‡ªç„¶ä¹Ÿä¸º int ç±»å‹ï¼Œæ‰€ä»¥æŠŠ 99 èµ‹å€¼ç»™å®ƒä¹Ÿæ˜¯æ­£ç¡®çš„ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬è¦æ³¨æ„ï¼Œæ¨å¯¼çš„æ—¶å€™ä¸èƒ½æœ‰äºŒä¹‰æ€§ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œç¼–è¯‘å™¨æ ¹æ®ç¬¬ä¸€ä¸ªå­è¡¨è¾¾å¼å·²ç»æ¨å¯¼å‡º auto ä¸º int ç±»å‹ï¼Œé‚£ä¹ˆåé¢çš„ m ä¹Ÿåªèƒ½æ˜¯ int ç±»å‹ï¼Œå¦‚æœå†™ä½œ<code>m=12.5</code>å°±æ˜¯é”™è¯¯çš„ï¼Œå› ä¸º 12.5 æ˜¯double ç±»å‹ï¼Œè¿™å’Œ int æ˜¯å†²çªçš„ã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼šä½¿ç”¨ auto ç±»å‹æ¨å¯¼çš„å˜é‡å¿…é¡»é©¬ä¸Šåˆå§‹åŒ–ï¼Œè¿™ä¸ªå¾ˆå®¹æ˜“ç†è§£ï¼Œå› ä¸º auto åœ¨ C++11 ä¸­åªæ˜¯â€œå ä½ç¬¦â€ï¼Œå¹¶éå¦‚ int ä¸€æ ·çš„çœŸæ­£çš„ç±»å‹å£°æ˜ã€‚</p>
<h4 id="auto-çš„é«˜çº§ç”¨æ³•"><a class="header-anchor" href="#auto-çš„é«˜çº§ç”¨æ³•">ğŸŒ³</a>auto çš„é«˜çº§ç”¨æ³•</h4>
<p>auto é™¤äº†å¯ä»¥ç‹¬ç«‹ä½¿ç”¨ï¼Œè¿˜å¯ä»¥å’ŒæŸäº›å…·ä½“ç±»å‹æ··åˆä½¿ç”¨ï¼Œè¿™æ · auto è¡¨ç¤ºçš„å°±æ˜¯â€œåŠä¸ªâ€ç±»å‹ï¼Œè€Œä¸æ˜¯å®Œæ•´çš„ç±»å‹ã€‚è¯·çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>  x = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">auto</span> *p1 = &amp;x;   <span class="comment">//p1 ä¸º int *ï¼Œauto æ¨å¯¼ä¸º int</span></span><br><span class="line"><span class="keyword">auto</span>  p2 = &amp;x;   <span class="comment">//p2 ä¸º int*ï¼Œauto æ¨å¯¼ä¸º int*</span></span><br><span class="line"><span class="keyword">auto</span> &amp;r1  = x;   <span class="comment">//r1 ä¸º int&amp;ï¼Œauto æ¨å¯¼ä¸º int</span></span><br><span class="line"><span class="keyword">auto</span> r2 = r1;    <span class="comment">//r2 ä¸º  intï¼Œauto æ¨å¯¼ä¸º int</span></span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹ï¼š</p>
<ul>
<li>ç¬¬ 2 è¡Œä»£ç ä¸­ï¼Œp1 ä¸º int* ç±»å‹ï¼Œä¹Ÿå³ auto * ä¸º int *ï¼Œæ‰€ä»¥ auto è¢«æ¨å¯¼æˆäº† int ç±»å‹ã€‚</li>
<li>ç¬¬ 3 è¡Œä»£ç ä¸­ï¼Œauto è¢«æ¨å¯¼ä¸º int* ç±»å‹ï¼Œå‰è¾¹çš„ä¾‹å­ä¹Ÿå·²ç»æ¼”ç¤ºè¿‡äº†ã€‚</li>
<li>ç¬¬ 4 è¡Œä»£ç ä¸­ï¼Œr1 ä¸º int &amp; ç±»å‹ï¼Œauto è¢«æ¨å¯¼ä¸º int ç±»å‹ã€‚</li>
<li>ç¬¬ 5 è¡Œä»£ç æ˜¯éœ€è¦é‡ç‚¹è¯´æ˜çš„ï¼Œr1 æœ¬æ¥æ˜¯ int&amp; ç±»å‹ï¼Œä½†æ˜¯ auto å´è¢«æ¨å¯¼ä¸º int ç±»å‹ï¼Œè¿™è¡¨æ˜å½“<code>=</code>å³è¾¹çš„è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹æ—¶ï¼Œauto ä¼šæŠŠå¼•ç”¨æŠ›å¼ƒï¼Œç›´æ¥æ¨å¯¼å‡ºå®ƒçš„åŸå§‹ç±»å‹ã€‚</li>
</ul>
<ul>
<li>[?] #check</li>
</ul>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ auto å’Œ const çš„ç»“åˆï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>  x = <span class="number">0</span>;</span><br><span class="line"><span class="type">const</span>  <span class="keyword">auto</span> n = x;  <span class="comment">//n ä¸º const int ï¼Œauto è¢«æ¨å¯¼ä¸º int</span></span><br><span class="line"><span class="keyword">auto</span> f = n;      <span class="comment">//f ä¸º const intï¼Œauto è¢«æ¨å¯¼ä¸º intï¼ˆconst å±æ€§è¢«æŠ›å¼ƒï¼‰</span></span><br><span class="line"><span class="type">const</span> <span class="keyword">auto</span> &amp;r1 = x;  <span class="comment">//r1 ä¸º const int&amp; ç±»å‹ï¼Œauto è¢«æ¨å¯¼ä¸º int</span></span><br><span class="line"><span class="keyword">auto</span> &amp;r2 = r1;  <span class="comment">//r1 ä¸º const int&amp; ç±»å‹ï¼Œauto è¢«æ¨å¯¼ä¸º const int ç±»å‹`åœ¨è¿™é‡Œæ’å…¥ä»£ç ç‰‡`</span></span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹ï¼š</p>
<ul>
<li>ç¬¬ 2 è¡Œä»£ç ä¸­ï¼Œn ä¸º const intï¼Œauto è¢«æ¨å¯¼ä¸º intã€‚</li>
<li>ç¬¬ 3 è¡Œä»£ç ä¸­ï¼Œn ä¸º const int ç±»å‹ï¼Œä½†æ˜¯ auto å´è¢«æ¨å¯¼ä¸º int ç±»å‹ï¼Œè¿™è¯´æ˜å½“<code>=</code>å³è¾¹çš„è¡¨è¾¾å¼å¸¦æœ‰ const å±æ€§æ—¶ï¼Œ auto ä¸ä¼šä½¿ç”¨ const å±æ€§ï¼Œè€Œæ˜¯ç›´æ¥æ¨å¯¼å‡º non-const ç±»å‹ã€‚</li>
<li>ç¬¬ 4 è¡Œä»£ç ä¸­ï¼Œauto è¢«æ¨å¯¼ä¸º int ç±»å‹ï¼Œè¿™ä¸ªå¾ˆå®¹æ˜“ç†è§£ï¼Œä¸å†èµ˜è¿°ã€‚</li>
<li>ç¬¬ 5 è¡Œä»£ç ä¸­ï¼Œr1 æ˜¯ const int &amp; ç±»å‹ï¼Œauto ä¹Ÿè¢«æ¨å¯¼ä¸º const int ç±»å‹ï¼Œè¿™è¯´æ˜å½“ const å’Œå¼•ç”¨ç»“åˆæ—¶ï¼Œauto çš„æ¨å¯¼å°†ä¿ç•™è¡¨è¾¾å¼çš„ const ç±»å‹ã€‚</li>
</ul>
<p>æœ€åæˆ‘ä»¬æ¥ç®€å•æ€»ç»“ä¸€ä¸‹ auto ä¸ const ç»“åˆçš„ç”¨æ³•ï¼š</p>
<ul>
<li>å½“ç±»å‹ä¸ä¸ºå¼•ç”¨æ—¶ï¼Œauto çš„æ¨å¯¼ç»“æœå°†ä¸ä¿ç•™è¡¨è¾¾å¼çš„ const å±æ€§ï¼›</li>
<li>å½“ç±»å‹ä¸ºå¼•ç”¨æ—¶ï¼Œauto çš„æ¨å¯¼ç»“æœå°†ä¿ç•™è¡¨è¾¾å¼çš„ const å±æ€§ã€‚</li>
</ul>
<h4 id="auto-çš„é™åˆ¶"><a class="header-anchor" href="#auto-çš„é™åˆ¶">ğŸŒ³</a>auto çš„é™åˆ¶</h4>
<p>å‰é¢ä»‹ç»æ¨å¯¼è§„åˆ™çš„æ—¶å€™æˆ‘ä»¬è¯´è¿‡ï¼Œä½¿ç”¨ auto çš„æ—¶å€™å¿…é¡»å¯¹å˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™æ˜¯ auto çš„é™åˆ¶ä¹‹ä¸€ã€‚é‚£ä¹ˆï¼Œé™¤æ­¤ä»¥å¤–ï¼Œauto è¿˜æœ‰å“ªäº›å…¶å®ƒçš„é™åˆ¶å‘¢ï¼Ÿ</p>
<ul>
<li>[?] #check</li>
</ul>
<ol>
<li>auto ä¸èƒ½åœ¨å‡½æ•°çš„å‚æ•°ä¸­ä½¿ç”¨ã€‚</li>
</ol>
<p>è¿™ä¸ªåº”è¯¥å¾ˆå®¹æ˜“ç†è§£ï¼Œæˆ‘ä»¬åœ¨å®šä¹‰å‡½æ•°çš„æ—¶å€™åªæ˜¯å¯¹å‚æ•°è¿›è¡Œäº†å£°æ˜ï¼ŒæŒ‡æ˜äº†å‚æ•°çš„ç±»å‹ï¼Œä½†å¹¶æ²¡æœ‰ç»™å®ƒèµ‹å€¼ï¼Œåªæœ‰åœ¨å®é™…è°ƒç”¨å‡½æ•°çš„æ—¶å€™æ‰ä¼šç»™å‚æ•°èµ‹å€¼ï¼›è€Œ auto è¦æ±‚å¿…é¡»å¯¹å˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œæ‰€ä»¥è¿™æ˜¯çŸ›ç›¾çš„ã€‚</p>
<ol start="2">
<li>
<p>auto ä¸èƒ½ä½œç”¨äºç±»çš„éé™æ€æˆå‘˜å˜é‡ï¼ˆä¹Ÿå°±æ˜¯æ²¡æœ‰ static å…³é”®å­—ä¿®é¥°çš„æˆå‘˜å˜é‡ï¼‰ä¸­ã€‚</p>
</li>
<li>
<p>auto å…³é”®å­—ä¸èƒ½å®šä¹‰æ•°ç»„ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­å°±æ˜¯é”™è¯¯çš„ï¼š</p>
</li>
</ol>
<p>char url[] = â€œ<a href="http://c.biancheng.net/%E2%80%9D;">http://c.biancheng.net/â€;</a><br>
auto str[] = url; //arr ä¸ºæ•°ç»„ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨ auto</p>
<ol start="4">
<li>auto ä¸èƒ½ä½œç”¨äºæ¨¡æ¿å‚æ•°ï¼Œè¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="comment">//<span class="doctag">TODO:</span></span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span>  <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    A&lt;<span class="type">int</span>&gt; C1;</span><br><span class="line">    A&lt;<span class="keyword">auto</span>&gt; C2 = C1;  <span class="comment">//é”™è¯¯</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure>
<h4 id="auto-çš„åº”ç”¨"><a class="header-anchor" href="#auto-çš„åº”ç”¨">ğŸŒ³</a>auto çš„åº”ç”¨</h4>
<p>è¯´äº†é‚£ä¹ˆå¤š auto çš„æ¨å¯¼è§„åˆ™å’Œä¸€äº›æ³¨æ„äº‹é¡¹ï¼Œé‚£ä¹ˆ auto åœ¨å®é™…å¼€å‘ä¸­åˆ°åº•æœ‰ä»€ä¹ˆåº”ç”¨å‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬åˆ—ä¸¾ä¸¤ä¸ªå…¸å‹çš„åº”ç”¨åœºæ™¯ã€‚</p>
<h4 id="ä½¿ç”¨-auto-å®šä¹‰è¿­ä»£å™¨"><a class="header-anchor" href="#ä½¿ç”¨-auto-å®šä¹‰è¿­ä»£å™¨">ğŸŒ³</a>ä½¿ç”¨ auto å®šä¹‰è¿­ä»£å™¨</h4>
<p>auto çš„ä¸€ä¸ªå…¸å‹åº”ç”¨åœºæ™¯æ˜¯ç”¨æ¥å®šä¹‰ stl çš„è¿­ä»£å™¨ã€‚</p>
<p>æˆ‘ä»¬åœ¨ä½¿ç”¨ stl å®¹å™¨çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨è¿­ä»£å™¨æ¥éå†å®¹å™¨é‡Œé¢çš„å…ƒç´ ï¼›ä¸åŒå®¹å™¨çš„è¿­ä»£å™¨æœ‰ä¸åŒçš„ç±»å‹ï¼Œåœ¨å®šä¹‰è¿­ä»£å™¨æ—¶å¿…é¡»æŒ‡æ˜ã€‚è€Œè¿­ä»£å™¨çš„ç±»å‹æœ‰æ—¶å€™æ¯”è¾ƒå¤æ‚ï¼Œä¹¦å†™èµ·æ¥å¾ˆéº»çƒ¦ï¼Œè¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    vector&lt; vector&lt;<span class="type">int</span>&gt; &gt; v;</span><br><span class="line">    vector&lt; vector&lt;<span class="type">int</span>&gt; &gt;::iterator i = v.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œå®šä¹‰è¿­ä»£å™¨ i çš„æ—¶å€™ï¼Œç±»å‹ä¹¦å†™æ¯”è¾ƒå†—é•¿ï¼Œå®¹æ˜“å‡ºé”™ã€‚ç„¶è€Œæœ‰äº† auto ç±»å‹æ¨å¯¼ï¼Œæˆ‘ä»¬å¤§å¯ä¸å¿…è¿™æ ·ï¼Œåªå†™ä¸€ä¸ª auto å³å¯ã€‚</p>
<p>ä¿®æ”¹ä¸Šé¢çš„ä»£ç ï¼Œä½¿ä¹‹å˜å¾—æ›´åŠ ç®€æ´ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    vector&lt; vector&lt;<span class="type">int</span>&gt; &gt; v;</span><br><span class="line">    <span class="keyword">auto</span> i = v.<span class="built_in">begin</span>();  <span class="comment">//ä½¿ç”¨ auto ä»£æ›¿å…·ä½“çš„ç±»å‹</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure>
<p>auto å¯ä»¥æ ¹æ®è¡¨è¾¾å¼ v.begin() çš„ç±»å‹ï¼ˆbegin() å‡½æ•°çš„è¿”å›å€¼ç±»å‹ï¼‰æ¥æ¨å¯¼å‡ºå˜é‡ i çš„ç±»å‹ã€‚</p>
<h4 id="auto-ç”¨äºæ³›å‹ç¼–ç¨‹"><a class="header-anchor" href="#auto-ç”¨äºæ³›å‹ç¼–ç¨‹">ğŸŒ³</a>auto ç”¨äº<a href="https://so.csdn.net/so/search?q=%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B&amp;spm=1001.2101.3001.7020">æ³›å‹ç¼–ç¨‹</a></h4>
<p>auto çš„å¦ä¸€ä¸ªåº”ç”¨å°±æ˜¯å½“æˆ‘ä»¬ä¸çŸ¥é“å˜é‡æ˜¯ä»€ä¹ˆç±»å‹ï¼Œæˆ–è€…ä¸å¸Œæœ›æŒ‡æ˜å…·ä½“ç±»å‹çš„æ—¶å€™ï¼Œæ¯”å¦‚æ³›å‹ç¼–ç¨‹ä¸­ã€‚æˆ‘ä»¬æ¥ç€çœ‹ä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">int</span> <span class="title">get</span><span class="params">(<span class="type">void</span>)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">const</span> <span class="type">char</span>* <span class="title">get</span><span class="params">(<span class="type">void</span>)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;http://c.biancheng.net/cplus/&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">void</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> val = T::<span class="built_in">get</span>();</span><br><span class="line">    cout &lt;&lt; val &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span>&#123;</span><br><span class="line">    <span class="built_in">func</span>&lt;A&gt;();</span><br><span class="line">    <span class="built_in">func</span>&lt;B&gt;();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112131415161718192021222324</span></span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<p>100<br>
<a href="http://c.biancheng.net/cplus/">http://c.biancheng.net/cplus/</a></p>
<p>æœ¬ä¾‹ä¸­çš„æ¨¡æ¿å‡½æ•° func() ä¼šè°ƒç”¨æ‰€æœ‰ç±»çš„é™æ€å‡½æ•° get()ï¼Œå¹¶å¯¹å®ƒçš„è¿”å›å€¼åšç»Ÿä¸€å¤„ç†ï¼Œä½†æ˜¯ get() çš„è¿”å›å€¼ç±»å‹å¹¶ä¸ä¸€æ ·ï¼Œè€Œä¸”ä¸èƒ½è‡ªåŠ¨è½¬æ¢ã€‚è¿™ç§è¦æ±‚åœ¨ä»¥å‰çš„ C++ ç‰ˆæœ¬ä¸­å®ç°èµ·æ¥éå¸¸çš„éº»çƒ¦ï¼Œéœ€è¦é¢å¤–å¢åŠ ä¸€ä¸ªæ¨¡æ¿å‚æ•°ï¼Œå¹¶åœ¨è°ƒç”¨æ—¶æ‰‹åŠ¨ç»™è¯¥æ¨¡æ¿å‚æ•°èµ‹å€¼ï¼Œç”¨ä»¥æŒ‡æ˜å˜é‡ val çš„ç±»å‹ã€‚</p>
<p>ä½†æ˜¯æœ‰äº† auto ç±»å‹è‡ªåŠ¨æ¨å¯¼ï¼Œç¼–è¯‘å™¨å°±æ ¹æ® get() çš„è¿”å›å€¼è‡ªå·±æ¨å¯¼å‡º val å˜é‡çš„ç±»å‹ï¼Œå°±ä¸ç”¨å†å¢åŠ ä¸€ä¸ªæ¨¡æ¿å‚æ•°äº†ã€‚</p>
<p>ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†ä¸ä½¿ç”¨ auto çš„è§£å†³åŠæ³•ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">int</span> <span class="title">get</span><span class="params">(<span class="type">void</span>)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">const</span> <span class="type">char</span>* <span class="title">get</span><span class="params">(<span class="type">void</span>)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;http://c.biancheng.net/cplus/&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;  <span class="comment">//é¢å¤–å¢åŠ ä¸€ä¸ªæ¨¡æ¿å‚æ•° T2</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">void</span>)</span></span>&#123;</span><br><span class="line">    T2 val = T1::<span class="built_in">get</span>();</span><br><span class="line">    cout &lt;&lt; val &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span>&#123;</span><br><span class="line">    <span class="comment">//è°ƒç”¨æ—¶ä¹Ÿè¦æ‰‹åŠ¨ç»™æ¨¡æ¿å‚æ•°èµ‹å€¼</span></span><br><span class="line">    <span class="built_in">func</span>&lt;A, <span class="type">int</span>&gt;();</span><br><span class="line">    <span class="built_in">func</span>&lt;B, <span class="type">const</span> <span class="type">char</span>*&gt;();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910111213141516171819202122232425</span></span><br></pre></td></tr></table></figure>
<h2 id="c-decltypeç±»å‹æ¨å¯¼å®Œå…¨æ”»ç•¥"><a class="header-anchor" href="#c-decltypeç±»å‹æ¨å¯¼å®Œå…¨æ”»ç•¥">ğŸŒ³</a>C++ decltypeç±»å‹æ¨å¯¼å®Œå…¨æ”»ç•¥</h2>
<p>decltype æ˜¯ <a href="http://c.biancheng.net/cplus/">C++</a>11 æ–°å¢çš„ä¸€ä¸ªå…³é”®å­—ï¼Œå®ƒå’Œ auto çš„åŠŸèƒ½ä¸€æ ·ï¼Œéƒ½ç”¨æ¥åœ¨ç¼–è¯‘æ—¶æœŸè¿›è¡Œè‡ªåŠ¨ç±»å‹æ¨å¯¼ã€‚ä¸äº†è§£ auto ç”¨æ³•çš„è¯»è€…è¯·è½¬åˆ°ã€Š<a href="http://c.biancheng.net/view/6984.html">C++ auto</a>ã€‹ã€‚</p>
<p>decltype æ˜¯â€œdeclare typeâ€çš„ç¼©å†™ï¼Œè¯‘ä¸ºâ€œå£°æ˜ç±»å‹â€ã€‚</p>
<p>æ—¢ç„¶å·²ç»æœ‰äº† auto å…³é”®å­—ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦ decltype å…³é”®å­—å‘¢ï¼Ÿå› ä¸º auto å¹¶ä¸é€‚ç”¨äºæ‰€æœ‰çš„è‡ªåŠ¨ç±»å‹æ¨å¯¼åœºæ™¯ï¼Œåœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ auto ç”¨èµ·æ¥éå¸¸ä¸æ–¹ä¾¿ï¼Œç”šè‡³å‹æ ¹æ— æ³•ä½¿ç”¨ï¼Œæ‰€ä»¥ decltype å…³é”®å­—ä¹Ÿè¢«å¼•å…¥åˆ° C++11 ä¸­ã€‚</p>
<p>auto å’Œ decltype å…³é”®å­—éƒ½å¯ä»¥è‡ªåŠ¨æ¨å¯¼å‡ºå˜é‡çš„ç±»å‹ï¼Œä½†å®ƒä»¬çš„ç”¨æ³•æ˜¯æœ‰åŒºåˆ«çš„ï¼š</p>
<p>auto varname = value;<br>
decltype(exp) varname = value;</p>
<p>å…¶ä¸­ï¼Œvarname è¡¨ç¤ºå˜é‡åï¼Œvalue è¡¨ç¤ºèµ‹ç»™å˜é‡çš„å€¼ï¼Œexp è¡¨ç¤ºä¸€ä¸ªè¡¨è¾¾å¼ã€‚</p>
<p>auto æ ¹æ®<code>=</code>å³è¾¹çš„åˆå§‹å€¼ value æ¨å¯¼å‡ºå˜é‡çš„ç±»å‹ï¼Œè€Œ decltype æ ¹æ® exp è¡¨è¾¾å¼æ¨å¯¼å‡ºå˜é‡çš„ç±»å‹ï¼Œè·Ÿ<code>=</code>å³è¾¹çš„ value æ²¡æœ‰å…³ç³»ã€‚</p>
<p>å¦å¤–ï¼Œauto è¦æ±‚å˜é‡å¿…é¡»åˆå§‹åŒ–ï¼Œè€Œ decltype ä¸è¦æ±‚ã€‚è¿™å¾ˆå®¹æ˜“ç†è§£ï¼Œauto æ˜¯æ ¹æ®å˜é‡çš„åˆå§‹å€¼æ¥æ¨å¯¼å‡ºå˜é‡ç±»å‹çš„ï¼Œå¦‚æœä¸åˆå§‹åŒ–ï¼Œå˜é‡çš„ç±»å‹ä¹Ÿå°±æ— æ³•æ¨å¯¼äº†ã€‚decltype å¯ä»¥å†™æˆä¸‹é¢çš„å½¢å¼ï¼š</p>
<p>decltype(exp) varname;</p>
<h3 id="exp-æ³¨æ„äº‹é¡¹"><a class="header-anchor" href="#exp-æ³¨æ„äº‹é¡¹">ğŸŒ³</a>exp æ³¨æ„äº‹é¡¹</h3>
<p>åŸåˆ™ä¸Šè®²ï¼Œexp å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„è¡¨è¾¾å¼ï¼Œå®ƒå¯ä»¥æ˜¯ä»»æ„å¤æ‚çš„å½¢å¼ï¼Œä½†æ˜¯æˆ‘ä»¬å¿…é¡»è¦ä¿è¯ exp çš„ç»“æœæ˜¯æœ‰ç±»å‹çš„ï¼Œä¸èƒ½æ˜¯ voidï¼›ä¾‹å¦‚ï¼Œå½“ exp è°ƒç”¨ä¸€ä¸ªè¿”å›å€¼ç±»å‹ä¸º void çš„å‡½æ•°æ—¶ï¼Œexp çš„ç»“æœä¹Ÿæ˜¯ void ç±»å‹ï¼Œæ­¤æ—¶å°±ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚</p>
<p>C++ decltype ç”¨æ³•ä¸¾ä¾‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">decltype</span>(a) b = <span class="number">1</span>;  <span class="comment">//b è¢«æ¨å¯¼æˆäº† int</span></span><br><span class="line"><span class="keyword">decltype</span>(<span class="number">10.8</span>) x = <span class="number">5.5</span>;  <span class="comment">//x è¢«æ¨å¯¼æˆäº† double</span></span><br><span class="line"><span class="keyword">decltype</span>(x + <span class="number">100</span>) y;  <span class="comment">//y è¢«æ¨å¯¼æˆäº† double</span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œdecltype èƒ½å¤Ÿæ ¹æ®å˜é‡ã€å­—é¢é‡ã€å¸¦æœ‰è¿ç®—ç¬¦çš„è¡¨è¾¾å¼æ¨å¯¼å‡ºå˜é‡çš„ç±»å‹ã€‚è¯»è€…è¯·ç•™æ„ç¬¬ 4 è¡Œï¼Œy æ²¡æœ‰è¢«åˆå§‹åŒ–ã€‚</p>
<h2 id="decltype-æ¨å¯¼è§„åˆ™"><a class="header-anchor" href="#decltype-æ¨å¯¼è§„åˆ™">ğŸŒ³</a>decltype æ¨å¯¼è§„åˆ™</h2>
<p>ä¸Šé¢çš„ä¾‹å­è®©æˆ‘ä»¬åˆæ­¥æ„Ÿå—äº†ä¸€ä¸‹ decltype çš„ç”¨æ³•ï¼Œä½†ä½ ä¸è¦è®¤ä¸º decltype å°±è¿™ä¹ˆç®€å•ï¼Œå®ƒçš„ç©æ³•å®é™…ä¸Šå¯ä»¥éå¸¸å¤æ‚ã€‚å½“ç¨‹åºå‘˜ä½¿ç”¨ decltype(exp) è·å–ç±»å‹æ—¶ï¼Œç¼–è¯‘å™¨å°†æ ¹æ®ä»¥ä¸‹ä¸‰æ¡è§„åˆ™å¾—å‡ºç»“æœï¼š</p>
<ul>
<li>å¦‚æœ exp æ˜¯ä¸€ä¸ªä¸è¢«æ‹¬å·<code>( )</code>åŒ…å›´çš„è¡¨è¾¾å¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªç±»æˆå‘˜è®¿é—®è¡¨è¾¾å¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªå•ç‹¬çš„å˜é‡ï¼Œé‚£ä¹ˆ decltype(exp) çš„ç±»å‹å°±å’Œ exp ä¸€è‡´ï¼Œè¿™æ˜¯æœ€æ™®éæœ€å¸¸è§çš„æƒ…å†µã€‚</li>
<li>å¦‚æœ exp æ˜¯å‡½æ•°è°ƒç”¨ï¼Œé‚£ä¹ˆ decltype(exp) çš„ç±»å‹å°±å’Œå‡½æ•°è¿”å›å€¼çš„ç±»å‹ä¸€è‡´ã€‚</li>
<li>å¦‚æœ exp æ˜¯ä¸€ä¸ªå·¦å€¼ï¼Œæˆ–è€…è¢«æ‹¬å·<code>( )</code>åŒ…å›´ï¼Œé‚£ä¹ˆ decltype(exp) çš„ç±»å‹å°±æ˜¯ exp çš„å¼•ç”¨ï¼›å‡è®¾ exp çš„ç±»å‹ä¸º Tï¼Œé‚£ä¹ˆ decltype(exp) çš„ç±»å‹å°±æ˜¯ T&amp;ã€‚</li>
</ul>
<p>ä¸ºäº†æ›´å¥½åœ°ç†è§£ decltype çš„æ¨å¯¼è§„åˆ™ï¼Œä¸‹é¢æ¥çœ‹å‡ ä¸ªå®é™…çš„ä¾‹å­ã€‚</p>
<p>ã€å®ä¾‹1ã€‘exp æ˜¯ä¸€ä¸ªæ™®é€šè¡¨è¾¾å¼ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> total;</span><br><span class="line">    string name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="type">float</span> scores;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> Student::total = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="type">int</span>  <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n = <span class="number">0</span>;</span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> &amp;r = n;</span><br><span class="line">    Student stu;</span><br><span class="line">    <span class="keyword">decltype</span>(n) a = n;  <span class="comment">//n ä¸º int ç±»å‹ï¼Œa è¢«æ¨å¯¼ä¸º int ç±»å‹</span></span><br><span class="line">    <span class="keyword">decltype</span>(r) b = n;     <span class="comment">//r ä¸º const int&amp; ç±»å‹, b è¢«æ¨å¯¼ä¸º const int&amp; ç±»å‹</span></span><br><span class="line">    <span class="keyword">decltype</span>(Student::total) c = <span class="number">0</span>;  <span class="comment">//total ä¸ºç±» Student çš„ä¸€ä¸ª int ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œc è¢«æ¨å¯¼ä¸º int ç±»å‹</span></span><br><span class="line">    <span class="keyword">decltype</span>(stu.name) url = <span class="string">&quot;http://c.biancheng.net/cplus/&quot;</span>;  <span class="comment">//total ä¸ºç±» Student çš„ä¸€ä¸ª string ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œ url è¢«æ¨å¯¼ä¸º string ç±»å‹</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314151617181920</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç å¾ˆç®€å•ï¼ŒæŒ‰ç…§æ¨å¯¼è§„åˆ™ 1ï¼Œå¯¹äºä¸€èˆ¬çš„è¡¨è¾¾å¼ï¼Œdecltype çš„æ¨å¯¼ç»“æœå°±å’Œè¿™ä¸ªè¡¨è¾¾å¼çš„ç±»å‹ä¸€è‡´ã€‚</p>
<p>ã€å®ä¾‹2ã€‘exp ä¸ºå‡½æ•°è°ƒç”¨ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">/å‡½æ•°å£°æ˜</span><br><span class="line"><span class="function"><span class="type">int</span>&amp; <span class="title">func_int_r</span><span class="params">(<span class="type">int</span>, <span class="type">char</span>)</span></span>;  <span class="comment">//è¿”å›å€¼ä¸º int&amp;</span></span><br><span class="line"><span class="function"><span class="type">int</span>&amp;&amp; <span class="title">func_int_rr</span><span class="params">(<span class="type">void</span>)</span></span>;  <span class="comment">//è¿”å›å€¼ä¸º int&amp;&amp;</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">func_int</span><span class="params">(<span class="type">double</span>)</span></span>;  <span class="comment">//è¿”å›å€¼ä¸º int</span></span><br><span class="line"><span class="function"><span class="type">const</span> <span class="type">int</span>&amp; <span class="title">fun_cint_r</span><span class="params">(<span class="type">int</span>, <span class="type">int</span>, <span class="type">int</span>)</span></span>;  <span class="comment">//è¿”å›å€¼ä¸º const int&amp;</span></span><br><span class="line"><span class="function"><span class="type">const</span> <span class="type">int</span>&amp;&amp; <span class="title">func_cint_rr</span><span class="params">(<span class="type">void</span>)</span></span>;  <span class="comment">//è¿”å›å€¼ä¸º const int&amp;&amp;</span></span><br><span class="line"><span class="comment">//decltypeç±»å‹æ¨å¯¼</span></span><br><span class="line"><span class="type">int</span> n = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">decltype</span>(<span class="built_in">func_int_r</span>(<span class="number">100</span>, <span class="string">&#x27;A&#x27;</span>)) a = n;  <span class="comment">//a çš„ç±»å‹ä¸º int&amp;</span></span><br><span class="line"><span class="keyword">decltype</span>(<span class="built_in">func_int_rr</span>()) b = <span class="number">0</span>;  <span class="comment">//b çš„ç±»å‹ä¸º int&amp;&amp;</span></span><br><span class="line"><span class="keyword">decltype</span>(<span class="built_in">func_int</span>(<span class="number">10.5</span>)) c = <span class="number">0</span>;   <span class="comment">//c çš„ç±»å‹ä¸º int</span></span><br><span class="line"><span class="keyword">decltype</span>(<span class="built_in">fun_cint_r</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>))  x = n;    <span class="comment">//x çš„ç±»å‹ä¸º const int &amp;</span></span><br><span class="line"><span class="keyword">decltype</span>(<span class="built_in">func_cint_rr</span>()) y = <span class="number">0</span>;  <span class="comment">// y çš„ç±»å‹ä¸º const int&amp;&amp;</span></span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œexp ä¸­è°ƒç”¨å‡½æ•°æ—¶éœ€è¦å¸¦ä¸Šæ‹¬å·å’Œå‚æ•°ï¼Œä½†è¿™ä»…ä»…æ˜¯å½¢å¼ï¼Œå¹¶ä¸ä¼šçœŸçš„å»æ‰§è¡Œå‡½æ•°ä»£ç ã€‚</p>
<p>ã€å®ä¾‹3ã€‘exp æ˜¯å·¦å€¼ï¼Œæˆ–è€…è¢«<code>( )</code>åŒ…å›´ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">const</span> Base obj;</span><br><span class="line">    <span class="comment">//å¸¦æœ‰æ‹¬å·çš„è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="keyword">decltype</span>(obj.x) a = <span class="number">0</span>;  <span class="comment">//obj.x ä¸ºç±»çš„æˆå‘˜è®¿é—®è¡¨è¾¾å¼ï¼Œç¬¦åˆæ¨å¯¼è§„åˆ™ä¸€ï¼Œa çš„ç±»å‹ä¸º int</span></span><br><span class="line">    <span class="keyword">decltype</span>((obj.x)) b = a;  <span class="comment">//obj.x å¸¦æœ‰æ‹¬å·ï¼Œç¬¦åˆæ¨å¯¼è§„åˆ™ä¸‰ï¼Œb çš„ç±»å‹ä¸º int&amp;ã€‚</span></span><br><span class="line">    <span class="comment">//åŠ æ³•è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="type">int</span> n = <span class="number">0</span>, m = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">decltype</span>(n + m) c = <span class="number">0</span>;  <span class="comment">//n+m å¾—åˆ°ä¸€ä¸ªå³å€¼ï¼Œç¬¦åˆæ¨å¯¼è§„åˆ™ä¸€ï¼Œæ‰€ä»¥æ¨å¯¼ç»“æœä¸º int</span></span><br><span class="line">    <span class="keyword">decltype</span>(n = n + m) d = c;  <span class="comment">//n=n+m å¾—åˆ°ä¸€ä¸ªå·¦å€¼ï¼Œç¬¦å·æ¨å¯¼è§„åˆ™ä¸‰ï¼Œæ‰€ä»¥æ¨å¯¼ç»“æœä¸º int&amp;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910111213141516</span></span><br></pre></td></tr></table></figure>
<ul>
<li>[?]  #check<br>
è¿™é‡Œæˆ‘ä»¬éœ€è¦é‡ç‚¹è¯´ä¸€ä¸‹å·¦å€¼å’Œå³å€¼ï¼šå·¦å€¼æ˜¯æŒ‡é‚£äº›åœ¨è¡¨è¾¾å¼æ‰§è¡Œç»“æŸåä¾ç„¶å­˜åœ¨çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æŒä¹…æ€§çš„æ•°æ®ï¼›å³å€¼æ˜¯æŒ‡é‚£äº›åœ¨è¡¨è¾¾å¼æ‰§è¡Œç»“æŸåä¸å†å­˜åœ¨çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä¸´æ—¶æ€§çš„æ•°æ®ã€‚æœ‰ä¸€ç§å¾ˆç®€å•çš„æ–¹æ³•æ¥åŒºåˆ†å·¦å€¼å’Œå³å€¼ï¼Œå¯¹è¡¨è¾¾å¼å–åœ°å€ï¼Œå¦‚æœç¼–è¯‘å™¨ä¸æŠ¥é”™å°±ä¸ºå·¦å€¼ï¼Œå¦åˆ™ä¸ºå³å€¼ã€‚</li>
</ul>
<h2 id="decltype-çš„å®é™…åº”ç”¨"><a class="header-anchor" href="#decltype-çš„å®é™…åº”ç”¨">ğŸŒ³</a>decltype çš„å®é™…åº”ç”¨</h2>
<p>auto çš„è¯­æ³•æ ¼å¼æ¯” decltype ç®€å•ï¼Œæ‰€ä»¥åœ¨ä¸€èˆ¬çš„ç±»å‹æ¨å¯¼ä¸­ï¼Œä½¿ç”¨ auto æ¯”ä½¿ç”¨ decltype æ›´åŠ æ–¹ä¾¿ï¼Œä½ å¯ä»¥è½¬åˆ°ã€Š<a href="http://c.biancheng.net/view/6984.html">C++ auto</a>ã€‹æŸ¥çœ‹å¾ˆå¤šç±»ä¼¼çš„ä¾‹å­ï¼Œæœ¬èŠ‚ä»…æ¼”ç¤ºåªèƒ½ä½¿ç”¨ decltype çš„æƒ…å½¢ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œauto åªèƒ½ç”¨äºç±»çš„é™æ€æˆå‘˜ï¼Œä¸èƒ½ç”¨äºç±»çš„éé™æ€æˆå‘˜ï¼ˆæ™®é€šæˆå‘˜ï¼‰ï¼Œå¦‚æœæˆ‘ä»¬æƒ³æ¨å¯¼éé™æ€æˆå‘˜çš„ç±»å‹ï¼Œè¿™ä¸ªæ—¶å€™å°±å¿…é¡»ä½¿ç”¨ decltype äº†ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ¨¡æ¿çš„å®šä¹‰ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(T&amp; container)</span> </span>&#123;</span><br><span class="line">        m_it = container.<span class="built_in">begin</span>();</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">typename</span> T::iterator m_it;  <span class="comment">//æ³¨æ„è¿™é‡Œ</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">const</span> vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">    Base&lt;<span class="type">const</span> vector&lt;<span class="type">int</span>&gt;&gt; obj;</span><br><span class="line">    obj.<span class="built_in">func</span>(v);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;	</span><br><span class="line"><span class="number">123456789101112131415161718</span></span><br></pre></td></tr></table></figure>
<p>å•ç‹¬çœ‹ Base ç±»ä¸­ m_it æˆå‘˜çš„å®šä¹‰ï¼Œå¾ˆéš¾çœ‹å‡ºä¼šæœ‰ä»€ä¹ˆé”™è¯¯ï¼Œä½†åœ¨ä½¿ç”¨ Base ç±»çš„æ—¶å€™ï¼Œå¦‚æœä¼ å…¥ä¸€ä¸ª const ç±»å‹çš„å®¹å™¨ï¼Œç¼–è¯‘å™¨é©¬ä¸Šå°±ä¼šå¼¹å‡ºä¸€å¤§å †é”™è¯¯ä¿¡æ¯ã€‚åŸå› å°±åœ¨äºï¼Œ<code>T::iterator</code>å¹¶ä¸èƒ½åŒ…æ‹¬æ‰€æœ‰çš„è¿­ä»£å™¨ç±»å‹ï¼Œå½“ T æ˜¯ä¸€ä¸ª const å®¹å™¨æ—¶ï¼Œåº”å½“ä½¿ç”¨ const_iteratorã€‚</p>
<p>è¦æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨ä¹‹å‰çš„ C++98/03 ç‰ˆæœ¬ä¸‹åªèƒ½æƒ³åŠæ³•æŠŠ const ç±»å‹çš„å®¹å™¨ç”¨æ¨¡æ¿ç‰¹åŒ–å•ç‹¬å¤„ç†ï¼Œå¢åŠ äº†ä¸å°‘å·¥ä½œé‡ï¼Œçœ‹èµ·æ¥ä¹Ÿéå¸¸æ™¦æ¶©ã€‚ä½†æ˜¯æœ‰äº† C++11 çš„ decltype å…³é”®å­—ï¼Œå°±å¯ä»¥ç›´æ¥è¿™æ ·å†™ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(T&amp; container)</span> </span>&#123;</span><br><span class="line">        m_it = container.<span class="built_in">begin</span>();</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">decltype</span>(<span class="built_in">T</span>().<span class="built_in">begin</span>()) m_it;  <span class="comment">//æ³¨æ„è¿™é‡Œ</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure>
<p>çœ‹èµ·æ¥æ˜¯ä¸æ˜¯å¾ˆæ¸…çˆ½ï¼Ÿ</p>
<p>æ³¨æ„ï¼Œæœ‰äº›ä½ç‰ˆæœ¬çš„ç¼–è¯‘å™¨ä¸æ”¯æŒ<code>T().begin()</code>è¿™ç§å†™æ³•ï¼Œä»¥ä¸Šä»£ç æˆ‘åœ¨ VS2019 ä¸‹æµ‹è¯•é€šè¿‡ï¼Œåœ¨ VS2015 ä¸‹æµ‹è¯•å¤±è´¥ã€‚</p>
<h2 id="æ±‡æ€»autoå’Œdecltypeçš„åŒºåˆ«"><a class="header-anchor" href="#æ±‡æ€»autoå’Œdecltypeçš„åŒºåˆ«">ğŸŒ³</a>æ±‡æ€»autoå’Œdecltypeçš„åŒºåˆ«</h2>
<p>é€šè¿‡ã€Š<a href="http://c.biancheng.net/view/6984.html">C++ auto</a>ã€‹å’Œã€Š<a href="http://c.biancheng.net/view/7151.html">C++ decltype</a>ã€‹ä¸¤èŠ‚çš„å­¦ä¹ ï¼Œç›¸ä¿¡å¤§å®¶å·²ç»æŒæ¡äº† auto å’Œ decltype çš„è¯­æ³•è§„åˆ™ä»¥åŠä½¿ç”¨åœºæ™¯ï¼Œè¿™èŠ‚æˆ‘ä»¬å°† auto å’Œ decltype æ”¾åœ¨ä¸€èµ·ï¼Œç»¼åˆå¯¹æ¯”ä¸€ä¸‹å®ƒä»¬çš„åŒºåˆ«ï¼Œå¹¶å‘Šè¯‰å¤§å®¶è¯¥å¦‚ä½•é€‰æ‹©ã€‚</p>
<h3 id="è¯­æ³•æ ¼å¼çš„åŒºåˆ«"><a class="header-anchor" href="#è¯­æ³•æ ¼å¼çš„åŒºåˆ«">ğŸŒ³</a>è¯­æ³•æ ¼å¼çš„åŒºåˆ«</h3>
<p>auto å’Œ decltype éƒ½æ˜¯ C++11 æ–°å¢çš„å…³é”®å­—ï¼Œéƒ½ç”¨äºè‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œä½†æ˜¯å®ƒä»¬çš„è¯­æ³•æ ¼å¼æ˜¯æœ‰åŒºåˆ«çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>auto varname = value; //autoçš„è¯­æ³•æ ¼å¼<br>
decltype(exp) varname [= value]; //decltypeçš„è¯­æ³•æ ¼å¼</p>
<p>å…¶ä¸­ï¼Œvarname è¡¨ç¤ºå˜é‡åï¼Œvalue è¡¨ç¤ºèµ‹ç»™å˜é‡çš„å€¼ï¼Œexp è¡¨ç¤ºä¸€ä¸ªè¡¨è¾¾å¼ï¼Œæ–¹æ‹¬å·<code>[ ]</code>è¡¨ç¤ºå¯æœ‰å¯æ— ã€‚</p>
<p>auto å’Œ decltype éƒ½ä¼šè‡ªåŠ¨æ¨å¯¼å‡ºå˜é‡ varname çš„ç±»å‹ï¼š</p>
<ul>
<li>auto æ ¹æ®<code>=</code>å³è¾¹çš„åˆå§‹å€¼ value æ¨å¯¼å‡ºå˜é‡çš„ç±»å‹ï¼›</li>
<li>decltype æ ¹æ® exp è¡¨è¾¾å¼æ¨å¯¼å‡ºå˜é‡çš„ç±»å‹ï¼Œè·Ÿ<code>=</code>å³è¾¹çš„ value æ²¡æœ‰å…³ç³»ã€‚</li>
</ul>
<p>å¦å¤–ï¼Œauto è¦æ±‚å˜é‡å¿…é¡»åˆå§‹åŒ–ï¼Œä¹Ÿå°±æ˜¯åœ¨å®šä¹‰å˜é‡çš„åŒæ—¶å¿…é¡»ç»™å®ƒèµ‹å€¼ï¼›è€Œ decltype ä¸è¦æ±‚ï¼Œåˆå§‹åŒ–ä¸å¦éƒ½ä¸å½±å“å˜é‡çš„ç±»å‹ã€‚è¿™å¾ˆå®¹æ˜“ç†è§£ï¼Œå› ä¸º auto æ˜¯æ ¹æ®å˜é‡çš„åˆå§‹å€¼æ¥æ¨å¯¼å‡ºå˜é‡ç±»å‹çš„ï¼Œå¦‚æœä¸åˆå§‹åŒ–ï¼Œå˜é‡çš„ç±»å‹ä¹Ÿå°±æ— æ³•æ¨å¯¼äº†ã€‚</p>
<p>auto å°†å˜é‡çš„ç±»å‹å’Œåˆå§‹å€¼ç»‘å®šåœ¨ä¸€èµ·ï¼Œè€Œ decltype å°†å˜é‡çš„ç±»å‹å’Œåˆå§‹å€¼åˆ†å¼€ï¼›è™½ç„¶ auto çš„ä¹¦å†™æ›´åŠ ç®€æ´ï¼Œä½† decltype çš„ä½¿ç”¨æ›´åŠ çµæ´»ã€‚</p>
<p>è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> n1 = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">decltype</span>(<span class="number">10</span>) n2 = <span class="number">99</span>;</span><br><span class="line"><span class="keyword">auto</span> url1 = <span class="string">&quot;http://c.biancheng.net/cplus/&quot;</span>;</span><br><span class="line"><span class="keyword">decltype</span>(url1) url2 = <span class="string">&quot;http://c.biancheng.net/java/&quot;</span>;</span><br><span class="line"><span class="keyword">auto</span> f1 = <span class="number">2.5</span>;</span><br><span class="line"><span class="keyword">decltype</span>(n1*<span class="number">6.7</span>) f2;</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>
<p>è¿™äº›ç”¨æ³•åœ¨å‰é¢çš„ä¸¤èŠ‚ä¸­å·²ç»è¿›è¡Œäº†åˆ†æï¼Œæ­¤å¤„å°±ä¸å†èµ˜è¿°äº†ã€‚</p>
<h3 id="å¯¹-cv-é™å®šç¬¦çš„å¤„ç†"><a class="header-anchor" href="#å¯¹-cv-é™å®šç¬¦çš„å¤„ç†">ğŸŒ³</a>å¯¹ cv é™å®šç¬¦çš„å¤„ç†</h3>
<p>ã€Œcv é™å®šç¬¦ã€æ˜¯ const å’Œ volatile å…³é”®å­—çš„ç»Ÿç§°ï¼š</p>
<ul>
<li>const å…³é”®å­—ç”¨æ¥è¡¨ç¤ºæ•°æ®æ˜¯åªè¯»çš„ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½è¢«ä¿®æ”¹ï¼›</li>
<li>volatile å’Œ const æ˜¯ç›¸åçš„ï¼Œå®ƒç”¨æ¥è¡¨ç¤ºæ•°æ®æ˜¯å¯å˜çš„ã€æ˜“å˜çš„ï¼Œç›®çš„æ˜¯ä¸è®© CPU å°†æ•°æ®ç¼“å­˜åˆ°å¯„å­˜å™¨ï¼Œè€Œæ˜¯ä»åŸå§‹çš„å†…å­˜ä¸­è¯»å–ã€‚</li>
</ul>
<p>åœ¨æ¨å¯¼å˜é‡ç±»å‹æ—¶ï¼Œauto å’Œ decltype å¯¹ cv é™åˆ¶ç¬¦çš„å¤„ç†æ˜¯ä¸ä¸€æ ·çš„ã€‚decltype ä¼šä¿ç•™ cv é™å®šç¬¦ï¼Œè€Œ auto æœ‰å¯èƒ½ä¼šå»æ‰ cv é™å®šç¬¦ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ auto å…³é”®å­—å¯¹ cv é™å®šç¬¦çš„æ¨å¯¼è§„åˆ™ï¼š</p>
<ul>
<li>å¦‚æœè¡¨è¾¾å¼çš„ç±»å‹ä¸æ˜¯æŒ‡é’ˆæˆ–è€…å¼•ç”¨ï¼Œauto ä¼šæŠŠ cv é™å®šç¬¦ç›´æ¥æŠ›å¼ƒï¼Œæ¨å¯¼æˆ non-const æˆ–è€… non-volatile ç±»å‹ã€‚</li>
<li>å¦‚æœè¡¨è¾¾å¼çš„ç±»å‹æ˜¯æŒ‡é’ˆæˆ–è€…å¼•ç”¨ï¼Œauto å°†ä¿ç•™ cv é™å®šç¬¦ã€‚</li>
</ul>
<p>ä¸‹é¢çš„ä¾‹å­æ¼”ç¤ºäº†å¯¹ const é™å®šç¬¦çš„æ¨å¯¼ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//éæŒ‡é’ˆéå¼•ç”¨ç±»å‹</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> n1 = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">auto</span> n2 = <span class="number">10</span>;</span><br><span class="line">n2 = <span class="number">99</span>;  <span class="comment">//èµ‹å€¼ä¸æŠ¥é”™</span></span><br><span class="line"><span class="keyword">decltype</span>(n1) n3 = <span class="number">20</span>;</span><br><span class="line">n3 = <span class="number">5</span>;  <span class="comment">//èµ‹å€¼æŠ¥é”™</span></span><br><span class="line"><span class="comment">//æŒ‡é’ˆç±»å‹</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> *p1 = &amp;n1;</span><br><span class="line"><span class="keyword">auto</span> p2 = p1;</span><br><span class="line">*p2 = <span class="number">66</span>;  <span class="comment">//èµ‹å€¼æŠ¥é”™</span></span><br><span class="line"><span class="keyword">decltype</span>(p1) p3 = p1;</span><br><span class="line">*p3 = <span class="number">19</span>;  <span class="comment">//èµ‹å€¼æŠ¥é”™</span></span><br><span class="line"><span class="number">123456789101112</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ C++ ä¸­æ— æ³•å°†ä¸€ä¸ªå˜é‡çš„å®Œæ•´ç±»å‹è¾“å‡ºï¼Œæˆ‘ä»¬é€šè¿‡å¯¹å˜é‡èµ‹å€¼æ¥åˆ¤æ–­å®ƒæ˜¯å¦è¢« const ä¿®é¥°ï¼›å¦‚æœè¢« const ä¿®é¥°é‚£ä¹ˆèµ‹å€¼å¤±è´¥ï¼Œå¦‚æœä¸è¢« const ä¿®é¥°é‚£ä¹ˆèµ‹å€¼æˆåŠŸã€‚è™½ç„¶è¿™ç§æ–¹æ¡ˆä¸å¤ªç›´è§‚ï¼Œä½†ä¹Ÿæ˜¯èƒ½è¾¾åˆ°ç›®çš„çš„ã€‚</p>
<p>n2 èµ‹å€¼æˆåŠŸï¼Œè¯´æ˜ä¸å¸¦ constï¼Œä¹Ÿå°±æ˜¯ const è¢« auto æŠ›å¼ƒäº†ï¼Œè¿™éªŒè¯äº† auto çš„ç¬¬ä¸€æ¡æ¨å¯¼è§„åˆ™ã€‚p2 èµ‹å€¼å¤±è´¥ï¼Œè¯´æ˜æ˜¯å¸¦ const çš„ï¼Œä¹Ÿå°±æ˜¯ const æ²¡æœ‰è¢« auto æŠ›å¼ƒï¼Œè¿™éªŒè¯äº† auto çš„ç¬¬äºŒæ¡æ¨å¯¼è§„åˆ™ã€‚</p>
<p>n3 å’Œ p3 éƒ½èµ‹å€¼å¤±è´¥ï¼Œè¯´æ˜ decltype ä¸ä¼šå»æ‰è¡¨è¾¾å¼çš„ const å±æ€§ã€‚</p>
<h3 id="å¯¹å¼•ç”¨çš„å¤„ç†"><a class="header-anchor" href="#å¯¹å¼•ç”¨çš„å¤„ç†">ğŸŒ³</a>å¯¹å¼•ç”¨çš„å¤„ç†</h3>
<p>å½“è¡¨è¾¾å¼çš„ç±»å‹ä¸ºå¼•ç”¨æ—¶ï¼Œauto å’Œ decltype çš„æ¨å¯¼è§„åˆ™ä¹Ÿä¸ä¸€æ ·ï¼›decltype ä¼šä¿ç•™å¼•ç”¨ç±»å‹ï¼Œè€Œ auto ä¼šæŠ›å¼ƒå¼•ç”¨ç±»å‹ï¼Œç›´æ¥æ¨å¯¼å‡ºå®ƒçš„åŸå§‹ç±»å‹ã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n = <span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span> &amp;r1 = n;</span><br><span class="line">    <span class="comment">//autoæ¨å¯¼</span></span><br><span class="line">    <span class="keyword">auto</span> r2 = r1;</span><br><span class="line">    r2 = <span class="number">20</span>;</span><br><span class="line">    cout &lt;&lt; n &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; r1 &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; r2 &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//decltypeæ¨å¯¼</span></span><br><span class="line">    <span class="keyword">decltype</span>(r1) r3 = n;</span><br><span class="line">    r3 = <span class="number">99</span>;</span><br><span class="line">    cout &lt;&lt; n &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; r1 &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; r3 &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112131415</span></span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š<br>
10, 10, 20<br>
99, 99, 99</p>
<p>ä»è¿è¡Œç»“æœå¯ä»¥å‘ç°ï¼Œç»™ r2 èµ‹å€¼å¹¶æ²¡æœ‰æ”¹å˜ n çš„å€¼ï¼Œè¿™è¯´æ˜ r2 æ²¡æœ‰æŒ‡å‘ nï¼Œè€Œæ˜¯è‡ªç«‹é—¨æˆ·ï¼Œå•ç‹¬æ‹¥æœ‰äº†ä¸€å—å†…å­˜ï¼Œè¿™å°±è¯æ˜ r ä¸å†æ˜¯å¼•ç”¨ç±»å‹ï¼Œå®ƒçš„å¼•ç”¨ç±»å‹è¢« auto æŠ›å¼ƒäº†ã€‚</p>
<p>ç»™ r3 èµ‹å€¼ï¼Œn çš„å€¼ä¹Ÿè·Ÿç€æ”¹å˜äº†ï¼Œè¿™è¯´æ˜ r3 ä»ç„¶æŒ‡å‘ nï¼Œå®ƒçš„å¼•ç”¨ç±»å‹è¢« decltype ä¿ç•™äº†ã€‚</p>
<h3 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“">ğŸŒ³</a>æ€»ç»“</h3>
<p>auto è™½ç„¶åœ¨ä¹¦å†™æ ¼å¼ä¸Šæ¯” decltype ç®€å•ï¼Œä½†æ˜¯å®ƒçš„æ¨å¯¼è§„åˆ™å¤æ‚ï¼Œæœ‰æ—¶å€™ä¼šæ”¹å˜è¡¨è¾¾å¼çš„åŸå§‹ç±»å‹ï¼›è€Œ decltype æ¯”è¾ƒçº¯ç²¹ï¼Œå®ƒä¸€èˆ¬ä¼šåšæŒä¿ç•™åŸå§‹è¡¨è¾¾å¼çš„ä»»ä½•ç±»å‹ï¼Œè®©æ¨å¯¼çš„ç»“æœæ›´åŠ åŸæ±åŸå‘³ã€‚</p>
<p>ä»ä»£ç æ˜¯å¦å¥å£®çš„è§’åº¦è€ƒè™‘ï¼Œæˆ‘æ¨èä½¿ç”¨ decltypeï¼Œå®ƒæ²¡æœ‰é‚£ä¹ˆå¤šæ˜¯éï¼›ä½†æ˜¯ decltype æ€»æ˜¯æ˜¾å¾—æ¯”è¾ƒéº»çƒ¦ï¼Œå°¤å…¶æ˜¯å½“è¡¨è¾¾å¼æ¯”è¾ƒå¤æ‚æ—¶ï¼Œä¾‹å¦‚ï¼š</p>
<p>vector nums;<br>
decltype(nums.begin()) it = nums.begin();</p>
<p>è€Œå¦‚æœä½¿ç”¨ auto å°±ä¼šæ¸…çˆ½å¾ˆå¤šï¼š</p>
<p>vector nums;<br>
auto it = nums.begin();</p>
<p>åœ¨å®é™…å¼€å‘ä¸­äººä»¬ä»ç„¶å–œæ¬¢ä½¿ç”¨ auto å…³é”®å­—ï¼ˆæˆ‘ä¹Ÿè¿™ä¹ˆå¹²ï¼‰ï¼Œå› ä¸ºå®ƒç”¨èµ·æ¥ç®€å•ç›´è§‚ï¼Œæ›´ç¬¦åˆäººä»¬çš„å®¡ç¾ã€‚å¦‚æœä½ çš„è¡¨è¾¾å¼ç±»å‹ä¸å¤æ‚ï¼Œæˆ‘è¿˜æ˜¯æ¨èä½¿ç”¨ auto å…³é”®å­—ï¼Œä¼˜é›…çš„ä»£ç æ€»æ˜¯å«äººèµå¿ƒæ‚¦ç›®ï¼Œæ²‰æµ¸å…¶ä¸­ã€‚</p>
<h2 id="c-è¿”å›å€¼ç±»å‹åç½®-è·Ÿè¸ªè¿”å›å€¼ç±»å‹"><a class="header-anchor" href="#c-è¿”å›å€¼ç±»å‹åç½®-è·Ÿè¸ªè¿”å›å€¼ç±»å‹">ğŸŒ³</a>C++è¿”å›å€¼ç±»å‹åç½®ï¼ˆè·Ÿè¸ªè¿”å›å€¼ç±»å‹ï¼‰</h2>
<p>åœ¨æ³›å‹ç¼–ç¨‹ä¸­ï¼Œå¯èƒ½éœ€è¦é€šè¿‡å‚æ•°çš„è¿ç®—æ¥å¾—åˆ°è¿”å›å€¼çš„ç±»å‹ã€‚è€ƒè™‘ä¸‹é¢è¿™ä¸ªåœºæ™¯ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> R, <span class="keyword">typename</span> T, <span class="keyword">typename</span> U&gt;</span><br><span class="line"><span class="function">R <span class="title">add</span><span class="params">(T t, U u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> t+u;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> a = <span class="number">1</span>; <span class="type">float</span> b = <span class="number">2.0</span>;</span><br><span class="line"><span class="keyword">auto</span> c = <span class="built_in">add</span>&lt;<span class="keyword">decltype</span>(a + b)&gt;(a, b);</span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¹¶ä¸å…³å¿ƒ a+b çš„ç±»å‹æ˜¯ä»€ä¹ˆï¼Œå› æ­¤ï¼Œåªéœ€è¦é€šè¿‡ decltype(a+b) ç›´æ¥å¾—åˆ°è¿”å›å€¼ç±»å‹å³å¯ã€‚ä½†æ˜¯åƒä¸Šé¢è¿™æ ·ä½¿ç”¨ååˆ†ä¸æ–¹ä¾¿ï¼Œå› ä¸ºå¤–éƒ¨å…¶å®å¹¶ä¸çŸ¥é“å‚æ•°ä¹‹é—´åº”è¯¥å¦‚ä½•è¿ç®—ï¼Œåªæœ‰ add å‡½æ•°æ‰çŸ¥é“è¿”å›å€¼åº”å½“å¦‚ä½•æ¨å¯¼ã€‚</p>
<p>é‚£ä¹ˆï¼Œåœ¨ add å‡½æ•°çš„å®šä¹‰ä¸Šèƒ½ä¸èƒ½ç›´æ¥é€šè¿‡ decltype æ‹¿åˆ°è¿”å›å€¼å‘¢ï¼Ÿ</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> U&gt;</span><br><span class="line"><span class="keyword">decltype</span>(t + u) <span class="built_in">add</span>(T t, U u)  <span class="comment">// error: tã€uå°šæœªå®šä¹‰</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> t + u;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œç›´æ¥åƒä¸Šé¢è¿™æ ·å†™æ˜¯ç¼–è¯‘ä¸è¿‡çš„ã€‚å› ä¸º tã€u åœ¨å‚æ•°åˆ—è¡¨ä¸­ï¼Œè€Œ <a href="http://c.biancheng.net/cplus/">C++</a> çš„è¿”å›å€¼æ˜¯å‰ç½®è¯­æ³•ï¼Œåœ¨è¿”å›å€¼å®šä¹‰çš„æ—¶å€™å‚æ•°å˜é‡è¿˜ä¸å­˜åœ¨ã€‚</p>
<p>å¯è¡Œçš„å†™æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> U&gt;</span><br><span class="line"><span class="keyword">decltype</span>(<span class="built_in">T</span>() + <span class="built_in">U</span>()) <span class="built_in">add</span>(T t, U u)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> t + u;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>
<p>è€ƒè™‘åˆ° Tã€U å¯èƒ½æ˜¯æ²¡æœ‰æ— å‚æ„é€ å‡½æ•°çš„ç±»ï¼Œæ­£ç¡®çš„å†™æ³•åº”è¯¥æ˜¯è¿™æ ·ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> U&gt;</span><br><span class="line"><span class="keyword">decltype</span>((*(T*)<span class="number">0</span>) + (*(U*)<span class="number">0</span>)) <span class="built_in">add</span>(T t, U u)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> t + u;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>
<p>è™½ç„¶æˆåŠŸåœ°ä½¿ç”¨ decltype å®Œæˆäº†è¿”å›å€¼çš„æ¨å¯¼ï¼Œä½†å†™æ³•è¿‡äºæ™¦æ¶©ï¼Œä¼šå¤§å¤§å¢åŠ  decltype åœ¨è¿”å›å€¼ç±»å‹æ¨å¯¼ä¸Šçš„ä½¿ç”¨éš¾åº¦å¹¶é™ä½ä»£ç çš„å¯è¯»æ€§ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨ C++11 ä¸­å¢åŠ äº†**è¿”å›ç±»å‹åç½®ï¼ˆtrailing-return-typeï¼Œåˆç§°è·Ÿè¸ªè¿”å›ç±»å‹ï¼‰**è¯­æ³•ï¼Œå°† decltype å’Œ auto ç»“åˆèµ·æ¥å®Œæˆè¿”å›å€¼ç±»å‹çš„æ¨å¯¼ã€‚</p>
<p>è¿”å›ç±»å‹åç½®è¯­æ³•æ˜¯é€šè¿‡ auto å’Œ decltype ç»“åˆèµ·æ¥ä½¿ç”¨çš„ã€‚ä¸Šé¢çš„ add å‡½æ•°ï¼Œä½¿ç”¨æ–°çš„è¯­æ³•å¯ä»¥å†™æˆï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> U&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">add</span><span class="params">(T t, U u)</span> -&gt; <span class="title">decltype</span><span class="params">(t + u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> t + u;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†è¿›ä¸€æ­¥è¯´æ˜è¿™ä¸ªè¯­æ³•ï¼Œå†çœ‹å¦ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span>&amp; <span class="title">foo</span><span class="params">(<span class="type">int</span>&amp; i)</span></span>;</span><br><span class="line"><span class="function"><span class="type">float</span> <span class="title">foo</span><span class="params">(<span class="type">float</span>&amp; f)</span></span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">func</span><span class="params">(T&amp; val)</span> -&gt; <span class="title">decltype</span><span class="params">(foo(val))</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">foo</span>(val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¯´å‰ä¸€ä¸ªä¾‹å­ä¸­çš„ add ä½¿ç”¨ C++98/03 çš„è¿”å›å€¼å†™æ³•è¿˜å‹‰å¼ºå¯ä»¥å®Œæˆï¼Œé‚£ä¹ˆè¿™ä¸ªä¾‹å­å¯¹äº C++ è€Œè¨€å°±æ˜¯ä¸å¯èƒ½å®Œæˆçš„ä»»åŠ¡äº†ã€‚</p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½¿ç”¨ decltype ç»“åˆè¿”å›å€¼åç½®è¯­æ³•å¾ˆå®¹æ˜“æ¨å¯¼å‡ºäº† foo(val) å¯èƒ½å‡ºç°çš„è¿”å›å€¼ç±»å‹ï¼Œå¹¶å°†å…¶ç”¨åˆ°äº† func ä¸Šã€‚</p>
<p>è¿”å›å€¼ç±»å‹åç½®è¯­æ³•ï¼Œæ˜¯ä¸ºäº†è§£å†³å‡½æ•°è¿”å›å€¼ç±»å‹ä¾èµ–äºå‚æ•°è€Œå¯¼è‡´éš¾ä»¥ç¡®å®šè¿”å›å€¼ç±»å‹çš„é—®é¢˜ã€‚æœ‰äº†è¿™ç§è¯­æ³•ä»¥åï¼Œå¯¹è¿”å›å€¼ç±»å‹çš„æ¨å¯¼å°±å¯ä»¥ç”¨æ¸…æ™°çš„æ–¹å¼ï¼ˆç›´æ¥é€šè¿‡å‚æ•°åšè¿ç®—ï¼‰æè¿°å‡ºæ¥ï¼Œè€Œä¸éœ€è¦åƒ C++98/03 é‚£æ ·ä½¿ç”¨æ™¦æ¶©éš¾æ‡‚çš„å†™æ³•ã€‚</p>
<h2 id="c-11å¯¹æ¨¡æ¿å®ä¾‹åŒ–ä¸­è¿ç»­å³å°–æ‹¬å·-çš„æ”¹è¿›"><a class="header-anchor" href="#c-11å¯¹æ¨¡æ¿å®ä¾‹åŒ–ä¸­è¿ç»­å³å°–æ‹¬å·-çš„æ”¹è¿›">ğŸŒ³</a>C++11å¯¹æ¨¡æ¿å®ä¾‹åŒ–ä¸­è¿ç»­å³å°–æ‹¬å·&gt;&gt;çš„æ”¹è¿›</h2>
<p>åœ¨ C++98/03 çš„æ³›å‹ç¼–ç¨‹ä¸­ï¼Œæ¨¡æ¿å®ä¾‹åŒ–æœ‰ä¸€ä¸ªå¾ˆçƒ¦ççš„åœ°æ–¹ï¼Œé‚£å°±æ˜¯è¿ç»­ä¸¤ä¸ªå³å°–æ‹¬å·ï¼ˆ&gt;&gt;ï¼‰ä¼šè¢«ç¼–è¯‘å™¨è§£é‡Šæˆå³ç§»æ“ä½œç¬¦ï¼Œè€Œä¸æ˜¯æ¨¡æ¿å‚æ•°è¡¨çš„ç»“æŸã€‚</p>
<p>ã€å®ä¾‹ã€‘C++98/03 ä¸­ä¸æ”¯æŒè¿ç»­ä¸¤ä¸ªå³å°–æ‹¬å·çš„ç¤ºä¾‹ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Foo</span></span><br><span class="line">&#123;</span><br><span class="line">      <span class="keyword">typedef</span> T type;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Foo&lt;A&lt;<span class="type">int</span>&gt;&gt;::type xx;  <span class="comment">//ç¼–è¯‘å‡ºé”™</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112131415</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ gcc ç¼–è¯‘æ—¶ï¼Œä¼šå¾—åˆ°å¦‚ä¸‹é”™è¯¯æç¤ºï¼š</p>
<p>error: â€˜&gt;&gt;â€™ should be â€˜&gt;&gt;â€™ within a nested template argument list Foo<A>::type xx;</A></p>
<p>æ„æ€å°±æ˜¯ï¼Œ<code>Foo&lt;A&lt;int&gt;&gt;</code>è¿™ç§å†™æ³•æ˜¯ä¸è¢«æ”¯æŒçš„ï¼Œè¦å†™æˆè¿™æ ·<code>Foo&lt;A&lt;int&gt; &gt;</code>ï¼ˆæ³¨æ„ä¸¤ä¸ªå³å°–æ‹¬å·ä¹‹é—´çš„ç©ºæ ¼ï¼‰ã€‚</p>
<p>è¿™ç§é™åˆ¶æ— ç–‘æ˜¯å¾ˆæ²¡æœ‰å¿…è¦çš„ã€‚åœ¨ C++ çš„å„ç§æˆå¯¹æ‹¬å·ä¸­ï¼Œç›®å‰åªæœ‰å³å°–æ‹¬å·è¿ç»­å†™ä¸¤ä¸ªä¼šå‡ºç°è¿™ç§äºŒä¹‰æ€§ã€‚static_castã€reinterpret_cast ç­‰ C++ æ ‡å‡†è½¬æ¢è¿ç®—ç¬¦ï¼Œéƒ½æ˜¯ä½¿ç”¨<code>&lt;&gt;</code>æ¥è·å¾—å¾…è½¬æ¢ç±»å‹ï¼ˆtype-idï¼‰çš„ã€‚è‹¥è¿™ä¸ª type-id æœ¬èº«æ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œç”¨èµ·æ¥ä¼šå¾ˆä¸æ–¹ä¾¿ã€‚</p>
<p>ç°åœ¨åœ¨ C++11 ä¸­ï¼Œè¿™ç§é™åˆ¶ç»ˆäºè¢«å–æ¶ˆäº†ã€‚åœ¨ C++11 æ ‡å‡†ä¸­ï¼Œè¦æ±‚ç¼–è¯‘å™¨å¯¹æ¨¡æ¿çš„å³å°–æ‹¬å·åšå•ç‹¬å¤„ç†ï¼Œä½¿ç¼–è¯‘å™¨èƒ½å¤Ÿæ­£ç¡®åˆ¤æ–­å‡º<code>&gt;&gt;</code>æ˜¯ä¸€ä¸ªå³ç§»æ“ä½œç¬¦è¿˜æ˜¯æ¨¡æ¿å‚æ•°è¡¨çš„ç»“æŸæ ‡è®°ï¼ˆdelimiterï¼Œç•Œå®šç¬¦ï¼‰ã€‚</p>
<p>ä¸è¿‡è¿™ç§è‡ªåŠ¨åŒ–çš„å¤„ç†åœ¨æŸäº›æ—¶å€™ä¼šä¸è€æ ‡å‡†ä¸å…¼å®¹ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="type">int</span> N&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Foo</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Foo&lt;<span class="number">100</span> &gt;&gt; <span class="number">2</span>&gt; xx;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ C++98/03 çš„ç¼–è¯‘å™¨ä¸­ç¼–è¯‘æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½† C++11 çš„ç¼–è¯‘å™¨ä¼šæ˜¾ç¤ºï¼š</p>
<p>error: expected unqualif?ied-id before â€˜&gt;â€™ token Foo&lt;100 &gt;&gt; 2&gt; xx;</p>
<p>è§£å†³çš„æ–¹æ³•æ˜¯è¿™æ ·å†™ï¼š</p>
<p>Foo&lt;(100 &gt;&gt; 2)&gt; xx; // æ³¨æ„æ‹¬å·</p>
<p>è¿™ç§åŠ æ‹¬å·çš„å†™æ³•å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªè‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œä½¿å¾—åœ¨ä¹¦å†™æ—¶å€¾å‘äºå†™å‡ºæ— äºŒä¹‰æ€§çš„ä»£ç ã€‚</p>
<h3 id="æ‰©å±•é˜…è¯»"><a class="header-anchor" href="#æ‰©å±•é˜…è¯»">ğŸŒ³</a>æ‰©å±•é˜…è¯»</h3>
<p>å„ç§ C++98/03 ç¼–è¯‘å™¨é™¤äº†æ”¯æŒæ ‡å‡†ï¼ˆISO/IEC 14882ï¼š2003 åŠå…¶ä¹‹å‰çš„æ ‡å‡†ï¼‰ä¹‹å¤–ï¼Œè¿˜è‡ªè¡Œåšäº†ä¸å°‘çš„æ‹“å±•ã€‚è¿™äº›æ‹“å±•ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œåæ¥ç»è¿‡äº† C++ å§”å‘˜ä¼šçš„æ–Ÿé…Œå’Œå®Œå–„ï¼Œè¿›å…¥äº† C++11ã€‚</p>
<p>æ‰€ä»¥æœ‰ä¸€éƒ¨åˆ† C++11 çš„æ–°ç‰¹å¾ï¼Œåœ¨ä¸€äº› C++98/03 çš„è€ç¼–è¯‘å™¨ä¸‹ä¹Ÿæ˜¯å¯ä»¥æ”¯æŒçš„ï¼Œåªæ˜¯ç”±äºæ²¡æœ‰æ ‡å‡†åŒ–ï¼Œæ— æ³•ä¿è¯å„ç§å¹³å°/ç¼–è¯‘å™¨ä¸‹çš„å…¼å®¹æ€§ã€‚æ¯”å¦‚åƒ Microsoft Visual C++2005 è¿™ç§ä¸æ”¯æŒ C++11 çš„ç¼–è¯‘å™¨ï¼Œåœ¨å¯¹æ¨¡æ¿å³å°–æ‹¬å·çš„å¤„ç†ä¸Šå’Œç°åœ¨çš„ C++11 æ˜¯ä¸€è‡´çš„ã€‚</p>
<h2 id="c-11ä½¿ç”¨usingå®šä¹‰åˆ«å-æ›¿ä»£typedef"><a class="header-anchor" href="#c-11ä½¿ç”¨usingå®šä¹‰åˆ«å-æ›¿ä»£typedef">ğŸŒ³</a>C++11ä½¿ç”¨usingå®šä¹‰åˆ«åï¼ˆæ›¿ä»£typedefï¼‰</h2>
<p>å¤§å®¶éƒ½çŸ¥é“ï¼Œåœ¨ <a href="http://c.biancheng.net/cplus/">C++</a> ä¸­å¯ä»¥é€šè¿‡ typedef é‡å®šä¹‰ä¸€ä¸ªç±»å‹ï¼š</p>
<p>typedef unsigned int uint_t;</p>
<p>è¢«é‡å®šä¹‰çš„ç±»å‹å¹¶ä¸æ˜¯ä¸€ä¸ªæ–°çš„ç±»å‹ï¼Œä»…ä»…åªæ˜¯åŸæœ‰çš„ç±»å‹å–äº†ä¸€ä¸ªæ–°çš„åå­—ã€‚å› æ­¤ï¼Œä¸‹é¢è¿™æ ·å°†ä¸æ˜¯åˆæ³•çš„å‡½æ•°é‡è½½ï¼š</p>
<p>void func(unsigned int);<br>
void func(uint_t); // error: redefinition</p>
<p>ä½¿ç”¨ typedef é‡å®šä¹‰ç±»å‹æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œä½†å®ƒä¹Ÿæœ‰ä¸€äº›é™åˆ¶ï¼Œæ¯”å¦‚ï¼Œæ— æ³•é‡å®šä¹‰ä¸€ä¸ªæ¨¡æ¿ã€‚</p>
<p>æƒ³è±¡ä¸‹é¢è¿™ä¸ªåœºæ™¯ï¼š</p>
<p>typedef std::map&lt;std::string, int&gt; map_int_t;<br>
// â€¦<br>
typedef std::map&lt;std::string, std::string&gt; map_str_t;<br>
// â€¦</p>
<p>æˆ‘ä»¬éœ€è¦çš„å…¶å®æ˜¯ä¸€ä¸ªå›ºå®šä»¥ std::string ä¸º key çš„ mapï¼Œå®ƒå¯ä»¥æ˜ å°„åˆ° int æˆ–å¦ä¸€ä¸ª std::stringã€‚ç„¶è€Œè¿™ä¸ªç®€å•çš„éœ€æ±‚ä»…é€šè¿‡ typedef å´å¾ˆéš¾åŠåˆ°ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨ C++98/03 ä¸­å¾€å¾€ä¸å¾—ä¸è¿™æ ·å†™ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Val&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">str_map</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">typedef</span> std::map&lt;std::string, Val&gt; type;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">str_map&lt;<span class="type">int</span>&gt;::type map1;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªè™½ç„¶ç®€å•ä½†å´ç•¥æ˜¾çƒ¦ççš„ str_map å¤–æ•·ç±»æ˜¯å¿…è¦çš„ã€‚è¿™æ˜æ˜¾è®©æˆ‘ä»¬åœ¨å¤ç”¨æŸäº›æ³›å‹ä»£ç æ—¶éå¸¸éš¾å—ã€‚</p>
<p>ç°åœ¨ï¼Œåœ¨ C++11 ä¸­ç»ˆäºå‡ºç°äº†å¯ä»¥é‡å®šä¹‰ä¸€ä¸ªæ¨¡æ¿çš„è¯­æ³•ã€‚è¯·çœ‹ä¸‹é¢çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Val&gt;</span><br><span class="line"><span class="keyword">using</span> <span class="type">str_map_t</span> = std::map&lt;std::string, Val&gt;;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="type">str_map_t</span>&lt;<span class="type">int</span>&gt; map1;</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä½¿ç”¨æ–°çš„ using åˆ«åè¯­æ³•å®šä¹‰äº† std::map çš„æ¨¡æ¿åˆ«å str_map_tã€‚æ¯”èµ·å‰é¢ä½¿ç”¨å¤–æ•·æ¨¡æ¿åŠ  typedef æ„å»ºçš„ str_mapï¼Œå®ƒå®Œå…¨å°±åƒæ˜¯ä¸€ä¸ªæ–°çš„ map ç±»æ¨¡æ¿ï¼Œå› æ­¤ï¼Œç®€æ´äº†å¾ˆå¤šã€‚</p>
<p>å®é™…ä¸Šï¼Œusing çš„åˆ«åè¯­æ³•è¦†ç›–äº† typedef çš„å…¨éƒ¨åŠŸèƒ½ã€‚å…ˆæ¥çœ‹çœ‹å¯¹æ™®é€šç±»å‹çš„é‡å®šä¹‰ç¤ºä¾‹ï¼Œå°†è¿™ä¸¤ç§è¯­æ³•å¯¹æ¯”ä¸€ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é‡å®šä¹‰unsigned int</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">int</span> <span class="type">uint_t</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="type">uint_t</span> = <span class="type">unsigned</span> <span class="type">int</span>;</span><br><span class="line"><span class="comment">// é‡å®šä¹‰std::map</span></span><br><span class="line"><span class="keyword">typedef</span> std::map&lt;std::string, <span class="type">int</span>&gt; <span class="type">map_int_t</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="type">map_int_t</span> = std::map&lt;std::string, <span class="type">int</span>&gt;;</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨é‡å®šä¹‰æ™®é€šç±»å‹ä¸Šï¼Œä¸¤ç§ä½¿ç”¨æ–¹æ³•çš„æ•ˆæœæ˜¯ç­‰ä»·çš„ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯å®šä¹‰è¯­æ³•ã€‚</p>
<p>typedef çš„å®šä¹‰æ–¹æ³•å’Œå˜é‡çš„å£°æ˜ç±»ä¼¼ï¼šåƒå£°æ˜ä¸€ä¸ªå˜é‡ä¸€æ ·ï¼Œå£°æ˜ä¸€ä¸ªé‡å®šä¹‰ç±»å‹ï¼Œä¹‹ååœ¨å£°æ˜ä¹‹å‰åŠ ä¸Š typedef å³å¯ã€‚è¿™ç§å†™æ³•å‡¸æ˜¾äº† C/C++ ä¸­çš„è¯­æ³•ä¸€è‡´æ€§ï¼Œä½†æœ‰æ—¶å´ä¼šå¢åŠ ä»£ç çš„é˜…è¯»éš¾åº¦ã€‚æ¯”å¦‚é‡å®šä¹‰ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆæ—¶ï¼š</p>
<p>typedef void (*func_t)(int, int);</p>
<p>ä¸ä¹‹ç›¸æ¯”ï¼Œusing åé¢æ€»æ˜¯ç«‹å³è·Ÿéšæ–°æ ‡è¯†ç¬¦ï¼ˆIdentifierï¼‰ï¼Œä¹‹åä½¿ç”¨ç±»ä¼¼èµ‹å€¼çš„è¯­æ³•ï¼ŒæŠŠç°æœ‰çš„ç±»å‹ï¼ˆtype-idï¼‰èµ‹ç»™æ–°ç±»å‹ï¼š</p>
<p>using func_t = void (*)(int, int);</p>
<p>ä»ä¸Šé¢çš„å¯¹æ¯”ä¸­å¯ä»¥å‘ç°ï¼ŒC++11 çš„ using åˆ«åè¯­æ³•æ¯” typedef æ›´åŠ æ¸…æ™°ã€‚å› ä¸º typedef çš„åˆ«åè¯­æ³•æœ¬è´¨ä¸Šç±»ä¼¼ä¸€ç§è§£æ–¹ç¨‹çš„æ€è·¯ã€‚è€Œ using è¯­æ³•é€šè¿‡èµ‹å€¼æ¥å®šä¹‰åˆ«åï¼Œå’Œæˆ‘ä»¬å¹³æ—¶çš„æ€è€ƒæ–¹å¼ä¸€è‡´ã€‚</p>
<p>ä¸‹é¢å†é€šè¿‡ä¸€ä¸ªå¯¹æ¯”ç¤ºä¾‹ï¼Œçœ‹çœ‹æ–°çš„ using è¯­æ³•æ˜¯å¦‚ä½•å®šä¹‰æ¨¡æ¿åˆ«åçš„ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* C++98/03 */</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">func_t</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">typedef</span> <span class="title">void</span> <span class="params">(*type)</span><span class="params">(T, T)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ä½¿ç”¨ func_t æ¨¡æ¿</span></span><br><span class="line"><span class="type">func_t</span>&lt;<span class="type">int</span>&gt;::type xx_1;</span><br><span class="line"><span class="comment">/* C++11 */</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">using</span> <span class="type">func_t</span> = <span class="built_in">void</span> (*)(T, T);</span><br><span class="line"><span class="comment">// ä½¿ç”¨ func_t æ¨¡æ¿</span></span><br><span class="line"><span class="type">func_t</span>&lt;<span class="type">int</span>&gt; xx_2;</span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure>
<p>ä»ç¤ºä¾‹ä¸­å¯ä»¥çœ‹å‡ºï¼Œé€šè¿‡ using å®šä¹‰æ¨¡æ¿åˆ«åçš„è¯­æ³•ï¼Œåªæ˜¯åœ¨æ™®é€šç±»å‹åˆ«åè¯­æ³•çš„åŸºç¡€ä¸Šå¢åŠ  template çš„å‚æ•°åˆ—è¡¨ã€‚ä½¿ç”¨ using å¯ä»¥è½»æ¾åœ°åˆ›å»ºä¸€ä¸ªæ–°çš„æ¨¡æ¿åˆ«åï¼Œè€Œä¸éœ€è¦åƒ C++98/03 é‚£æ ·ä½¿ç”¨çƒ¦ççš„å¤–æ•·æ¨¡æ¿ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œusing è¯­æ³•å’Œ typedef ä¸€æ ·ï¼Œå¹¶ä¸ä¼šåˆ›é€ æ–°çš„ç±»å‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šé¢ç¤ºä¾‹ä¸­ C++11 çš„ using å†™æ³•åªæ˜¯ typedef çš„ç­‰ä»·ç‰©ã€‚è™½ç„¶ using é‡å®šä¹‰çš„ func_t æ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œä½† func_t å®šä¹‰çš„ xx_2 å¹¶ä¸æ˜¯ä¸€ä¸ªç”±ç±»æ¨¡æ¿å®ä¾‹åŒ–åçš„ç±»ï¼Œè€Œæ˜¯ void(*)(int, int) çš„åˆ«åã€‚</p>
<p>å› æ­¤ï¼Œä¸‹é¢è¿™æ ·å†™ï¼š</p>
<p>void foo(void (*func_call)(int, int));<br>
void foo(func_t func_call); // error: redefinition</p>
<p>åŒæ ·æ˜¯æ— æ³•å®ç°é‡è½½çš„ï¼Œfunc_t åªæ˜¯ void(*)(int, int) ç±»å‹çš„ç­‰ä»·ç‰©ã€‚</p>
<p>ç»†å¿ƒçš„è¯»è€…å¯ä»¥å‘ç°ï¼Œusing é‡å®šä¹‰çš„ func_t æ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œä½†å®ƒæ—¢ä¸æ˜¯ç±»æ¨¡æ¿ä¹Ÿä¸æ˜¯å‡½æ•°æ¨¡æ¿ï¼ˆå‡½æ•°æ¨¡æ¿å®ä¾‹åŒ–åæ˜¯ä¸€ä¸ªå‡½æ•°ï¼‰ï¼Œè€Œæ˜¯ä¸€ç§æ–°çš„æ¨¡æ¿å½¢å¼ï¼šæ¨¡æ¿åˆ«åï¼ˆalias templateï¼‰ã€‚</p>
<p>å…¶å®ï¼Œé€šè¿‡ using å¯ä»¥è½»æ¾å®šä¹‰ä»»æ„ç±»å‹çš„æ¨¡æ¿è¡¨è¾¾æ–¹å¼ã€‚æ¯”å¦‚ä¸‹é¢è¿™æ ·ï¼š</p>
<p>template<br>
using type_t = T;<br>
// â€¦<br>
type_t i;</p>
<p>type_t å®ä¾‹åŒ–åçš„ç±»å‹å’Œå®ƒçš„æ¨¡æ¿å‚æ•°ç±»å‹ç­‰ä»·ã€‚è¿™é‡Œï¼Œtype_t å°†ç­‰ä»·äº intã€‚</p>
<h2 id="c-11æ”¯æŒå‡½æ•°æ¨¡æ¿çš„é»˜è®¤æ¨¡æ¿å‚æ•°"><a class="header-anchor" href="#c-11æ”¯æŒå‡½æ•°æ¨¡æ¿çš„é»˜è®¤æ¨¡æ¿å‚æ•°">ğŸŒ³</a>C++11æ”¯æŒå‡½æ•°æ¨¡æ¿çš„é»˜è®¤æ¨¡æ¿å‚æ•°</h2>
<p>åœ¨ <a href="http://c.biancheng.net/cplus/">C++</a>98/03 æ ‡å‡†ä¸­ï¼Œç±»æ¨¡æ¿å¯ä»¥æœ‰é»˜è®¤çš„æ¨¡æ¿å‚æ•°ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> U = <span class="type">int</span>, U N = <span class="number">0</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> Foo</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯å´ä¸æ”¯æŒå‡½æ•°çš„é»˜è®¤æ¨¡æ¿å‚æ•°ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T = <span class="type">int</span>&gt;  <span class="comment">// error in C++98/03: default template arguments</span></span><br><span class="line"><span class="type">void</span> <span class="built_in">func</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>
<p>ç°åœ¨è¿™ä¸€é™åˆ¶åœ¨ C++11 ä¸­è¢«è§£é™¤äº†ã€‚ä¸Šé¢çš„ func å‡½æ•°åœ¨ C++11 ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">func</span>();   <span class="comment">//T = int</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶æ¨¡æ¿å‚æ•° T çš„ç±»å‹å°±ä¸ºé»˜è®¤å€¼ intã€‚ä»ä¸Šé¢çš„ä¾‹å­ä¸­å¯ä»¥çœ‹å‡ºï¼Œå½“æ‰€æœ‰æ¨¡æ¿å‚æ•°éƒ½æœ‰é»˜è®¤å‚æ•°æ—¶ï¼Œå‡½æ•°æ¨¡æ¿çš„è°ƒç”¨å¦‚åŒä¸€ä¸ªæ™®é€šå‡½æ•°ã€‚ä½†å¯¹äºç±»æ¨¡æ¿è€Œè¨€ï¼Œå“ªæ€•æ‰€æœ‰å‚æ•°éƒ½æœ‰é»˜è®¤å‚æ•°ï¼Œåœ¨ä½¿ç”¨æ—¶ä¹Ÿå¿…é¡»åœ¨æ¨¡æ¿ååè·Ÿéš<code>&lt;&gt;</code>æ¥å®ä¾‹åŒ–ã€‚</p>
<p>é™¤äº†ä¸Šé¢æåˆ°çš„éƒ¨åˆ†ä¹‹å¤–ï¼Œå‡½æ•°æ¨¡æ¿çš„é»˜è®¤æ¨¡æ¿å‚æ•°åœ¨ä½¿ç”¨è§„åˆ™ä¸Šå’Œå…¶ä»–çš„é»˜è®¤å‚æ•°ä¹Ÿæœ‰ä¸€äº›ä¸åŒï¼Œå®ƒæ²¡æœ‰å¿…é¡»å†™åœ¨å‚æ•°è¡¨æœ€åçš„é™åˆ¶ã€‚ç”šè‡³äºï¼Œæ ¹æ®å®é™…åœºæ™¯ä¸­å‡½æ•°æ¨¡æ¿è¢«è°ƒç”¨çš„æƒ…å½¢ï¼Œç¼–è¯‘å™¨è¿˜å¯ä»¥è‡ªè¡Œæ¨å¯¼å‡ºéƒ¨åˆ†æ¨¡æ¿å‚æ•°çš„ç±»å‹ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼Œå½“é»˜è®¤æ¨¡æ¿å‚æ•°å’Œç¼–è¯‘å™¨è‡ªè¡Œæ¨å¯¼å‡ºæ¨¡æ¿å‚æ•°ç±»å‹çš„èƒ½åŠ›ä¸€èµ·ç»“åˆä½¿ç”¨æ—¶ï¼Œä»£ç çš„ä¹¦å†™å°†å˜å¾—å¼‚å¸¸çµæ´»ã€‚æˆ‘ä»¬å¯ä»¥æŒ‡å®šå‡½æ•°ä¸­çš„ä¸€éƒ¨åˆ†æ¨¡æ¿å‚æ•°é‡‡ç”¨é»˜è®¤å‚æ•°ï¼Œè€Œå¦ä¸€éƒ¨åˆ†ä½¿ç”¨è‡ªåŠ¨æ¨å¯¼ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> R = <span class="type">int</span>, <span class="keyword">typename</span> U&gt;</span><br><span class="line">R <span class="built_in">func</span>(U val)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> val;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">func</span>(<span class="number">97</span>);               <span class="comment">// R=int, U=int</span></span><br><span class="line">    <span class="built_in">func</span>&lt;<span class="type">char</span>&gt;(<span class="number">97</span>);         <span class="comment">// R=char, U=int</span></span><br><span class="line">    <span class="built_in">func</span>&lt;<span class="type">double</span>, <span class="type">int</span>&gt;(<span class="number">97</span>);  <span class="comment">// R=double, U=int</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112</span></span><br></pre></td></tr></table></figure>
<p>C++11 æ ‡å‡†ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åƒ func(97) è¿™æ ·è°ƒç”¨æ¨¡æ¿å‡½æ•°ï¼Œå› ä¸ºç¼–è¯‘å™¨å¯ä»¥æ ¹æ®å®å‚ 97 è‡ªè¡Œæ¨å¯¼å‡ºæ¨¡æ¿å‚æ•° U çš„ç±»å‹ä¸º intï¼Œå¹¶ä¸”æ ¹æ®è¿”å›å€¼ val=97 æ¨å¯¼å‡º R çš„ç±»å‹ä¹Ÿä¸º intï¼›è€Œ func(97) æ‰‹åŠ¨æŒ‡å®šäº†æ¨¡æ¿å‚æ•° R çš„ç±»å‹ä¸º charï¼ˆé»˜è®¤æ¨¡æ¿å‚æ•°å°†æ— æ•ˆï¼‰ï¼Œå¹¶é€šè¿‡å®å‚ 97 æ¨å¯¼å‡ºäº† U = intï¼›æœ€å func&lt;double,int&gt;(97) æ‰‹åŠ¨æŒ‡å®šçš„ R å’Œ U çš„ç±»å‹å€¼ï¼Œå› æ­¤æ— éœ€ç¼–è¯‘å™¨è‡ªè¡Œæ¨å¯¼ã€‚</p>
<p>å†æ¬¡å¼ºè°ƒï¼Œå½“é»˜è®¤æ¨¡æ¿å‚æ•°å’Œè‡ªè¡Œæ¨å¯¼çš„æ¨¡æ¿å‚æ•°åŒæ—¶ä½¿ç”¨æ—¶ï¼Œè‹¥æ— æ³•æ¨å¯¼å‡ºå‡½æ•°æ¨¡æ¿å‚æ•°çš„ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šé€‰æ‹©ä½¿ç”¨é»˜è®¤æ¨¡æ¿å‚æ•°ï¼›å¦‚æœæ¨¡æ¿å‚æ•°å³æ— æ³•æ¨å¯¼å‡ºæ¥ï¼Œåˆæœªè®¾ç½®å…¶é»˜è®¤å€¼ï¼Œåˆ™ç¼–è¯‘å™¨ç›´æ¥æŠ¥é”™ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> U = <span class="type">double</span>&gt;</span><br><span class="line"><span class="type">void</span> <span class="built_in">func</span>(T val1 = <span class="number">0</span>, U val2 = <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="built_in">main</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">func</span>(<span class="string">&#x27;c&#x27;</span>); <span class="comment">//T=char, U=double</span></span><br><span class="line">    <span class="built_in">func</span>();    <span class="comment">//ç¼–è¯‘æŠ¥é”™</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œfunc(â€˜câ€™) çš„è¿™ç§è°ƒç”¨æ–¹å¼ï¼Œç¼–è¯‘å™¨é€šè¿‡å®å‚ â€˜câ€™ å¯ä»¥æ¨å¯¼å‡º T=charï¼Œä½†ç”±äºæœªä¼ é€’ç¬¬ 2 ä¸ªå®å‚ï¼Œå› æ­¤æ¨¡æ¿å‚æ•° U ä½¿ç”¨çš„æ˜¯é»˜è®¤å‚æ•° doubleï¼›ä½† func() çš„è°ƒç”¨æ–¹å¼æ˜¯ä¸è¡Œçš„ï¼Œè™½ç„¶ val1 è®¾ç½®æœ‰é»˜è®¤å€¼ï¼Œä½†ç¼–è¯‘å™¨æ— æ³•é€šè¿‡è¯¥é»˜è®¤å€¼æ¨å¯¼å‡ºæ¨¡æ¿å‚æ•° T çš„ç±»å‹ã€‚ç”±æ­¤ä¸éš¾çœ‹å‡ºï¼Œç¼–è¯‘å™¨çš„è‡ªåŠ¨æ¨å¯¼èƒ½åŠ›å¹¶æ²¡æœ‰æƒ³è±¡çš„é‚£ä¹ˆå¼ºå¤§ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼ŒC++11 æ”¯æŒä¸ºå‡½æ•°æ¨¡æ¿ä¸­çš„å‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼Œåœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä½¿ç”¨é»˜è®¤å€¼ï¼Œä¹Ÿå¯ä»¥å°è¯•ç”±ç¼–è¯‘å™¨è‡ªè¡Œæ¨å¯¼å¾—åˆ°ï¼Œè¿˜å¯ä»¥äº²è‡ªæŒ‡å®šå„ä¸ªæ¨¡æ¿å‚æ•°çš„ç±»å‹ã€‚</p>
<h2 id="c-11åœ¨å‡½æ•°æ¨¡æ¿å’Œç±»æ¨¡æ¿ä¸­ä½¿ç”¨å¯å˜å‚æ•°"><a class="header-anchor" href="#c-11åœ¨å‡½æ•°æ¨¡æ¿å’Œç±»æ¨¡æ¿ä¸­ä½¿ç”¨å¯å˜å‚æ•°">ğŸŒ³</a>C++11åœ¨å‡½æ•°æ¨¡æ¿å’Œç±»æ¨¡æ¿ä¸­ä½¿ç”¨å¯å˜å‚æ•°</h2>
<p>æ‰€è°“å¯å˜å‚æ•°ï¼ŒæŒ‡çš„æ˜¯å‚æ•°çš„ä¸ªæ•°å’Œç±»å‹éƒ½å¯ä»¥æ˜¯ä»»æ„çš„ã€‚æåˆ°å‚æ•°ï¼Œå¤§å®¶ä¼šç¬¬ä¸€æ—¶é—´æƒ³åˆ°å‡½æ•°å‚æ•°ï¼Œé™¤æ­¤ä¹‹å¤– C++ çš„æ¨¡æ¿ï¼ˆåŒ…æ‹¬å‡½æ•°æ¨¡æ¿å’Œç±»æ¨¡æ¿ï¼‰ä¹Ÿä¼šç”¨åˆ°å‚æ•°ã€‚</p>
<p>å¯¹äºå‡½æ•°å‚æ•°è€Œè¨€ï¼ŒC++ ä¸€ç›´éƒ½æ”¯æŒä¸ºå‡½æ•°è®¾ç½®å¯å˜å‚æ•°ï¼Œæœ€å…¸å‹çš„ä»£è¡¨å°±æ˜¯ printf() å‡½æ•°ï¼Œå®ƒçš„è¯­æ³•æ ¼å¼ä¸ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int printf ( const char * format, ... );</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<p><code>...</code>å°±è¡¨ç¤ºçš„æ˜¯å¯å˜å‚æ•°ï¼Œå³ printf() å‡½æ•°å¯ä»¥æ¥æ”¶ä»»æ„ä¸ªå‚æ•°ï¼Œä¸”å„ä¸ªå‚æ•°çš„ç±»å‹å¯ä»¥ä¸åŒï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">printf(&quot;%d&quot;, 10);printf(&quot;%d %c&quot;,10, &#x27;A&#x27;);printf(&quot;%d %c %f&quot;,10, &#x27;A&#x27;, 1.23);</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬é€šå¸¸å°†å®¹çº³å¤šä¸ªå‚æ•°çš„å¯å˜å‚æ•°ç§°ä¸ºå‚æ•°åŒ…ã€‚å€ŸåŠ© format å­—ç¬¦ä¸²ï¼Œprintf() å‡½æ•°å¯ä»¥è½»æ¾åˆ¤æ–­å‡ºå‚æ•°åŒ…ä¸­çš„å‚æ•°ä¸ªæ•°å’Œç±»å‹ã€‚</p>
<p>ä¸‹é¢çš„ç¨‹åºä¸­ï¼Œè‡ªå®šä¹‰äº†ä¸€ä¸ªç®€å•çš„å¯å˜å‚æ•°å‡½æ•°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;#include &lt;cstdarg&gt;//å¯å˜å‚æ•°çš„å‡½æ•°void vair_fun(int count, ...)&#123;    va_list args;    va_start(args, count);    for (int i = 0; i &lt; count; ++i)    &#123;        int arg = va_arg(args, int);        std::cout &lt;&lt; arg &lt;&lt; &quot; &quot;;    &#125;    va_end(args);&#125;int main()&#123;    //å¯å˜å‚æ•°æœ‰ 4 ä¸ªï¼Œåˆ†åˆ«ä¸º 10ã€20ã€30ã€40    vair_fun(4, 10, 20, 30,40);    return 0;&#125;</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<p>ç¨‹åºä¸­çš„ vair_fun() å‡½æ•°æœ‰ 2 ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ countï¼Œå¦ä¸€ä¸ªå°±æ˜¯ â€¦ å¯å˜å‚æ•°ã€‚æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ count å‚æ•°ï¼Œä½†è¦æƒ³ä½¿ç”¨å‚æ•°åŒ…ä¸­çš„å‚æ•°ï¼Œéœ€è¦å€ŸåŠ©<code>&lt;cstdarg&gt;</code>å¤´æ–‡ä»¶ä¸­çš„ va_startã€va_arg ä»¥åŠ va_end è¿™ 3 ä¸ªå¸¦å‚æ•°çš„å®ï¼š</p>
<ul>
<li>va_start(args, count)ï¼šargs æ˜¯ va_list ç±»å‹çš„å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•çš„å°†å…¶è§†ä¸º char * ç±»å‹ã€‚å€ŸåŠ© count å‚æ•°ï¼Œæ‰¾åˆ°å¯å˜å‚æ•°çš„èµ·å§‹ä½ç½®å¹¶èµ‹å€¼ç»™ argsï¼›</li>
<li>va_arg(args, int)ï¼šè°ƒç”¨ va_start æ‰¾åˆ°å¯å˜å‚æ•°èµ·å§‹ä½ç½®çš„å‰æä¸‹ï¼Œé€šè¿‡æŒ‡æ˜å‚æ•°ç±»å‹ä¸º intï¼Œva_arg å°±å¯ä»¥å°†å¯å˜å‚æ•°ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°è¿”å›ï¼›</li>
<li>va_end(args)ï¼šä¸å†ä½¿ç”¨ args å˜é‡åï¼Œåº”åŠæ—¶è°ƒç”¨ va_end å®æ¸…ç† args å˜é‡ã€‚</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼Œå€ŸåŠ© va_arg è·å–å‚æ•°åŒ…ä¸­çš„å‚æ•°æ—¶ï¼Œva_arg ä¸å…·å¤‡è‡ªè¡Œç»ˆæ­¢çš„èƒ½åŠ›ï¼Œæ‰€ä»¥ç¨‹åºä¸­å€ŸåŠ© count å‚æ•°æ§åˆ¶ va_arg çš„æ‰§è¡Œæ¬¡æ•°ï¼Œç»§è€Œå°†æ‰€æœ‰çš„å‚æ•°è¯»å–å‡ºæ¥ã€‚æ§åˆ¶ va_arg æ‰§è¡Œæ¬¡æ•°è¿˜æœ‰å…¶ä»–æ–¹æ³•ï¼Œæ¯”å¦‚è¯»å–åˆ°æŒ‡å®šæ•°æ®æ—¶ç»ˆæ­¢ã€‚</p>
</blockquote>
<p>ä½¿ç”¨ â€¦ å¯å˜å‚æ•°çš„è¿‡ç¨‹ä¸­ï¼Œéœ€æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li>â€¦ å¯å˜å‚æ•°å¿…é¡»ä½œä¸ºå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°ï¼Œä¸”ä¸€ä¸ªå‡½æ•°æœ€å¤šåªèƒ½æ‹¥æœ‰ 1 ä¸ªå¯å˜å‚æ•°ã€‚</li>
<li>å¯å˜å‚æ•°çš„å‰é¢è‡³å°‘è¦æœ‰ 1 ä¸ªæœ‰åå‚æ•°ï¼ˆä¾‹å¦‚ä¸Šé¢ä¾‹å­ä¸­çš„ count å‚æ•°ï¼‰ï¼›</li>
<li>å½“å¯å˜å‚æ•°ä¸­åŒ…å« char ç±»å‹çš„å‚æ•°æ—¶ï¼Œva_arg å®è¦ä»¥ int ç±»å‹çš„æ–¹å¼è¯»å–ï¼›å½“å¯å˜å‚æ•°ä¸­åŒ…å« short ç±»å‹çš„å‚æ•°æ—¶ï¼Œva_arg å®è¦ä»¥ double ç±»å‹çš„æ–¹å¼è¯»å–ã€‚</li>
</ol>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œâ€¦ å¯å˜å‚æ•°çš„æ–¹æ³•ä»…é€‚ç”¨äºå‡½æ•°å‚æ•°ï¼Œå¹¶ä¸é€‚ç”¨äºæ¨¡æ¿å‚æ•°ã€‚C++11 æ ‡å‡†ä¸­ï¼Œæä¾›äº†ä¸€ç§å®ç°å¯å˜æ¨¡æ¿å‚æ•°çš„æ–¹æ³•ã€‚</p>
<h3 id="å¯å˜å‚æ•°æ¨¡æ¿"><a class="header-anchor" href="#å¯å˜å‚æ•°æ¨¡æ¿">ğŸŒ³</a>å¯å˜å‚æ•°æ¨¡æ¿</h3>
<p>C++ 11 æ ‡å‡†å‘å¸ƒä¹‹å‰ï¼Œå‡½æ•°æ¨¡æ¿å’Œç±»æ¨¡æ¿åªèƒ½è®¾å®šå›ºå®šæ•°é‡çš„æ¨¡æ¿å‚æ•°ã€‚C++11 æ ‡å‡†å¯¹æ¨¡æ¿çš„åŠŸèƒ½è¿›è¡Œäº†æ‰©å±•ï¼Œå…è®¸æ¨¡æ¿ä¸­åŒ…å«ä»»æ„æ•°é‡çš„æ¨¡æ¿å‚æ•°ï¼Œè¿™æ ·çš„æ¨¡æ¿åˆç§°å¯å˜å‚æ•°æ¨¡æ¿ã€‚</p>
<h4 id="1-å¯å˜å‚æ•°å‡½æ•°æ¨¡æ¿"><a class="header-anchor" href="#1-å¯å˜å‚æ•°å‡½æ•°æ¨¡æ¿">ğŸŒ³</a>1) å¯å˜å‚æ•°å‡½æ•°æ¨¡æ¿</h4>
<p>å…ˆè®²è§£å‡½æ•°æ¨¡æ¿ï¼Œå¦‚ä¸‹å®šä¹‰äº†ä¸€ä¸ªå¯å˜å‚æ•°çš„å‡½æ•°æ¨¡æ¿ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>... T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">vair_fun</span><span class="params">(T...args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//å‡½æ•°ä½“</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>
<p>æ¨¡æ¿å‚æ•°ä¸­ï¼Œ typenameï¼ˆæˆ–è€… classï¼‰åè·Ÿ â€¦ å°±è¡¨æ˜ T æ˜¯ä¸€ä¸ªå¯å˜æ¨¡æ¿å‚æ•°ï¼Œå®ƒå¯ä»¥æ¥æ”¶å¤šç§æ•°æ®ç±»å‹ï¼Œåˆç§°æ¨¡æ¿å‚æ•°åŒ…ã€‚vair_fun() å‡½æ•°ä¸­ï¼Œargs å‚æ•°çš„ç±»å‹ç”¨ Tâ€¦ è¡¨ç¤ºï¼Œè¡¨ç¤º args å‚æ•°å¯ä»¥æ¥æ”¶ä»»æ„ä¸ªå‚æ•°ï¼Œåˆç§°å‡½æ•°å‚æ•°åŒ…ã€‚</p>
<p>è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œæ­¤å‡½æ•°æ¨¡æ¿æœ€ç»ˆå®ä¾‹åŒ–å‡ºçš„ vair_fun() å‡½æ•°å¯ä»¥æŒ‡å®šä»»æ„ç±»å‹ã€ä»»æ„æ•°é‡çš„å‚æ•°ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨è¿™ä¸ªå‡½æ•°æ¨¡æ¿ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">vair_fun</span>();</span><br><span class="line"><span class="built_in">vair_fun</span>(<span class="number">1</span>, <span class="string">&quot;abc&quot;</span>);</span><br><span class="line"><span class="built_in">vair_fun</span>(<span class="number">1</span>, <span class="string">&quot;abc&quot;</span>, <span class="number">1.23</span>);</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨å¯å˜å‚æ•°æ¨¡æ¿çš„éš¾ç‚¹åœ¨äºï¼Œå¦‚ä½•åœ¨æ¨¡æ¿å‡½æ•°å†…éƒ¨â€œè§£å¼€â€å‚æ•°åŒ…ï¼ˆä½¿ç”¨åŒ…å†…çš„æ•°æ®ï¼‰ï¼Œè¿™é‡Œç»™å¤§å®¶ä»‹ç»ä¸¤ç§ç®€å•çš„æ–¹æ³•ã€‚</p>
<p>ã€é€’å½’æ–¹å¼è§£åŒ…ã€‘<br>
å…ˆçœ‹ä¸€ä¸ªå®ä¾‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//æ¨¡æ¿å‡½æ•°é€’å½’çš„å‡ºå£</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">vir_fun</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... args&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">vir_fun</span><span class="params">(T argc, args... argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; argc &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//å¼€å§‹é€’å½’ï¼Œå°†ç¬¬ä¸€ä¸ªå‚æ•°å¤–çš„ argv å‚æ•°åŒ…é‡æ–°ä¼ é€’ç»™ vir_fun</span></span><br><span class="line">    <span class="built_in">vir_fun</span>(argv...);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">vir_fun</span>(<span class="number">1</span>, <span class="string">&quot;http://www.biancheng.net&quot;</span>, <span class="number">2.34</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314151617</span></span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>1<br>
<a href="http://www.biancheng.net">http://www.biancheng.net</a><br>
2.34</p>
<p>åˆ†æä¸€ä¸ªç¨‹åºçš„æ‰§è¡Œæµç¨‹ï¼š</p>
<ul>
<li>é¦–å…ˆï¼Œmain() å‡½æ•°è°ƒç”¨ vir_fun() æ¨¡æ¿å‡½æ•°æ—¶ï¼Œæ ¹æ®æ‰€ä¼ å®å‚çš„å€¼ï¼Œå¯ä»¥å¾ˆè½»æ˜“åœ°åˆ¤æ–­å‡ºæ¨¡æ¿å‚æ•° T çš„ç±»å‹ä¸º intï¼Œå‡½æ•°å‚æ•° argc çš„å€¼ä¸º 1ï¼Œå‰©ä½™çš„æ¨¡æ¿å‚æ•°å’Œå‡½æ•°å‚æ•°éƒ½åˆ†åˆ«ä½äº args å’Œ argv ä¸­ï¼›</li>
<li>vir_fun() å‡½æ•°ä¸­ï¼Œé¦–å…ˆè¾“å‡ºäº† argc çš„å€¼ï¼ˆä¸º 1ï¼‰ï¼Œç„¶åé‡å¤è°ƒç”¨è‡ªèº«ï¼ŒåŒæ—¶å°†å‡½æ•°å‚æ•°åŒ… argv ä¸­çš„æ•°æ®ä½œä¸ºå®å‚ä¼ é€’ç»™å½¢å‚ argc å’Œ argvï¼›</li>
<li>å†æ¬¡æ‰§è¡Œ vir_fun() å‡½æ•°ï¼Œæ­¤æ—¶æ¨¡æ¿å‚æ•° T çš„ç±»å‹ä¸º char*ï¼Œè¾“å‡º argc çš„å€¼ä¸º â€œhttp:www.biancheng.netâ€ã€‚å†æ¬¡è°ƒç”¨è‡ªèº«ï¼Œç»§ç»­å°† argv åŒ…ä¸­çš„æ•°æ®ä½œä¸ºå®å‚ï¼›</li>
<li>å†æ¬¡æ‰§è¡Œ vir_fun() å‡½æ•°ï¼Œæ­¤æ—¶æ¨¡æ¿å‚æ•° T çš„ç±»å‹ä¸º doubleï¼Œè¾“å‡º argc çš„å€¼ä¸º 2.34ã€‚å†æ¬¡è°ƒç”¨è‡ªèº«ï¼Œå°†ç©ºçš„ argv åŒ…ä½œä¸ºå®å‚ï¼›</li>
<li>ç”±äº argv åŒ…æ²¡æœ‰æ•°æ®ï¼Œæ­¤æ—¶ä¼šè°ƒç”¨æ— ä»»ä½•å½¢å‚ã€å‡½æ•°ä½“ä¸ºç©ºçš„ vir_fun() å‡½æ•°ï¼Œæœ€ç»ˆæ‰§è¡Œç»“æŸã€‚</li>
</ul>
<blockquote>
<p>ä»¥é€’å½’æ–¹å¼è§£åŒ…ï¼Œä¸€å®šè¦è®¾ç½®é€’å½’ç»“æŸçš„å‡ºå£ã€‚ä¾‹å¦‚æœ¬ä¾‹ä¸­ï¼Œæ— å½¢å‚ã€å‡½æ•°ä½“ä¸ºç©ºçš„ vir_fun() å‡½æ•°å°±æ˜¯é€’å½’ç»“æŸçš„å‡ºå£ã€‚</p>
</blockquote>
<p>ã€éé€’å½’æ–¹æ³•è§£åŒ…ã€‘<br>
å€ŸåŠ©é€—å·è¡¨è¾¾å¼å’Œåˆå§‹åŒ–åˆ—è¡¨ï¼Œä¹Ÿå¯ä»¥è§£å¼€å‚æ•°åŒ…ã€‚</p>
<p>ä»¥ vir_fun() å‡½æ•°ä¸ºä¾‹ï¼Œä¸‹é¢ç¨‹åºæ¼”ç¤ºäº†éé€’å½’æ–¹æ³•è§£åŒ…çš„è¿‡ç¨‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dispaly</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; t &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... args&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">vir_fun</span><span class="params">(args... argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//é€—å·è¡¨è¾¾å¼+åˆå§‹åŒ–åˆ—è¡¨</span></span><br><span class="line">    <span class="type">int</span> arr[] = &#123; (<span class="built_in">dispaly</span>(argv),<span class="number">0</span>)... &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">vir_fun</span>(<span class="number">1</span>, <span class="string">&quot;http://www.biancheng.net&quot;</span>, <span class="number">2.34</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314151617</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œé‡ç‚¹åˆ†æä¸€ä¸‹ç¬¬ 13 è¡Œä»£ç ï¼Œæˆ‘ä»¬ä»¥<code>&#123; &#125;</code>åˆå§‹åŒ–åˆ—è¡¨çš„æ–¹å¼å¯¹æ•°ç»„ arr è¿›è¡Œäº†åˆå§‹åŒ–ï¼Œ (display(argv),0)â€¦ ä¼šä¾æ¬¡å±•å¼€ä¸º (display(1),0)ã€(display(â€œ<a href="http://www.biancheng.net">http://www.biancheng.net</a>â€),0) å’Œ (display(2.34),0)ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç¬¬ 13 è¡Œä»£ç å’Œå¦‚ä¸‹ä»£ç æ˜¯ç­‰ä»·çš„ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"> <span class="type">int</span> arr[] = &#123; (<span class="built_in">dispaly</span>(<span class="number">1</span>),<span class="number">0</span>), (<span class="built_in">dispaly</span>(<span class="string">&quot;http://www.biancheng.net&quot;</span>),<span class="number">0</span>), (<span class="built_in">dispaly</span>(<span class="number">2.34</span>),<span class="number">0</span>) &#125;;</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªé€—å·è¡¨è¾¾å¼ï¼Œä»¥ (display(1), 0) ä¸ºä¾‹ï¼Œå®ƒä¼šå…ˆè®¡ç®— display(1)ï¼Œç„¶åå°† 0 ä½œä¸ºæ•´ä¸ªè¡¨è¾¾å¼çš„å€¼è¿”å›ç»™æ•°ç»„ï¼Œå› æ­¤ arr æ•°ç»„æœ€ç»ˆå­˜å‚¨çš„éƒ½æ˜¯ 0ã€‚arr æ•°ç»„çº¯ç²¹æ˜¯ä¸ºäº†å°†å‚æ•°åŒ…å±•å¼€ï¼Œæ²¡æœ‰å‘æŒ¥å…¶å®ƒä½œç”¨ã€‚</p>
<h4 id="2-å¯å˜å‚æ•°ç±»æ¨¡æ¿"><a class="header-anchor" href="#2-å¯å˜å‚æ•°ç±»æ¨¡æ¿">ğŸŒ³</a>2) å¯å˜å‚æ•°ç±»æ¨¡æ¿</h4>
<p>C++11 æ ‡å‡†ä¸­ï¼Œç±»æ¨¡æ¿ä¸­çš„æ¨¡æ¿å‚æ•°ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯å˜å‚æ•°ã€‚C++ 11 æ ‡å‡†æä¾›çš„ typle å…ƒç»„ç±»å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„å¯å˜å‚æ•°æ¨¡æ¿ç±»ï¼Œå®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Types&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">tuple</span>;</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>
<p>å’Œå›ºå®šæ¨¡æ¿å‚æ•°çš„ç±»ä¸åŒï¼Œtyple æ¨¡æ¿ç±»å®ä¾‹åŒ–æ—¶ï¼Œå¯ä»¥æ¥æ”¶ä»»æ„æ•°é‡ã€ä»»æ„ç±»å‹çš„æ¨¡æ¿å‚æ•°ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">std:tuple&lt;&gt; tp0;</span><br><span class="line">std::tuple&lt;<span class="type">int</span>&gt; tp1 = std::<span class="built_in">make_tuple</span>(<span class="number">1</span>);</span><br><span class="line">std::tuple&lt;<span class="type">int</span>, <span class="type">double</span>&gt; tp2 = std::<span class="built_in">make_tuple</span>(<span class="number">1</span>, <span class="number">2.34</span>);</span><br><span class="line">std::tuple&lt;<span class="type">int</span>, <span class="type">double</span>, string&gt; tp3 = std::<span class="built_in">make_tuple</span>(<span class="number">1</span>, <span class="number">2.34</span>, <span class="string">&quot;http://www.biancheng.net&quot;</span>);</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸‹ä»£ç å±•ç¤ºäº†ä¸€ä¸ªæ”¯æŒå¯å˜å‚æ•°çš„ç±»æ¨¡æ¿ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="comment">//å£°æ˜æ¨¡æ¿ç±»demo</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>... Values&gt; <span class="keyword">class</span> <span class="title class_">demo</span>;</span><br><span class="line"><span class="comment">//ç»§æ‰¿å¼é€’å½’çš„å‡ºå£</span></span><br><span class="line"><span class="keyword">template</span>&lt;&gt; <span class="keyword">class</span> <span class="title class_">demo</span>&lt;&gt; &#123;&#125;;</span><br><span class="line"><span class="comment">//ä»¥ç»§æ‰¿çš„æ–¹å¼è§£åŒ…</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Head, <span class="keyword">typename</span>... Tail&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">demo</span>&lt;Head, Tail...&gt;</span><br><span class="line">    : <span class="keyword">private</span> demo&lt;Tail...&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">demo</span>(Head v, Tail... vtail) : <span class="built_in">m_head</span>(v), <span class="built_in">demo</span>&lt;Tail...&gt;(vtail...) &#123;</span><br><span class="line">        <span class="built_in">dis_head</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">dis_head</span><span class="params">()</span> </span>&#123; std::cout &lt;&lt; m_head &lt;&lt; std::endl; &#125;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    Head m_head;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">demo&lt;<span class="type">int</span>, <span class="type">float</span>, std::string&gt; <span class="title">t</span><span class="params">(<span class="number">1</span>, <span class="number">2.34</span>, <span class="string">&quot;http://www.biancheng.net&quot;</span>)</span></span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910111213141516171819202122</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºä¸­ï¼Œdemo æ¨¡æ¿å‚æ•°ä¸­çš„ Tail å°±æ˜¯ä¸€ä¸ªå‚æ•°åŒ…ï¼Œè§£åŒ…çš„æ–¹å¼æ˜¯ä»¥â€œé€’å½’+ç»§æ‰¿â€çš„æ–¹å¼å®ç°çš„ã€‚å…·ä½“æ¥è®²ï¼Œdemo&lt;Head, Tailâ€¦&gt; ç±»å®ä¾‹åŒ–æ—¶ï¼Œç”±äºå…¶ç»§æ‰¿è‡ª demo&lt;Tailâ€¦&gt; ç±»ï¼Œå› æ­¤çˆ¶ç±»ä¹Ÿä¼šå®ä¾‹åŒ–ï¼Œä¸€ç›´é€’å½’è‡³ Tail å‚æ•°åŒ…ä¸ºç©ºï¼Œæ­¤æ—¶ä¼šè°ƒç”¨æ¨¡æ¿å‚æ•°åˆ—è¡¨ä¸ºç©ºçš„ demo æ¨¡æ¿ç±»ã€‚</p>
<p>ç¨‹åºçš„è¾“å‡ºç»“æœä¸ºï¼š</p>
<p><a href="http://www.biancheng.net">http://www.biancheng.net</a><br>
2.34<br>
1</p>
<p>å¯å˜å‚æ•°æ¨¡æ¿ç±»è¿˜æœ‰å…¶å®ƒçš„è§£åŒ…æ–¹æ³•ï¼Œè¿™é‡Œä¸å†ä¸€ä¸€èµ˜è¿°ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥è‡ªè¡Œåšæ·±å…¥çš„ç ”ç©¶ã€‚</p>
<h2 id="c-11-tupleå…ƒç»„è¯¦è§£"><a class="header-anchor" href="#c-11-tupleå…ƒç»„è¯¦è§£">ğŸŒ³</a>C++11 tupleå…ƒç»„è¯¦è§£</h2>
<p>C++11 æ ‡å‡†æ–°å¼•å…¥äº†ä¸€ç§ç±»æ¨¡æ¿ï¼Œå‘½åä¸º tupleï¼ˆä¸­æ–‡å¯ç›´è¯‘ä¸ºå…ƒç»„ï¼‰ã€‚tuple æœ€å¤§çš„ç‰¹ç‚¹æ˜¯ï¼šå®ä¾‹åŒ–çš„å¯¹è±¡å¯ä»¥å­˜å‚¨ä»»æ„æ•°é‡ã€ä»»æ„ç±»å‹çš„æ•°æ®ã€‚</p>
<p>tuple çš„åº”ç”¨åœºæ™¯å¾ˆå¹¿æ³›ï¼Œä¾‹å¦‚å½“éœ€è¦å­˜å‚¨å¤šä¸ªä¸åŒç±»å‹çš„å…ƒç´ æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ tupleï¼›å½“å‡½æ•°éœ€è¦è¿”å›å¤šä¸ªæ•°æ®æ—¶ï¼Œå¯ä»¥å°†è¿™äº›æ•°æ®å­˜å‚¨åœ¨ tuple ä¸­ï¼Œå‡½æ•°åªéœ€è¿”å›ä¸€ä¸ª tuple å¯¹è±¡å³å¯ã€‚</p>
<p>æœ¬èŠ‚ï¼Œæˆ‘ä»¬å°†ç»™å¤§å®¶è¯¦ç»†åœ°è®²è§£ tuple çš„ç”¨æ³•ã€‚</p>
<h3 id="tupleå¯¹è±¡çš„åˆ›å»º"><a class="header-anchor" href="#tupleå¯¹è±¡çš„åˆ›å»º">ğŸŒ³</a>tupleå¯¹è±¡çš„åˆ›å»º</h3>
<p>tuple æœ¬è´¨æ˜¯ä¸€ä¸ªä»¥å¯å˜æ¨¡æ¿å‚æ•°å®šä¹‰çš„ç±»æ¨¡æ¿ï¼Œå®ƒå®šä¹‰åœ¨ å¤´æ–‡ä»¶å¹¶ä½äº std å‘½åç©ºé—´ä¸­ã€‚å› æ­¤è¦æƒ³ä½¿ç”¨ tuple ç±»æ¨¡æ¿ï¼Œç¨‹åºä¸­éœ€è¦é¦–å…ˆå¼•å…¥ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;tuple&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> std::tuple;</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>
<p>å®ä¾‹åŒ– tuple æ¨¡æ¿ç±»å¯¹è±¡å¸¸ç”¨çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯å€ŸåŠ©è¯¥ç±»çš„æ„é€ å‡½æ•°ï¼Œå¦ä¸€ç§æ˜¯å€ŸåŠ© make_tuple() å‡½æ•°ã€‚</p>
<h4 id="1-ç±»çš„æ„é€ å‡½æ•°"><a class="header-anchor" href="#1-ç±»çš„æ„é€ å‡½æ•°">ğŸŒ³</a>1) ç±»çš„æ„é€ å‡½æ•°</h4>
<p>tuple æ¨¡æ¿ç±»æä¾›æœ‰å¾ˆå¤šæ„é€ å‡½æ•°ï¼ŒåŒ…æ‹¬ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>) é»˜è®¤æ„é€ å‡½æ•°</span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="title">tuple</span><span class="params">()</span></span>;</span><br><span class="line"><span class="number">2</span>) æ‹·è´æ„é€ å‡½æ•°</span><br><span class="line"><span class="built_in">tuple</span> (<span class="type">const</span> tuple&amp; tpl);</span><br><span class="line"><span class="number">3</span>) ç§»åŠ¨æ„é€ å‡½æ•°</span><br><span class="line"><span class="built_in">tuple</span> (tuple&amp;&amp; tpl);</span><br><span class="line"><span class="number">4</span>) éšå¼ç±»å‹è½¬æ¢æ„é€ å‡½æ•°</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span>... UTypes&gt;</span><br><span class="line">    <span class="built_in">tuple</span> (<span class="type">const</span> tuple&lt;UTypes...&gt;&amp; tpl); <span class="comment">//å·¦å€¼æ–¹å¼</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span>... UTypes&gt;</span><br><span class="line">    <span class="built_in">tuple</span> (tuple&lt;UTypes...&gt;&amp;&amp; tpl);      <span class="comment">//å³å€¼æ–¹å¼</span></span><br><span class="line"><span class="number">5</span>) æ”¯æŒåˆå§‹åŒ–åˆ—è¡¨çš„æ„é€ å‡½æ•°</span><br><span class="line"><span class="function"><span class="keyword">explicit</span> <span class="title">tuple</span> <span class="params">(<span class="type">const</span> Types&amp;... elems)</span></span>;  <span class="comment">//å·¦å€¼æ–¹å¼</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span>... UTypes&gt;</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">tuple</span> <span class="params">(UTypes&amp;&amp;... elems)</span></span>;  <span class="comment">//å³å€¼æ–¹å¼</span></span><br><span class="line"><span class="number">6</span>) å°†pairå¯¹è±¡è½¬æ¢ä¸ºtupleå¯¹è±¡</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">U1</span>, <span class="keyword">class</span> <span class="title class_">U2</span>&gt;</span><br><span class="line">    <span class="built_in">tuple</span> (<span class="type">const</span> pair&lt;U1,U2&gt;&amp; pr);       <span class="comment">//å·¦å€¼æ–¹å¼</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">U1</span>, <span class="keyword">class</span> <span class="title class_">U2</span>&gt;</span><br><span class="line">    <span class="built_in">tuple</span> (pair&lt;U1,U2&gt;&amp;&amp; pr);            <span class="comment">//å³å€¼æ–¹å¼</span></span><br><span class="line"><span class="number">1234567891011121314151617181920</span></span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>     <span class="comment">// std::cout</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;tuple&gt;</span>        <span class="comment">// std::tuple</span></span></span><br><span class="line"><span class="keyword">using</span> std::tuple;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::tuple&lt;<span class="type">int</span>, <span class="type">char</span>&gt; first;                             <span class="comment">// 1)   first&#123;&#125;</span></span><br><span class="line">    <span class="function">std::tuple&lt;<span class="type">int</span>, <span class="type">char</span>&gt; <span class="title">second</span><span class="params">(first)</span></span>;                     <span class="comment">// 2)   second&#123;&#125;</span></span><br><span class="line">    <span class="function">std::tuple&lt;<span class="type">int</span>, <span class="type">char</span>&gt; <span class="title">third</span><span class="params">(std::make_tuple(<span class="number">20</span>, <span class="string">&#x27;b&#x27;</span>))</span></span>;   <span class="comment">// 3)   third&#123;20,&#x27;b&#x27;&#125;</span></span><br><span class="line">    <span class="function">std::tuple&lt;<span class="type">long</span>, <span class="type">char</span>&gt; <span class="title">fourth</span><span class="params">(third)</span></span>;                    <span class="comment">// 4)çš„å·¦å€¼æ–¹å¼, fourth&#123;20,&#x27;b&#x27;&#125;</span></span><br><span class="line">    <span class="function">std::tuple&lt;<span class="type">int</span>, <span class="type">char</span>&gt; <span class="title">fifth</span><span class="params">(<span class="number">10</span>, <span class="string">&#x27;a&#x27;</span>)</span></span>;                    <span class="comment">// 5)çš„å³å€¼æ–¹å¼, fifth&#123;10.&#x27;a&#x27;&#125;</span></span><br><span class="line">    <span class="function">std::tuple&lt;<span class="type">int</span>, <span class="type">char</span>&gt; <span class="title">sixth</span><span class="params">(std::make_pair(<span class="number">30</span>, <span class="string">&#x27;c&#x27;</span>))</span></span>;    <span class="comment">// 6)çš„å³å€¼æ–¹å¼, sixth&#123;30,&#x27;&#x27;c&#125;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure>
<h4 id="2-make-tuple-å‡½æ•°"><a class="header-anchor" href="#2-make-tuple-å‡½æ•°">ğŸŒ³</a>2) make_tuple()å‡½æ•°</h4>
<p>ä¸Šé¢ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å·²ç»ç”¨åˆ°äº† make_tuple() å‡½æ•°ï¼Œå®ƒä»¥æ¨¡æ¿çš„å½¢å¼å®šä¹‰åœ¨ å¤´æ–‡ä»¶ä¸­ï¼ŒåŠŸèƒ½æ˜¯åˆ›å»ºä¸€ä¸ª tuple å³å€¼å¯¹è±¡ï¼ˆæˆ–è€…ä¸´æ—¶å¯¹è±¡ï¼‰ã€‚</p>
<p>å¯¹äº make_tuple() å‡½æ•°åˆ›å»ºäº† tuple å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä¸Šé¢ç¨‹åºä¸­é‚£æ ·ä½œä¸ºç§»åŠ¨æ„é€ å‡½æ•°çš„å‚æ•°ï¼Œä¹Ÿå¯ä»¥è¿™æ ·ç”¨ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> first = std::<span class="built_in">make_tuple</span> (<span class="number">10</span>,<span class="string">&#x27;a&#x27;</span>);   <span class="comment">// tuple &lt; int, char &gt;</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> a = <span class="number">0</span>; <span class="type">int</span> b[<span class="number">3</span>];</span><br><span class="line"><span class="keyword">auto</span> second = std::<span class="built_in">make_tuple</span> (a,b);     <span class="comment">// tuple &lt; int, int* &gt;</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºä¸­åˆ†åˆ«åˆ›å»ºäº† first å’Œ second ä¸¤ä¸ª tuple å¯¹è±¡ï¼Œå®ƒä»¬çš„ç±»å‹å¯ä»¥ç›´æ¥ç”¨ auto è¡¨ç¤ºã€‚</p>
<h3 id="tupleå¸¸ç”¨å‡½æ•°"><a class="header-anchor" href="#tupleå¸¸ç”¨å‡½æ•°">ğŸŒ³</a>tupleå¸¸ç”¨å‡½æ•°</h3>
<p>ä¸ºäº†æ–¹ä¾¿æ‚¨åœ¨å®é™…å¼€å‘ä¸­ä½¿ç”¨ tuple å¯¹è±¡ï¼Œtupe æ¨¡æ¿ç±»æä¾›äº†ä¸€ä¸ªåŠŸèƒ½å®ç”¨çš„æˆå‘˜å‡½æ•°ï¼Œ å¤´æ–‡ä»¶ä¸­ä¹Ÿæä¾›äº†ä¸€äº›å’Œæ“ä½œ tuple å¯¹è±¡ç›¸å…³çš„å‡½æ•°æ¨¡æ¿å’Œç±»æ¨¡æ¿ï¼Œå¦‚è¡¨ 1 æ‰€ç¤ºã€‚</p>
<table>
<thead>
<tr>
<th>å‡½æ•°æˆ–ç±»æ¨¡æ¿</th>
<th>æ è¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>tup1.swap(tup2) swap(tup1, tup2)</td>
<td>tup1 å’Œ tup2 è¡¨ç¤ºç±»å‹ç›¸åŒçš„ä¸¤ä¸ª tuple å¯¹è±¡ï¼Œtuple æ¨¡æ¿ç±»ä¸­å®šä¹‰æœ‰ä¸€ä¸ª swap() æˆå‘˜å‡½æ•°ï¼Œ å¤´æ–‡ä»¶è¿˜æä¾›äº†ä¸€ä¸ªåŒåçš„ swap() å…¨å±€å‡½æ•°ã€‚ swap() å‡½æ•°çš„åŠŸèƒ½æ˜¯äº¤æ¢ä¸¤ä¸ª tuple å¯¹è±¡å­˜å‚¨çš„å†…å®¹ã€‚</td>
</tr>
<tr>
<td>get(tup)</td>
<td>tup è¡¨ç¤ºæŸä¸ª tuple å¯¹è±¡ï¼Œnum æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œget() æ˜¯ å¤´æ–‡ä»¶æä¾›çš„å…¨å±€å‡½æ•°ï¼ŒåŠŸèƒ½æ˜¯è¿”å› tup å¯¹è±¡ä¸­ç¬¬ num+1 ä¸ªå…ƒç´ ã€‚</td>
</tr>
<tr>
<td>tuple_size::value</td>
<td>tuple_size æ˜¯å®šä¹‰åœ¨ å¤´æ–‡ä»¶çš„ç±»æ¨¡æ¿ï¼Œå®ƒåªæœ‰ä¸€ä¸ªæˆå‘˜å˜é‡ valueï¼ŒåŠŸèƒ½æ˜¯è·å–æŸä¸ª tuple å¯¹è±¡ä¸­å…ƒç´ çš„ä¸ªæ•°ï¼Œtype ä¸ºè¯¥tuple å¯¹è±¡çš„ç±»å‹ã€‚</td>
</tr>
<tr>
<td>tuple_element&lt;I, type&gt;::type</td>
<td>tuple_element æ˜¯å®šä¹‰åœ¨ å¤´æ–‡ä»¶çš„ç±»æ¨¡æ¿ï¼Œå®ƒåªæœ‰ä¸€ä¸ªæˆå‘˜å˜é‡ typeï¼ŒåŠŸèƒ½æ˜¯è·å–æŸä¸ª tuple å¯¹è±¡ç¬¬ I+1 ä¸ªå…ƒç´ çš„ç±»å‹ã€‚</td>
</tr>
<tr>
<td>forward_as_tuple&lt;argsâ€¦&gt;</td>
<td>argsâ€¦ è¡¨ç¤º tuple å¯¹è±¡å­˜å‚¨çš„å¤šä¸ªå…ƒç´ ï¼Œè¯¥å‡½æ•°çš„åŠŸèƒ½æ˜¯åˆ›å»ºä¸€ä¸ª tuple å¯¹è±¡ï¼Œå†…éƒ¨å­˜å‚¨çš„ argsâ€¦ å…ƒç´ éƒ½æ˜¯å³å€¼å¼•ç”¨å½¢å¼çš„ã€‚</td>
</tr>
<tr>
<td>tie(argsâ€¦) = tup</td>
<td>tup è¡¨ç¤ºæŸä¸ª tuple å¯¹è±¡ï¼Œtie() æ˜¯ å¤´æ–‡ä»¶æä¾›çš„ï¼ŒåŠŸèƒ½æ˜¯å°† tup å†…å­˜å‚¨çš„å…ƒç´ é€ä¸€èµ‹å€¼ç»™ argsâ€¦ æŒ‡å®šçš„å·¦å€¼å˜é‡ã€‚</td>
</tr>
<tr>
<td>tuple_cat(argsâ€¦)</td>
<td>argsâ€¦ è¡¨ç¤ºå¤šä¸ª tuple å¯¹è±¡ï¼Œè¯¥å‡½æ•°æ˜¯ å¤´æ–‡ä»¶æä¾›çš„ï¼ŒåŠŸèƒ½æ˜¯åˆ›å»ºä¸€ä¸ª tuple å¯¹è±¡ï¼Œæ­¤å¯¹è±¡åŒ…å« argsâ€¦ æŒ‡å®šçš„æ‰€æœ‰ tuple å¯¹è±¡å†…çš„å…ƒç´ ã€‚</td>
</tr>
</tbody>
</table>
<blockquote>
<p>tuple æ¨¡æ¿ç±»å¯¹èµ‹å€¼è¿ç®—ç¬¦ = è¿›è¡Œäº†é‡è½½ï¼Œä½¿å¾—åŒç±»å‹çš„ tuple å¯¹è±¡å¯ä»¥ç›´æ¥èµ‹å€¼ã€‚æ­¤å¤–ï¼Œtuple æ¨¡æ¿ç±»è¿˜é‡è½½äº† ==ã€!=ã€&lt;ã€&gt;ã€&gt;=ã€&lt;= è¿™å‡ ä¸ªæ¯”è¾ƒè¿ç®—ç¬¦ï¼ŒåŒç±»å‹çš„ tuple å¯¹è±¡å¯ä»¥ç›¸äº’æ¯”è¾ƒï¼ˆé€ä¸ªæ¯”è¾ƒå„ä¸ªå…ƒç´ ï¼‰ã€‚</p>
</blockquote>
<p>ä¸‹é¢çš„ç¨‹åºç»™æ‚¨æ¼”ç¤ºäº†è¡¨ 1 ä¸­ä¸€éƒ¨åˆ†å‡½æ•°æ¨¡æ¿å’Œç±»æ¨¡æ¿çš„åŠŸèƒ½ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;tuple&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line">    <span class="comment">//åˆ›å»ºä¸€ä¸ª tuple å¯¹è±¡å­˜å‚¨ 10 å’Œ &#x27;x&#x27;</span></span><br><span class="line">    <span class="function">std::tuple&lt;<span class="type">int</span>, <span class="type">char</span>&gt; <span class="title">mytuple</span><span class="params">(<span class="number">10</span>, <span class="string">&#x27;x&#x27;</span>)</span></span>;</span><br><span class="line">    <span class="comment">//è®¡ç®— mytuple å­˜å‚¨å…ƒç´ çš„ä¸ªæ•°</span></span><br><span class="line">    size = std::tuple_size&lt;<span class="keyword">decltype</span>(mytuple)&gt;::value;</span><br><span class="line">    <span class="comment">//è¾“å‡º mytuple ä¸­å­˜å‚¨çš„å…ƒç´ </span></span><br><span class="line">    std::cout &lt;&lt; std::<span class="built_in">get</span>&lt;<span class="number">0</span>&gt;(mytuple) &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; std::<span class="built_in">get</span>&lt;<span class="number">1</span>&gt;(mytuple) &lt;&lt; std::endl;</span><br><span class="line">    <span class="comment">//ä¿®æ”¹æŒ‡å®šçš„å…ƒç´ </span></span><br><span class="line">    std::<span class="built_in">get</span>&lt;<span class="number">0</span>&gt;(mytuple) = <span class="number">100</span>;</span><br><span class="line">    std::cout &lt;&lt; std::<span class="built_in">get</span>&lt;<span class="number">0</span>&gt;(mytuple) &lt;&lt; std::endl;</span><br><span class="line">    <span class="comment">//ä½¿ç”¨ makde_tuple() åˆ›å»ºä¸€ä¸ª tuple å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">auto</span> bar = std::<span class="built_in">make_tuple</span>(<span class="string">&quot;test&quot;</span>, <span class="number">3.1</span>, <span class="number">14</span>);</span><br><span class="line">    <span class="comment">//æ‹†è§£ bar å¯¹è±¡ï¼Œåˆ†åˆ«èµ‹å€¼ç»™ mystrã€mydouã€myint</span></span><br><span class="line">    <span class="type">const</span> <span class="type">char</span>* mystr = <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="type">double</span> mydou;</span><br><span class="line">    <span class="type">int</span> myint;</span><br><span class="line">    <span class="comment">//ä½¿ç”¨ tie() æ—¶ï¼Œå¦‚æœä¸æƒ³æ¥å—æŸä¸ªå…ƒç´ çš„å€¼ï¼Œå®å‚å¯ä»¥ç”¨ std::ignore ä»£æ›¿</span></span><br><span class="line">    std::<span class="built_in">tie</span>(mystr, mydou, myint) = bar;</span><br><span class="line">    <span class="comment">//std::tie(std::ignore, std::ignore, myint) = bar;  //åªæ¥æ”¶ç¬¬ 3 ä¸ªæ•´å½¢å€¼</span></span><br><span class="line">    <span class="comment">//å°† mytuple å’Œ bar ä¸­çš„å…ƒç´ æ•´åˆåˆ° 1 ä¸ª tuple å¯¹è±¡ä¸­</span></span><br><span class="line">    <span class="keyword">auto</span> mycat = std::<span class="built_in">tuple_cat</span>(mytuple, bar);</span><br><span class="line">    size = std::tuple_size&lt;<span class="keyword">decltype</span>(mycat)&gt;::value;</span><br><span class="line">    std::cout &lt;&lt; size &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314151617181920212223242526272829</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>10 x<br>
100<br>
5</p>
<h2 id="c-11åˆ—è¡¨åˆå§‹åŒ–-ç»Ÿä¸€äº†åˆå§‹åŒ–æ–¹å¼"><a class="header-anchor" href="#c-11åˆ—è¡¨åˆå§‹åŒ–-ç»Ÿä¸€äº†åˆå§‹åŒ–æ–¹å¼">ğŸŒ³</a>C++11åˆ—è¡¨åˆå§‹åŒ–ï¼ˆç»Ÿä¸€äº†åˆå§‹åŒ–æ–¹å¼ï¼‰</h2>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ <a href="http://c.biancheng.net/cplus/">C++</a>98/03 ä¸­çš„å¯¹è±¡åˆå§‹åŒ–æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œè¯·çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆå§‹åŒ–åˆ—è¡¨</span></span><br><span class="line"><span class="type">int</span> i_arr[<span class="number">3</span>] = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> &#125;;  <span class="comment">//æ™®é€šæ•°ç»„</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">B</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> i;</span><br><span class="line">        <span class="type">int</span> j;</span><br><span class="line">    &#125; b;</span><br><span class="line">&#125; a = &#123; <span class="number">1</span>, &#123; <span class="number">2</span>, <span class="number">3</span> &#125; &#125;;  <span class="comment">//PODç±»å‹</span></span><br><span class="line"><span class="comment">//æ‹·è´åˆå§‹åŒ–ï¼ˆcopy-initializationï¼‰</span></span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Foo</span>(<span class="type">int</span>) &#123;&#125;</span><br><span class="line">&#125; foo = <span class="number">123</span>;  <span class="comment">//éœ€è¦æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="comment">//ç›´æ¥åˆå§‹åŒ–ï¼ˆdirect-initializationï¼‰</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">j</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line"><span class="function">Foo <span class="title">bar</span><span class="params">(<span class="number">123</span>)</span></span>;</span><br><span class="line"><span class="number">123456789101112131415161718192021</span></span><br></pre></td></tr></table></figure>
<p>è¿™äº›ä¸åŒçš„åˆå§‹åŒ–æ–¹æ³•ï¼Œéƒ½æœ‰å„è‡ªçš„é€‚ç”¨èŒƒå›´å’Œä½œç”¨ã€‚æœ€å…³é”®çš„æ˜¯ï¼Œè¿™äº›ç§ç±»ç¹å¤šçš„åˆå§‹åŒ–æ–¹æ³•ï¼Œæ²¡æœ‰ä¸€ç§å¯ä»¥é€šç”¨æ‰€æœ‰æƒ…å†µã€‚</p>
<p>ä¸ºäº†ç»Ÿä¸€åˆå§‹åŒ–æ–¹å¼ï¼Œå¹¶ä¸”è®©åˆå§‹åŒ–è¡Œä¸ºå…·æœ‰ç¡®å®šçš„æ•ˆæœï¼ŒC++11 ä¸­æå‡ºäº†åˆ—è¡¨åˆå§‹åŒ–ï¼ˆList-initializationï¼‰çš„æ¦‚å¿µã€‚</p>
<p>POD ç±»å‹å³ plain old data ç±»å‹ï¼Œç®€å•æ¥è¯´ï¼Œæ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨ memcpy å¤åˆ¶çš„å¯¹è±¡ã€‚</p>
<h3 id="ç»Ÿä¸€çš„åˆå§‹åŒ–"><a class="header-anchor" href="#ç»Ÿä¸€çš„åˆå§‹åŒ–">ğŸŒ³</a>ç»Ÿä¸€çš„åˆå§‹åŒ–</h3>
<p>åœ¨ä¸Šé¢æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†ï¼Œå¯¹äºæ™®é€šæ•°ç»„å’Œ POD ç±»å‹ï¼ŒC++98/03 å¯ä»¥ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨ï¼ˆinitializer listï¼‰è¿›è¡Œåˆå§‹åŒ–ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> i_arr[<span class="number">3</span>] = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> &#125;;</span><br><span class="line"><span class="type">long</span> l_arr[] = &#123; <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">4</span> &#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    <span class="type">int</span> y;</span><br><span class="line">&#125; a = &#123; <span class="number">1</span>, <span class="number">2</span> &#125;;</span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯è¿™ç§åˆå§‹åŒ–æ–¹å¼çš„é€‚ç”¨æ€§éå¸¸ç‹­çª„ï¼Œåªæœ‰ä¸Šé¢æåˆ°çš„è¿™ä¸¤ç§æ•°æ®ç±»å‹å¯ä»¥ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨ã€‚</p>
<p>åœ¨ C++11 ä¸­ï¼Œåˆå§‹åŒ–åˆ—è¡¨çš„é€‚ç”¨æ€§è¢«å¤§å¤§å¢åŠ äº†ã€‚å®ƒç°åœ¨å¯ä»¥ç”¨äºä»»ä½•ç±»å‹å¯¹è±¡çš„åˆå§‹åŒ–ï¼Œè¯·çœ‹ä¸‹é¢çš„ä»£ç ã€‚</p>
<p>ã€å®ä¾‹ã€‘é€šè¿‡åˆå§‹åŒ–åˆ—è¡¨åˆå§‹åŒ–å¯¹è±¡ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Foo</span>(<span class="type">int</span>) &#123;&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">Foo</span>(<span class="type">const</span> Foo &amp;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">Foo <span class="title">a1</span><span class="params">(<span class="number">123</span>)</span></span>;</span><br><span class="line">    Foo a2 = <span class="number">123</span>;  <span class="comment">//error: &#x27;Foo::Foo(const Foo &amp;)&#x27; is private</span></span><br><span class="line">    Foo a3 = &#123; <span class="number">123</span> &#125;;</span><br><span class="line">    Foo a4 &#123; <span class="number">123</span> &#125;;</span><br><span class="line">    <span class="type">int</span> a5 = &#123; <span class="number">3</span> &#125;;</span><br><span class="line">    <span class="type">int</span> a6 &#123; <span class="number">3</span> &#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314151617</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šä¾‹ä¸­ï¼Œa3ã€a4 ä½¿ç”¨äº†æ–°çš„åˆå§‹åŒ–æ–¹å¼æ¥åˆå§‹åŒ–å¯¹è±¡ï¼Œæ•ˆæœå¦‚åŒ a1 çš„ç›´æ¥åˆå§‹åŒ–ã€‚</p>
<p>a5ã€a6 åˆ™æ˜¯åŸºæœ¬æ•°æ®ç±»å‹çš„åˆ—è¡¨åˆå§‹åŒ–æ–¹å¼ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå®ƒä»¬çš„å½¢å¼éƒ½æ˜¯ç»Ÿä¸€çš„ã€‚</p>
<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œa3 è™½ç„¶ä½¿ç”¨äº†ç­‰äºå·ï¼Œä½†å®ƒä»ç„¶æ˜¯åˆ—è¡¨åˆå§‹åŒ–ï¼Œå› æ­¤ï¼Œç§æœ‰çš„æ‹·è´æ„é€ å¹¶ä¸ä¼šå½±å“åˆ°å®ƒã€‚</p>
<p>a4 å’Œ a6 çš„å†™æ³•ï¼Œæ˜¯ C++98/03 æ‰€ä¸å…·å¤‡çš„ã€‚åœ¨ C++11 ä¸­ï¼Œå¯ä»¥ç›´æ¥åœ¨å˜é‡ååé¢è·Ÿä¸Šåˆå§‹åŒ–åˆ—è¡¨ï¼Œæ¥è¿›è¡Œå¯¹è±¡çš„åˆå§‹åŒ–ã€‚</p>
<p>è¿™ç§å˜é‡ååé¢è·Ÿä¸Šåˆå§‹åŒ–åˆ—è¡¨æ–¹æ³•åŒæ ·é€‚ç”¨äºæ™®é€šæ•°ç»„å’Œ POD ç±»å‹çš„åˆå§‹åŒ–ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> i_arr[<span class="number">3</span>] &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> &#125;;  <span class="comment">//æ™®é€šæ•°ç»„</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">B</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> i;</span><br><span class="line">        <span class="type">int</span> j;</span><br><span class="line">    &#125; b;</span><br><span class="line">&#125; a &#123; <span class="number">1</span>, &#123; <span class="number">2</span>, <span class="number">3</span> &#125; &#125;;  <span class="comment">//PODç±»å‹</span></span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure>
<p>åœ¨åˆå§‹åŒ–æ—¶ï¼Œ<code>&#123;&#125;</code>å‰é¢çš„ç­‰äºå·æ˜¯å¦ä¹¦å†™å¯¹åˆå§‹åŒ–è¡Œä¸ºæ²¡æœ‰å½±å“ã€‚</p>
<p>å¦å¤–ï¼Œå¦‚åŒè¯»è€…æ‰€æƒ³çš„é‚£æ ·ï¼Œnew æ“ä½œç¬¦ç­‰å¯ä»¥ç”¨åœ†æ‹¬å·è¿›è¡Œåˆå§‹åŒ–çš„åœ°æ–¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨ï¼š</p>
<p>int* a = new int { 123 };<br>
double b = double { 12.12 };<br>
int* arr = new int[3] { 1, 2, 3 };</p>
<p>æŒ‡é’ˆ a æŒ‡å‘äº†ä¸€ä¸ª new æ“ä½œç¬¦è¿”å›çš„å†…å­˜ï¼Œé€šè¿‡åˆå§‹åŒ–åˆ—è¡¨æ–¹å¼åœ¨å†…å­˜åˆå§‹åŒ–æ—¶æŒ‡å®šäº†å€¼ä¸º 123ã€‚</p>
<p>b åˆ™æ˜¯å¯¹åŒ¿åå¯¹è±¡ä½¿ç”¨åˆ—è¡¨åˆå§‹åŒ–åï¼Œå†è¿›è¡Œæ‹·è´åˆå§‹åŒ–ã€‚</p>
<p>è¿™é‡Œè®©äººçœ¼å‰ä¸€äº®çš„æ˜¯ arr çš„åˆå§‹åŒ–æ–¹å¼ã€‚å †ä¸ŠåŠ¨æ€åˆ†é…çš„æ•°ç»„ç»ˆäºä¹Ÿå¯ä»¥ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨è¿›è¡Œåˆå§‹åŒ–äº†ã€‚</p>
<p>é™¤äº†ä¸Šé¢æ‰€è¿°çš„å†…å®¹ä¹‹å¤–ï¼Œåˆ—è¡¨åˆå§‹åŒ–è¿˜å¯ä»¥ç›´æ¥ä½¿ç”¨åœ¨å‡½æ•°çš„è¿”å›å€¼ä¸Šï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Foo</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">Foo</span>(<span class="type">int</span>, <span class="type">double</span>) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">Foo <span class="title">func</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="number">123</span>, <span class="number">321.0</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„ return è¯­å¥å°±å¦‚åŒè¿”å›äº†ä¸€ä¸ª Foo(123, 321.0)ã€‚</p>
<p>ç”±ä¸Šé¢çš„è¿™äº›ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ C++11 ä¸­ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨æ˜¯éå¸¸ä¾¿åˆ©çš„ã€‚å®ƒä¸ä»…ç»Ÿä¸€äº†å„ç§å¯¹è±¡çš„åˆå§‹åŒ–æ–¹å¼ï¼Œè€Œä¸”è¿˜ä½¿ä»£ç çš„ä¹¦å†™æ›´åŠ ç®€å•æ¸…æ™°ã€‚</p>
<h2 id="c-11-lambdaåŒ¿åå‡½æ•°ç”¨æ³•è¯¦è§£"><a class="header-anchor" href="#c-11-lambdaåŒ¿åå‡½æ•°ç”¨æ³•è¯¦è§£">ğŸŒ³</a>C++11 lambdaåŒ¿åå‡½æ•°ç”¨æ³•è¯¦è§£</h2>
<p>lambda æºè‡ªå¸Œè…Šå­—æ¯è¡¨ä¸­ç¬¬ 11 ä½çš„ Î»ï¼Œåœ¨è®¡ç®—æœºç§‘å­¦é¢†åŸŸï¼Œå®ƒåˆ™æ˜¯è¢«ç”¨æ¥è¡¨ç¤ºä¸€ç§åŒ¿åå‡½æ•°ã€‚æ‰€è°“åŒ¿åå‡½æ•°ï¼Œç®€å•åœ°ç†è§£å°±æ˜¯æ²¡æœ‰åç§°çš„å‡½æ•°ï¼Œåˆå¸¸è¢«ç§°ä¸º lambda å‡½æ•°æˆ–è€… lambda è¡¨è¾¾å¼ã€‚</p>
<p>ç»§ Pythonã€Javaã€C#ã€PHP ç­‰ä¼—å¤šé«˜çº§ç¼–ç¨‹è¯­è¨€éƒ½æ”¯æŒ lambda åŒ¿åå‡½æ•°åï¼ŒC++11 æ ‡å‡†ç»ˆäºå¼•å…¥äº† lambdaï¼Œæœ¬èŠ‚å°†å¸¦é¢†å¤§å®¶ç³»ç»Ÿåœ°å­¦ä¹  lambda è¡¨è¾¾å¼çš„å…·ä½“ç”¨æ³•ã€‚</p>
<h3 id="lambdaåŒ¿åå‡½æ•°çš„å®šä¹‰"><a class="header-anchor" href="#lambdaåŒ¿åå‡½æ•°çš„å®šä¹‰">ğŸŒ³</a>lambdaåŒ¿åå‡½æ•°çš„å®šä¹‰</h3>
<p>å®šä¹‰ä¸€ä¸ª lambda åŒ¿åå‡½æ•°å¾ˆç®€å•ï¼Œå¯ä»¥å¥—ç”¨å¦‚ä¸‹çš„è¯­æ³•æ ¼å¼ï¼š</p>
<p>[å¤–éƒ¨å˜é‡è®¿é—®æ–¹å¼è¯´æ˜ç¬¦] (å‚æ•°) mutable noexcept/throw() -&gt; è¿”å›å€¼ç±»å‹<br>
{<br>
å‡½æ•°ä½“;<br>
};</p>
<p>å…¶ä¸­å„éƒ¨åˆ†çš„å«ä¹‰åˆ†åˆ«ä¸ºï¼š</p>
<ol>
<li>[å¤–éƒ¨å˜é‡æ–¹ä½æ–¹å¼è¯´æ˜ç¬¦]<br>
[ ] æ–¹æ‹¬å·ç”¨äºå‘ç¼–è¯‘å™¨è¡¨æ˜å½“å‰æ˜¯ä¸€ä¸ª lambda è¡¨è¾¾å¼ï¼Œå…¶ä¸èƒ½è¢«çœç•¥ã€‚åœ¨æ–¹æ‹¬å·å†…éƒ¨ï¼Œå¯ä»¥æ³¨æ˜å½“å‰ lambda å‡½æ•°çš„å‡½æ•°ä½“ä¸­å¯ä»¥ä½¿ç”¨å“ªäº›â€œå¤–éƒ¨å˜é‡â€ã€‚</li>
</ol>
<blockquote>
<p>æ‰€è°“å¤–éƒ¨å˜é‡ï¼ŒæŒ‡çš„æ˜¯å’Œå½“å‰ lambda è¡¨è¾¾å¼ä½äºåŒä¸€ä½œç”¨åŸŸå†…çš„æ‰€æœ‰å±€éƒ¨å˜é‡ã€‚</p>
</blockquote>
<ol start="2">
<li>
<p>(å‚æ•°)<br>
å’Œæ™®é€šå‡½æ•°çš„å®šä¹‰ä¸€æ ·ï¼Œlambda åŒ¿åå‡½æ•°ä¹Ÿå¯ä»¥æ¥æ”¶å¤–éƒ¨ä¼ é€’çš„å¤šä¸ªå‚æ•°ã€‚å’Œæ™®é€šå‡½æ•°ä¸åŒçš„æ˜¯ï¼Œå¦‚æœä¸éœ€è¦ä¼ é€’å‚æ•°ï¼Œå¯ä»¥è¿åŒ () å°æ‹¬å·ä¸€èµ·çœç•¥ï¼›</p>
</li>
<li>
<p>mutable<br>
æ­¤å…³é”®å­—å¯ä»¥çœç•¥ï¼Œå¦‚æœä½¿ç”¨åˆ™ä¹‹å‰çš„ () å°æ‹¬å·å°†ä¸èƒ½çœç•¥ï¼ˆå‚æ•°ä¸ªæ•°å¯ä»¥ä¸º 0ï¼‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯¹äºä»¥å€¼ä¼ é€’æ–¹å¼å¼•å…¥çš„å¤–éƒ¨å˜é‡ï¼Œä¸å…è®¸åœ¨ lambda è¡¨è¾¾å¼å†…éƒ¨ä¿®æ”¹å®ƒä»¬çš„å€¼ï¼ˆå¯ä»¥ç†è§£ä¸ºè¿™éƒ¨åˆ†å˜é‡éƒ½æ˜¯ const å¸¸é‡ï¼‰ã€‚è€Œå¦‚æœæƒ³ä¿®æ”¹å®ƒä»¬ï¼Œå°±å¿…é¡»ä½¿ç”¨ mutable å…³é”®å­—ã€‚</p>
</li>
</ol>
<p>æ³¨æ„ï¼Œå¯¹äºä»¥å€¼ä¼ é€’æ–¹å¼å¼•å…¥çš„å¤–éƒ¨å˜é‡ï¼Œlambda è¡¨è¾¾å¼ä¿®æ”¹çš„æ˜¯æ‹·è´çš„é‚£ä¸€ä»½ï¼Œå¹¶ä¸ä¼šä¿®æ”¹çœŸæ­£çš„å¤–éƒ¨å˜é‡ï¼›</p>
<ol start="4">
<li>noexcept/throw()<br>
å¯ä»¥çœç•¥ï¼Œå¦‚æœä½¿ç”¨ï¼Œåœ¨ä¹‹å‰çš„ () å°æ‹¬å·å°†ä¸èƒ½çœç•¥ï¼ˆå‚æ•°ä¸ªæ•°å¯ä»¥ä¸º 0ï¼‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œlambda å‡½æ•°çš„å‡½æ•°ä½“ä¸­å¯ä»¥æŠ›å‡ºä»»ä½•ç±»å‹çš„å¼‚å¸¸ã€‚è€Œæ ‡æ³¨ noexcept å…³é”®å­—ï¼Œåˆ™è¡¨ç¤ºå‡½æ•°ä½“å†…ä¸ä¼šæŠ›å‡ºä»»ä½•å¼‚å¸¸ï¼›ä½¿ç”¨ throw() å¯ä»¥æŒ‡å®š lambda å‡½æ•°å†…éƒ¨å¯ä»¥æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ã€‚</li>
</ol>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¦‚æœ lambda å‡½æ•°æ ‡æœ‰ noexcept è€Œå‡½æ•°ä½“å†…æŠ›å‡ºäº†å¼‚å¸¸ï¼Œåˆæˆ–è€…ä½¿ç”¨ throw() é™å®šäº†å¼‚å¸¸ç±»å‹è€Œå‡½æ•°ä½“å†…æŠ›å‡ºäº†éæŒ‡å®šç±»å‹çš„å¼‚å¸¸ï¼Œè¿™äº›å¼‚å¸¸æ— æ³•ä½¿ç”¨ try-catch æ•è·ï¼Œä¼šå¯¼è‡´ç¨‹åºæ‰§è¡Œå¤±è´¥ï¼ˆæœ¬èŠ‚åç»­ä¼šç»™å‡ºå®ä¾‹ï¼‰ã€‚</p>
<ol start="5">
<li>
<p>-&gt; è¿”å›å€¼ç±»å‹<br>
æŒ‡æ˜ lambda åŒ¿åå‡½æ•°çš„è¿”å›å€¼ç±»å‹ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¦‚æœ lambda å‡½æ•°ä½“å†…åªæœ‰ä¸€ä¸ª return è¯­å¥ï¼Œæˆ–è€…è¯¥å‡½æ•°è¿”å› voidï¼Œåˆ™ç¼–è¯‘å™¨å¯ä»¥è‡ªè¡Œæ¨æ–­å‡ºè¿”å›å€¼ç±»å‹ï¼Œæ­¤æƒ…å†µä¸‹å¯ä»¥ç›´æ¥çœç•¥<code>-&gt; è¿”å›å€¼ç±»å‹</code>ã€‚</p>
</li>
<li>
<p>å‡½æ•°ä½“<br>
å’Œæ™®é€šå‡½æ•°ä¸€æ ·ï¼Œlambda åŒ¿åå‡½æ•°åŒ…å«çš„å†…éƒ¨ä»£ç éƒ½æ”¾ç½®åœ¨å‡½æ•°ä½“ä¸­ã€‚è¯¥å‡½æ•°ä½“å†…é™¤äº†å¯ä»¥ä½¿ç”¨æŒ‡å®šä¼ é€’è¿›æ¥çš„å‚æ•°ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æŒ‡å®šçš„å¤–éƒ¨å˜é‡ä»¥åŠå…¨å±€èŒƒå›´å†…çš„æ‰€æœ‰å…¨å±€å˜é‡ã€‚</p>
</li>
</ol>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¤–éƒ¨å˜é‡ä¼šå—åˆ°ä»¥å€¼ä¼ é€’è¿˜æ˜¯ä»¥å¼•ç”¨ä¼ é€’æ–¹å¼å¼•å…¥çš„å½±å“ï¼Œè€Œå…¨å±€å˜é‡åˆ™ä¸ä¼šã€‚æ¢å¥è¯è¯´ï¼Œåœ¨ lambda è¡¨è¾¾å¼å†…å¯ä»¥ä½¿ç”¨ä»»æ„ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå¿…è¦æ—¶è¿˜å¯ä»¥ç›´æ¥ä¿®æ”¹å®ƒä»¬çš„å€¼ã€‚</p>
<blockquote>
<p>å…¶ä¸­ï¼Œçº¢è‰²æ ‡è¯†çš„å‚æ•°æ˜¯å®šä¹‰ lambda è¡¨è¾¾å¼æ—¶å¿…é¡»å†™çš„ï¼Œè€Œç»¿è‰²æ ‡è¯†çš„å‚æ•°å¯ä»¥çœç•¥ã€‚</p>
</blockquote>
<p>æ¯”å¦‚ï¼Œå¦‚ä¸‹å°±å®šä¹‰äº†ä¸€ä¸ªæœ€ç®€å•çš„ lambda åŒ¿åå‡½æ•°ï¼š</p>
<p>[]{}</p>
<p>æ˜¾ç„¶ï¼Œæ­¤ lambda åŒ¿åå‡½æ•°æœªå¼•å…¥ä»»ä½•å¤–éƒ¨å˜é‡ï¼ˆ[] å†…ä¸ºç©ºï¼‰ï¼Œä¹Ÿæ²¡æœ‰ä¼ é€’ä»»ä½•å‚æ•°ï¼Œæ²¡æœ‰æŒ‡å®š mutableã€noexcept ç­‰å…³é”®å­—ï¼Œæ²¡æœ‰è¿”å›å€¼å’Œå‡½æ•°ä½“ã€‚æ‰€ä»¥ï¼Œè¿™æ˜¯ä¸€ä¸ªæ²¡æœ‰ä»»ä½•åŠŸèƒ½çš„ lambda åŒ¿åå‡½æ•°ã€‚</p>
<h4 id="lambdaåŒ¿åå‡½æ•°ä¸­çš„-å¤–éƒ¨å˜é‡"><a class="header-anchor" href="#lambdaåŒ¿åå‡½æ•°ä¸­çš„-å¤–éƒ¨å˜é‡">ğŸŒ³</a>lambdaåŒ¿åå‡½æ•°ä¸­çš„[å¤–éƒ¨å˜é‡]</h4>
<p>å¯¹äº lambda åŒ¿åå‡½æ•°çš„ä½¿ç”¨ï¼Œä»¤å¤šæ•°åˆå­¦è€…æ„Ÿåˆ°å›°æƒ‘çš„å°±æ˜¯ [å¤–éƒ¨å˜é‡] çš„ä½¿ç”¨ã€‚å…¶å®å¾ˆç®€å•ï¼Œæ— éè¡¨ 1 æ‰€ç¤ºçš„è¿™å‡ ç§ç¼–å†™æ ¼å¼ã€‚</p>
<table>
<thead>
<tr>
<th>å¤–éƒ¨å˜é‡æ ¼å¼</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td>[]</td>
<td>ç©ºæ–¹æ‹¬å·è¡¨ç¤ºå½“å‰ lambda åŒ¿åå‡½æ•°ä¸­ä¸å¯¼å…¥ä»»ä½•å¤–éƒ¨å˜é‡ã€‚</td>
</tr>
<tr>
<td>[=]</td>
<td>åªæœ‰ä¸€ä¸ª = ç­‰å·ï¼Œè¡¨ç¤ºä»¥å€¼ä¼ é€’çš„æ–¹å¼å¯¼å…¥æ‰€æœ‰å¤–éƒ¨å˜é‡ï¼›</td>
</tr>
<tr>
<td>[&amp;]</td>
<td>åªæœ‰ä¸€ä¸ª &amp; ç¬¦å·ï¼Œè¡¨ç¤ºä»¥å¼•ç”¨ä¼ é€’çš„æ–¹å¼å¯¼å…¥æ‰€æœ‰å¤–éƒ¨å˜é‡ï¼›</td>
</tr>
<tr>
<td>[val1,val2,â€¦]</td>
<td>è¡¨ç¤ºä»¥å€¼ä¼ é€’çš„æ–¹å¼å¯¼å…¥ val1ã€val2 ç­‰æŒ‡å®šçš„å¤–éƒ¨å˜é‡ï¼ŒåŒæ—¶å¤šä¸ªå˜é‡ä¹‹é—´æ²¡æœ‰å…ˆåæ¬¡åºï¼›</td>
</tr>
<tr>
<td>[&amp;val1,&amp;val2,â€¦]</td>
<td>è¡¨ç¤ºä»¥å¼•ç”¨ä¼ é€’çš„æ–¹å¼å¯¼å…¥ val1ã€val2ç­‰æŒ‡å®šçš„å¤–éƒ¨å˜é‡ï¼Œå¤šä¸ªå˜é‡ä¹‹é—´æ²¡æœ‰å‰åæ¬¡åºï¼›</td>
</tr>
<tr>
<td>[val,&amp;val2,â€¦]</td>
<td>ä»¥ä¸Š 2 ç§æ–¹å¼è¿˜å¯ä»¥æ··åˆä½¿ç”¨ï¼Œå˜é‡ä¹‹é—´æ²¡æœ‰å‰åæ¬¡åºã€‚</td>
</tr>
<tr>
<td>[=,&amp;val1,â€¦]</td>
<td>è¡¨ç¤ºé™¤ val1 ä»¥å¼•ç”¨ä¼ é€’çš„æ–¹å¼å¯¼å…¥å¤–ï¼Œå…¶å®ƒå¤–éƒ¨å˜é‡éƒ½ä»¥å€¼ä¼ é€’çš„æ–¹å¼å¯¼å…¥ã€‚</td>
</tr>
<tr>
<td>[this]</td>
<td>è¡¨ç¤ºä»¥å€¼ä¼ é€’çš„æ–¹å¼å¯¼å…¥å½“å‰çš„ this æŒ‡é’ˆã€‚</td>
</tr>
</tbody>
</table>
<blockquote>
<p>æ³¨æ„ï¼Œå•ä¸ªå¤–éƒ¨å˜é‡ä¸å…è®¸ä»¥ç›¸åŒçš„ä¼ é€’æ–¹å¼å¯¼å…¥å¤šæ¬¡ã€‚ä¾‹å¦‚ [=ï¼Œval1] ä¸­ï¼Œval1 å…ˆåè¢«ä»¥å€¼ä¼ é€’çš„æ–¹å¼å¯¼å…¥äº† 2 æ¬¡ï¼Œè¿™æ˜¯éæ³•çš„ã€‚</p>
</blockquote>
<p>ã€ä¾‹ 1ã€‘lambda åŒ¿åå‡½æ•°çš„å®šä¹‰å’Œä½¿ç”¨ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> num[<span class="number">4</span>] = &#123;<span class="number">4</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>&#125;;</span><br><span class="line">    <span class="comment">//å¯¹ a æ•°ç»„ä¸­çš„å…ƒç´ è¿›è¡Œæ’åº</span></span><br><span class="line">    <span class="built_in">sort</span>(num, num<span class="number">+4</span>, [=](<span class="type">int</span> x, <span class="type">int</span> y) -&gt; <span class="type">bool</span>&#123; <span class="keyword">return</span> x &lt; y; &#125; );</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> n : num)&#123;</span><br><span class="line">        cout &lt;&lt; n &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>1 2 3 4</p>
<p>ç¨‹åºç¬¬ 9 è¡Œé€šè¿‡è°ƒç”¨ sort() å‡½æ•°å®ç°äº†å¯¹ num æ•°ç»„ä¸­å…ƒç´ çš„å‡åºæ’åºï¼Œå…¶ä¸­å°±ç”¨åˆ°äº† lambda åŒ¿åå‡½æ•°ã€‚è€Œå¦‚æœä½¿ç”¨æ™®é€šå‡½æ•°ï¼Œéœ€ä»¥å¦‚ä¸‹ä»£ç å®ç°ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰çš„å‡åºæ’åºè§„åˆ™</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">sort_up</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span>  x &lt; y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> num[<span class="number">4</span>] = &#123;<span class="number">4</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>&#125;;</span><br><span class="line">    <span class="comment">//å¯¹ a æ•°ç»„ä¸­çš„å…ƒç´ è¿›è¡Œæ’åº</span></span><br><span class="line">    <span class="built_in">sort</span>(num, num<span class="number">+4</span>, sort_up);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> n : num)&#123;</span><br><span class="line">        cout &lt;&lt; n &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314151617</span></span><br></pre></td></tr></table></figure>
<p>æ­¤ç¨‹åºä¸­ sort_up() å‡½æ•°çš„åŠŸèƒ½å’Œä¸Šä¸€ä¸ªç¨‹åºä¸­çš„ lambda åŒ¿åå‡½æ•°å®Œå…¨ç›¸åŒã€‚æ˜¾ç„¶åœ¨ç±»ä¼¼çš„åœºæ™¯ä¸­ï¼Œä½¿ç”¨ lambda åŒ¿åå‡½æ•°æ›´æœ‰ä¼˜åŠ¿ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè™½ç„¶ lambda åŒ¿åå‡½æ•°æ²¡æœ‰å‡½æ•°åç§°ï¼Œä½†æˆ‘ä»¬ä»å¯ä»¥ä¸ºå…¶æ‰‹åŠ¨è®¾ç½®ä¸€ä¸ªåç§°ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//display å³ä¸º lambda åŒ¿åå‡½æ•°çš„å‡½æ•°å</span></span><br><span class="line">    <span class="keyword">auto</span> display = [](<span class="type">int</span> a,<span class="type">int</span> b) -&gt; <span class="type">void</span>&#123;cout &lt;&lt; a &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; b;&#125;;</span><br><span class="line">    <span class="comment">//è°ƒç”¨ lambda å‡½æ•°</span></span><br><span class="line">    <span class="built_in">display</span>(<span class="number">10</span>,<span class="number">20</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>10 20</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œç¨‹åºä¸­ä½¿ç”¨ auto å…³é”®å­—ä¸º lambda åŒ¿åå‡½æ•°è®¾å®šäº†ä¸€ä¸ªå‡½æ•°åï¼Œç”±æ­¤æˆ‘ä»¬å³å¯åœ¨ä½œç”¨åŸŸå†…è°ƒç”¨è¯¥å‡½æ•°ã€‚</p>
<p>ã€ä¾‹ 2ã€‘å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’çš„åŒºåˆ«</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//å…¨å±€å˜é‡</span></span><br><span class="line"><span class="type">int</span> all_num = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//å±€éƒ¨å˜é‡</span></span><br><span class="line">    <span class="type">int</span> num_1 = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> num_2 = <span class="number">2</span>;</span><br><span class="line">    <span class="type">int</span> num_3 = <span class="number">3</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;lambda1:\n&quot;</span>;</span><br><span class="line">    <span class="keyword">auto</span> lambda1 = [=]&#123;</span><br><span class="line">        <span class="comment">//å…¨å±€å˜é‡å¯ä»¥è®¿é—®ç”šè‡³ä¿®æ”¹</span></span><br><span class="line">        all_num = <span class="number">10</span>;</span><br><span class="line">        <span class="comment">//å‡½æ•°ä½“å†…åªèƒ½ä½¿ç”¨å¤–éƒ¨å˜é‡ï¼Œè€Œæ— æ³•å¯¹å®ƒä»¬è¿›è¡Œä¿®æ”¹</span></span><br><span class="line">        cout &lt;&lt; num_1 &lt;&lt; <span class="string">&quot; &quot;</span></span><br><span class="line">             &lt;&lt; num_2 &lt;&lt; <span class="string">&quot; &quot;</span></span><br><span class="line">             &lt;&lt; num_3 &lt;&lt; endl;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">lambda1</span>();</span><br><span class="line">    cout &lt;&lt; all_num &lt;&lt;endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;lambda2:\n&quot;</span>;</span><br><span class="line">    <span class="keyword">auto</span> lambda2 = [&amp;]&#123;</span><br><span class="line">        all_num = <span class="number">100</span>;</span><br><span class="line">        num_1 = <span class="number">10</span>;</span><br><span class="line">        num_2 = <span class="number">20</span>;</span><br><span class="line">        num_3 = <span class="number">30</span>;</span><br><span class="line">        cout &lt;&lt; num_1 &lt;&lt; <span class="string">&quot; &quot;</span></span><br><span class="line">             &lt;&lt; num_2 &lt;&lt; <span class="string">&quot; &quot;</span></span><br><span class="line">             &lt;&lt; num_3 &lt;&lt; endl;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">lambda2</span>();</span><br><span class="line">    cout &lt;&lt; all_num &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314151617181920212223242526272829303132333435</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>lambda1:<br>
1 2 3<br>
10<br>
lambda2:<br>
10 20 30<br>
100</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨åˆ›å»º lambda1 å’Œ lambda2 åŒ¿åå‡½æ•°çš„ä½œç”¨åŸŸä¸­ï¼Œæœ‰ num_1ã€num_2 å’Œ num_3 è¿™ 3 ä¸ªå±€éƒ¨å˜é‡ï¼Œå¦å¤–è¿˜æœ‰ all_num å…¨å±€å˜é‡ã€‚</p>
<p>å…¶ä¸­ï¼Œlambda1 åŒ¿åå‡½æ•°æ˜¯ä»¥ [=] å€¼ä¼ é€’çš„æ–¹å¼å¯¼å…¥çš„å±€éƒ¨å˜é‡ï¼Œè¿™æ„å‘³ç€é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤å‡½æ•°å†…éƒ¨æ— æ³•ä¿®æ”¹è¿™ 3 ä¸ªå±€éƒ¨å˜é‡çš„å€¼ï¼Œä½†å…¨å±€å˜é‡ all_num é™¤å¤–ã€‚ç›¸å¯¹åœ°ï¼Œlambda2 åŒ¿åå‡½æ•°ä»¥ [&amp;] å¼•ç”¨ä¼ é€’çš„æ–¹å¼å¯¼å…¥è¿™ 3 ä¸ªå±€éƒ¨å˜é‡ï¼Œå› æ­¤åœ¨è¯¥å‡½æ•°çš„å†…éƒ¨ä¸å°±å¯ä»¥è®¿é—®è¿™ 3 ä¸ªå±€éƒ¨å˜é‡ï¼Œè¿˜å¯ä»¥ä»»æ„ä¿®æ”¹å®ƒä»¬ã€‚åŒæ ·ï¼Œä¹Ÿå¯ä»¥è®¿é—®ç”šè‡³ä¿®æ”¹å…¨å±€å˜é‡ã€‚</p>
<blockquote>
<p>æ„Ÿå…´è¶£çš„è¯»è€…ï¼Œå¯è‡ªè¡Œå°è¯•åœ¨ lambda1 åŒ¿åå‡½æ•°ä¸­ä¿®æ”¹ num_1ã€num_2 æˆ–è€… num_3 çš„å€¼ï¼Œè§‚å¯Ÿç¼–è¯‘å™¨çš„æŠ¥é”™ä¿¡æ¯ã€‚</p>
</blockquote>
<p>å½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åœ¨ lambda1 åŒ¿åå‡½æ•°çš„åŸºç¡€ä¸Šä¿®æ”¹å¤–éƒ¨å˜é‡çš„å€¼ï¼Œå¯ä»¥å€ŸåŠ© mutable å…³é”®å­—ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> lambda1 = [=]() <span class="keyword">mutable</span>&#123;</span><br><span class="line">    num_1 = <span class="number">10</span>;</span><br><span class="line">    num_2 = <span class="number">20</span>;</span><br><span class="line">    num_3 = <span class="number">30</span>;</span><br><span class="line">    <span class="comment">//å‡½æ•°ä½“å†…åªèƒ½ä½¿ç”¨å¤–éƒ¨å˜é‡ï¼Œè€Œæ— æ³•å¯¹å®ƒä»¬è¿›è¡Œä¿®æ”¹</span></span><br><span class="line">    cout &lt;&lt; num_1 &lt;&lt; <span class="string">&quot; &quot;</span></span><br><span class="line">         &lt;&lt; num_2 &lt;&lt; <span class="string">&quot; &quot;</span></span><br><span class="line">         &lt;&lt; num_3 &lt;&lt; endl;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure>
<p>ç”±æ­¤ï¼Œå°±å¯ä»¥åœ¨ lambda1 åŒ¿åå‡½æ•°ä¸­ä¿®æ”¹å¤–éƒ¨å˜é‡çš„å€¼ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œä¿®æ”¹çš„ä»…æ˜¯ num_1ã€num_2ã€num_3 æ‹·è´çš„é‚£ä¸€ä»½çš„å€¼ï¼ŒçœŸæ­£å¤–éƒ¨å˜é‡çš„å€¼å¹¶ä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚</p>
<p>ã€ä¾‹ 3ã€‘æ‰§è¡ŒæŠ›å‡ºå¼‚å¸¸ç±»å‹</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> except = []()<span class="built_in">throw</span>(<span class="type">int</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="number">10</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="built_in">except</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">int</span>) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;æ•è·åˆ°äº†æ•´å½¢å¼‚å¸¸&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112131415</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>æ•è·åˆ°äº†æ•´å½¢å¼‚å¸¸</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œexcept åŒ¿åæ•°ç»„ä¸­æŒ‡å®šå‡½æ•°ä½“ä¸­å¯ä»¥æŠ›å‡ºæ•´å½¢å¼‚å¸¸ï¼Œå› æ­¤å½“å‡½æ•°ä½“ä¸­çœŸæ­£å‘ç”Ÿæ•´å½¢å¼‚å¸¸æ—¶ï¼Œå¯ä»¥å€ŸåŠ© try-catch å—æˆåŠŸæ•è·å¹¶å¤„ç†ã€‚</p>
<p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œåœ¨çœ‹ä¸€ä¸‹åä¾‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> except1 = []()<span class="keyword">noexcept</span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="number">100</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">auto</span> except2 = []()<span class="built_in">throw</span>(<span class="type">char</span>)&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="number">10</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="built_in">except1</span>();</span><br><span class="line">        <span class="built_in">except2</span>();</span><br><span class="line">    &#125;<span class="built_in">catch</span>(<span class="type">int</span>)&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;æ•è·åˆ°äº†æ•´å½¢å¼‚å¸¸&quot;</span>&lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112131415161718</span></span><br></pre></td></tr></table></figure>
<p>æ­¤ç¨‹åºè¿è¡Œä¼šç›´æ¥å´©æºƒï¼ŒåŸå› å¾ˆç®€å•ï¼Œexcept1 åŒ¿åå‡½æ•°æŒ‡å®šäº†å‡½æ•°ä½“ä¸­ä¸å‘ç”Ÿä»»ä½•å¼‚å¸¸ï¼Œä½†å‡½æ•°ä½“ä¸­å´å‘ç”Ÿäº†æ•´å½¢å¼‚å¸¸ï¼›except2 åŒ¿åå‡½æ•°æŒ‡å®šå‡½æ•°ä½“å¯èƒ½ä¼šå‘ç”Ÿå­—ç¬¦å¼‚å¸¸ï¼Œä½†å‡½æ•°ä½“ä¸­å´å‘ç”Ÿäº†æ•´å½¢å¼‚å¸¸ã€‚ç”±äºæŒ‡å®šå¼‚å¸¸ç±»å‹å’ŒçœŸæ­£å‘ç”Ÿçš„å¼‚å¸¸ç±»å‹ä¸åŒ¹é…ï¼Œå¯¼è‡´ try-catch æ— æ³•æ•è·ï¼Œæœ€ç»ˆç¨‹åºè¿è¡Œå´©æºƒã€‚</p>
<blockquote>
<p>å¦‚æœä¸ä½¿ç”¨ noexcept æˆ–è€… throw()ï¼Œåˆ™ lambda åŒ¿åå‡½æ•°çš„å‡½æ•°ä½“ä¸­å…è®¸å‘ç”Ÿä»»ä½•ç±»å‹çš„å¼‚å¸¸ã€‚</p>
</blockquote>
<h2 id="c-11éå—é™è”åˆä½“-union"><a class="header-anchor" href="#c-11éå—é™è”åˆä½“-union">ğŸŒ³</a>C++11éå—é™è”åˆä½“ï¼ˆunionï¼‰</h2>
<p>åœ¨ C/<a href="http://c.biancheng.net/cplus/">C++</a> ä¸­ï¼Œè”åˆä½“ï¼ˆUnionï¼‰æ˜¯ä¸€ç§æ„é€ æ•°æ®ç±»å‹ã€‚åœ¨ä¸€ä¸ªè”åˆä½“å†…ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰å¤šä¸ªä¸åŒç±»å‹çš„æˆå‘˜ï¼Œè¿™äº›æˆå‘˜å°†ä¼šå…±äº«åŒä¸€å—å†…å­˜ç©ºé—´ã€‚è€ç‰ˆæœ¬çš„ C++ ä¸ºäº†å’ŒCè¯­è¨€ä¿æŒå…¼å®¹ï¼Œå¯¹è”åˆä½“çš„æ•°æ®æˆå‘˜çš„ç±»å‹è¿›è¡Œäº†å¾ˆå¤§ç¨‹åº¦çš„é™åˆ¶ï¼Œè¿™äº›é™åˆ¶åœ¨ä»Šå¤©çœ‹æ¥å¹¶æ²¡æœ‰å¿…è¦ï¼Œå› æ­¤ C++11 å–æ¶ˆäº†è¿™äº›é™åˆ¶ã€‚</p>
<p>C++11 æ ‡å‡†è§„å®šï¼Œä»»ä½•éå¼•ç”¨ç±»å‹éƒ½å¯ä»¥æˆä¸ºè”åˆä½“çš„æ•°æ®æˆå‘˜ï¼Œè¿™ç§è”åˆä½“ä¹Ÿè¢«ç§°ä¸ºéå—é™è”åˆä½“ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Student</span>(<span class="type">bool</span> g, <span class="type">int</span> a): <span class="built_in">gender</span>(g), <span class="built_in">age</span>(a) &#123;&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">bool</span> gender;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">union</span> <span class="title class_">T</span>&#123;</span><br><span class="line">    Student s;  <span class="comment">// å«æœ‰éPODç±»å‹çš„æˆå‘˜ï¼Œgcc-5.1.0  ç‰ˆæœ¬æŠ¥é”™</span></span><br><span class="line">    <span class="type">char</span> name[<span class="number">10</span>];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå› ä¸º Student ç±»å¸¦æœ‰è‡ªå®šä¹‰çš„æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥æ˜¯ä¸€ä¸ªé POD ç±»å‹çš„ï¼Œè¿™å¯¼è‡´ç¼–è¯‘å™¨æŠ¥é”™ã€‚è¿™ç§è§„å®šåªæ˜¯ C++ ä¸ºäº†å…¼å®¹Cè¯­è¨€è€Œåˆ¶å®šï¼Œç„¶è€Œåœ¨é•¿æœŸçš„ç¼–ç¨‹å®è·µä¸­å‘ç°ï¼Œè¿™ç§è§„å®šæ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚</p>
<p>å…³äº POD ç±»å‹ç¨åæˆ‘ä»¬ä¼šè®²è§£ï¼Œå¤§å®¶å…ˆä¸è¦ç€æ€¥ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…·ä½“çœ‹ä¸€ä¸‹ C++11 å¯¹ C++98 çš„æ”¹è¿›ã€‚</p>
<h3 id="1-c-11-å…è®¸é-pod-ç±»å‹"><a class="header-anchor" href="#1-c-11-å…è®¸é-pod-ç±»å‹">ğŸŒ³</a>1. C++11 å…è®¸é POD ç±»å‹</h3>
<p>C++98 ä¸å…è®¸è”åˆä½“çš„æˆå‘˜æ˜¯é POD ç±»å‹ï¼Œä½†æ˜¯ C++1 1 å–æ¶ˆäº†è¿™ç§é™åˆ¶ã€‚</p>
<p>POD æ˜¯ C++ ä¸­ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„æ¦‚å¿µï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åšä¸€ä¸ªç®€å•ä»‹ç»ã€‚POD æ˜¯è‹±æ–‡ Plain Old Data çš„ç¼©å†™ï¼Œç”¨æ¥æè¿°ä¸€ä¸ªç±»å‹çš„å±æ€§ã€‚</p>
<p>POD ç±»å‹ä¸€èˆ¬å…·æœ‰ä»¥ä¸‹å‡ ç§ç‰¹å¾ï¼ˆåŒ…æ‹¬ classã€union å’Œ structç­‰ï¼‰ï¼š</p>
<ol>
<li>
<p>æ²¡æœ‰ç”¨æˆ·è‡ªå®šä¹‰çš„æ„é€ å‡½æ•°ã€ææ„å‡½æ•°ã€æ‹·è´æ„é€ å‡½æ•°å’Œç§»åŠ¨æ„é€ å‡½æ•°ã€‚</p>
</li>
<li>
<p>ä¸èƒ½åŒ…å«è™šå‡½æ•°å’Œè™šåŸºç±»ã€‚</p>
</li>
<li>
<p>éé™æ€æˆå‘˜å¿…é¡»å£°æ˜ä¸º publicã€‚</p>
</li>
<li>
<p>ç±»ä¸­çš„ç¬¬ä¸€ä¸ªéé™æ€æˆå‘˜çš„ç±»å‹ä¸å…¶åŸºç±»ä¸åŒï¼Œä¾‹å¦‚ï¼š</p>
</li>
</ol>
<p>class B1{};<br>
class B2 : B1 { B1 b; };</p>
<p>class B2 çš„ç¬¬ä¸€ä¸ªéé™æ€æˆå‘˜ b æ˜¯åŸºç±»ç±»å‹ï¼Œæ‰€ä»¥å®ƒä¸æ˜¯ POD ç±»å‹ã€‚</p>
<ol start="5">
<li>åœ¨ç±»æˆ–è€…ç»“æ„ä½“ç»§æ‰¿æ—¶ï¼Œæ»¡è¶³ä»¥ä¸‹ä¸¤ç§æƒ…å†µä¹‹ä¸€ï¼š</li>
</ol>
<ul>
<li>æ´¾ç”Ÿç±»ä¸­æœ‰éé™æ€æˆå‘˜ï¼Œä¸”åªæœ‰ä¸€ä¸ªä»…åŒ…å«é™æ€æˆå‘˜çš„åŸºç±»ï¼›</li>
<li>åŸºç±»æœ‰éé™æ€æˆå‘˜ï¼Œè€Œæ´¾ç”Ÿç±»æ²¡æœ‰éé™æ€æˆå‘˜ã€‚</li>
</ul>
<p>æˆ‘ä»¬æ¥çœ‹å…·ä½“çš„ä¾‹å­ï¼š</p>
<p>class B1 { static int n; };<br>
class B2 : B1 { int n1; };<br>
class B3 : B2 { static int n2; };</p>
<p>å¯¹äº B2ï¼Œæ´¾ç”Ÿç±» B2 ä¸­æœ‰éé™æ€æˆå‘˜ï¼Œä¸”åªæœ‰ä¸€ä¸ªä»…åŒ…å«é™æ€æˆå‘˜çš„åŸºç±» B1ï¼Œæ‰€ä»¥å®ƒæ˜¯ POD ç±»å‹ã€‚å¯¹äº B3ï¼ŒåŸºç±» B2 æœ‰éé™æ€æˆå‘˜ï¼Œè€Œæ´¾ç”Ÿç±» B3 æ²¡æœ‰éé™æ€æˆå‘˜ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ˜¯ POD ç±»å‹ã€‚</p>
<ol start="6">
<li>
<p>æ‰€æœ‰éé™æ€æ•°æ®æˆå‘˜å‡å’Œå…¶åŸºç±»ä¹Ÿç¬¦åˆä¸Šè¿°è§„åˆ™ï¼ˆé€’å½’å®šä¹‰ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ POD ç±»å‹ä¸èƒ½åŒ…å«é POD ç±»å‹çš„æ•°æ®ã€‚</p>
</li>
<li>
<p>æ­¤å¤–ï¼Œæ‰€æœ‰å…¼å®¹Cè¯­è¨€çš„æ•°æ®ç±»å‹éƒ½æ˜¯ POD ç±»å‹ï¼ˆstructã€union ç­‰ä¸èƒ½è¿èƒŒä¸Šè¿°è§„åˆ™ï¼‰ã€‚</p>
</li>
</ol>
<h3 id="2-c-11-å…è®¸è”åˆä½“æœ‰é™æ€æˆå‘˜"><a class="header-anchor" href="#2-c-11-å…è®¸è”åˆä½“æœ‰é™æ€æˆå‘˜">ğŸŒ³</a>2. C++11 å…è®¸è”åˆä½“æœ‰é™æ€æˆå‘˜</h3>
<p>C++11 åˆ é™¤äº†è”åˆä½“ä¸å…è®¸æ‹¥æœ‰é™æ€æˆå‘˜çš„é™åˆ¶ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">union</span> <span class="title class_">U</span> &#123;</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">int</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = <span class="number">3</span>;</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé™æ€æˆå‘˜å˜é‡åªèƒ½åœ¨è”åˆä½“å†…å®šä¹‰ï¼Œå´ä¸èƒ½åœ¨è”åˆä½“å¤–ä½¿ç”¨ï¼Œè¿™ä½¿å¾—è¯¥è§„åˆ™å¾ˆæ²¡ç”¨ã€‚</p>
<h2 id="éå—é™è”åˆä½“çš„èµ‹å€¼æ³¨æ„äº‹é¡¹"><a class="header-anchor" href="#éå—é™è”åˆä½“çš„èµ‹å€¼æ³¨æ„äº‹é¡¹">ğŸŒ³</a>éå—é™è”åˆä½“çš„èµ‹å€¼æ³¨æ„äº‹é¡¹</h2>
<p>C++11 è§„å®šï¼Œå¦‚æœéå—é™è”åˆä½“å†…æœ‰ä¸€ä¸ªé POD çš„æˆå‘˜ï¼Œè€Œè¯¥æˆå‘˜æ‹¥æœ‰è‡ªå®šä¹‰çš„æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªéå—é™è”åˆä½“çš„é»˜è®¤æ„é€ å‡½æ•°å°†è¢«ç¼–è¯‘å™¨åˆ é™¤ï¼›å…¶ä»–çš„ç‰¹æ®Šæˆå‘˜å‡½æ•°ï¼Œä¾‹å¦‚é»˜è®¤æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼æ“ä½œç¬¦ä»¥åŠææ„å‡½æ•°ç­‰ï¼Œä¹Ÿå°†è¢«åˆ é™¤ã€‚</p>
<p>è¿™æ¡è§„åˆ™å¯èƒ½å¯¼è‡´å¯¹è±¡æ„é€ å¤±è´¥ï¼Œè¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">union</span> <span class="title class_">U</span> &#123;</span><br><span class="line">    string s;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    U u;   <span class="comment">// æ„é€ å¤±è´¥ï¼Œå› ä¸º U çš„æ„é€ å‡½æ•°è¢«åˆ é™¤</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå› ä¸º string ç±»æ‹¥æœ‰è‡ªå®šä¹‰çš„æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥ U çš„æ„é€ å‡½æ•°è¢«åˆ é™¤ï¼›å®šä¹‰ U çš„ç±»å‹å˜é‡ u éœ€è¦è°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥ u ä¹Ÿå°±æ— æ³•å®šä¹‰æˆåŠŸã€‚</p>
<p>è§£å†³ä¸Šé¢é—®é¢˜çš„ä¸€èˆ¬éœ€è¦ç”¨åˆ° placement newï¼ˆç¨åä¼šè®²è§£è¿™ä¸ªæ¦‚å¿µï¼‰ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">union</span> <span class="title class_">U</span> &#123;</span><br><span class="line">    string s;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">U</span>() &#123; <span class="keyword">new</span>(&amp;s) string; &#125;</span><br><span class="line">    ~<span class="built_in">U</span>() &#123; s.~<span class="built_in">string</span>(); &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    U u;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure>
<p>æ„é€ æ—¶ï¼Œé‡‡ç”¨ placement new å°† s æ„é€ åœ¨å…¶åœ°å€ &amp;s ä¸Šï¼Œè¿™é‡Œ placement new çš„å”¯ä¸€ä½œç”¨åªæ˜¯è°ƒç”¨äº†ä¸€ä¸‹ string ç±»çš„æ„é€ å‡½æ•°ã€‚æ³¨æ„ï¼Œåœ¨ææ„æ—¶è¿˜éœ€è¦è°ƒç”¨ string ç±»çš„ææ„å‡½æ•°ã€‚</p>
<h3 id="placement-new-æ˜¯ä»€ä¹ˆï¼Ÿ"><a class="header-anchor" href="#placement-new-æ˜¯ä»€ä¹ˆï¼Ÿ">ğŸŒ³</a>placement new æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>placement new æ˜¯ new å…³é”®å­—çš„ä¸€ç§è¿›é˜¶ç”¨æ³•ï¼Œæ—¢å¯ä»¥åœ¨æ ˆï¼ˆstackï¼‰ä¸Šç”Ÿæˆå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥åœ¨å †ï¼ˆheapï¼‰ä¸Šç”Ÿæˆå¯¹è±¡ã€‚ç›¸å¯¹åº”åœ°ï¼Œæˆ‘ä»¬æŠŠå¸¸è§çš„ new çš„ç”¨æ³•ç§°ä¸º operator newï¼Œå®ƒåªèƒ½åœ¨ heap ä¸Šç”Ÿæˆå¯¹è±¡ã€‚</p>
<p>placement new çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>
<p>new(address) ClassConstruct(â€¦)</p>
<p>address è¡¨ç¤ºå·²æœ‰å†…å­˜çš„åœ°å€ï¼Œè¯¥å†…å­˜å¯ä»¥åœ¨æ ˆä¸Šï¼Œä¹Ÿå¯ä»¥åœ¨å †ä¸Šï¼›ClassConstruct(â€¦) è¡¨ç¤ºè°ƒç”¨ç±»çš„æ„é€ å‡½æ•°ï¼Œå¦‚æœæ„é€ å‡½æ•°æ²¡æœ‰å‚æ•°ï¼Œä¹Ÿå¯ä»¥çœç•¥æ‹¬å·ã€‚</p>
<p>placement new åˆ©ç”¨å·²ç»ç”³è¯·å¥½çš„å†…å­˜æ¥ç”Ÿæˆå¯¹è±¡ï¼Œå®ƒä¸å†ä¸ºå¯¹è±¡åˆ†é…æ–°çš„å†…å­˜ï¼Œè€Œæ˜¯å°†å¯¹è±¡æ•°æ®æ”¾åœ¨ address æŒ‡å®šçš„å†…å­˜ä¸­ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œplacement new ä½¿ç”¨çš„æ˜¯ s çš„å†…å­˜ç©ºé—´ã€‚</p>
<h2 id="éå—é™è”åˆä½“çš„åŒ¿åå£°æ˜å’Œ-æšä¸¾å¼ç±»"><a class="header-anchor" href="#éå—é™è”åˆä½“çš„åŒ¿åå£°æ˜å’Œ-æšä¸¾å¼ç±»">ğŸŒ³</a>éå—é™è”åˆä½“çš„åŒ¿åå£°æ˜å’Œâ€œæšä¸¾å¼ç±»â€</h2>
<p>åŒ¿åè”åˆä½“æ˜¯æŒ‡ä¸å…·åçš„è”åˆä½“ï¼ˆä¹Ÿå³æ²¡æœ‰åå­—çš„è”åˆä½“ï¼‰ï¼Œä¸€èˆ¬å®šä¹‰å¦‚ä¸‹ï¼š</p>
<p>union U{<br>
union { int x; }; //æ­¤è”åˆä½“ä¸ºåŒ¿åè”åˆä½“<br>
};</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè”åˆä½“ U å†…å®šä¹‰äº†ä¸€ä¸ªä¸å…·åçš„è”åˆä½“ï¼Œè¯¥è”åˆä½“åŒ…å«ä¸€ä¸ª int ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œæˆ‘ä»¬ç§°è¿™ä¸ªè”åˆä½“ä¸ºåŒ¿åè”åˆä½“ã€‚</p>
<p>åŒæ ·çš„ï¼Œéå—é™è”åˆä½“ä¹Ÿå¯ä»¥åŒ¿åï¼Œè€Œå½“éå—é™çš„åŒ¿åè”åˆä½“è¿ç”¨äºç±»çš„å£°æ˜æ—¶ï¼Œè¿™æ ·çš„ç±»è¢«ç§°ä¸ºâ€œæšä¸¾å¼ç±»â€ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Student</span>(<span class="type">bool</span> g, <span class="type">int</span> a): <span class="built_in">gender</span>(g), <span class="built_in">age</span>(a)&#123;&#125;</span><br><span class="line">    <span class="type">bool</span> gender;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singer</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">enum</span> <span class="title class_">Type</span> &#123; STUDENT, NATIVE, FOREIGENR &#125;;</span><br><span class="line">    <span class="built_in">Singer</span>(<span class="type">bool</span> g, <span class="type">int</span> a) : <span class="built_in">s</span>(g, a) &#123; t = STUDENT; &#125;</span><br><span class="line">    <span class="built_in">Singer</span>(<span class="type">int</span> i) : <span class="built_in">id</span>(i) &#123; t = NATIVE; &#125;</span><br><span class="line">    <span class="built_in">Singer</span>(<span class="type">const</span> <span class="type">char</span>* n, <span class="type">int</span> s) &#123;</span><br><span class="line">        <span class="type">int</span> size = (s &gt; <span class="number">9</span>) ? <span class="number">9</span> : s;</span><br><span class="line">        <span class="built_in">memcpy</span>(name , n, size);</span><br><span class="line">        name[s] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">        t = FOREIGENR;</span><br><span class="line">    &#125;</span><br><span class="line">    ~<span class="built_in">Singer</span>()&#123;&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Type t;</span><br><span class="line">    <span class="keyword">union</span> &#123;</span><br><span class="line">        Student s;</span><br><span class="line">        <span class="type">int</span> id;</span><br><span class="line">        <span class="type">char</span> name[<span class="number">10</span>];</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">Singer</span>(<span class="literal">true</span>, <span class="number">13</span>);</span><br><span class="line">    <span class="built_in">Singer</span>(<span class="number">310217</span>);</span><br><span class="line">    <span class="built_in">Singer</span>(<span class="string">&quot;J Michael&quot;</span>, <span class="number">9</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910111213141516171819202122232425262728293031323334</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç ä¸­ä½¿ç”¨äº†ä¸€ä¸ªåŒ¿åéå—é™è”åˆä½“ï¼Œå®ƒä½œä¸ºç±» Singer çš„â€œå˜é•¿æˆå‘˜â€æ¥ä½¿ç”¨ï¼Œè¿™æ ·çš„å˜é•¿æˆå‘˜ç»™ç±»çš„ç¼–å†™å¸¦æ¥äº†æ›´å¤§çš„çµæ´»æ€§ï¼Œè¿™æ˜¯ C++98 æ ‡å‡†ä¸­æ— æ³•è¾¾åˆ°çš„ï¼ˆç¼–è¯‘å™¨ä¼šæŠ¥<code>member 'Student Singer::&lt;anonymous union&gt;::s' with constructor not allowed in union</code>é”™è¯¯ï¼‰ã€‚</p>
<h2 id="c-11-forå¾ªç¯-åŸºäºèŒƒå›´çš„å¾ªç¯-è¯¦è§£"><a class="header-anchor" href="#c-11-forå¾ªç¯-åŸºäºèŒƒå›´çš„å¾ªç¯-è¯¦è§£">ğŸŒ³</a>C++11 forå¾ªç¯ï¼ˆåŸºäºèŒƒå›´çš„å¾ªç¯ï¼‰è¯¦è§£</h2>
<p>C++ 11æ ‡å‡†ä¹‹å‰ï¼ˆC++ 98/03 æ ‡å‡†ï¼‰ï¼Œå¦‚æœè¦ç”¨ for å¾ªç¯è¯­å¥éå†ä¸€ä¸ªæ•°ç»„æˆ–è€…å®¹å™¨ï¼Œåªèƒ½å¥—ç”¨å¦‚ä¸‹ç»“æ„ï¼š</p>
<p>for(è¡¨è¾¾å¼ 1; è¡¨è¾¾å¼ 2; è¡¨è¾¾å¼ 3){<br>
//å¾ªç¯ä½“<br>
}</p>
<p>ä¾‹å¦‚ï¼Œä¸‹é¢ç¨‹åºæ¼”ç¤ºäº†ç”¨ä¸Šè¿°ç»“æ„éå†æ•°ç»„å’Œå®¹å™¨çš„å…·ä½“å®ç°è¿‡ç¨‹ï¼ˆå®ä¾‹ä¸€ï¼‰ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">char</span> arc[] = <span class="string">&quot;http://c.biancheng.net/cplus/11/&quot;</span>;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="comment">//forå¾ªç¯éå†æ™®é€šæ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="built_in">strlen</span>(arc); i++) &#123;</span><br><span class="line">        cout &lt;&lt; arc[i];</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">    vector&lt;<span class="type">char</span>&gt;<span class="built_in">myvector</span>(arc,arc<span class="number">+23</span>);</span><br><span class="line">    vector&lt;<span class="type">char</span>&gt;::iterator iter;</span><br><span class="line">    <span class="comment">//forå¾ªç¯éå† vector å®¹å™¨</span></span><br><span class="line">    <span class="keyword">for</span> (iter = myvector.<span class="built_in">begin</span>(); iter != myvector.<span class="built_in">end</span>(); ++iter) &#123;</span><br><span class="line">        cout &lt;&lt; *iter;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314151617181920</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p><a href="http://c.biancheng.net/cplus/11/">http://c.biancheng.net/cplus/11/</a><br>
<a href="http://c.biancheng.net/">http://c.biancheng.net/</a></p>
<blockquote>
<p>æ­¤ç¤ºä¾‹ä¸­ï¼Œvector ä¸º STL æ ‡å‡†åº“æä¾›çš„åºåˆ—å¼å®¹å™¨ï¼Œå…³äºè¯¥å®¹å™¨çš„å…·ä½“ç”¨æ³•ï¼Œå¯é˜…è¯»ã€Š<a href="http://c.biancheng.net/view/6749.html">C++ STL vectorå®¹å™¨è¯¦è§£</a>ã€‹ä¸€èŠ‚ï¼Œè¿™é‡Œä¸å†åšé‡å¤èµ˜è¿°ã€‚</p>
</blockquote>
<p>è€Œ C++ 11 æ ‡å‡†ä¸­ï¼Œé™¤äº†å¯ä»¥æ²¿ç”¨å‰é¢ä»‹ç»çš„ç”¨æ³•å¤–ï¼Œè¿˜ä¸º for å¾ªç¯æ·»åŠ äº†ä¸€ç§å…¨æ–°çš„è¯­æ³•æ ¼å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>for (declaration : expression){<br>
//å¾ªç¯ä½“<br>
}</p>
<p>å…¶ä¸­ï¼Œä¸¤ä¸ªå‚æ•°å„è‡ªçš„å«ä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>declarationï¼šè¡¨ç¤ºæ­¤å¤„è¦å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œè¯¥å˜é‡çš„ç±»å‹ä¸ºè¦éå†åºåˆ—ä¸­å­˜å‚¨å…ƒç´ çš„ç±»å‹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒC++ 11 æ ‡å‡†ä¸­ï¼Œdeclarationå‚æ•°å¤„å®šä¹‰çš„å˜é‡ç±»å‹å¯ä»¥ç”¨ auto å…³é”®å­—è¡¨ç¤ºï¼Œè¯¥å…³é”®å­—å¯ä»¥ä½¿ç¼–è¯‘å™¨è‡ªè¡Œæ¨å¯¼è¯¥å˜é‡çš„æ•°æ®ç±»å‹ã€‚</li>
<li>expressionï¼šè¡¨ç¤ºè¦éå†çš„åºåˆ—ï¼Œå¸¸è§çš„å¯ä»¥ä¸ºäº‹å…ˆå®šä¹‰å¥½çš„æ™®é€šæ•°ç»„æˆ–è€…å®¹å™¨ï¼Œè¿˜å¯ä»¥æ˜¯ç”¨ {} å¤§æ‹¬å·åˆå§‹åŒ–çš„åºåˆ—ã€‚</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒåŒ C++ 98/03 ä¸­ for å¾ªç¯çš„è¯­æ³•æ ¼å¼ç›¸æ¯”è¾ƒï¼Œæ­¤æ ¼å¼å¹¶æ²¡æœ‰æ˜ç¡®é™å®š for å¾ªç¯çš„éå†èŒƒå›´ï¼Œè¿™æ˜¯å®ƒä»¬æœ€å¤§çš„åŒºåˆ«ï¼Œå³æ—§æ ¼å¼çš„ for å¾ªç¯å¯ä»¥æŒ‡å®šå¾ªç¯çš„èŒƒå›´ï¼Œè€Œ C++11 æ ‡å‡†å¢åŠ çš„ for å¾ªç¯ï¼Œåªä¼šé€ä¸ªéå† expression å‚æ•°å¤„æŒ‡å®šåºåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚</p>
<p>ä¸‹é¢ç¨‹åºæ¼”ç¤ºäº†å¦‚ä½•ç”¨ C++ 11 æ ‡å‡†ä¸­çš„ for å¾ªç¯éå†å®ä¾‹ä¸€å®šä¹‰çš„ arc æ•°ç»„å’Œ myvector å®¹å™¨ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">char</span> arc[] = <span class="string">&quot;http://c.biancheng.net/cplus/11/&quot;</span>;</span><br><span class="line">    <span class="comment">//forå¾ªç¯éå†æ™®é€šæ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span> ch : arc) &#123;</span><br><span class="line">        cout &lt;&lt; ch;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&#x27;!&#x27;</span> &lt;&lt; endl;</span><br><span class="line">    vector&lt;<span class="type">char</span>&gt;<span class="built_in">myvector</span>(arc, arc + <span class="number">23</span>);</span><br><span class="line">    <span class="comment">//forå¾ªç¯éå† vector å®¹å™¨</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> ch : myvector) &#123;</span><br><span class="line">        cout &lt;&lt; ch;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&#x27;!&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112131415161718</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p><a href="http://c.biancheng.net/cplus/11/">http://c.biancheng.net/cplus/11/</a> !<br>
<a href="http://c.biancheng.net/">http://c.biancheng.net/</a>!</p>
<p>è¿™é‡Œæœ‰ä»¥ä¸‹ 2 ç‚¹éœ€è¦è¯´æ˜ï¼š</p>
<ol>
<li>
<p>ç¨‹åºä¸­åœ¨éå† myvector å®¹å™¨æ—¶ï¼Œå®šä¹‰äº† auto ç±»å‹çš„ ch å˜é‡ï¼Œå½“ç¼–è¯‘å™¨ç¼–è¯‘ç¨‹åºæ—¶ï¼Œä¼šé€šè¿‡ myvector å®¹å™¨ä¸­å­˜å‚¨çš„å…ƒç´ ç±»å‹è‡ªåŠ¨æ¨å¯¼å‡º ch ä¸º char ç±»å‹ã€‚æ³¨æ„ï¼Œè¿™é‡Œçš„ ch ä¸æ˜¯è¿­ä»£å™¨ç±»å‹ï¼Œè€Œè¡¨ç¤ºçš„æ˜¯ myvector å®¹å™¨ä¸­å­˜å‚¨çš„æ¯ä¸ªå…ƒç´ ã€‚</p>
</li>
<li>
<p>ä»”ç»†è§‚å¯Ÿç¨‹åºçš„è¾“å‡ºç»“æœï¼Œå…¶ä¸­ç¬¬ä¸€è¡Œè¾“å‡ºçš„å­—ç¬¦ä¸²å’Œ â€œ!â€ ä¹‹é—´è¿˜è¾“å‡ºæœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œè¿™æ˜¯å› ä¸ºæ–°æ ¼å¼çš„ for å¾ªç¯åœ¨éå†å­—ç¬¦ä¸²åºåˆ—æ—¶ï¼Œä¸åªæ˜¯éå†åˆ°æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œè¿˜ä¼šéå†ä½äºè¯¥å­—ç¬¦ä¸²æœ«å°¾çš„ â€˜\0â€™ï¼ˆå­—ç¬¦ä¸²çš„ç»“æŸæ ‡å¿—ï¼‰ã€‚ä¹‹æ‰€ä»¥ç¬¬äºŒè¡Œè¾“å‡ºçš„å­—ç¬¦ä¸²å’Œ â€œ!â€ ä¹‹é—´æ²¡æœ‰ç©ºæ ¼ï¼Œæ˜¯å› ä¸º myvector å®¹å™¨ä¸­æ²¡æœ‰å­˜å‚¨ â€˜\0â€™ã€‚</p>
</li>
</ol>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæ–°è¯­æ³•æ ¼å¼çš„ for å¾ªç¯è¿˜æ”¯æŒéå†ç”¨<code>&#123; &#125;</code>å¤§æ‹¬å·åˆå§‹åŒ–çš„åˆ—è¡¨ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> num : &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;) &#123;</span><br><span class="line">        cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>1 2 3 4 5</p>
<p>å¦å¤–å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨ä½¿ç”¨æ–°è¯­æ³•æ ¼å¼çš„ for å¾ªç¯éå†æŸä¸ªåºåˆ—æ—¶ï¼Œå¦‚æœéœ€è¦éå†çš„åŒæ—¶ä¿®æ”¹åºåˆ—ä¸­å…ƒç´ çš„å€¼ï¼Œå®ç°æ–¹æ¡ˆæ˜¯åœ¨ declaration å‚æ•°å¤„å®šä¹‰å¼•ç”¨å½¢å¼çš„å˜é‡ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">char</span> arc[] = <span class="string">&quot;abcde&quot;</span>;</span><br><span class="line">    vector&lt;<span class="type">char</span>&gt;<span class="built_in">myvector</span>(arc, arc + <span class="number">5</span>);</span><br><span class="line">    <span class="comment">//forå¾ªç¯éå†å¹¶ä¿®æ”¹å®¹å™¨ä¸­å„ä¸ªå­—ç¬¦çš„å€¼</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;ch : myvector) &#123;</span><br><span class="line">        ch++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//forå¾ªç¯éå†è¾“å‡ºå®¹å™¨ä¸­å„ä¸ªå­—ç¬¦</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> ch : myvector) &#123;</span><br><span class="line">        cout &lt;&lt; ch;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910111213141516</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>bcdef</p>
<p>æ­¤ç¨‹åºä¸­å…ˆåä½¿ç”¨äº† 2 ä¸ªæ–°è¯­æ³•æ ¼å¼çš„ for å¾ªç¯ï¼Œå…¶ä¸­å‰è€…ç”¨äºä¿®æ”¹ myvector å®¹å™¨ä¸­å„ä¸ªå…ƒç´ çš„å€¼ï¼Œåè€…ç”¨äºè¾“å‡ºä¿®æ”¹åçš„ myvector å®¹å™¨ä¸­çš„å„ä¸ªå…ƒç´ ã€‚</p>
<p>æœ‰è¯»è€…å¯èƒ½ä¼šé—®ï¼Œdeclaration å‚æ•°æ—¢å¯ä»¥å®šä¹‰æ™®é€šå½¢å¼çš„å˜é‡ï¼Œä¹Ÿå¯ä»¥å®šä¹‰å¼•ç”¨å½¢å¼çš„å˜é‡ï¼Œåº”è¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿå…¶å®å¾ˆç®€å•ï¼Œå¦‚æœéœ€è¦åœ¨éå†åºåˆ—çš„è¿‡ç¨‹ä¸­ä¿®æ”¹å™¨å†…éƒ¨å…ƒç´ çš„å€¼ï¼Œå°±å¿…é¡»å®šä¹‰å¼•ç”¨å½¢å¼çš„å˜é‡ï¼›åä¹‹ï¼Œå»ºè®®å®šä¹‰<code>const &amp;</code>ï¼ˆå¸¸å¼•ç”¨ï¼‰å½¢å¼çš„å˜é‡ï¼ˆé¿å…äº†åº•å±‚å¤åˆ¶å˜é‡çš„è¿‡ç¨‹ï¼Œæ•ˆç‡æ›´é«˜ï¼‰ï¼Œä¹Ÿå¯ä»¥å®šä¹‰æ™®é€šå˜é‡ã€‚</p>
<h2 id="c-11-forå¾ªç¯ä½¿ç”¨æ³¨æ„äº‹é¡¹"><a class="header-anchor" href="#c-11-forå¾ªç¯ä½¿ç”¨æ³¨æ„äº‹é¡¹">ğŸŒ³</a>C++11 forå¾ªç¯ä½¿ç”¨æ³¨æ„äº‹é¡¹</h2>
<p>ã€Š<a href="http://c.biancheng.net/view/7759.html">C++11 forå¾ªç¯</a>ã€‹ä¸€èŠ‚å·²ç»è¯¦ç»†ä»‹ç»äº† C++11 æ ‡å‡†ä¸­ for å¾ªç¯çš„åŸºæœ¬ç”¨æ³•ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæœ¬èŠ‚å°†ä»‹ç»ä¸€äº› for å¾ªç¯çš„ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼Œå¸®åŠ©è¯»è€…æ›´å‡†ç¡®é«˜æ•ˆåœ°ä½¿ç”¨åŸºäºèŒƒå›´çš„ for å¾ªç¯ã€‚</p>
<ol>
<li>é¦–å…ˆéœ€è¦æ˜ç¡®çš„ä¸€ç‚¹æ˜¯ï¼Œå½“ä½¿ç”¨ for å¾ªç¯éå†æŸä¸ªåºåˆ—æ—¶ï¼Œæ— è®ºè¯¥åºåˆ—æ˜¯æ™®é€šæ•°ç»„ã€å®¹å™¨è¿˜æ˜¯ç”¨<code>&#123; &#125;</code>å¤§æ‹¬å·åŒ…è£¹çš„åˆå§‹åŒ–åˆ—è¡¨ï¼Œéå†åºåˆ—çš„å˜é‡éƒ½è¡¨ç¤ºçš„æ˜¯å½“å‰åºåˆ—ä¸­çš„å„ä¸ªå…ƒç´ ã€‚</li>
</ol>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//forå¾ªç¯éå†åˆå§‹åŒ–åˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> ch : &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;) &#123;</span><br><span class="line">        cout &lt;&lt; ch;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//forå¾ªç¯éå†æ™®é€šæ•°ç»„</span></span><br><span class="line">    <span class="type">char</span> arc[] = <span class="string">&quot;http://c.biancheng.net/cplus/11/&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span> ch : arc) &#123;</span><br><span class="line">        cout &lt;&lt; ch;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//forå¾ªç¯éå† vector å®¹å™¨</span></span><br><span class="line">    vector&lt;<span class="type">char</span>&gt;<span class="built_in">myvector</span>(arc, arc + <span class="number">23</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> ch : myvector) &#123;</span><br><span class="line">        cout &lt;&lt; ch;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910111213141516171819202122</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>12345<br>
<a href="http://c.biancheng.net/cplus/11/">http://c.biancheng.net/cplus/11/</a><br>
<a href="http://c.biancheng.net/">http://c.biancheng.net/</a></p>
<p>ä¸Šé¢ç¨‹åºæ¼”ç¤ºäº†ç”¨ for å¾ªç¯éå† 3 ç§åºåˆ—çš„è¿‡ç¨‹ï¼Œå…¶ä¸­å‰ä¸¤ç§æƒ…å†µå¾ˆå®¹æ˜“ç†è§£ï¼Œä½†å¯¹äºç”¨åŸºäºèŒƒå›´çš„ for å¾ªç¯éå†å®¹å™¨ä¸­çš„å…ƒç´ ï¼Œå¾ˆå¤šè¯»è€…ä¼šå°† ch è¯¯è®¤ä¸ºæŒ‡å‘å„ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ï¼Œå…¶å®ä¸ç„¶ï¼Œå®ƒè¡¨ç¤ºçš„ä»æ˜¯å®¹å™¨ä¸­çš„å„ä¸ªå…ƒç´ ã€‚</p>
<p>ä¸ºäº†åŠ æ·±è¯»è€…å¯¹éå†å®¹å™¨çš„ç†è§£ï¼Œä¸‹é¢ç¨‹åºä»¥ map å®¹å™¨ä¸ºä¾‹ï¼Œå†ä¸¾ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    map&lt;string, string&gt;mymap&#123; &#123;<span class="string">&quot;C++11&quot;</span>,<span class="string">&quot;http://c.biancheng.net/cplus/11/&quot;</span>&#125;,</span><br><span class="line">                              &#123;<span class="string">&quot;Python&quot;</span>,<span class="string">&quot;http://c.biancheng.net/python/&quot;</span>&#125;,</span><br><span class="line">                              &#123;<span class="string">&quot;Java&quot;</span>,<span class="string">&quot;http://c.biancheng.net/java/&quot;</span>&#125; &#125;;</span><br><span class="line">    <span class="keyword">for</span> (pair&lt;string,string&gt; ch : mymap) &#123;</span><br><span class="line">        cout &lt;&lt; ch.first &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; ch.second &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>C++11 <a href="http://c.biancheng.net/cplus/11/">http://c.biancheng.net/cplus/11/</a><br>
Java <a href="http://c.biancheng.net/java/">http://c.biancheng.net/java/</a><br>
Python <a href="http://c.biancheng.net/python/">http://c.biancheng.net/python/</a></p>
<p>è¦çŸ¥é“ï¼Œmap å®¹å™¨ä¸­å­˜å‚¨çš„ä¸å†æ˜¯æ™®é€šæ•°æ®ç±»å‹çš„æ•°æ®ï¼Œè€Œæ˜¯ pair ç±»å‹çš„æ•°æ®ï¼Œå› æ­¤ç¨‹åºä¸­åœ¨ä½¿ç”¨åŸºäºèŒƒå›´çš„ for å¾ªç¯éå† map å®¹å™¨æ—¶ï¼Œå®šä¹‰çš„æ˜¯ pair ç±»å‹çš„å˜é‡ã€‚</p>
<p>å€¼å¾—åˆå­¦è€…æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼ŒåŸºäºèŒƒå›´çš„ for å¾ªç¯ä¹Ÿå¯ä»¥ç›´æ¥éå†æŸä¸ªå­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">char</span> ch : <span class="string">&quot;http://c.biancheng.net/cplus/11/&quot;</span>) &#123;</span><br><span class="line">    cout &lt;&lt; ch;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<p>å‰é¢æåˆ°ï¼Œæ™®é€šæ•°ç»„å¯ä»¥ä½œä¸ºè¢«éå†çš„åºåˆ—ã€‚æ‹¿æ­¤ç¨‹åºä¸­çš„å­—ç¬¦ä¸²æ¥è¯´ï¼Œå…¶æ•°æ®ç±»å‹ä¸º<code>const char[33]</code>ï¼Œå³åœ¨ç¼–è¯‘å™¨çœ‹æ¥å­—ç¬¦ä¸²å°±æ˜¯ä¸€ä¸ªæ™®é€šæ•°ç»„ï¼Œå› æ­¤å®Œå…¨å¯ä»¥ç›´æ¥ä½œä¸ºè¢«éå†çš„åºåˆ—ã€‚</p>
<blockquote>
<p>å½“ç„¶ï¼ŒåŸºäºèŒƒå›´çš„ for å¾ªç¯ä¹Ÿå¯ä»¥éå† string ç±»å‹çš„å­—ç¬¦ä¸²ï¼Œè¿™ç§æƒ…å†µä¸‹å†’å·å‰å®šä¹‰ char ç±»å‹çš„å˜é‡å³å¯ã€‚</p>
</blockquote>
<ol start="2">
<li>æ€»çš„æ¥è¯´ï¼ŒåŸºäºèŒƒå›´çš„ for å¾ªç¯å¯ä»¥éå†æ™®é€šæ•°ç»„ã€stringå­—ç¬¦ä¸²ã€å®¹å™¨ä»¥åŠåˆå§‹åŒ–åˆ—è¡¨ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œfor å¾ªç¯å†’å·åè¿˜å¯ä»¥æ”¾ç½®è¿”å› string å­—ç¬¦ä¸²ä»¥åŠå®¹å™¨å¯¹è±¡çš„å‡½æ•°ï¼Œæ¯”å¦‚ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">string str = <span class="string">&quot;http://c.biancheng.net/cplus/11/&quot;</span>;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; myvector = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span> &#125;;</span><br><span class="line"><span class="function">string <span class="title">retStr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">retVector</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> myvector;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//éå†å‡½æ•°è¿”å›çš„ string å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span> ch : <span class="built_in">retStr</span>()) &#123;</span><br><span class="line">        cout &lt;&lt; ch;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//éå†å‡½æ•°è¿”å›çš„ vector å®¹å™¨</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> num : <span class="built_in">retVector</span>()) &#123;</span><br><span class="line">        cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112131415161718192021222324</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p><a href="http://c.biancheng.net/cplus/11/">http://c.biancheng.net/cplus/11/</a><br>
1 2 3 4 5</p>
<p>æ³¨æ„ï¼ŒåŸºäºèŒƒå›´çš„ for å¾ªç¯ä¸æ”¯æŒéå†å‡½æ•°è¿”å›çš„ä»¥æŒ‡é’ˆå½¢å¼è¡¨ç¤ºçš„æ•°ç»„ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é”™è¯¯ç¤ºä¾‹</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">char</span> str[] = <span class="string">&quot;http://c.biancheng.net/cplus/11/&quot;</span>;</span><br><span class="line"><span class="function"><span class="type">char</span>* <span class="title">retStr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span> ch : <span class="built_in">retStr</span>()) <span class="comment">//ç›´æ¥æŠ¥é”™</span></span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; ch;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314</span></span><br></pre></td></tr></table></figure>
<p>åŸå› å¾ˆç®€å•ï¼Œæ­¤æ ¼å¼çš„ for å¾ªç¯åªèƒ½éå†æœ‰æ˜ç¡®èŒƒå›´çš„ä¸€ç»„æ•°æ®ï¼Œä¸Šé¢ç¨‹åºä¸­ retStr() å‡½æ•°è¿”å›çš„æ˜¯æŒ‡é’ˆå˜é‡ï¼Œéå†èŒƒå›´å¹¶æœªæ˜ç¡®æŒ‡æ˜ï¼Œæ‰€ä»¥ç¼–è¯‘å¤±è´¥ã€‚</p>
<ol start="3">
<li>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå½“åŸºäºèŒƒå›´çš„ for å¾ªç¯éå†çš„æ˜¯æŸå‡½æ•°è¿”å›çš„ string å¯¹è±¡æˆ–è€…å®¹å™¨æ—¶ï¼Œæ•´ä¸ªéå†è¿‡ç¨‹ä¸­ï¼Œå‡½æ•°åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</li>
</ol>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">string str= <span class="string">&quot;http://c.biancheng.net/cplus/11/&quot;</span>;</span><br><span class="line"><span class="function">string <span class="title">retStr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;retStr:&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//éå†å‡½æ•°è¿”å›çš„ string å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span> ch : <span class="built_in">retStr</span>()) &#123;</span><br><span class="line">        cout &lt;&lt; ch;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112131415</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>retStr:<br>
<a href="http://c.biancheng.net/cplus/11/">http://c.biancheng.net/cplus/11/</a></p>
<p>å€ŸåŠ©æ‰§è¡Œç»“æœä¸éš¾åˆ†æå‡ºï¼Œæ•´ä¸ª for å¾ªç¯éå† str å­—ç¬¦ä¸²å¯¹è±¡çš„è¿‡ç¨‹ä¸­ï¼ŒretStr() å‡½æ•°ä»…åœ¨éå†å¼€å§‹å‰æ‰§è¡Œäº† 1 æ¬¡ã€‚</p>
<ol start="4">
<li>
<p>ç³»ç»Ÿå­¦è¿‡ STL æ ‡å‡†åº“çš„è¯»è€…åº”è¯¥çŸ¥é“ï¼ŒåŸºäºå…³è”å¼å®¹å™¨ï¼ˆåŒ…æ‹¬å“ˆå¸Œå®¹å™¨ï¼‰åº•å±‚å­˜å‚¨æœºåˆ¶çš„é™åˆ¶ï¼š</p>
</li>
<li>
<p>ä¸å…è®¸ä¿®æ”¹ mapã€unordered_mapã€multimap ä»¥åŠ unordered_multimap å®¹å™¨å­˜å‚¨çš„é”®çš„å€¼ï¼›</p>
</li>
<li>
<p>ä¸å…è®¸ä¿®æ”¹ setã€unordered_setã€multiset ä»¥åŠ unordered_multiset å®¹å™¨ä¸­å­˜å‚¨çš„å…ƒç´ çš„å€¼ã€‚</p>
</li>
</ol>
<blockquote>
<p>å…³äºä»¥ä¸Šå„ä¸ªå®¹å™¨çš„å…·ä½“ç”¨æ³•ï¼Œè¯»è€…å¯çŒ›å‡»ã€Š<a href="http://c.biancheng.net/stl/">C++ STLæ•™ç¨‹</a>ã€‹è¿›è¡Œç³»ç»Ÿå­¦ä¹ ã€‚</p>
</blockquote>
<p>å› æ­¤ï¼Œå½“ä½¿ç”¨åŸºäºèŒƒå›´çš„ for å¾ªç¯éå†æ­¤ç±»å‹å®¹å™¨æ—¶ï¼Œåˆ‡å‹¿ä¿®æ”¹å®¹å™¨ä¸­ä¸å…è®¸è¢«ä¿®æ”¹çš„æ•°æ®éƒ¨åˆ†ï¼Œå¦åˆ™ä¼šå¯¼è‡´ç¨‹åºçš„æ‰§è¡Œå‡ºç°å„ç§ Bugã€‚</p>
<p>å¦å¤–ï¼ŒåŸºäºèŒƒå›´çš„ for å¾ªç¯å®Œæˆå¯¹å®¹å™¨çš„éå†ï¼Œå…¶åº•å±‚ä¹Ÿæ˜¯å€ŸåŠ©å®¹å™¨çš„è¿­ä»£å™¨å®ç°çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt;arr = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> val : arr)</span><br><span class="line">    &#123;</span><br><span class="line">        std::cout &lt;&lt; val &lt;&lt; std::endl;</span><br><span class="line">        arr.<span class="built_in">push_back</span>(<span class="number">10</span>); <span class="comment">//å‘å®¹å™¨ä¸­æ·»åŠ å…ƒç´ </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœå¯èƒ½ä¸ºï¼ˆè¾“å‡ºç»“æœä¸å”¯ä¸€ï¼‰ï¼š</p>
<p>1<br>
-572662307<br>
-572662307<br>
4<br>
5</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œç¨‹åºçš„æ‰§è¡Œç»“æœå¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚å°±æ˜¯å› ä¸ºåœ¨ for å¾ªç¯éå† arr å®¹å™¨çš„åŒæ—¶å‘è¯¥å®¹å™¨å°¾éƒ¨æ·»åŠ äº†æ–°çš„å…ƒç´ ï¼ˆå¯¹ arr å®¹å™¨è¿›è¡Œäº†æ‰©å¢ï¼‰ï¼Œè‡´ä½¿éå†å®¹å™¨æ‰€ä½¿ç”¨çš„è¿­ä»£å™¨å¤±æ•ˆï¼Œæ•´ä¸ªéå†è¿‡ç¨‹å‡ºç°é”™è¯¯ã€‚</p>
<blockquote>
<p>å¦‚æœè¯»è€…æƒ³è¦å½»åº•ææ¸…æ¥šç¨‹åºæ‰§è¡Œå¤±è´¥çš„åŸå› ï¼Œè¯»äº†è§£ vector å®¹å™¨çš„åº•å±‚å­˜å‚¨æœºåˆ¶ï¼Œå¯é˜…è¯»ã€Š<a href="http://c.biancheng.net/view/vip_7710.html">C++ vectorå®¹å™¨åº•å±‚å®ç°æœºåˆ¶</a>ã€‹ä¸€æ–‡ã€‚</p>
</blockquote>
<p>å› æ­¤ï¼Œåœ¨ä½¿ç”¨åŸºäºèŒƒå›´çš„ for å¾ªç¯éå†å®¹å™¨æ—¶ï¼Œåº”é¿å…åœ¨å¾ªç¯ä½“ä¸­ä¿®æ”¹å®¹å™¨å­˜å‚¨å…ƒç´ çš„ä¸ªæ•°ã€‚</p>
<h2 id="c-11-constexprï¼šéªŒè¯æ˜¯å¦ä¸ºå¸¸é‡è¡¨è¾¾å¼-é•¿ç¯‡ç¥æ–‡"><a class="header-anchor" href="#c-11-constexprï¼šéªŒè¯æ˜¯å¦ä¸ºå¸¸é‡è¡¨è¾¾å¼-é•¿ç¯‡ç¥æ–‡">ğŸŒ³</a>C++11 constexprï¼šéªŒè¯æ˜¯å¦ä¸ºå¸¸é‡è¡¨è¾¾å¼ï¼ˆé•¿ç¯‡ç¥æ–‡ï¼‰</h2>
<p>constexpr æ˜¯ C++ 11 æ ‡å‡†æ–°å¼•å…¥çš„å…³é”®å­—ï¼Œä¸è¿‡åœ¨è®²è§£å…¶å…·ä½“ç”¨æ³•å’ŒåŠŸèƒ½ä¹‹å‰ï¼Œè¯»è€…éœ€è¦å…ˆææ¸…æ¥š C++ å¸¸é‡è¡¨è¾¾å¼çš„å«ä¹‰ã€‚</p>
<p>æ‰€è°“å¸¸é‡è¡¨è¾¾å¼ï¼ŒæŒ‡çš„å°±æ˜¯ç”±å¤šä¸ªï¼ˆâ‰¥1ï¼‰å¸¸é‡ç»„æˆçš„è¡¨è¾¾å¼ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœè¡¨è¾¾å¼ä¸­çš„æˆå‘˜éƒ½æ˜¯å¸¸é‡ï¼Œé‚£ä¹ˆè¯¥è¡¨è¾¾å¼å°±æ˜¯ä¸€ä¸ªå¸¸é‡è¡¨è¾¾å¼ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œå¸¸é‡è¡¨è¾¾å¼ä¸€æ—¦ç¡®å®šï¼Œå…¶å€¼å°†æ— æ³•ä¿®æ”¹ã€‚</p>
<p>å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°å¸¸é‡è¡¨è¾¾å¼ã€‚ä»¥å®šä¹‰æ•°ç»„ä¸ºä¾‹ï¼Œæ•°ç»„çš„é•¿åº¦å°±å¿…é¡»æ˜¯ä¸€ä¸ªå¸¸é‡è¡¨è¾¾å¼ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1)</span></span><br><span class="line"><span class="type">int</span> url[<span class="number">10</span>];<span class="comment">//æ­£ç¡®</span></span><br><span class="line"><span class="comment">// 2)</span></span><br><span class="line"><span class="type">int</span> url[<span class="number">6</span> + <span class="number">4</span>];<span class="comment">//æ­£ç¡®</span></span><br><span class="line"><span class="comment">// 3)</span></span><br><span class="line"><span class="type">int</span> length = <span class="number">6</span>;</span><br><span class="line"><span class="type">int</span> url[length];<span class="comment">//é”™è¯¯ï¼Œlengthæ˜¯å˜é‡</span></span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç æ¼”ç¤ºäº† 3 ç§å®šä¹‰ url æ•°ç»„çš„æ–¹å¼ï¼Œå…¶ä¸­ç¬¬ 1ã€2 ç§å®šä¹‰ url æ•°ç»„æ—¶ï¼Œé•¿åº¦åˆ†åˆ«ä¸º 10 å’Œ 6+4ï¼Œæ˜¾ç„¶å®ƒä»¬éƒ½æ˜¯å¸¸é‡è¡¨è¾¾å¼ï¼Œå¯ä»¥ç”¨äºè¡¨ç¤ºæ•°ç»„çš„é•¿åº¦ï¼›ç¬¬ 3 ç§ url æ•°ç»„çš„é•¿åº¦ä¸º lengthï¼Œå®ƒæ˜¯å˜é‡è€Œéå¸¸é‡ï¼Œå› æ­¤ä¸æ˜¯ä¸€ä¸ªå¸¸é‡è¡¨è¾¾å¼ï¼Œæ— æ³•ç”¨äºè¡¨ç¤ºæ•°ç»„çš„é•¿åº¦ã€‚</p>
<blockquote>
<p>å¸¸é‡è¡¨è¾¾å¼çš„åº”ç”¨åœºæ™¯è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚åŒ¿åæšä¸¾ã€switch-case ç»“æ„ä¸­çš„ case è¡¨è¾¾å¼ç­‰ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯è‡ªè¡Œç¼–ç æµ‹è¯•ï¼Œè¿™é‡Œä¸å†è¿‡å¤šä¸¾ä¾‹ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬çŸ¥é“ï¼ŒC++ ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹å¤§è‡´è¦ç»å†ç¼–è¯‘ã€é“¾æ¥ã€è¿è¡Œè¿™ 3 ä¸ªé˜¶æ®µã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¸¸é‡è¡¨è¾¾å¼å’Œéå¸¸é‡è¡¨è¾¾å¼çš„è®¡ç®—æ—¶æœºä¸åŒï¼Œéå¸¸é‡è¡¨è¾¾å¼åªèƒ½åœ¨ç¨‹åºè¿è¡Œé˜¶æ®µè®¡ç®—å‡ºç»“æœï¼›è€Œå¸¸é‡è¡¨è¾¾å¼çš„è®¡ç®—å¾€å¾€å‘ç”Ÿåœ¨ç¨‹åºçš„ç¼–è¯‘é˜¶æ®µï¼Œè¿™å¯ä»¥æå¤§æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ï¼Œå› ä¸ºè¡¨è¾¾å¼åªéœ€è¦åœ¨ç¼–è¯‘é˜¶æ®µè®¡ç®—ä¸€æ¬¡ï¼ŒèŠ‚çœäº†æ¯æ¬¡ç¨‹åºè¿è¡Œæ—¶éƒ½éœ€è¦è®¡ç®—ä¸€æ¬¡çš„æ—¶é—´ã€‚</p>
<p>å¯¹äºç”¨ C++ ç¼–å†™çš„ç¨‹åºï¼Œæ€§èƒ½å¾€å¾€æ˜¯æ°¸æ’çš„è¿½æ±‚ã€‚é‚£ä¹ˆåœ¨å®é™…å¼€å‘ä¸­ï¼Œå¦‚ä½•æ‰èƒ½åˆ¤å®šä¸€ä¸ªè¡¨è¾¾å¼æ˜¯å¦ä¸ºå¸¸é‡è¡¨è¾¾å¼ï¼Œè¿›è€Œè·å¾—åœ¨ç¼–è¯‘é˜¶æ®µå³å¯æ‰§è¡Œçš„â€œç‰¹æƒâ€å‘¢ï¼Ÿé™¤äº†äººä¸ºåˆ¤å®šå¤–ï¼ŒC++11 æ ‡å‡†è¿˜æä¾›æœ‰ constexpr å…³é”®å­—ã€‚</p>
<p>constexpr å…³é”®å­—çš„åŠŸèƒ½æ˜¯ä½¿æŒ‡å®šçš„å¸¸é‡è¡¨è¾¾å¼è·å¾—åœ¨ç¨‹åºç¼–è¯‘é˜¶æ®µè®¡ç®—å‡ºç»“æœçš„èƒ½åŠ›ï¼Œè€Œä¸å¿…ç­‰åˆ°ç¨‹åºè¿è¡Œé˜¶æ®µã€‚C++ 11 æ ‡å‡†ä¸­ï¼Œconstexpr å¯ç”¨äºä¿®é¥°æ™®é€šå˜é‡ã€å‡½æ•°ï¼ˆåŒ…æ‹¬æ¨¡æ¿å‡½æ•°ï¼‰ä»¥åŠç±»çš„æ„é€ å‡½æ•°ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼Œè·å¾—åœ¨ç¼–è¯‘é˜¶æ®µè®¡ç®—å‡ºç»“æœçš„èƒ½åŠ›ï¼Œå¹¶ä¸ä»£è¡¨ constexpr ä¿®é¥°çš„è¡¨è¾¾å¼ä¸€å®šä¼šåœ¨ç¨‹åºç¼–è¯‘é˜¶æ®µè¢«æ‰§è¡Œï¼Œå…·ä½“çš„è®¡ç®—æ—¶æœºè¿˜æ˜¯ç¼–è¯‘å™¨è¯´äº†ç®—ã€‚</p>
</blockquote>
<h3 id="constexprä¿®é¥°æ™®é€šå˜é‡"><a class="header-anchor" href="#constexprä¿®é¥°æ™®é€šå˜é‡">ğŸŒ³</a>constexprä¿®é¥°æ™®é€šå˜é‡</h3>
<p>C++11 æ ‡å‡†ä¸­ï¼Œå®šä¹‰å˜é‡æ—¶å¯ä»¥ç”¨ constexpr ä¿®é¥°ï¼Œä»è€Œä½¿è¯¥å˜é‡è·å¾—åœ¨ç¼–è¯‘é˜¶æ®µå³å¯è®¡ç®—å‡ºç»“æœçš„èƒ½åŠ›ã€‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä½¿ç”¨ constexpr ä¿®æ”¹æ™®é€šå˜é‡æ—¶ï¼Œå˜é‡å¿…é¡»ç»è¿‡åˆå§‹åŒ–ä¸”åˆå§‹å€¼å¿…é¡»æ˜¯ä¸€ä¸ªå¸¸é‡è¡¨è¾¾å¼ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">constexpr</span> <span class="type">int</span> num = <span class="number">1</span> + <span class="number">2</span> + <span class="number">3</span>;</span><br><span class="line">    <span class="type">int</span> url[num] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">    couts&lt;&lt; url[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>2</p>
<blockquote>
<p>è¯»è€…å¯å°è¯•å°† constexpr åˆ é™¤ï¼Œæ­¤æ—¶ç¼–è¯‘å™¨ä¼šæç¤ºâ€œurl[num] å®šä¹‰ä¸­ num ä¸å¯ç”¨ä½œå¸¸é‡â€ã€‚</p>
</blockquote>
<p>å¯ä»¥çœ‹åˆ°ï¼Œç¨‹åºç¬¬ 6 è¡Œä½¿ç”¨ constexpr ä¿®é¥° num å˜é‡ï¼ŒåŒæ—¶å°† â€œ1+2+3â€ è¿™ä¸ªå¸¸é‡è¡¨è¾¾å¼èµ‹å€¼ç»™ numã€‚ç”±æ­¤ï¼Œç¼–è¯‘å™¨å°±å¯ä»¥åœ¨ç¼–è¯‘æ—¶æœŸå¯¹ num è¿™ä¸ªè¡¨è¾¾å¼è¿›è¡Œè®¡ç®—ï¼Œå› ä¸º num å¯ä»¥ä½œä¸ºå®šä¹‰æ•°ç»„æ—¶çš„é•¿åº¦ã€‚</p>
<p>æœ‰è¯»è€…å¯èƒ½å‘ç°ï¼Œå°†æ­¤ç¤ºä¾‹ç¨‹åºä¸­çš„ constexpr ç”¨ const å…³é”®å­—æ›¿æ¢ä¹Ÿå¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œè¿™æ˜¯å› ä¸º num çš„å®šä¹‰åŒæ—¶æ»¡è¶³â€œnum æ˜¯ const å¸¸é‡ä¸”ä½¿ç”¨å¸¸é‡è¡¨è¾¾å¼ä¸ºå…¶åˆå§‹åŒ–â€è¿™ 2 ä¸ªæ¡ä»¶ï¼Œç”±æ­¤ç¼–è¯‘å™¨ä¼šè®¤å®š num æ˜¯ä¸€ä¸ªå¸¸é‡è¡¨è¾¾å¼ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼Œconst å’Œ constexpr å¹¶ä¸ç›¸åŒï¼Œå…³äºå®ƒä»¬çš„åŒºåˆ«ï¼Œæˆ‘ä»¬ä¼šåœ¨ä¸‹ä¸€èŠ‚åšè¯¦ç»†è®²è§£ã€‚</p>
</blockquote>
<p>å¦å¤–éœ€è¦é‡ç‚¹æå‡ºçš„æ˜¯ï¼Œå½“å¸¸é‡è¡¨è¾¾å¼ä¸­åŒ…å«æµ®ç‚¹æ•°æ—¶ï¼Œè€ƒè™‘åˆ°ç¨‹åºç¼–è¯‘å’Œè¿è¡Œæ‰€åœ¨çš„ç³»ç»Ÿç¯å¢ƒå¯èƒ½ä¸åŒï¼Œå¸¸é‡è¡¨è¾¾å¼åœ¨ç¼–è¯‘é˜¶æ®µå’Œè¿è¡Œé˜¶æ®µè®¡ç®—å‡ºçš„ç»“æœç²¾åº¦å¾ˆå¯èƒ½ä¼šå—åˆ°å½±å“ï¼Œå› æ­¤ C++11 æ ‡å‡†è§„å®šï¼Œæµ®ç‚¹å¸¸é‡è¡¨è¾¾å¼åœ¨ç¼–è¯‘é˜¶æ®µè®¡ç®—çš„ç²¾åº¦è¦è‡³å°‘ç­‰äºï¼ˆæˆ–è€…é«˜äºï¼‰è¿è¡Œé˜¶æ®µè®¡ç®—å‡ºçš„ç²¾åº¦ã€‚</p>
<h3 id="constexprä¿®é¥°å‡½æ•°"><a class="header-anchor" href="#constexprä¿®é¥°å‡½æ•°">ğŸŒ³</a>constexprä¿®é¥°å‡½æ•°</h3>
<p>constexpr è¿˜å¯ä»¥ç”¨äºä¿®é¥°å‡½æ•°çš„è¿”å›å€¼ï¼Œè¿™æ ·çš„å‡½æ•°åˆç§°ä¸ºâ€œå¸¸é‡è¡¨è¾¾å¼å‡½æ•°â€ã€‚</p>
<p>æ³¨æ„ï¼Œconstexpr å¹¶éå¯ä»¥ä¿®æ”¹ä»»æ„å‡½æ•°çš„è¿”å›å€¼ã€‚æ¢å¥è¯è¯´ï¼Œä¸€ä¸ªå‡½æ•°è¦æƒ³æˆä¸ºå¸¸é‡è¡¨è¾¾å¼å‡½æ•°ï¼Œå¿…é¡»æ»¡è¶³å¦‚ä¸‹ 4 ä¸ªæ¡ä»¶ã€‚</p>
<ol>
<li>æ•´ä¸ªå‡½æ•°çš„å‡½æ•°ä½“ä¸­ï¼Œé™¤äº†å¯ä»¥åŒ…å« using æŒ‡ä»¤ã€typedef è¯­å¥ä»¥åŠ static_assert æ–­è¨€å¤–ï¼Œåªèƒ½åŒ…å«ä¸€æ¡ return è¿”å›è¯­å¥ã€‚</li>
</ol>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="type">int</span> <span class="title">display</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> ret = <span class="number">1</span> + <span class="number">2</span> + x;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯æ— æ³•é€šè¿‡ç¼–è¯‘çš„ï¼Œå› ä¸ºè¯¥å‡½æ•°çš„è¿”å›å€¼ç”¨ constexpr ä¿®é¥°ï¼Œä½†å‡½æ•°å†…éƒ¨åŒ…å«å¤šæ¡è¯­å¥ã€‚</p>
<p>å¦‚ä¸‹æ˜¯æ­£ç¡®çš„å®šä¹‰ display() å¸¸é‡è¡¨è¾¾å¼å‡½æ•°çš„å†™æ³•ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="type">int</span> <span class="title">display</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//å¯ä»¥æ·»åŠ  using æ‰§è¡Œã€typedef è¯­å¥ä»¥åŠ static_assert æ–­è¨€</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> + <span class="number">2</span> + x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œdisplay() å‡½æ•°çš„è¿”å›å€¼æ˜¯ç”¨ constexpr ä¿®é¥°çš„ int ç±»å‹å€¼ï¼Œä¸”è¯¥å‡½æ•°çš„å‡½æ•°ä½“ä¸­åªåŒ…å«ä¸€ä¸ª return è¯­å¥ã€‚</p>
<ol start="2">
<li>è¯¥å‡½æ•°å¿…é¡»æœ‰è¿”å›å€¼ï¼Œå³å‡½æ•°çš„è¿”å›å€¼ç±»å‹ä¸èƒ½æ˜¯ voidã€‚</li>
</ol>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="type">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//å‡½æ•°ä½“</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<p>åƒä¸Šé¢è¿™æ ·å®šä¹‰çš„è¿”å›å€¼ç±»å‹ä¸º void çš„å‡½æ•°ï¼Œä¸å±äºå¸¸é‡è¡¨è¾¾å¼å‡½æ•°ã€‚åŸå› å¾ˆç®€å•ï¼Œå› ä¸ºé€šè¿‡ç±»ä¼¼çš„å‡½æ•°æ ¹æœ¬æ— æ³•è·å¾—ä¸€ä¸ªå¸¸é‡ã€‚</p>
<ol start="3">
<li>å‡½æ•°åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œå¿…é¡»æœ‰å¯¹åº”çš„å®šä¹‰è¯­å¥ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå‡½æ•°çš„ä½¿ç”¨åˆ†ä¸ºâ€œå£°æ˜â€å’Œâ€œå®šä¹‰â€ä¸¤éƒ¨åˆ†ï¼Œæ™®é€šçš„å‡½æ•°è°ƒç”¨åªéœ€è¦æå‰å†™å¥½è¯¥å‡½æ•°çš„å£°æ˜éƒ¨åˆ†å³å¯ï¼ˆå‡½æ•°çš„å®šä¹‰éƒ¨åˆ†å¯ä»¥æ”¾åœ¨è°ƒç”¨ä½ç½®ä¹‹åç”šè‡³å…¶å®ƒæ–‡ä»¶ä¸­ï¼‰ï¼Œä½†å¸¸é‡è¡¨è¾¾å¼å‡½æ•°åœ¨ä½¿ç”¨å‰ï¼Œå¿…é¡»è¦æœ‰è¯¥å‡½æ•°çš„å®šä¹‰ã€‚</li>
</ol>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//æ™®é€šå‡½æ•°çš„å£°æ˜</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">noconst_dis</span><span class="params">(<span class="type">int</span> x)</span></span>;</span><br><span class="line"><span class="comment">//å¸¸é‡è¡¨è¾¾å¼å‡½æ•°çš„å£°æ˜</span></span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="type">int</span> <span class="title">display</span><span class="params">(<span class="type">int</span> x)</span></span>;</span><br><span class="line"><span class="comment">//å¸¸é‡è¡¨è¾¾å¼å‡½æ•°çš„å®šä¹‰</span></span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="type">int</span> <span class="title">display</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> + <span class="number">2</span> + x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//è°ƒç”¨å¸¸é‡è¡¨è¾¾å¼å‡½æ•°</span></span><br><span class="line">    <span class="type">int</span> a[<span class="built_in">display</span>(<span class="number">3</span>)] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span> &#125;;</span><br><span class="line">    cout &lt;&lt; a[<span class="number">2</span>] &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//è°ƒç”¨æ™®é€šå‡½æ•°</span></span><br><span class="line">    cout &lt;&lt; <span class="built_in">noconst_dis</span>(<span class="number">3</span>) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ™®é€šå‡½æ•°çš„å®šä¹‰</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">noconst_dis</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> + <span class="number">2</span> + x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314151617181920212223</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>3<br>
6</p>
<blockquote>
<p>è¯»è€…å¯è‡ªè¡Œå°† display() å¸¸é‡è¡¨è¾¾å¼å‡½æ•°çš„å®šä¹‰è°ƒæ•´åˆ° main() å‡½æ•°ä¹‹åï¼ŒæŸ¥çœ‹ç¼–è¯‘å™¨çš„æŠ¥é”™ä¿¡æ¯ã€‚</p>
</blockquote>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ™®é€šå‡½æ•°åœ¨è°ƒç”¨æ—¶ï¼Œåªéœ€è¦ä¿è¯è°ƒç”¨ä½ç½®ä¹‹å‰æœ‰ç›¸åº”çš„å£°æ˜å³å¯ï¼›è€Œå¸¸é‡è¡¨è¾¾å¼å‡½æ•°åˆ™ä¸åŒï¼Œè°ƒç”¨ä½ç½®ä¹‹å‰å¿…é¡»è¦æœ‰è¯¥å‡½æ•°çš„å®šä¹‰ï¼Œå¦åˆ™ä¼šå¯¼è‡´ç¨‹åºç¼–è¯‘å¤±è´¥ã€‚</p>
<ol start="4">
<li>return è¿”å›çš„è¡¨è¾¾å¼å¿…é¡»æ˜¯å¸¸é‡è¡¨è¾¾å¼ï¼Œä¸¾ä¸ªä¾‹å­ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> num = <span class="number">3</span>;</span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="type">int</span> <span class="title">display</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num + x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//è°ƒç”¨å¸¸é‡è¡¨è¾¾å¼å‡½æ•°</span></span><br><span class="line">    <span class="type">int</span> a[<span class="built_in">display</span>(<span class="number">3</span>)] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span> &#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112</span></span><br></pre></td></tr></table></figure>
<p>è¯¥ç¨‹åºæ— æ³•é€šè¿‡ç¼–è¯‘ï¼Œç¼–è¯‘å™¨æŠ¥â€œdisplay(3) çš„ç»“æœä¸æ˜¯å¸¸é‡â€çš„å¼‚å¸¸ã€‚</p>
<p>å¸¸é‡è¡¨è¾¾å¼å‡½æ•°çš„è¿”å›å€¼å¿…é¡»æ˜¯å¸¸é‡è¡¨è¾¾å¼çš„åŸå› å¾ˆç®€å•ï¼Œå¦‚æœæƒ³åœ¨ç¨‹åºç¼–è¯‘é˜¶æ®µè·å¾—æŸä¸ªå‡½æ•°è¿”å›çš„å¸¸é‡ï¼Œåˆ™è¯¥å‡½æ•°çš„ return è¯­å¥ä¸­å°±ä¸èƒ½åŒ…å«ç¨‹åºè¿è¡Œé˜¶æ®µæ‰èƒ½ç¡®å®šå€¼çš„å˜é‡ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼Œåœ¨å¸¸é‡è¡¨è¾¾å¼å‡½æ•°çš„ return è¯­å¥ä¸­ï¼Œä¸èƒ½åŒ…å«èµ‹å€¼çš„æ“ä½œï¼ˆä¾‹å¦‚ return x=1 åœ¨å¸¸é‡è¡¨è¾¾å¼å‡½æ•°ä¸­ä¸å…è®¸çš„ï¼‰ã€‚å¦å¤–ï¼Œç”¨ constexpr ä¿®æ”¹å‡½æ•°æ—¶ï¼Œå‡½æ•°æœ¬èº«ä¹Ÿæ˜¯æ”¯æŒé€’å½’çš„ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯è‡ªè¡Œå°è¯•ç¼–ç æµ‹è¯•ã€‚</p>
</blockquote>
<h3 id="constexprä¿®é¥°ç±»çš„æ„é€ å‡½æ•°"><a class="header-anchor" href="#constexprä¿®é¥°ç±»çš„æ„é€ å‡½æ•°">ğŸŒ³</a>constexprä¿®é¥°ç±»çš„æ„é€ å‡½æ•°</h3>
<p>å¯¹äº C++ å†…ç½®ç±»å‹çš„æ•°æ®ï¼Œå¯ä»¥ç›´æ¥ç”¨ constexpr ä¿®é¥°ï¼Œä½†å¦‚æœæ˜¯è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ï¼ˆç”¨ struct æˆ–è€… class å®ç°ï¼‰ï¼Œç›´æ¥ç”¨ constexpr ä¿®é¥°æ˜¯ä¸è¡Œçš„ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰ç±»å‹çš„å®šä¹‰</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">struct</span> <span class="title class_">myType</span> &#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span>* name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="comment">//å…¶å®ƒç»“æ„ä½“æˆå‘˜</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">constexpr</span> <span class="keyword">struct</span> <span class="title class_">myType</span> mt &#123; <span class="string">&quot;zhangsan&quot;</span>, <span class="number">10</span> &#125;;</span><br><span class="line">    cout &lt;&lt; mt.name &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; mt.age &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314</span></span><br></pre></td></tr></table></figure>
<p>æ­¤ç¨‹åºæ˜¯æ— æ³•é€šè¿‡ç¼–è¯‘çš„ï¼Œç¼–è¯‘å™¨ä¼šæŠ›å‡ºâ€œconstexprä¸èƒ½ä¿®é¥°è‡ªå®šä¹‰ç±»å‹â€çš„å¼‚å¸¸ã€‚</p>
<p>å½“æˆ‘ä»¬æƒ³è‡ªå®šä¹‰ä¸€ä¸ªå¯äº§ç”Ÿå¸¸é‡çš„ç±»å‹æ—¶ï¼Œæ­£ç¡®çš„åšæ³•æ˜¯åœ¨è¯¥ç±»å‹çš„å†…éƒ¨æ·»åŠ ä¸€ä¸ªå¸¸é‡æ„é€ å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä¿®æ”¹ä¸Šé¢çš„é”™è¯¯ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰ç±»å‹çš„å®šä¹‰</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">myType</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">constexpr</span> <span class="title">myType</span><span class="params">(<span class="type">char</span> *name,<span class="type">int</span> age)</span>:name(name),age(age)&#123;</span>&#125;;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span>* name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="comment">//å…¶å®ƒç»“æ„ä½“æˆå‘˜</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">constexpr</span> <span class="keyword">struct</span> <span class="title class_">myType</span> mt &#123; <span class="string">&quot;zhangsan&quot;</span>, <span class="number">10</span> &#125;;</span><br><span class="line">    cout &lt;&lt; mt.name &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; mt.age &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112131415</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>zhangsan 10</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ myType ç»“æ„ä½“ä¸­è‡ªå®šä¹‰æœ‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå€ŸåŠ©æ­¤å‡½æ•°ï¼Œç”¨ constexpr ä¿®é¥°çš„ myType ç±»å‹çš„ my å¸¸é‡å³å¯é€šè¿‡ç¼–è¯‘ã€‚</p>
<p>æ³¨æ„ï¼Œconstexpr ä¿®é¥°ç±»çš„æ„é€ å‡½æ•°æ—¶ï¼Œè¦æ±‚è¯¥æ„é€ å‡½æ•°çš„å‡½æ•°ä½“å¿…é¡»ä¸ºç©ºï¼Œä¸”é‡‡ç”¨åˆå§‹åŒ–åˆ—è¡¨çš„æ–¹å¼ä¸ºå„ä¸ªæˆå‘˜èµ‹å€¼æ—¶ï¼Œå¿…é¡»ä½¿ç”¨å¸¸é‡è¡¨è¾¾å¼ã€‚</p>
<p>å‰é¢æåˆ°ï¼Œconstexpr å¯ç”¨äºä¿®é¥°å‡½æ•°ï¼Œè€Œç±»ä¸­çš„æˆå‘˜æ–¹æ³•å®Œå…¨å¯ä»¥çœ‹åšæ˜¯â€œä½äºç±»è¿™ä¸ªå‘½åç©ºé—´ä¸­çš„å‡½æ•°â€ï¼Œæ‰€ä»¥ constexpr ä¹Ÿå¯ä»¥ä¿®é¥°ç±»ä¸­çš„æˆå‘˜å‡½æ•°ï¼Œåªä¸è¿‡æ­¤å‡½æ•°å¿…é¡»æ»¡è¶³å‰é¢æåˆ°çš„ 4 ä¸ªæ¡ä»¶ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰ç±»å‹çš„å®šä¹‰</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myType</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">constexpr</span> <span class="title">myType</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *name,<span class="type">int</span> age)</span>:name(name),age(age)&#123;</span>&#125;;</span><br><span class="line">    <span class="function"><span class="keyword">constexpr</span> <span class="type">const</span> <span class="type">char</span> * <span class="title">getname</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">constexpr</span> <span class="type">int</span> <span class="title">getage</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span>* name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="comment">//å…¶å®ƒç»“æ„ä½“æˆå‘˜</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">constexpr</span> <span class="keyword">struct</span> <span class="title class_">myType</span> mt &#123; <span class="string">&quot;zhangsan&quot;</span>, <span class="number">10</span> &#125;;</span><br><span class="line">    <span class="keyword">constexpr</span> <span class="type">const</span> <span class="type">char</span> * name = mt.<span class="built_in">getname</span>();</span><br><span class="line">    <span class="keyword">constexpr</span> <span class="type">int</span> age = mt.<span class="built_in">getage</span>();</span><br><span class="line">    cout &lt;&lt; name &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; age &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910111213141516171819202122232425</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>zhangsan 10</p>
<blockquote>
<p>æ³¨æ„ï¼ŒC++11 æ ‡å‡†ä¸­ï¼Œä¸æ”¯æŒç”¨ constexpr ä¿®é¥°å¸¦æœ‰ virtual çš„æˆå‘˜æ–¹æ³•ã€‚</p>
</blockquote>
<h3 id="constexprä¿®é¥°æ¨¡æ¿å‡½æ•°"><a class="header-anchor" href="#constexprä¿®é¥°æ¨¡æ¿å‡½æ•°">ğŸŒ³</a>constexprä¿®é¥°æ¨¡æ¿å‡½æ•°</h3>
<p>C++11 è¯­æ³•ä¸­ï¼Œconstexpr å¯ä»¥ä¿®é¥°æ¨¡æ¿å‡½æ•°ï¼Œä½†ç”±äºæ¨¡æ¿ä¸­ç±»å‹çš„ä¸ç¡®å®šæ€§ï¼Œå› æ­¤æ¨¡æ¿å‡½æ•°å®ä¾‹åŒ–åçš„å‡½æ•°æ˜¯å¦ç¬¦åˆå¸¸é‡è¡¨è¾¾å¼å‡½æ•°çš„è¦æ±‚ä¹Ÿæ˜¯ä¸ç¡®å®šçš„ã€‚</p>
<p>é’ˆå¯¹è¿™ç§æƒ…å†µä¸‹ï¼ŒC++11 æ ‡å‡†è§„å®šï¼Œå¦‚æœ constexpr ä¿®é¥°çš„æ¨¡æ¿å‡½æ•°å®ä¾‹åŒ–ç»“æœä¸æ»¡è¶³å¸¸é‡è¡¨è¾¾å¼å‡½æ•°çš„è¦æ±‚ï¼Œåˆ™ constexpr ä¼šè¢«è‡ªåŠ¨å¿½ç•¥ï¼Œå³è¯¥å‡½æ•°å°±ç­‰åŒäºä¸€ä¸ªæ™®é€šå‡½æ•°ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰ç±»å‹çš„å®šä¹‰</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">myType</span> &#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span>* name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="comment">//å…¶å®ƒç»“æ„ä½“æˆå‘˜</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//æ¨¡æ¿å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> T <span class="title">dispaly</span><span class="params">(T t)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">myType</span> stu&#123;<span class="string">&quot;zhangsan&quot;</span>,<span class="number">10</span>&#125;;</span><br><span class="line">    <span class="comment">//æ™®é€šå‡½æ•°</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">myType</span> ret = <span class="built_in">dispaly</span>(stu);</span><br><span class="line">    cout &lt;&lt; ret.name &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; ret.age &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//å¸¸é‡è¡¨è¾¾å¼å‡½æ•°</span></span><br><span class="line">    <span class="keyword">constexpr</span> <span class="type">int</span> ret1 = <span class="built_in">dispaly</span>(<span class="number">10</span>);</span><br><span class="line">    cout &lt;&lt; ret1 &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112131415161718192021222324</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>zhangsan 10<br>
10</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œç¤ºä¾‹ç¨‹åºä¸­å®šä¹‰äº†ä¸€ä¸ªæ¨¡æ¿å‡½æ•° display()ï¼Œä½†ç”±äºå…¶è¿”å›å€¼ç±»å‹æœªå®šï¼Œå› æ­¤åœ¨å®ä¾‹åŒ–ä¹‹å‰æ— æ³•åˆ¤æ–­å…¶æ˜¯å¦ç¬¦åˆå¸¸é‡è¡¨è¾¾å¼å‡½æ•°çš„è¦æ±‚ï¼š</p>
<ul>
<li>ç¬¬ 20 è¡Œä»£ç å¤„ï¼Œå½“æ¨¡æ¿å‡½æ•°ä¸­ä»¥è‡ªå®šä¹‰ç»“æ„ä½“ myType ç±»å‹è¿›è¡Œå®ä¾‹åŒ–æ—¶ï¼Œç”±äºè¯¥ç»“æ„ä½“ä¸­æ²¡æœ‰å®šä¹‰å¸¸é‡è¡¨è¾¾å¼æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥å®ä¾‹åŒ–åçš„å‡½æ•°ä¸æ˜¯å¸¸é‡è¡¨è¾¾å¼å‡½æ•°ï¼Œæ­¤æ—¶ constexpr æ˜¯æ— æ•ˆçš„ï¼›</li>
<li>ç¬¬ 23 è¡Œä»£ç å¤„ï¼Œæ¨¡æ¿å‡½æ•°çš„ç±»å‹ T ä¸º int ç±»å‹ï¼Œå®ä¾‹åŒ–åçš„å‡½æ•°ç¬¦åˆå¸¸é‡è¡¨è¾¾å¼å‡½æ•°çš„è¦æ±‚ï¼Œæ‰€ä»¥è¯¥å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯ä¸€ä¸ªå¸¸é‡è¡¨è¾¾å¼ã€‚</li>
</ul>
<h2 id="c-11-constexprå’Œconstçš„åŒºåˆ«"><a class="header-anchor" href="#c-11-constexprå’Œconstçš„åŒºåˆ«">ğŸŒ³</a>C++11 constexprå’Œconstçš„åŒºåˆ«</h2>
<p>ã€Š<a href="http://c.biancheng.net/view/7781.html">C++11 constexpr</a>ã€‹ä¸€èŠ‚ä¸­ï¼Œè¯¦ç»†è®²è§£äº† constexpr å…³é”®å­—çš„åŠŸèƒ½å’Œç”¨æ³•ã€‚ä¸€äº›è¯»è€…åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šæŠŠ const å’Œ constexpr ææ··ï¼Œä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™ç”¨ constï¼Œä»€ä¹ˆæ—¶å€™ç”¨ constexprã€‚æœ¬èŠ‚å°±å¸¦é¢†å¤§å®¶å¯¹ const å’Œ constexpr åšç³»ç»Ÿåœ°åŒºåˆ†ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œconstexpr æ˜¯ C++ 11 æ ‡å‡†æ–°æ·»åŠ çš„å…³é”®å­—ï¼Œåœ¨æ­¤ä¹‹å‰ï¼ˆC++ 98/03æ ‡å‡†ï¼‰åªæœ‰ const å…³é”®å­—ï¼Œå…¶åœ¨å®é™…ä½¿ç”¨ä¸­ç»å¸¸ä¼šè¡¨ç°å‡ºä¸¤ç§ä¸åŒçš„è¯­ä¹‰ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;array&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dis_1</span><span class="params">(<span class="type">const</span> <span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="comment">//é”™è¯¯ï¼Œxæ˜¯åªè¯»çš„å˜é‡</span></span><br><span class="line">    array &lt;<span class="type">int</span>,x&gt; myarr&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line">    cout &lt;&lt; myarr[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dis_2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> x = <span class="number">5</span>;</span><br><span class="line">    array &lt;<span class="type">int</span>,x&gt; myarr&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line">    cout &lt;&lt; myarr[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="built_in">dis_1</span>(<span class="number">5</span>);</span><br><span class="line">   <span class="built_in">dis_2</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112131415161718</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œdis_1() å’Œ dis_2() å‡½æ•°ä¸­éƒ½åŒ…å«ä¸€ä¸ª const int xï¼Œä½† dis_1() å‡½æ•°ä¸­çš„ x æ— æ³•å®Œæˆåˆå§‹åŒ– array å®¹å™¨çš„ä»»åŠ¡ï¼Œè€Œ dis_2() å‡½æ•°ä¸­çš„ x å´å¯ä»¥ã€‚</p>
<p>è¿™æ˜¯å› ä¸ºï¼Œdis_1() å‡½æ•°ä¸­çš„â€œconst int xâ€åªæ˜¯æƒ³å¼ºè°ƒ x æ˜¯ä¸€ä¸ªåªè¯»çš„å˜é‡ï¼Œå…¶æœ¬è´¨ä»ä¸ºå˜é‡ï¼Œæ— æ³•ç”¨æ¥åˆå§‹åŒ– array å®¹å™¨ï¼›è€Œ dis_2() å‡½æ•°ä¸­çš„â€œconst int xâ€ï¼Œè¡¨æ˜ x æ˜¯ä¸€ä¸ªåªè¯»å˜é‡çš„åŒæ—¶ï¼Œx è¿˜æ˜¯ä¸€ä¸ªå€¼ä¸º 5 çš„å¸¸é‡ï¼Œæ‰€ä»¥å¯ä»¥ç”¨æ¥åˆå§‹åŒ– array å®¹å™¨ã€‚</p>
<p>C++ 11æ ‡å‡†ä¸­ï¼Œä¸ºäº†è§£å†³ const å…³é”®å­—çš„åŒé‡è¯­ä¹‰é—®é¢˜ï¼Œä¿ç•™äº† const è¡¨ç¤ºâ€œåªè¯»â€çš„è¯­ä¹‰ï¼Œè€Œå°†â€œå¸¸é‡â€çš„è¯­ä¹‰åˆ’åˆ†ç»™äº†æ–°æ·»åŠ çš„ constexpr å…³é”®å­—ã€‚å› æ­¤ C++11 æ ‡å‡†ä¸­ï¼Œå»ºè®®å°† const å’Œ constexpr çš„åŠŸèƒ½åŒºåˆ†å¼€ï¼Œå³å‡¡æ˜¯è¡¨è¾¾â€œåªè¯»â€è¯­ä¹‰çš„åœºæ™¯éƒ½ä½¿ç”¨ constï¼Œè¡¨è¾¾â€œå¸¸é‡â€è¯­ä¹‰çš„åœºæ™¯éƒ½ä½¿ç”¨ constexprã€‚</p>
<blockquote>
<p>åœ¨ä¸Šé¢çš„å®ä¾‹ç¨‹åºä¸­ï¼Œdis_2() å‡½æ•°ä¸­ä½¿ç”¨ const int x æ˜¯ä¸è§„èŒƒçš„ï¼Œåº”ä½¿ç”¨ constexpr å…³é”®å­—ã€‚</p>
</blockquote>
<p>æœ‰è¯»è€…å¯èƒ½ä¼šé—®ï¼Œâ€œåªè¯»â€ä¸å°±æ„å‘³ç€å…¶ä¸èƒ½è¢«ä¿®æ”¹å—ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œâ€œåªè¯»â€å’Œâ€œä¸å…è®¸è¢«ä¿®æ”¹â€ä¹‹é—´å¹¶æ²¡æœ‰å¿…ç„¶çš„è”ç³»ï¼Œä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> &amp; con_b = a;</span><br><span class="line">    cout &lt;&lt; con_b &lt;&lt; endl;</span><br><span class="line">    a = <span class="number">20</span>;</span><br><span class="line">    cout &lt;&lt; con_b &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>10<br>
20</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œç¨‹åºä¸­ç”¨ const ä¿®é¥°äº† con_b å˜é‡ï¼Œè¡¨ç¤ºè¯¥å˜é‡â€œåªè¯»â€ï¼Œå³æ— æ³•é€šè¿‡å˜é‡è‡ªèº«å»ä¿®æ”¹è‡ªå·±çš„å€¼ã€‚ä½†è¿™å¹¶ä¸æ„å‘³ç€ con_b çš„å€¼ä¸èƒ½å€ŸåŠ©å…¶å®ƒå˜é‡é—´æ¥æ”¹å˜ï¼Œé€šè¿‡æ”¹å˜ a çš„å€¼å°±å¯ä»¥ä½¿ con_b çš„å€¼å‘ç”Ÿå˜åŒ–ã€‚</p>
<p>åœ¨å¤§éƒ¨åˆ†å®é™…åœºæ™¯ä¸­ï¼Œconst å’Œ constexpr æ˜¯å¯ä»¥æ··ç”¨çš„ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> a = <span class="number">5</span> + <span class="number">4</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> a = <span class="number">5</span> + <span class="number">4</span>;</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>
<p>å®ƒä»¬æ˜¯å®Œå…¨ç­‰ä»·çš„ï¼Œéƒ½å¯ä»¥åœ¨ç¨‹åºçš„ç¼–è¯‘é˜¶æ®µè®¡ç®—å‡ºç»“æœã€‚ä½†åœ¨æŸäº›åœºæ™¯ä¸­ï¼Œå¿…é¡»æ˜ç¡®ä½¿ç”¨ constexprï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;array&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="type">int</span> <span class="title">sqr1</span><span class="params">(<span class="type">int</span> arg)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arg*arg;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">const</span> <span class="type">int</span> <span class="title">sqr2</span><span class="params">(<span class="type">int</span> arg)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arg*arg;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    array&lt;<span class="type">int</span>,sqr1(10)&gt; mylist1;<span class="comment">//å¯ä»¥ï¼Œå› ä¸ºsqr1æ—¶constexprå‡½æ•°</span></span><br><span class="line">    array&lt;<span class="type">int</span>,sqr2(10)&gt; mylist1;<span class="comment">//ä¸å¯ä»¥ï¼Œå› ä¸ºsqr2ä¸æ˜¯constexprå‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112131415</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œå› ä¸º sqr2() å‡½æ•°çš„è¿”å›å€¼ä»…æœ‰ const ä¿®é¥°ï¼Œè€Œæ²¡æœ‰ç”¨æ›´æ˜ç¡®çš„ constexpr ä¿®é¥°ï¼Œå¯¼è‡´å…¶æ— æ³•ç”¨äºåˆå§‹åŒ– array å®¹å™¨ï¼ˆåªæœ‰å¸¸é‡æ‰èƒ½åˆå§‹åŒ– array å®¹å™¨ï¼‰ã€‚</p>
<p>æ€»çš„æ¥è¯´åœ¨ C++ 11 æ ‡å‡†ä¸­ï¼Œconst ç”¨äºä¸ºä¿®é¥°çš„å˜é‡æ·»åŠ â€œåªè¯»â€å±æ€§ï¼›è€Œ constexpr å…³é”®å­—åˆ™ç”¨äºæŒ‡æ˜å…¶åæ˜¯ä¸€ä¸ªå¸¸é‡ï¼ˆæˆ–è€…å¸¸é‡è¡¨è¾¾å¼ï¼‰ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘ç¨‹åºæ—¶å¯ä»¥é¡ºå¸¦å°†å…¶ç»“æœè®¡ç®—å‡ºæ¥ï¼Œè€Œæ— éœ€ç­‰åˆ°ç¨‹åºè¿è¡Œé˜¶æ®µï¼Œè¿™æ ·çš„ä¼˜åŒ–æå¤§åœ°æé«˜äº†ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚</p>
<h2 id="c-11-long-longè¶…é•¿æ•´å½¢è¯¦è§£"><a class="header-anchor" href="#c-11-long-longè¶…é•¿æ•´å½¢è¯¦è§£">ğŸŒ³</a>C++11 long longè¶…é•¿æ•´å½¢è¯¦è§£</h2>
<p>C++ 11 æ ‡å‡†ä¸­ï¼ŒåŸºäºæ•´æ•°å¤§å°çš„è€ƒè™‘ï¼Œå…±æä¾›äº†å¦‚è¡¨ 1 æ‰€ç¤ºçš„è¿™äº›æ•°æ®ç±»å‹ã€‚ä¸æ­¤åŒæ—¶ï¼Œæ ‡å‡†ä¸­è¿˜æ˜ç¡®é™å®šäº†å„ä¸ªæ•°æ®ç±»å‹æœ€å°‘å ç”¨çš„ä½æ•°ã€‚</p>
<table>
<thead>
<tr>
<th>æ•´æ•°ç±»å‹</th>
<th>ç­‰ä»·ç±»å‹</th>
<th>C++11æ ‡å‡†è§„å®šå ç”¨æœ€å°‘ä½æ•°</th>
</tr>
</thead>
<tbody>
<tr>
<td>short</td>
<td>short intï¼ˆæœ‰ç¬¦å·çŸ­æ•´å‹ï¼‰</td>
<td>è‡³å°‘ 16 ä½ï¼ˆ2 ä¸ªå­—èŠ‚ï¼‰</td>
</tr>
<tr>
<td>signed short</td>
<td></td>
<td></td>
</tr>
<tr>
<td>signed short int</td>
<td></td>
<td></td>
</tr>
<tr>
<td>unsigned short</td>
<td>unsigned short intï¼ˆæ— ç¬¦å·çŸ­æ•´å‹ï¼‰</td>
<td></td>
</tr>
<tr>
<td>unsigned short int</td>
<td></td>
<td></td>
</tr>
<tr>
<td>int</td>
<td>intï¼ˆæœ‰ç¬¦å·æ•´å½¢ï¼‰</td>
<td>è‡³å°‘ 16 ä½ï¼ˆ2 ä¸ªå­—èŠ‚ï¼‰</td>
</tr>
<tr>
<td>signed</td>
<td></td>
<td></td>
</tr>
<tr>
<td>signed int</td>
<td></td>
<td></td>
</tr>
<tr>
<td>unsigned</td>
<td>unsigned intï¼ˆæ— ç¬¦å·æ•´å½¢ï¼‰</td>
<td></td>
</tr>
<tr>
<td>unsigned int</td>
<td></td>
<td></td>
</tr>
<tr>
<td>long</td>
<td>long intï¼ˆæœ‰ç¬¦å·é•¿æ•´å½¢ï¼‰</td>
<td>è‡³å°‘ 32 ä½ï¼ˆ4 ä¸ªå­—èŠ‚ï¼‰</td>
</tr>
<tr>
<td>long int</td>
<td></td>
<td></td>
</tr>
<tr>
<td>signed long</td>
<td></td>
<td></td>
</tr>
<tr>
<td>signed long int</td>
<td></td>
<td></td>
</tr>
<tr>
<td>unsigned long</td>
<td>unsigned long intï¼ˆæ— ç¬¦å·é•¿æ•´å½¢ï¼‰</td>
<td></td>
</tr>
<tr>
<td>unsigned long int</td>
<td></td>
<td></td>
</tr>
<tr>
<td>long longï¼ˆC++11ï¼‰</td>
<td>long long intï¼ˆæœ‰ç¬¦å·è¶…é•¿æ•´å½¢ï¼‰</td>
<td>è‡³å°‘ 64 ä½ï¼ˆ8 ä¸ªå­—èŠ‚ï¼‰</td>
</tr>
<tr>
<td>long long intï¼ˆC++11ï¼‰</td>
<td></td>
<td></td>
</tr>
<tr>
<td>signed long longï¼ˆC++11ï¼‰</td>
<td></td>
<td></td>
</tr>
<tr>
<td>signed long long intï¼ˆC++11ï¼‰</td>
<td></td>
<td></td>
</tr>
<tr>
<td>unsigned long longï¼ˆC++11ï¼‰</td>
<td>unsigned long long intï¼ˆæ— ç¬¦å·è¶…é•¿æ•´å‹ï¼‰</td>
<td></td>
</tr>
<tr>
<td>unsigned long long intï¼ˆC++11ï¼‰</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<p>C++11 æ ‡å‡†è§„å®šï¼Œæ¯ç§æ•´æ•°ç±»å‹å¿…é¡»åŒæ—¶å…·å¤‡æœ‰ç¬¦å·ï¼ˆsignedï¼‰å’Œæ— ç¬¦å·ï¼ˆunsignedï¼‰ä¸¤ç§ç±»å‹ï¼Œä¸”æ¯ç§å…·ä½“çš„æœ‰ç¬¦å·æ•´å½¢å’Œæ— ç¬¦å·æ•´å½¢æ‰€å ç”¨çš„å­˜å‚¨ç©ºé—´ï¼ˆä¹Ÿå°±æ˜¯ä½æ•°ï¼‰å¿…é¡»ç›¸åŒã€‚æ³¨æ„ï¼ŒC++11 æ ‡å‡†ä¸­åªé™å®šäº†æ¯ç§ç±»å‹æœ€å°‘å ç”¨å¤šå°‘å­˜å‚¨ç©ºé—´ï¼Œä¸åŒçš„å¹³å°å¯ä»¥å ç”¨ä¸åŒçš„å­˜å‚¨ç©ºé—´ã€‚</p>
</blockquote>
<p>åœ¨è¡¨ 1 ç½—åˆ—çš„è¿™äº›æ•°æ®ç±»å‹ä¸­ï¼Œlong long è¶…é•¿æ•´å‹æ˜¯ C++ 11 æ ‡å‡†æ–°æ·»åŠ çš„ï¼Œæ¥ä¸‹æ¥å°±å¯¹è¯¥æ•´æ•°ç±»å‹åšå…·ä½“çš„ä»‹ç»ã€‚</p>
<p>è¯´é“ C++ æ ‡å‡†å§”å‘˜ä¼šå°† long long æ•´å½¢å†™å…¥ C++ 11 æ ‡å‡†ä¸­ï¼Œå…¶å®æ—©åœ¨ 1995 å¹´ï¼Œå°±æœ‰äººæè®®å°† long long æ•´å½¢å†™å…¥ C++ 98 æ ‡å‡†ï¼Œä½†è¢«å§”å‘˜ä¼šæ‹’ç»äº†ã€‚è€Œå long long æ•´å½¢è¢« C99 æ ‡å‡†ï¼ˆCè¯­è¨€æ ‡å‡†ä¹‹ä¸€ï¼‰é‡‡çº³ï¼Œå¹¶é€æ¸è¢«å¾ˆå¤šç¼–è¯‘å™¨æ”¯æŒï¼Œäºæ˜¯ C++ æ ‡å‡†å§”å‘˜ä¼šé‡æ–°å†³å®šå°† long long æ•´å½¢å†™å…¥ C++ 11 æ ‡å‡†ä¸­ã€‚</p>
<p>å¦‚åŒ long ç±»å‹æ•´æ•°éœ€æ˜ç¡®æ ‡æ³¨ â€œLâ€ æˆ–è€… â€œlâ€ åç¼€ä¸€æ ·ï¼Œè¦ä½¿ç”¨ long long ç±»å‹çš„æ•´æ•°ï¼Œä¹Ÿå¿…é¡»æ ‡æ³¨å¯¹åº”çš„åç¼€ï¼š</p>
<ul>
<li>å¯¹äºæœ‰ç¬¦å· long long æ•´å½¢ï¼Œåç¼€ç”¨ â€œLLâ€ æˆ–è€… â€œllâ€ æ ‡è¯†ã€‚ä¾‹å¦‚ï¼Œâ€œ10LLâ€ å°±è¡¨ç¤ºæœ‰ç¬¦å·è¶…é•¿æ•´æ•° 10ï¼›</li>
<li>å¯¹äºæ— ç¬¦å· long long æ•´å½¢ï¼Œåç¼€ç”¨ â€œULLâ€ã€â€œullâ€ã€â€œUllâ€ æˆ–è€… â€œuLLâ€ æ ‡è¯†ã€‚ä¾‹å¦‚ï¼Œâ€œ10ULLâ€ å°±è¡¨ç¤ºæ— ç¬¦å·è¶…é•¿æ•´æ•° 10ï¼›</li>
</ul>
<blockquote>
<p>å¦‚æœä¸æ·»åŠ ä»»ä½•æ ‡è¯†ï¼Œåˆ™æ‰€æœ‰çš„æ•´æ•°éƒ½ä¼šé»˜è®¤ä¸º int ç±»å‹ã€‚</p>
</blockquote>
<p>å¯¹äºä»»æ„ä¸€ç§æ•°æ®ç±»å‹ï¼Œè¯»è€…å¯èƒ½æ›´å…³å¿ƒçš„æ˜¯æ­¤ç±»å‹çš„å–å€¼èŒƒå›´ã€‚å¯¹äº long long ç±»å‹æ¥è¯´ï¼Œå¦‚æœæƒ³äº†è§£å½“å‰å¹³å°ä¸Š long long æ•´å½¢çš„å–å€¼èŒƒå›´ï¼Œå¯ä»¥ä½¿ç”¨<code>&lt;climits&gt;</code>å¤´æ–‡ä»¶ä¸­ä¸ long long æ•´å½¢ç›¸å…³çš„ 3 ä¸ªå®ï¼Œåˆ†åˆ«ä¸º LLONG_MINã€LLONG_MAX å’Œ ULLONG_MINï¼š</p>
<ol>
<li>LLONG_MINï¼šä»£è¡¨å½“å‰å¹³å°ä¸Šæœ€å°çš„ long long ç±»å‹æ•´æ•°ï¼›</li>
<li>LLONG_MAXï¼šä»£è¡¨å½“å‰å¹³å°ä¸Šæœ€å¤§çš„ long long ç±»å‹æ•´æ•°ï¼›</li>
<li>ULLONG_MINï¼šä»£è¡¨å½“å‰å¹³å°ä¸Šæœ€å¤§çš„ unsigned long long ç±»å‹æ•´æ•°ï¼ˆæ— ç¬¦å·è¶…é•¿æ•´å‹çš„æœ€å°å€¼ä¸º 0ï¼‰ï¼›</li>
</ol>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt;<span class="string">&quot;long longæœ€å¤§å€¼ï¼š&quot;</span> &lt;&lt; LLONG_MIN &lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt; hex &lt;&lt; LLONG_MIN &lt;&lt;<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    cout &lt;&lt; dec &lt;&lt;<span class="string">&quot;long longæœ€å°å€¼ï¼š&quot;</span> &lt;&lt; LLONG_MAX &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; hex &lt;&lt; LLONG_MAX &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    cout &lt;&lt; dec &lt;&lt; <span class="string">&quot;unsigned long longæœ€å¤§å€¼ï¼š&quot;</span> &lt;&lt; ULLONG_MAX &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; hex &lt;&lt; ULLONG_MAX;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼ˆä¸å”¯ä¸€ï¼‰ï¼š</p>
<p>long longæœ€å¤§å€¼ï¼š-9223372036854775808 8000000000000000<br>
long longæœ€å°å€¼ï¼š9223372036854775807 7fffffffffffffff<br>
unsigned long longæœ€å¤§å€¼ï¼š18446744073709551615 ffffffffffffffff</p>
<blockquote>
<p>å…³äºæ•´å½¢åœ¨å†…å­˜ä¸­åˆ°åº•æ˜¯å¦‚ä½•å­˜å‚¨çš„ï¼Œè¯»è€…å¯é˜…è¯»ã€Š<a href="http://c.biancheng.net/view/vip_1761.html">æ•´æ•°åœ¨å†…å­˜ä¸­æ˜¯å¦‚ä½•å­˜å‚¨çš„ï¼Œä¸ºä»€ä¹ˆå®ƒå ªç§°å¤©æ‰èˆ¬çš„è®¾è®¡</a>ã€‹ä¸€èŠ‚ã€‚</p>
</blockquote>
<p>æ­¤ç¨‹åºä¸­ï¼Œè¾“å‡ºäº†å„æœ€å¤§å€¼å’Œæœ€å°å€¼å¯¹åº”çš„åå…­è¿›åˆ¶ï¼Œæ˜¾ç„¶åœ¨å½“å‰å¹³å°ï¼ˆWindows10 64ä½æ“ä½œç³»ç»Ÿï¼‰ä¸Šï¼Œlong long è¶…é•¿æ•´å‹å ç”¨ 64 ä½ï¼ˆä¹Ÿå°±æ˜¯ 16 ä¸ªå­—èŠ‚ï¼‰çš„å­˜å‚¨ç©ºé—´ã€‚è¯»è€…å¯è‡ªè¡Œåœ¨è‡ªå·±çš„æœºå™¨ä¸Šè¿è¡Œæ­¤æ®µä»£ç ï¼Œå³å¯è½»æ¾å¾—çŸ¥ long long ç±»å‹åœ¨è‡ªå·±æœºå™¨ä¸Šæ‰€å ç”¨çš„å­—èŠ‚æ•°ã€‚</p>
<h2 id="c-11å³å€¼å¼•ç”¨-ä¸€çœ‹å³æ‡‚"><a class="header-anchor" href="#c-11å³å€¼å¼•ç”¨-ä¸€çœ‹å³æ‡‚">ğŸŒ³</a>C++11å³å€¼å¼•ç”¨ï¼ˆä¸€çœ‹å³æ‡‚ï¼‰</h2>
<p>ã€Š<a href="http://c.biancheng.net/view/7751.html">C++11æ˜¯ä»€ä¹ˆ</a>ã€‹ä¸€èŠ‚ä¸­æåˆ°ï¼Œåœ¨ C++98/03 æ ‡å‡†çš„åŸºç¡€ä¸Šï¼ŒC++11 æ ‡å‡†å¯¹ C++ è¯­è¨€å¢æ·»äº†çº¦ 140 ä¸ªæ–°ç‰¹æ€§ã€‚æœ¬èŠ‚è¦è®²çš„å³å€¼å¼•ç”¨å°±æ˜¯ä¼—å¤šæ–°ç‰¹æ€§ä¸­çš„ä¸€ä¸ªï¼ŒåŒæ—¶ä¹Ÿæ˜¯æœ€é‡è¦çš„ç‰¹æ€§ä¹‹ä¸€ã€‚</p>
<p>å¾ˆå¤šåˆå­¦è€…éƒ½æ„Ÿè§‰å³å€¼å¼•ç”¨æ™¦æ¶©éš¾æ‡‚ï¼Œå…¶å®ä¸ç„¶ã€‚å³å€¼å¼•ç”¨åªä¸è¿‡æ˜¯ä¸€ç§æ–°çš„ C++ è¯­æ³•ï¼ŒçœŸæ­£ç†è§£èµ·æ¥æœ‰éš¾åº¦çš„æ˜¯åŸºäºå³å€¼å¼•ç”¨å¼•ç”³å‡ºçš„ 2 ç§ C++ ç¼–ç¨‹æŠ€å·§ï¼Œåˆ†åˆ«ä¸ºç§»åŠ¨è¯­ä¹‰å’Œå®Œç¾è½¬å‘ã€‚æœ¬èŠ‚å…ˆç»™è¯»è€…è®²è§£ä»€ä¹ˆæ˜¯å³å€¼å¼•ç”¨ä»¥åŠå®ƒçš„åŸºæœ¬ç”¨æ³•ï¼Œè‡³äºç§»åŠ¨è¯­ä¹‰å’Œå®Œç¾è½¬å‘åˆ™æ”¾åˆ°åç»­ç« èŠ‚è®²è§£ã€‚</p>
<h3 id="c-å·¦å€¼å’Œå³å€¼"><a class="header-anchor" href="#c-å·¦å€¼å’Œå³å€¼">ğŸŒ³</a>C++å·¦å€¼å’Œå³å€¼</h3>
<p>å³å€¼å¼•ç”¨å¯ä»¥ä»å­—é¢æ„æ€ä¸Šç†è§£ï¼ŒæŒ‡çš„æ˜¯ä»¥å¼•ç”¨ä¼ é€’ï¼ˆè€Œéå€¼ä¼ é€’ï¼‰çš„æ–¹å¼ä½¿ç”¨ C++ å³å€¼ã€‚å…³äº C++ å¼•ç”¨ï¼Œå·²ç»åœ¨ã€Š<a href="http://c.biancheng.net/cplus/25/">C++å¼•ç”¨</a>ã€‹ä¸“é¢˜ç»™å¤§å®¶åšäº†è¯¦ç»†çš„è®²è§£ï¼Œè¿™é‡Œä¸å†é‡å¤èµ˜è¿°ã€‚æ¥ä¸‹æ¥é‡ç‚¹ç»™å¤§å®¶ä»‹ç»ä»€ä¹ˆæ˜¯ C++ å³å€¼ã€‚</p>
<p>åœ¨ C++ æˆ–è€… C è¯­è¨€ä¸­ï¼Œä¸€ä¸ªè¡¨è¾¾å¼ï¼ˆå¯ä»¥æ˜¯å­—é¢é‡ã€å˜é‡ã€å¯¹è±¡ã€å‡½æ•°çš„è¿”å›å€¼ç­‰ï¼‰æ ¹æ®å…¶ä½¿ç”¨åœºæ™¯ä¸åŒï¼Œåˆ†ä¸ºå·¦å€¼è¡¨è¾¾å¼å’Œå³å€¼è¡¨è¾¾å¼ã€‚ç¡®åˆ‡çš„è¯´ C++ ä¸­å·¦å€¼å’Œå³å€¼çš„æ¦‚å¿µæ˜¯ä» C è¯­è¨€ç»§æ‰¿è¿‡æ¥çš„ã€‚</p>
<blockquote>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå·¦å€¼çš„è‹±æ–‡ç®€å†™ä¸ºâ€œlvalueâ€ï¼Œå³å€¼çš„è‹±æ–‡ç®€å†™ä¸ºâ€œrvalueâ€ã€‚å¾ˆå¤šäººè®¤ä¸ºå®ƒä»¬åˆ†åˆ«æ˜¯&quot;left value&quot;ã€â€œright valueâ€ çš„ç¼©å†™ï¼Œå…¶å®ä¸ç„¶ã€‚lvalue æ˜¯â€œloactor valueâ€çš„ç¼©å†™ï¼Œå¯æ„ä¸ºå­˜å‚¨åœ¨å†…å­˜ä¸­ã€æœ‰æ˜ç¡®å­˜å‚¨åœ°å€ï¼ˆå¯å¯»å€ï¼‰çš„æ•°æ®ï¼Œè€Œ rvalue è¯‘ä¸º â€œread valueâ€ï¼ŒæŒ‡çš„æ˜¯é‚£äº›å¯ä»¥æä¾›æ•°æ®å€¼çš„æ•°æ®ï¼ˆä¸ä¸€å®šå¯ä»¥å¯»å€ï¼Œä¾‹å¦‚å­˜å‚¨äºå¯„å­˜å™¨ä¸­çš„æ•°æ®ï¼‰ã€‚</p>
</blockquote>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œåˆ¤æ–­æŸä¸ªè¡¨è¾¾å¼æ˜¯å·¦å€¼è¿˜æ˜¯å³å€¼ï¼Œæœ€å¸¸ç”¨çš„æœ‰ä»¥ä¸‹ 2 ç§æ–¹æ³•ã€‚</p>
<ol>
<li>å¯ä½äºèµ‹å€¼å·ï¼ˆ=ï¼‰å·¦ä¾§çš„è¡¨è¾¾å¼å°±æ˜¯å·¦å€¼ï¼›åä¹‹ï¼Œåªèƒ½ä½äºèµ‹å€¼å·å³ä¾§çš„è¡¨è¾¾å¼å°±æ˜¯å³å€¼ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</li>
</ol>
<p>int a = 5;<br>
5 = a; //é”™è¯¯ï¼Œ5 ä¸èƒ½ä¸ºå·¦å€¼</p>
<p>å…¶ä¸­ï¼Œå˜é‡ a å°±æ˜¯ä¸€ä¸ªå·¦å€¼ï¼Œè€Œå­—é¢é‡ 5 å°±æ˜¯ä¸€ä¸ªå³å€¼ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒC++ ä¸­çš„å·¦å€¼ä¹Ÿå¯ä»¥å½“åšå³å€¼ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š</p>
<p>int b = 10; // b æ˜¯ä¸€ä¸ªå·¦å€¼<br>
a = b; // aã€b éƒ½æ˜¯å·¦å€¼ï¼Œåªä¸è¿‡å°† b å¯ä»¥å½“åšå³å€¼ä½¿ç”¨</p>
<ol start="2">
<li>æœ‰åç§°çš„ã€å¯ä»¥è·å–åˆ°å­˜å‚¨åœ°å€çš„è¡¨è¾¾å¼å³ä¸ºå·¦å€¼ï¼›åä¹‹åˆ™æ˜¯å³å€¼ã€‚</li>
</ol>
<p>ä»¥ä¸Šé¢å®šä¹‰çš„å˜é‡ aã€b ä¸ºä¾‹ï¼Œa å’Œ b æ˜¯å˜é‡åï¼Œä¸”é€šè¿‡ &amp;a å’Œ &amp;b å¯ä»¥è·å¾—ä»–ä»¬çš„å­˜å‚¨åœ°å€ï¼Œå› æ­¤ a å’Œ b éƒ½æ˜¯å·¦å€¼ï¼›åä¹‹ï¼Œå­—é¢é‡ 5ã€10ï¼Œå®ƒä»¬æ—¢æ²¡æœ‰åç§°ï¼Œä¹Ÿæ— æ³•è·å–å…¶å­˜å‚¨åœ°å€ï¼ˆå­—é¢é‡é€šå¸¸å­˜å‚¨åœ¨å¯„å­˜å™¨ä¸­ï¼Œæˆ–è€…å’Œä»£ç å­˜å‚¨åœ¨ä¸€èµ·ï¼‰ï¼Œå› æ­¤ 5ã€10 éƒ½æ˜¯å³å€¼ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼Œä»¥ä¸Š 2 ç§åˆ¤å®šæ–¹æ³•åªé€‚ç”¨äºå¤§éƒ¨åˆ†åœºæ™¯ã€‚ç”±äºæœ¬èŠ‚ä¸»è¦è®²è§£å³å€¼å¼•ç”¨ï¼Œå› æ­¤è¿™é‡Œé€‚å¯è€Œæ­¢ï¼Œä¸å†å¯¹ C++ å·¦å€¼å’Œå³å€¼åšæ·±åº¦å‰–æï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯è‡ªè¡Œç ”ç©¶ã€‚</p>
</blockquote>
<h3 id="c-å³å€¼å¼•ç”¨"><a class="header-anchor" href="#c-å³å€¼å¼•ç”¨">ğŸŒ³</a>C++å³å€¼å¼•ç”¨</h3>
<p>å‰é¢æåˆ°ï¼Œå…¶å® C++98/03 æ ‡å‡†ä¸­å°±æœ‰å¼•ç”¨ï¼Œä½¿ç”¨ â€œ&amp;â€ è¡¨ç¤ºã€‚ä½†æ­¤ç§å¼•ç”¨æ–¹å¼æœ‰ä¸€ä¸ªç¼ºé™·ï¼Œå³æ­£å¸¸æƒ…å†µä¸‹åªèƒ½æ“ä½œ C++ ä¸­çš„å·¦å€¼ï¼Œæ— æ³•å¯¹å³å€¼æ·»åŠ å¼•ç”¨ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> &amp;b = num; <span class="comment">//æ­£ç¡®</span></span><br><span class="line"><span class="type">int</span> &amp;c = <span class="number">10</span>; <span class="comment">//é”™è¯¯</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œç¼–è¯‘å™¨å…è®¸æˆ‘ä»¬ä¸º num å·¦å€¼å»ºç«‹ä¸€ä¸ªå¼•ç”¨ï¼Œä½†ä¸å¯ä»¥ä¸º 10 è¿™ä¸ªå³å€¼å»ºç«‹å¼•ç”¨ã€‚å› æ­¤ï¼ŒC++98/03 æ ‡å‡†ä¸­çš„å¼•ç”¨åˆç§°ä¸ºå·¦å€¼å¼•ç”¨ã€‚</p>
<p>æ³¨æ„ï¼Œè™½ç„¶ C++98/03 æ ‡å‡†ä¸æ”¯æŒä¸ºå³å€¼å»ºç«‹éå¸¸é‡å·¦å€¼å¼•ç”¨ï¼Œä½†å…è®¸ä½¿ç”¨å¸¸é‡å·¦å€¼å¼•ç”¨æ“ä½œå³å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¸¸é‡å·¦å€¼å¼•ç”¨æ—¢å¯ä»¥æ“ä½œå·¦å€¼ï¼Œä¹Ÿå¯ä»¥æ“ä½œå³å€¼ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> &amp;b = num;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> &amp;c = <span class="number">10</span>;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œå³å€¼å¾€å¾€æ˜¯æ²¡æœ‰åç§°çš„ï¼Œå› æ­¤è¦ä½¿ç”¨å®ƒåªèƒ½å€ŸåŠ©å¼•ç”¨çš„æ–¹å¼ã€‚è¿™å°±äº§ç”Ÿä¸€ä¸ªé—®é¢˜ï¼Œå®é™…å¼€å‘ä¸­æˆ‘ä»¬å¯èƒ½éœ€è¦å¯¹å³å€¼è¿›è¡Œä¿®æ”¹ï¼ˆå®ç°ç§»åŠ¨è¯­ä¹‰æ—¶å°±éœ€è¦ï¼‰ï¼Œæ˜¾ç„¶å·¦å€¼å¼•ç”¨çš„æ–¹å¼æ˜¯è¡Œä¸é€šçš„ã€‚</p>
<p>ä¸ºæ­¤ï¼ŒC++11 æ ‡å‡†æ–°å¼•å…¥äº†å¦ä¸€ç§å¼•ç”¨æ–¹å¼ï¼Œç§°ä¸ºå³å€¼å¼•ç”¨ï¼Œç”¨ â€œ&amp;&amp;â€ è¡¨ç¤ºã€‚</p>
<blockquote>
<p>è¯è¯´ï¼ŒC++æ ‡å‡†å§”å‘˜ä¼šåœ¨é€‰å®šå³å€¼å¼•ç”¨ç¬¦å·æ—¶ï¼Œæ—¢å¸Œæœ›èƒ½é€‰ç”¨ç°æœ‰ C++ å†…éƒ¨å·²æœ‰çš„ç¬¦å·ï¼Œè¿˜ä¸èƒ½ä¸ C++ 98 /03 æ ‡å‡†äº§ç”Ÿå†²çªï¼Œæœ€ç»ˆé€‰å®šäº† 2 ä¸ª â€˜&amp;â€™ è¡¨ç¤ºå³å€¼å¼•ç”¨ã€‚</p>
</blockquote>
<p>éœ€è¦æ³¨æ„çš„ï¼Œå’Œå£°æ˜å·¦å€¼å¼•ç”¨ä¸€æ ·ï¼Œå³å€¼å¼•ç”¨ä¹Ÿå¿…é¡»ç«‹å³è¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼Œä¸”åªèƒ½ä½¿ç”¨å³å€¼è¿›è¡Œåˆå§‹åŒ–ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> &amp;b = num;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> &amp;c = <span class="number">10</span>;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<p>å’Œå¸¸é‡å·¦å€¼å¼•ç”¨ä¸åŒçš„æ˜¯ï¼Œå³å€¼å¼•ç”¨è¿˜å¯ä»¥å¯¹å³å€¼è¿›è¡Œä¿®æ”¹ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="comment">//int &amp;&amp; a = num;  //å³å€¼å¼•ç”¨ä¸èƒ½åˆå§‹åŒ–ä¸ºå·¦å€¼</span></span><br><span class="line"><span class="type">int</span> &amp;&amp; a = <span class="number">10</span>;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºè¾“å‡ºç»“æœä¸º 100ã€‚</p>
<p>å¦å¤–å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒC++ è¯­æ³•ä¸Šæ˜¯æ”¯æŒå®šä¹‰å¸¸é‡å³å€¼å¼•ç”¨çš„ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> &amp;&amp; a = <span class="number">10</span>;</span><br><span class="line">a = <span class="number">100</span>;</span><br><span class="line">cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<p>ä½†è¿™ç§å®šä¹‰å‡ºæ¥çš„å³å€¼å¼•ç”¨å¹¶æ— å®é™…ç”¨å¤„ã€‚ä¸€æ–¹é¢ï¼Œå³å€¼å¼•ç”¨ä¸»è¦ç”¨äºç§»åŠ¨è¯­ä¹‰å’Œå®Œç¾è½¬å‘ï¼Œå…¶ä¸­å‰è€…éœ€è¦æœ‰ä¿®æ”¹å³å€¼çš„æƒé™ï¼›å…¶æ¬¡ï¼Œå¸¸é‡å³å€¼å¼•ç”¨çš„ä½œç”¨å°±æ˜¯å¼•ç”¨ä¸€ä¸ªä¸å¯ä¿®æ”¹çš„å³å€¼ï¼Œè¿™é¡¹å·¥ä½œå®Œå…¨å¯ä»¥äº¤ç»™å¸¸é‡å·¦å€¼å¼•ç”¨å®Œæˆã€‚</p>
<p>å­¦åˆ°è¿™é‡Œï¼Œä¸€äº›è¯»è€…å¯èƒ½æ— æ³•è®°æ¸…æ¥šå·¦å€¼å¼•ç”¨å’Œå³å€¼å¼•ç”¨å„è‡ªå¯ä»¥å¼•ç”¨å·¦å€¼è¿˜æ˜¯å³å€¼ï¼Œè¿™é‡Œç»™å¤§å®¶ä¸€å¼ è¡¨æ ¼ï¼Œæ–¹ä¾¿å¤§å®¶è®°å¿†ï¼š</p>
<table>
<thead>
<tr>
<th>å¼•ç”¨ç±»å‹</th>
<th>å¯ä»¥å¼•ç”¨çš„å€¼ç±»å‹</th>
<th>ä½¿ç”¨åœºæ™¯</th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>éå¸¸é‡å·¦å€¼</td>
<td>å¸¸é‡å·¦å€¼</td>
<td>éå¸¸é‡å³å€¼</td>
<td>å¸¸é‡å³å€¼</td>
<td></td>
<td></td>
</tr>
<tr>
<td>éå¸¸é‡å·¦å€¼å¼•ç”¨</td>
<td>Y</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>æ— </td>
</tr>
<tr>
<td>å¸¸é‡å·¦å€¼å¼•ç”¨</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>å¸¸ç”¨äºç±»ä¸­æ„å»ºæ‹·è´æ„é€ å‡½æ•°</td>
</tr>
<tr>
<td>éå¸¸é‡å³å€¼å¼•ç”¨</td>
<td>N</td>
<td>N</td>
<td>Y</td>
<td>N</td>
<td>ç§»åŠ¨è¯­ä¹‰ã€å®Œç¾è½¬å‘</td>
</tr>
<tr>
<td>å¸¸é‡å³å€¼å¼•ç”¨</td>
<td>N</td>
<td>N</td>
<td>Y</td>
<td>Y</td>
<td>æ— å®é™…ç”¨é€”</td>
</tr>
</tbody>
</table>
<p>è¡¨ä¸­ï¼ŒY è¡¨ç¤ºæ”¯æŒï¼ŒN è¡¨ç¤ºä¸æ”¯æŒã€‚</p>
<blockquote>
<p>å…¶å®ï¼ŒC++11 æ ‡å‡†ä¸­å¯¹å³å€¼åšäº†æ›´ç»†è‡´çš„åˆ’åˆ†ï¼Œåˆ†åˆ«ç§°ä¸ºçº¯å³å€¼ï¼ˆPure valueï¼Œç®€ç§° pvalueï¼‰å’Œå°†äº¡å€¼ï¼ˆeXpiring valueï¼Œç®€ç§° xvalue ï¼‰ã€‚å…¶ä¸­çº¯å³å€¼å°±æ˜¯ C++98/03 æ ‡å‡†ä¸­çš„å³å€¼ï¼ˆæœ¬èŠ‚ä¸­å·²ç»åšäº†å¤§ç¯‡å¹…çš„è®²è§£ï¼‰ï¼Œè€Œå°†äº¡å€¼åˆ™æŒ‡çš„æ˜¯å’Œå³å€¼å¼•ç”¨ç›¸å…³çš„è¡¨è¾¾å¼ï¼ˆæ¯”å¦‚æŸå‡½æ•°è¿”å›çš„ T &amp;&amp; ç±»å‹çš„è¡¨è¾¾å¼ï¼‰ã€‚å¯¹äºçº¯å³å€¼å’Œå°†äº¡å€¼ï¼Œéƒ½å±äºå³å€¼ï¼Œè¯»è€…çŸ¥é“å³å¯ï¼Œä¸å¿…æ·±ç©¶ã€‚</p>
</blockquote>
<h2 id="c-11ç§»åŠ¨æ„é€ å‡½æ•°çš„åŠŸèƒ½å’Œç”¨æ³•"><a class="header-anchor" href="#c-11ç§»åŠ¨æ„é€ å‡½æ•°çš„åŠŸèƒ½å’Œç”¨æ³•">ğŸŒ³</a>C++11ç§»åŠ¨æ„é€ å‡½æ•°çš„åŠŸèƒ½å’Œç”¨æ³•</h2>
<p>ã€Š<a href="http://c.biancheng.net/view/7829.html">C++11å³å€¼å¼•ç”¨</a>ã€‹ä¸€èŠ‚ä¸­ï¼Œç»™è¯»è€…è¯¦ç»†ä»‹ç»äº† C++ å³å€¼å¼•ç”¨çš„å«ä¹‰å’Œç”¨æ³•ï¼ŒåŒæ—¶è¿˜æåˆ°â€œå³å€¼å¼•ç”¨ä¸»è¦ç”¨äºå®ç°ç§»åŠ¨ï¼ˆmoveï¼‰è¯­ä¹‰å’Œå®Œç¾è½¬å‘â€ã€‚æœ‰å…³å®Œç¾è½¬å‘ï¼Œåç»­ç« èŠ‚ä¼šåšè¯¦ç»†ä»‹ç»ï¼Œæœ¬èŠ‚ä¸»è¦è®²è§£ç§»åŠ¨è¯­ä¹‰çš„å«ä¹‰ä»¥åŠå®ç°å®ƒçš„æ–¹å¼ã€‚</p>
<h3 id="c-11ç§»åŠ¨è¯­ä¹‰æ˜¯ä»€ä¹ˆ"><a class="header-anchor" href="#c-11ç§»åŠ¨è¯­ä¹‰æ˜¯ä»€ä¹ˆ">ğŸŒ³</a>C++11ç§»åŠ¨è¯­ä¹‰æ˜¯ä»€ä¹ˆ</h3>
<p>åœ¨ C++ 11 æ ‡å‡†ä¹‹å‰ï¼ˆC++ 98/03 æ ‡å‡†ä¸­ï¼‰ï¼Œå¦‚æœæƒ³ç”¨å…¶å®ƒå¯¹è±¡åˆå§‹åŒ–ä¸€ä¸ªåŒç±»çš„æ–°å¯¹è±¡ï¼Œåªèƒ½å€ŸåŠ©ç±»ä¸­çš„å¤åˆ¶ï¼ˆæ‹·è´ï¼‰æ„é€ å‡½æ•°ã€‚é€šè¿‡ã€Š<a href="http://c.biancheng.net/view/2334.html">C++æ‹·è´æ„é€ å‡½æ•°</a>ã€‹ä¸€èŠ‚çš„å­¦ä¹ æˆ‘ä»¬çŸ¥é“ï¼Œæ‹·è´æ„é€ å‡½æ•°çš„å®ç°åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸ºæ–°å¯¹è±¡å¤åˆ¶ä¸€ä»½å’Œå…¶å®ƒå¯¹è±¡ä¸€æ¨¡ä¸€æ ·çš„æ•°æ®ã€‚</p>
<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ç±»ä¸­æ‹¥æœ‰æŒ‡é’ˆç±»å‹çš„æˆå‘˜å˜é‡æ—¶ï¼Œæ‹·è´æ„é€ å‡½æ•°ä¸­éœ€è¦ä»¥æ·±æ‹·è´ï¼ˆè€Œéæµ…æ‹·è´ï¼‰çš„æ–¹å¼å¤åˆ¶è¯¥æŒ‡é’ˆæˆå‘˜ã€‚æœ‰å…³æ·±æ‹·è´å’Œæµ…æ‹·è´ä»¥åŠå®ƒä»¬çš„åŒºåˆ«ï¼Œè¯»è€…å¯é˜…è¯»ã€Š<a href="http://c.biancheng.net/view/2336.html">C++æ·±æ‹·è´å’Œæµ…æ‹·è´</a>ã€‹ä¸€æ–‡åšè¯¦ç»†äº†è§£ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">demo</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   <span class="built_in">demo</span>():<span class="built_in">num</span>(<span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">0</span>))&#123;</span><br><span class="line">      cout&lt;&lt;<span class="string">&quot;construct!&quot;</span>&lt;&lt;endl;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line">   <span class="built_in">demo</span>(<span class="type">const</span> demo &amp;d):<span class="built_in">num</span>(<span class="keyword">new</span> <span class="built_in">int</span>(*d.num))&#123;</span><br><span class="line">      cout&lt;&lt;<span class="string">&quot;copy construct!&quot;</span>&lt;&lt;endl;</span><br><span class="line">   &#125;</span><br><span class="line">   ~<span class="built_in">demo</span>()&#123;</span><br><span class="line">      cout&lt;&lt;<span class="string">&quot;class destruct!&quot;</span>&lt;&lt;endl;</span><br><span class="line">   &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">   <span class="type">int</span> *num;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">demo <span class="title">get_demo</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">demo</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    demo a = <span class="built_in">get_demo</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112131415161718192021222324</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘ä»¬ä¸º demo ç±»è‡ªå®šä¹‰äº†ä¸€ä¸ªæ‹·è´æ„é€ å‡½æ•°ã€‚è¯¥å‡½æ•°åœ¨æ‹·è´ d.num æŒ‡é’ˆæˆå‘˜æ—¶ï¼Œå¿…é¡»é‡‡ç”¨æ·±æ‹·è´çš„æ–¹å¼ï¼Œå³æ‹·è´è¯¥æŒ‡é’ˆæˆå‘˜æœ¬èº«çš„åŒæ—¶ï¼Œè¿˜è¦æ‹·è´æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜èµ„æºã€‚å¦åˆ™ä¸€æ—¦å¤šä¸ªå¯¹è±¡ä¸­çš„æŒ‡é’ˆæˆå‘˜æŒ‡å‘åŒä¸€å—å †ç©ºé—´ï¼Œè¿™äº›å¯¹è±¡ææ„æ—¶å°±ä¼šå¯¹è¯¥ç©ºé—´é‡Šæ”¾å¤šæ¬¡ï¼Œè¿™æ˜¯ä¸å…è®¸çš„ã€‚</p>
</blockquote>
<p>å¯ä»¥çœ‹åˆ°ï¼Œç¨‹åºä¸­å®šä¹‰äº†ä¸€ä¸ªå¯è¿”å› demo å¯¹è±¡çš„ get_demo() å‡½æ•°ï¼Œç”¨äºåœ¨ main() ä¸»å‡½æ•°ä¸­åˆå§‹åŒ– a å¯¹è±¡ï¼Œå…¶æ•´ä¸ªåˆå§‹åŒ–çš„æµç¨‹åŒ…å«ä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>æ‰§è¡Œ get_demo() å‡½æ•°å†…éƒ¨çš„ demo() è¯­å¥ï¼Œå³è°ƒç”¨ demo ç±»çš„é»˜è®¤æ„é€ å‡½æ•°ç”Ÿæˆä¸€ä¸ªåŒ¿åå¯¹è±¡ï¼›</li>
<li>æ‰§è¡Œ return demo() è¯­å¥ï¼Œä¼šè°ƒç”¨æ‹·è´æ„é€ å‡½æ•°å¤åˆ¶ä¸€ä»½ä¹‹å‰ç”Ÿæˆçš„åŒ¿åå¯¹è±¡ï¼Œå¹¶å°†å…¶ä½œä¸º get_demo() å‡½æ•°çš„è¿”å›å€¼ï¼ˆå‡½æ•°ä½“æ‰§è¡Œå®Œæ¯•ä¹‹å‰ï¼ŒåŒ¿åå¯¹è±¡ä¼šè¢«ææ„é”€æ¯ï¼‰ï¼›</li>
<li>æ‰§è¡Œ a = get_demo() è¯­å¥ï¼Œå†è°ƒç”¨ä¸€æ¬¡æ‹·è´æ„é€ å‡½æ•°ï¼Œå°†ä¹‹å‰æ‹·è´å¾—åˆ°çš„ä¸´æ—¶å¯¹è±¡å¤åˆ¶ç»™ aï¼ˆæ­¤è¡Œä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œget_demo() å‡½æ•°è¿”å›çš„å¯¹è±¡ä¼šè¢«ææ„ï¼‰ï¼›</li>
<li>ç¨‹åºæ‰§è¡Œç»“æŸå‰ï¼Œä¼šè‡ªè¡Œè°ƒç”¨ demo ç±»çš„ææ„å‡½æ•°é”€æ¯ aã€‚</li>
</ol>
<p>æ³¨æ„ï¼Œç›®å‰å¤šæ•°ç¼–è¯‘å™¨éƒ½ä¼šå¯¹ç¨‹åºä¸­å‘ç”Ÿçš„æ‹·è´æ“ä½œè¿›è¡Œä¼˜åŒ–ï¼Œå› æ­¤å¦‚æœæˆ‘ä»¬ä½¿ç”¨ VS 2017ã€codeblocks ç­‰è¿™äº›ç¼–è¯‘å™¨è¿è¡Œæ­¤ç¨‹åºæ—¶ï¼Œçœ‹åˆ°çš„å¾€å¾€æ˜¯ä¼˜åŒ–åçš„è¾“å‡ºç»“æœï¼š</p>
<p>construct!<br>
class destruct!</p>
<p>è€ŒåŒæ ·çš„ç¨‹åºï¼Œå¦‚æœåœ¨ Linux ä¸Šä½¿ç”¨<code>g++ demo.cpp -fno-elide-constructors</code>å‘½ä»¤è¿è¡Œï¼ˆå…¶ä¸­ demo.cpp æ˜¯ç¨‹åºæ–‡ä»¶çš„åç§°ï¼‰ï¼Œå°±å¯ä»¥çœ‹åˆ°å®Œæ•´çš„è¾“å‡ºç»“æœï¼š</p>
<p>construct! &lt;-- æ‰§è¡Œ demo()<br>
copy construct! &lt;-- æ‰§è¡Œ return demo()<br>
class destruct! &lt;-- é”€æ¯ demo() äº§ç”Ÿçš„åŒ¿åå¯¹è±¡<br>
copy construct! &lt;-- æ‰§è¡Œ a = get_demo()<br>
class destruct! &lt;-- é”€æ¯ get_demo() è¿”å›çš„ä¸´æ—¶å¯¹è±¡<br>
class destruct! &lt;-- é”€æ¯ a</p>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œåˆ©ç”¨æ‹·è´æ„é€ å‡½æ•°å®ç°å¯¹ a å¯¹è±¡çš„åˆå§‹åŒ–ï¼Œåº•å±‚å®é™…ä¸Šè¿›è¡Œäº† 2 æ¬¡æ‹·è´ï¼ˆè€Œä¸”æ˜¯æ·±æ‹·è´ï¼‰æ“ä½œã€‚å½“ç„¶ï¼Œå¯¹äºä»…ç”³è¯·å°‘é‡å †ç©ºé—´çš„ä¸´æ—¶å¯¹è±¡æ¥è¯´ï¼Œæ·±æ‹·è´çš„æ‰§è¡Œæ•ˆç‡ä¾æ—§å¯ä»¥æ¥å—ï¼Œä½†å¦‚æœä¸´æ—¶å¯¹è±¡ä¸­çš„æŒ‡é’ˆæˆå‘˜ç”³è¯·äº†å¤§é‡çš„å †ç©ºé—´ï¼Œé‚£ä¹ˆ 2 æ¬¡æ·±æ‹·è´æ“ä½œåŠ¿å¿…ä¼šå½±å“ a å¯¹è±¡åˆå§‹åŒ–çš„æ‰§è¡Œæ•ˆç‡ã€‚</p>
<blockquote>
<p>äº‹å®ä¸Šï¼Œæ­¤é—®é¢˜ä¸€ç›´å­˜ç•™åœ¨ä»¥ C++ 98/03 æ ‡å‡†ç¼–å†™çš„ C++ ç¨‹åºä¸­ã€‚ç”±äºä¸´æ—¶å˜é‡çš„äº§ç”Ÿã€é”€æ¯ä»¥åŠå‘ç”Ÿçš„æ‹·è´æ“ä½œæœ¬èº«å°±æ˜¯å¾ˆéšæ™¦çš„ï¼ˆç¼–è¯‘å™¨å¯¹è¿™äº›è¿‡ç¨‹åšäº†ä¸“é—¨çš„ä¼˜åŒ–ï¼‰ï¼Œä¸”å¹¶ä¸ä¼šå½±å“ç¨‹åºçš„æ­£ç¡®æ€§ï¼Œå› æ­¤å¾ˆå°‘è¿›å…¥ç¨‹åºå‘˜çš„è§†é‡ã€‚</p>
</blockquote>
<p>é‚£ä¹ˆå½“ç±»ä¸­åŒ…å«æŒ‡é’ˆç±»å‹çš„æˆå‘˜å˜é‡ï¼Œä½¿ç”¨å…¶å®ƒå¯¹è±¡æ¥åˆå§‹åŒ–åŒç±»å¯¹è±¡æ—¶ï¼Œæ€æ ·æ‰èƒ½é¿å…æ·±æ‹·è´å¯¼è‡´çš„æ•ˆç‡é—®é¢˜å‘¢ï¼ŸC++11 æ ‡å‡†å¼•å…¥äº†è§£å†³æ–¹æ¡ˆï¼Œè¯¥æ ‡å‡†ä¸­å¼•å…¥äº†å³å€¼å¼•ç”¨çš„è¯­æ³•ï¼Œå€ŸåŠ©å®ƒå¯ä»¥å®ç°ç§»åŠ¨è¯­ä¹‰ã€‚</p>
<h3 id="c-ç§»åŠ¨æ„é€ å‡½æ•°-ç§»åŠ¨è¯­ä¹‰çš„å…·ä½“å®ç°"><a class="header-anchor" href="#c-ç§»åŠ¨æ„é€ å‡½æ•°-ç§»åŠ¨è¯­ä¹‰çš„å…·ä½“å®ç°">ğŸŒ³</a>C++ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆç§»åŠ¨è¯­ä¹‰çš„å…·ä½“å®ç°ï¼‰</h3>
<p>æ‰€è°“ç§»åŠ¨è¯­ä¹‰ï¼ŒæŒ‡çš„å°±æ˜¯ä»¥ç§»åŠ¨è€Œéæ·±æ‹·è´çš„æ–¹å¼åˆå§‹åŒ–å«æœ‰æŒ‡é’ˆæˆå‘˜çš„ç±»å¯¹è±¡ã€‚ç®€å•çš„ç†è§£ï¼Œç§»åŠ¨è¯­ä¹‰æŒ‡çš„å°±æ˜¯å°†å…¶ä»–å¯¹è±¡ï¼ˆé€šå¸¸æ˜¯ä¸´æ—¶å¯¹è±¡ï¼‰æ‹¥æœ‰çš„å†…å­˜èµ„æºâ€œç§»ä¸ºå·²ç”¨â€ã€‚</p>
<p>ä»¥å‰é¢ç¨‹åºä¸­çš„ demo ç±»ä¸ºä¾‹ï¼Œè¯¥ç±»çš„æˆå‘˜éƒ½åŒ…å«ä¸€ä¸ªæ•´å½¢çš„æŒ‡é’ˆæˆå‘˜ï¼Œå…¶é»˜è®¤æŒ‡å‘çš„æ˜¯å®¹çº³ä¸€ä¸ªæ•´å½¢å˜é‡çš„å †ç©ºé—´ã€‚å½“ä½¿ç”¨ get_demo() å‡½æ•°è¿”å›çš„ä¸´æ—¶å¯¹è±¡åˆå§‹åŒ– a æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦å°†ä¸´æ—¶å¯¹è±¡çš„ num æŒ‡é’ˆç›´æ¥æµ…æ‹·è´ç»™ a.numï¼Œç„¶åä¿®æ”¹è¯¥ä¸´æ—¶å¯¹è±¡ä¸­ num æŒ‡é’ˆçš„æŒ‡å‘ï¼ˆé€šå¸¸å¦å…¶æŒ‡å‘ NULLï¼‰ï¼Œè¿™æ ·å°±å®Œæˆäº† a.num çš„åˆå§‹åŒ–ã€‚</p>
<blockquote>
<p>äº‹å®ä¸Šï¼Œå¯¹äºç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¸´æ—¶å¯¹è±¡ï¼Œå¾€å¾€åªç”¨äºä¼ é€’æ•°æ®ï¼ˆæ²¡æœ‰å…¶å®ƒçš„ç”¨å¤„ï¼‰ï¼Œå¹¶ä¸”ä¼šå¾ˆå¿«ä¼šè¢«é”€æ¯ã€‚å› æ­¤åœ¨ä½¿ç”¨ä¸´æ—¶å¯¹è±¡åˆå§‹åŒ–æ–°å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åŒ…å«çš„æŒ‡é’ˆæˆå‘˜æŒ‡å‘çš„å†…å­˜èµ„æºç›´æ¥ç§»ç»™æ–°å¯¹è±¡æ‰€æœ‰ï¼Œæ— éœ€å†æ–°æ‹·è´ä¸€ä»½ï¼Œè¿™å¤§å¤§æé«˜äº†åˆå§‹åŒ–çš„æ‰§è¡Œæ•ˆç‡ã€‚</p>
</blockquote>
<p>ä¾‹å¦‚ï¼Œä¸‹é¢ç¨‹åºå¯¹ demo ç±»è¿›è¡Œäº†ä¿®æ”¹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">demo</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">demo</span>():<span class="built_in">num</span>(<span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">0</span>))&#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;construct!&quot;</span>&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">demo</span>(<span class="type">const</span> demo &amp;d):<span class="built_in">num</span>(<span class="keyword">new</span> <span class="built_in">int</span>(*d.num))&#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;copy construct!&quot;</span>&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ·»åŠ ç§»åŠ¨æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="built_in">demo</span>(demo &amp;&amp;d):<span class="built_in">num</span>(d.num)&#123;</span><br><span class="line">        d.num = <span class="literal">NULL</span>;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;move construct!&quot;</span>&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    ~<span class="built_in">demo</span>()&#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;class destruct!&quot;</span>&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> *num;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">demo <span class="title">get_demo</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">demo</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    demo a = <span class="built_in">get_demo</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910111213141516171819202122232425262728</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ä¹‹å‰ demo ç±»çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬åˆæ‰‹åŠ¨ä¸ºå…¶æ·»åŠ äº†ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚å’Œå…¶å®ƒæ„é€ å‡½æ•°ä¸åŒï¼Œæ­¤æ„é€ å‡½æ•°ä½¿ç”¨å³å€¼å¼•ç”¨å½¢å¼çš„å‚æ•°ï¼Œåˆç§°ä¸ºç§»åŠ¨æ„é€ å‡½æ•°ã€‚å¹¶ä¸”åœ¨æ­¤æ„é€ å‡½æ•°ä¸­ï¼Œnum æŒ‡é’ˆå˜é‡é‡‡ç”¨çš„æ˜¯æµ…æ‹·è´çš„å¤åˆ¶æ–¹å¼ï¼ŒåŒæ—¶åœ¨å‡½æ•°å†…éƒ¨é‡ç½®äº† d.numï¼Œæœ‰æ•ˆé¿å…äº†â€œåŒä¸€å—å¯¹ç©ºé—´è¢«é‡Šæ”¾å¤šæ¬¡â€æƒ…å†µçš„å‘ç”Ÿã€‚</p>
<p>åœ¨ Linux ç³»ç»Ÿä¸­ä½¿ç”¨<code>g++ demo.cpp -o demo.exe -std=c++0x -fno-elide-constructors</code>å‘½ä»¤æ‰§è¡Œæ­¤ç¨‹åºï¼Œè¾“å‡ºç»“æœä¸ºï¼š</p>
<p>construct!<br>
move construct!<br>
class destruct!<br>
move construct!<br>
class destruct!<br>
class destruct!</p>
<p>é€šè¿‡æ‰§è¡Œç»“æœæˆ‘ä»¬ä¸éš¾å¾—çŸ¥ï¼Œå½“ä¸º demo ç±»æ·»åŠ ç§»åŠ¨æ„é€ å‡½æ•°ä¹‹åï¼Œä½¿ç”¨ä¸´æ—¶å¯¹è±¡åˆå§‹åŒ– a å¯¹è±¡è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ 2 æ¬¡æ‹·è´æ“ä½œï¼Œéƒ½è½¬ç”±ç§»åŠ¨æ„é€ å‡½æ•°å®Œæˆã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œé const å³å€¼å¼•ç”¨åªèƒ½æ“ä½œå³å€¼ï¼Œç¨‹åºæ‰§è¡Œç»“æœä¸­äº§ç”Ÿçš„ä¸´æ—¶å¯¹è±¡ï¼ˆä¾‹å¦‚å‡½æ•°è¿”å›å€¼ã€lambda è¡¨è¾¾å¼ç­‰ï¼‰æ—¢æ— åç§°ä¹Ÿæ— æ³•è·å–å…¶å­˜å‚¨åœ°å€ï¼Œæ‰€ä»¥å±äºå³å€¼ã€‚å½“ç±»ä¸­åŒæ—¶åŒ…å«æ‹·è´æ„é€ å‡½æ•°å’Œç§»åŠ¨æ„é€ å‡½æ•°æ—¶ï¼Œå¦‚æœä½¿ç”¨ä¸´æ—¶å¯¹è±¡åˆå§‹åŒ–å½“å‰ç±»çš„å¯¹è±¡ï¼Œç¼–è¯‘å™¨ä¼šä¼˜å…ˆè°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°æ¥å®Œæˆæ­¤æ“ä½œã€‚åªæœ‰å½“ç±»ä¸­æ²¡æœ‰åˆé€‚çš„ç§»åŠ¨æ„é€ å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨æ‰ä¼šé€€è€Œæ±‚å…¶æ¬¡ï¼Œè°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ã€‚</p>
<blockquote>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œé€šå¸¸åœ¨ç±»ä¸­è‡ªå®šä¹‰ç§»åŠ¨æ„é€ å‡½æ•°çš„åŒæ—¶ï¼Œä¼šå†ä¸ºå…¶è‡ªå®šä¹‰ä¸€ä¸ªé€‚å½“çš„æ‹·è´æ„é€ å‡½æ•°ï¼Œç”±æ­¤å½“ç”¨æˆ·åˆ©ç”¨å³å€¼åˆå§‹åŒ–ç±»å¯¹è±¡æ—¶ï¼Œä¼šè°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°ï¼›ä½¿ç”¨å·¦å€¼ï¼ˆéå³å€¼ï¼‰åˆå§‹åŒ–ç±»å¯¹è±¡æ—¶ï¼Œä¼šè°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ã€‚</p>
</blockquote>
<p>è¯»è€…å¯èƒ½ä¼šé—®ï¼Œå¦‚æœä½¿ç”¨å·¦å€¼åˆå§‹åŒ–åŒç±»å¯¹è±¡ï¼Œä½†ä¹Ÿæƒ³è°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°å®Œæˆï¼Œæœ‰æ²¡æœ‰åŠæ³•å¯ä»¥å®ç°å‘¢ï¼Ÿ</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå·¦å€¼åˆå§‹åŒ–åŒç±»å¯¹è±¡åªèƒ½é€šè¿‡æ‹·è´æ„é€ å‡½æ•°å®Œæˆï¼Œå¦‚æœæƒ³è°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œåˆ™å¿…é¡»ä½¿ç”¨å³å€¼è¿›è¡Œåˆå§‹åŒ–ã€‚C++11 æ ‡å‡†ä¸­ä¸ºäº†æ»¡è¶³ç”¨æˆ·ä½¿ç”¨å·¦å€¼åˆå§‹åŒ–åŒç±»å¯¹è±¡æ—¶ä¹Ÿé€šè¿‡ç§»åŠ¨æ„é€ å‡½æ•°å®Œæˆçš„éœ€æ±‚ï¼Œæ–°å¼•å…¥äº† std::move() å‡½æ•°ï¼Œå®ƒå¯ä»¥å°†å·¦å€¼å¼ºåˆ¶è½¬æ¢æˆå¯¹åº”çš„å³å€¼ï¼Œç”±æ­¤ä¾¿å¯ä»¥ä½¿ç”¨ç§»åŠ¨æ„é€ å‡½æ•°ã€‚</p>
<blockquote>
<p>æœ‰å…³ std::move() å‡½æ•°çš„ç”¨æ³•ï¼Œåç»­ç« èŠ‚ä¼šåšè¯¦ç»†è®²è§£ã€‚</p>
</blockquote>
<h2 id="c-11-move-å‡½æ•°ï¼šå°†å·¦å€¼å¼ºåˆ¶è½¬æ¢ä¸ºå³å€¼"><a class="header-anchor" href="#c-11-move-å‡½æ•°ï¼šå°†å·¦å€¼å¼ºåˆ¶è½¬æ¢ä¸ºå³å€¼">ğŸŒ³</a>C++11 move()å‡½æ•°ï¼šå°†å·¦å€¼å¼ºåˆ¶è½¬æ¢ä¸ºå³å€¼</h2>
<p>é€šè¿‡å­¦ä¹  ã€Š<a href="http://c.biancheng.net/view/7847.html">C++11ç§»åŠ¨æ„é€ å‡½æ•°</a>ã€‹ä¸€èŠ‚æˆ‘ä»¬çŸ¥é“ï¼ŒC++11 æ ‡å‡†ä¸­å€ŸåŠ©å³å€¼å¼•ç”¨å¯ä»¥ä¸ºæŒ‡å®šç±»æ·»åŠ ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œè¿™æ ·å½“ä½¿ç”¨è¯¥ç±»çš„å³å€¼å¯¹è±¡ï¼ˆå¯ä»¥ç†è§£ä¸ºä¸´æ—¶å¯¹è±¡ï¼‰åˆå§‹åŒ–åŒç±»å¯¹è±¡æ—¶ï¼Œç¼–è¯‘å™¨ä¼šä¼˜å…ˆé€‰æ‹©ç§»åŠ¨æ„é€ å‡½æ•°ã€‚</p>
<p>æ³¨æ„ï¼Œç§»åŠ¨æ„é€ å‡½æ•°çš„è°ƒç”¨æ—¶æœºæ˜¯ï¼šç”¨åŒç±»çš„å³å€¼å¯¹è±¡åˆå§‹åŒ–æ–°å¯¹è±¡ã€‚é‚£ä¹ˆï¼Œç”¨å½“å‰ç±»çš„å·¦å€¼å¯¹è±¡ï¼ˆæœ‰åç§°ï¼Œèƒ½è·å–å…¶å­˜å‚¨åœ°å€çš„å®ä¾‹å¯¹è±¡ï¼‰åˆå§‹åŒ–åŒç±»å¯¹è±¡æ—¶ï¼Œæ˜¯å¦å°±æ— æ³•è°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°äº†å‘¢ï¼Ÿå½“ç„¶ä¸æ˜¯ï¼ŒC++11 æ ‡å‡†ä¸­å·²ç»ç»™å‡ºäº†è§£å†³æ–¹æ¡ˆï¼Œå³è°ƒç”¨ move() å‡½æ•°ã€‚</p>
<p>move æœ¬æ„ä¸º â€œç§»åŠ¨â€ï¼Œä½†è¯¥å‡½æ•°å¹¶ä¸èƒ½ç§»åŠ¨ä»»ä½•æ•°æ®ï¼Œå®ƒçš„åŠŸèƒ½å¾ˆç®€å•ï¼Œå°±æ˜¯å°†æŸä¸ªå·¦å€¼å¼ºåˆ¶è½¬åŒ–ä¸ºå³å€¼ã€‚</p>
<blockquote>
<p>åŸºäº move() å‡½æ•°ç‰¹æ®Šçš„åŠŸèƒ½ï¼Œå…¶å¸¸ç”¨äºå®ç°ç§»åŠ¨è¯­ä¹‰ã€‚</p>
</blockquote>
<p>move() å‡½æ•°çš„ç”¨æ³•ä¹Ÿå¾ˆç®€å•ï¼Œå…¶è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>
<p>move( arg )</p>
<p>å…¶ä¸­ï¼Œarg è¡¨ç¤ºæŒ‡å®šçš„å·¦å€¼å¯¹è±¡ã€‚è¯¥å‡½æ•°ä¼šè¿”å› arg å¯¹è±¡çš„å³å€¼å½¢å¼ã€‚</p>
<p>ã€ä¾‹ 1ã€‘move() å‡½æ•°çš„åŸºç¡€åº”ç”¨ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">movedemo</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">movedemo</span>():<span class="built_in">num</span>(<span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">0</span>))&#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;construct!&quot;</span>&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="built_in">movedemo</span>(<span class="type">const</span> movedemo &amp;d):<span class="built_in">num</span>(<span class="keyword">new</span> <span class="built_in">int</span>(*d.num))&#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;copy construct!&quot;</span>&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç§»åŠ¨æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="built_in">movedemo</span>(movedemo &amp;&amp;d):<span class="built_in">num</span>(d.num)&#123;</span><br><span class="line">        d.num = <span class="literal">NULL</span>;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;move construct!&quot;</span>&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span>:     <span class="comment">//è¿™é‡Œåº”è¯¥æ˜¯ privateï¼Œä½¿ç”¨ public æ˜¯ä¸ºäº†æ›´æ–¹ä¾¿è¯´æ˜é—®é¢˜</span></span><br><span class="line">    <span class="type">int</span> *num;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    movedemo demo;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;demo2:\n&quot;</span>;</span><br><span class="line">    movedemo demo2 = demo;</span><br><span class="line">    <span class="comment">//cout &lt;&lt; *demo2.num &lt;&lt; endl;   //å¯ä»¥æ‰§è¡Œ</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;demo3:\n&quot;</span>;</span><br><span class="line">    movedemo demo3 = std::<span class="built_in">move</span>(demo);</span><br><span class="line">    <span class="comment">//æ­¤æ—¶ demo.num = NULLï¼Œå› æ­¤ä¸‹é¢ä»£ç ä¼šæŠ¥è¿è¡Œæ—¶é”™è¯¯</span></span><br><span class="line">    <span class="comment">//cout &lt;&lt; *demo.num &lt;&lt; endl;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112131415161718192021222324252627282930</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>construct!<br>
demo2:<br>
copy construct!<br>
demo3:<br>
move construct!</p>
<p>é€šè¿‡è§‚å¯Ÿç¨‹åºçš„è¾“å‡ºç»“æœï¼Œä»¥åŠå¯¹æ¯” demo2 å’Œ demo3 åˆå§‹åŒ–æ“ä½œä¸éš¾å¾—çŸ¥ï¼Œdemo å¯¹è±¡ä½œä¸ºå·¦å€¼ï¼Œç›´æ¥ç”¨äºåˆå§‹åŒ– demo2 å¯¹è±¡ï¼Œå…¶åº•å±‚è°ƒç”¨çš„æ˜¯æ‹·è´æ„é€ å‡½æ•°ï¼›è€Œé€šè¿‡è°ƒç”¨ move() å‡½æ•°å¯ä»¥å¾—åˆ° demo å¯¹è±¡çš„å³å€¼å½¢å¼ï¼Œç”¨å…¶åˆå§‹åŒ– demo3 å¯¹è±¡ï¼Œç¼–è¯‘å™¨ä¼šä¼˜å…ˆè°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼Œè°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼Œå¹¶ä¸å½±å“ demo å¯¹è±¡ï¼Œä½†å¦‚æœè°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œç”±äºå‡½æ•°å†…éƒ¨ä¼šé‡ç½® demo.num æŒ‡é’ˆçš„æŒ‡å‘ä¸º NULLï¼Œæ‰€ä»¥ç¨‹åºä¸­ç¬¬ 30 è¡Œä»£ç ä¼šå¯¼è‡´ç¨‹åºè¿è¡Œæ—¶å‘ç”Ÿé”™è¯¯ã€‚</p>
</blockquote>
<p>ã€ä¾‹ 2ã€‘çµæ´»ä½¿ç”¨ move() å‡½æ•°ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">first</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">first</span>() :<span class="built_in">num</span>(<span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">0</span>)) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;construct!&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç§»åŠ¨æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="built_in">first</span>(first &amp;&amp;d) :<span class="built_in">num</span>(d.num) &#123;</span><br><span class="line">        d.num = <span class="literal">NULL</span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;first move construct!&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span>:    <span class="comment">//è¿™é‡Œåº”è¯¥æ˜¯ privateï¼Œä½¿ç”¨ public æ˜¯ä¸ºäº†æ›´æ–¹ä¾¿è¯´æ˜é—®é¢˜</span></span><br><span class="line">    <span class="type">int</span> *num;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">second</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">second</span>() :<span class="built_in">fir</span>() &#123;&#125;</span><br><span class="line">    <span class="comment">//ç”¨ first ç±»çš„ç§»åŠ¨æ„é€ å‡½æ•°åˆå§‹åŒ– fir</span></span><br><span class="line">    <span class="built_in">second</span>(second &amp;&amp; sec) :<span class="built_in">fir</span>(<span class="built_in">move</span>(sec.fir)) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;second move construct&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span>:    <span class="comment">//è¿™é‡Œä¹Ÿåº”è¯¥æ˜¯ privateï¼Œä½¿ç”¨ public æ˜¯ä¸ºäº†æ›´æ–¹ä¾¿è¯´æ˜é—®é¢˜</span></span><br><span class="line">    first fir;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    second oth;</span><br><span class="line">    second oth2 = <span class="built_in">move</span>(oth);</span><br><span class="line">    <span class="comment">//cout &lt;&lt; *oth.fir.num &lt;&lt; endl;   //ç¨‹åºæŠ¥è¿è¡Œæ—¶é”™è¯¯</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910111213141516171819202122232425262728293031</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>construct!<br>
first move construct!<br>
second move construct</p>
<p>ç¨‹åºä¸­åˆ†åˆ«æ„å»ºäº† first å’Œ second è¿™ 2 ä¸ªç±»ï¼Œå…¶ä¸­ second ç±»ä¸­åŒ…å«ä¸€ä¸ª first ç±»å¯¹è±¡ã€‚å¦‚æœè¯»è€…ä»”ç»†è§‚å¯Ÿä¸éš¾å‘ç°ï¼Œç¨‹åºä¸­ä½¿ç”¨äº† 2 æ­¤ move() å‡½æ•°ï¼š</p>
<ul>
<li>ç¨‹åºç¬¬ 31 è¡Œï¼šç”±äº oth ä¸ºå·¦å€¼ï¼Œå¦‚æœæƒ³è°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°ä¸º oth2 åˆå§‹åŒ–ï¼Œéœ€å…ˆåˆ©ç”¨ move() å‡½æ•°ç”Ÿæˆä¸€ä¸ª oth çš„å³å€¼ç‰ˆæœ¬ï¼›</li>
<li>ç¨‹åºç¬¬ 22 è¡Œï¼šoth å¯¹è±¡å†…éƒ¨è¿˜åŒ…å«ä¸€ä¸ª first ç±»å¯¹è±¡ï¼Œå¯¹äº oth.fir æ¥è¯´ï¼Œå…¶ä¹Ÿæ˜¯ä¸€ä¸ªå·¦å€¼ï¼Œæ‰€ä»¥åœ¨åˆå§‹åŒ– oth.fir æ—¶ï¼Œè¿˜éœ€è¦å†è°ƒç”¨ä¸€æ¬¡ move() å‡½æ•°ã€‚</li>
</ul>
<h2 id="c-11å¼•ç”¨é™å®šç¬¦çš„ç”¨æ³•"><a class="header-anchor" href="#c-11å¼•ç”¨é™å®šç¬¦çš„ç”¨æ³•">ğŸŒ³</a>C++11å¼•ç”¨é™å®šç¬¦çš„ç”¨æ³•</h2>
<p>åœ¨ã€Š<a href="http://c.biancheng.net/view/7829.html">C++å³å€¼å¼•ç”¨</a>ã€‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬ç»™æ‚¨ä»‹ç»äº†å·¦å€¼å’Œå³å€¼ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå·¦å€¼å’Œå³å€¼çš„åŒºåˆ†ä¹ŸåŒæ ·é€‚ç”¨äºç±»å¯¹è±¡ï¼Œæœ¬èŠ‚ä¸­å°†å·¦å€¼çš„ç±»å¯¹è±¡ç§°ä¸ºå·¦å€¼å¯¹è±¡ï¼Œå°†å³å€¼çš„ç±»å¯¹è±¡ç§°ä¸ºå³å€¼å¯¹è±¡ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯¹äºç±»ä¸­ç”¨ public ä¿®é¥°çš„æˆå‘˜å‡½æ•°ï¼Œæ—¢å¯ä»¥è¢«å·¦å€¼å¯¹è±¡è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥è¢«å³å€¼å¯¹è±¡è°ƒç”¨ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">demo</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">demo</span>(<span class="type">int</span> num):<span class="built_in">num</span>(num)&#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">get_num</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>-&gt;num;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> num;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">demo <span class="title">a</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">    cout &lt;&lt; a.<span class="built_in">get_num</span>() &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">move</span>(a).<span class="built_in">get_num</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314151617</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œdemo ç±»ä¸­çš„ get_num() æˆå‘˜å‡½æ•°æ—¢å¯ä»¥è¢« a å·¦å€¼å¯¹è±¡è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥è¢« move(a) ç”Ÿæˆçš„å³å€¼ demo å¯¹è±¡è°ƒç”¨ï¼Œè¿è¡Œç¨‹åºä¼šè¾“å‡ºä¸¤ä¸ª 10ã€‚</p>
<p>æŸäº›åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦é™åˆ¶è°ƒç”¨æˆå‘˜å‡½æ•°çš„å¯¹è±¡çš„ç±»å‹ï¼ˆå·¦å€¼è¿˜æ˜¯å³å€¼ï¼‰ï¼Œä¸ºæ­¤ C++11 æ–°æ·»åŠ äº†å¼•ç”¨é™å®šç¬¦ã€‚æ‰€è°“å¼•ç”¨é™å®šç¬¦ï¼Œå°±æ˜¯åœ¨æˆå‘˜å‡½æ•°çš„åé¢æ·»åŠ  â€œ&amp;â€ æˆ–è€… â€œ&amp;&amp;â€ï¼Œä»è€Œé™åˆ¶è°ƒç”¨è€…çš„ç±»å‹ï¼ˆå·¦å€¼è¿˜æ˜¯å³å€¼ï¼‰ã€‚</p>
<p>ä¿®æ”¹ä¸Šé¢ç¨‹åºï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">demo</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">demo</span>(<span class="type">int</span> num):<span class="built_in">num</span>(num)&#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">get_num</span><span class="params">()</span>&amp;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>-&gt;num;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> num;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">demo <span class="title">a</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">    cout &lt;&lt; a.<span class="built_in">get_num</span>() &lt;&lt; endl;          <span class="comment">// æ­£ç¡®</span></span><br><span class="line">    <span class="comment">//cout &lt;&lt; move(a).get_num() &lt;&lt; endl;  // é”™è¯¯</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314151617</span></span><br></pre></td></tr></table></figure>
<p>å’Œä¹‹å‰çš„ç¨‹åºç›¸æ¯”ï¼Œæˆ‘ä»¬ä»…åœ¨ get_num() æˆå‘˜å‡½æ•°çš„åé¢æ·»åŠ äº† â€œ&amp;â€ï¼Œå®ƒå¯ä»¥é™å®šè°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡å¿…é¡»æ˜¯å·¦å€¼å¯¹è±¡ã€‚å› æ­¤ç¬¬ 16 è¡Œä»£ç ä¸­ï¼Œmove(a) ç”Ÿæˆçš„å³å€¼å¯¹è±¡æ˜¯ä¸å…è®¸è°ƒç”¨ get_num() å‡½æ•°çš„ã€‚</p>
<p>åŒç†ï¼Œæˆ‘ä»¬å†æ¬¡ä¿®æ”¹ç¨‹åºï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">demo</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">demo</span>(<span class="type">int</span> num):<span class="built_in">num</span>(num)&#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">get_num</span><span class="params">()</span>&amp;&amp;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>-&gt;num;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> num;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">demo <span class="title">a</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">    <span class="comment">//cout &lt;&lt; a.get_num() &lt;&lt; endl;      // é”™è¯¯</span></span><br><span class="line">    cout &lt;&lt; <span class="built_in">move</span>(a).<span class="built_in">get_num</span>() &lt;&lt; endl;  <span class="comment">// æ­£ç¡®</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314151617</span></span><br></pre></td></tr></table></figure>
<p>å’Œå…ˆå‰ç¨‹åºä¸åŒçš„æ˜¯ï¼Œget_num() å‡½æ•°åæ ¹æœ‰ â€œ&amp;&amp;â€ é™å®šç¬¦ï¼Œå®ƒå¯ä»¥é™å®šè°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡å¿…é¡»æ˜¯ä¸€ä¸ªå³å€¼å¯¹è±¡ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼Œå¼•ç”¨é™å®šç¬¦ä¸é€‚ç”¨äºé™æ€æˆå‘˜å‡½æ•°å’Œå‹å…ƒå‡½æ•°ã€‚</p>
</blockquote>
<h3 id="constå’Œå¼•ç”¨é™å®šç¬¦"><a class="header-anchor" href="#constå’Œå¼•ç”¨é™å®šç¬¦">ğŸŒ³</a>constå’Œå¼•ç”¨é™å®šç¬¦</h3>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œconst ä¹Ÿå¯ä»¥ç”¨äºä¿®é¥°ç±»çš„æˆå‘˜å‡½æ•°ï¼Œæˆ‘ä»¬ä¹ æƒ¯ç§°ä¸ºå¸¸æˆå‘˜å‡½æ•°ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">demo</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">get_num</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„ get_num() å°±æ˜¯ä¸€ä¸ªå¸¸æˆå‘˜å‡½æ•°ã€‚</p>
<p>const å’Œå¼•ç”¨é™å®šç¬¦ä¿®é¥°ç±»çš„æˆå‘˜å‡½æ•°æ—¶ï¼Œéƒ½ä½äºå‡½æ•°çš„æœ«å°¾ã€‚C++11 æ ‡å‡†è§„å®šï¼Œå½“å¼•ç”¨é™å®šç¬¦å’Œ const ä¿®é¥°åŒä¸€ä¸ªç±»çš„æˆå‘˜å‡½æ•°æ—¶ï¼Œconst å¿…é¡»ä½äºå¼•ç”¨é™å®šç¬¦å‰é¢ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå½“ const &amp;&amp; ä¿®é¥°ç±»çš„æˆå‘˜å‡½æ•°æ—¶ï¼Œè°ƒç”¨å®ƒçš„å¯¹è±¡åªèƒ½æ˜¯å³å€¼å¯¹è±¡ï¼›å½“ const &amp; ä¿®é¥°ç±»çš„æˆå‘˜å‡½æ•°æ—¶ï¼Œè°ƒç”¨å®ƒçš„å¯¹è±¡æ—¢å¯ä»¥æ˜¯å·¦å€¼å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯å³å€¼å¯¹è±¡ã€‚æ— è®ºæ˜¯ const &amp;&amp; è¿˜æ˜¯ const &amp; é™å®šçš„æˆå‘˜å‡½æ•°ï¼Œå†…éƒ¨éƒ½ä¸å…è®¸å¯¹å½“å‰å¯¹è±¡åšä¿®æ”¹æ“ä½œã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">demo</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">demo</span>(<span class="type">int</span> num,<span class="type">int</span> num2) :<span class="built_in">num</span>(num),<span class="built_in">num2</span>(num2) &#123;&#125;</span><br><span class="line">    <span class="comment">//å·¦å€¼å’Œå³å€¼å¯¹è±¡éƒ½å¯ä»¥è°ƒç”¨</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">get_num</span><span class="params">()</span> <span class="type">const</span> &amp;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>-&gt;num;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ä»…ä¾›å³å€¼å¯¹è±¡è°ƒç”¨</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">get_num2</span><span class="params">()</span> <span class="type">const</span> &amp;&amp; </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>-&gt;num2;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> num;</span><br><span class="line">    <span class="type">int</span> num2;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">demo <span class="title">a</span><span class="params">(<span class="number">10</span>,<span class="number">20</span>)</span></span>;</span><br><span class="line">    cout &lt;&lt; a.<span class="built_in">get_num</span>() &lt;&lt; endl;        <span class="comment">// æ­£ç¡®</span></span><br><span class="line">    cout &lt;&lt; <span class="built_in">move</span>(a).<span class="built_in">get_num</span>() &lt;&lt; endl;  <span class="comment">// æ­£ç¡®</span></span><br><span class="line">   </span><br><span class="line">    <span class="comment">//cout &lt;&lt; a.get_num2() &lt;&lt; endl;     // é”™è¯¯ </span></span><br><span class="line">    cout &lt;&lt; <span class="built_in">move</span>(a).<span class="built_in">get_num2</span>() &lt;&lt; endl; <span class="comment">// æ­£ç¡®</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314151617181920212223242526</span></span><br></pre></td></tr></table></figure>
<h2 id="c-11å®Œç¾è½¬å‘åŠå…¶å®ç°"><a class="header-anchor" href="#c-11å®Œç¾è½¬å‘åŠå…¶å®ç°">ğŸŒ³</a>C++11å®Œç¾è½¬å‘åŠå…¶å®ç°</h2>
<p>C++11 æ ‡å‡†ä¸º C++ å¼•å…¥å³å€¼å¼•ç”¨è¯­æ³•çš„åŒæ—¶ï¼Œè¿˜è§£å†³äº†ä¸€ä¸ª C++ 98/03 æ ‡å‡†é•¿æœŸå­˜åœ¨çš„çŸ­æ¿ï¼Œå³ä½¿ç”¨ç®€å•çš„æ–¹å¼å³å¯åœ¨å‡½æ•°æ¨¡æ¿ä¸­å®ç°å‚æ•°çš„å®Œç¾è½¬å‘ã€‚é‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯å®Œç¾è½¬å‘ï¼Ÿå®ƒä¸ºä»€ä¹ˆæ˜¯ C++98/03 æ ‡å‡†å­˜åœ¨çš„ä¸€ä¸ªçŸ­æ¿ï¼ŸC++11 æ ‡å‡†åˆæ˜¯å¦‚ä½•ä¸º C++ å¼¥è¡¥è¿™ä¸€çŸ­æ¿çš„ï¼Ÿåˆ«æ€¥ï¼Œæœ¬èŠ‚å°†å°±è¿™äº›é—®é¢˜ç»™è¯»è€…åšä¸€ä¸€è®²è§£ã€‚</p>
<p>é¦–å…ˆè§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯å®Œç¾è½¬å‘ï¼Œå®ƒæŒ‡çš„æ˜¯å‡½æ•°æ¨¡æ¿å¯ä»¥å°†è‡ªå·±çš„å‚æ•°â€œå®Œç¾â€åœ°è½¬å‘ç»™å†…éƒ¨è°ƒç”¨çš„å…¶å®ƒå‡½æ•°ã€‚æ‰€è°“å®Œç¾ï¼Œå³ä¸ä»…èƒ½å‡†ç¡®åœ°è½¬å‘å‚æ•°çš„å€¼ï¼Œè¿˜èƒ½ä¿è¯è¢«è½¬å‘å‚æ•°çš„å·¦ã€å³å€¼å±æ€§ä¸å˜ã€‚</p>
<blockquote>
<p>åœ¨ C++ ä¸­ï¼Œä¸€ä¸ªè¡¨è¾¾å¼ä¸æ˜¯å·¦å€¼å°±æ˜¯å³å€¼ã€‚æœ‰å…³å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªè¡¨è¾¾å¼æ˜¯å·¦å€¼è¿˜æ˜¯å³å€¼ï¼Œå¯é˜…è¯»ã€Š<a href="http://c.biancheng.net/view/7829.html">C++å³å€¼å¼•ç”¨</a>ã€‹ä¸€æ–‡åšè¯¦ç»†äº†è§£ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">function</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">otherdef</span>(t);</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œfunction() å‡½æ•°æ¨¡æ¿ä¸­è°ƒç”¨äº† otherdef() å‡½æ•°ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå®Œç¾è½¬å‘æŒ‡çš„æ˜¯ï¼šå¦‚æœ function() å‡½æ•°æ¥æ”¶åˆ°çš„å‚æ•° t ä¸ºå·¦å€¼ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°ä¼ é€’ç»™ otherdef() çš„å‚æ•° t ä¹Ÿæ˜¯å·¦å€¼ï¼›åä¹‹å¦‚æœ function() å‡½æ•°æ¥æ”¶åˆ°çš„å‚æ•° t ä¸ºå³å€¼ï¼Œé‚£ä¹ˆä¼ é€’ç»™ otherdef() å‡½æ•°çš„å‚æ•° t ä¹Ÿå¿…é¡»ä¸ºå³å€¼ã€‚</p>
<p>æ˜¾ç„¶ï¼Œfunction() å‡½æ•°æ¨¡æ¿å¹¶æ²¡æœ‰å®ç°å®Œç¾è½¬å‘ã€‚ä¸€æ–¹é¢ï¼Œå‚æ•° t ä¸ºéå¼•ç”¨ç±»å‹ï¼Œè¿™æ„å‘³ç€åœ¨è°ƒç”¨ function() å‡½æ•°æ—¶ï¼Œå®å‚å°†å€¼ä¼ é€’ç»™å½¢å‚çš„è¿‡ç¨‹å°±éœ€è¦é¢å¤–è¿›è¡Œä¸€æ¬¡æ‹·è´æ“ä½œï¼›å¦ä¸€æ–¹é¢ï¼Œæ— è®ºè°ƒç”¨ function() å‡½æ•°æ¨¡æ¿æ—¶ä¼ é€’ç»™å‚æ•° t çš„æ˜¯å·¦å€¼è¿˜æ˜¯å³å€¼ï¼Œå¯¹äºå‡½æ•°å†…éƒ¨çš„å‚æ•° t æ¥è¯´ï¼Œå®ƒæœ‰è‡ªå·±çš„åç§°ï¼Œä¹Ÿå¯ä»¥è·å–å®ƒçš„å­˜å‚¨åœ°å€ï¼Œå› æ­¤å®ƒæ°¸è¿œéƒ½æ˜¯å·¦å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¼ é€’ç»™ otherdef() å‡½æ•°çš„å‚æ•° t æ°¸è¿œéƒ½æ˜¯å·¦å€¼ã€‚æ€»ä¹‹ï¼Œæ— è®ºä»é‚£ä¸ªè§’åº¦çœ‹ï¼Œfunction() å‡½æ•°çš„å®šä¹‰éƒ½ä¸â€œå®Œç¾â€ã€‚</p>
<blockquote>
<p>è¯»è€…å¯èƒ½ä¼šé—®ï¼Œå®Œç¾è½¬å‘è¿™æ ·ä¸¥è‹›çš„å‚æ•°ä¼ é€’æœºåˆ¶ï¼Œå¾ˆå¸¸ç”¨å—ï¼ŸC++98/03 æ ‡å‡†ä¸­å‡ ä¹ä¸ä¼šç”¨åˆ°ï¼Œä½† C++11 æ ‡å‡†ä¸º C++ å¼•å…¥äº†å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰ï¼Œå› æ­¤å¾ˆå¤šåœºæ™¯ä¸­æ˜¯å¦å®ç°å®Œç¾è½¬å‘ï¼Œç›´æ¥å†³å®šäº†è¯¥å‚æ•°çš„ä¼ é€’è¿‡ç¨‹ä½¿ç”¨çš„æ˜¯æ‹·è´è¯­ä¹‰ï¼ˆè°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼‰è¿˜æ˜¯ç§»åŠ¨è¯­ä¹‰ï¼ˆè°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°ï¼‰ã€‚</p>
</blockquote>
<p>äº‹å®ä¸Šï¼ŒC++98/03 æ ‡å‡†ä¸‹çš„ C++ ä¹Ÿå¯ä»¥å®ç°å®Œç¾è½¬å‘ï¼Œåªæ˜¯å®ç°æ–¹å¼æ¯”è¾ƒç¬¨æ‹™ã€‚é€šè¿‡å‰é¢çš„å­¦ä¹ æˆ‘ä»¬çŸ¥é“ï¼ŒC++ 98/03 æ ‡å‡†ä¸­åªæœ‰å·¦å€¼å¼•ç”¨ï¼Œå¹¶ä¸”å¯ä»¥ç»†åˆ†ä¸ºé const å¼•ç”¨å’Œ const å¼•ç”¨ã€‚å…¶ä¸­ï¼Œä½¿ç”¨é const å¼•ç”¨ä½œä¸ºå‡½æ•°æ¨¡æ¿å‚æ•°æ—¶ï¼Œåªèƒ½æ¥æ”¶å·¦å€¼ï¼Œæ— æ³•æ¥æ”¶å³å€¼ï¼›è€Œ const å·¦å€¼å¼•ç”¨æ—¢å¯ä»¥æ¥æ”¶å·¦å€¼ï¼Œä¹Ÿå¯ä»¥æ¥æ”¶å³å€¼ï¼Œä½†è€ƒè™‘åˆ°å…¶ const å±æ€§ï¼Œé™¤éè¢«è°ƒç”¨å‡½æ•°çš„å‚æ•°ä¹Ÿæ˜¯ const å±æ€§ï¼Œå¦åˆ™å°†æ— æ³•ç›´æ¥ä¼ é€’ã€‚</p>
<p>è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œå•ç‹¬ä½¿ç”¨ä»»ä½•ä¸€ç§å¼•ç”¨å½¢å¼ï¼Œå¯ä»¥å®ç°è½¬å‘ï¼Œä½†æ— æ³•ä¿è¯å®Œç¾ã€‚å› æ­¤å¦‚æœä½¿ç”¨ C++ 98/03 æ ‡å‡†ä¸‹çš„ C++ è¯­è¨€ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨å‡½æ•°æ¨¡æ¿é‡è½½çš„æ–¹å¼å®ç°å®Œç¾è½¬å‘ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//é‡è½½è¢«è°ƒç”¨å‡½æ•°ï¼ŒæŸ¥çœ‹å®Œç¾è½¬å‘çš„æ•ˆæœ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">otherdef</span><span class="params">(<span class="type">int</span> &amp; t)</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;lvalue\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">otherdef</span><span class="params">(<span class="type">const</span> <span class="type">int</span> &amp; t)</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;rvalue\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é‡è½½å‡½æ•°æ¨¡æ¿ï¼Œåˆ†åˆ«æ¥æ”¶å·¦å€¼å’Œå³å€¼</span></span><br><span class="line"><span class="comment">//æ¥æ”¶å³å€¼å‚æ•°</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">function</span><span class="params">(<span class="type">const</span> T&amp; t)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">otherdef</span>(t);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ¥æ”¶å·¦å€¼å‚æ•°</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">function</span><span class="params">(T&amp; t)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">otherdef</span>(t);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">function</span>(<span class="number">5</span>);<span class="comment">//5 æ˜¯å³å€¼</span></span><br><span class="line">    <span class="type">int</span>  x = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">function</span>(x);<span class="comment">//x æ˜¯å·¦å€¼</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112131415161718192021222324252627</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>rvalue<br>
lvalue</p>
<p>ä»è¾“å‡ºç»“æœä¸­å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºå³å€¼ 5 æ¥è¯´ï¼Œå®ƒå®é™…è°ƒç”¨çš„å‚æ•°ç±»å‹ä¸º const T&amp; çš„å‡½æ•°æ¨¡æ¿ï¼Œç”±äº t ä¸º const ç±»å‹ï¼Œæ‰€ä»¥ otherdef() å‡½æ•°å®é™…è°ƒç”¨çš„ä¹Ÿæ˜¯å‚æ•°ç”¨ const ä¿®é¥°çš„å‡½æ•°ï¼Œæ‰€ä»¥è¾“å‡ºâ€œrvalueâ€ï¼›å¯¹äºå·¦å€¼ x æ¥è¯´ï¼Œ2 ä¸ªé‡è½½æ¨¡æ¿å‡½æ•°éƒ½é€‚ç”¨ï¼ŒC++ç¼–è¯‘å™¨ä¼šé€‰æ‹©æœ€é€‚åˆçš„å‚æ•°ç±»å‹ä¸º T&amp; çš„å‡½æ•°æ¨¡æ¿ï¼Œè¿›è€Œ therdef() å‡½æ•°å®é™…è°ƒç”¨çš„æ˜¯å‚æ•°ç±»å‹ä¸ºé const çš„å‡½æ•°ï¼Œè¾“å‡ºâ€œlvalueâ€ã€‚</p>
<p>æ˜¾ç„¶ï¼Œä½¿ç”¨é‡è½½çš„æ¨¡æ¿å‡½æ•°å®ç°å®Œç¾è½¬å‘ä¹Ÿæ˜¯æœ‰å¼Šç«¯çš„ï¼Œæ­¤å®ç°æ–¹å¼ä»…é€‚ç”¨äºæ¨¡æ¿å‡½æ•°ä»…æœ‰å°‘é‡å‚æ•°çš„æƒ…å†µï¼Œå¦åˆ™å°±éœ€è¦ç¼–å†™å¤§é‡çš„é‡è½½å‡½æ•°æ¨¡æ¿ï¼Œé€ æˆä»£ç çš„å†—ä½™ã€‚ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·æ›´å¿«é€Ÿåœ°å®ç°å®Œç¾è½¬å‘ï¼ŒC++ 11 æ ‡å‡†ä¸­å…è®¸åœ¨å‡½æ•°æ¨¡æ¿ä¸­ä½¿ç”¨å³å€¼å¼•ç”¨æ¥å®ç°å®Œç¾è½¬å‘ã€‚</p>
<p>C++11 æ ‡å‡†ä¸­è§„å®šï¼Œé€šå¸¸æƒ…å†µä¸‹å³å€¼å¼•ç”¨å½¢å¼çš„å‚æ•°åªèƒ½æ¥æ”¶å³å€¼ï¼Œä¸èƒ½æ¥æ”¶å·¦å€¼ã€‚ä½†å¯¹äºå‡½æ•°æ¨¡æ¿ä¸­ä½¿ç”¨å³å€¼å¼•ç”¨è¯­æ³•å®šä¹‰çš„å‚æ•°æ¥è¯´ï¼Œå®ƒä¸å†éµå®ˆè¿™ä¸€è§„å®šï¼Œæ—¢å¯ä»¥æ¥æ”¶å³å€¼ï¼Œä¹Ÿå¯ä»¥æ¥æ”¶å·¦å€¼ï¼ˆæ­¤æ—¶çš„å³å€¼å¼•ç”¨åˆè¢«ç§°ä¸ºâ€œä¸‡èƒ½å¼•ç”¨â€ï¼‰ã€‚</p>
<p>ä»ä»¥ function() å‡½æ•°ä¸ºä¾‹ï¼Œåœ¨ C++11 æ ‡å‡†ä¸­å®ç°å®Œç¾è½¬å‘ï¼Œåªéœ€è¦ç¼–å†™å¦‚ä¸‹ä¸€ä¸ªæ¨¡æ¿å‡½æ•°å³å¯ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">function</span><span class="params">(T&amp;&amp; t)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">otherdef</span>(t);</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>
<p>æ­¤æ¨¡æ¿å‡½æ•°çš„å‚æ•° t æ—¢å¯ä»¥æ¥æ”¶å·¦å€¼ï¼Œä¹Ÿå¯ä»¥æ¥æ”¶å³å€¼ã€‚ä½†ä»…ä»…ä½¿ç”¨å³å€¼å¼•ç”¨ä½œä¸ºå‡½æ•°æ¨¡æ¿çš„å‚æ•°æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ç»§ç»­è§£å†³ï¼Œå³å¦‚æœè°ƒç”¨ function() å‡½æ•°æ—¶ä¸ºå…¶ä¼ é€’ä¸€ä¸ªå·¦å€¼å¼•ç”¨æˆ–è€…å³å€¼å¼•ç”¨çš„å®å‚ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> n = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> &amp; num = n;</span><br><span class="line"><span class="built_in">function</span>(num); <span class="comment">// T ä¸º int&amp;</span></span><br><span class="line"><span class="type">int</span> &amp;&amp; num2 = <span class="number">11</span>;</span><br><span class="line"><span class="built_in">function</span>(num2); <span class="comment">// T ä¸º int &amp;&amp;</span></span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œç”± function(num) å®ä¾‹åŒ–çš„å‡½æ•°åº•å±‚å°±å˜æˆäº† function(int &amp; &amp; t)ï¼ŒåŒæ ·ç”± function(num2) å®ä¾‹åŒ–çš„å‡½æ•°åº•å±‚åˆ™å˜æˆäº† function(int &amp;&amp; &amp;&amp; t)ã€‚è¦çŸ¥é“ï¼ŒC++98/03 æ ‡å‡†æ˜¯ä¸æ”¯æŒè¿™ç§ç”¨æ³•çš„ï¼Œè€Œ C++ 11æ ‡å‡†ä¸ºäº†æ›´å¥½åœ°å®ç°å®Œç¾è½¬å‘ï¼Œç‰¹æ„ä¸ºå…¶æŒ‡å®šäº†æ–°çš„ç±»å‹åŒ¹é…è§„åˆ™ï¼Œåˆç§°ä¸ºå¼•ç”¨æŠ˜å è§„åˆ™ï¼ˆå‡è®¾ç”¨ A è¡¨ç¤ºå®é™…ä¼ é€’å‚æ•°çš„ç±»å‹ï¼‰ï¼š</p>
<ul>
<li>å½“å®å‚ä¸ºå·¦å€¼æˆ–è€…å·¦å€¼å¼•ç”¨ï¼ˆA&amp;ï¼‰æ—¶ï¼Œå‡½æ•°æ¨¡æ¿ä¸­ T&amp;&amp; å°†è½¬å˜ä¸º A&amp;ï¼ˆA&amp; &amp;&amp; = A&amp;ï¼‰ï¼›</li>
<li>å½“å®å‚ä¸ºå³å€¼æˆ–è€…å³å€¼å¼•ç”¨ï¼ˆA&amp;&amp;ï¼‰æ—¶ï¼Œå‡½æ•°æ¨¡æ¿ä¸­ T&amp;&amp; å°†è½¬å˜ä¸º A&amp;&amp;ï¼ˆA&amp;&amp; &amp;&amp; = A&amp;&amp;ï¼‰ã€‚</li>
</ul>
<blockquote>
<p>è¯»è€…åªéœ€è¦çŸ¥é“ï¼Œåœ¨å®ç°å®Œç¾è½¬å‘æ—¶ï¼Œåªè¦å‡½æ•°æ¨¡æ¿çš„å‚æ•°ç±»å‹ä¸º T&amp;&amp;ï¼Œåˆ™ C++ å¯ä»¥è‡ªè¡Œå‡†ç¡®åœ°åˆ¤å®šå‡ºå®é™…ä¼ å…¥çš„å®å‚æ˜¯å·¦å€¼è¿˜æ˜¯å³å€¼ã€‚</p>
</blockquote>
<p>é€šè¿‡å°†å‡½æ•°æ¨¡æ¿çš„å½¢å‚ç±»å‹è®¾ç½®ä¸º T&amp;&amp;ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¥½åœ°è§£å†³æ¥æ”¶å·¦ã€å³å€¼çš„é—®é¢˜ã€‚ä½†é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œå³æ— è®ºä¼ å…¥çš„å½¢å‚æ˜¯å·¦å€¼è¿˜æ˜¯å³å€¼ï¼Œå¯¹äºå‡½æ•°æ¨¡æ¿å†…éƒ¨æ¥è¯´ï¼Œå½¢å‚æ—¢æœ‰åç§°åˆèƒ½å¯»å€ï¼Œå› æ­¤å®ƒéƒ½æ˜¯å·¦å€¼ã€‚é‚£ä¹ˆå¦‚ä½•æ‰èƒ½å°†å‡½æ•°æ¨¡æ¿æ¥æ”¶åˆ°çš„å½¢å‚è¿åŒå…¶å·¦ã€å³å€¼å±æ€§ï¼Œä¸€èµ·ä¼ é€’ç»™è¢«è°ƒç”¨çš„å‡½æ•°å‘¢ï¼Ÿ</p>
<p>C++11 æ ‡å‡†çš„å¼€å‘è€…å·²ç»å¸®æˆ‘ä»¬æƒ³å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œè¯¥æ–°æ ‡å‡†è¿˜å¼•å…¥äº†ä¸€ä¸ªæ¨¡æ¿å‡½æ•° forword()ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨è¯¥å‡½æ•°ï¼Œå°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°è§£å†³æ­¤é—®é¢˜ã€‚ä»ä»¥ function æ¨¡æ¿å‡½æ•°ä¸ºä¾‹ï¼Œå¦‚ä¸‹æ¼”ç¤ºäº†è¯¥å‡½æ•°æ¨¡æ¿çš„ç”¨æ³•ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//é‡è½½è¢«è°ƒç”¨å‡½æ•°ï¼ŒæŸ¥çœ‹å®Œç¾è½¬å‘çš„æ•ˆæœ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">otherdef</span><span class="params">(<span class="type">int</span> &amp; t)</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;lvalue\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">otherdef</span><span class="params">(<span class="type">const</span> <span class="type">int</span> &amp; t)</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;rvalue\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å®ç°å®Œç¾è½¬å‘çš„å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">function</span><span class="params">(T&amp;&amp; t)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">otherdef</span>(forward&lt;T&gt;(t));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">function</span>(<span class="number">5</span>);</span><br><span class="line">    <span class="type">int</span>  x = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">function</span>(x);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112131415161718192021</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>rvalue<br>
lvalue</p>
<p>æ³¨æ„ç¨‹åºä¸­ç¬¬ 12~16 è¡Œï¼Œæ­¤ function() æ¨¡æ¿å‡½æ•°æ‰æ˜¯å®ç°å®Œç¾è½¬å‘çš„æœ€ç»ˆç‰ˆæœ¬ã€‚å¯ä»¥çœ‹åˆ°ï¼Œforword() å‡½æ•°æ¨¡æ¿ç”¨äºä¿®é¥°è¢«è°ƒç”¨å‡½æ•°ä¸­éœ€è¦ç»´æŒå‚æ•°å·¦ã€å³å€¼å±æ€§çš„å‚æ•°ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼Œåœ¨å®šä¹‰æ¨¡æ¿å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬é‡‡ç”¨å³å€¼å¼•ç”¨çš„è¯­æ³•æ ¼å¼å®šä¹‰å‚æ•°ç±»å‹ï¼Œç”±æ­¤è¯¥å‡½æ•°æ—¢å¯ä»¥æ¥æ”¶å¤–ç•Œä¼ å…¥çš„å·¦å€¼ï¼Œä¹Ÿå¯ä»¥æ¥æ”¶å³å€¼ï¼›å…¶æ¬¡ï¼Œè¿˜éœ€è¦ä½¿ç”¨ C++11 æ ‡å‡†åº“æä¾›çš„ forword() æ¨¡æ¿å‡½æ•°ä¿®é¥°è¢«è°ƒç”¨å‡½æ•°ä¸­éœ€è¦ç»´æŒå·¦ã€å³å€¼å±æ€§çš„å‚æ•°ã€‚ç”±æ­¤å³å¯è½»æ¾å®ç°å‡½æ•°æ¨¡æ¿ä¸­å‚æ•°çš„å®Œç¾è½¬å‘ã€‚</p>
<h2 id="c-11-nullptrï¼šåˆå§‹åŒ–ç©ºæŒ‡é’ˆ"><a class="header-anchor" href="#c-11-nullptrï¼šåˆå§‹åŒ–ç©ºæŒ‡é’ˆ">ğŸŒ³</a>C++11 nullptrï¼šåˆå§‹åŒ–ç©ºæŒ‡é’ˆ</h2>
<p>å®é™…å¼€å‘ä¸­ï¼Œé¿å…äº§ç”Ÿâ€œé‡æŒ‡é’ˆâ€æœ€æœ‰æ•ˆçš„æ–¹æ³•ï¼Œå°±æ˜¯åœ¨å®šä¹‰æŒ‡é’ˆçš„åŒæ—¶å®Œæˆåˆå§‹åŒ–æ“ä½œï¼Œå³ä¾¿è¯¥æŒ‡é’ˆçš„æŒ‡å‘å°šæœªæ˜ç¡®ï¼Œä¹Ÿè¦å°†å…¶åˆå§‹åŒ–ä¸ºç©ºæŒ‡é’ˆã€‚</p>
<blockquote>
<p>æ‰€è°“â€œé‡æŒ‡é’ˆâ€ï¼Œåˆç§°â€œæ‚¬æŒ‚æŒ‡é’ˆâ€ï¼ŒæŒ‡çš„æ˜¯æ²¡æœ‰æ˜ç¡®æŒ‡å‘çš„æŒ‡é’ˆã€‚é‡æŒ‡é’ˆå¾€å¾€æŒ‡å‘çš„æ˜¯é‚£äº›ä¸å¯ç”¨çš„å†…å­˜åŒºåŸŸï¼Œè¿™å°±æ„å‘³ç€åƒæ“ä½œæ™®é€šæŒ‡é’ˆé‚£æ ·ä½¿ç”¨é‡æŒ‡é’ˆï¼ˆä¾‹å¦‚ &amp;pï¼‰ï¼Œæå¯èƒ½å¯¼è‡´ç¨‹åºå‘ç”Ÿå¼‚å¸¸ã€‚</p>
</blockquote>
<p>C++98/03 æ ‡å‡†ä¸­ï¼Œå°†ä¸€ä¸ªæŒ‡é’ˆåˆå§‹åŒ–ä¸ºç©ºæŒ‡é’ˆçš„æ–¹å¼æœ‰ 2 ç§ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> *p = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> *p = <span class="literal">NULL</span>; <span class="comment">//æ¨èä½¿ç”¨</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥å°†æŒ‡é’ˆæ˜ç¡®æŒ‡å‘ 0ï¼ˆ0x0000 0000ï¼‰è¿™ä¸ªå†…å­˜ç©ºé—´ã€‚ä¸€æ–¹é¢ï¼Œæ˜ç¡®æŒ‡é’ˆçš„æŒ‡å‘å¯ä»¥é¿å…å…¶æˆä¸ºé‡æŒ‡é’ˆï¼›å¦ä¸€æ–¹é¢ï¼Œå¤§å¤šæ•°æ“ä½œç³»ç»Ÿéƒ½ä¸å…è®¸ç”¨æˆ·å¯¹åœ°å€ä¸º 0 çš„å†…å­˜ç©ºé—´æ‰§è¡Œå†™æ“ä½œï¼Œè‹¥ç”¨æˆ·åœ¨ç¨‹åºä¸­å°è¯•ä¿®æ”¹å…¶å†…å®¹ï¼Œåˆ™ç¨‹åºè¿è¡Œä¼šç›´æ¥æŠ¥é”™ã€‚</p>
<p>ç›¸æ¯”ç¬¬ä¸€ç§æ–¹å¼ï¼Œæˆ‘ä»¬æ›´ä¹ æƒ¯å°†æŒ‡é’ˆåˆå§‹åŒ–ä¸º NULLã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒNULL å¹¶ä¸æ˜¯ C++ çš„å…³é”®å­—ï¼Œå®ƒæ˜¯ C++ ä¸ºæˆ‘ä»¬äº‹å…ˆå®šä¹‰å¥½çš„ä¸€ä¸ªå®ï¼Œå¹¶ä¸”å®ƒçš„å€¼å¾€å¾€å°±æ˜¯å­—é¢é‡ 0ï¼ˆ#define NULL 0ï¼‰ã€‚</p>
<p>C++ ä¸­å°† NULL å®šä¹‰ä¸ºå­—é¢å¸¸é‡ 0ï¼Œè™½ç„¶èƒ½æ»¡è¶³å¤§éƒ¨åˆ†åœºæ™¯çš„éœ€è¦ï¼Œä½†ä¸ªåˆ«æƒ…å†µä¸‹ï¼Œå®ƒä¼šå¯¼è‡´ç¨‹åºçš„è¿è¡Œå’Œæˆ‘ä»¬çš„é¢„æœŸä¸ç¬¦ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">isnull</span><span class="params">(<span class="type">void</span> *c)</span></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;void*c&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">isnull</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;int n&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">isnull</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">isnull</span>(<span class="literal">NULL</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>int n<br>
int n</p>
<p>å¯¹äº isnull(0) æ¥è¯´ï¼Œæ˜¾ç„¶å®ƒçœŸæ­£è°ƒç”¨çš„æ˜¯å‚æ•°ä¸ºæ•´å½¢çš„ isnull() å‡½æ•°ï¼›è€Œå¯¹äº isnull(NULL)ï¼Œæˆ‘ä»¬æœŸæœ›å®ƒå®é™…è°ƒç”¨çš„æ˜¯å‚æ•°ä¸º void*c çš„ isnull() å‡½æ•°ï¼Œä½†è§‚å¯Ÿç¨‹åºçš„æ‰§è¡Œç»“æœä¸éš¾çœ‹å‡ºï¼Œå¹¶ä¸ç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸã€‚</p>
<p>C++ 98/03 æ ‡å‡†ä¸­ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä»¤ isnull(NULL) å®é™…è°ƒç”¨çš„æ˜¯ isnull(void* c)ï¼Œå°±éœ€è¦å¯¹ NULLï¼ˆæˆ–è€… 0ï¼‰è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">isnull</span>( (<span class="type">void</span>*)<span class="literal">NULL</span> );</span><br><span class="line"><span class="built_in">isnull</span>( (<span class="type">void</span>*)<span class="number">0</span> );</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æ­¤ï¼Œæ‰ä¼šæˆåŠŸè°ƒç”¨æˆ‘ä»¬é¢„æœŸçš„å‡½æ•°ï¼ˆè¯»è€…å¯è‡ªè¡Œæ‰§è¡Œæ­¤ä»£ç ï¼Œè§‚å¯Ÿè¾“å‡ºç»“æœï¼‰ã€‚</p>
<p>ç”±äº C++ 98 æ ‡å‡†ä½¿ç”¨æœŸé—´ï¼ŒNULL å·²ç»å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ï¼Œå‡ºäºå…¼å®¹æ€§çš„è€ƒè™‘ï¼ŒC++11 æ ‡å‡†å¹¶æ²¡æœ‰å¯¹ NULL çš„å®å®šä¹‰åšä»»ä½•ä¿®æ”¹ã€‚ä¸ºäº†ä¿®æ­£ C++ å­˜åœ¨çš„è¿™ä¸€ BUGï¼ŒC++ æ ‡å‡†å§”å‘˜ä¼šæœ€ç»ˆå†³å®šå¦å…¶ç‚‰ç¶ï¼Œåœ¨ C++11 æ ‡å‡†ä¸­å¼•å…¥ä¸€ä¸ªæ–°å…³é”®å­—ï¼Œå³ nullptrã€‚</p>
<blockquote>
<p>åœ¨ä½¿ç”¨ nullptr ä¹‹å‰ï¼Œè¯»è€…éœ€ä¿è¯è‡ªå·±ä½¿ç”¨çš„ç¼–è¯‘å™¨æ”¯æŒè¯¥å…³é”®å­—ã€‚ä»¥ Visual Studio å’Œ codeblocks ä¸ºä¾‹ï¼Œå‰è€…æ—©åœ¨ 2010 ç‰ˆæœ¬å°±å¯¹ C++ 11 æ ‡å‡†ä¸­çš„éƒ¨åˆ†ç‰¹æ€§æä¾›äº†æ”¯æŒï¼Œå…¶ä¸­å°±åŒ…æ‹¬ nullptrï¼›å¦‚æœä½¿ç”¨åè€…ï¼Œè¯»è€…éœ€å°†å…¶ G++ ç¼–è¯‘å™¨ç‰ˆæœ¬è‡³å°‘å‡çº§è‡³ 4.6.1ï¼ˆåŒæ—¶å¼€å¯ -std=c++0x ç¼–è¯‘é€‰é¡¹ï¼‰ã€‚</p>
</blockquote>
<p>nullptr æ˜¯ nullptr_t ç±»å‹çš„å³å€¼å¸¸é‡ï¼Œä¸“ç”¨äºåˆå§‹åŒ–ç©ºç±»å‹æŒ‡é’ˆã€‚nullptr_t æ˜¯ C++11 æ–°å¢åŠ çš„æ•°æ®ç±»å‹ï¼Œå¯ç§°ä¸ºâ€œæŒ‡é’ˆç©ºå€¼ç±»å‹â€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œnullpter ä»…æ˜¯è¯¥ç±»å‹çš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼ˆå·²ç»å®šä¹‰å¥½ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼‰ï¼Œå¦‚æœéœ€è¦æˆ‘ä»¬å®Œå…¨å®šä¹‰å‡ºå¤šä¸ªåŒ nullptr å®Œå…¨ä¸€æ ·çš„å®ä¾‹å¯¹è±¡ã€‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œnullptr å¯ä»¥è¢«éšå¼è½¬æ¢æˆä»»æ„çš„æŒ‡é’ˆç±»å‹ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> * a1 = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="type">char</span> * a2 = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="type">double</span> * a3 = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<p>æ˜¾ç„¶ï¼Œä¸åŒç±»å‹çš„æŒ‡é’ˆå˜é‡éƒ½å¯ä»¥ä½¿ç”¨ nullptr æ¥åˆå§‹åŒ–ï¼Œç¼–è¯‘å™¨åˆ†åˆ«å°† nullptr éšå¼è½¬æ¢æˆ int*ã€char* ä»¥åŠ double* æŒ‡é’ˆç±»å‹ã€‚</p>
<p>å¦å¤–ï¼Œé€šè¿‡å°†æŒ‡é’ˆåˆå§‹åŒ–ä¸º nullptrï¼Œå¯ä»¥å¾ˆå¥½åœ°è§£å†³ NULL é—ç•™çš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">isnull</span><span class="params">(<span class="type">void</span> *c)</span></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;void*c&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">isnull</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;int n&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">isnull</span>(<span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">isnull</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>int n<br>
void*c</p>
<p>å€ŸåŠ©æ‰§è¡Œç»“æœä¸éš¾çœ‹å‡ºï¼Œç”±äº nullptr æ— æ³•éšå¼è½¬æ¢ä¸ºæ•´å½¢ï¼Œè€Œå¯ä»¥éšå¼åŒ¹é…æŒ‡é’ˆç±»å‹ï¼Œå› æ­¤æ‰§è¡Œç»“æœå’Œæˆ‘ä»¬çš„é¢„æœŸç›¸ç¬¦ã€‚</p>
<blockquote>
<p>æ€»ä¹‹åœ¨ C++11 æ ‡å‡†ä¸‹ï¼Œç›¸æ¯” NULL å’Œ 0ï¼Œä½¿ç”¨ nullptr åˆå§‹åŒ–ç©ºæŒ‡é’ˆå¯ä»¥ä»¤æˆ‘ä»¬ç¼–å†™çš„ç¨‹åºæ›´åŠ å¥å£®ã€‚</p>
</blockquote>
<h2 id="c-11-shared-ptræ™ºèƒ½æŒ‡é’ˆ-è¶…çº§è¯¦ç»†"><a class="header-anchor" href="#c-11-shared-ptræ™ºèƒ½æŒ‡é’ˆ-è¶…çº§è¯¦ç»†">ğŸŒ³</a>C++11 shared_ptræ™ºèƒ½æŒ‡é’ˆï¼ˆè¶…çº§è¯¦ç»†ï¼‰</h2>
<p>åœ¨å®é™…çš„ C++ å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¯¸å¦‚ç¨‹åºè¿è¡Œä¸­çªç„¶å´©æºƒã€ç¨‹åºè¿è¡Œæ‰€ç”¨å†…å­˜è¶Šæ¥è¶Šå¤šæœ€ç»ˆä¸å¾—ä¸é‡å¯ç­‰é—®é¢˜ï¼Œè¿™äº›é—®é¢˜å¾€å¾€éƒ½æ˜¯å†…å­˜èµ„æºç®¡ç†ä¸å½“é€ æˆçš„ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>æœ‰äº›å†…å­˜èµ„æºå·²ç»è¢«é‡Šæ”¾ï¼Œä½†æŒ‡å‘å®ƒçš„æŒ‡é’ˆå¹¶æ²¡æœ‰æ”¹å˜æŒ‡å‘ï¼ˆæˆä¸ºäº†é‡æŒ‡é’ˆï¼‰ï¼Œå¹¶ä¸”åç»­è¿˜åœ¨ä½¿ç”¨ï¼›</li>
<li>æœ‰äº›å†…å­˜èµ„æºå·²ç»è¢«é‡Šæ”¾ï¼ŒåæœŸåˆè¯•å›¾å†é‡Šæ”¾ä¸€æ¬¡ï¼ˆé‡å¤é‡Šæ”¾åŒä¸€å—å†…å­˜ä¼šå¯¼è‡´ç¨‹åºè¿è¡Œå´©æºƒï¼‰ï¼›</li>
<li>æ²¡æœ‰åŠæ—¶é‡Šæ”¾ä¸å†ä½¿ç”¨çš„å†…å­˜èµ„æºï¼Œé€ æˆå†…å­˜æ³„æ¼ï¼Œç¨‹åºå ç”¨çš„å†…å­˜èµ„æºè¶Šæ¥è¶Šå¤šã€‚</li>
</ul>
<p>é’ˆå¯¹ä»¥ä¸Šè¿™äº›æƒ…å†µï¼Œå¾ˆå¤šç¨‹åºå‘˜è®¤ä¸º C++ è¯­è¨€åº”è¯¥æä¾›æ›´å‹å¥½çš„å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œè¿™æ ·å°±å¯ä»¥å°†ç²¾åŠ›é›†ä¸­äºå¼€å‘é¡¹ç›®çš„å„ä¸ªåŠŸèƒ½ä¸Šã€‚</p>
<p>äº‹å®ä¸Šï¼Œæ˜¾ç¤ºå†…å­˜ç®¡ç†çš„æ›¿ä»£æ–¹æ¡ˆå¾ˆæ—©å°±æœ‰äº†ï¼Œæ—©åœ¨ 1959 å¹´å‰åï¼Œå°±æœ‰äººæå‡ºäº†â€œåƒåœ¾è‡ªåŠ¨å›æ”¶â€æœºåˆ¶ã€‚æ‰€è°“åƒåœ¾ï¼ŒæŒ‡çš„æ˜¯é‚£äº›ä¸å†ä½¿ç”¨æˆ–è€…æ²¡æœ‰ä»»ä½•æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ç©ºé—´ï¼Œè€Œâ€œå›æ”¶â€åˆ™æŒ‡çš„æ˜¯å°†è¿™äº›â€œåƒåœ¾â€æ”¶é›†èµ·æ¥ä»¥ä¾¿å†æ¬¡åˆ©ç”¨ã€‚</p>
<p>å¦‚ä»Šï¼Œåƒåœ¾å›æ”¶æœºåˆ¶å·²ç»å¤§è¡Œå…¶é“ï¼Œå¾—åˆ°äº†è¯¸å¤šç¼–ç¨‹è¯­è¨€çš„æ”¯æŒï¼Œä¾‹å¦‚ Javaã€Pythonã€C#ã€PHP ç­‰ã€‚è€Œ C++ è™½ç„¶ä»æ¥æ²¡æœ‰å…¬å¼€å¾—æ”¯æŒè¿‡åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œä½† C++98/03 æ ‡å‡†ä¸­ï¼Œæ”¯æŒä½¿ç”¨ auto_ptr æ™ºèƒ½æŒ‡é’ˆæ¥å®ç°å †å†…å­˜çš„è‡ªåŠ¨å›æ”¶ï¼›C++11 æ–°æ ‡å‡†åœ¨åºŸå¼ƒ auto_ptr çš„åŒæ—¶ï¼Œå¢æ·»äº† unique_ptrã€shared_ptr ä»¥åŠ weak_ptr è¿™ 3 ä¸ªæ™ºèƒ½æŒ‡é’ˆæ¥å®ç°å †å†…å­˜çš„è‡ªåŠ¨å›æ”¶ã€‚</p>
<p>æ‰€è°“æ™ºèƒ½æŒ‡é’ˆï¼Œå¯ä»¥ä»å­—é¢ä¸Šç†è§£ä¸ºâ€œæ™ºèƒ½â€çš„æŒ‡é’ˆã€‚å…·ä½“æ¥è®²ï¼Œæ™ºèƒ½æŒ‡é’ˆå’Œæ™®é€šæŒ‡é’ˆçš„ç”¨æ³•æ˜¯ç›¸ä¼¼çš„ï¼Œä¸åŒä¹‹å¤„åœ¨äºï¼Œæ™ºèƒ½æŒ‡é’ˆå¯ä»¥åœ¨é€‚å½“æ—¶æœºè‡ªåŠ¨é‡Šæ”¾åˆ†é…çš„å†…å­˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆå¯ä»¥å¾ˆå¥½åœ°é¿å…â€œå¿˜è®°é‡Šæ”¾å†…å­˜è€Œå¯¼è‡´å†…å­˜æ³„æ¼â€é—®é¢˜å‡ºç°ã€‚ç”±æ­¤å¯è§ï¼ŒC++ ä¹Ÿé€æ¸å¼€å§‹æ”¯æŒåƒåœ¾å›æ”¶æœºåˆ¶äº†ï¼Œå°½ç®¡ç›®å‰æ”¯æŒç¨‹åº¦è¿˜æœ‰é™ã€‚</p>
<blockquote>
<p>C++ æ™ºèƒ½æŒ‡é’ˆåº•å±‚æ˜¯é‡‡ç”¨å¼•ç”¨è®¡æ•°çš„æ–¹å¼å®ç°çš„ã€‚ç®€å•çš„ç†è§£ï¼Œæ™ºèƒ½æŒ‡é’ˆåœ¨ç”³è¯·å †å†…å­˜ç©ºé—´çš„åŒæ—¶ï¼Œä¼šä¸ºå…¶é…å¤‡ä¸€ä¸ªæ•´å½¢å€¼ï¼ˆåˆå§‹å€¼ä¸º 1ï¼‰ï¼Œæ¯å½“æœ‰æ–°å¯¹è±¡ä½¿ç”¨æ­¤å †å†…å­˜æ—¶ï¼Œè¯¥æ•´å½¢å€¼ +1ï¼›åä¹‹ï¼Œæ¯å½“ä½¿ç”¨æ­¤å †å†…å­˜çš„å¯¹è±¡è¢«é‡Šæ”¾æ—¶ï¼Œè¯¥æ•´å½¢å€¼å‡ 1ã€‚å½“å †ç©ºé—´å¯¹åº”çš„æ•´å½¢å€¼ä¸º 0 æ—¶ï¼Œå³è¡¨æ˜ä¸å†æœ‰å¯¹è±¡ä½¿ç”¨å®ƒï¼Œè¯¥å †ç©ºé—´å°±ä¼šè¢«é‡Šæ”¾æ‰ã€‚</p>
</blockquote>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åˆ†åˆ«å¯¹ shared_ptrã€unique_ptr ä»¥åŠ weak_ptr è¿™ 3 ä¸ªæ™ºèƒ½æŒ‡é’ˆçš„ç‰¹æ€§å’Œç”¨æ³•åšè¯¦ç»†çš„è®²è§£ï¼Œæœ¬èŠ‚å…ˆä»‹ç» shared_ptr æ™ºèƒ½æŒ‡é’ˆã€‚</p>
<h3 id="c-11-shared-ptræ™ºèƒ½æŒ‡é’ˆ"><a class="header-anchor" href="#c-11-shared-ptræ™ºèƒ½æŒ‡é’ˆ">ğŸŒ³</a>C++11 shared_ptræ™ºèƒ½æŒ‡é’ˆ</h3>
<p>å®é™…ä¸Šï¼Œæ¯ç§æ™ºèƒ½æŒ‡é’ˆéƒ½æ˜¯ä»¥ç±»æ¨¡æ¿çš„æ–¹å¼å®ç°çš„ï¼Œshared_ptr ä¹Ÿä¸ä¾‹å¤–ã€‚shared_ptrï¼ˆå…¶ä¸­ T è¡¨ç¤ºæŒ‡é’ˆæŒ‡å‘çš„å…·ä½“æ•°æ®ç±»å‹ï¼‰çš„å®šä¹‰ä½äº<code>&lt;memory&gt;</code>å¤´æ–‡ä»¶ï¼Œå¹¶ä½äº std å‘½åç©ºé—´ä¸­ï¼Œå› æ­¤åœ¨ä½¿ç”¨è¯¥ç±»å‹æŒ‡é’ˆæ—¶ï¼Œç¨‹åºä¸­åº”åŒ…å«å¦‚ä¸‹ 2 è¡Œä»£ç ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼Œç¬¬ 2 è¡Œä»£ç å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œä¹Ÿå¯ä»¥ä¸æ·»åŠ ï¼Œåˆ™åç»­åœ¨ä½¿ç”¨ shared_ptr æ™ºèƒ½æŒ‡é’ˆæ—¶ï¼Œå°±éœ€è¦æ˜ç¡®æŒ‡æ˜<code>std::</code>ã€‚</p>
</blockquote>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå’Œ unique_ptrã€weak_ptr ä¸åŒä¹‹å¤„åœ¨äºï¼Œå¤šä¸ª shared_ptr æ™ºèƒ½æŒ‡é’ˆå¯ä»¥å…±åŒä½¿ç”¨åŒä¸€å—å †å†…å­˜ã€‚å¹¶ä¸”ï¼Œç”±äºè¯¥ç±»å‹æ™ºèƒ½æŒ‡é’ˆåœ¨å®ç°ä¸Šé‡‡ç”¨çš„æ˜¯å¼•ç”¨è®¡æ•°æœºåˆ¶ï¼Œå³ä¾¿æœ‰ä¸€ä¸ª shared_ptr æŒ‡é’ˆæ”¾å¼ƒäº†å †å†…å­˜çš„â€œä½¿ç”¨æƒâ€ï¼ˆå¼•ç”¨è®¡æ•°å‡ 1ï¼‰ï¼Œä¹Ÿä¸ä¼šå½±å“å…¶ä»–æŒ‡å‘åŒä¸€å †å†…å­˜çš„ shared_ptr æŒ‡é’ˆï¼ˆåªæœ‰å¼•ç”¨è®¡æ•°ä¸º 0 æ—¶ï¼Œå †å†…å­˜æ‰ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ï¼‰ã€‚</p>
<h4 id="1-shared-ptræ™ºèƒ½æŒ‡é’ˆçš„åˆ›å»º"><a class="header-anchor" href="#1-shared-ptræ™ºèƒ½æŒ‡é’ˆçš„åˆ›å»º">ğŸŒ³</a>1ã€shared_ptræ™ºèƒ½æŒ‡é’ˆçš„åˆ›å»º</h4>
<p>shared_ptr ç±»æ¨¡æ¿ä¸­ï¼Œæä¾›äº†å¤šç§å®ç”¨çš„æ„é€ å‡½æ•°ï¼Œè¿™é‡Œç»™è¯»è€…åˆ—ä¸¾äº†å‡ ä¸ªå¸¸ç”¨çš„æ„é€ å‡½æ•°ï¼ˆä»¥æ„å»ºæŒ‡å‘ int ç±»å‹æ•°æ®çš„æ™ºèƒ½æŒ‡é’ˆä¸ºä¾‹ï¼‰ã€‚</p>
<ol>
<li>é€šè¿‡å¦‚ä¸‹ 2 ç§æ–¹å¼ï¼Œå¯ä»¥æ„é€ å‡º shared_ptr ç±»å‹çš„ç©ºæ™ºèƒ½æŒ‡é’ˆï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">std::shared_ptr&lt;<span class="type">int</span>&gt; p1;             <span class="comment">//ä¸ä¼ å…¥ä»»ä½•å®å‚std::shared_ptr&lt;int&gt; p2(nullptr);    //ä¼ å…¥ç©ºæŒ‡é’ˆ nullptr</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œç©ºçš„ shared_ptr æŒ‡é’ˆï¼Œå…¶åˆå§‹å¼•ç”¨è®¡æ•°ä¸º 0ï¼Œè€Œä¸æ˜¯ 1ã€‚</p>
<ol start="2">
<li>åœ¨æ„å»º shared_ptr æ™ºèƒ½æŒ‡é’ˆï¼Œä¹Ÿå¯ä»¥æ˜ç¡®å…¶æŒ‡å‘ã€‚ä¾‹å¦‚ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">std::shared_ptr&lt;<span class="type">int</span>&gt; <span class="title">p3</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">10</span>))</span></span>;</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>ç”±æ­¤ï¼Œæˆ‘ä»¬å°±æˆåŠŸæ„å»ºäº†ä¸€ä¸ª shared_ptr æ™ºèƒ½æŒ‡é’ˆï¼Œå…¶æŒ‡å‘ä¸€å—å­˜æœ‰ 10 è¿™ä¸ª int ç±»å‹æ•°æ®çš„å †å†…å­˜ç©ºé—´ã€‚</p>
<p>åŒæ—¶ï¼ŒC++11 æ ‡å‡†ä¸­è¿˜æä¾›äº† std::make_shared æ¨¡æ¿å‡½æ•°ï¼Œå…¶å¯ä»¥ç”¨äºåˆå§‹åŒ– shared_ptr æ™ºèƒ½æŒ‡é’ˆï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">std::shared_ptr&lt;<span class="type">int</span>&gt; p3 = std::<span class="built_in">make_shared</span>&lt;<span class="type">int</span>&gt;(<span class="number">10</span>);</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Š 2 ç§æ–¹å¼åˆ›å»ºçš„ p3 æ˜¯å®Œå…¨ç›¸åŒã€‚</p>
<ol start="3">
<li>é™¤æ­¤ä¹‹å¤–ï¼Œshared_ptr æ¨¡æ¿è¿˜æä¾›æœ‰ç›¸åº”çš„æ‹·è´æ„é€ å‡½æ•°å’Œç§»åŠ¨æ„é€ å‡½æ•°ï¼Œä¾‹å¦‚ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="function">std::shared_ptr&lt;<span class="type">int</span>&gt; <span class="title">p4</span><span class="params">(p3)</span></span>;<span class="comment">//æˆ–è€… std::shared_ptr&lt;int&gt; p4 = p3;</span></span><br><span class="line"><span class="comment">//è°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="function">std::shared_ptr&lt;<span class="type">int</span>&gt; <span class="title">p5</span><span class="params">(std::move(p4))</span></span>; <span class="comment">//æˆ–è€… std::shared_ptr&lt;int&gt; p5 = std::move(p4);</span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æœ‰å…³æ‹·è´æ„é€ å‡½æ•°ï¼Œè¯»è€…å¯é˜…è¯»ã€Š<a href="http://c.biancheng.net/view/2334.html">C++æ‹·è´æ„é€ å‡½æ•°</a>ã€‹ä¸€èŠ‚åšç³»ç»Ÿäº†è§£ï¼›æœ‰å…³ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œè¯»è€…å¯é˜…è¯»ã€Š<a href="http://c.biancheng.net/view/7847.html">C++ç§»åŠ¨æ„é€ å‡½æ•°</a>ã€‹åšè¯¦ç»†äº†è§£ï¼›æœ‰å…³ move() å‡½æ•°çš„åŠŸèƒ½å’Œç”¨æ³•ï¼Œè¯»è€…å¯é˜…è¯»ã€Š<a href="http://c.biancheng.net/view/7863.html">C++11 move()</a>ã€‹ä¸€èŠ‚ã€‚</p>
</blockquote>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œp3 å’Œ p4 éƒ½æ˜¯ shared_ptr ç±»å‹çš„æ™ºèƒ½æŒ‡é’ˆï¼Œå› æ­¤å¯ä»¥ç”¨ p3 æ¥åˆå§‹åŒ– p4ï¼Œç”±äº p3 æ˜¯å·¦å€¼ï¼Œå› æ­¤ä¼šè°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœ p3 ä¸ºç©ºæ™ºèƒ½æŒ‡é’ˆï¼Œåˆ™ p4 ä¹Ÿä¸ºç©ºæ™ºèƒ½æŒ‡é’ˆï¼Œå…¶å¼•ç”¨è®¡æ•°åˆå§‹å€¼ä¸º 0ï¼›åä¹‹ï¼Œåˆ™è¡¨æ˜ p4 å’Œ p3 æŒ‡å‘åŒä¸€å—å †å†…å­˜ï¼ŒåŒæ—¶è¯¥å †ç©ºé—´çš„å¼•ç”¨è®¡æ•°ä¼šåŠ  1ã€‚</p>
<p>è€Œå¯¹äº std::move(p4) æ¥è¯´ï¼Œè¯¥å‡½æ•°ä¼šå¼ºåˆ¶å°† p4 è½¬æ¢æˆå¯¹åº”çš„å³å€¼ï¼Œå› æ­¤åˆå§‹åŒ– p5 è°ƒç”¨çš„æ˜¯ç§»åŠ¨æ„é€ å‡½æ•°ã€‚å¦å¤–å’Œè°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ä¸åŒï¼Œç”¨ std::move(p4) åˆå§‹åŒ– p5ï¼Œä¼šä½¿å¾— p5 æ‹¥æœ‰äº† p4 çš„å †å†…å­˜ï¼Œè€Œ p4 åˆ™å˜æˆäº†ç©ºæ™ºèƒ½æŒ‡é’ˆã€‚</p>
<p>æ³¨æ„ï¼ŒåŒä¸€æ™®é€šæŒ‡é’ˆä¸èƒ½åŒæ—¶ä¸ºå¤šä¸ª shared_ptr å¯¹è±¡èµ‹å€¼ï¼Œå¦åˆ™ä¼šå¯¼è‡´ç¨‹åºå‘ç”Ÿå¼‚å¸¸ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>* ptr = <span class="keyword">new</span> <span class="type">int</span>;</span><br><span class="line"><span class="function">std::shared_ptr&lt;<span class="type">int</span>&gt; <span class="title">p1</span><span class="params">(ptr)</span></span>;</span><br><span class="line"><span class="function">std::shared_ptr&lt;<span class="type">int</span>&gt; <span class="title">p2</span><span class="params">(ptr)</span></span>;<span class="comment">//é”™è¯¯</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>åœ¨åˆå§‹åŒ– shared_ptr æ™ºèƒ½æŒ‡é’ˆæ—¶ï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰æ‰€æŒ‡å †å†…å­˜çš„é‡Šæ”¾è§„åˆ™ï¼Œè¿™æ ·å½“å †å†…å­˜çš„å¼•ç”¨è®¡æ•°ä¸º 0 æ—¶ï¼Œä¼šä¼˜å…ˆè°ƒç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„é‡Šæ”¾è§„åˆ™ã€‚</li>
</ol>
<p>åœ¨æŸäº›åœºæ™¯ä¸­ï¼Œè‡ªå®šä¹‰é‡Šæ”¾è§„åˆ™æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚æ¯”å¦‚ï¼Œå¯¹äºç”³è¯·çš„åŠ¨æ€æ•°ç»„æ¥è¯´ï¼Œshared_ptr æŒ‡é’ˆé»˜è®¤çš„é‡Šæ”¾è§„åˆ™æ˜¯ä¸æ”¯æŒé‡Šæ”¾æ•°ç»„çš„ï¼Œåªèƒ½è‡ªå®šä¹‰å¯¹åº”çš„é‡Šæ”¾è§„åˆ™ï¼Œæ‰èƒ½æ­£ç¡®åœ°é‡Šæ”¾ç”³è¯·çš„å †å†…å­˜ã€‚</p>
<p>å¯¹äºç”³è¯·çš„åŠ¨æ€æ•°ç»„ï¼Œé‡Šæ”¾è§„åˆ™å¯ä»¥ä½¿ç”¨ C++11 æ ‡å‡†ä¸­æä¾›çš„ default_delete æ¨¡æ¿ç±»ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰é‡Šæ”¾è§„åˆ™ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æŒ‡å®š default_delete ä½œä¸ºé‡Šæ”¾è§„åˆ™</span></span><br><span class="line"><span class="function">std::shared_ptr&lt;<span class="type">int</span>&gt; <span class="title">p6</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>[<span class="number">10</span>], std::default_delete&lt;<span class="type">int</span>[]&gt;())</span></span>;</span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰é‡Šæ”¾è§„åˆ™</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">deleteInt</span><span class="params">(<span class="type">int</span>*p)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">delete</span> []p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆå§‹åŒ–æ™ºèƒ½æŒ‡é’ˆï¼Œå¹¶è‡ªå®šä¹‰é‡Šæ”¾è§„åˆ™</span></span><br><span class="line"><span class="function">std::shared_ptr&lt;<span class="type">int</span>&gt; <span class="title">p7</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>[<span class="number">10</span>], deleteInt)</span></span>;</span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure>
<p>å®é™…ä¸Šå€ŸåŠ© lambda è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åƒå¦‚ä¸‹è¿™æ ·åˆå§‹åŒ– p7ï¼Œå®ƒä»¬æ˜¯å®Œå…¨ç›¸åŒçš„ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">std::shared_ptr&lt;<span class="type">int</span>&gt; <span class="title">p7</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>[<span class="number">10</span>], [](<span class="type">int</span>* p) &#123;<span class="keyword">delete</span>[]p; &#125;)</span></span>;</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>shared_ptr æ¨¡æ¿ç±»è¿˜æä¾›æœ‰å…¶å®ƒä¸€äº›åˆå§‹åŒ–æ™ºèƒ½æŒ‡é’ˆçš„æ–¹æ³•ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯å‰å¾€è®²è§£ <a href="http://www.cplusplus.com/reference/memory/shared_ptr/shared_ptr/">shared_ptr çš„å®˜ç½‘</a>åšç³»ç»Ÿäº†è§£ã€‚</p>
</blockquote>
<h4 id="2-shared-ptræ¨¡æ¿ç±»æä¾›çš„æˆå‘˜æ–¹æ³•"><a class="header-anchor" href="#2-shared-ptræ¨¡æ¿ç±»æä¾›çš„æˆå‘˜æ–¹æ³•">ğŸŒ³</a>2ã€shared_ptræ¨¡æ¿ç±»æä¾›çš„æˆå‘˜æ–¹æ³•</h4>
<p>ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨ shared_ptr æ™ºèƒ½æŒ‡é’ˆï¼Œshared_ptr æ¨¡æ¿ç±»è¿˜æä¾›æœ‰ä¸€äº›å®ç”¨çš„æˆå‘˜æ–¹æ³•ï¼Œå®ƒä»¬å„è‡ªçš„åŠŸèƒ½å¦‚è¡¨ 1 æ‰€ç¤ºã€‚</p>
<table>
<thead>
<tr>
<th>æˆå‘˜æ–¹æ³•å</th>
<th>åŠŸ èƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td>operator=()</td>
<td>é‡è½½èµ‹å€¼å·ï¼Œä½¿å¾—åŒä¸€ç±»å‹çš„ shared_ptr æ™ºèƒ½æŒ‡é’ˆå¯ä»¥ç›¸äº’èµ‹å€¼ã€‚</td>
</tr>
<tr>
<td>operator*()</td>
<td>é‡è½½ * å·ï¼Œè·å–å½“å‰ shared_ptr æ™ºèƒ½æŒ‡é’ˆå¯¹è±¡æŒ‡å‘çš„æ•°æ®ã€‚</td>
</tr>
<tr>
<td>operator-&gt;()</td>
<td>é‡è½½ -&gt; å·ï¼Œå½“æ™ºèƒ½æŒ‡é’ˆæŒ‡å‘çš„æ•°æ®ç±»å‹ä¸ºè‡ªå®šä¹‰çš„ç»“æ„ä½“æ—¶ï¼Œé€šè¿‡ -&gt; è¿ç®—ç¬¦å¯ä»¥è·å–å…¶å†…éƒ¨çš„æŒ‡å®šæˆå‘˜ã€‚</td>
</tr>
<tr>
<td>swap()</td>
<td>äº¤æ¢ 2 ä¸ªç›¸åŒç±»å‹ shared_ptr æ™ºèƒ½æŒ‡é’ˆçš„å†…å®¹ã€‚</td>
</tr>
<tr>
<td>reset()</td>
<td>å½“å‡½æ•°æ²¡æœ‰å®å‚æ—¶ï¼Œè¯¥å‡½æ•°ä¼šä½¿å½“å‰ shared_ptr æ‰€æŒ‡å †å†…å­˜çš„å¼•ç”¨è®¡æ•°å‡ 1ï¼ŒåŒæ—¶å°†å½“å‰å¯¹è±¡é‡ç½®ä¸ºä¸€ä¸ªç©ºæŒ‡é’ˆï¼›å½“ä¸ºå‡½æ•°ä¼ é€’ä¸€ä¸ªæ–°ç”³è¯·çš„å †å†…å­˜æ—¶ï¼Œåˆ™è°ƒç”¨è¯¥å‡½æ•°çš„ shared_ptr å¯¹è±¡ä¼šè·å¾—è¯¥å­˜å‚¨ç©ºé—´çš„æ‰€æœ‰æƒï¼Œå¹¶ä¸”å¼•ç”¨è®¡æ•°çš„åˆå§‹å€¼ä¸º 1ã€‚</td>
</tr>
<tr>
<td>get()</td>
<td>è·å¾— shared_ptr å¯¹è±¡å†…éƒ¨åŒ…å«çš„æ™®é€šæŒ‡é’ˆã€‚</td>
</tr>
<tr>
<td>use_count()</td>
<td>è¿”å›åŒå½“å‰ shared_ptr å¯¹è±¡ï¼ˆåŒ…æ‹¬å®ƒï¼‰æŒ‡å‘ç›¸åŒçš„æ‰€æœ‰ shared_ptr å¯¹è±¡çš„æ•°é‡ã€‚</td>
</tr>
<tr>
<td>unique()</td>
<td>åˆ¤æ–­å½“å‰ shared_ptr å¯¹è±¡æŒ‡å‘çš„å †å†…å­˜ï¼Œæ˜¯å¦ä¸å†æœ‰å…¶å®ƒ shared_ptr å¯¹è±¡å†æŒ‡å‘å®ƒã€‚</td>
</tr>
<tr>
<td>operator bool()</td>
<td>åˆ¤æ–­å½“å‰ shared_ptr å¯¹è±¡æ˜¯å¦ä¸ºç©ºæ™ºèƒ½æŒ‡é’ˆï¼Œå¦‚æœæ˜¯ç©ºæŒ‡é’ˆï¼Œè¿”å› falseï¼›åä¹‹ï¼Œè¿”å› trueã€‚</td>
</tr>
</tbody>
</table>
<blockquote>
<p>é™¤æ­¤ä¹‹å¤–ï¼ŒC++11 æ ‡å‡†è¿˜æ”¯æŒåŒä¸€ç±»å‹çš„ shared_ptr å¯¹è±¡ï¼Œæˆ–è€… shared_ptr å’Œ nullptr ä¹‹é—´ï¼Œè¿›è¡Œ ==ï¼Œ!=ï¼Œ&lt;ï¼Œ&lt;=ï¼Œ&gt;ï¼Œ&gt;= è¿ç®—ã€‚</p>
</blockquote>
<p>ä¸‹é¢ç¨‹åºç»™å¤§å®¶æ¼”ç¤ºäº† shared_ptr æ™ºèƒ½æŒ‡é’ˆçš„åŸºæœ¬ç”¨æ³•ï¼Œä»¥åŠè¯¥æ¨¡æ¿ç±»æä¾›äº†ä¸€äº›æˆå‘˜æ–¹æ³•çš„ç”¨æ³•ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//æ„å»º 2 ä¸ªæ™ºèƒ½æŒ‡é’ˆ</span></span><br><span class="line">    <span class="function">std::shared_ptr&lt;<span class="type">int</span>&gt; <span class="title">p1</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">10</span>))</span></span>;</span><br><span class="line">    <span class="function">std::shared_ptr&lt;<span class="type">int</span>&gt; <span class="title">p2</span><span class="params">(p1)</span></span>;</span><br><span class="line">    <span class="comment">//è¾“å‡º p2 æŒ‡å‘çš„æ•°æ®</span></span><br><span class="line">    cout &lt;&lt; *p2 &lt;&lt; endl;</span><br><span class="line">    p<span class="number">1.</span><span class="built_in">reset</span>();<span class="comment">//å¼•ç”¨è®¡æ•°å‡ 1,p1ä¸ºç©ºæŒ‡é’ˆ</span></span><br><span class="line">    <span class="keyword">if</span> (p1) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;p1 ä¸ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;p1 ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ä»¥ä¸Šæ“ä½œï¼Œå¹¶ä¸ä¼šå½±å“ p2</span></span><br><span class="line">    cout &lt;&lt; *p2 &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­å½“å‰å’Œ p2 åŒæŒ‡å‘çš„æ™ºèƒ½æŒ‡é’ˆæœ‰å¤šå°‘ä¸ª</span></span><br><span class="line">    cout &lt;&lt; p<span class="number">2.</span><span class="built_in">use_count</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314151617181920212223</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>10<br>
p1 ä¸ºç©º<br>
10<br>
1</p>
<h2 id="c-11-unique-ptræ™ºèƒ½æŒ‡é’ˆ"><a class="header-anchor" href="#c-11-unique-ptræ™ºèƒ½æŒ‡é’ˆ">ğŸŒ³</a>C++11 unique_ptræ™ºèƒ½æŒ‡é’ˆ</h2>
<p>åœ¨ã€Š<a href="http://c.biancheng.net/view/7898.html">C++11 shared_ptræ™ºèƒ½æŒ‡é’ˆ</a>ã€‹çš„åŸºç¡€ä¸Šï¼Œæœ¬èŠ‚ç»§ç»­è®²è§£ C++11 æ ‡å‡†æä¾›çš„å¦ä¸€ç§æ™ºèƒ½æŒ‡é’ˆï¼Œå³ unique_ptr æ™ºèƒ½æŒ‡é’ˆã€‚</p>
<p>ä½œä¸ºæ™ºèƒ½æŒ‡é’ˆçš„ä¸€ç§ï¼Œunique_ptr æŒ‡é’ˆè‡ªç„¶ä¹Ÿå…·å¤‡â€œåœ¨é€‚å½“æ—¶æœºè‡ªåŠ¨é‡Šæ”¾å †å†…å­˜ç©ºé—´â€çš„èƒ½åŠ›ã€‚å’Œ shared_ptr æŒ‡é’ˆæœ€å¤§çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œunique_ptr æŒ‡é’ˆæŒ‡å‘çš„å †å†…å­˜æ— æ³•åŒå…¶å®ƒ unique_ptr å…±äº«ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ª unique_ptr æŒ‡é’ˆéƒ½ç‹¬è‡ªæ‹¥æœ‰å¯¹å…¶æ‰€æŒ‡å †å†…å­˜ç©ºé—´çš„æ‰€æœ‰æƒã€‚</p>
<blockquote>
<p>è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œæ¯ä¸ª unique_ptr æŒ‡é’ˆæŒ‡å‘çš„å †å†…å­˜ç©ºé—´çš„å¼•ç”¨è®¡æ•°ï¼Œéƒ½åªèƒ½ä¸º 1ï¼Œä¸€æ—¦è¯¥ unique_ptr æŒ‡é’ˆæ”¾å¼ƒå¯¹æ‰€æŒ‡å †å†…å­˜ç©ºé—´çš„æ‰€æœ‰æƒï¼Œåˆ™è¯¥ç©ºé—´ä¼šè¢«ç«‹å³é‡Šæ”¾å›æ”¶ã€‚</p>
</blockquote>
<p>unique_ptr æ™ºèƒ½æŒ‡é’ˆæ˜¯ä»¥æ¨¡æ¿ç±»çš„å½¢å¼æä¾›çš„ï¼Œunique_ptrï¼ˆT ä¸ºæŒ‡é’ˆæ‰€æŒ‡æ•°æ®çš„ç±»å‹ï¼‰å®šä¹‰åœ¨<code>&lt;memory&gt;</code>å¤´æ–‡ä»¶ï¼Œå¹¶ä½äº std å‘½åç©ºé—´ä¸­ã€‚å› æ­¤ï¼Œè¦æƒ³ä½¿ç”¨ unique_ptr ç±»å‹æŒ‡é’ˆï¼Œç¨‹åºä¸­åº”é¦–å…ˆåŒ…å«å¦‚ä¸‹ 2 æ¡è¯­å¥ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç¬¬ 2 å¥å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œå¯ä»¥ä¸æ·»åŠ ï¼Œåˆ™åç»­åœ¨ä½¿ç”¨ unique_ptr æŒ‡é’ˆæ—¶ï¼Œå¿…é¡»æ ‡æ³¨<code>std::</code>ã€‚</p>
</blockquote>
<h3 id="unique-ptræ™ºèƒ½æŒ‡é’ˆçš„åˆ›å»º"><a class="header-anchor" href="#unique-ptræ™ºèƒ½æŒ‡é’ˆçš„åˆ›å»º">ğŸŒ³</a>unique_ptræ™ºèƒ½æŒ‡é’ˆçš„åˆ›å»º</h3>
<p>è€ƒè™‘åˆ°ä¸åŒå®é™…åœºæ™¯çš„éœ€è¦ï¼Œunique_ptr æ¨¡æ¿ç±»æä¾›äº†å¤šä¸ªå®ç”¨çš„æ„é€ å‡½æ•°ï¼Œè¿™é‡Œç»™è¯»è€…åˆ—ä¸¾äº†å‡ ç§å¸¸ç”¨çš„æ„é€  unique_ptr æ™ºèƒ½æŒ‡é’ˆçš„æ–¹å¼ã€‚</p>
<ol>
<li>é€šè¿‡ä»¥ä¸‹ 2 ç§æ–¹å¼ï¼Œå¯ä»¥åˆ›å»ºå‡ºç©ºçš„ unique_ptr æŒ‡é’ˆï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">std::unique_ptr&lt;<span class="type">int</span>&gt; <span class="title">p1</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function">std::unique_ptr&lt;<span class="type">int</span>&gt; <span class="title">p2</span><span class="params">(<span class="literal">nullptr</span>)</span></span>;</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>åˆ›å»º unique_ptr æŒ‡é’ˆçš„åŒæ—¶ï¼Œä¹Ÿå¯ä»¥æ˜ç¡®å…¶æŒ‡å‘ã€‚ä¾‹å¦‚ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">std::unique_ptr&lt;int&gt; p3(new int);</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<p>ç”±æ­¤å°±åˆ›å»ºå‡ºäº†ä¸€ä¸ª p3 æ™ºèƒ½æŒ‡é’ˆï¼Œå…¶æŒ‡å‘çš„æ˜¯å¯å®¹çº³ 1 ä¸ªæ•´æ•°çš„å †å­˜å‚¨ç©ºé—´ã€‚</p>
<blockquote>
<p>å’Œå¯ä»¥ç”¨ make_shared() æ¨¡æ¿å‡½æ•°åˆå§‹åŒ– shared_ptr æŒ‡é’ˆä¸åŒï¼ŒC++11 æ ‡å‡†ä¸­å¹¶æ²¡æœ‰ä¸º unique_ptr ç±»å‹æŒ‡é’ˆæ·»åŠ ç±»ä¼¼çš„æ¨¡æ¿å‡½æ•°ã€‚</p>
</blockquote>
<ol start="3">
<li>åŸºäº unique_ptr ç±»å‹æŒ‡é’ˆä¸å…±äº«å„è‡ªæ‹¥æœ‰çš„å †å†…å­˜ï¼Œå› æ­¤ C++11 æ ‡å‡†ä¸­çš„ unique_ptr æ¨¡æ¿ç±»æ²¡æœ‰æä¾›æ‹·è´æ„é€ å‡½æ•°ï¼Œåªæä¾›äº†ç§»åŠ¨æ„é€ å‡½æ•°ã€‚ä¾‹å¦‚ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">std::unique_ptr&lt;<span class="type">int</span>&gt; <span class="title">p4</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>)</span></span>;</span><br><span class="line"><span class="function">std::unique_ptr&lt;<span class="type">int</span>&gt; <span class="title">p5</span><span class="params">(p4)</span></span>;<span class="comment">//é”™è¯¯ï¼Œå †å†…å­˜ä¸å…±äº«</span></span><br><span class="line"><span class="function">std::unique_ptr&lt;<span class="type">int</span>&gt; <span class="title">p5</span><span class="params">(std::move(p4))</span></span>;<span class="comment">//æ­£ç¡®ï¼Œè°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¯¹äºè°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°çš„ p4 å’Œ p5 æ¥è¯´ï¼Œp5 å°†è·å– p4 æ‰€æŒ‡å †ç©ºé—´çš„æ‰€æœ‰æƒï¼Œè€Œ p4 å°†å˜æˆç©ºæŒ‡é’ˆï¼ˆnullptrï¼‰ã€‚</p>
<ol start="4">
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œunique_ptr æŒ‡é’ˆé‡‡ç”¨ std::default_delete æ–¹æ³•é‡Šæ”¾å †å†…å­˜ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ç¬¦åˆå®é™…åœºæ™¯çš„é‡Šæ”¾è§„åˆ™ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå’Œ shared_ptr æŒ‡é’ˆä¸åŒï¼Œä¸º unique_ptr è‡ªå®šä¹‰é‡Šæ”¾è§„åˆ™ï¼Œåªèƒ½é‡‡ç”¨å‡½æ•°å¯¹è±¡çš„æ–¹å¼ã€‚ä¾‹å¦‚ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è‡ªå®šä¹‰çš„é‡Šæ”¾è§„åˆ™</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">myDel</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> *p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">delete</span> p;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">std::unique_ptr&lt;<span class="type">int</span>, myDel&gt; <span class="title">p6</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>)</span></span>;</span><br><span class="line"><span class="comment">//std::unique_ptr&lt;int, myDel&gt; p6(new int, myDel());</span></span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure>
<h3 id="unique-ptræ¨¡æ¿ç±»æä¾›çš„æˆå‘˜æ–¹æ³•"><a class="header-anchor" href="#unique-ptræ¨¡æ¿ç±»æä¾›çš„æˆå‘˜æ–¹æ³•">ğŸŒ³</a>unique_ptræ¨¡æ¿ç±»æä¾›çš„æˆå‘˜æ–¹æ³•</h3>
<p>ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨ unique_ptr æ™ºèƒ½æŒ‡é’ˆï¼Œunique_ptr æ¨¡æ¿ç±»è¿˜æä¾›æœ‰ä¸€äº›å®ç”¨çš„æˆå‘˜æ–¹æ³•ï¼Œå®ƒä»¬å„è‡ªçš„åŠŸèƒ½å¦‚è¡¨ 1 æ‰€ç¤ºã€‚</p>
<table>
<thead>
<tr>
<th>æˆå‘˜å‡½æ•°å</th>
<th>åŠŸ èƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td>operator*()</td>
<td>è·å–å½“å‰ unique_ptr æŒ‡é’ˆæŒ‡å‘çš„æ•°æ®ã€‚</td>
</tr>
<tr>
<td>operator-&gt;()</td>
<td>é‡è½½ -&gt; å·ï¼Œå½“æ™ºèƒ½æŒ‡é’ˆæŒ‡å‘çš„æ•°æ®ç±»å‹ä¸ºè‡ªå®šä¹‰çš„ç»“æ„ä½“æ—¶ï¼Œé€šè¿‡ -&gt; è¿ç®—ç¬¦å¯ä»¥è·å–å…¶å†…éƒ¨çš„æŒ‡å®šæˆå‘˜ã€‚</td>
</tr>
<tr>
<td>operator =()</td>
<td>é‡è½½äº† = èµ‹å€¼å·ï¼Œä»è€Œå¯ä»¥å°† nullptr æˆ–è€…ä¸€ä¸ªå³å€¼ unique_ptr æŒ‡é’ˆç›´æ¥èµ‹å€¼ç»™å½“å‰åŒç±»å‹çš„ unique_ptr æŒ‡é’ˆã€‚</td>
</tr>
<tr>
<td>operator<a href="https://blog.csdn.net/qq_41854911/article/details/119657617?ydreferer=aHR0cHM6Ly9jbi5iaW5nLmNvbS8%3D"></a></td>
<td>é‡è½½äº† [] è¿ç®—ç¬¦ï¼Œå½“ unique_ptr æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªæ•°ç»„æ—¶ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ [] è·å–æŒ‡å®šä¸‹æ ‡ä½ç½®å¤„çš„æ•°æ®ã€‚</td>
</tr>
<tr>
<td>get()</td>
<td>è·å–å½“å‰ unique_ptr æŒ‡é’ˆå†…éƒ¨åŒ…å«çš„æ™®é€šæŒ‡é’ˆã€‚</td>
</tr>
<tr>
<td>get_deleter()</td>
<td>è·å–å½“å‰ unique_ptr æŒ‡é’ˆé‡Šæ”¾å †å†…å­˜ç©ºé—´æ‰€ç”¨çš„è§„åˆ™ã€‚</td>
</tr>
<tr>
<td>operator bool()</td>
<td>unique_ptr æŒ‡é’ˆå¯ç›´æ¥ä½œä¸º if è¯­å¥çš„åˆ¤æ–­æ¡ä»¶ï¼Œä»¥åˆ¤æ–­è¯¥æŒ‡é’ˆæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™ä¸º falseï¼›åä¹‹ä¸º trueã€‚</td>
</tr>
<tr>
<td>release()</td>
<td>é‡Šæ”¾å½“å‰ unique_ptr æŒ‡é’ˆå¯¹æ‰€æŒ‡å †å†…å­˜çš„æ‰€æœ‰æƒï¼Œä½†è¯¥å­˜å‚¨ç©ºé—´å¹¶ä¸ä¼šè¢«é”€æ¯ã€‚</td>
</tr>
<tr>
<td>resetÂ§</td>
<td>å…¶ä¸­ p è¡¨ç¤ºä¸€ä¸ªæ™®é€šæŒ‡é’ˆï¼Œå¦‚æœ p ä¸º nullptrï¼Œåˆ™å½“å‰ unique_ptr ä¹Ÿå˜æˆç©ºæŒ‡é’ˆï¼›åä¹‹ï¼Œåˆ™è¯¥å‡½æ•°ä¼šé‡Šæ”¾å½“å‰ unique_ptr æŒ‡é’ˆæŒ‡å‘çš„å †å†…å­˜ï¼ˆå¦‚æœæœ‰ï¼‰ï¼Œç„¶åè·å– p æ‰€æŒ‡å †å†…å­˜çš„æ‰€æœ‰æƒï¼ˆp ä¸º nullptrï¼‰ã€‚</td>
</tr>
<tr>
<td>swap(x)</td>
<td>äº¤æ¢å½“å‰ unique_ptr æŒ‡é’ˆå’ŒåŒç±»å‹çš„ x æŒ‡é’ˆã€‚</td>
</tr>
</tbody>
</table>
<blockquote>
<p>é™¤æ­¤ä¹‹å¤–ï¼ŒC++11æ ‡å‡†è¿˜æ”¯æŒåŒç±»å‹çš„ unique_ptr æŒ‡é’ˆä¹‹é—´ï¼Œä»¥åŠ unique_ptr å’Œ nullptr ä¹‹é—´ï¼Œåš ==ï¼Œ!=ï¼Œ&lt;ï¼Œ&lt;=ï¼Œ&gt;ï¼Œ&gt;= è¿ç®—ã€‚</p>
</blockquote>
<p>ä¸‹é¢ç¨‹åºç»™å¤§å®¶æ¼”ç¤ºäº† unique_ptr æ™ºèƒ½æŒ‡é’ˆçš„åŸºæœ¬ç”¨æ³•ï¼Œä»¥åŠè¯¥æ¨¡æ¿ç±»æä¾›äº†ä¸€äº›æˆå‘˜æ–¹æ³•çš„ç”¨æ³•ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">std::unique_ptr&lt;<span class="type">int</span>&gt; <span class="title">p5</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>)</span></span>;</span><br><span class="line">    *p5 = <span class="number">10</span>;</span><br><span class="line">    <span class="comment">// p æ¥æ”¶ p5 é‡Šæ”¾çš„å †å†…å­˜</span></span><br><span class="line">    <span class="type">int</span> * p = p<span class="number">5.</span><span class="built_in">release</span>();</span><br><span class="line">    cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­ p5 æ˜¯å¦ä¸ºç©ºæŒ‡é’ˆ</span></span><br><span class="line">    <span class="keyword">if</span> (p5) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;p5 is not nullptr&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;p5 is nullptr&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    std::unique_ptr&lt;<span class="type">int</span>&gt; p6;</span><br><span class="line">    <span class="comment">//p6 è·å– p çš„æ‰€æœ‰æƒ</span></span><br><span class="line">    p<span class="number">6.</span><span class="built_in">reset</span>(p);</span><br><span class="line">    cout &lt;&lt; *p6 &lt;&lt; endl;;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314151617181920212223</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>10<br>
p5 is nullptr<br>
10</p>
<h2 id="c-11-weak-ptræ™ºèƒ½æŒ‡é’ˆ"><a class="header-anchor" href="#c-11-weak-ptræ™ºèƒ½æŒ‡é’ˆ">ğŸŒ³</a>C++11 weak_ptræ™ºèƒ½æŒ‡é’ˆ</h2>
<p>åœ¨ C++98/03 çš„åŸºç¡€ä¸Šï¼ŒC++11 æ ‡å‡†æ–°å¼•å…¥äº† shared_ptrã€unique_ptr ä»¥åŠ weak_ptr è¿™ 3 ä¸ªæ™ºèƒ½æŒ‡é’ˆã€‚å…¶ä¸­ï¼Œshared_ptr å’Œ unique_ptr å·²ç»åœ¨å‰é¢ç« èŠ‚åšäº†è¯¦ç»†åœ°ä»‹ç»ï¼Œæœ¬èŠ‚é‡ç‚¹è®²è§£ weak_ptr æ™ºèƒ½æŒ‡é’ˆçš„ç‰¹æ€§å’Œç”¨æ³•ã€‚</p>
<blockquote>
<p>æ³¨æ„å­¦ä¹  weak_ptr æ™ºèƒ½æŒ‡é’ˆä¹‹å‰ï¼Œè¯»è€…å¿…é¡»å¯¹ shared_ptr æ™ºèƒ½æŒ‡é’ˆæœ‰ä¸€å®šçš„äº†è§£ï¼Œå¯é˜…è¯»ã€Š<a href="http://c.biancheng.net/view/7898.html">C++11 shared_ptræ™ºèƒ½æŒ‡é’ˆ</a>ã€‹ä¸€èŠ‚ï¼›å…³äº unique_ptr æŒ‡é’ˆï¼Œè¯»è€…å¯é˜…è¯»ã€Š<a href="http://c.biancheng.net/view/vip_8672.html">C++11 unique_ptræ™ºèƒ½æŒ‡é’ˆ</a>ã€‹ä¸€èŠ‚åšç³»ç»Ÿå­¦ä¹ ã€‚</p>
</blockquote>
<h3 id="c-11-weak-ptræ™ºèƒ½æŒ‡é’ˆ"><a class="header-anchor" href="#c-11-weak-ptræ™ºèƒ½æŒ‡é’ˆ">ğŸŒ³</a>C++11 weak_ptræ™ºèƒ½æŒ‡é’ˆ</h3>
<p>å’Œ shared_ptrã€unique_ptr ç±»å‹æŒ‡é’ˆä¸€æ ·ï¼Œweak_ptr æ™ºèƒ½æŒ‡é’ˆä¹Ÿæ˜¯ä»¥æ¨¡æ¿ç±»çš„æ–¹å¼å®ç°çš„ã€‚weak_ptrï¼ˆ T ä¸ºæŒ‡é’ˆæ‰€æŒ‡æ•°æ®çš„ç±»å‹ï¼‰å®šä¹‰åœ¨<code>&lt;memory&gt;</code>å¤´æ–‡ä»¶ï¼Œå¹¶ä½äº std å‘½åç©ºé—´ä¸­ã€‚å› æ­¤ï¼Œè¦æƒ³ä½¿ç”¨ weak_ptr ç±»å‹æŒ‡é’ˆï¼Œç¨‹åºä¸­åº”é¦–å…ˆåŒ…å«å¦‚ä¸‹ 2 æ¡è¯­å¥ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç¬¬ 2 å¥å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œå¯ä»¥ä¸æ·»åŠ ï¼Œåˆ™åç»­åœ¨ä½¿ç”¨ unique_ptr æŒ‡é’ˆæ—¶ï¼Œå¿…é¡»æ ‡æ³¨<code>std::</code>ã€‚</p>
</blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒC++11æ ‡å‡†è™½ç„¶å°† weak_ptr å®šä½ä¸ºæ™ºèƒ½æŒ‡é’ˆçš„ä¸€ç§ï¼Œä½†è¯¥ç±»å‹æŒ‡é’ˆé€šå¸¸ä¸å•ç‹¬ä½¿ç”¨ï¼ˆæ²¡æœ‰å®é™…ç”¨å¤„ï¼‰ï¼Œåªèƒ½å’Œ shared_ptr ç±»å‹æŒ‡é’ˆæ­é…ä½¿ç”¨ã€‚ç”šè‡³äºï¼Œæˆ‘ä»¬å¯ä»¥å°† weak_ptr ç±»å‹æŒ‡é’ˆè§†ä¸º shared_ptr æŒ‡é’ˆçš„ä¸€ç§è¾…åŠ©å·¥å…·ï¼Œå€ŸåŠ© weak_ptr ç±»å‹æŒ‡é’ˆï¼Œ æˆ‘ä»¬å¯ä»¥è·å– shared_ptr æŒ‡é’ˆçš„ä¸€äº›çŠ¶æ€ä¿¡æ¯ï¼Œæ¯”å¦‚æœ‰å¤šå°‘æŒ‡å‘ç›¸åŒçš„ shared_ptr æŒ‡é’ˆã€shared_ptr æŒ‡é’ˆæŒ‡å‘çš„å †å†…å­˜æ˜¯å¦å·²ç»è¢«é‡Šæ”¾ç­‰ç­‰ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ weak_ptr ç±»å‹æŒ‡é’ˆçš„æŒ‡å‘å’ŒæŸä¸€ shared_ptr æŒ‡é’ˆç›¸åŒæ—¶ï¼Œweak_ptr æŒ‡é’ˆå¹¶ä¸ä¼šä½¿æ‰€æŒ‡å †å†…å­˜çš„å¼•ç”¨è®¡æ•°åŠ  1ï¼›åŒæ ·ï¼Œå½“ weak_ptr æŒ‡é’ˆè¢«é‡Šæ”¾æ—¶ï¼Œä¹‹å‰æ‰€æŒ‡å †å†…å­˜çš„å¼•ç”¨è®¡æ•°ä¹Ÿä¸ä¼šå› æ­¤è€Œå‡ 1ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œweak_ptr ç±»å‹æŒ‡é’ˆå¹¶ä¸ä¼šå½±å“æ‰€æŒ‡å †å†…å­˜ç©ºé—´çš„å¼•ç”¨è®¡æ•°ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œweak_ptr æ¨¡æ¿ç±»ä¸­æ²¡æœ‰é‡è½½ * å’Œ -&gt; è¿ç®—ç¬¦ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œweak_ptr ç±»å‹æŒ‡é’ˆåªèƒ½è®¿é—®æ‰€æŒ‡çš„å †å†…å­˜ï¼Œè€Œæ— æ³•ä¿®æ”¹å®ƒã€‚</p>
<h4 id="1-weak-ptræŒ‡é’ˆçš„åˆ›å»º"><a class="header-anchor" href="#1-weak-ptræŒ‡é’ˆçš„åˆ›å»º">ğŸŒ³</a>1ã€weak_ptræŒ‡é’ˆçš„åˆ›å»º</h4>
<p>åˆ›å»ºä¸€ä¸ª weak_ptr æŒ‡é’ˆï¼Œæœ‰ä»¥ä¸‹ 3 ç§æ–¹å¼ï¼š</p>
<ol>
<li>å¯ä»¥åˆ›å»ºä¸€ä¸ªç©º weak_ptr æŒ‡é’ˆï¼Œä¾‹å¦‚ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">std::weak_ptr&lt;<span class="type">int</span>&gt; wp1;</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>å‡­å€Ÿå·²æœ‰çš„ weak_ptr æŒ‡é’ˆï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„ weak_ptr æŒ‡é’ˆï¼Œä¾‹å¦‚ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">std::weak_ptr&lt;<span class="type">int</span>&gt; <span class="title">wp2</span> <span class="params">(wp1)</span></span>;</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>è‹¥ wp1 ä¸ºç©ºæŒ‡é’ˆï¼Œåˆ™ wp2 ä¹Ÿä¸ºç©ºæŒ‡é’ˆï¼›åä¹‹ï¼Œå¦‚æœ wp1 æŒ‡å‘æŸä¸€ shared_ptr æŒ‡é’ˆæ‹¥æœ‰çš„å †å†…å­˜ï¼Œåˆ™ wp2 ä¹ŸæŒ‡å‘è¯¥å—å­˜å‚¨ç©ºé—´ï¼ˆå¯ä»¥è®¿é—®ï¼Œä½†æ— æ‰€æœ‰æƒï¼‰ã€‚</p>
<ol start="3">
<li>weak_ptr æŒ‡é’ˆæ›´å¸¸ç”¨äºæŒ‡å‘æŸä¸€ shared_ptr æŒ‡é’ˆæ‹¥æœ‰çš„å †å†…å­˜ï¼Œå› ä¸ºåœ¨æ„å»º weak_ptr æŒ‡é’ˆå¯¹è±¡æ—¶ï¼Œå¯ä»¥åˆ©ç”¨å·²æœ‰çš„ shared_ptr æŒ‡é’ˆä¸ºå…¶åˆå§‹åŒ–ã€‚ä¾‹å¦‚ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">std::shared_ptr&lt;<span class="type">int</span>&gt; <span class="title">sp</span> <span class="params">(<span class="keyword">new</span> <span class="type">int</span>)</span></span>;</span><br><span class="line"><span class="function">std::weak_ptr&lt;<span class="type">int</span>&gt; <span class="title">wp3</span> <span class="params">(sp)</span></span>;</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>
<p>ç”±æ­¤ï¼Œwp3 æŒ‡é’ˆå’Œ sp æŒ‡é’ˆæœ‰ç›¸åŒçš„æŒ‡é’ˆã€‚å†æ¬¡å¼ºè°ƒï¼Œweak_ptr ç±»å‹æŒ‡é’ˆä¸ä¼šå¯¼è‡´å †å†…å­˜ç©ºé—´çš„å¼•ç”¨è®¡æ•°å¢åŠ æˆ–å‡å°‘ã€‚</p>
<h4 id="2-weak-ptræ¨¡æ¿ç±»æä¾›çš„æˆå‘˜æ–¹æ³•"><a class="header-anchor" href="#2-weak-ptræ¨¡æ¿ç±»æä¾›çš„æˆå‘˜æ–¹æ³•">ğŸŒ³</a>2) weak_ptræ¨¡æ¿ç±»æä¾›çš„æˆå‘˜æ–¹æ³•</h4>
<p>å’Œ shared_ptrã€unique_ptr ç›¸æ¯”ï¼Œweak_ptr æ¨¡æ¿ç±»æä¾›çš„æˆå‘˜æ–¹æ³•ä¸å¤šï¼Œè¡¨ 1 ç½—åˆ—äº†å¸¸ç”¨çš„æˆå‘˜æ–¹æ³•åŠå„è‡ªçš„åŠŸèƒ½ã€‚</p>
<table>
<thead>
<tr>
<th>æˆå‘˜æ–¹æ³•</th>
<th>åŠŸ èƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td>operator=()</td>
<td>é‡è½½ = èµ‹å€¼è¿ç®—ç¬¦ï¼Œæ˜¯çš„ weak_ptr æŒ‡é’ˆå¯ä»¥ç›´æ¥è¢« weak_ptr æˆ–è€… shared_ptr ç±»å‹æŒ‡é’ˆèµ‹å€¼ã€‚</td>
</tr>
<tr>
<td>swap(x)</td>
<td>å…¶ä¸­ x è¡¨ç¤ºä¸€ä¸ªåŒç±»å‹çš„ weak_ptr ç±»å‹æŒ‡é’ˆï¼Œè¯¥å‡½æ•°å¯ä»¥äº’æ¢ 2 ä¸ªåŒç±»å‹ weak_ptr æŒ‡é’ˆçš„å†…å®¹ã€‚</td>
</tr>
<tr>
<td>reset()</td>
<td>å°†å½“å‰ weak_ptr æŒ‡é’ˆç½®ä¸ºç©ºæŒ‡é’ˆã€‚</td>
</tr>
<tr>
<td>use_count()</td>
<td>æŸ¥çœ‹æŒ‡å‘å’Œå½“å‰ weak_ptr æŒ‡é’ˆç›¸åŒçš„ shared_ptr æŒ‡é’ˆçš„æ•°é‡ã€‚</td>
</tr>
<tr>
<td>expired()</td>
<td>åˆ¤æ–­å½“å‰ weak_ptr æŒ‡é’ˆä¸ºå¦è¿‡æœŸï¼ˆæŒ‡é’ˆä¸ºç©ºï¼Œæˆ–è€…æŒ‡å‘çš„å †å†…å­˜å·²ç»è¢«é‡Šæ”¾ï¼‰ã€‚</td>
</tr>
<tr>
<td>lock()</td>
<td>å¦‚æœå½“å‰ weak_ptr å·²ç»è¿‡æœŸï¼Œåˆ™è¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªç©ºçš„ shared_ptr æŒ‡é’ˆï¼›åä¹‹ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªå’Œå½“å‰ weak_ptr æŒ‡å‘ç›¸åŒçš„ shared_ptr æŒ‡é’ˆã€‚</td>
</tr>
</tbody>
</table>
<blockquote>
<p>å†æ¬¡å¼ºè°ƒï¼Œweak_ptr æ¨¡æ¿ç±»æ²¡æœ‰é‡è½½ * å’Œ -&gt; è¿ç®—ç¬¦ï¼Œå› æ­¤ weak_ptr ç±»å‹æŒ‡é’ˆåªèƒ½è®¿é—®æŸä¸€ shared_ptr æŒ‡é’ˆæŒ‡å‘çš„å †å†…å­˜ç©ºé—´ï¼Œæ— æ³•å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚</p>
</blockquote>
<p>ä¸‹é¢çš„æ ·ä¾‹æ¼”ç¤ºäº† weak_ptr æŒ‡é’ˆä»¥åŠè¡¨ 1 ä¸­éƒ¨åˆ†æˆå‘˜æ–¹æ³•çš„åŸºæœ¬ç”¨æ³•ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">std::shared_ptr&lt;<span class="type">int</span>&gt; <span class="title">sp1</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">10</span>))</span></span>;</span><br><span class="line">    <span class="function">std::shared_ptr&lt;<span class="type">int</span>&gt; <span class="title">sp2</span><span class="params">(sp1)</span></span>;</span><br><span class="line">    <span class="function">std::weak_ptr&lt;<span class="type">int</span>&gt; <span class="title">wp</span><span class="params">(sp2)</span></span>;</span><br><span class="line">    <span class="comment">//è¾“å‡ºå’Œ wp åŒæŒ‡å‘çš„ shared_ptr ç±»å‹æŒ‡é’ˆçš„æ•°é‡</span></span><br><span class="line">    cout &lt;&lt; wp.<span class="built_in">use_count</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//é‡Šæ”¾ sp2</span></span><br><span class="line">    sp<span class="number">2.</span><span class="built_in">reset</span>();</span><br><span class="line">    cout &lt;&lt; wp.<span class="built_in">use_count</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//å€ŸåŠ© lock() å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå’Œ wp åŒæŒ‡å‘çš„ shared_ptr ç±»å‹æŒ‡é’ˆï¼Œè·å–å…¶å­˜å‚¨çš„æ•°æ®</span></span><br><span class="line">    cout &lt;&lt; *(wp.<span class="built_in">lock</span>()) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314151617</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p>
<p>2<br>
1<br>
10</p>
<blockquote>
<p>æœ‰å…³è¡¨ 1 ä¸­å…¶å®ƒæˆå‘˜å‡½æ•°çš„ç”¨æ³•ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ç›´æ¥æŸ¥çœ‹ <a href="http://www.cplusplus.com/reference/memory/weak_ptr/">weak_ptr å®˜ç½‘</a>ã€‚</p>
</blockquote>
<h2 id="c-14-æ–°ç‰¹æ€§æ€»ç»“"><a class="header-anchor" href="#c-14-æ–°ç‰¹æ€§æ€»ç»“">ğŸŒ³</a>C++14 æ–°ç‰¹æ€§æ€»ç»“</h2>
<h3 id="å‡½æ•°è¿”å›å€¼ç±»å‹æ¨å¯¼"><a class="header-anchor" href="#å‡½æ•°è¿”å›å€¼ç±»å‹æ¨å¯¼">ğŸŒ³</a>å‡½æ•°è¿”å›å€¼ç±»å‹æ¨å¯¼</h3>
<p>C++14å¯¹å‡½æ•°è¿”å›ç±»å‹æ¨å¯¼è§„åˆ™åšäº†ä¼˜åŒ–ï¼Œå…ˆçœ‹ä¸€æ®µä»£ç ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">func</span><span class="params">(<span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">func</span>(<span class="number">4</span>) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨C++11ç¼–è¯‘ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">~/test$ g++ test.cc -std=c+<span class="number">+11</span></span><br><span class="line">test.cc:<span class="number">5</span>:<span class="number">16</span>: error: â€˜funcâ€™ function uses â€˜<span class="keyword">auto</span>â€™ type specifier without trailing <span class="keyword">return</span> type</span><br><span class="line"> <span class="keyword">auto</span> <span class="built_in">func</span>(<span class="type">int</span> i) &#123;</span><br><span class="line">                ^</span><br><span class="line">test.cc:<span class="number">5</span>:<span class="number">16</span>: note: deduced <span class="keyword">return</span> type only available with -std=c+<span class="number">+14</span> <span class="keyword">or</span> -std=gnu+<span class="number">+14</span></span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç ä½¿ç”¨C++11æ˜¯ä¸èƒ½é€šè¿‡ç¼–è¯‘çš„ï¼Œé€šè¿‡ç¼–è¯‘å™¨è¾“å‡ºçš„ä¿¡æ¯ä¹Ÿå¯ä»¥çœ‹è§è¿™ä¸ªç‰¹æ€§éœ€è¦åˆ°C++14æ‰è¢«æ”¯æŒã€‚</p>
<p>è¿”å›å€¼ç±»å‹æ¨å¯¼ä¹Ÿå¯ä»¥ç”¨åœ¨æ¨¡æ¿ä¸­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">auto</span> <span class="title">func</span><span class="params">(T t)</span> </span>&#123; <span class="keyword">return</span> t; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">func</span>(<span class="number">4</span>) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">func</span>(<span class="number">3.4</span>) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<p>ï¼‰å‡½æ•°å†…å¦‚æœæœ‰å¤šä¸ªreturnè¯­å¥ï¼Œå®ƒä»¬å¿…é¡»è¿”å›ç›¸åŒçš„ç±»å‹ï¼Œå¦åˆ™ç¼–è¯‘å¤±è´¥ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">func</span><span class="params">(<span class="type">bool</span> flag)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (flag) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">2.3</span>; <span class="comment">// error</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// inconsistent deduction for auto return tags: â€˜intâ€™ and then â€˜doubleâ€™</span></span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>
<p>ï¼‰å¦‚æœreturnè¯­å¥è¿”å›åˆå§‹åŒ–åˆ—è¡¨ï¼Œè¿”å›å€¼ç±»å‹æ¨å¯¼ä¹Ÿä¼šå¤±è´¥</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;; <span class="comment">// error returning initializer list</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<p>) å¦‚æœå‡½æ•°æ˜¯è™šå‡½æ•°ï¼Œä¸èƒ½ä½¿ç”¨è¿”å›å€¼ç±»å‹æ¨å¯¼</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">A</span> &#123;</span></span><br><span class="line">    <span class="comment">// error: virtual function cannot have deduced return type</span></span><br><span class="line">    virtual <span class="keyword">auto</span> <span class="title function_">func</span><span class="params">()</span> &#123; <span class="keyword">return</span> <span class="number">1</span>; &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>
<p>ï¼‰ è¿”å›ç±»å‹æ¨å¯¼å¯ä»¥ç”¨åœ¨å‰å‘å£°æ˜ä¸­ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨å®ƒä»¬ä¹‹å‰ï¼Œç¿»è¯‘å•å…ƒä¸­å¿…é¡»èƒ½å¤Ÿå¾—åˆ°å‡½æ•°å®šä¹‰</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> <span class="title function_">f</span><span class="params">()</span>;               <span class="comment">// declared, not yet defined</span></span><br><span class="line"><span class="keyword">auto</span> <span class="title function_">f</span><span class="params">()</span> &#123; <span class="keyword">return</span> <span class="number">42</span>; &#125; <span class="comment">// defined, return type is int</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>
<p>ï¼‰è¿”å›ç±»å‹æ¨å¯¼å¯ä»¥ç”¨åœ¨é€’å½’å‡½æ•°ä¸­ï¼Œä½†æ˜¯é€’å½’è°ƒç”¨å¿…é¡»ä»¥è‡³å°‘ä¸€ä¸ªè¿”å›è¯­å¥ä½œä¸ºå…ˆå¯¼ï¼Œä»¥ä¾¿ç¼–è¯‘å™¨æ¨å¯¼å‡ºè¿”å›ç±»å‹ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> <span class="title function_">sum</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (i == <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> i;              <span class="comment">// return int</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> sum(i - <span class="number">1</span>) + i; <span class="comment">// ok</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>
<h3 id="lambdaå‚æ•°auto"><a class="header-anchor" href="#lambdaå‚æ•°auto">ğŸŒ³</a>lambdaå‚æ•°auto</h3>
<p>åœ¨C++11ä¸­ï¼Œlambdaè¡¨è¾¾å¼å‚æ•°éœ€è¦ä½¿ç”¨å…·ä½“çš„ç±»å‹å£°æ˜ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> f = [] (<span class="type">int</span> a) &#123; <span class="keyword">return</span> a; &#125;</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>åœ¨C++14ä¸­ï¼Œå¯¹æ­¤è¿›è¡Œä¼˜åŒ–ï¼Œlambdaè¡¨è¾¾å¼å‚æ•°å¯ä»¥ç›´æ¥æ˜¯autoï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> f = [] (<span class="keyword">auto</span> a) &#123; <span class="keyword">return</span> a; &#125;;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; f(<span class="number">1</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; f(<span class="number">2.3f</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<h3 id="å˜é‡æ¨¡æ¿"><a class="header-anchor" href="#å˜é‡æ¨¡æ¿">ğŸŒ³</a>å˜é‡æ¨¡æ¿</h3>
<p>C++14æ”¯æŒå˜é‡æ¨¡æ¿ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">constexpr</span> T pi = <span class="built_in">T</span>(<span class="number">3.1415926535897932385L</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; pi&lt;<span class="type">int</span>&gt; &lt;&lt; endl; <span class="comment">// 3</span></span><br><span class="line">    cout &lt;&lt; pi&lt;<span class="type">double</span>&gt; &lt;&lt; endl; <span class="comment">// 3.14159</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure>
<h3 id="åˆ«åæ¨¡æ¿"><a class="header-anchor" href="#åˆ«åæ¨¡æ¿">ğŸŒ³</a>åˆ«åæ¨¡æ¿</h3>
<p>C++14ä¹Ÿæ”¯æŒåˆ«åæ¨¡æ¿ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> U&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    T t;</span><br><span class="line">    U u;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">using</span> B = A&lt;T, <span class="type">int</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    B&lt;<span class="type">double</span>&gt; b;</span><br><span class="line">    b.t = <span class="number">10</span>;</span><br><span class="line">    b.u = <span class="number">20</span>;</span><br><span class="line">    cout &lt;&lt; b.t &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; b.u &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314151617</span></span><br></pre></td></tr></table></figure>
<h3 id="constexprçš„é™åˆ¶"><a class="header-anchor" href="#constexprçš„é™åˆ¶">ğŸŒ³</a>constexprçš„é™åˆ¶</h3>
<p>C++14ç›¸è¾ƒäºC++11å¯¹constexprå‡å°‘äº†ä¸€äº›é™åˆ¶ï¼š</p>
<p>ï¼‰C++11ä¸­constexprå‡½æ•°å¯ä»¥ä½¿ç”¨é€’å½’ï¼Œåœ¨C++14ä¸­å¯ä»¥ä½¿ç”¨å±€éƒ¨å˜é‡å’Œå¾ªç¯</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="type">int</span> <span class="title">factorial</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123; <span class="comment">// C++14 å’Œ C++11å‡å¯</span></span><br><span class="line">    <span class="keyword">return</span> n &lt;= <span class="number">1</span> ? <span class="number">1</span> : (n * <span class="built_in">factorial</span>(n - <span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<p>åœ¨C++14ä¸­å¯ä»¥è¿™æ ·åšï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="type">int</span> <span class="title">factorial</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123; <span class="comment">// C++11ä¸­ä¸å¯ï¼ŒC++14ä¸­å¯ä»¥</span></span><br><span class="line">    <span class="type">int</span> ret = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        ret += i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure>
<p>ï¼‰C++11ä¸­constexprå‡½æ•°å¿…é¡»å¿…é¡»æŠŠæ‰€æœ‰ä¸œè¥¿éƒ½æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„returnè¯­å¥ä¸­ï¼Œè€Œconstexpråˆ™æ— æ­¤é™åˆ¶ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="type">int</span> <span class="title">func</span><span class="params">(<span class="type">bool</span> flag)</span> </span>&#123; <span class="comment">// C++14 å’Œ C++11å‡å¯</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<p>åœ¨C++14ä¸­å¯ä»¥è¿™æ ·ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="type">int</span> <span class="title">func</span><span class="params">(<span class="type">bool</span> flag)</span> </span>&#123; <span class="comment">// C++11ä¸­ä¸å¯ï¼ŒC++14ä¸­å¯ä»¥</span></span><br><span class="line">    <span class="keyword">if</span> (flag) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>
<h3 id="deprecated-æ ‡è®°"><a class="header-anchor" href="#deprecated-æ ‡è®°">ğŸŒ³</a>[[<code>deprecated</code>]]æ ‡è®°</h3>
<p>C++14ä¸­å¢åŠ äº†deprecatedæ ‡è®°ï¼Œä¿®é¥°ç±»ã€å˜ã€å‡½æ•°ç­‰ï¼Œå½“ç¨‹åºä¸­ä½¿ç”¨åˆ°äº†è¢«å…¶ä¿®é¥°çš„ä»£ç æ—¶ï¼Œç¼–è¯‘æ—¶è¢«äº§ç”Ÿè­¦å‘Šï¼Œç”¨æˆ·æç¤ºå¼€å‘è€…è¯¥æ ‡è®°ä¿®é¥°çš„å†…å®¹å°†æ¥å¯èƒ½ä¼šè¢«ä¸¢å¼ƒï¼Œå°½é‡ä¸è¦ä½¿ç”¨ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> [[deprecated]] A &#123; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    A a;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>
<p>å½“ç¼–è¯‘æ—¶ï¼Œä¼šå‡ºç°å¦‚ä¸‹è­¦å‘Šï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">~/test$ g++ test.cc -std=c+<span class="number">+14</span></span><br><span class="line">test.cc: In function â€˜<span class="type">int</span> <span class="built_in">main</span>()â€™:</span><br><span class="line">test.cc:<span class="number">11</span>:<span class="number">7</span>: warning: â€˜Aâ€™ is deprecated [-Wdeprecated-declarations]</span><br><span class="line">     A a;</span><br><span class="line">       ^</span><br><span class="line">test.cc:<span class="number">6</span>:<span class="number">23</span>: note: declared here</span><br><span class="line"> <span class="keyword">struct</span> [[deprecated]] A &#123;</span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure>
<h3 id="äºŒè¿›åˆ¶å­—é¢é‡ä¸æ•´å½¢å­—é¢é‡åˆ†éš”ç¬¦"><a class="header-anchor" href="#äºŒè¿›åˆ¶å­—é¢é‡ä¸æ•´å½¢å­—é¢é‡åˆ†éš”ç¬¦">ğŸŒ³</a>äºŒè¿›åˆ¶å­—é¢é‡ä¸æ•´å½¢å­—é¢é‡åˆ†éš”ç¬¦</h3>
<p>C++14å¼•å…¥äº†äºŒè¿›åˆ¶å­—é¢é‡ï¼Œä¹Ÿå¼•å…¥äº†åˆ†éš”ç¬¦ï¼Œé˜²æ­¢çœ‹èµ·æ¥çœ¼èŠ±å“ˆ~</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a = <span class="number">0b0001&#x27;0011&#x27;1010</span>;</span><br><span class="line"><span class="type">double</span> b = <span class="number">3.14&#x27;1234&#x27;1234&#x27;1234</span>;</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>
<h3 id="std-make-unique"><a class="header-anchor" href="#std-make-unique">ğŸŒ³</a>std::make_unique</h3>
<p>æˆ‘ä»¬éƒ½çŸ¥é“C++11ä¸­æœ‰std::make_sharedï¼Œå´æ²¡æœ‰std::make_uniqueï¼Œåœ¨C++14å·²ç»æ”¹å–„ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span> &#123;&#125;;</span><br><span class="line">std::unique_ptr&lt;A&gt; ptr = std::<span class="built_in">make_unique</span>&lt;A&gt;();</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>
<h3 id="std-shared-timed-mutexä¸std-shared-lock"><a class="header-anchor" href="#std-shared-timed-mutexä¸std-shared-lock">ğŸŒ³</a>std::shared_timed_mutexä¸std::shared_lock</h3>
<p>C++14é€šè¿‡std::shared_timed_mutexå’Œstd::shared_lockæ¥å®ç°è¯»å†™é”ï¼Œä¿è¯å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è¯»ï¼Œä½†æ˜¯å†™çº¿ç¨‹å¿…é¡»ç‹¬ç«‹è¿è¡Œï¼Œå†™æ“ä½œä¸å¯ä»¥åŒæ—¶å’Œè¯»æ“ä½œä¸€èµ·è¿›è¡Œã€‚</p>
<p>å®ç°æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ThreadSafe</span> &#123;</span><br><span class="line">    <span class="keyword">mutable</span> std::shared_timed_mutex mutex_;</span><br><span class="line">    <span class="type">int</span> value_;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">ThreadSafe</span>() &#123;</span><br><span class="line">        value_ = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="function">std::shared_lock&lt;std::shared_timed_mutex&gt; <span class="title">loc</span><span class="params">(mutex_)</span></span>;</span><br><span class="line">        <span class="keyword">return</span> value_;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">increase</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="function">std::unique_lock&lt;std::shared_timed_mutex&gt; <span class="title">lock</span><span class="params">(mutex_)</span></span>;</span><br><span class="line">        value_ += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="number">123456789101112131415161718</span></span><br></pre></td></tr></table></figure>
<p>ä¸ºä»€ä¹ˆæ˜¯timedçš„é”å‘¢ï¼Œå› ä¸ºå¯ä»¥å¸¦è¶…æ—¶æ—¶é—´ï¼Œå…·ä½“å¯ä»¥è‡ªè¡ŒæŸ¥è¯¢ç›¸å…³èµ„æ–™å“ˆï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šã€‚</p>
<h3 id="std-integer-sequence"><a class="header-anchor" href="#std-integer-sequence">ğŸŒ³</a>std::integer_sequence</h3>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, T... ints&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print_sequence</span><span class="params">(std::integer_sequence&lt;T, ints...&gt; int_seq)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;The sequence of size &quot;</span> &lt;&lt; int_seq.<span class="built_in">size</span>() &lt;&lt; <span class="string">&quot;: &quot;</span>;</span><br><span class="line">    ((std::cout &lt;&lt; ints &lt;&lt; <span class="string">&#x27; &#x27;</span>), ...);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">print_sequence</span>(std::integer_sequence&lt;<span class="type">int</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">6</span>&gt;&#123;&#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">è¾“å‡ºï¼š<span class="number">7</span> <span class="number">9</span> <span class="number">2</span> <span class="number">5</span> <span class="number">1</span> <span class="number">9</span> <span class="number">1</span> <span class="number">6</span></span><br><span class="line"><span class="number">1234567891011121314</span></span><br></pre></td></tr></table></figure>
<p>std::integer_sequenceå’Œstd::tupleçš„é…åˆä½¿ç”¨ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;std::<span class="type">size_t</span>... Is, <span class="keyword">typename</span> F, <span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">map_filter_tuple</span><span class="params">(F f, T&amp; t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> std::<span class="built_in">make_tuple</span>(<span class="built_in">f</span>(std::<span class="built_in">get</span>&lt;Is&gt;(t))...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;std::<span class="type">size_t</span>... Is, <span class="keyword">typename</span> F, <span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">map_filter_tuple</span><span class="params">(std::index_sequence&lt;Is...&gt;, F f, T&amp; t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> std::<span class="built_in">make_tuple</span>(<span class="built_in">f</span>(std::<span class="built_in">get</span>&lt;Is&gt;(t))...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> S, <span class="keyword">typename</span> F, <span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">map_filter_tuple</span><span class="params">(F&amp;&amp; f, T&amp; t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">map_filter_tuple</span>(S&#123;&#125;, std::forward&lt;F&gt;(f), t);</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314</span></span><br></pre></td></tr></table></figure>
<h3 id="std-exchange"><a class="header-anchor" href="#std-exchange">ğŸŒ³</a>std::exchange</h3>
<p>ç›´æ¥çœ‹ä»£ç å§ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">    <span class="built_in">std</span>::exchange(v, &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; v.size() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> a : v) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; a &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure>
<p>çœ‹æ ·å­è²Œä¼¼å’Œstd::swapä½œç”¨ç›¸åŒï¼Œé‚£å®ƒä¿©æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
<p>å¯ä»¥çœ‹ä¸‹exchangeçš„å®ç°ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T, <span class="keyword">class</span> U </span>= T&gt;</span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> T <span class="title">exchange</span><span class="params">(T&amp; obj, U&amp;&amp; new_value)</span> </span>&#123;</span><br><span class="line">    T old_value = std::<span class="built_in">move</span>(obj);</span><br><span class="line">    obj = std::forward&lt;U&gt;(new_value);</span><br><span class="line">    <span class="keyword">return</span> old_value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹è§new_valueçš„å€¼ç»™äº†objï¼Œè€Œæ²¡æœ‰å¯¹new_valueèµ‹å€¼ï¼Œè¿™é‡Œç›¸ä¿¡æ‚¨å·²ç»çŸ¥é“äº†å®ƒå’Œswapçš„åŒºåˆ«äº†å§ï¼</p>
<h3 id="std-quoted"><a class="header-anchor" href="#std-quoted">ğŸŒ³</a>std::quoted</h3>
<p>C++14å¼•å…¥std::quotedç”¨äºç»™å­—ç¬¦ä¸²æ·»åŠ åŒå¼•å·ï¼Œç›´æ¥çœ‹ä»£ç ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    string str = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">    cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; std::<span class="built_in">quoted</span>(str) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘&amp;è¾“å‡ºï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">~/test$ g++ test.cc -std=c+<span class="number">+14</span></span><br><span class="line">~/test$ ./a.out</span><br><span class="line">hello world</span><br><span class="line"><span class="string">&quot;hello world&quot;</span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>
<h2 id="c-17æ–°ç‰¹æ€§æ€»ç»“"><a class="header-anchor" href="#c-17æ–°ç‰¹æ€§æ€»ç»“">ğŸŒ³</a>C++17æ–°ç‰¹æ€§æ€»ç»“</h2>
<p>ä¸»è¦æ–°ç‰¹æ€§å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ„é€ å‡½æ•°æ¨¡æ¿æ¨å¯¼</li>
<li>ç»“æ„åŒ–ç»‘å®š</li>
<li>if-switchè¯­å¥åˆå§‹åŒ–</li>
<li>å†…è”å˜é‡</li>
<li>æŠ˜å è¡¨è¾¾å¼</li>
<li>constexpr lambdaè¡¨è¾¾å¼</li>
<li>namespaceåµŒå¥—</li>
<li>__has_includeé¢„å¤„ç†è¡¨è¾¾å¼</li>
<li>åœ¨lambdaè¡¨è¾¾å¼ç”¨*thisæ•è·å¯¹è±¡å‰¯æœ¬</li>
<li>æ–°å¢Attribute</li>
<li>å­—ç¬¦ä¸²è½¬æ¢</li>
<li>std::variant</li>
<li>std::optional</li>
<li>std::any</li>
<li>std::apply</li>
<li>std::make_from_tuple</li>
<li>as_const</li>
<li>std::string_view</li>
<li>file_system</li>
<li>std::shared_mutex</li>
</ul>
<p>ä¸‹é¢ç¨‹åºå–µä¸€ä¸€ä»‹ç»ï¼š</p>
<h3 id="æ„é€ å‡½æ•°æ¨¡æ¿æ¨å¯¼"><a class="header-anchor" href="#æ„é€ å‡½æ•°æ¨¡æ¿æ¨å¯¼">ğŸŒ³</a>æ„é€ å‡½æ•°æ¨¡æ¿æ¨å¯¼</h3>
<p>åœ¨C++17å‰æ„é€ ä¸€ä¸ªæ¨¡æ¿ç±»å¯¹è±¡éœ€è¦æŒ‡æ˜ç±»å‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">double</span>&gt; <span class="title function_">p</span><span class="params">(<span class="number">1</span>, <span class="number">2.2</span>)</span>; <span class="comment">// before c++17</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>C++17å°±ä¸éœ€è¦ç‰¹æ®ŠæŒ‡å®šï¼Œç›´æ¥å¯ä»¥æ¨å¯¼å‡ºç±»å‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="built_in">pair</span> <span class="title function_">p</span><span class="params">(<span class="number">1</span>, <span class="number">2.2</span>)</span>; <span class="comment">// c++17 è‡ªåŠ¨æ¨å¯¼</span></span><br><span class="line"><span class="built_in">vector</span> v = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;; <span class="comment">// c++17</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>
<h3 id="ç»“æ„åŒ–ç»‘å®š"><a class="header-anchor" href="#ç»“æ„åŒ–ç»‘å®š">ğŸŒ³</a>ç»“æ„åŒ–ç»‘å®š</h3>
<p>é€šè¿‡ç»“æ„åŒ–ç»‘å®šï¼Œå¯¹äºtupleã€mapç­‰ç±»å‹ï¼Œè·å–ç›¸åº”å€¼ä¼šæ–¹ä¾¿å¾ˆå¤šï¼Œçœ‹ä»£ç ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="built_in">std</span>::tuple&lt;<span class="type">int</span>, <span class="type">double</span>&gt; <span class="title function_">func</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">std</span>::tuple(<span class="number">1</span>, <span class="number">2.2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">auto</span>[i, d] = func(); <span class="comment">//æ˜¯C++11çš„tieå—ï¼Ÿæ›´é«˜çº§</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; d &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//==========================</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">f</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">map</span>&lt;<span class="type">int</span>, <span class="built_in">string</span>&gt; m = &#123;</span><br><span class="line">      &#123;<span class="number">0</span>, <span class="string">&quot;a&quot;</span>&#125;,</span><br><span class="line">      &#123;<span class="number">1</span>, <span class="string">&quot;b&quot;</span>&#125;,  </span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span> &amp;[i, s] : m) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; s &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ====================</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">pair</span> <span class="title function_">a</span><span class="params">(<span class="number">1</span>, <span class="number">2.3f</span>)</span>;</span><br><span class="line">    <span class="keyword">auto</span>[i, f] = a;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// 1</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// 2.3f</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314151617181920212223242526272829</span></span><br></pre></td></tr></table></figure>
<p>ç»“æ„åŒ–ç»‘å®šè¿˜å¯ä»¥æ”¹å˜å¯¹è±¡çš„å€¼ï¼Œä½¿ç”¨å¼•ç”¨å³å¯ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¿›åŒ–ï¼Œå¯ä»¥é€šè¿‡ç»“æ„åŒ–ç»‘å®šæ”¹å˜å¯¹è±¡çš„å€¼</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">pair</span> <span class="title function_">a</span><span class="params">(<span class="number">1</span>, <span class="number">2.3f</span>)</span>;</span><br><span class="line">    <span class="keyword">auto</span>&amp; [i, f] = a;</span><br><span class="line">    i = <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; a.first &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// 2 </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure>
<p><em>æ³¨æ„ç»“æ„åŒ–ç»‘å®šä¸èƒ½åº”ç”¨äºconstexpr</em></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">constexpr</span> <span class="keyword">auto</span>[x, y] = <span class="built_in">std</span>::<span class="built_in">pair</span>(<span class="number">1</span>, <span class="number">2.3f</span>); <span class="comment">// compile error, C++20å¯ä»¥</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>ç»“æ„åŒ–ç»‘å®šä¸æ­¢å¯ä»¥ç»‘å®špairå’Œtupleï¼Œè¿˜å¯ä»¥ç»‘å®šæ•°ç»„å’Œç»“æ„ä½“ç­‰</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> array[<span class="number">3</span>] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line"><span class="keyword">auto</span> [a, b, c] = array;</span><br><span class="line">cout &lt;&lt; a &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; b &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; c &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨æ„è¿™é‡Œçš„structçš„æˆå‘˜ä¸€å®šè¦æ˜¯publicçš„</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    <span class="type">int</span> y;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">Point <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="number">1</span>, <span class="number">2</span>&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">const</span> <span class="keyword">auto</span> [x, y] = <span class="built_in">func</span>();</span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå…¶å®å¯ä»¥å®ç°è‡ªå®šä¹‰ç±»çš„ç»“æ„åŒ–ç»‘å®šï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// éœ€è¦å®ç°ç›¸å…³çš„tuple_sizeå’Œtuple_elementå’Œget&lt;N&gt;æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Entry</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">Init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        name_ = <span class="string">&quot;name&quot;</span>;</span><br><span class="line">        age_ = <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">std::string <span class="title">GetName</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> name_; &#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">GetAge</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> age_; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    std::string name_;</span><br><span class="line">    <span class="type">int</span> age_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="type">size_t</span> I&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">get</span><span class="params">(<span class="type">const</span> Entry&amp; e)</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">if</span> <span class="title">constexpr</span> <span class="params">(I == <span class="number">0</span>)</span> <span class="keyword">return</span> e.<span class="title">GetName</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> <span class="built_in">constexpr</span> (I == <span class="number">1</span>) <span class="keyword">return</span> e.<span class="built_in">GetAge</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> std &#123;</span><br><span class="line">    <span class="keyword">template</span>&lt;&gt; <span class="keyword">struct</span> <span class="title class_">tuple_size</span>&lt;Entry&gt; : integral_constant&lt;<span class="type">size_t</span>, <span class="number">2</span>&gt; &#123;&#125;;</span><br><span class="line">    <span class="keyword">template</span>&lt;&gt; <span class="keyword">struct</span> <span class="title class_">tuple_element</span>&lt;<span class="number">0</span>, Entry&gt; &#123; <span class="keyword">using</span> type = std::string; &#125;;</span><br><span class="line">    <span class="keyword">template</span>&lt;&gt; <span class="keyword">struct</span> <span class="title class_">tuple_element</span>&lt;<span class="number">1</span>, Entry&gt; &#123; <span class="keyword">using</span> type = <span class="type">int</span>; &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Entry e;</span><br><span class="line">    e.<span class="built_in">Init</span>();</span><br><span class="line">    <span class="keyword">auto</span> [name, age] = e;</span><br><span class="line">    cout &lt;&lt; name &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; age &lt;&lt; endl; <span class="comment">// name 10</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910111213141516171819202122232425262728293031323334</span></span><br></pre></td></tr></table></figure>
<h3 id="if-switchè¯­å¥åˆå§‹åŒ–"><a class="header-anchor" href="#if-switchè¯­å¥åˆå§‹åŒ–">ğŸŒ³</a>if-switchè¯­å¥åˆå§‹åŒ–</h3>
<p>C++17å‰ifè¯­å¥éœ€è¦è¿™æ ·å†™ä»£ç ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a = <span class="built_in">GetValue</span>();</span><br><span class="line"><span class="keyword">if</span> (a &lt; <span class="number">101</span>) &#123;</span><br><span class="line">    cout &lt;&lt; a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>
<p>C++17ä¹‹åå¯ä»¥è¿™æ ·ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// if (init; condition)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="type">int</span> a = <span class="built_in">GetValue</span>()); a &lt; <span class="number">101</span>) &#123;</span><br><span class="line">    cout &lt;&lt; a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string str = <span class="string">&quot;Hi World&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">auto</span> [pos, size] = <span class="built_in">pair</span>(str.<span class="built_in">find</span>(<span class="string">&quot;Hi&quot;</span>), str.<span class="built_in">size</span>()); pos != string::npos) &#123;</span><br><span class="line">    std::cout &lt;&lt; pos &lt;&lt; <span class="string">&quot; Hello, size is &quot;</span> &lt;&lt; size;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨è¿™ç§æ–¹å¼å¯ä»¥å°½å¯èƒ½çº¦æŸä½œç”¨åŸŸï¼Œè®©ä»£ç æ›´ç®€æ´ï¼Œå¯è¯»æ€§å¯èƒ½ç•¥æœ‰ä¸‹é™ï¼Œä½†æ˜¯è¿˜å¥½</p>
<h3 id="å†…è”å˜é‡"><a class="header-anchor" href="#å†…è”å˜é‡">ğŸŒ³</a>å†…è”å˜é‡</h3>
<p>C++17å‰åªæœ‰å†…è”å‡½æ•°ï¼Œç°åœ¨æœ‰äº†å†…è”å˜é‡ï¼Œæˆ‘ä»¬å°è±¡ä¸­C++ç±»çš„é™æ€æˆå‘˜å˜é‡åœ¨å¤´æ–‡ä»¶ä¸­æ˜¯ä¸èƒ½åˆå§‹åŒ–çš„ï¼Œä½†æ˜¯æœ‰äº†å†…è”å˜é‡ï¼Œå°±å¯ä»¥è¾¾åˆ°æ­¤ç›®çš„ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// header file</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">int</span> value;  </span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">inline</span> <span class="type">int</span> <span class="type">const</span> A::value = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ==========æˆ–è€…========</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="keyword">inline</span> <span class="type">static</span> <span class="type">const</span> <span class="type">int</span> value = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure>
<h3 id="æŠ˜å è¡¨è¾¾å¼"><a class="header-anchor" href="#æŠ˜å è¡¨è¾¾å¼">ğŸŒ³</a>æŠ˜å è¡¨è¾¾å¼</h3>
<p>C++17å¼•å…¥äº†æŠ˜å è¡¨è¾¾å¼ä½¿å¯å˜å‚æ•°æ¨¡æ¿ç¼–ç¨‹æ›´æ–¹ä¾¿ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> ... Ts&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">sum</span><span class="params">(Ts ... ts)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (ts + ...);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> a &#123;<span class="built_in">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)&#125;; <span class="comment">// 15</span></span><br><span class="line">std::string a&#123;<span class="string">&quot;hello &quot;</span>&#125;;</span><br><span class="line">std::string b&#123;<span class="string">&quot;world&quot;</span>&#125;;</span><br><span class="line">cout &lt;&lt; <span class="built_in">sum</span>(a, b) &lt;&lt; endl; <span class="comment">// hello world</span></span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure>
<h3 id="constexpr-lambdaè¡¨è¾¾å¼"><a class="header-anchor" href="#constexpr-lambdaè¡¨è¾¾å¼">ğŸŒ³</a>constexpr lambdaè¡¨è¾¾å¼</h3>
<p>C++17å‰lambdaè¡¨è¾¾å¼åªèƒ½åœ¨è¿è¡Œæ—¶ä½¿ç”¨ï¼ŒC++17å¼•å…¥äº†constexpr lambdaè¡¨è¾¾å¼ï¼Œå¯ä»¥ç”¨äºåœ¨ç¼–è¯‘æœŸè¿›è¡Œè®¡ç®—ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123; <span class="comment">// c++17å¯ç¼–è¯‘</span></span><br><span class="line">    <span class="keyword">constexpr</span> <span class="keyword">auto</span> lamb = [] (<span class="type">int</span> n) &#123; <span class="keyword">return</span> n * n; &#125;;</span><br><span class="line">    <span class="built_in">static_assert</span>(<span class="built_in">lamb</span>(<span class="number">3</span>) == <span class="number">9</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šconstexprå‡½æ•°æœ‰å¦‚ä¸‹é™åˆ¶ï¼š</p>
<p>å‡½æ•°ä½“ä¸èƒ½åŒ…å«æ±‡ç¼–è¯­å¥ã€gotoè¯­å¥ã€labelã€tryå—ã€é™æ€å˜é‡ã€çº¿ç¨‹å±€éƒ¨å­˜å‚¨ã€æ²¡æœ‰åˆå§‹åŒ–çš„æ™®é€šå˜é‡ï¼Œä¸èƒ½åŠ¨æ€åˆ†é…å†…å­˜ï¼Œä¸èƒ½æœ‰new deleteç­‰ï¼Œä¸èƒ½è™šå‡½æ•°ã€‚</p>
<h3 id="namespaceåµŒå¥—"><a class="header-anchor" href="#namespaceåµŒå¥—">ğŸŒ³</a>namespaceåµŒå¥—</h3>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> A &#123;</span><br><span class="line">    <span class="keyword">namespace</span> B &#123;</span><br><span class="line">        <span class="keyword">namespace</span> C &#123;</span><br><span class="line">            <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// c++17ï¼Œæ›´æ–¹ä¾¿æ›´èˆ’é€‚</span></span><br><span class="line"><span class="keyword">namespace</span> A::B::C &#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span>;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112</span></span><br></pre></td></tr></table></figure>
<h3 id="has-includeé¢„å¤„ç†è¡¨è¾¾å¼"><a class="header-anchor" href="#has-includeé¢„å¤„ç†è¡¨è¾¾å¼">ğŸŒ³</a>__has_includeé¢„å¤„ç†è¡¨è¾¾å¼</h3>
<p>å¯ä»¥åˆ¤æ–­æ˜¯å¦æœ‰æŸä¸ªå¤´æ–‡ä»¶ï¼Œä»£ç å¯èƒ½ä¼šåœ¨ä¸åŒç¼–è¯‘å™¨ä¸‹å·¥ä½œï¼Œä¸åŒç¼–è¯‘å™¨çš„å¯ç”¨å¤´æ–‡ä»¶æœ‰å¯èƒ½ä¸åŒï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨æ­¤æ¥åˆ¤æ–­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">if</span> defined __has_include</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> __has_include(<span class="string">&lt;charconv&gt;</span>)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> has_charconv 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;charconv&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">std::optional&lt;<span class="type">int</span>&gt; <span class="title">ConvertToInt</span><span class="params">(<span class="type">const</span> std::string&amp; str)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> value&#123;&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> has_charconv</span></span><br><span class="line">    <span class="type">const</span> <span class="keyword">auto</span> last = str.<span class="built_in">data</span>() + str.<span class="built_in">size</span>();</span><br><span class="line">    <span class="type">const</span> <span class="keyword">auto</span> res = std::<span class="built_in">from_chars</span>(str.<span class="built_in">data</span>(), last, value);</span><br><span class="line">    <span class="keyword">if</span> (res.ec == std::errc&#123;&#125; &amp;&amp; res.ptr == last) <span class="keyword">return</span> value;</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">    <span class="comment">// alternative implementation...</span></span><br><span class="line">    å…¶å®ƒæ–¹å¼å®ç°</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">    <span class="keyword">return</span> std::<span class="literal">nullopt</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910111213141516171819</span></span><br></pre></td></tr></table></figure>
<h3 id="åœ¨lambdaè¡¨è¾¾å¼ç”¨-thisæ•è·å¯¹è±¡å‰¯æœ¬"><a class="header-anchor" href="#åœ¨lambdaè¡¨è¾¾å¼ç”¨-thisæ•è·å¯¹è±¡å‰¯æœ¬">ğŸŒ³</a>åœ¨lambdaè¡¨è¾¾å¼ç”¨*thisæ•è·å¯¹è±¡å‰¯æœ¬</h3>
<p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œlambdaè¡¨è¾¾å¼ä¸­è®¿é—®ç±»çš„å¯¹è±¡æˆå‘˜å˜é‡éœ€è¦æ•è·thisï¼Œä½†æ˜¯è¿™é‡Œæ•è·çš„æ˜¯thisæŒ‡é’ˆï¼ŒæŒ‡å‘çš„æ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼Œæ­£å¸¸æƒ…å†µä¸‹å¯èƒ½æ²¡é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœå¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œå‡½æ•°çš„ä½œç”¨åŸŸè¶…è¿‡äº†å¯¹è±¡çš„ä½œç”¨åŸŸï¼Œå¯¹è±¡å·²ç»è¢«ææ„äº†ï¼Œè¿˜è®¿é—®äº†æˆå‘˜å˜é‡ï¼Œå°±ä¼šæœ‰é—®é¢˜ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> f = [<span class="keyword">this</span>] &#123;</span><br><span class="line">            cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="built_in">f</span>();</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    A a;</span><br><span class="line">    a.<span class="built_in">func</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314</span></span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥C++17å¢åŠ äº†æ–°ç‰¹æ€§ï¼Œæ•è·*thisï¼Œä¸æŒæœ‰thisæŒ‡é’ˆï¼Œè€Œæ˜¯æŒæœ‰å¯¹è±¡çš„æ‹·è´ï¼Œè¿™æ ·ç”Ÿå‘½å‘¨æœŸå°±ä¸å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸ç›¸å…³å•¦ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> f = [*<span class="keyword">this</span>] &#123; <span class="comment">// è¿™é‡Œ</span></span><br><span class="line">            cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="built_in">f</span>();</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    A a;</span><br><span class="line">    a.<span class="built_in">func</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314</span></span><br></pre></td></tr></table></figure>
<h3 id="æ–°å¢attribute"><a class="header-anchor" href="#æ–°å¢attribute">ğŸŒ³</a>æ–°å¢Attribute</h3>
<p>æˆ‘ä»¬å¯èƒ½å¹³æ—¶åœ¨é¡¹ç›®ä¸­è§è¿‡__declspec, <strong>attribute</strong> , #pragmaæŒ‡ç¤ºç¬¦ï¼Œä½¿ç”¨å®ƒä»¬æ¥ç»™ç¼–è¯‘å™¨æä¾›ä¸€äº›é¢å¤–çš„ä¿¡æ¯ï¼Œæ¥äº§ç”Ÿä¸€äº›ä¼˜åŒ–æˆ–ç‰¹å®šçš„ä»£ç ï¼Œä¹Ÿå¯ä»¥ç»™å…¶å®ƒå¼€å‘è€…ä¸€äº›æç¤ºä¿¡æ¯ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span> &#123; <span class="type">short</span> f[<span class="number">3</span>]; &#125; __attribute__((<span class="built_in">aligned</span>(<span class="number">8</span>)));</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fatal</span><span class="params">()</span> __<span class="title">attribute__</span><span class="params">((noreturn))</span></span>;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<p>åœ¨C++11å’ŒC++14ä¸­æœ‰æ›´æ–¹ä¾¿çš„æ–¹æ³•ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">[[carries_dependency]] è®©ç¼–è¯‘æœŸè·³è¿‡ä¸å¿…è¦çš„å†…å­˜æ …æ æŒ‡ä»¤</span><br><span class="line">[[noreturn]] å‡½æ•°ä¸ä¼šè¿”å›</span><br><span class="line">[[deprecated]] å‡½æ•°å°†å¼ƒç”¨çš„è­¦å‘Š</span><br><span class="line"></span><br><span class="line">[[noreturn]] <span class="function"><span class="type">void</span> <span class="title">terminate</span><span class="params">()</span> <span class="keyword">noexcept</span></span>;</span><br><span class="line">[[<span class="built_in">deprecated</span>(<span class="string">&quot;use new func instead&quot;</span>)]] <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>
<p>C++17åˆæ–°å¢äº†ä¸‰ä¸ªï¼š</p>
<p>[[fallthrough]]ï¼Œç”¨åœ¨switchä¸­æç¤ºå¯ä»¥ç›´æ¥è½ä¸‹å»ï¼Œä¸éœ€è¦breakï¼Œè®©ç¼–è¯‘æœŸå¿½ç•¥è­¦å‘Š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> (i) &#123;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        xxx; <span class="comment">// warning</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        xxx; </span><br><span class="line">        [[fallthrough]];      <span class="comment">// è­¦å‘Šæ¶ˆé™¤</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">        xxx;</span><br><span class="line">       <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure>
<p>ä½¿å¾—ç¼–è¯‘å™¨å’Œå…¶å®ƒå¼€å‘è€…éƒ½å¯ä»¥ç†è§£å¼€å‘è€…çš„æ„å›¾ã€‚</p>
<p>[[nodiscard]] ï¼šè¡¨ç¤ºä¿®é¥°çš„å†…å®¹ä¸èƒ½è¢«å¿½ç•¥ï¼Œå¯ç”¨äºä¿®é¥°å‡½æ•°ï¼Œæ ‡æ˜è¿”å›å€¼ä¸€å®šè¦è¢«å¤„ç†</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">[[nodiscard]] <span class="type">int</span> <span class="title function_">func</span><span class="params">()</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">F</span><span class="params">()</span> &#123;</span><br><span class="line">    func(); <span class="comment">// warning æ²¡æœ‰å¤„ç†å‡½æ•°è¿”å›å€¼</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>
<p>[[maybe_unused]] ï¼šæç¤ºç¼–è¯‘å™¨ä¿®é¥°çš„å†…å®¹å¯èƒ½æš‚æ—¶æ²¡æœ‰ä½¿ç”¨ï¼Œé¿å…äº§ç”Ÿè­¦å‘Š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">func1</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">[[maybe_unused]] <span class="type">void</span> <span class="title function_">func2</span><span class="params">()</span> &#123;&#125; <span class="comment">// è­¦å‘Šæ¶ˆé™¤</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">func3</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> x = <span class="number">1</span>;</span><br><span class="line">    [[maybe_unused]] <span class="type">int</span> y = <span class="number">2</span>; <span class="comment">// è­¦å‘Šæ¶ˆé™¤</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>
<h3 id="å­—ç¬¦ä¸²è½¬æ¢"><a class="header-anchor" href="#å­—ç¬¦ä¸²è½¬æ¢">ğŸŒ³</a>å­—ç¬¦ä¸²è½¬æ¢</h3>
<p>æ–°å¢from_charså‡½æ•°å’Œto_charså‡½æ•°ï¼Œç›´æ¥çœ‹ä»£ç ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;charconv&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">const</span> std::string str&#123;<span class="string">&quot;123456098&quot;</span>&#125;;</span><br><span class="line">    <span class="type">int</span> value = <span class="number">0</span>;</span><br><span class="line">    <span class="type">const</span> <span class="keyword">auto</span> res = std::<span class="built_in">from_chars</span>(str.<span class="built_in">data</span>(), str.<span class="built_in">data</span>() + <span class="number">4</span>, value);</span><br><span class="line">    <span class="keyword">if</span> (res.ec == std::<span class="built_in">errc</span>()) &#123;</span><br><span class="line">        cout &lt;&lt; value &lt;&lt; <span class="string">&quot;, distance &quot;</span> &lt;&lt; res.ptr - str.<span class="built_in">data</span>() &lt;&lt; endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (res.ec == std::errc::invalid_argument) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;invalid&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    str = std::<span class="built_in">string</span>(<span class="string">&quot;12.34);</span></span><br><span class="line"><span class="string">    double val = 0;</span></span><br><span class="line"><span class="string">    const auto format = std::chars_format::general;</span></span><br><span class="line"><span class="string">    res = std::from_chars(str.data(), str.data() + str.size(), value, format);</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    str = std::string(&quot;</span>xxxxxxxx<span class="string">&quot;);</span></span><br><span class="line"><span class="string">    const int v = 1234;</span></span><br><span class="line"><span class="string">    res = std::to_chars(str.data(), str.data() + str.size(), v);</span></span><br><span class="line"><span class="string">    cout &lt;&lt; str &lt;&lt; &quot;</span>, filled <span class="string">&quot; &lt;&lt; res.ptr - str.data() &lt;&lt; &quot;</span> characters \n<span class="string">&quot;;</span></span><br><span class="line"><span class="string">    // 1234xxxx, filled 4 characters</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">12345678910111213141516171819202122</span></span><br></pre></td></tr></table></figure>
<h3 id="std-variant"><a class="header-anchor" href="#std-variant">ğŸŒ³</a>std::variant</h3>
<p>C++17å¢åŠ std::variantå®ç°ç±»ä¼¼unionçš„åŠŸèƒ½ï¼Œä½†å´æ¯”unionæ›´é«˜çº§ï¼Œä¸¾ä¸ªä¾‹å­unioné‡Œé¢ä¸èƒ½æœ‰stringè¿™ç§ç±»å‹ï¼Œä½†std::variantå´å¯ä»¥ï¼Œè¿˜å¯ä»¥æ”¯æŒæ›´å¤šå¤æ‚ç±»å‹ï¼Œå¦‚mapç­‰ï¼Œçœ‹ä»£ç ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123; <span class="comment">// c++17å¯ç¼–è¯‘</span></span><br><span class="line">    <span class="function">std::variant&lt;<span class="type">int</span>, std::string&gt; <span class="title">var</span><span class="params">(<span class="string">&quot;hello&quot;</span>)</span></span>;</span><br><span class="line">    cout &lt;&lt; var.<span class="built_in">index</span>() &lt;&lt; endl;</span><br><span class="line">    var = <span class="number">123</span>;</span><br><span class="line">    cout &lt;&lt; var.<span class="built_in">index</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        var = <span class="string">&quot;world&quot;</span>;</span><br><span class="line">        std::string str = std::<span class="built_in">get</span>&lt;std::string&gt;(var); <span class="comment">// é€šè¿‡ç±»å‹è·å–å€¼</span></span><br><span class="line">        var = <span class="number">3</span>;</span><br><span class="line">        <span class="type">int</span> i = std::<span class="built_in">get</span>&lt;<span class="number">0</span>&gt;(var); <span class="comment">// é€šè¿‡indexè·å–å¯¹åº”å€¼</span></span><br><span class="line">        cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">    &#125; <span class="built_in">catch</span>(...) &#123;</span><br><span class="line">        <span class="comment">// xxx;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112131415161718</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šä¸€èˆ¬æƒ…å†µä¸‹variantçš„ç¬¬ä¸€ä¸ªç±»å‹ä¸€èˆ¬è¦æœ‰å¯¹åº”çš„æ„é€ å‡½æ•°ï¼Œå¦åˆ™ç¼–è¯‘å¤±è´¥ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">A</span> &#123;</span></span><br><span class="line">    A(<span class="type">int</span> i)&#123;&#125;  </span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">std</span>::variant&lt;A, <span class="type">int</span>&gt; var; <span class="comment">// ç¼–è¯‘å¤±è´¥</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>
<p>å¦‚ä½•é¿å…è¿™ç§æƒ…å†µå‘¢ï¼Œå¯ä»¥ä½¿ç”¨std::monostateæ¥æ‰“ä¸ªæ¡©ï¼Œæ¨¡æ‹Ÿä¸€ä¸ªç©ºçŠ¶æ€ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="built_in">std</span>::variant&lt;<span class="built_in">std</span>::monostate, A&gt; var; <span class="comment">// å¯ä»¥ç¼–è¯‘æˆåŠŸ</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<h2 id="std-optional"><a class="header-anchor" href="#std-optional">ğŸŒ³</a>std::optional</h2>
<p>æˆ‘ä»¬æœ‰æ—¶å€™å¯èƒ½ä¼šæœ‰éœ€æ±‚ï¼Œè®©å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span> &#123;&#125;;</span><br><span class="line"><span class="function">A <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (flag) <span class="keyword">return</span> <span class="built_in">A</span>();</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å¼‚å¸¸æƒ…å†µä¸‹ï¼Œæ€ä¹ˆè¿”å›å¼‚å¸¸å€¼å‘¢ï¼Œæƒ³è¿”å›ä¸ªç©ºå‘¢</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure>
<p>æœ‰ä¸€ç§åŠæ³•æ˜¯è¿”å›å¯¹è±¡æŒ‡é’ˆï¼Œå¼‚å¸¸æƒ…å†µä¸‹å°±å¯ä»¥è¿”å›nullptrå•¦ï¼Œä½†æ˜¯è¿™å°±æ¶‰åŠåˆ°äº†å†…å­˜ç®¡ç†ï¼Œä¹Ÿè®¸ä½ ä¼šä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œä½†è¿™é‡Œå…¶å®æœ‰æ›´æ–¹ä¾¿çš„åŠæ³•å°±æ˜¯std::optionalã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">std::optional&lt;<span class="type">int</span>&gt; <span class="title">StoI</span><span class="params">(<span class="type">const</span> std::string &amp;s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> std::<span class="built_in">stoi</span>(s);</span><br><span class="line">    &#125; <span class="built_in">catch</span>(...) &#123;</span><br><span class="line">        <span class="keyword">return</span> std::<span class="literal">nullopt</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string s&#123;<span class="string">&quot;123&quot;</span>&#125;;</span><br><span class="line">    std::optional&lt;<span class="type">int</span>&gt; o = <span class="built_in">StoI</span>(s);</span><br><span class="line">    <span class="keyword">if</span> (o) &#123;</span><br><span class="line">        cout &lt;&lt; *o &lt;&lt; endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;error&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314151617</span></span><br></pre></td></tr></table></figure>
<h3 id="std-any"><a class="header-anchor" href="#std-any">ğŸŒ³</a>std::any</h3>
<p>C++17å¼•å…¥äº†anyå¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„å•ä¸ªå€¼ï¼Œè§ä»£ç ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123; <span class="comment">// c++17å¯ç¼–è¯‘</span></span><br><span class="line">    std::any a = <span class="number">1</span>;</span><br><span class="line">    cout &lt;&lt; a.<span class="built_in">type</span>().<span class="built_in">name</span>() &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; std::<span class="built_in">any_cast</span>&lt;<span class="type">int</span>&gt;(a) &lt;&lt; endl;</span><br><span class="line">    a = <span class="number">2.2f</span>;</span><br><span class="line">    cout &lt;&lt; a.<span class="built_in">type</span>().<span class="built_in">name</span>() &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; std::<span class="built_in">any_cast</span>&lt;<span class="type">float</span>&gt;(a) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">if</span> (a.<span class="built_in">has_value</span>()) &#123;</span><br><span class="line">        cout &lt;&lt; a.<span class="built_in">type</span>().<span class="built_in">name</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    a.<span class="built_in">reset</span>();</span><br><span class="line">    <span class="keyword">if</span> (a.<span class="built_in">has_value</span>()) &#123;</span><br><span class="line">        cout &lt;&lt; a.<span class="built_in">type</span>().<span class="built_in">name</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    a = std::<span class="built_in">string</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">    cout &lt;&lt; a.<span class="built_in">type</span>().<span class="built_in">name</span>() &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; std::<span class="built_in">any_cast</span>&lt;std::string&gt;(a) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910111213141516</span></span><br></pre></td></tr></table></figure>
<h3 id="std-apply"><a class="header-anchor" href="#std-apply">ğŸŒ³</a>std::apply</h3>
<p>ä½¿ç”¨std::applyå¯ä»¥å°†tupleå±•å¼€ä½œä¸ºå‡½æ•°çš„å‚æ•°ä¼ å…¥ï¼Œè§ä»£ç ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> first, <span class="type">int</span> second)</span> </span>&#123; <span class="keyword">return</span> first + second; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> add_lambda = [](<span class="keyword">auto</span> first, <span class="keyword">auto</span> second) &#123; <span class="keyword">return</span> first + second; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; std::<span class="built_in">apply</span>(add, std::<span class="built_in">pair</span>(<span class="number">1</span>, <span class="number">2</span>)) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">add</span>(std::<span class="built_in">pair</span>(<span class="number">1</span>, <span class="number">2</span>)) &lt;&lt; <span class="string">&quot;\n&quot;</span>; <span class="comment">// error</span></span><br><span class="line">    std::cout &lt;&lt; std::<span class="built_in">apply</span>(add_lambda, std::<span class="built_in">tuple</span>(<span class="number">2.0f</span>, <span class="number">3.0f</span>)) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure>
<h3 id="std-make-from-tuple"><a class="header-anchor" href="#std-make-from-tuple">ğŸŒ³</a>std::make_from_tuple</h3>
<p>ä½¿ç”¨make_from_tupleå¯ä»¥å°†tupleå±•å¼€ä½œä¸ºæ„é€ å‡½æ•°å‚æ•°</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">    <span class="built_in">Foo</span>(<span class="type">int</span> first, <span class="type">float</span> second, <span class="type">int</span> third) &#123;</span><br><span class="line">        std::cout &lt;&lt; first &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; second &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; third &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">auto</span> tuple = std::<span class="built_in">make_tuple</span>(<span class="number">42</span>, <span class="number">3.14f</span>, <span class="number">0</span>);</span><br><span class="line">   std::<span class="built_in">make_from_tuple</span>&lt;Foo&gt;(std::<span class="built_in">move</span>(tuple));</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure>
<h3 id="std-string-view"><a class="header-anchor" href="#std-string-view">ğŸŒ³</a>std::string_view</h3>
<p>é€šå¸¸æˆ‘ä»¬ä¼ é€’ä¸€ä¸ªstringæ—¶ä¼šè§¦å‘å¯¹è±¡çš„æ‹·è´æ“ä½œï¼Œå¤§å­—ç¬¦ä¸²çš„æ‹·è´èµ‹å€¼æ“ä½œä¼šè§¦å‘å †å†…å­˜åˆ†é…ï¼Œå¾ˆå½±å“è¿è¡Œæ•ˆç‡ï¼Œæœ‰äº†string_viewå°±å¯ä»¥é¿å…æ‹·è´æ“ä½œï¼Œå¹³æ—¶ä¼ é€’è¿‡ç¨‹ä¸­ä¼ é€’string_viewå³å¯ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(std::string_view stv)</span> </span>&#123; cout &lt;&lt; stv &lt;&lt; endl; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span> </span>&#123;</span><br><span class="line">    std::string str = <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">    std::cout &lt;&lt; str &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="function">std::string_view <span class="title">stv</span><span class="params">(str.c_str(), str.size())</span></span>;</span><br><span class="line">    cout &lt;&lt; stv &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">func</span>(stv);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011</span></span><br></pre></td></tr></table></figure>
<h3 id="as-const"><a class="header-anchor" href="#as-const">ğŸŒ³</a>as_const</h3>
<p>C++17ä½¿ç”¨as_constå¯ä»¥å°†å·¦å€¼è½¬æˆconstç±»å‹</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">std::string str = <span class="string">&quot;str&quot;</span>;</span><br><span class="line"><span class="type">const</span> std::string&amp; constStr = std::<span class="built_in">as_const</span>(str);</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>
<h3 id="file-system"><a class="header-anchor" href="#file-system">ğŸŒ³</a>file_system</h3>
<p>C++17æ­£å¼å°†file_systemçº³å…¥æ ‡å‡†ä¸­ï¼Œæä¾›äº†å…³äºæ–‡ä»¶çš„å¤§å¤šæ•°åŠŸèƒ½ï¼ŒåŸºæœ¬ä¸Šåº”æœ‰å°½æœ‰ï¼Œè¿™é‡Œç®€å•ä¸¾å‡ ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> fs = std::filesystem;</span><br><span class="line">fs::<span class="built_in">create_directory</span>(dir_path);</span><br><span class="line">fs::<span class="built_in">copy_file</span>(src, dst, fs::copy_options::skip_existing);</span><br><span class="line">fs::<span class="built_in">exists</span>(filename);</span><br><span class="line">fs::<span class="built_in">current_path</span>(err_code);</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>
<h3 id="std-shared-mutex"><a class="header-anchor" href="#std-shared-mutex">ğŸŒ³</a>std::shared_mutex</h3>
<p>C++17å¼•å…¥äº†shared_mutexï¼Œå¯ä»¥å®ç°è¯»å†™é”</p>
<h2 id="c-20-æ–°å¢ç‰¹æ€§æ€»ç»“"><a class="header-anchor" href="#c-20-æ–°å¢ç‰¹æ€§æ€»ç»“">ğŸŒ³</a>C++20 æ–°å¢ç‰¹æ€§æ€»ç»“</h2>
<ul>
<li>
<p><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E6%96%B0%E5%A2%9E%E5%85%B3%E9%94%AE%E5%AD%97keywords">æ–°å¢å…³é”®å­—(keywords)</a></p>
</li>
<li>
<p><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E6%96%B0%E5%A2%9E%E6%A0%87%E8%AF%86%E7%AC%A6identifies">æ–°å¢æ ‡è¯†ç¬¦(Identifies)</a></p>
</li>
<li>
<p><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E6%A8%A1%E5%9D%97modules">æ¨¡å—(Modules)</a></p>
</li>
<li>
<ul>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E4%BC%98%E7%82%B9">ä¼˜ç‚¹</a></li>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%9D%97">åˆ›å»ºæ¨¡å—</a></li>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E5%BC%95%E7%94%A8%E6%A8%A1%E5%9D%97">å¼•ç”¨æ¨¡å—</a></li>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23import-%E5%A4%B4%E6%96%87%E4%BB%B6">import å¤´æ–‡ä»¶</a></li>
</ul>
</li>
<li>
<p><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23ranges">Ranges</a></p>
</li>
<li>
<ul>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E4%BE%8B%E5%AD%90">ä¾‹å­</a></li>
</ul>
</li>
<li>
<p><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E5%8D%8F%E7%A8%8Bcoroutines">åç¨‹(Coroutines)</a></p>
</li>
<li>
<ul>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E4%BB%80%E4%B9%88%E6%98%AF%E5%8D%8F%E7%A8%8B">ä»€ä¹ˆæ˜¯åç¨‹</a></li>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E4%BE%8B%E5%AD%90vc">ä¾‹å­(VC++)</a></li>
</ul>
</li>
<li>
<p><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23concepts">Concepts</a></p>
</li>
<li>
<ul>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E5%A6%82%E4%BD%95%E5%AE%9A%E4%B9%89">å¦‚ä½•å®šä¹‰</a></li>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E4%BD%BF%E7%94%A8">ä½¿ç”¨</a></li>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E4%BE%8B%E5%AD%90-1">ä¾‹å­</a></li>
</ul>
</li>
<li>
<p><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23lambda-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E6%9B%B4%E6%96%B0">Lambda è¡¨è¾¾å¼çš„æ›´æ–°</a></p>
</li>
<li>
<ul>
<li>[<a href="https://link.zhihu.com/?target=http%3A//%3Ccode%3Ejimm%3C/code%3Eysue.me/c-20-features/%23-this-%E9%9C%80%E8%A6%81%E6%98%BE%E5%BC%8F%E6%8D%95%E8%8E%B7this%E5%8F%98%E9%87%8F">=, this] éœ€è¦æ˜¾å¼æ•è·thiså˜é‡</a></li>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E6%A8%A1%E6%9D%BF%E5%BD%A2%E5%BC%8F%E7%9A%84-lambda-%E8%A1%A8%E8%BE%BE%E5%BC%8F">æ¨¡æ¿å½¢å¼çš„ Lambda è¡¨è¾¾å¼</a></li>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23lambda-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%89%93%E5%8C%85%E6%8D%95%E8%8E%B7pack-expansion">Lambda è¡¨è¾¾å¼æ‰“åŒ…æ•è·(Pack Expansion)</a></li>
</ul>
</li>
<li>
<p>å¸¸é‡è¡¨è¾¾å¼(constexpr) çš„æ›´æ–°</p>
</li>
<li>
<ul>
<li><code>constexpr string &amp; vector</code></li>
</ul>
</li>
<li>
<p><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E5%8E%9F%E5%AD%90atomic%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88">åŸå­(Atomic)æ™ºèƒ½æŒ‡é’ˆ</a></p>
</li>
<li>
<ul>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E4%BE%8B%E5%AD%90-2">ä¾‹å­</a></li>
</ul>
</li>
<li>
<p><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E8%87%AA%E5%8A%A8%E5%90%88%E6%B5%81joining-%E5%8F%AF%E4%B8%AD%E6%96%ADcancellable-%E7%9A%84%E7%BA%BF%E7%A8%8B">è‡ªåŠ¨åˆæµ(Joining), å¯ä¸­æ–­(Cancellable) çš„çº¿ç¨‹</a></p>
</li>
<li>
<ul>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E4%BE%8B%E5%AD%90-3">ä¾‹å­</a></li>
</ul>
</li>
<li>
<p><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23c20-%E5%90%8C%E6%AD%A5synchronization%E5%BA%93">C++20 åŒæ­¥(Synchronization)åº“</a></p>
</li>
<li>
<ul>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23stdatomic_ref">std::atomic_ref</a></li>
</ul>
</li>
<li>
<p><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E5%85%B6%E4%BB%96%E6%9B%B4%E6%96%B0">å…¶ä»–æ›´æ–°</a></p>
</li>
<li>
<ul>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E6%8C%87%E5%AE%9A%E5%88%9D%E5%A7%8B%E5%8C%96designated-initializers">æŒ‡å®šåˆå§‹åŒ–(Designated Initializers)</a></li>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E8%88%AA%E5%A4%A9%E9%A3%9E%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%AC%A6-">èˆªå¤©é£æœºæ“ä½œç¬¦ &lt;=&gt;</a></li>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E8%8C%83%E5%9B%B4-for-%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5%E6%94%AF%E6%8C%81%E5%88%9D%E5%A7%8B%E5%8C%96">èŒƒå›´ for å¾ªç¯è¯­å¥æ”¯æŒåˆå§‹åŒ–</a></li>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E9%9D%9E%E7%B1%BB%E5%9E%8B%E6%A8%A1%E6%9D%BF%E5%BD%A2%E5%8F%82%E6%94%AF%E6%8C%81%E5%AD%97%E7%AC%A6%E4%B8%B2">éç±»å‹æ¨¡æ¿å½¢å‚æ”¯æŒå­—ç¬¦ä¸²</a></li>
<li>[<a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23likely-unlikely">[likely]], [[unlikely]]</a></li>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E6%97%A5%E5%8E%86calendar%E5%92%8C%E6%97%B6%E5%8C%BAtimezone%E5%8A%9F%E8%83%BD">æ—¥å†(Calendar)å’Œæ—¶åŒº(Timezone)åŠŸèƒ½</a></li>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23stdspan">std::span</a></li>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E7%89%B9%E6%80%A7%E6%B5%8B%E8%AF%95%E5%AE%8F">ç‰¹æ€§æµ‹è¯•å®</a></li>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23version"></a></li>
<li><code>consteval å‡½æ•°</code></li>
<li><code>constinit</code></li>
<li>ç”¨ using å¼•ç”¨ enum ç±»å‹</li>
<li>æ ¼å¼åŒ–åº“(std::format)</li>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E5%A2%9E%E5%8A%A0%E6%95%B0%E5%AD%A6%E5%B8%B8%E9%87%8F">å¢åŠ æ•°å­¦å¸¸é‡</a></li>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23stdsource_location">std::source_location</a></li>
<li>[<a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23nodiscardreason">[nodiscard(reason)]]</a></li>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E4%BD%8D%E8%BF%90%E7%AE%97">ä½è¿ç®—</a></li>
<li><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%9B%B4%E6%96%B0">ä¸€äº›å°æ›´æ–°</a></li>
</ul>
</li>
<li>
<p><a href="https://link.zhihu.com/?target=http%3A//jimmysue.me/c-20-features/%23%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">å‚è€ƒèµ„æ–™</a></p>
</li>
</ul>
<hr>
<h3 id="æ–°å¢å…³é”®å­—-keywords"><a class="header-anchor" href="#æ–°å¢å…³é”®å­—-keywords">ğŸŒ³</a>æ–°å¢å…³é”®å­—(keywords)</h3>
<ul>
<li>concept</li>
<li>requires</li>
<li>constinit</li>
<li>consteval</li>
<li>co_await</li>
<li>co_return</li>
<li>co_yield</li>
<li>char8_t</li>
</ul>
<h3 id="æ–°å¢æ ‡è¯†ç¬¦-identifies"><a class="header-anchor" href="#æ–°å¢æ ‡è¯†ç¬¦-identifies">ğŸŒ³</a>æ–°å¢æ ‡è¯†ç¬¦(Identifies)</h3>
<ul>
<li>import</li>
<li>module</li>
</ul>
<h3 id="æ¨¡å—-modules"><a class="header-anchor" href="#æ¨¡å—-modules">ğŸŒ³</a>æ¨¡å—(Modules)</h3>
<h4 id="ä¼˜ç‚¹"><a class="header-anchor" href="#ä¼˜ç‚¹">ğŸŒ³</a>ä¼˜ç‚¹</h4>
<ul>
<li>æ²¡æœ‰å¤´æ–‡ä»¶</li>
<li>å£°æ˜å®ç°ä»ç„¶å¯åˆ†ç¦», ä½†éå¿…è¦</li>
<li>å¯ä»¥<strong>æ˜¾å¼</strong>æŒ‡å®šé‚£äº›å¯¼å‡º(ç±», å‡½æ•°ç­‰)</li>
<li>ä¸éœ€è¦å¤´æ–‡ä»¶é‡å¤å¼•å…¥å® (include guards)</li>
<li>æ¨¡å—ä¹‹é—´åç§°å¯ä»¥ç›¸åŒä¸ä¼šå†²çª</li>
<li>æ¨¡å—åªå¤„ç†ä¸€æ¬¡, ç¼–è¯‘æ›´å¿« (<em>å¤´æ–‡ä»¶æ¯æ¬¡å¼•å…¥éƒ½éœ€è¦å¤„ç†</em>)</li>
<li>é¢„å¤„ç†å®åªåœ¨æ¨¡å—å†…æœ‰æ•ˆ</li>
<li>æ¨¡å—å¼•å…¥é¡ºåºæ— å…³ç´§è¦</li>
</ul>
<h4 id="åˆ›å»ºæ¨¡å—"><a class="header-anchor" href="#åˆ›å»ºæ¨¡å—">ğŸŒ³</a>åˆ›å»ºæ¨¡å—</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// cppcon.cpp </span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">module</span> cppcon; </span><br><span class="line"><span class="keyword">namespace</span> CppCon &#123; </span><br><span class="line">    <span class="function"><span class="keyword">auto</span> <span class="title">GetWelcomeHelper</span><span class="params">()</span> </span>&#123;  <span class="keyword">return</span> <span class="string">&quot;Welcome to CppCon 2019!&quot;</span>;  &#125; </span><br><span class="line">    <span class="function"><span class="keyword">export</span> <span class="keyword">auto</span> <span class="title">GetWelcome</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">GetWelcomeHelper</span>();&#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>
<h4 id="å¼•ç”¨æ¨¡å—"><a class="header-anchor" href="#å¼•ç”¨æ¨¡å—">ğŸŒ³</a>å¼•ç”¨æ¨¡å—</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.cpp </span></span><br><span class="line"><span class="keyword">import</span> cppcon; </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123; </span><br><span class="line">    std::cout &lt;&lt; CppCon::<span class="built_in">GetWelcome</span>(); </span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>
<h4 id="import-å¤´æ–‡ä»¶"><a class="header-anchor" href="#import-å¤´æ–‡ä»¶">ğŸŒ³</a>import å¤´æ–‡ä»¶</h4>
<ul>
<li>import</li>
<li>éšå¼åœ°å°† <code>iostream</code> è½¬æ¢ä¸ºæ¨¡å—</li>
<li>åŠ é€Ÿæ„å»º, å› ä¸º iostream åªä¼šå¤„ç†ä¸€æ¬¡</li>
<li>å’Œé¢„ç¼–è¯‘å¤´ (PCH) å…·æœ‰ç›¸ä¼¼çš„æ•ˆæœ</li>
</ul>
<h3 id="ranges"><a class="header-anchor" href="#ranges">ğŸŒ³</a>Ranges</h3>
<p><strong>Ranges</strong> æ˜¯ä»€ä¹ˆ ?</p>
<ul>
<li><code>Range</code> ä»£è¡¨ä¸€ä¸²å…ƒç´ , æˆ–è€…ä¸€ä¸²å…ƒç´ ä¸­çš„ä¸€æ®µ</li>
<li>ç±»ä¼¼ begin/end å¯¹</li>
</ul>
<p><strong>å¥½å¤„</strong>:</p>
<ul>
<li>ç®€åŒ–è¯­æ³•å’Œæ–¹ä¾¿ä½¿ç”¨</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">vector&lt;<span class="type">int</span>&gt; data&#123;<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>&#125;; </span><br><span class="line"><span class="built_in">sort</span>(<span class="built_in">begin</span>(data), <span class="built_in">end</span>(data)); </span><br><span class="line"><span class="built_in">sort</span>(data); <span class="comment">// ä½¿ç”¨ Ranges</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<ul>
<li>é˜²æ­¢ begin/end ä¸é…å¯¹</li>
<li>ä½¿å˜æ¢/è¿‡æ»¤ç­‰ä¸²è”æ“ä½œæˆä¸ºå¯èƒ½</li>
</ul>
<p><strong>ç›¸å…³åŠŸèƒ½</strong></p>
<ul>
<li><strong>è§†å›¾</strong>(View): å»¶è¿Ÿè®¡ç®—, ä¸æŒæœ‰, ä¸æ”¹å†™</li>
<li><strong>Actions</strong>: å³æ—¶å¤„ç†(eagerly evaluated), æ”¹å†™</li>
<li><strong>Algorithms</strong>: æ‰€æœ‰æ¥å— begin/end å¯¹çš„ç®—æ³•éƒ½å¯ç”¨</li>
<li>Views å’Œ actions ä½¿ç”¨ç®¡é“ç¬¦<code>|</code>ä¸²è”</li>
</ul>
<h4 id="ä¾‹å­"><a class="header-anchor" href="#ä¾‹å­">ğŸŒ³</a>ä¾‹å­</h4>
<ul>
<li>ä¸²è”è§†å›¾</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">vector&lt;<span class="type">int</span>&gt; data &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>&#125;; </span><br><span class="line"><span class="keyword">auto</span> result = data | </span><br><span class="line">              views::<span class="built_in">remove_if</span>([](<span class="type">int</span> i) &#123; <span class="keyword">return</span> i % <span class="number">2</span> == <span class="number">1</span>;&#125;) | </span><br><span class="line">              views::<span class="built_in">transform</span>([](<span class="type">int</span> i) &#123; <span class="keyword">return</span> <span class="built_in">to_string</span>(i);&#125;); </span><br><span class="line"><span class="comment">// result = &#123;&quot;2&quot;, &quot;4&quot;, &quot;6&quot;, &quot;8&quot;, &quot;10&quot; &#125;;</span></span><br><span class="line"><span class="comment">// æ³¨æ„ ä»¥ä¸Šæ“ä½œè¢«å»¶è¿Ÿ, å½“ä½ éå†resultçš„æ—¶å€™æ‰è§¦å‘</span></span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸²è”actions</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">vector&lt;<span class="type">int</span>&gt; data&#123;<span class="number">4</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">0</span>, <span class="number">8</span>&#125;; </span><br><span class="line">vector&lt;<span class="type">int</span>&gt; result = data | actions::sort | actions::unique;</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<ul>
<li>æ’åºç„¶åå»é‡</li>
<li>æ“ä½œä¼šåŸåœ°å¯¹<code>data</code>è¿›è¡Œæ›´æ”¹, ç„¶åè¿”å›</li>
</ul>
</li>
<li>è¿‡æ»¤å’Œå˜æ¢</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> total = <span class="built_in">accumulate</span> (</span><br><span class="line">                        view::<span class="built_in">ints</span>(<span class="number">1</span>) | </span><br><span class="line">                        view::<span class="built_in">transform</span>([](<span class="type">int</span> i) &#123;<span class="keyword">return</span> i * i;&#125;) | </span><br><span class="line">                        view::<span class="built_in">take</span>(<span class="number">10</span>), </span><br><span class="line">                        <span class="number">0</span>);</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<ul>
<li><code>view::ints(1)</code> äº§ç”Ÿä¸€ä¸ªæ— é™çš„æ•´å‹æ•°åˆ—</li>
<li>å¹³æ–¹</li>
<li>å–å‰10ä¸ªå…ƒç´ , ç„¶åç´¯åŠ (accumulate)<br>
<strong>æ‰€æœ‰çš„è®¡ç®—å»¶è¿Ÿåˆ°<code>accumulate</code>ç´¯åŠ éå†çš„æ—¶å€™å‘ç”Ÿ</strong></li>
</ul>
</li>
</ul>
<h3 id="åç¨‹-coroutines"><a class="header-anchor" href="#åç¨‹-coroutines">ğŸŒ³</a>åç¨‹(Coroutines)</h3>
<h4 id="ä»€ä¹ˆæ˜¯åç¨‹"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯åç¨‹">ğŸŒ³</a>ä»€ä¹ˆæ˜¯åç¨‹</h4>
<ul>
<li>
<p>å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°</p>
</li>
<li>
<p>å…·å¤‡å¦‚ä¸‹å…³é”®å­—ä¹‹ä¸€:</p>
</li>
<li>
<ul>
<li><code>co_wait</code>: æŒ‚èµ·åç¨‹, ç­‰å¾…å…¶å®ƒè®¡ç®—å®Œæˆ</li>
<li><code>co_return</code>: ä»åç¨‹è¿”å› (åç¨‹ <code>return</code> ç¦æ­¢ä½¿ç”¨)</li>
<li><code>co_yield</code>: åŒ python yield, å¼¹å‡ºä¸€ä¸ªå€¼, æŒ‚èµ·åç¨‹, ä¸‹ä¸€æ¬¡è°ƒç”¨ç»§ç»­åç¨‹çš„è¿è¡Œ</li>
<li><code>for co_await</code> å¾ªç¯ä½“</li>
</ul>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">for</span> <span class="title">co_await</span> <span class="params">(<span class="keyword">for</span>-range-declaration: expression)</span> statement</span></span><br><span class="line"><span class="function">1</span></span><br></pre></td></tr></table></figure>
<p><strong>ç”¨å¤„</strong></p>
<ul>
<li>
<p>ç®€åŒ–å¦‚ä¸‹é—®é¢˜çš„å®ç°:</p>
</li>
<li>
<ul>
<li>generator</li>
<li>å¼‚æ­¥I/O</li>
<li>å»¶è¿Ÿè®¡ç®—</li>
<li>äº‹ä»¶é©±åŠ¨çš„ç¨‹åº</li>
</ul>
</li>
</ul>
<h4 id="ä¾‹å­-vc"><a class="header-anchor" href="#ä¾‹å­-vc">ğŸŒ³</a>ä¾‹å­(VC++)</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">experimental::generator&lt;<span class="type">int</span>&gt; <span class="title">GetSequenceGenerator</span><span class="params">( </span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">int</span> startValue, </span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">size_t</span> numberOfValues)</span> </span>&#123; </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span> startValue; i &lt; startValue + numberOfValues; ++i)&#123; </span><br><span class="line">        <span class="type">time_t</span> t = system_clock::<span class="built_in">to_time_t</span>(system_clock::<span class="built_in">now</span>()); </span><br><span class="line">        cout &lt;&lt; std:: <span class="built_in">ctime</span>(&amp;t); <span class="keyword">co_yield</span> i; </span><br><span class="line">    &#125; </span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> gen = <span class="built_in">GetSequenceGenerator</span>(<span class="number">10</span>, <span class="number">5</span>); </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; value : gen) &#123; </span><br><span class="line">        cout &lt;&lt; value &lt;&lt; <span class="string">&quot;(Press enter for next value)&quot;</span> &lt;&lt; endl; </span><br><span class="line">        cin.<span class="built_in">ignore</span>(); </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112131415</span></span><br></pre></td></tr></table></figure>
<h3 id="concepts"><a class="header-anchor" href="#concepts">ğŸŒ³</a>Concepts</h3>
<ul>
<li>å¯¹æ¨¡æ¿ç±»å’Œå‡½æ•°çš„æ¨¡æ¿å½¢å‚çš„çº¦æŸ</li>
<li>ç¼–è¯‘æœŸæ–­è¨€</li>
<li>å¯å£°æ˜å¤šä¸ª</li>
</ul>
<h4 id="å¦‚ä½•å®šä¹‰"><a class="header-anchor" href="#å¦‚ä½•å®šä¹‰">ğŸŒ³</a>å¦‚ä½•å®šä¹‰</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">concept</span> Incrementable = <span class="built_in">requires</span>(T x) &#123;x++; ++x;&#125;;</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<h4 id="ä½¿ç”¨"><a class="header-anchor" href="#ä½¿ç”¨">ğŸŒ³</a>ä½¿ç”¨</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;Incrementable T&gt; </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Foo</span><span class="params">(T t)</span></span>; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">requires</span> Incrementable&lt;T&gt; </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Foo</span><span class="params">(T t)</span></span>; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Foo</span><span class="params">(T t)</span> <span class="keyword">requires</span> Incrementable&lt;T&gt;</span>; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Foo</span><span class="params">(Incrementable <span class="keyword">auto</span> t)</span></span>;</span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure>
<h4 id="ä¾‹å­"><a class="header-anchor" href="#ä¾‹å­">ğŸŒ³</a>ä¾‹å­</h4>
<ul>
<li>å…·å¤‡<code>size()</code> æ–¹æ³•, ä¸”è¿”å›<code>size_t</code></li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">concept</span> HasSize = <span class="built_in">requires</span> (T x)&#123; </span><br><span class="line">    &#123;x.<span class="built_in">size</span>()&#125; -&gt; std::convertible_to&lt;std::<span class="type">size_t</span>&gt;; </span><br><span class="line">&#125;;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ç»„åˆconcept</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; </span></span><br><span class="line"><span class="function"><span class="keyword">requires</span> Incrementable&lt;T&gt; &amp;&amp; Decrementable&lt;T&gt; </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Foo</span><span class="params">(T t)</span></span>; </span><br><span class="line"><span class="comment">// or </span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; </span><br><span class="line"><span class="keyword">concept</span> Incr_Decrementable = Incrementable&lt;T&gt; &amp;&amp; Decrementable&lt;T&gt;; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;Incr_Decrementable T&gt; </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Foo</span><span class="params">(T t)</span></span>;</span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure>
<h3 id="lambda-è¡¨è¾¾å¼çš„æ›´æ–°"><a class="header-anchor" href="#lambda-è¡¨è¾¾å¼çš„æ›´æ–°">ğŸŒ³</a>Lambda è¡¨è¾¾å¼çš„æ›´æ–°</h3>
<h4 id="this-éœ€è¦æ˜¾å¼æ•è·thiså˜é‡"><a class="header-anchor" href="#this-éœ€è¦æ˜¾å¼æ•è·thiså˜é‡">ğŸŒ³</a>[=, this] éœ€è¦æ˜¾å¼æ•è·<code>this</code>å˜é‡</h4>
<ul>
<li>C++20 ä¹‹å‰ <code>[=]</code> éšå¼æ•è·<code>this</code></li>
<li>C++20 å¼€å§‹ éœ€è¦æ˜¾å¼æ•è·this: <code>[=, this]</code></li>
</ul>
<h4 id="æ¨¡æ¿å½¢å¼çš„-lambda-è¡¨è¾¾å¼"><a class="header-anchor" href="#æ¨¡æ¿å½¢å¼çš„-lambda-è¡¨è¾¾å¼">ğŸŒ³</a>æ¨¡æ¿å½¢å¼çš„ Lambda è¡¨è¾¾å¼</h4>
<p>å¯ä»¥åœ¨<code>lambda</code>è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ¨¡æ¿è¯­æ³•</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">[]<span class="built_in">template</span>&lt;T&gt;(T x) &#123;<span class="comment">/* ... */</span>&#125;; </span><br><span class="line">[]<span class="built_in">template</span>&lt;T&gt;(T* p) &#123;<span class="comment">/* ... */</span>&#125;; </span><br><span class="line">[]<span class="built_in">template</span>&lt;T, <span class="type">int</span> N&gt;(<span class="built_in">T</span> (&amp;a)[N]) &#123;<span class="comment">/* ... */</span>&#125;;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<p><strong>åŸå› 1</strong></p>
<ul>
<li>C++20ä¹‹å‰: è·å– vector å…ƒç´ ç±»å‹, ä½ éœ€è¦è¿™ä¹ˆå†™</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> func = [](<span class="keyword">auto</span> vec)&#123; </span><br><span class="line">    <span class="keyword">using</span> T = <span class="keyword">typename</span> <span class="keyword">decltype</span>(vec)::value_type; </span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<ul>
<li>C++20 ä½ å¯ä»¥:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> func = []&lt;<span class="keyword">typename</span> T&gt;(vector&lt;T&gt; vec)&#123; </span><br><span class="line">    <span class="comment">// ... </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<p><strong>åŸå› 2</strong>: æ–¹ä¾¿è·å–é€šç”¨lambdaå½¢å‚ç±»å‹, è®¿é—®é™æ€å‡½æ•°</p>
<ul>
<li>c++20 ä»¥å‰</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> func = [](<span class="keyword">auto</span> <span class="type">const</span>&amp; x)&#123; </span><br><span class="line">    <span class="keyword">using</span> T = std::<span class="type">decay_t</span>&lt;<span class="keyword">decltype</span>(x)&gt;; </span><br><span class="line">    T copy = x; T::<span class="built_in">static_function</span>(); </span><br><span class="line">    <span class="keyword">using</span> Iterator = <span class="keyword">typename</span> T::iterator; </span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>
<ul>
<li>C++20 å¼€å§‹</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> func = []&lt;<span class="keyword">typename</span> T&gt;(<span class="type">const</span> T&amp; x)&#123; </span><br><span class="line">    T copy = x; T::<span class="built_in">static_function</span>(); </span><br><span class="line">    <span class="keyword">using</span> Iterator = <span class="keyword">typename</span> T::iterator; </span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>
<p><strong>åŸå› 3</strong>: å®Œç¾è½¬å‘</p>
<ul>
<li>pre C++20:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> func = [](<span class="keyword">auto</span>&amp;&amp; ...args) &#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">foo</span>(std::forward&lt;<span class="keyword">decltype</span>(args)&gt;(args)...); </span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<ul>
<li>since C++20</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> func = []&lt;<span class="keyword">typename</span> â€¦T&gt;(T&amp;&amp; â€¦args)&#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">foo</span>(std::forward(args)...); </span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<h4 id="lambda-è¡¨è¾¾å¼æ•è·æ”¯æŒæ‰“åŒ…å±•å¼€-pack-expansion"><a class="header-anchor" href="#lambda-è¡¨è¾¾å¼æ•è·æ”¯æŒæ‰“åŒ…å±•å¼€-pack-expansion">ğŸŒ³</a>Lambda è¡¨è¾¾å¼æ•è·æ”¯æŒæ‰“åŒ…å±•å¼€(Pack Expansion)</h4>
<ul>
<li>Pre C++20</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> F, <span class="keyword">class</span>... Args&gt; </span></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">delay_invoke</span><span class="params">(F f, Args... args)</span></span>&#123; </span><br><span class="line">    <span class="keyword">return</span> [f, args...]&#123; </span><br><span class="line">        <span class="keyword">return</span> std::<span class="built_in">invoke</span>(f, args...); </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Since C++20</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> F, <span class="keyword">class</span>... Args&gt; </span></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">delay_invoke</span><span class="params">(F f, Args... args)</span></span>&#123; </span><br><span class="line">    <span class="comment">// Pack Expansion:  args = std::move(args)...  </span></span><br><span class="line">    <span class="keyword">return</span> [f = std::<span class="built_in">move</span>(f), args = std::<span class="built_in">move</span>(args)...]()&#123; </span><br><span class="line">        <span class="keyword">return</span> std::<span class="built_in">invoke</span>(f, args...); </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure>
<h3 id="å¸¸é‡è¡¨è¾¾å¼-constexpr-çš„æ›´æ–°"><a class="header-anchor" href="#å¸¸é‡è¡¨è¾¾å¼-constexpr-çš„æ›´æ–°">ğŸŒ³</a>å¸¸é‡è¡¨è¾¾å¼(<code>constexpr</code>) çš„æ›´æ–°</h3>
<ul>
<li>
<p><code>constexpr</code> è™šå‡½æ•°</p>
</li>
<li>
<ul>
<li><code>constexpr</code> çš„è™šå‡½æ•°å¯ä»¥é‡å†™é <code>constexpr</code> çš„è™šå‡½æ•°</li>
<li>é <code>constexpr</code> è™šå‡½æ•°å¯ä»¥é‡å†™ <code>constexpr</code> çš„è™šå‡½æ•°</li>
</ul>
</li>
<li>
<p><code>constexpr</code> å‡½æ•°å¯ä»¥:</p>
</li>
<li>
<ul>
<li>
<p>ä½¿ç”¨ <code>dynamic_cast()</code> å’Œ <code>typeid</code></p>
</li>
<li>
<p>åŠ¨æ€å†…å­˜åˆ†é…</p>
</li>
<li>
<p>æ›´æ”¹<code>union</code>æˆå‘˜çš„å€¼</p>
</li>
<li>
<p>åŒ…å« <code>try/catch</code></p>
</li>
<li>
<ul>
<li>ä½†æ˜¯**ä¸å…è®¸****<code>throw</code>**<strong>è¯­å¥</strong></li>
<li>åœ¨è§¦å‘å¸¸é‡æ±‚å€¼çš„æ—¶å€™ try/catch ä¸å‘ç”Ÿä½œç”¨</li>
<li>éœ€è¦å¼€å¯ <code>constexpr std::vector</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="constexpr-string-vector"><a class="header-anchor" href="#constexpr-string-vector">ğŸŒ³</a><code>constexpr</code> string &amp; vector</h4>
<ul>
<li><code>std::string</code> å’Œ <code>std::vector</code> ç±»å‹ç°åœ¨å¯ä»¥ä½œä¸º <code>constexpr</code></li>
<li>æœªæ¥éœ€è¦æ”¯æŒ <code>constexpr</code> åå°„</li>
</ul>
<h3 id="åŸå­-atomic-æ™ºèƒ½æŒ‡é’ˆ"><a class="header-anchor" href="#åŸå­-atomic-æ™ºèƒ½æŒ‡é’ˆ">ğŸŒ³</a>åŸå­(Atomic)æ™ºèƒ½æŒ‡é’ˆ</h3>
<ul>
<li>
<p>æ™ºèƒ½æŒ‡é’ˆ(shared_ptr)çº¿ç¨‹å®‰å…¨å—?</p>
</li>
<li>
<ul>
<li><strong>æ˜¯</strong>: å¼•ç”¨è®¡æ•°æ§åˆ¶å•å…ƒçº¿ç¨‹å®‰å…¨, ä¿è¯å¯¹è±¡åªè¢«é‡Šæ”¾ä¸€æ¬¡</li>
<li><strong>å¦</strong>: å¯¹äºæ•°æ®çš„è¯»å†™æ²¡æœ‰çº¿ç¨‹å®‰å…¨</li>
</ul>
</li>
<li>
<p>å¦‚ä½•å°†æ™ºèƒ½æŒ‡é’ˆå˜æˆçº¿ç¨‹å®‰å…¨?</p>
</li>
<li>
<ul>
<li>
<p>ä½¿ç”¨ <code>mutex</code> æ§åˆ¶æ™ºèƒ½æŒ‡é’ˆçš„è®¿é—®</p>
</li>
<li>
<p>ä½¿ç”¨å…¨å±€éæˆå‘˜åŸå­æ“ä½œå‡½æ•°è®¿é—®, è¯¸å¦‚: std::atomic_load(), atomic_store(), â€¦</p>
</li>
<li>
<ul>
<li><strong>ç¼ºç‚¹</strong>: å®¹æ˜“å‡ºé”™, å¿˜è®°ä½¿ç”¨è¿™äº›æ“ä½œ</li>
</ul>
</li>
<li>
<p>C++20: <code>atomic&lt;shared_ptr&lt;T&gt;&gt;</code>, <code>atomic&lt;weak_ptr&lt;T&gt;&gt;</code></p>
</li>
<li>
<ul>
<li>å†…éƒ¨åŸç†å¯èƒ½ä½¿ç”¨äº†<code>mutex</code></li>
<li>å…¨å±€éæˆå‘˜åŸå­æ“ä½œå‡½æ•°æ ‡è®°ä¸ºä¸æ¨èä½¿ç”¨(deprecated)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="ä¾‹å­"><a class="header-anchor" href="#ä¾‹å­">ğŸŒ³</a>ä¾‹å­</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">concurrent_stack</span> &#123; </span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Node</span> &#123; </span><br><span class="line">        T t; </span><br><span class="line">        shared_ptr&lt;Node&gt; next; </span><br><span class="line">    &#125;; </span><br><span class="line">    atomic_shared_ptr&lt;Node&gt; head; </span><br><span class="line">    <span class="comment">// C++11: å»æ‰ &quot;atomic_&quot; å¹¶ä¸”åœ¨è®¿é—®æ—¶, éœ€è¦ç”¨ </span></span><br><span class="line">    <span class="comment">// ç‰¹æ®Šçš„å‡½æ•°æ§åˆ¶çº¿ç¨‹å®‰å…¨, ä¾‹å¦‚ç”¨std::tomic_load </span></span><br><span class="line"><span class="keyword">public</span>: </span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">reference</span> &#123; </span><br><span class="line">        shared_ptr&lt;Node&gt; p; </span><br><span class="line">        &lt;snip&gt; </span><br><span class="line">    &#125;; </span><br><span class="line">    <span class="function"><span class="keyword">auto</span> <span class="title">find</span><span class="params">(T t)</span> <span class="type">const</span> </span>&#123; </span><br><span class="line">        <span class="keyword">auto</span> p = head.<span class="built_in">load</span>(); <span class="comment">// C++11: atomic_load(&amp;head) </span></span><br><span class="line">        <span class="keyword">while</span> (p &amp;&amp; p-&gt;t != t) </span><br><span class="line">            p = p-&gt;next; </span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">reference</span>(<span class="built_in">move</span>(p)); </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="function"><span class="keyword">auto</span> <span class="title">front</span><span class="params">()</span> <span class="type">const</span> </span>&#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">reference</span>(head); </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">push_front</span><span class="params">(T t)</span> </span>&#123; </span><br><span class="line">        <span class="keyword">auto</span> p = <span class="built_in">make_shared</span>&lt;Node&gt;(); </span><br><span class="line">        p-&gt;t = t; p-&gt;next = head; </span><br><span class="line">        <span class="keyword">while</span> (!head.<span class="built_in">compare_exchange_weak</span>(p-&gt;next, p))&#123; </span><br><span class="line">    &#125; <span class="comment">// C++11: atomic_compare_exchange_weak(&amp;head, &amp;p-&gt;next, p); &#125;     </span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">pop_front</span><span class="params">()</span> </span>&#123; </span><br><span class="line">        <span class="keyword">auto</span> p = head.<span class="built_in">load</span>(); </span><br><span class="line">        <span class="keyword">while</span> (p &amp;&amp; !head.<span class="built_in">compare_exchange_weak</span>(p, p-&gt;next)) &#123;</span><br><span class="line">        &#125; <span class="comment">// C++11: atomic_compare_exchange_weak(&amp;head, &amp;p, p-&gt;next); </span></span><br><span class="line">    &#125; </span><br><span class="line">&#125;;</span><br><span class="line"><span class="number">12345678910111213141516171819202122232425262728293031323334</span></span><br></pre></td></tr></table></figure>
<p><em>ä¾‹å­æ¥è‡ª Herb Sutter çš„ N4162 è®ºæ–‡</em></p>
<h3 id="è‡ªåŠ¨åˆæµ-joining-å¯ä¸­æ–­-cancellable-çš„çº¿ç¨‹"><a class="header-anchor" href="#è‡ªåŠ¨åˆæµ-joining-å¯ä¸­æ–­-cancellable-çš„çº¿ç¨‹">ğŸŒ³</a>è‡ªåŠ¨åˆæµ(Joining), å¯ä¸­æ–­(Cancellable) çš„çº¿ç¨‹</h3>
<ul>
<li>
<p>std::jthread</p>
</li>
<li>
<ul>
<li>
<p>å¤´æ–‡ä»¶</p>
</li>
<li>
<p>æ”¯æŒä¸­æ–­</p>
</li>
<li>
<p>ææ„å‡½æ•°ä¸­è‡ªåŠ¨ Join</p>
</li>
<li>
<ul>
<li>ææ„å‡½æ•°è°ƒç”¨ <code>stop_source.request_stop()</code> ç„¶å <code>join()</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>ä¸­æ–­çº¿ç¨‹æ‰§è¡Œ</p>
</li>
<li>
<ul>
<li>
<p>å¤´æ–‡ä»¶ &lt;stop_token&gt;</p>
</li>
<li>
<p><code>std::stop_token</code></p>
</li>
<li>
<ul>
<li>ç”¨æ¥æŸ¥è¯¢çº¿ç¨‹æ˜¯å¦ä¸­æ–­</li>
<li>å¯ä»¥å’Œ<code>condition_variable_any</code>é…åˆä½¿ç”¨</li>
</ul>
</li>
<li>
<p><code>std::stop_source</code></p>
</li>
<li>
<ul>
<li>ç”¨æ¥è¯·æ±‚çº¿ç¨‹åœæ­¢è¿è¡Œ</li>
<li>stop_resources å’Œ stop_tokens éƒ½å¯ä»¥æŸ¥è¯¢åˆ°åœæ­¢è¯·æ±‚</li>
</ul>
</li>
<li>
<p><code>std::stop_callback</code></p>
</li>
<li>
<ul>
<li>å¦‚æœå¯¹åº”çš„<code>stop_token</code> è¢«è¦æ±‚ç»ˆæ­¢, å°†ä¼šè§¦å‘å›è°ƒå‡½æ•°</li>
<li>ç”¨æ³•: std::stop_callback myCallback(myStopToken, []{ /* â€¦ */ });</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="ä¾‹å­"><a class="header-anchor" href="#ä¾‹å­">ğŸŒ³</a>ä¾‹å­</h4>
<ul>
<li>è‡ªåŠ¨åˆæµ Join</li>
</ul>
<blockquote>
<p><em>std::thread åœ¨ææ„å‡½æ•°ä¸­å¦‚æœçº¿ç¨‹</em> <em><code>joinable()</code></em> <em>ä¼šç›´æ¥è°ƒç”¨</em> <em><code>std::terminate()</code></em> <em>ç›´æ¥å¯¼è‡´ç¨‹åºé€€å‡º</em></p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">DoWorkPreCpp20</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    <span class="function">std::thread <span class="title">job</span><span class="params">([] &#123; <span class="comment">/* ... */</span> &#125;)</span></span>; </span><br><span class="line">    <span class="keyword">try</span> &#123; </span><br><span class="line">        <span class="comment">// ... Do something else ... </span></span><br><span class="line">    &#125; <span class="built_in">catch</span> (...) &#123; </span><br><span class="line">        job.<span class="built_in">join</span>(); </span><br><span class="line">        <span class="keyword">throw</span>; <span class="comment">// rethrow </span></span><br><span class="line">    &#125; </span><br><span class="line">    job.<span class="built_in">join</span>(); </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DoWork</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    <span class="function">std::jthread <span class="title">job</span><span class="params">([] &#123; <span class="comment">/* ... */</span> &#125;)</span></span>; </span><br><span class="line">    <span class="comment">// ... Do something else ... </span></span><br><span class="line">&#125; <span class="comment">// jthread destructor automatically calls join()</span></span><br><span class="line"><span class="number">123456789101112131415</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸­æ–­</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">std::jthread <span class="title">job</span><span class="params">([](std::stop_token token) &#123;</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">while</span> (!token.stop_requested()) &#123; </span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="comment">//... </span></span></span></span><br><span class="line"><span class="params"><span class="function">    &#125; </span></span></span><br><span class="line"><span class="params"><span class="function">&#125;)</span></span>; </span><br><span class="line"><span class="comment">//... job.request_stop(); </span></span><br><span class="line"><span class="comment">// auto source = job.get_stop_source() </span></span><br><span class="line"><span class="comment">// auto token = job.get_stop_token()</span></span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure>
<h3 id="c-20-åŒæ­¥-synchronization-åº“"><a class="header-anchor" href="#c-20-åŒæ­¥-synchronization-åº“">ğŸŒ³</a>C++20 åŒæ­¥(Synchronization)åº“</h3>
<ul>
<li>
<p>ä¿¡å·é‡(Semaphore), ç»´åŸºç™¾ç§‘è¯·èµ°<a href="https://link.zhihu.com/?target=https%3A//zh.wikipedia.org/wiki/%E4%BF%A1%E5%8F%B7%E9%87%8F">è¿™é‡Œ</a></p>
</li>
<li>
<ul>
<li>
<p>å¤´æ–‡ä»¶<a href="https://link.zhihu.com/?target=https%3A//en.cppreference.com/w/cpp/header/semaphore"></a></p>
</li>
<li>
<p>è½»é‡çº§çš„åŒæ­¥åŸè¯­</p>
</li>
<li>
<p>å¯ç”¨æ¥å®ç°ä»»ä½•å…¶ä»–åŒæ­¥æ¦‚å¿µ, å¦‚: mutex, latches, barriers, â€¦</p>
</li>
<li>
<p>ä¸¤ç§ç±»å‹:</p>
</li>
<li>
<ul>
<li>å¤šå…ƒä¿¡å·é‡(counting semaphore): å»ºæ¨¡éè´Ÿå€¼èµ„æºè®¡æ•°</li>
<li>äºŒå…ƒä¿¡å·é‡(binary semaphore): åªæœ‰ä¸€ä¸ªæ’å­”, ä¸¤ç§çŠ¶æ€, æœ€é€‚åˆå®ç°<code>mutex</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>std::atomic</code> ç­‰å¾…å’Œé€šçŸ¥æ¥å£</p>
</li>
<li>
<ul>
<li>
<p>ç­‰å¾…/é˜»å¡åœ¨åŸå­å¯¹è±¡ç›´åˆ°å…¶å€¼å‘ç”Ÿæ”¹å˜, é€šè¿‡é€šçŸ¥å‡½æ•°å‘é€é€šçŸ¥</p>
</li>
<li>
<p>æ¯”è½®è®­(polling)æ¥çš„æ›´é«˜æ•ˆ</p>
</li>
<li>
<p>æ–¹æ³•</p>
</li>
<li>
<ul>
<li><code>wait()</code></li>
<li><code>notify_one()</code></li>
<li><code>notify_all()</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>é”å­˜å™¨(Latch)å’Œå±éšœ(Barrier)</p>
</li>
<li>
<ul>
<li>è¾…åŠ©çº¿ç¨‹æ¡ä»¶åŒæ­¥</li>
</ul>
</li>
<li>
<p>é”å­˜å™¨(Latches)</p>
</li>
<li>
<ul>
<li>
<p>å¤´æ–‡ä»¶</p>
</li>
<li>
<p>çº¿ç¨‹çš„åŒæ­¥ç‚¹</p>
</li>
<li>
<ul>
<li>çº¿ç¨‹å°†é˜»å¡åœ¨è¿™ä¸ªä½ç½®, ç›´åˆ°åˆ°è¾¾çš„çº¿ç¨‹ä¸ªæ•°è¾¾æ ‡æ‰æ”¾è¡Œ, æ”¾è¡Œä¹‹åä¸å†å…³é—­</li>
</ul>
</li>
<li>
<p>é”å­˜å™¨åªä¼šä½œç”¨ä¸€æ¬¡</p>
</li>
</ul>
</li>
<li>
<p>å±éšœ(Barriers)</p>
</li>
<li>
<ul>
<li>
<p>å¤šä¸ªé˜¶æ®µ</p>
</li>
<li>
<p>æ¯ä¸ªé˜¶æ®µä¸­</p>
</li>
<li>
<ul>
<li>ä¸€ä¸ªå‚ä¸è€…è¿è¡Œè‡³å±éšœç‚¹æ—¶è¢«é˜»å¡ï¼Œéœ€è¦ç­‰å¾…å…¶ä»–å‚ä¸è€…éƒ½åˆ°è¾¾å±éšœç‚¹, å½“åˆ°è¾¾çº¿ç¨‹æ•°è¾¾æ ‡ä¹‹å</li>
<li>é˜¶æ®µå®Œæˆçš„å›è°ƒå°†è¢«æ‰§è¡Œ</li>
<li>çº¿ç¨‹è®¡æ•°å™¨è¢«é‡ç½®</li>
<li>å¼€å¯ä¸‹ä¸€é˜¶æ®µ</li>
<li>çº¿ç¨‹å¾—ä»¥ç»§ç»­æ‰§è¡Œ</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="std-atomic-ref"><a class="header-anchor" href="#std-atomic-ref">ğŸŒ³</a>std::atomic_ref</h4>
<ul>
<li>å¤´æ–‡ä»¶</li>
<li>Atomic å¼•ç”¨</li>
<li>é€šè¿‡å¼•ç”¨è®¿é—®å˜ä¸ºåŸå­æ“ä½œ, è¢«å¼•ç”¨å¯¹è±¡å¯ä»¥ä¸ºéåŸå­ç±»å‹</li>
</ul>
<h3 id="å…¶ä»–æ›´æ–°"><a class="header-anchor" href="#å…¶ä»–æ›´æ–°">ğŸŒ³</a>å…¶ä»–æ›´æ–°</h3>
<h4 id="æŒ‡å®šåˆå§‹åŒ–-designated-initializers"><a class="header-anchor" href="#æŒ‡å®šåˆå§‹åŒ–-designated-initializers">ğŸŒ³</a>æŒ‡å®šåˆå§‹åŒ–(Designated Initializers)</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Data</span> &#123; </span><br><span class="line">    <span class="type">int</span> anInt = <span class="number">0</span>; </span><br><span class="line">    std::string aString; </span><br><span class="line">&#125;; </span><br><span class="line">Data d&#123; .aString = <span class="string">&quot;Hello&quot;</span> &#125;;</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>
<h4 id="èˆªå¤©é£æœºæ“ä½œç¬¦"><a class="header-anchor" href="#èˆªå¤©é£æœºæ“ä½œç¬¦">ğŸŒ³</a>èˆªå¤©é£æœºæ“ä½œç¬¦ &lt;=&gt;</h4>
<ul>
<li>
<p>æ­£è§„åç§°: <strong>ä¸‰è·¯æ¯”è¾ƒè¿ç®—ç¬¦</strong></p>
</li>
<li>
<p>ä¸‰è·¯æ¯”è¾ƒç»“æœå¦‚ä¸‹</p>
</li>
<li>
<ul>
<li>(a &lt;=&gt; b) &lt; 0 // å¦‚æœ a &lt; b åˆ™ä¸º true</li>
<li>(a &lt;=&gt; b) &gt; 0 // å¦‚æœ a &gt; b åˆ™ä¸º true</li>
<li>(a &lt;=&gt; b) == 0 // å¦‚æœ a ä¸ b ç›¸ç­‰æˆ–è€…ç­‰ä»· åˆ™ä¸º true</li>
</ul>
</li>
<li>
<p>ç±»ä¼¼äºCçš„strcmp å‡½æ•°è¿”å›-1, 0, 1</p>
</li>
<li>
<p><strong>ä¸€èˆ¬æƒ…å†µ</strong>: è‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰çš„æ¯”è¾ƒæ“ä½œç¬¦, å¦‚æœå¯¹è±¡æ˜¯ç»“æ„ä½“åˆ™é€ä¸ªæ¯”è¾ƒ, å¯ä»¥ç”¨ä¸‹é¢ä»£ç ä»£æ›¿æ‰€æœ‰çš„æ¯”è¾ƒè¿ç®—ç¬¦</p>
</li>
<li>
<ul>
<li><code>auto X::operator&lt;=&gt;(const Y&amp;) = default;</code></li>
</ul>
</li>
<li>
<p><strong>é«˜çº§æƒ…å†µ</strong>: æŒ‡å®šè¿”å›ç±»å‹(æ”¯æŒ6ç§æ‰€æœ‰çš„æ¯”è¾ƒè¿ç®—ç¬¦)</p>
</li>
</ul>
<p><strong>ç¤ºä¾‹</strong>:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span> &#123; </span><br><span class="line">    <span class="type">int</span> x; <span class="type">int</span> y; </span><br><span class="line"><span class="keyword">public</span>: </span><br><span class="line">    <span class="keyword">friend</span> <span class="type">bool</span> <span class="keyword">operator</span>==(<span class="type">const</span> Point&amp; a, <span class="type">const</span> Point&amp; b)&#123; </span><br><span class="line">        <span class="keyword">return</span> a.x==b.x &amp;&amp; a.y==b.y; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">friend</span> <span class="type">bool</span> <span class="keyword">operator</span>&lt; (<span class="type">const</span> Point&amp; a, <span class="type">const</span> Point&amp; b)&#123; </span><br><span class="line">        <span class="keyword">return</span> a.x &lt; b.x || (a.x == b.x &amp;&amp; a.y &lt; b.y);  </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">friend</span> <span class="type">bool</span> <span class="keyword">operator</span>!=(<span class="type">const</span> Point&amp; a, <span class="type">const</span> Point&amp; b) &#123; </span><br><span class="line">        <span class="keyword">return</span> !(a==b); </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">friend</span> <span class="type">bool</span> <span class="keyword">operator</span>&lt;=(<span class="type">const</span> Point&amp; a, <span class="type">const</span> Point&amp; b) &#123; </span><br><span class="line">        <span class="keyword">return</span> !(<span class="built_in">b</span>&lt;a); </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">friend</span> <span class="type">bool</span> <span class="keyword">operator</span>&gt; (<span class="type">const</span> Point&amp; a, <span class="type">const</span> Point&amp; b) &#123; </span><br><span class="line">        <span class="keyword">return</span> b&lt;a; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">friend</span> <span class="type">bool</span> <span class="keyword">operator</span>&gt;=(<span class="type">const</span> Point&amp; a, <span class="type">const</span> Point&amp; b) &#123; </span><br><span class="line">        <span class="keyword">return</span> !(a&lt;b); </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="comment">// ... å…¶ä»–éæ¯”è¾ƒå‡½æ•° ... </span></span><br><span class="line">&#125;; </span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;compare&gt;</span> </span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span> &#123; </span><br><span class="line">    <span class="type">int</span> x; <span class="type">int</span> y; </span><br><span class="line"><span class="keyword">public</span>: </span><br><span class="line">    <span class="keyword">auto</span> <span class="built_in">operator</span>&lt;=&gt;(<span class="type">const</span> Point&amp;)  <span class="type">const</span> = <span class="keyword">default</span>; <span class="comment">// æ¯”è¾ƒæ“ä½œç¬¦è‡ªåŠ¨ç”Ÿæˆ</span></span><br><span class="line">    <span class="comment">// ... å…¶ä»–éæ¯”è¾ƒå‡½æ•° ... </span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="number">123456789101112131415161718192021222324252627282930</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>æ ‡å‡†åº“ç±»å‹æ”¯æŒ &lt;=&gt;</p>
</li>
<li>
<ul>
<li>vector, string, map, set, sub_match, â€¦</li>
</ul>
</li>
<li>
<p>ä¾‹å¦‚:</p>
</li>
</ul>
<h4 id="èŒƒå›´-for-å¾ªç¯è¯­å¥æ”¯æŒåˆå§‹åŒ–è¯­å¥"><a class="header-anchor" href="#èŒƒå›´-for-å¾ªç¯è¯­å¥æ”¯æŒåˆå§‹åŒ–è¯­å¥">ğŸŒ³</a>èŒƒå›´ for å¾ªç¯è¯­å¥æ”¯æŒåˆå§‹åŒ–è¯­å¥</h4>
<ul>
<li>switch è¯­å¥åˆå§‹åŒ– (C++17):</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Foo</span> &#123; </span><br><span class="line">    <span class="type">int</span> value; <span class="type">int</span> result; </span><br><span class="line">&#125;; </span><br><span class="line"><span class="function">Foo <span class="title">GetData</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Foo</span>(); </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    <span class="keyword">switch</span> (<span class="keyword">auto</span> data = <span class="built_in">GetData</span>(); data.value) &#123; </span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>: </span><br><span class="line">        <span class="keyword">return</span> data.result; </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure>
<ul>
<li>if è¯­å¥åˆå§‹åŒ– (C++17):</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Foo</span> &#123; </span><br><span class="line">    <span class="type">int</span> value; <span class="type">int</span> result; </span><br><span class="line">&#125;; </span><br><span class="line"><span class="function">Foo* <span class="title">GetData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Foo</span>(); </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">auto</span> data = <span class="built_in">GetData</span>(); data) &#123; </span><br><span class="line">        <span class="comment">// Use &#x27;dataâ€™ </span></span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ç°åœ¨èŒƒå›´ for å¾ªç¯åŒæ ·æ”¯æŒåˆå§‹åŒ– (C++20):</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Foo</span> &#123; </span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; values; </span><br><span class="line">&#125;; </span><br><span class="line"><span class="function">Foo <span class="title">GetData</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Foo</span>(); </span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> data = <span class="built_in">GetData</span>(); </span><br><span class="line">    <span class="keyword">auto</span>&amp; value : data.values) &#123; </span><br><span class="line">        <span class="comment">// Use &#x27;dataâ€™ </span></span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure>
<h4 id="éç±»å‹æ¨¡æ¿å½¢å‚æ”¯æŒå­—ç¬¦ä¸²"><a class="header-anchor" href="#éç±»å‹æ¨¡æ¿å½¢å‚æ”¯æŒå­—ç¬¦ä¸²">ğŸŒ³</a>éç±»å‹æ¨¡æ¿å½¢å‚æ”¯æŒå­—ç¬¦ä¸²</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">auto</span>&amp; s&gt; <span class="type">void</span> <span class="title">DoSomething</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    std::cout &lt;&lt; s &lt;&lt; std::endl; </span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    <span class="built_in">DoSomething</span>&lt;<span class="string">&quot;CppCon&quot;</span>&gt;(); </span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>
<h4 id="likely-unlikely"><a class="header-anchor" href="#likely-unlikely">ğŸŒ³</a>[[likely]], [[unlikely]]</h4>
<p>å…ˆéªŒæ¦‚ç‡æŒ‡å¯¼ç¼–è¯‘å™¨ä¼˜åŒ–</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> (value) &#123; </span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>: <span class="keyword">break</span>; </span><br><span class="line">    [[likely]] <span class="keyword">case</span> <span class="number">2</span>: <span class="keyword">break</span>; </span><br><span class="line">    [[unlikely]] <span class="keyword">case</span> <span class="number">3</span>: <span class="keyword">break</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>
<h4 id="æ—¥å†-calendar-å’Œæ—¶åŒº-timezone-åŠŸèƒ½"><a class="header-anchor" href="#æ—¥å†-calendar-å’Œæ—¶åŒº-timezone-åŠŸèƒ½">ğŸŒ³</a>æ—¥å†(Calendar)å’Œæ—¶åŒº(Timezone)åŠŸèƒ½</h4>
<ul>
<li>
<p>å¢åŠ æ—¥å†å’Œæ—¶åŒºçš„æ”¯æŒ</p>
</li>
<li>
<p>åªæ”¯æŒå…¬å†(Gregorian calendar)</p>
</li>
<li>
<ul>
<li>å…¶ä»–æ—¥å†ä¹Ÿå¯é€šè¿‡æ‰©å±•åŠ å…¥, å¹¶èƒ½å’Œ è¿›è¡Œäº¤äº’</li>
</ul>
</li>
<li>
<p>åˆå§‹åŒ– å¹´, æœˆ æ—¥çš„æ–¹æ³•</p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// creating a year </span></span><br><span class="line"><span class="keyword">auto</span> y1 = year&#123; <span class="number">2019</span> &#125;; </span><br><span class="line"><span class="keyword">auto</span> y2 = <span class="number">2019</span>y; </span><br><span class="line"><span class="comment">// creating a mouth</span></span><br><span class="line"><span class="keyword">auto</span> m1 = month&#123; <span class="number">9</span> &#125;; </span><br><span class="line"><span class="keyword">auto</span> m2 = September; </span><br><span class="line"><span class="comment">// creating a day </span></span><br><span class="line"><span class="keyword">auto</span> d1 = day&#123; <span class="number">18</span> &#125;; </span><br><span class="line"><span class="keyword">auto</span> d2 = <span class="number">18</span>d;</span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure>
<ul>
<li>åˆ›å»ºå®Œæ•´çš„æ—¥æœŸ</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">year_mouth_day fulldate1&#123;<span class="number">2019</span>y, September, <span class="number">18</span>d&#125;; </span><br><span class="line"><span class="keyword">auto</span> fulldate2 = <span class="number">2019</span>y / September / <span class="number">18</span>d; </span><br><span class="line">year_mouth_day fulldate3&#123;Monday[<span class="number">3</span>]/September/<span class="number">2019</span>&#125;; <span class="comment">// Monday[3] è¡¨ç¤ºç¬¬ä¸‰ä¸ªæ˜ŸæœŸä¸€</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æ–°çš„äº‹ä»¶é—´éš”å•ä½, ç±»ä¼¼äºç§’, åˆ†é’Ÿ, â€¦</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> days = duration&lt;<span class="type">signed</span> interger type of at least <span class="number">25</span>bits, </span><br><span class="line">                      ratio_multiply&lt;ratio&lt;<span class="number">24</span>&gt;, hours::period&gt;&gt;; </span><br><span class="line"><span class="keyword">using</span> weeks = ...; <span class="keyword">using</span> mouths = ...; </span><br><span class="line"><span class="keyword">using</span> years = ...;</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä¾‹å­</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">weeks w&#123;<span class="number">1</span>&#125;; <span class="comment">// 1 å‘¨ </span></span><br><span class="line">days d&#123;w&#125;; <span class="comment">// å°† 1 å‘¨ è½¬æ¢æˆå¤©æ•°</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>æ–°çš„æ—¶é’Ÿç±»å‹, (ä¹‹å‰æœ‰ <code>system_clock</code>, <code>steady_clock</code>, <code>high_resolution_clock</code>):</p>
</li>
<li>
<ul>
<li><code>utc_clock</code>: represents Coordinated Universal Time (UTC), measures time since 00:00:00 UTC, Thursday, 1 January 1970, including leap seconds</li>
<li><code>tai_clock</code>: represents International Atomic Time (TAI), measures time since 00:00:00, 1 January 1958, and was offseted 10 seconds ahead of UTC at that date, it does not include leap seconds</li>
<li><code>gps_clock</code>: represents Global Positioning System (GPS) time, measures time since 00:00:00, 6 January 1980 UTC, it does not include leap seconds</li>
<li><code>file_clock</code>: alias for the clock used for <code>std::filesystem::file_time_type</code>, epoch is unspecified</li>
</ul>
</li>
<li>
<p>æ–°å¢<code>system_clock</code>ç›¸å…³çš„åˆ«å</p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">Duration</span>&gt; </span><br><span class="line"><span class="keyword">using</span> sys_time = std::chrono::time_point&lt;std::chrono::system_clock, Duration&gt;; </span><br><span class="line"><span class="keyword">using</span> sys_seconds = sys_time&lt;std::chrono::seconds&gt;; </span><br><span class="line"><span class="keyword">using</span> sys_days = sys_time&lt;std::chrono::days&gt;; </span><br><span class="line"><span class="comment">// ç”¨ä¾‹: </span></span><br><span class="line">system_clock::time_point t =  sys_days&#123; <span class="number">2019</span>y / September / <span class="number">18</span>d &#125;; <span class="comment">// date -&gt; time_point </span></span><br><span class="line"><span class="keyword">auto</span> yearmonthday =  year_month_day&#123; <span class="built_in">floor</span>&lt;days&gt;(t) &#125;; <span class="comment">// time_point -&gt; date</span></span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æ—¥æœŸ + äº‹ä»¶</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> t = sys_days&#123;<span class="number">2019</span>y/September/<span class="number">18</span>d&#125; + <span class="number">9</span>h + <span class="number">35</span>min + <span class="number">10</span>s; <span class="comment">// 2019-09-18 09:35:10 UTC</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æ—¶åŒºè½¬æ¢</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Convert UTC to Denver </span></span><br><span class="line">time: zoned_time denver = &#123; <span class="string">&quot;America/Denver&quot;</span>, t &#125;; </span><br><span class="line"><span class="comment">// Construct a local time in Denver: </span></span><br><span class="line"><span class="keyword">auto</span> t = zoned_time&#123; </span><br><span class="line">    <span class="string">&quot;America/Denver&quot;</span>,  local_days&#123;Wednesday[<span class="number">3</span>] / September / <span class="number">2019</span>&#125; + <span class="number">9</span>h </span><br><span class="line">&#125;; </span><br><span class="line"><span class="comment">// Get current local time: </span></span><br><span class="line"><span class="keyword">auto</span> t = zoned_time&#123; <span class="built_in">current_zone</span>(), system_clock::<span class="built_in">now</span>() &#125;;</span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure>
<h4 id="std-span"><a class="header-anchor" href="#std-span">ğŸŒ³</a>std::span</h4>
<ul>
<li>å¤´æ–‡ä»¶</li>
<li>æŸæ®µè¿ç»­æ•°æ®çš„â€è§†å›¾â€</li>
<li>ä¸æŒæœ‰æ•°æ®, ä¸åˆ†é…å’Œé”€æ¯æ•°æ®</li>
<li>æ‹·è´éå¸¸å¿«, æ¨èå¤åˆ¶çš„æ–¹å¼ä¼ å‚(ç±»ä¼¼ <code>string_view</code>)</li>
<li>ä¸æ”¯æŒæ•°æ®è·¨æ­¥(stride)</li>
<li>å¯é€šè¿‡è¿è¡ŒæœŸç¡®å®šé•¿åº¦ä¹Ÿå¯ç¼–è¯‘å™¨ç¡®å®šé•¿åº¦</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> data[<span class="number">42</span>]; span&lt;<span class="type">int</span>, <span class="number">42</span>&gt; a &#123;data&#125;; <span class="comment">// fixed-size: 42 ints </span></span><br><span class="line">span&lt;<span class="type">int</span>&gt; b &#123;data&#125;; <span class="comment">// dynamic-size: 42 ints </span></span><br><span class="line">span&lt;<span class="type">int</span>, <span class="number">50</span>&gt; c &#123;data&#125;; <span class="comment">// compilation error </span></span><br><span class="line">span&lt;<span class="type">int</span>&gt; d&#123; ptr, len &#125;; <span class="comment">// dynamic-size: len ints</span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>
<h4 id="ç‰¹æ€§æµ‹è¯•å®"><a class="header-anchor" href="#ç‰¹æ€§æµ‹è¯•å®">ğŸŒ³</a>ç‰¹æ€§æµ‹è¯•å®</h4>
<p>é€šè¿‡å®ƒå¯ä»¥åˆ¤æ–­ç¼–è¯‘å™¨æ˜¯å¦æ”¯æŒæŸä¸ªåŠŸèƒ½, ä¾‹å¦‚</p>
<ul>
<li>
<p>è¯­è¨€ç‰¹æ€§</p>
</li>
<li>
<ul>
<li><code>__has_cpp_attribute(fallthrough)</code></li>
<li><code>__cpp_binary_literals</code></li>
<li><code>__cpp_char8_t</code></li>
<li><code>__cpp_coroutines</code></li>
</ul>
</li>
<li>
<p>æ ‡å‡†åº“ç‰¹æ€§</p>
</li>
<li>
<ul>
<li><code>__cpp_lib_concepts</code></li>
<li><code>__cpp_lib_ranges</code></li>
<li><code>__cpp_lib_scoped_lock</code></li>
</ul>
</li>
</ul>
<h4 id="none"><a class="header-anchor" href="#none">ğŸŒ³</a></h4>
<p>åŒ…å« C++ æ ‡å‡†åº“ç‰ˆæœ¬, å‘å¸ƒæ—¥æœŸ, ç‰ˆæƒè¯ä¹¦, ç‰¹æ€§å®ç­‰</p>
<h4 id="consteval-å‡½æ•°"><a class="header-anchor" href="#consteval-å‡½æ•°">ğŸŒ³</a><code>consteval</code> å‡½æ•°</h4>
<p><code>constexpr</code> å‡½æ•°å¯èƒ½ç¼–è¯‘æœŸæ‰§è¡Œ, ä¹Ÿå¯ä»¥åœ¨è¿è¡ŒæœŸæ‰§è¡Œ, <code>consteval</code> åªèƒ½åœ¨ç¼–è¯‘å™¨æ‰§è¡Œ, å¦‚æœä¸æ»¡è¶³è¦æ±‚ç¼–è¯‘ä¸é€šè¿‡</p>
<h4 id="constinit"><a class="header-anchor" href="#constinit">ğŸŒ³</a><code>constinit</code></h4>
<p>å¼ºåˆ¶æŒ‡å®šä»¥å¸¸é‡æ–¹å¼åˆå§‹åŒ–</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">const</span> <span class="type">char</span>* <span class="title">GetStringDyn</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;dynamic init&quot;</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="type">const</span> <span class="type">char</span>* <span class="title">GetString</span><span class="params">(<span class="type">bool</span> constInit)</span> </span>&#123; </span><br><span class="line">    <span class="keyword">return</span> constInit ? </span><br><span class="line">        <span class="string">&quot;constant init&quot;</span> : </span><br><span class="line">        <span class="built_in">GetStringDyn</span>(); </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">constinit</span> <span class="type">const</span> <span class="type">char</span>* a = <span class="built_in">GetString</span>(<span class="literal">true</span>); <span class="comment">// âœ” </span></span><br><span class="line"><span class="keyword">constinit</span> <span class="type">const</span> <span class="type">char</span>* b = <span class="built_in">GetString</span>(<span class="literal">false</span>); <span class="comment">// âŒ</span></span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure>
<h4 id="ç”¨-using-å¼•ç”¨-enum-ç±»å‹"><a class="header-anchor" href="#ç”¨-using-å¼•ç”¨-enum-ç±»å‹">ğŸŒ³</a>ç”¨ <code>using</code> å¼•ç”¨ <code>enum</code> ç±»å‹</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum class</span> <span class="title class_">CardTypeSuit</span> &#123; </span><br><span class="line">    Clubs, </span><br><span class="line">    Diamonds, </span><br><span class="line">    Hearts, </span><br><span class="line">    Spades </span><br><span class="line">&#125;; </span><br><span class="line"><span class="function">std::string_view <span class="title">GetString</span><span class="params">(<span class="type">const</span> CardTypeSuit cardTypeSuit)</span> </span>&#123; </span><br><span class="line">    <span class="keyword">switch</span> (cardTypeSuit) &#123; </span><br><span class="line">    <span class="keyword">case</span> CardTypeSuit::Clubs: </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Clubs&quot;</span>; </span><br><span class="line">    <span class="keyword">case</span> CardTypeSuit::Diamonds: </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Diamonds&quot;</span>; </span><br><span class="line">    <span class="keyword">case</span> CardTypeSuit::Hearts: </span><br><span class="line">         <span class="keyword">return</span> <span class="string">&quot;Hearts&quot;</span>; </span><br><span class="line">    <span class="keyword">case</span> CardTypeSuit::Spades: </span><br><span class="line">         <span class="keyword">return</span> <span class="string">&quot;Spades&quot;</span>; </span><br><span class="line">    &#125; </span><br><span class="line">&#125; </span><br><span class="line"><span class="function">std::string_view <span class="title">GetString</span><span class="params">(<span class="type">const</span> CardTypeSuit cardTypeSuit)</span> </span>&#123; </span><br><span class="line">    <span class="keyword">switch</span> (cardTypeSuit) &#123; </span><br><span class="line">        <span class="keyword">using</span> <span class="keyword">enum</span> <span class="title class_">CardTypeSuit</span>; <span class="comment">// è¿™é‡Œ </span></span><br><span class="line">        <span class="keyword">case</span> Clubs: <span class="keyword">return</span> <span class="string">&quot;Clubs&quot;</span>; </span><br><span class="line">        <span class="keyword">case</span> Diamonds: <span class="keyword">return</span> <span class="string">&quot;Diamonds&quot;</span>; </span><br><span class="line">        <span class="keyword">case</span> Hearts: <span class="keyword">return</span> <span class="string">&quot;Hearts&quot;</span>; </span><br><span class="line">        <span class="keyword">case</span> Spades: <span class="keyword">return</span> <span class="string">&quot;Spades&quot;</span>; </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112131415161718192021222324252627</span></span><br></pre></td></tr></table></figure>
<h4 id="æ ¼å¼åŒ–åº“-std-format"><a class="header-anchor" href="#æ ¼å¼åŒ–åº“-std-format">ğŸŒ³</a>æ ¼å¼åŒ–åº“(<code>std::format</code>)</h4>
<p>ä¸å±•å¼€, ç±»ä¼¼<code>Python</code> çš„æ ¼å¼åŒ–,</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">std::string s = std::format(<span class="string">&quot;Hello CppCon &#123;&#125;!&quot;</span>, <span class="number">2019</span>);</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<h4 id="å¢åŠ æ•°å­¦å¸¸é‡"><a class="header-anchor" href="#å¢åŠ æ•°å­¦å¸¸é‡">ğŸŒ³</a>å¢åŠ æ•°å­¦å¸¸é‡</h4>
<p>å†ä¹Ÿä¸ç”¨ä¸º M_PI å‘æ„å•¦</p>
<ul>
<li>å¤´æ–‡ä»¶</li>
<li>åŒ…å« e, log2e, log10e pi, inv_pi, inv_sqrt pi ln2, ln10 sqrt2, sqrt3, inv_sqrt3 egamma</li>
</ul>
<h4 id="std-source-location"><a class="header-anchor" href="#std-source-location">ğŸŒ³</a>std::source_location</h4>
<p>ç”¨äºè·å–ä»£ç ä½ç½®, å¯¹äºæ—¥å¿—å’Œé”™è¯¯ä¿¡æ¯å°¤å…¶æœ‰ç”¨</p>
<h4 id="nodiscard-reason"><a class="header-anchor" href="#nodiscard-reason">ğŸŒ³</a>[[nodiscard(reason)]]</h4>
<p>è¡¨æ˜è¿”å›å€¼ä¸å¯æŠ›å¼ƒ, åŠ å…¥ç†ç”±çš„æ”¯æŒ</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">[[<span class="built_in">nodiscard</span>(<span class="string">&quot;Ignoring the return value will result in memory leaks.&quot;</span>)]] </span><br><span class="line"><span class="function"><span class="type">void</span>* <span class="title">GetData</span><span class="params">()</span> </span>&#123; <span class="comment">/* ... */</span> &#125;</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>
<h4 id="ä½è¿ç®—"><a class="header-anchor" href="#ä½è¿ç®—">ğŸŒ³</a>ä½è¿ç®—</h4>
<p>åŠ å…¥å¾ªç¯ç§»ä½, è®¡æ•°0å’Œ1ä½ç­‰åŠŸèƒ½</p>
<h4 id="ä¸€äº›å°æ›´æ–°"><a class="header-anchor" href="#ä¸€äº›å°æ›´æ–°">ğŸŒ³</a>ä¸€äº›å°æ›´æ–°</h4>
<ul>
<li>å­—ç¬¦ä¸²æ”¯æŒ starts_with, ends_with</li>
<li>map æ”¯æŒ contains æŸ¥è¯¢æ˜¯å¦å­˜åœ¨æŸä¸ªé”®</li>
<li>list å’Œ forward list çš„ remove, remove_if å’Œ unique æ“ä½œè¿”å› size_type è¡¨æ˜åˆ é™¤ä¸ªæ•°</li>
<li>å¢åŠ  shift_left, shift_right</li>
<li><code>midpoint</code> è®¡ç®—ä¸­ä½æ•°, å¯é¿å…æº¢å‡º</li>
<li><code>lerp</code> çº¿æ€§æ’å€¼ <code>lerp( float a, float b, float t )</code> è¿”å› [å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-SIYwBQJu-1628786141278)(<a href="https://www.zhihu.com/equation?tex=a+%2B+t(b-a)">https://www.zhihu.com/equation?tex=a+%2B+t(b-a)</a>])</li>
<li>æ–°çš„å‘é‡åŒ–ç­–ç•¥ <code>unsequenced_policy(execution::unseq)</code></li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">std::string str = <span class="string">&quot;Hello world!&quot;</span>; </span><br><span class="line"><span class="type">bool</span> b = str.<span class="built_in">starts_with</span>(<span class="string">&quot;Hello&quot;</span>); <span class="comment">// starts_with, ends_with </span></span><br><span class="line">std::map myMap&#123; std::pair&#123;<span class="number">1</span>, <span class="string">&quot;one&quot;</span>s&#125;, &#123;<span class="number">2</span>, <span class="string">&quot;two&quot;</span>s&#125;, &#123;<span class="number">3</span>, <span class="string">&quot;three&quot;</span>s&#125; &#125;; </span><br><span class="line"><span class="type">bool</span> result = myMap.<span class="built_in">contains</span>(<span class="number">2</span>); <span class="comment">// contains, å†ä¹Ÿä¸ç”¨  .find() == .end() äº†</span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>
<p>ä¸“æ ç›®å½•</p>
<h4 id="ç›®å½•"><a class="header-anchor" href="#ç›®å½•">ğŸŒ³</a>ç›®å½•</h4>
<ol>
<li><a href="#t0">æ–‡ç« ç›®å½•</a></li>
<li><a href="#t1">C++ 11æ˜¯ä»€ä¹ˆï¼ŒC++ 11æ ‡å‡†çš„ç”±æ¥</a></li>
<li><a href="#t2">C++ autoç±»å‹æ¨å¯¼å®Œå…¨æ”»ç•¥</a></li>
<li>
<ol>
<li><a href="#t3">auto ç±»å‹æ¨å¯¼çš„è¯­æ³•å’Œè§„åˆ™</a></li>
<li><a href="#t4">auto çš„é«˜çº§ç”¨æ³•</a></li>
<li><a href="#t5">auto çš„é™åˆ¶</a></li>
<li><a href="#t6">auto çš„åº”ç”¨</a></li>
</ol>
</li>
<li><a href="#t7">C++ decltypeç±»å‹æ¨å¯¼å®Œå…¨æ”»ç•¥</a></li>
<li>
<ol>
<li><a href="#t8">decltype æ¨å¯¼è§„åˆ™</a></li>
<li><a href="#t9">decltype çš„å®é™…åº”ç”¨</a></li>
</ol>
</li>
<li><a href="#t10">æ±‡æ€»autoå’Œdecltypeçš„åŒºåˆ«</a></li>
<li>
<ol>
<li><a href="#t11">è¯­æ³•æ ¼å¼çš„åŒºåˆ«</a></li>
<li><a href="#t12">å¯¹ cv é™å®šç¬¦çš„å¤„ç†</a></li>
<li><a href="#t13">å¯¹å¼•ç”¨çš„å¤„ç†</a></li>
<li><a href="#t14">æ€»ç»“</a></li>
</ol>
</li>
<li><a href="#t15">C++è¿”å›å€¼ç±»å‹åç½®ï¼ˆè·Ÿè¸ªè¿”å›å€¼ç±»å‹ï¼‰</a></li>
<li><a href="#t16">C++11å¯¹æ¨¡æ¿å®ä¾‹åŒ–ä¸­è¿ç»­å³å°–æ‹¬å·&gt;&gt;çš„æ”¹è¿›</a></li>
<li><a href="#t17">C++11ä½¿ç”¨usingå®šä¹‰åˆ«åï¼ˆæ›¿ä»£typedefï¼‰</a></li>
<li><a href="#t18">C++11æ”¯æŒå‡½æ•°æ¨¡æ¿çš„é»˜è®¤æ¨¡æ¿å‚æ•°</a></li>
<li><a href="#t19">C++11åœ¨å‡½æ•°æ¨¡æ¿å’Œç±»æ¨¡æ¿ä¸­ä½¿ç”¨å¯å˜å‚æ•°</a></li>
<li>
<ol>
<li><a href="#t20">å¯å˜å‚æ•°æ¨¡æ¿</a></li>
</ol>
</li>
<li><a href="#t21">C++11 tupleå…ƒç»„è¯¦è§£</a></li>
<li>
<ol>
<li><a href="#t22">tupleå¯¹è±¡çš„åˆ›å»º</a></li>
</ol>
</li>
</ol>
<pre><code>2.  [tupleå¸¸ç”¨å‡½æ•°](#t23)
</code></pre>
<ol start="17">
<li><a href="#t24">C++11åˆ—è¡¨åˆå§‹åŒ–ï¼ˆç»Ÿä¸€äº†åˆå§‹åŒ–æ–¹å¼ï¼‰</a></li>
<li>
<ol>
<li><a href="#t25">ç»Ÿä¸€çš„åˆå§‹åŒ–</a></li>
</ol>
</li>
<li><a href="#t26">C++11 lambdaåŒ¿åå‡½æ•°ç”¨æ³•è¯¦è§£</a></li>
<li>
<ol>
<li><a href="#t27">lambdaåŒ¿åå‡½æ•°çš„å®šä¹‰</a></li>
</ol>
</li>
<li><a href="#t28">C++11éå—é™è”åˆä½“ï¼ˆunionï¼‰</a></li>
<li>
<ol>
<li><a href="#t29">éå—é™è”åˆä½“çš„èµ‹å€¼æ³¨æ„äº‹é¡¹</a></li>
</ol>
</li>
</ol>
<pre><code>2.  [éå—é™è”åˆä½“çš„åŒ¿åå£°æ˜å’Œâ€œæšä¸¾å¼ç±»â€](#t30)
</code></pre>
<ol start="23">
<li><a href="#t31">C++11 forå¾ªç¯ï¼ˆåŸºäºèŒƒå›´çš„å¾ªç¯ï¼‰è¯¦è§£</a></li>
<li><a href="#t32">C++11 forå¾ªç¯ä½¿ç”¨æ³¨æ„äº‹é¡¹</a></li>
<li><a href="#t33">C++11 constexprï¼šéªŒè¯æ˜¯å¦ä¸ºå¸¸é‡è¡¨è¾¾å¼ï¼ˆé•¿ç¯‡ç¥æ–‡ï¼‰</a></li>
<li>
<ol>
<li><a href="#t34">constexprä¿®é¥°æ™®é€šå˜é‡</a></li>
</ol>
</li>
</ol>
<pre><code>2.  [constexprä¿®é¥°å‡½æ•°](#t35)
3.  [constexprä¿®é¥°ç±»çš„æ„é€ å‡½æ•°](#t36)
4.  [constexprä¿®é¥°æ¨¡æ¿å‡½æ•°](#t37)
</code></pre>
<ol start="27">
<li><a href="#t38">C++11 constexprå’Œconstçš„åŒºåˆ«</a></li>
<li><a href="#t39">C++11 long longè¶…é•¿æ•´å½¢è¯¦è§£</a></li>
<li><a href="#t40">C++11å³å€¼å¼•ç”¨ï¼ˆä¸€çœ‹å³æ‡‚ï¼‰</a></li>
<li>
<ol>
<li><a href="#t41">C++å·¦å€¼å’Œå³å€¼</a></li>
</ol>
</li>
</ol>
<pre><code>2.  [C++å³å€¼å¼•ç”¨](#t42)
</code></pre>
<ol start="31">
<li><a href="#t43">C++11ç§»åŠ¨æ„é€ å‡½æ•°çš„åŠŸèƒ½å’Œç”¨æ³•</a></li>
<li>
<ol>
<li><a href="#t44">C++11ç§»åŠ¨è¯­ä¹‰æ˜¯ä»€ä¹ˆ</a></li>
</ol>
</li>
</ol>
<pre><code>2.  [C++ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆç§»åŠ¨è¯­ä¹‰çš„å…·ä½“å®ç°ï¼‰](#t45)
</code></pre>
<ol start="33">
<li><a href="#t46">C++11 move()å‡½æ•°ï¼šå°†å·¦å€¼å¼ºåˆ¶è½¬æ¢ä¸ºå³å€¼</a></li>
<li><a href="#t47">C++11å¼•ç”¨é™å®šç¬¦çš„ç”¨æ³•</a></li>
<li>
<ol>
<li><a href="#t48">constå’Œå¼•ç”¨é™å®šç¬¦</a></li>
</ol>
</li>
<li><a href="#t49">C++11å®Œç¾è½¬å‘åŠå…¶å®ç°</a></li>
<li><a href="#t50">C++11 nullptrï¼šåˆå§‹åŒ–ç©ºæŒ‡é’ˆ</a></li>
<li><a href="#t51">C++11 shared_ptræ™ºèƒ½æŒ‡é’ˆï¼ˆè¶…çº§è¯¦ç»†ï¼‰</a></li>
<li>
<ol>
<li><a href="#t52">C++11 shared_ptræ™ºèƒ½æŒ‡é’ˆ</a></li>
</ol>
</li>
<li><a href="#t53">C++11 unique_ptræ™ºèƒ½æŒ‡é’ˆ</a></li>
<li>
<ol>
<li><a href="#t54">unique_ptræ™ºèƒ½æŒ‡é’ˆçš„åˆ›å»º</a></li>
</ol>
</li>
</ol>
<pre><code>2.  [unique\_ptræ¨¡æ¿ç±»æä¾›çš„æˆå‘˜æ–¹æ³•](#t55)
</code></pre>
<ol start="42">
<li><a href="#t56">C++11 weak_ptræ™ºèƒ½æŒ‡é’ˆ</a></li>
<li>
<ol>
<li><a href="#t57">C++11 weak_ptræ™ºèƒ½æŒ‡é’ˆ</a></li>
</ol>
</li>
<li><a href="#t58">C++14 æ–°ç‰¹æ€§æ€»ç»“</a></li>
<li><a href="#t59">C++17æ–°ç‰¹æ€§æ€»ç»“</a></li>
<li>
<ol>
<li><a href="#t60">std::optional</a></li>
</ol>
</li>
<li><a href="#t61">C++20 æ–°å¢ç‰¹æ€§æ€»ç»“</a></li>
<li>
<ol>
<li><a href="#t62">æ–°å¢å…³é”®å­—(keywords)</a></li>
</ol>
</li>
</ol>
<pre><code>2.  [æ–°å¢æ ‡è¯†ç¬¦(Identifies)](#t63)
3.  [æ¨¡å—(Modules)](#t64)
4.  1.  [ä¼˜ç‚¹](#t65)
    2.  [åˆ›å»ºæ¨¡å—](#t66)
    3.  [å¼•ç”¨æ¨¡å—](#t67)
    4.  [import å¤´æ–‡ä»¶](#t68)
5.  [Ranges](#t69)
6.  1.  [ä¾‹å­](#t70)
7.  [åç¨‹(Coroutines)](#t71)
8.  1.  [ä»€ä¹ˆæ˜¯åç¨‹](#t72)
    2.  [ä¾‹å­(VC++)](#t73)
9.  [Concepts](#t74)
10.  1.  [å¦‚ä½•å®šä¹‰](#t75)
    2.  [ä½¿ç”¨](#t76)
    3.  [ä¾‹å­](#t77)
11.  [Lambda è¡¨è¾¾å¼çš„æ›´æ–°](#t78)
12.  1.  [\[=, this\] éœ€è¦æ˜¾å¼æ•è·thiså˜é‡](#t79)
    2.  [æ¨¡æ¿å½¢å¼çš„ Lambda è¡¨è¾¾å¼](#t80)
    3.  [Lambda è¡¨è¾¾å¼æ•è·æ”¯æŒæ‰“åŒ…å±•å¼€(Pack Expansion)](#t81)
13.  [å¸¸é‡è¡¨è¾¾å¼(constexpr) çš„æ›´æ–°](#t82)
14.  1.  [constexpr string &amp; vector](#t83)
15.  [åŸå­(Atomic)æ™ºèƒ½æŒ‡é’ˆ](#t84)
16.  1.  [ä¾‹å­](#t85)
17.  [è‡ªåŠ¨åˆæµ(Joining), å¯ä¸­æ–­(Cancellable) çš„çº¿ç¨‹](#t86)
18.  1.  [ä¾‹å­](#t87)
19.  [C++20 åŒæ­¥(Synchronization)åº“](#t88)
20.  1.  [std::atomic\_ref](#t89)
21.  [å…¶ä»–æ›´æ–°](#t90)
22.  1.  [æŒ‡å®šåˆå§‹åŒ–(Designated Initializers)](#t91)
    2.  [èˆªå¤©é£æœºæ“ä½œç¬¦ &lt;=&gt;](#t92)
    3.  [èŒƒå›´ for å¾ªç¯è¯­å¥æ”¯æŒåˆå§‹åŒ–è¯­å¥](#t93)
    4.  [éç±»å‹æ¨¡æ¿å½¢å‚æ”¯æŒå­—ç¬¦ä¸²](#t94)
    5.  [\[\[likely\]\], \[\[unlikely\]\]](#t95)
    6.  [æ—¥å†(Calendar)å’Œæ—¶åŒº(Timezone)åŠŸèƒ½](#t96)
    7.  [std::span](#t97)
    8.  [ç‰¹æ€§æµ‹è¯•å®](#t98)
    9.  [consteval å‡½æ•°](#t100)
    10.  [constinit](#t101)
    11.  [ç”¨ using å¼•ç”¨ enum ç±»å‹](#t102)
    12.  [æ ¼å¼åŒ–åº“(std::format)](#t103)
    13.  [å¢åŠ æ•°å­¦å¸¸é‡](#t104)
    14.  [std::source\_location](#t105)
    15.  [\[\[nodiscard(reason)\]\]](#t106)
    16.  [ä½è¿ç®—](#t107)
    17.  [ä¸€äº›å°æ›´æ–°](#t108)
</code></pre>
]]></content>
      <categories>
        <category>è®¡ç®—æœºç§‘å­¦</category>
      </categories>
  </entry>
  <entry>
    <title>Build Blog</title>
    <url>/2018/11/18/build-blog/</url>
    <content><![CDATA[<p>ä»Šå¤©èŠ±äº†ä¸€å¤©çš„æ—¶é—´å»ºåšå®¢ å¿ƒå¾ˆç´¯ æ˜¨å¤©å°±å¼€å§‹ç ”ç©¶çš„äº† ä½†æ˜¯æ˜¨å¤©ä¸€ç›´å¡åœ¨ä¸€ä¸ªæœ‰ js bugçš„ hexo ä¸»é¢˜ä¸Šé¢ <a href="https://github.com/Huxpro/huxpro.github.io">Hux</a> å„ç§ç•™ issueæ±‚æ•™ æ²¡ååº” ç ”ç©¶ä¸ä¸‹æ¥ æºœäº†æºœäº†</p>
<p>ä»Šå¤©æ—©ä¸Šç¨å¾®çœ‹äº†ä¸€ä¸‹æ˜¨å¤©çš„é—®é¢˜ è¿˜æ˜¯ä¸è¡Œ å†³å®šæ”¾å¼ƒ è½¬æŠ•å…¶ä»–æ¯”å¦‚ <a href="ttps://github.com/YenYuHsuan/hexo-theme-beantech.git">BeanTech</a> ç›´æ¥å¯ç”¨ ä½†è¿˜æ˜¯å¿ƒç´¯</p>
<p>åæ¥æˆ‘å°±å¼€å§‹æ”¹ä¸œè¥¿å•¦ å„ç§ç½‘ç«™å ä½œè€…ä¹±ä¸ƒå…«ç³Ÿçš„é…ç½® é‡åˆ°æ”¹ä¸»é¢˜ è¿™ä¸ªå¡äº†å¥½ä¹… æœ€åè¿˜æ˜¯æ”¾å¼ƒ æ˜¯ä»€ä¹ˆæ•…äº‹å‘¢ ä¸”å¬æˆ‘å¨“å¨“é“æ¥ å“ ä½†æ˜¯æˆ‘ç°åœ¨å¥½é¥¿ ä¸€å¤©åªåƒäº†æ—©é¤ åˆ°ç°åœ¨ å·®ä¸å¤šæ™šä¸Šå…«ç‚¹äº†â€¦ æˆ‘çš„å¤©æŠ˜è…¾äº†ä¸€å¤©</p>
<p>å¥½äº† æ˜¯ä»€ä¹ˆå‘¢ å°±æ˜¯ç”¨ nginx å»ºä¸ªæ–‡ä»¶æœåŠ¡å™¨ ç”¨æ¥ç»™ markdownå­˜æ”¾ resource å›¾ç‰‡ä¹‹ç±»çš„å¼•ç”¨ ç„¶åç»™ä»–å»ºäº†ä¸ªç›®å½• ä½œä¸ºè·³è½¬ä¸‹è½½ ç„¶å å°±æ˜¯ php å˜é‡å . è·Ÿ _ çš„è½¬æ¢ æ­£åˆ™è¡¨è¾¾å¼ ä¸€åˆ‡å‡†å¤‡å°±ç»ª ç„¶è€Œ å¡«ä¸Šä¸»é¢˜èƒŒæ™¯çš„è·å– ip å å‘ç°å¹¶ä¸èƒ½è·å–å±•ç°å‡ºæ¥ ä¸æ‡‚ js æ‰€ä»¥ä¸çŸ¥é“ä¸ºä»€ä¹ˆ å“ å€’ä¸å¦‚è¯´ä¸æƒ³å»çœ‹ js ä»£ç å§ ç„¶åç›´æ¥æ”¾å¼ƒ æ–‡ä»¶æœåŠ¡å™¨ ç›´æ¥æŠŠè‡ªå·±çš„èµ„æºæ”¾åœ¨å·¥ç¨‹é‡Œé¢äº† è¿™æ · åˆ«äººéƒ½æ‹¿åˆ°æˆ‘çš„ç…§ç‰‡äº†å•Šå•Šå•Šå•Š å¿ƒç´¯ ä¸è¿‡å…ˆæš‚æ—¶è¿™æ ·å§ æ²¡å¿ƒæƒ…æ£é¼“äº†</p>
<p>å¿ƒç´¯äºŒ æ¥ç€ å‘ç° å›¾ç‰‡æ˜¾ç¤ºä¸ç¾è§‚ ç„¶ååˆå„ç§æˆªå›¾ ç›´åˆ°ç¾è§‚ä¸ºæ­¢â€¦<br>
å¿ƒç´¯ä¸‰ æ‰¾ js ä»£ç é‡Œé¢ Beantech å†™æ­»çš„ç½‘å€ é…ç½®ä»€ä¹ˆçš„ ç„¶å æ”¹ ä¹Ÿç´¯ æˆ‘æ˜¯å¯¹å‰ç«¯ä»£ç éå¸¸æŠ—æ‹’ çœŸçš„ å¤ª~~~~~è‡ƒè‚¿äº†<br>
å¿ƒç´¯å›› _config.ymlé‡Œé¢å…³äºä½œè€…ä»‹ç»çš„å­—ç¬¦ä¸²å˜é‡<code>sidebar-about-description</code> ä¸­é—´åŠ äº†<code>&lt;br&gt;</code> å¹¶æ²¡æœ‰æ¢è¡Œ ç„¶åå¯¹æ¯” BeanTech çš„å‚è€ƒæº Hux çš„ä»£ç  å‘ç°å¹¶ä¸ä¸€æ ·å•Š ç„¶å <a href="https://github.com/Huxpro/huxpro.github.io">Hux</a> çš„èƒ½æ¢è¡Œ BeanTech çš„ä¸è¡Œ</p>
<p>Hux çš„æºæ–‡ä»¶short-about.ejs</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;p&gt;&lt;%= config[<span class="string">&#x27;sidebar-about-description&#x27;</span>] %&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure>
<p>Hux çš„æºæ–‡ä»¶short-about.html</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;site.sidebar-about-description&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ˜¯çš„ æˆ‘æœ‰è¯•è¿‡æŠŠ Hux çš„æ‹·è¿‡æ¥ æ˜æ˜¾ä¸è¡Œ å£°æ˜ç±»çš„æ–¹å¼ è¯»å–é…ç½®çš„æ–¹å¼ ä¸ä¸€æ ·å§ æ„Ÿè§‰ å“ åæ­£ä¸æ‡‚ åæ­£å¾ˆçƒ¦ å¥½å§ ä½†æˆ‘è¿˜æ˜¯ç¨å¾®æŸ¥äº†ä¸€ä¸‹ js çš„è¯­æ³• æƒ³çœ‹çœ‹ æœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•èƒ½å¤Ÿè®©<code>&lt;%= %&gt;</code> å®ƒè¯»åˆ°çš„å­—ç¬¦ä¸² èƒ½å¤Ÿè¯†åˆ«è¿™ä¸ªæ¢è¡Œç¬¦ ç„¶è€Œæ‰¾ä¸åˆ°å•Š  ç‚¸äº† æ”¾å¼ƒäº†<br>
æˆ‘ä¸è¡Œäº† æˆ‘å¤ªé¥¿äº† å†è§</p>
]]></content>
      <categories>
        <category>çäº‹</category>
      </categories>
      <tags>
        <tag>build blog</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo blog è¯¦ç»†æ•™ç¨‹</title>
    <url>/2018/12/21/Hexo-blog-detailed-tutorial/</url>
    <content><![CDATA[<h2 id="1-hexo-æ­å»º-blog-åŸºç¡€æ¦‚å¿µ"><a class="header-anchor" href="#1-hexo-æ­å»º-blog-åŸºç¡€æ¦‚å¿µ">ğŸŒ³</a>1. Hexo æ­å»º Blog åŸºç¡€æ¦‚å¿µ</h2>
<h3 id="1-1-å‘å¸ƒä»“åº“"><a class="header-anchor" href="#1-1-å‘å¸ƒä»“åº“">ğŸŒ³</a>1.1 å‘å¸ƒä»“åº“</h3>
<p><em><strong><code>å‘å¸ƒä»“åº“</code></strong></em> å°±æ˜¯æ—¥å¸¸ç¼–å†™æ–‡ç« ä»¥å, é€šè¿‡å‘½ä»¤ <code>hexo deploy</code> å‘å¸ƒå‡ºå»çš„ä»“åº“åœ°å€, å…·ä½“é…ç½®åœ¨ <code>_config.yml</code> æ–‡ä»¶ä¸­</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="string">git</span></span><br><span class="line">    <span class="attr">repository:</span> <span class="string">git@ip:repo_name.git</span></span><br><span class="line">    <span class="attr">branch:</span> <span class="string">branch_name</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>ç”±äºä½œè€…æœ¬èº«æœ‰äº‘æœåŠ¡å™¨ å¹¶ä¸”è¿˜ä¹°äº†åŸŸå æ‰€ä»¥æˆ‘çš„å‘å¸ƒä»“åº“å°± å»ºåœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸­ å®é™…ä¸Šå„ä½å®¢å®˜ä¹Ÿå¯ä»¥æŠŠä»“åº“å»ºåœ¨<a href="https://gitee.com">gitee</a>çš„ç§æœ‰ä»“åº“ æˆ–è€… <a href="https://github.com">Github</a>ä¸Š</p>
<blockquote>
<p>æ³¨æ„ï¼šéƒ¨ç½²åœ¨<strong>gitee pages</strong>ä¸Šè¦æ­£ç¡®å¡«å†™<code>_config.yml</code>çš„<code>url</code>å’Œ<code>root</code>å‚æ•°</p>
</blockquote>
<ul>
<li>url: <a href="https://xn--eqro3o.gitee.io/blog">https://åå­—.gitee.io/blog</a></li>
<li>root: /blog</li>
</ul>
</li>
<li>
<p><em><strong><code>repo_name</code></strong></em> å°±æ˜¯ä»“åº“çš„åå­—äº† <em><strong><code>branch_name</code></strong></em> å°±æ˜¯ä»“åº“çš„åˆ†æ”¯å</p>
</li>
<li>
<p>å…³äºè¿™ä¸ªå»ºä»“åº“ è·Ÿ ä»“åº“çš„ç®¡ç†ä½ å¯èƒ½éœ€è¦ä¸€äº› <em><strong>git</strong></em> çš„ä½¿ç”¨çŸ¥è¯† å…·ä½“å„ä½å®¢å®˜è‡ªè¡Œå­¦ä¹  è¿™é‡Œ æˆ‘å¯ä»¥åˆ—ä¸¾ä¸€äº›å¯èƒ½ä¼šä½¿ç”¨åˆ°çš„å‘½ä»¤</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git init --bare repo_name.git</span><br><span class="line">git checkout --track origin branch_name</span><br><span class="line">git pull</span><br><span class="line">git branch -a</span><br><span class="line">git clone repo_name.git</span><br></pre></td></tr></table></figure>
<ul>
<li>è¿™ä¸ªä»“åº“æ˜¯<code>hexo deploy</code> å‘½ä»¤ç”Ÿæˆçš„ä¸€ä¸ªé™æ€ç½‘é¡µçš„ä»“åº“ æ‰€ä»¥ä½œè€…åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸­ git clone äº†è¿™ä¸ªä»“åº“åˆ°ä¸€ä¸ªè·¯å¾„ä¸Š ç„¶åä½¿ç”¨Nginx é…ç½®äº†è¯¥è·¯å¾„çš„ç«™ç‚¹ è¿™æ ·å°±å¯ä»¥è®¿é—®åˆ°è¿™ä¸ªå‘å¸ƒçš„ç½‘ç«™äº†</li>
<li>å¦‚æœä½ æƒ³è¦ç”¨è‡ªå·±æ‹¥æœ‰çš„åŸŸåå‘å¸ƒç½‘ç«™ä¸€èˆ¬ç”¨è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒæ–¹ä¾¿ å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨github æä¾› <code>xxx.github.io</code> è¿™ç§æ–¹å¼æ­å»ºå‘å¸ƒçš„ä»“åº“ ä¸è¿‡ç”±äºä½œè€…æœ¬èº«æ²¡æœ‰ç”¨è¿‡ è¿™é‡Œçš„è¯¦ç»†æ­¥éª¤è¯·å®¢å®˜è‡ªè¡ŒGoogleå­¦ä¹ </li>
<li>è¿™é‡Œæˆ‘è´´ä¸€ä¸‹Nginx çš„é…ç½®å§ è¿™é‡Œåªæ˜¯ç»™å®¢å®˜çœ‹çœ‹é…ç½®çš„ä¾‹å­ ç”±äºæˆ‘é…ç½®é‡Œé¢è¿˜æœ‰å¾ˆå¤šä¸œè¥¿åˆ å‡ æ‰€ä»¥ ç›´æ¥æ‹·è´å¯èƒ½æ— æ³•ä½¿ç”¨ è¯·å®¢å®˜Googleå­¦ä¹ ä»¥åè‡ªè¡Œé…ç½® ä¸è¿‡åº”è¯¥ä¹Ÿå·®ä¸å¤šçš„äº†</li>
</ul>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">user</span> nginx;</span><br><span class="line"><span class="attribute">error_log</span> /var/log/nginx/<span class="literal">error</span>.log;</span><br><span class="line"><span class="attribute">pid</span> /run/nginx.pid;</span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="comment"># åšå®¢ç½‘ç«™</span></span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">80</span> default_server;</span><br><span class="line">        <span class="attribute">listen</span>       [::]:<span class="number">80</span> default_server;</span><br><span class="line">        <span class="attribute">server_name</span>  _;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">root</span>         /home/xxx/;</span><br><span class="line">        <span class="attribute">include</span> /etc/nginx/default.d/<span class="regexp">*.conf</span>;</span><br><span class="line"></span><br><span class="line">        <span class="section">location</span> / &#123;</span><br><span class="line">                <span class="attribute">index</span>  index.php index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-2-å†™ä½œä»“åº“"><a class="header-anchor" href="#1-2-å†™ä½œä»“åº“">ğŸŒ³</a>1.2 å†™ä½œä»“åº“</h3>
<p>è¯¦ç»†å„ä½å®¢å®˜ä¹Ÿæ˜¯çœ‹è¿‡ <a href="https://hexo.io">hexo</a>çš„å®˜ç½‘è¿‡æ¥çš„å§ å¦‚æœä¸æ˜¯ä¹Ÿå…ˆè¯·ä½ ä»¬çœ‹çœ‹å®˜ç½‘çš„ä¸€äº›ä»‹ç»æ¯”å¦‚:</p>
<ul>
<li>
<p>ç¯å¢ƒé…ç½®: npm ä¸‹ä¹‹ç±»çš„ å“ ç®—äº† æˆ‘è¿˜æ˜¯ä¸å¿å¿ƒ è®©ä½ ä»¬è·‘æ¥è·‘å»çš„ æ‰€ä»¥è´´ä¸€ä¸‹å‡ºæ¥å§ å°±æ˜¯å®‰è£…ä¸€ä¸‹ <em><strong><a href="http://nodejs.cn/download/">Node.js</a></strong></em> å°±å¥½äº† è‡³äº node.js è·Ÿ npm æ˜¯ä»€ä¹ˆå…³ç³»è¿™ä¸ªå¯ä»¥äº†è§£ä¸€ä¸‹å»–é›ªå³°è€å¸ˆçš„è¿™ç¯‡ <em><strong><a href="https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000/00143450141843488beddae2a1044cab5acb5125baf0882000">æ–‡ç« </a></strong></em></p>
</li>
<li>
<p>åˆå§‹æ­å»ºçš„å‘½ä»¤ ç›¸ä¿¡å®¢å®˜éƒ½çœ‹äº† å®˜ç½‘çš„è¿™ä¸ªå‘½ä»¤ è¿™ä¸ªå‘½ä»¤å°±æ˜¯ åˆå§‹åŒ–åšå®¢ è¿™ä¸ªä½œè€…ç§°ä¹‹ä¸º <em><strong><code>å†™ä½œä»“åº“</code></strong></em></p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">hexo init blog</span><br><span class="line">cd blog</span><br><span class="line">npm install</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç”±äºåšå®¢éƒ½ä¼šæœ‰ä¸»é¢˜ æ¯ä¸ªä¸»é¢˜çš„å¸ƒç½® éƒ½ä¸ä¸€æ · ä»£ç ä¸ä¸€æ · æ‰€ä»¥ å½“å®¢å®˜æ·»åŠ è¯„è®ºåŠŸèƒ½ ç«™é•¿ç»Ÿè®¡åŠŸèƒ½ æ·»åŠ çš„ js ä»£ç çš„åœ°æ–¹ä¹Ÿä¸ä¸€æ ·</p>
</li>
<li>
<p>ä½œè€…ä½¿ç”¨çš„æ˜¯ <em><strong><a href="https://github.com/YenYuHsuan/hexo-theme-beantech">BeanTech</a></strong></em> çš„ä¸»é¢˜</p>
</li>
<li>
<p>æ‰€ä»¥ ä½œè€…æ˜¯ fork äº† BeanTech çš„ä¸»é¢˜ç„¶å åœ¨è¿™ä¸ªä»“åº“é‡Œè¿›è¡Œ å†™ä½œçš„ æ‰€ä»¥è¿™å°±æ˜¯ä½œè€…æ‰€è¯´çš„ å†™ä½œä»“åº“</p>
</li>
<li>
<p>åœ¨è¿™ä¸ªä»“åº“ä¸­ æ—¥å¸¸ä¸»è¦æ‰§è¡Œçš„å‘½ä»¤å¦‚ä¸‹:</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo new article_name</span><br><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ³¨æ„è¿™ä¸ªä»“åº“ä¿å­˜ä»€ä¹ˆæ–‡ä»¶å¿½ç•¥ä»€ä¹ˆæ–‡ä»¶ è¿™ä¸€ç‚¹å¾ˆé‡è¦ å¦åˆ™ä¼šå‡ºç°å¾ˆå¥‡æ€ªçš„ç°è±¡:</p>
<ul>
<li>
<p>a. ç°è±¡: æ¯”å¦‚è¯´ ä½ æœ‰ä¸¤å° checkout äº†è¿™ä¸ªä»“åº“çš„ è®¾å¤‡ ä½ æŠŠ å…¶ä¸­ä¸€å°A ä»“åº“ç›®å½• <code>.deploy_git</code> åŠå…¶é‡Œé¢çš„æ–‡ä»¶éƒ½æäº¤äº† åœ¨å¦ä¸€å°è®¾å¤‡B æ‹‰å–äº†A è®¾å¤‡æäº¤çš„ <code>.deploy_git</code>,å½“åœ¨B è®¾å¤‡ æ‰§è¡Œ<code>hexo deploy</code> æ—¶ ä¼šæ”¹å˜å½“å‰å†™ä½œä»“åº“çš„ <code>.git</code> ç›®å½•ä¸‹çš„ <code>config</code> æ–‡ä»¶</p>
</li>
<li>
<p>b. æ‰€ä»¥ é‚£ä¹ˆå†™ä½œä»“åº“ç©¶ç«Ÿåº”è¯¥è¿½è¸ªä»€ä¹ˆæ–‡ä»¶ è·Ÿ å¿½ç•¥ä»€ä¹ˆæ–‡ä»¶å‘¢ ä½œè€…ä¸ºä½  åˆ—ä¸¾å¦‚ä¸‹:</p>
<ul>
<li>
<p>è·Ÿè¸ªæ–‡ä»¶:</p>
  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">scaffolds/</span><br><span class="line">source/</span><br><span class="line">themes/</span><br><span class="line">_config.yml</span><br><span class="line">.gitignore</span><br><span class="line">package.json</span><br><span class="line">LISCEN</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å¿½ç•¥æ–‡ä»¶ <code>.gitignore</code>:</p>
  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node_modules/</span><br><span class="line">package-lock.json</span><br><span class="line">public/</span><br><span class="line">.deploy_git/</span><br><span class="line">LICENSE</span><br><span class="line">db.json</span><br><span class="line">.deploy_git</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="2-blog-å°åŠŸèƒ½"><a class="header-anchor" href="#2-blog-å°åŠŸèƒ½">ğŸŒ³</a>2. blog å°åŠŸèƒ½</h2>
<h3 id="2-1-å¢åŠ æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½"><a class="header-anchor" href="#2-1-å¢åŠ æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½">ğŸŒ³</a>2.1 å¢åŠ æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½</h3>
<ol>
<li>é¦–å…ˆä½ éœ€è¦åˆ° <em><strong><a href="https://www.livere.com/login_form">æ¥å¿…åŠ›</a></strong></em> æ³¨å†Œè´¦å· å¾—åˆ°æ¥å¿…åŠ›çš„ è´¦å·id</li>
<li>æ¥å¿…åŠ›è¯„è®º SNS å¯ä»¥é€‰æ‹©QQ å¾®åš å¾®ä¿¡ Github Facebook æ³¨å†Œä»¥åè¿›å…¥è®¾ç½®ç•Œé¢å°±èƒ½çœ‹åˆ°çš„äº†</li>
<li>ä¸ºBeanTech æ·»åŠ  æ¥å¿…åŠ› è¯„è®º ä»£ç 
<ul>
<li>
<p>themes/beantech/layout/post.ejs</p>
  <figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;article&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">            <span class="comment">&lt;!-- Post Container --&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">                col-lg-8 col-lg-offset-2</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">                col-md-10 col-md-offset-1</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">                post-container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">                &lt;%- page.content %&gt;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">                &lt;% if(config[&#x27;livere_uid&#x27;]) &#123; %&gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="comment">&lt;!-- disqus è¯„è®ºæ¡† start --&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;comment&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;lv-container&quot;</span> <span class="attr">data-id</span>=<span class="string">&quot;city&quot;</span> <span class="attr">data-uid</span>=<span class="string">&quot;&lt;%= config[&#x27;livere_uid&#x27;] %&gt;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="comment">&lt;!-- disqus è¯„è®ºæ¡† end --&gt;</span></span></span><br><span class="line"><span class="language-xml">                &lt;% &#125; %&gt;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/article&gt;</span><br><span class="line"></span><br><span class="line">&lt;% <span class="keyword">if</span>(config[<span class="string">&#x27;livere_uid&#x27;</span>]) &#123; %&gt;</span><br><span class="line">    &lt;!-- æ¥å¿…åŠ›<span class="title class_">City</span>ç‰ˆå…¬å…±<span class="variable constant_">JS</span>ä»£ç  <span class="title function_">start</span> (ä¸€ä¸ªç½‘é¡µåªéœ€æ’å…¥ä¸€æ¬¡) --&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    (<span class="keyword">function</span>(<span class="params">d, s</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> j, e = d.<span class="title function_">getElementsByTagName</span>(s)[<span class="number">0</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="title class_">LivereTower</span> === <span class="string">&#x27;function&#x27;</span>) &#123; <span class="keyword">return</span>; &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        j = d.<span class="title function_">createElement</span>(s);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        j.<span class="property">src</span> = <span class="string">&#x27;https://cdn-city.livere.com/js/embed.dist.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        j.<span class="property">async</span> = <span class="literal">true</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        e.<span class="property">parentNode</span>.<span class="title function_">insertBefore</span>(j, e);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)(<span class="variable language_">document</span>, <span class="string">&#x27;script&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">noscript</span>&gt;</span>ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScript<span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span></span><br><span class="line">    &lt;!-- æ¥å¿…åŠ›<span class="title class_">City</span>ç‰ˆ å…¬å…±<span class="variable constant_">JS</span>ä»£ç  end --&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>
<p>å°±æ˜¯æŠŠlivere_uid åé¢é‚£å‡ è¡Œä»£ç  è€ƒåˆ° post.ejs å¤§æ¦‚è¿™ä¸ªä½ç½®å°±å¯ä»¥äº† ä¸»è¦å‚è€ƒç€BeanTech ä¸»é¢˜çš„ disqus å¤šè¯´è¯„è®º ä»£ç  å°±å¥½äº†</p>
</li>
<li>
<p>themes/beantech/layout/page.ejs</p>
  <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- å¦‚æœå¼€å¯è¯„è®ºåŠŸèƒ½ --&gt;</span><br><span class="line">&lt;% <span class="keyword">if</span>(page.<span class="property">comments</span>) &#123; %&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;% <span class="keyword">if</span>(config[<span class="string">&#x27;livere_uid&#x27;</span>]) &#123; %&gt;</span><br><span class="line">        &lt;!-- disqus è¯„è®ºæ¡† start --&gt;</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;comment&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;lv-container&quot;</span> <span class="attr">data-id</span>=<span class="string">&quot;city&quot;</span> <span class="attr">data-uid</span>=<span class="string">&quot;&lt;%= config[&#x27;livere_uid&#x27;] %&gt;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        &lt;!-- disqus è¯„è®ºæ¡† end --&gt;</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line"></span><br><span class="line">    &lt;% <span class="keyword">if</span>(config[<span class="string">&#x27;livere_uid&#x27;</span>]) &#123; %&gt;</span><br><span class="line">        &lt;!-- æ¥å¿…åŠ›<span class="title class_">City</span>ç‰ˆå…¬å…±<span class="variable constant_">JS</span>ä»£ç  <span class="title function_">start</span> (ä¸€ä¸ªç½‘é¡µåªéœ€æ’å…¥ä¸€æ¬¡) --&gt;</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            (<span class="keyword">function</span>(<span class="params">d, s</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="keyword">var</span> j, e = d.<span class="title function_">getElementsByTagName</span>(s)[<span class="number">0</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="title class_">LivereTower</span> === <span class="string">&#x27;function&#x27;</span>) &#123; <span class="keyword">return</span>; &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                j = d.<span class="title function_">createElement</span>(s);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                j.<span class="property">src</span> = <span class="string">&#x27;https://cdn-city.livere.com/js/embed.dist.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                j.<span class="property">async</span> = <span class="literal">true</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                e.<span class="property">parentNode</span>.<span class="title function_">insertBefore</span>(j, e);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;)(<span class="variable language_">document</span>, <span class="string">&#x27;script&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">noscript</span>&gt;</span>ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScript<span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span></span><br><span class="line">        &lt;!-- æ¥å¿…åŠ›<span class="title class_">City</span>ç‰ˆ å…¬å…±<span class="variable constant_">JS</span>ä»£ç  end --&gt;</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h3 id="2-2-å¢åŠ éŸ³ä¹åŠŸèƒ½"><a class="header-anchor" href="#2-2-å¢åŠ éŸ³ä¹åŠŸèƒ½">ğŸŒ³</a>2.2 å¢åŠ éŸ³ä¹åŠŸèƒ½</h3>
<ul>
<li>
<p>ä¹Ÿæ˜¯ä¿®æ”¹post.ejs, page.ejsä¸¤ä¸ªæ–‡ä»¶ æ„Ÿè°¢ <em><strong><a href="https://github.com/metowolf/MetingJS">MetingJS</a></strong></em></p>
  <figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;!-- <span class="built_in">require</span> <span class="title class_">APlayer</span> --&gt;</span><br><span class="line">&lt;% <span class="keyword">if</span>(config[<span class="string">&#x27;metingjs&#x27;</span>]) &#123; %&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;aplayer&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">data-id</span>=<span class="string">&quot;&lt;%= config[&#x27;data-id&#x27;] %&gt;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">data-server</span>=<span class="string">&quot;&lt;%= config[&#x27;data-server&#x27;] %&gt;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">data-type</span>=<span class="string">&quot;&lt;%= config[&#x27;data-type&#x27;] %&gt;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">data-fixed</span>=<span class="string">&quot;&lt;%= config[&#x27;data-fixed&#x27;] %&gt;&quot;</span> &gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&lt;% &#125; %&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="2-3-å¢åŠ ç«™ç‚¹ç»Ÿè®¡åŠŸèƒ½"><a class="header-anchor" href="#2-3-å¢åŠ ç«™ç‚¹ç»Ÿè®¡åŠŸèƒ½">ğŸŒ³</a>2.3 å¢åŠ ç«™ç‚¹ç»Ÿè®¡åŠŸèƒ½</h3>
<ul>
<li><em><strong><a href="https://web.umeng.com/">cnzz</a></strong></em> æ³¨å†Œè´¦å· æ³¨å†Œä»¥åå°±æ‹¿åˆ°ä¸€ä¸²js ä»£ç  æŠŠå®ƒ æ‹·è´åˆ° footer.ejs æ–‡ä»¶ä¸­çš„ <code>&lt;footer&gt; &lt;/footer&gt;</code> å°±å¥½äº†</li>
<li>æœ‰äº›æµè§ˆå™¨å¯èƒ½çœ‹ä¸åˆ°æ•ˆæœ è¯·æ¢ä¸ªæµè§ˆå™¨è¯•è¯•</li>
</ul>
<h2 id="3-å…³äºå†™ä½œ"><a class="header-anchor" href="#3-å…³äºå†™ä½œ">ğŸŒ³</a>3. å…³äºå†™ä½œ</h2>
<p>ç”¨markdownå†™ä½œç”¨äºç”Ÿæˆç›®å½•çš„å­æ ‡é¢˜å¿…é¡»ä»&quot;<strong>##</strong>â€œå¼€å§‹, ä¸èƒ½ç”¨â€#&quot;, è¿™æ ·ä¼šå¯¼è‡´ç”Ÿæˆçš„ç›®å½•ä¸èƒ½è·³è½¬</p>
<h2 id="4-ååºhexo-åšå®¢çš„ä¸€äº›ä¼˜åŒ–å°è®°å½•"><a class="header-anchor" href="#4-ååºhexo-åšå®¢çš„ä¸€äº›ä¼˜åŒ–å°è®°å½•">ğŸŒ³</a>4. ååºhexo åšå®¢çš„ä¸€äº›ä¼˜åŒ–å°è®°å½•</h2>
<h3 id="hexo-asset-image-å¹¶ä¸”ä¿®æ”¹äº†ä¸€ç‚¹æºç ä»¥æ”¯æŒæœ¬åœ°-åœ¨çº¿é¢„è§ˆéƒ½æœ‰æ•ˆ"><a class="header-anchor" href="#hexo-asset-image-å¹¶ä¸”ä¿®æ”¹äº†ä¸€ç‚¹æºç ä»¥æ”¯æŒæœ¬åœ°-åœ¨çº¿é¢„è§ˆéƒ½æœ‰æ•ˆ">ğŸŒ³</a>hexo-asset-image å¹¶ä¸”ä¿®æ”¹äº†ä¸€ç‚¹æºç ä»¥æ”¯æŒæœ¬åœ°/åœ¨çº¿é¢„è§ˆéƒ½æœ‰æ•ˆ</h3>
<p><a href="https://andavid.github.io/2019/01/15/insert-local-image-in-hexo/">æœ¬åœ°/åœ¨çº¿é¢„è§ˆéƒ½æœ‰æ•ˆ</a></p>
<p><a href="https://www.hwpo.top/posts/d87f7e0c/index.html">Hexoæ’å…¥å›¾ç‰‡å¹¶è§£å†³å›¾ç‰‡çš„è·¯å¾„é—®é¢˜</a></p>
<h3 id="katex-å…¬å¼é—®é¢˜"><a class="header-anchor" href="#katex-å…¬å¼é—®é¢˜">ğŸŒ³</a>katex å…¬å¼é—®é¢˜</h3>
<p><a href="https://dora-cmon.github.io/posts/95c5c5d2/">Hexoä½¿ç”¨katexæ¸²æŸ“å…¬å¼</a></p>
<p><a href="https://nickxu.me/2022/04/17/Hexo-Butterfly-%E5%BB%BA%E7%AB%99%E6%8C%87%E5%8D%97%EF%BC%88%E5%85%AB%EF%BC%89%E4%BD%BF%E7%94%A8-KaTeX-%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F/">Hexo + Butterfly å»ºç«™æŒ‡å—ï¼ˆå…«ï¼‰ä½¿ç”¨ KaTeX æ•°å­¦å…¬å¼</a></p>
<p><a href="https://www.mycloudhub.top/posts/0.html#:~:text=Butterfly%E4%B8%BB%E9%A2%98%E6%94%AF%E6%8C%81Mathjax%E5%92%8CKaTex%E4%B8%A4%E7%A7%8D%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E%EF%BC%8C%E6%9C%AC%E6%96%87%E9%80%89%E6%8B%A9KaTex%E6%8F%92%E4%BB%B6%EF%BC%8C%E5%9B%A0%E4%B8%BA%20KaTeX%20%E6%9B%B4%E5%BF%AB%E6%9B%B4%E8%BD%BB%E9%87%8F%EF%BC%8C%E5%9B%A0%E6%AD%A4%E6%B2%A1%E6%9C%89%20MathJax%20%E7%9A%84%E5%8A%9F%E8%83%BD%E5%A4%9A%EF%BC%88%E6%AF%94%E5%A6%82%E5%8F%B3%E9%94%AE%E8%8F%9C%E5%8D%95%EF%BC%89%E3%80%82%20%E9%80%89%E6%8B%A9KaTex%20%E4%BD%A0%E4%B8%8D%E9%9C%80%E8%A6%81%E6%B7%BB%E5%8A%A0%20katex.min.js,%E7%9B%B8%E5%BA%94%E7%9A%84%E4%BD%A0%E9%9C%80%E8%A6%81%E5%8D%B8%E8%BD%BD%E4%BD%A0%E4%B9%8B%E5%89%8D%E7%9A%84%20hexo%20%E7%9A%84%20markdown%20%E6%B8%B2%E6%9F%93%E5%99%A8%EF%BC%8C%E7%84%B6%E5%90%8E%E5%AE%89%E8%A3%85%E5%85%B6%E5%AE%83%E6%8F%92%E4%BB%B6%E3%80%82%20%E5%A6%82%E9%9C%80%E9%85%8D%E7%BD%AE%E5%85%B6%E5%AE%83%E5%8F%82%E6%95%B0%EF%BC%8C%E8%AF%B7%E5%8F%82%E8%80%83%20katex%20%E5%AE%98%E7%BD%91">hexo-Butterflyæ·»åŠ æ•°å­¦å…¬å¼æ’ä»¶åŠŸèƒ½</a></p>
<p><a href="https://juejin.cn/post/6968651668720189454">è§£å†³latexæ•°å­¦å…¬å¼æ¸²æŸ“ä¸æ­£ç¡®åŠè¡Œå†…å…¬å¼ä¸­æ–‡æ¸²æŸ“ä¹±ç é—®é¢˜</a></p>
<p><a href="https://blog.sinlov.cn/posts/2023/03/16/markdown-%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F%E6%8E%92%E7%89%88-katex-%E8%AF%AD%E6%B3%95/">Markdown æ•°å­¦å…¬å¼æ’ç‰ˆ KaTex è¯­æ³•</a></p>
<p><a href="https://www.luogu.com.cn/article/4a81e2tt">KaTeX æ•°å­¦å…¬å¼å¤§å…¨</a></p>
<p><a href="https://www.lightshaker.cn/archives/6276/">Hexo é”™è¯¯è­¦å‘Šä¸è§£å†³åŠæ³•</a></p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºç§‘å­¦</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>blog</tag>
      </tags>
  </entry>
  <entry>
    <title>GDB note</title>
    <url>/2018/12/20/gdb-note/</url>
    <content><![CDATA[<h2 id="start"><a class="header-anchor" href="#start">ğŸŒ³</a>start</h2>
<blockquote>
<p>gdb programname / gdb programname corefile<br>
gdb programname -symbol ç¬¦å·è¡¨ -core corefile -directory srccodePath</p>
</blockquote>
<h2 id="cmd"><a class="header-anchor" href="#cmd">ğŸŒ³</a>cmd</h2>
<blockquote>
<p>list : source code<br>
break n<br>
break func<br>
break â€¦ if i = 100<br>
info break</p>
</blockquote>
<hr>
<blockquote>
<p>run / r<br>
next / n<br>
continue / c<br>
print / p<br>
bt<br>
finish è¿è¡Œåˆ°å½“å‰å‡½æ•°ç»“æŸ<br>
ç¼–è¯‘æ—¶ -g å°†çœ‹ä¸è§ å‡½æ•°å å˜é‡å, åªçœ‹åˆ°å†…å­˜åœ°å€<br>
gdbä¸­ æ‰§è¡Œ shell cmd: make<br>
set args â€¦<br>
show args â€¦<br>
path æŒ‡å®šè¿è¡Œè·¯å¾„<br>
show path<br>
info terminal<br>
run &gt; outfile<br>
info programname</p>
</blockquote>
<hr>
<blockquote>
<p>breakpoint, watchpoint, catchpoint, signals,thread stop<br>
watch expr<br>
rwatch expr è¢«è¯»æ—¶æš‚åœ<br>
awatch expr è¢«è¯»å†™æ—¶æš‚åœ<br>
info watchpoint</p>
</blockquote>
<hr>
<blockquote>
<p>catch throw<br>
catch catch<br>
catcg exec<br>
catch fork/vfork<br>
catch load/unload</p>
</blockquote>
]]></content>
      <categories>
        <category>Linux</category>
        <category>Debug</category>
        <category>gdb</category>
        <category>è®¡ç®—æœºç§‘å­¦</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Debug</tag>
        <tag>gdb</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2018/12/21/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="quick-start"><a class="header-anchor" href="#quick-start">ğŸŒ³</a>Quick Start</h2>
<h3 id="create-a-new-post"><a class="header-anchor" href="#create-a-new-post">ğŸŒ³</a>Create a new post</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="run-server"><a class="header-anchor" href="#run-server">ğŸŒ³</a>Run server</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="generate-static-files"><a class="header-anchor" href="#generate-static-files">ğŸŒ³</a>Generate static files</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="deploy-to-remote-sites"><a class="header-anchor" href="#deploy-to-remote-sites">ğŸŒ³</a>Deploy to remote sites</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>Linux iptables note</title>
    <url>/2018/12/20/iptables-note/</url>
    <content><![CDATA[<h2 id="iptables-note"><a class="header-anchor" href="#iptables-note">ğŸŒ³</a>iptables note</h2>
<ul>
<li>
<p>åœ¨tcpåè®®ä¸­ï¼Œç¦æ­¢æ‰€æœ‰çš„ipè®¿é—®æœ¬æœºçš„<code>9902</code>ç«¯å£ã€‚</p>
<blockquote>
<p>iptables -I INPUT -p tcp --dport 9902 -j DROP</p>
</blockquote>
</li>
<li>
<p>å…è®¸ <code>223.104.63.111</code> è®¿é—®æœ¬æœºçš„ <code>9902</code> ç«¯å£</p>
<blockquote>
<p>iptables -I INPUT -s 223.104.63.111 -p tcp --dport 9902 -j ACCEPT</p>
</blockquote>
</li>
<li>
<p>ä¿®æ”¹ è§„åˆ™ æ—¶é—´æœ‰æ•ˆæœŸ</p>
<blockquote>
<p>iptables -R INPUT 2 -s 223.104.63.111 -m time --datestart 2018-12-19T09:00:08 --datestop 2018-12-19T09:30:00 -p tcp --dport 9902 -j ACCEPT</p>
</blockquote>
<p>iptables æ—¶é—´åŸºäºUTCæ—¶é—´ æ‰€ä»¥ å…ˆç”¨ å‘½ä»¤ <code>date --utc</code> è·Ÿ <code>date</code> æŸ¥çœ‹ æœ¬åœ°æ—¶é—´ä¸UTCæ—¶é—´çš„æ—¶å·®</p>
</li>
<li>
<p>å…è®¸ <code>113.111.245.62</code> è®¿é—®æœ¬æœºçš„ <code>9902</code> ç«¯å£</p>
<blockquote>
<p>iptables -I INPUT -s 113.111.245.62 -p tcp --dport 9902 -j ACCEPT</p>
</blockquote>
</li>
<li>
<p>MACåœ°å€çš„è®¾å¤‡å’Œè¿™ä¸ªiptablesä¸åœ¨ä¸€ä¸ªå­ç½‘é‡Œï¼Œå°±æ²¡ç”¨</p>
<blockquote>
<p>iptables -I INPUT -m mac --mac-source a0:4e:a7:43:80:c4 -p tcp --dport 9902 -j ACCEPT</p>
</blockquote>
</li>
<li>
<p>æ¸…é™¤é¢„è®¾è¡¨filterä¸­çš„æ‰€æœ‰è§„åˆ™é“¾çš„è§„åˆ™</p>
<blockquote>
<p>iptables -F</p>
</blockquote>
</li>
<li>
<p>å…è®¸ <code>113.111.0.0/16</code> è®¿é—®æœ¬æœºçš„ <code>9902</code> ç«¯å£</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">iptables -I INPUT -s 113.111.0.0/16 -p tcp --dport 9902 -j ACCEPT</span><br><span class="line">iptables -I INPUT -s 116.22.128.0/20 -p tcp --dport 9902 -j ACCEPT</span><br><span class="line">iptables -I INPUT -s 223.64.0.0/10 -p tcp --dport 9902 -j ACCEPT</span><br><span class="line">iptables -I INPUT -s 223.96.0.0/12 -p tcp --dport 9902 -j ACCEPT</span><br><span class="line">iptables -I INPUT -s 223.104.60.0/22 -p tcp --dport 9902 -j ACCEPT</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>device</th>
<th>ip</th>
</tr>
</thead>
<tbody>
<tr>
<td>å®¿èˆ</td>
<td>116.22.132.155</td>
</tr>
<tr>
<td>å…¬å¸</td>
<td>113.111.185.3,113.111.245.62</td>
</tr>
<tr>
<td>æ‰‹æœº</td>
<td>223.104.63.111</td>
</tr>
</tbody>
</table>
<ul>
<li>yum install -y iptables-services</li>
<li>/etc/sysconfig/iptables</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># sample configuration for iptables service</span><br><span class="line"># you can edit this manually or use system-config-firewall</span><br><span class="line"># please do not ask us to add additional ports/services to this default configuration</span><br><span class="line">*filter</span><br><span class="line">:INPUT ACCEPT [0:0]</span><br><span class="line">:FORWARD ACCEPT [0:0]</span><br><span class="line">:OUTPUT ACCEPT [0:0]</span><br><span class="line">-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT</span><br><span class="line">-A INPUT -p icmp -j ACCEPT</span><br><span class="line">-A INPUT -i lo -j ACCEPT</span><br><span class="line">-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT</span><br><span class="line">#-A INPUT -j REJECT --reject-with icmp-host-prohibited</span><br><span class="line">#-A FORWARD -j REJECT --reject-with icmp-host-prohibited</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-A INPUT -s 113.111.0.0/16 -p tcp --dport 9902 -j ACCEPT</span><br><span class="line">-A INPUT -s 116.22.128.0/20 -p tcp --dport 9902 -j ACCEPT</span><br><span class="line">-A INPUT -s 223.104.60.0/22 -p tcp --dport 9902 -j ACCEPT</span><br><span class="line">#-A INPUT -s 223.104.63.111 -p tcp --dport 9902 -j ACCEPT</span><br><span class="line">#-A INPUT -s 116.22.132.155 -p tcp --dport 9902 -j ACCEPT</span><br><span class="line">#-A INPUT -s 116.22.134.122 -p tcp --dport 9902 -j ACCEPT</span><br><span class="line">-A INPUT -p tcp --dport 9905 -j DROP</span><br><span class="line">-A INPUT -p tcp --dport 9902 -j DROP</span><br><span class="line">COMMIT</span><br></pre></td></tr></table></figure>
<ul>
<li>iptables-service</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chkconfig iptables on</span><br><span class="line">service iptables reload/status/start</span><br></pre></td></tr></table></figure>
<ul>
<li>iptables -F æ¸…é™¤é¢„è®¾è¡¨filterä¸­çš„æ‰€æœ‰è§„åˆ™é“¾çš„è§„åˆ™</li>
<li>iptables -X æ¸…é™¤é¢„è®¾è¡¨filterä¸­ä½¿ç”¨è€…è‡ªå®šé“¾ä¸­çš„è§„åˆ™</li>
<li>iptables -L -n æŸ¥çœ‹æœ¬æœºå…³äºIPTABLESçš„è®¾ç½®æƒ…å†µÂ <strong>è¿œç¨‹è¿æ¥è§„åˆ™å°†ä¸èƒ½ä½¿ç”¨</strong></li>
</ul>
<hr>
]]></content>
      <categories>
        <category>network</category>
        <category>unix</category>
        <category>Linux</category>
        <category>iptables</category>
        <category>è®¡ç®—æœºç§‘å­¦</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>unix</tag>
        <tag>iptables</tag>
        <tag>network</tag>
        <tag>firewall</tag>
      </tags>
  </entry>
  <entry>
    <title>javascript ç¬”è®°</title>
    <url>/2024/07/06/javascript-%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h1>javascript ç¬”è®°</h1>
<h2 id="basic"><a class="header-anchor" href="#basic">ğŸŒ³</a>basic</h2>
<p><a href="https://cloud.tencent.com/developer/article/1797513">JavaScript ä¸­çš„ä¸€æ¬¡æ€§å®šæ—¶å™¨å’Œå‘¨æœŸæ€§å®šæ—¶å™¨</a><br>
<a href="https://iknow.fun/2020/06/02/javascript-es6-10/#1-1-%E8%AF%BE%E7%A8%8B%E5%AF%BC%E5%AD%A6-%E8%AF%95%E7%9C%8B">JavaScript ES6-10 è¯­æ³•</a><br>
<a href="https://www.cnblogs.com/it-Ren/p/13062999.html">HTML/CSS switch å¼€å…³ ï¼ˆåŒ…æ‹¬ JS æ§åˆ¶ checked é€‰æ‹©ï¼‰</a><br>
<a href="https://geek-docs.com/javascript/javascript-ask-answer/102_tk_1703987553.html">JavaScript å­—å…¸éå†ç”¨æ³•ä»‹ç»</a><br>
<a href="https://geek-docs.com/javascript/javascript-ask-answer/55_hk_1709422196.html">JS å­—å…¸éå†</a><br>
<a href="https://sweetalert.js.org/guides/">éé˜»å¡å¼¹çª—</a></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> [key, value] <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(object)) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(key, value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> points = [<span class="number">40</span>, <span class="number">100</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">25</span>, <span class="number">10</span>];</span><br><span class="line">points.<span class="title function_">sort</span>(<span class="keyword">function</span> (<span class="params">a, b</span>) &#123;</span><br><span class="line">	<span class="keyword">return</span> a - b;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//	var a=&#x27;xixi&#x27;;  function  object number string boolean undefined</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> a == <span class="string">&quot;undefined&quot;</span> || a == <span class="literal">null</span>) <span class="title function_">alert</span>(<span class="string">&quot;a is undefined&quot;</span>);</span><br><span class="line"><span class="keyword">else</span> <span class="title function_">alert</span>(<span class="string">&quot;a is defined&quot;</span>);</span><br><span class="line"></span><br><span class="line">myString = <span class="string">&quot;129&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseInt</span>(myString)); <span class="comment">// expected result: 129</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Number</span>(<span class="string">&quot;10.33&quot;</span>); <span class="comment">// returns 10.33</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(+<span class="string">&quot;&quot;</span>); <span class="comment">// expected output: 0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="string">&quot;10 20 30&quot;</span>); <span class="comment">// returns 10</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="string">&quot;10 years&quot;</span>); <span class="comment">// returns 10</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="string">&quot;years 10&quot;</span>); <span class="comment">// returns NaN</span></span><br><span class="line"></span><br><span class="line">str = <span class="string">&quot;1222&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(str)); <span class="comment">// returns 1222</span></span><br><span class="line"></span><br><span class="line">str = <span class="string">&quot;2344&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str * <span class="number">1</span>); <span class="comment">// expected result: 2344</span></span><br><span class="line"></span><br><span class="line">negStr = <span class="string">&quot;-234&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(~~negStr); <span class="comment">// expected result: -234</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(&#123;<span class="attr">length</span>: <span class="number">10</span>&#125;, <span class="function">(<span class="params">val, i</span>) =&gt;</span> i) <span class="comment">// [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">10</span>).<span class="title function_">keys</span>()) <span class="comment">// [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(&#123;<span class="attr">length</span>: <span class="number">10</span>&#125;)).<span class="title function_">map</span>(<span class="function">(<span class="params">val, i </span>) =&gt;</span> +i) <span class="comment">// [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br><span class="line">[...<span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">10</span>).<span class="title function_">keys</span>()]; <span class="comment">// [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br><span class="line">[...<span class="title class_">Array</span>.<span class="title function_">from</span>(&#123;<span class="attr">length</span>: <span class="number">10</span>&#125;).<span class="title function_">keys</span>()] <span class="comment">// [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br></pre></td></tr></table></figure>
<h3 id="jsä¸­-function-function-function-ä¹‹é—´çš„åŒºåˆ«"><a class="header-anchor" href="#jsä¸­-function-function-function-ä¹‹é—´çš„åŒºåˆ«">ğŸŒ³</a><a href="https://blog.csdn.net/stpice/article/details/80586444">jsä¸­(function(){}()) (function(){})() $(function(){});ä¹‹é—´çš„åŒºåˆ«</a></h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¿™ä¸¤ç§å†™æ³•ï¼Œéƒ½æ˜¯ä¸€ç§ç«‹å³æ‰§è¡Œå‡½æ•°çš„å†™æ³•ï¼Œå³IIFE (Immediately Invoked Function Expression)ã€‚è¿™ç§å‡½æ•°åœ¨å‡½æ•°å®šä¹‰çš„åœ°æ–¹å°±ç›´æ¥æ‰§è¡Œäº†ã€‚</span></span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;())</span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ˜¯$(document).ready(function()&#123;/*...*/&#125;)çš„ç®€å†™å½¢å¼ï¼Œæ˜¯åœ¨DOMåŠ è½½å®Œæˆåæ‰§è¡Œçš„å›è°ƒå‡½æ•°ï¼Œå¹¶ä¸”åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</span></span><br><span class="line">$(<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="comment">/*...*/</span>&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="html"><a class="header-anchor" href="#html">ğŸŒ³</a>html</h2>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;foo\bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;foo:bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;#foo\bar&quot;</span>); <span class="comment">// &quot;#fooar&quot;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#foo\bar&quot;</span>); <span class="comment">// ä¸åŒ¹é…ä»»ä½•å…ƒç´ </span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;#foo\\bar&quot;</span>); <span class="comment">// &quot;#foo\bar&quot;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;#foo\\\\bar&quot;</span>); <span class="comment">// &quot;#foo\\bar&quot;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#foo\\\\bar&quot;</span>); <span class="comment">// åŒ¹é…ç¬¬ä¸€ä¸ª div</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#foo:bar&quot;</span>); <span class="comment">// ä¸åŒ¹é…ä»»ä½•å…ƒç´ </span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#foo\\:bar&quot;</span>); <span class="comment">// åŒ¹é…ç¬¬äºŒä¸ª div</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> el = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.myclass&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> el = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;div.user-panel.main input[name=&#x27;login&#x27;]&quot;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="bun"><a class="header-anchor" href="#bun">ğŸŒ³</a><a href="https://bun.sh/docs/installation">bun</a></h2>
<ul>
<li>windows install</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bun --revision</span><br><span class="line">powershell -c <span class="string">&quot;irm bun.sh/install.ps1|iex&quot;</span></span><br><span class="line">bun add -d @types/bun</span><br><span class="line">bun add -d @types/react@latest @types/react-dom@latest</span><br><span class="line">bun add -d @babel/core @babel/preset-react</span><br><span class="line">bun add -d @types/figlet</span><br><span class="line"></span><br><span class="line">bun --watch run dev</span><br><span class="line"></span><br><span class="line"><span class="comment">#`foo, bar and baz`</span></span><br><span class="line">bun run --filter <span class="string">&#x27;ba*&#x27;</span> &lt;script&gt;</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;console.log(&#x27;Hello&#x27;)&quot;</span> | bun run -</span><br><span class="line"></span><br><span class="line">bun --smol run index.tsx</span><br><span class="line"></span><br><span class="line">bun --<span class="built_in">print</span> process.env</span><br><span class="line">bun --<span class="built_in">print</span> process.env.production</span><br><span class="line">bun --<span class="built_in">print</span> process.env.development</span><br><span class="line">bun --<span class="built_in">print</span> process.env.local</span><br><span class="line"></span><br><span class="line">bun build ./cli.ts --compile --outfile mycli</span><br><span class="line"><span class="comment"># cli.ts</span></span><br><span class="line">console.log(<span class="string">&quot;Hello world!&quot;</span>);</span><br><span class="line"></span><br><span class="line">bun build --compile --target=bun-windows-x64 ./path/to/my/app.ts --outfile myapp</span><br><span class="line"></span><br><span class="line">bun build --compile --target=bun-linux-x64 ./index.ts --outfile myapp</span><br><span class="line"></span><br><span class="line">bun build --compile --target=bun-darwin-x64 ./path/to/my/app.ts --outfile myapp</span><br><span class="line"></span><br><span class="line">bun build --compile --minify --sourcemap ./path/to/my/app.ts --outfile myapp</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="å¼¹çª—æ’ä»¶"><a class="header-anchor" href="#å¼¹çª—æ’ä»¶">ğŸŒ³</a>å¼¹çª—æ’ä»¶</h3>
<ul>
<li><a href="https://sweetalert2.github.io/#examples">sweetalert2</a></li>
<li><a href="https://sweetalert2.github.io/recipe-gallery/queue-with-progress-steps.html">å¼¹çª—é˜Ÿåˆ—æ¡ˆåˆ—</a></li>
</ul>
<h4 id="å¼¹çª—é˜Ÿåˆ—"><a class="header-anchor" href="#å¼¹çª—é˜Ÿåˆ—">ğŸŒ³</a>å¼¹çª—é˜Ÿåˆ—</h4>
<ul>
<li>è‡ªå·±å®ç°çš„ å¼€ç®±å³ç”¨çš„å¼¹çª—é˜Ÿåˆ— æºç  <a href="https://raw.githubusercontent.com/Zirpon/zirpon.github.io/master/source/src/AlertQueue.js">AlertQueue</a></li>
</ul>
<h3 id="jsx"><a class="header-anchor" href="#jsx">ğŸŒ³</a>jsx</h3>
<ul>
<li>bun add -d @types/react@latest</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Component</span>(<span class="params">props: &#123; message: string &#125;</span>) &#123;</span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">h1</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> &quot;<span class="attr">red</span>&quot; &#125;&#125;&gt;</span>&#123;props.message&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line">	);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Component</span> <span class="attr">message</span>=<span class="string">&quot;Hello world!&quot;</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> db <span class="keyword">from</span> <span class="string">&quot;./my.db&quot;</span> <span class="keyword">with</span> &#123; <span class="attr">tags</span>: <span class="string">&quot;sqlite&quot;</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(db.<span class="title function_">query</span>(<span class="string">&quot;select * from users LIMIT 1&quot;</span>).<span class="title function_">get</span>());</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> myEmbeddedDb <span class="keyword">from</span> <span class="string">&quot;./my.db&quot;</span> <span class="keyword">with</span> &#123; <span class="attr">tags</span>: <span class="string">&quot;sqlite&quot;</span>, <span class="attr">embed</span>: <span class="string">&quot;true&quot;</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(myEmbeddedDb.<span class="title function_">query</span>(<span class="string">&quot;select * from users LIMIT 1&quot;</span>).<span class="title function_">get</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// this becomes an internal file path</span></span><br><span class="line"><span class="keyword">import</span> icon <span class="keyword">from</span> <span class="string">&quot;./icon.png&quot;</span> <span class="keyword">with</span> &#123; <span class="attr">tags</span>: <span class="string">&quot;file&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">import</span> &#123; file &#125; <span class="keyword">from</span> <span class="string">&quot;bun&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">fetch</span>(<span class="params">req</span>) &#123;</span><br><span class="line">    <span class="comment">// Embedded files can be streamed from Response objects</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title function_">file</span>(icon));</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> icon <span class="keyword">from</span> <span class="string">&quot;./icon.png&quot;</span> <span class="keyword">with</span> &#123; <span class="attr">tags</span>: <span class="string">&quot;file&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">import</span> &#123; file &#125; <span class="keyword">from</span> <span class="string">&quot;bun&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> bytes = <span class="keyword">await</span> <span class="title function_">file</span>(icon).<span class="title function_">arrayBuffer</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; stuff &#125; <span class="keyword">from</span> <span class="string">&quot;./my-commonjs.cjs&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Stuff</span> <span class="keyword">from</span> <span class="string">&quot;./my-commonjs.cjs&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> myStuff = <span class="built_in">require</span>(<span class="string">&quot;./my-commonjs.cjs&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="plugin-æ²¡çœ‹å¤ªæ‡‚"><a class="header-anchor" href="#plugin-æ²¡çœ‹å¤ªæ‡‚">ğŸŒ³</a><a href="https://bun.sh/docs/runtime/plugins">plugin</a> æ²¡çœ‹å¤ªæ‡‚</h3>
<h2 id="javascrip-å˜å£°-æ–‡å­—è½¬è¯­éŸ³"><a class="header-anchor" href="#javascrip-å˜å£°-æ–‡å­—è½¬è¯­éŸ³">ğŸŒ³</a>Javascrip å˜å£° æ–‡å­—è½¬è¯­éŸ³</h2>
<p><a href="https://github.com/w-okada/voice-changer">https://github.com/w-okada/voice-changer</a><br>
AI è¯­éŸ³å¼€æºæ¨¡å‹ä¸‹è½½åœ°å€ï¼š<a href="https://discord.gg/aihub">https://discord.gg/aihub</a></p>
<p><a href="https://blog.csdn.net/cnds123/article/details/137920674">HTML5+JavaScript å®ç°è¯­éŸ³åˆæˆï¼ˆæ–‡å­—è½¬è¯­éŸ³ï¼‰</a><br>
<a href="https://segmentfault.com/a/1190000041989692">JS å®ç°å°†æ–‡å­—è½¬æ¢ä¸ºè¯­éŸ³å¹¶è‡ªåŠ¨æ’­æ”¾</a><br>
<a href="https://www.bilibili.com/video/BV11F41197AP/?spm_id_from=333.880.my_history.page.click&amp;vd_source=b48342a630f5cc1a5c86649a37c0db89">æœ€æ–° rvc å®æ—¶å˜å£°ï¼ˆé™„æ¨¡å‹ã€å®‰è£…ã€æ•™ç¨‹åœ°å€ï¼‰voice-changerï¼ŒAI å”±æ­Œ</a><br>
<a href="https://github.com/Venryx/w-okada-voice-changer-scripts/tree/master">js ç‰ˆæœ¬å˜å£°å™¨</a></p>
<h2 id="javascript-3d-æ¸²æŸ“"><a class="header-anchor" href="#javascript-3d-æ¸²æŸ“">ğŸŒ³</a>javascript 3D æ¸²æŸ“</h2>
<ul>
<li><a href="https://sketchfab.com/developers/data-api/v3" title="website title">sketchfab_doc</a></li>
<li><a href="https://support.fab.com/s/article/Embedding-your-3D-models">epic_sketchfab</a></li>
<li><a href="https://sketchfab.com/3d-models/old-god-elder-dragon-be305f220c404e28afa073ddbc62873d" title="Old God Elder Dragon">dragon</a></li>
<li>sketchfab</li>
<li><a href="http://webgl3d.cn/pages/aac9ab/">threejs_doc</a></li>
</ul>
<p>Here is a footnote reference,[^1] and another.[^longnote]</p>
<h2 id="endnotes"><a class="header-anchor" href="#endnotes">ğŸŒ³</a>Endnotes</h2>
<p>[^1]: Here is the footnote.<br>
[^longnote]: Hereâ€™s one with multiple blocks.</p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºç§‘å­¦</category>
      </categories>
      <tags>
        <tag>javascript</tag>
        <tag>æ–‡å­—è½¬è¯­éŸ³</tag>
        <tag>threejs</tag>
        <tag>3D</tag>
        <tag>sketchfab</tag>
      </tags>
  </entry>
  <entry>
    <title>markdown_note</title>
    <url>/2025/06/01/markdown-note/</url>
    <content><![CDATA[<h1>Markdown note</h1>
<h2 id="å­—ä½“"><a class="header-anchor" href="#å­—ä½“">ğŸŒ³</a>å­—ä½“</h2>
<p><em>æ–œä½“</em>æˆ–_æ–œä½“_<br>
<strong>ç²—ä½“</strong><br>
<em><strong>åŠ ç²—æ–œä½“</strong></em><br>
<s>åˆ é™¤çº¿</s><br>
åœ¨ä¸€è¡Œçš„æœ«å°¾æ·»åŠ ä¸¤ä¸ªæˆ–å¤šä¸ªç©ºæ ¼ï¼Œç„¶åæŒ‰å›è½¦é”®,å³å¯åˆ›å»ºä¸€ä¸ªæ¢è¡Œ(<code>&lt;br&gt;</code>)ã€‚</p>
<h2 id="ä»£ç å—è¯†åˆ«"><a class="header-anchor" href="#ä»£ç å—è¯†åˆ«">ğŸŒ³</a><a href="https://www.jianshu.com/p/05c41cf1a7c4">ä»£ç å—è¯†åˆ«</a></h2>
<h2 id="é“¾æ¥"><a class="header-anchor" href="#é“¾æ¥">ğŸŒ³</a>é“¾æ¥</h2>
<p>æ¬¢è¿æ¥åˆ°<a href="http://blog.leanote.com/freewalk">æ¢µå±…é—¹å¸‚</a><br>
æ¬¢è¿æ¥åˆ°<a href="http://blog.leanote.com/freewalk" title="æ¢µå±…é—¹å¸‚">æ¢µå±…é—¹å¸‚</a></p>
<blockquote>
<p>ä¸åŒçš„ Markdown åº”ç”¨ç¨‹åºå¤„ç†URLä¸­é—´çš„ç©ºæ ¼æ–¹å¼ä¸ä¸€æ ·ã€‚ä¸ºäº†å…¼å®¹æ€§ï¼Œè¯·å°½é‡ä½¿ç”¨%20ä»£æ›¿ç©ºæ ¼ã€‚<br>
<code>[link](https://www.example.com/my%20great%20page)</code></p>
</blockquote>
<blockquote>
<p>å¦‚æœæ˜¯å›¾ç‰‡åœ¨å‰é¢åŠ æ„Ÿå¹å·<code>ï¼</code>å³å¯<br>
å¦‚ <code>![xxx](xxx)</code></p>
</blockquote>
<blockquote>
<p>å›¾ç‰‡å¸¦é“¾æ¥<br>
<code>[![æ²™æ¼ ä¸­çš„å²©çŸ³å›¾ç‰‡](/assets/img/shiprock.jpg &quot;Shiprock&quot;)](https://markdown.com.cn)</code></p>
</blockquote>
<p>æˆ‘ç»å¸¸å»çš„å‡ ä¸ªç½‘ç«™<a href="http://www.google.com" title="Google">Google</a>ã€<a href="http://www.leanote.com" title="Leanote">Leanote</a>ä»¥åŠ<a href="http://http://blog.leanote.com/freewalk" title="æ¢µå±…é—¹å¸‚">è‡ªå·±çš„åšå®¢</a><br>
<a href="http://www.leanote.com" title="Leanote">Leanote ç¬”è®°</a>æ˜¯ä¸€ä¸ªä¸é”™çš„<a href="http://http://blog.leanote.com/freewalk">ç½‘ç«™</a>ã€‚</p>
<h2 id="å¼•ç”¨"><a class="header-anchor" href="#å¼•ç”¨">ğŸŒ³</a>å¼•ç”¨</h2>
<blockquote>
<h4 id="the-quarterly-results-look-great"><a class="header-anchor" href="#the-quarterly-results-look-great">ğŸŒ³</a>The quarterly results look great!</h4>
<ul>
<li>Revenue was off the chart.</li>
<li>Profits were higher than ever.</li>
</ul>
<p><em>Everything</em> is going according to <strong>plan</strong>.</p>
</blockquote>
<blockquote>
<p>ç¬¬ä¸€å±‚</p>
<blockquote>
<p>ç¬¬äºŒå±‚<br>
è¿™æ ·æ˜¯è·³ä¸å‡ºå»çš„</p>
<blockquote>
<p>è¿˜å¯ä»¥æ›´æ·±</p>
</blockquote>
</blockquote>
</blockquote>
<h2 id="è¡¨æ ¼"><a class="header-anchor" href="#è¡¨æ ¼">ğŸŒ³</a>è¡¨æ ¼</h2>
<table>
<thead>
<tr>
<th>Syntax</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>Title</td>
</tr>
<tr>
<td>Paragraph</td>
<td>Text</td>
</tr>
</tbody>
</table>
<h3 id="è¡¨æ ¼å¯¹é½"><a class="header-anchor" href="#è¡¨æ ¼å¯¹é½">ğŸŒ³</a>è¡¨æ ¼å¯¹é½</h3>
<table>
<thead>
<tr>
<th style="text-align:left">Syntax</th>
<th style="text-align:center">Description</th>
<th style="text-align:right">Test Text</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Header</td>
<td style="text-align:center">Title</td>
<td style="text-align:right">Hereâ€™s <br> this</td>
</tr>
<tr>
<td style="text-align:left">Paragraph</td>
<td style="text-align:center">Text</td>
<td style="text-align:right">And more</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="æ–‡å­—å±…ä¸­"><a class="header-anchor" href="#æ–‡å­—å±…ä¸­">ğŸŒ³</a>æ–‡å­—å±…ä¸­</h3>
<center>Markdown</center>
<h3 id="æ–‡å­—å·¦å¯¹é½"><a class="header-anchor" href="#æ–‡å­—å·¦å¯¹é½">ğŸŒ³</a>æ–‡å­—å·¦å¯¹é½</h3>
<p align="left">Markdown</p>
<h3 id="æ–‡å­—å³å¯¹é½"><a class="header-anchor" href="#æ–‡å­—å³å¯¹é½">ğŸŒ³</a>æ–‡å­—å³å¯¹é½</h3>
<p align="right">Markdown</p>
<hr>
<h3 id="markdown-å­—ä½“é¢œè‰²æ”¹å˜"><a class="header-anchor" href="#markdown-å­—ä½“é¢œè‰²æ”¹å˜">ğŸŒ³</a>Markdown å­—ä½“é¢œè‰²æ”¹å˜</h3>
<ul>
<li>[ ] ç»¿è‰²å­—ä½“ï¼š<font color="green">Markdown</font></li>
<li>[ ] çº¢è‰²å­—ä½“ï¼š<font color="red">Markdown</font></li>
<li>[ ] è“è‰²å­—ä½“ï¼š<font color="blue">Markdown</font></li>
</ul>
<h3 id="markdown-å­—ä½“å¤§å°æ”¹å˜"><a class="header-anchor" href="#markdown-å­—ä½“å¤§å°æ”¹å˜">ğŸŒ³</a>Markdown å­—ä½“å¤§å°æ”¹å˜</h3>
<ul>
<li>[ ] sizeä¸º1ï¼š<font size="1">Markdown</font></li>
<li>[ ] sizeä¸º5ï¼š<font size="5">Markdown</font></li>
<li>[ ] sizeä¸º10ï¼š<font size="10">Markdown</font></li>
</ul>
<h3 id="markdown-å­—ä½“æ ·å¼æ”¹å˜"><a class="header-anchor" href="#markdown-å­—ä½“æ ·å¼æ”¹å˜">ğŸŒ³</a>markdown å­—ä½“æ ·å¼æ”¹å˜</h3>
<ul>
<li>
<p>[ ] <a href="https://www.zhihu.com/search?q=%E5%BE%AE%E8%BD%AF%E9%9B%85%E9%BB%91%E5%AD%97%E4%BD%93&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A942069774%7D">å¾®è½¯é›…é»‘å­—ä½“</a>: <font face="å¾®è½¯é›…é»‘">Markdown</font></p>
</li>
<li>
<p>[ ] å®‹ä½“å­—ä½“ï¼š<font face="å®‹ä½“">Markdown</font></p>
</li>
<li>
<p>[ ] æ¥·ä½“å­—ä½“ï¼š<font face="æ¥·ä½“">Markdown</font></p>
</li>
</ul>
<h2 id="æ•°å­¦å‡½æ•°å…¬å¼"><a class="header-anchor" href="#æ•°å­¦å‡½æ•°å…¬å¼">ğŸŒ³</a>æ•°å­¦å‡½æ•°å…¬å¼</h2>
<p>ä¸€ä¸ª<code>$</code>ä¸å ä¸€è¡Œ<br>
2ä¸ª<code>$$</code>å ä¸€è¡Œ</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mn>100</mn><mo>âˆ—</mo><mo stretchy="false">{</mo><mo stretchy="false">[</mo><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>y</mi><mo stretchy="false">)</mo><mo>âˆ—</mo><mn>3</mn><mo stretchy="false">]</mo><mo>âˆ’</mo><mn>5</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">f(x, y) = 100 * \lbrace[(x + y) * 3] - 5\rbrace
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">100</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{[(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">3</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">5</span><span class="mclose">}</span></span></span></span></span></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>n</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>ifÂ </mtext><mstyle scriptlevel="0" displaystyle="false"><mi>n</mi></mstyle><mtext>Â isÂ even</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>3</mn><mi>n</mi><mo>+</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>ifÂ </mtext><mstyle scriptlevel="0" displaystyle="false"><mi>n</mi></mstyle><mtext>Â isÂ odd</mtext></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">f(n)= \begin{cases} n/2, &amp; \text {if $n$ is even} \\ 3n+1, &amp; \text{if $n$ is odd} \end{cases} 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mord">/2</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">3</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">ifÂ </span><span class="mord mathnormal">n</span><span class="mord">Â isÂ even</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">ifÂ </span><span class="mord mathnormal">n</span><span class="mord">Â isÂ odd</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>é¡¶ç‚¹æ•°ç»„ï¼š<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><menclose notation="top bottom left right"><mtable rowspacing="0.16em" columnalign="center center center center center" columnlines="solid solid solid solid" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>0</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>1</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>2</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>3</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>4</mn></msub></mstyle></mtd></mtr></mtable></menclose></mrow><annotation encoding="application/x-tex">
\begin{array}{|c|c|c|c|c|}
\hline
v_0 &amp; v_1 &amp; v_2 &amp; v_3 &amp; v_4 \\
\hline
\end{array}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.35em;"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.89em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mtable"><span class="vertical-separator" style="height:1.2em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-0.35em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:1.2em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-0.35em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:1.2em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-0.35em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:1.2em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-0.35em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:1.2em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-0.35em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:1.2em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-0.35em;"></span></span></span><span style="top:-2.65em;"><span class="pstrut" style="height:3em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.85em;"><span class="pstrut" style="height:3em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span></span></span></span></p>
<p>è¾¹æ•°ç»„ï¼š<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.16em" columnalign="center center" columnlines="solid" columnspacing="1em" rowlines="solid"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mstyle mathcolor="lime"><mo lspace="0em" rspace="0em">â†“</mo></mstyle></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mstyle mathcolor="yellow"><mtable rowspacing="0.16em" columnalign="center center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>0</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>1</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>2</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>3</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>4</mn></msub></mstyle></mtd></mtr></mtable></mstyle></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mstyle mathcolor="teal"><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>0</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>1</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>2</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>3</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>4</mn></msub></mstyle></mtd></mtr></mtable></mstyle></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mstyle mathcolor="fuchsia"><mtable rowspacing="0.16em" columnalign="center center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>9</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable></mstyle></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">
\begin{array}{c|c}
    \color{lime}{â†“}&amp;
    \color{yellow}\begin{matrix}
        v_0 &amp; v_1 &amp; v_2 &amp; v_3 &amp; v_4 \\
    \end{matrix}
    \\
    \hline
    \color{teal}
    \begin{matrix}
        v_0 \\ v_1 \\ v_2 \\ v_3 \\ v_4 \\
    \end{matrix}
    &amp;
    \color{fuchsia}
    \begin{matrix}
        0 &amp; âˆ &amp; âˆ &amp; âˆ &amp; 6 \\
        9 &amp; 0 &amp; 3 &amp; âˆ &amp; âˆ \\
        2 &amp; âˆ &amp; 0 &amp; 5 &amp; âˆ \\
        âˆ &amp; âˆ &amp; âˆ &amp; 0 &amp; 1 \\
        âˆ &amp; âˆ &amp; âˆ &amp; âˆ &amp; 0 \\
    \end{matrix} 
\end{array}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:7.21em;vertical-align:-3.355em;"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.855em;"><span style="top:-5.855em;"><span class="pstrut" style="height:5.855em;"></span><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.855em;"><span style="top:-8.255em;"><span class="pstrut" style="height:5.25em;"></span><span class="mord"><span class="mord" style="color:lime;"><span class="mrel" style="color:lime;">â†“</span></span></span></span><span style="top:-4.645em;"><span class="pstrut" style="height:5.25em;"></span><span class="mord"><span class="mord" style="color:teal;"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.25em;"><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:teal;"><span class="mord" style="color:teal;"><span class="mord mathnormal" style="margin-right:0.03588em;color:teal;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:teal;"><span class="mord mtight" style="color:teal;">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:teal;"><span class="mord" style="color:teal;"><span class="mord mathnormal" style="margin-right:0.03588em;color:teal;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:teal;"><span class="mord mtight" style="color:teal;">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:teal;"><span class="mord" style="color:teal;"><span class="mord mathnormal" style="margin-right:0.03588em;color:teal;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:teal;"><span class="mord mtight" style="color:teal;">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:teal;"><span class="mord" style="color:teal;"><span class="mord mathnormal" style="margin-right:0.03588em;color:teal;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:teal;"><span class="mord mtight" style="color:teal;">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:teal;"><span class="mord" style="color:teal;"><span class="mord mathnormal" style="margin-right:0.03588em;color:teal;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:teal;"><span class="mord mtight" style="color:teal;">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.75em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.355em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:7.21em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-3.355em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.855em;"><span style="top:-8.255em;"><span class="pstrut" style="height:5.25em;"></span><span class="mord"><span class="mord" style="color:yellow;"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:yellow;"><span class="mord" style="color:yellow;"><span class="mord mathnormal" style="margin-right:0.03588em;color:yellow;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:yellow;"><span class="mord mtight" style="color:yellow;">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:yellow;"><span class="mord" style="color:yellow;"><span class="mord mathnormal" style="margin-right:0.03588em;color:yellow;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:yellow;"><span class="mord mtight" style="color:yellow;">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:yellow;"><span class="mord" style="color:yellow;"><span class="mord mathnormal" style="margin-right:0.03588em;color:yellow;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:yellow;"><span class="mord mtight" style="color:yellow;">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:yellow;"><span class="mord" style="color:yellow;"><span class="mord mathnormal" style="margin-right:0.03588em;color:yellow;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:yellow;"><span class="mord mtight" style="color:yellow;">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:yellow;"><span class="mord" style="color:yellow;"><span class="mord mathnormal" style="margin-right:0.03588em;color:yellow;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:yellow;"><span class="mord mtight" style="color:yellow;">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-4.645em;"><span class="pstrut" style="height:5.25em;"></span><span class="mord"><span class="mord" style="color:fuchsia;"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.25em;"><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">0</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">9</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">2</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.75em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.25em;"><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.75em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.25em;"><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">3</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.75em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.25em;"><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">5</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">0</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.75em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.25em;"><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">6</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">1</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.75em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.355em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span style="top:-8.5em;"><span class="pstrut" style="height:5.855em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.355em;"><span></span></span></span></span></span></span></span></span></p>
<h2 id="æ•°ç»„-é¢œè‰²"><a class="header-anchor" href="#æ•°ç»„-é¢œè‰²">ğŸŒ³</a>æ•°ç»„ é¢œè‰²</h2>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnlines="dashed" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>a</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>b</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>c</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>d</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>e</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>f</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>g</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>h</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>i</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>j</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>k</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>l</mi></mstyle></mtd></mtr></mtable></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>a</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>b</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>c</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>d</mi></mstyle></mtd></mtr></mtable></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(6.1)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\left[
\begin{array}{c:c}
\begin{matrix}
a &amp; b &amp; c  \\
d &amp; e &amp; f  \\
g &amp; h &amp; i  \\
 j &amp; k &amp; l
\end{matrix}&amp;
\begin{matrix}
a  \\
b  \\
c  \\
d
\end{matrix}
\end{array}
\right]
\tag{6.1}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.8em;vertical-align:-2.15em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:6.8em;"></span><span style="width:0.667em;height:4.800em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="4.800em" viewbox="0 0 667 4800"><path d="M403 1759 V84 H666 V0 H319 V1759 v1200 v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v1200 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:4.65em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">b</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">e</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">h</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">c</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">i</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:4.8em;border-right-width:0.04em;border-right-style:dashed;margin:0 -0.02em;vertical-align:-2.15em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:4.65em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">b</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">c</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:6.8em;"></span><span style="width:0.667em;height:4.800em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="4.800em" viewbox="0 0 667 4800"><path d="M347 1759 V0 H0 V84 H263 V1759 v1200 v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v1200 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:4.8em;vertical-align:-2.15em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">6.1</span></span><span class="mord">)</span></span></span></span></span></span></p>
<p>æ–‡å­—A<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true" stretchy="true" minsize="1.2em" maxsize="1.2em">(</mo><mstyle scriptlevel="1"><mtable rowspacing="0.1em" columnspacing="0.2778em"><mtr><mtd><mstyle scriptlevel="1" displaystyle="false"><mi>a</mi></mstyle></mtd><mtd><mstyle scriptlevel="1" displaystyle="false"><mi>b</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="1" displaystyle="false"><mi>c</mi></mstyle></mtd><mtd><mstyle scriptlevel="1" displaystyle="false"><mi>d</mi></mstyle></mtd></mtr></mtable></mstyle><mo fence="true" stretchy="true" minsize="1.2em" maxsize="1.2em">)</mo></mrow><annotation encoding="application/x-tex">
\bigl(
\begin{smallmatrix}
a &amp; b  \\
c &amp; d
\end{smallmatrix}
\bigr)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3322em;vertical-align:-0.4161em;"></span><span class="mopen"><span class="delimsizing size1">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9161em;"><span style="top:-3.13em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord mtight sizing reset-size6 size3"><span class="mord mathnormal mtight">a</span></span></span><span style="top:-2.4639em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord mtight sizing reset-size6 size3"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4161em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.1945em;"></span><span class="arraycolsep" style="width:0.1945em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9161em;"><span style="top:-3.13em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord mtight sizing reset-size6 size3"><span class="mord mathnormal mtight">b</span></span></span><span style="top:-2.4639em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord mtight sizing reset-size6 size3"><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4161em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing size1">)</span></span></span></span></span>æ–‡å­—B</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>a</mi><mn>1</mn></msub><mi>x</mi><mo>+</mo><msub><mi>b</mi><mn>1</mn></msub><mi>y</mi><mo>+</mo><msub><mi>c</mi><mn>1</mn></msub><mi>z</mi><mo>=</mo><msub><mi>d</mi><mn>1</mn></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>a</mi><mn>2</mn></msub><mi>x</mi><mo>+</mo><msub><mi>b</mi><mn>2</mn></msub><mi>y</mi><mo>+</mo><msub><mi>c</mi><mn>2</mn></msub><mi>z</mi><mo>=</mo><msub><mi>d</mi><mn>2</mn></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>a</mi><mn>3</mn></msub><mi>x</mi><mo>+</mo><msub><mi>b</mi><mn>3</mn></msub><mi>y</mi><mo>+</mo><msub><mi>c</mi><mn>3</mn></msub><mi>z</mi><mo>=</mo><msub><mi>d</mi><mn>3</mn></msub></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">\begin{cases}
a_1x+b_1y+c_1z=d_1\\
a_2x+b_2y+c_2z=d_2\\
a_3x+b_3y+c_3z=d_3\\
\end{cases}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.32em;vertical-align:-1.91em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35em;"><span style="top:-2.2em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>â©</span></span></span><span style="top:-2.192em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.316em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.316em" style="width:0.8889em" viewbox="0 0 888.89 316" preserveaspectratio="xMinYMin"><path d="M384 0 H504 V316 H384z M384 0 H504 V316 H384z"/></svg></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>â¨</span></span></span><span style="top:-4.292em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.316em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.316em" style="width:0.8889em" viewbox="0 0 888.89 316" preserveaspectratio="xMinYMin"><path d="M384 0 H504 V316 H384z M384 0 H504 V316 H384z"/></svg></span></span><span style="top:-4.6em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>â§</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.85em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.53em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.91em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>11</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>12</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">â‹¯</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mn>1</mn><mi>n</mi></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>21</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>22</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">â‹¯</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mn>2</mn><mi>n</mi></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">â‹®</mi><mpadded height="0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">â‹®</mi><mpadded height="0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">â‹±</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">â‹®</mi><mpadded height="0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mi>m</mi><mn>1</mn></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mi>m</mi><mn>2</mn></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">â‹¯</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mi>m</mi><mi>n</mi></mrow></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">
\begin{bmatrix}
{a_{11}}&amp;{a_{12}}&amp;{\cdots}&amp;{a_{1n}}\\
{a_{21}}&amp;{a_{22}}&amp;{\cdots}&amp;{a_{2n}}\\
{\vdots}&amp;{\vdots}&amp;{\ddots}&amp;{\vdots}\\
{a_{m1}}&amp;{a_{m2}}&amp;{\cdots}&amp;{a_{mn}}\\
\end{bmatrix}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:5.46em;vertical-align:-2.48em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.95em;"><span style="top:-4.95em;"><span class="pstrut" style="height:7.4em;"></span><span style="width:0.667em;height:5.400em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="5.400em" viewbox="0 0 667 5400"><path d="M403 1759 V84 H666 V0 H319 V1759 v1800 v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v1800 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.45em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.98em;"><span style="top:-5.8275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">11</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-4.6275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">21</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-2.7675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord">â‹®</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span></span><span style="top:-1.5675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.48em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.98em;"><span style="top:-5.8275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-4.6275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">22</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-2.7675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord">â‹®</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span></span><span style="top:-1.5675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.48em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.98em;"><span style="top:-5.64em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="mord"><span class="minner">â‹¯</span></span></span></span><span style="top:-4.44em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="mord"><span class="minner">â‹¯</span></span></span></span><span style="top:-2.58em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="mord"><span class="minner">â‹±</span></span></span></span><span style="top:-1.38em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="mord"><span class="minner">â‹¯</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.48em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.98em;"><span style="top:-5.8275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-4.6275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-2.7675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord">â‹®</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span></span><span style="top:-1.5675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">mn</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.48em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.95em;"><span style="top:-4.95em;"><span class="pstrut" style="height:7.4em;"></span><span style="width:0.667em;height:5.400em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="5.400em" viewbox="0 0 667 5400"><path d="M347 1759 V0 H0 V84 H263 V1759 v1800 v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v1800 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.45em;"><span></span></span></span></span></span></span></span></span></span></span></p>
<hr>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.16em" columnalign="center left left left" columnlines="solid none none" columnspacing="1em" rowlines="solid none"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">â†“</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>a</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>b</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>c</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>R</mi><mn>1</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>c</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>b</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>a</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>R</mi><mn>2</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>b</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>c</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>c</mi></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{array}{c|lll}
{â†“}&amp;{a}&amp;{b}&amp;{c}\\
\hline
{R_1}&amp;{c}&amp;{b}&amp;{a}\\
{R_2}&amp;{b}&amp;{c}&amp;{c}\\
\end{array}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:4.05em;"></span><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mrel">â†“</span></span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:3.6em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-1.55em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span></span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">c</span></span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">b</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">b</span></span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">b</span></span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">c</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">c</span></span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span></span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">c</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span style="top:-4.9em;"><span class="pstrut" style="height:4.05em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span></span></span></span></p>
<h2 id="æ•°å­¦é˜µåˆ—å…¬å¼"><a class="header-anchor" href="#æ•°å­¦é˜µåˆ—å…¬å¼">ğŸŒ³</a>æ•°å­¦é˜µåˆ—å…¬å¼</h2>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msup><mi>x</mi><mn>2</mn></msup></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>y</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msup><mi>y</mi><mn>2</mn></msup></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>z</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msup><mi>z</mi><mn>2</mn></msup></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">        \begin{matrix}
        1 &amp; x &amp; x^2 \\
        1 &amp; y &amp; y^2 \\
        1 &amp; z &amp; z^2 \\
        \end{matrix}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">x</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>1</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msubsup><mi>a</mi><mn>1</mn><mn>2</mn></msubsup></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">â‹¯</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msubsup><mi>a</mi><mn>1</mn><mi>n</mi></msubsup></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>2</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msubsup><mi>a</mi><mn>2</mn><mn>2</mn></msubsup></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">â‹¯</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msubsup><mi>a</mi><mn>2</mn><mi>n</mi></msubsup></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">â‹®</mi><mpadded height="0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">â‹®</mi><mpadded height="0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">â‹®</mi><mpadded height="0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">â‹±</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">â‹®</mi><mpadded height="0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mi>m</mi></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msubsup><mi>a</mi><mi>m</mi><mn>2</mn></msubsup></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">â‹¯</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msubsup><mi>a</mi><mi>m</mi><mi>n</mi></msubsup></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><annotation encoding="application/x-tex">        \begin{pmatrix}
        1 &amp; a_1 &amp; a_1^2 &amp; \cdots &amp; a_1^n \\
        1 &amp; a_2 &amp; a_2^2 &amp; \cdots &amp; a_2^n \\
        \vdots &amp; \vdots &amp; \vdots &amp; \ddots &amp; \vdots \\
        1 &amp; a_m &amp; a_m^2 &amp; \cdots &amp; a_m^n \\
        \end{pmatrix}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:5.46em;vertical-align:-2.48em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.95em;"><span style="top:-4.95em;"><span class="pstrut" style="height:7.4em;"></span><span style="width:0.875em;height:5.400em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.875em" height="5.400em" viewbox="0 0 875 5400"><path d="M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,1884c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-1892c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.45em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.98em;"><span style="top:-5.8275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-4.6275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.7675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">â‹®</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span><span style="top:-1.5675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.48em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.98em;"><span style="top:-5.8275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.6275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.7675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">â‹®</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span><span style="top:-1.5675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.48em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.98em;"><span style="top:-5.8275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.4519em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2481em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.6275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.4519em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2481em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.7675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">â‹®</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span><span style="top:-1.5675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.48em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.98em;"><span style="top:-5.64em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="minner">â‹¯</span></span></span><span style="top:-4.44em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="minner">â‹¯</span></span></span><span style="top:-2.58em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="minner">â‹±</span></span></span><span style="top:-1.38em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="minner">â‹¯</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.48em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.98em;"><span style="top:-5.8275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-2.4519em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2481em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.6275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-2.4519em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2481em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.7675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">â‹®</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span><span style="top:-1.5675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.48em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.95em;"><span style="top:-4.95em;"><span class="pstrut" style="height:7.4em;"></span><span style="width:0.875em;height:5.400em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.875em" height="5.400em" viewbox="0 0 875 5400"><path d="M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,1809
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-1944c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.45em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{matrix} 1 &amp; 2 \\ 3 &amp; 4 \\ \end{matrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span></span></span></span><br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><annotation encoding="application/x-tex">\begin{pmatrix} 1 &amp; 2 \\ 3 &amp; 4 \\ \end{pmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span></span><br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\begin{bmatrix} 1 &amp; 2 \\ 3 &amp; 4 \\ \end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span><br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">{</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd></mtr></mtable><mo fence="true">}</mo></mrow><annotation encoding="application/x-tex">\begin{Bmatrix} 1 &amp; 2 \\ 3 &amp; 4 \\ \end{Bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">{</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">}</span></span></span></span></span></span><br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">âˆ£</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd></mtr></mtable><mo fence="true">âˆ£</mo></mrow><annotation encoding="application/x-tex">\begin{vmatrix} 1 &amp; 2 \\ 3 &amp; 4 \\ \end{vmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.45em;"><span class="pstrut" style="height:4.4em;"></span><span style="width:0.333em;height:2.400em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.333em" height="2.400em" viewbox="0 0 333 2400"><path d="M145 15 v585 v1200 v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v-1200 v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v1200 v585 h43z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.45em;"><span class="pstrut" style="height:4.4em;"></span><span style="width:0.333em;height:2.400em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.333em" height="2.400em" viewbox="0 0 333 2400"><path d="M145 15 v585 v1200 v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v-1200 v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v1200 v585 h43z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span></span></span></span><br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">âˆ¥</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd></mtr></mtable><mo fence="true">âˆ¥</mo></mrow><annotation encoding="application/x-tex">\begin{Vmatrix} 1 &amp; 2 \\ 3 &amp; 4 \\ \end{Vmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.45em;"><span class="pstrut" style="height:4.4em;"></span><span style="width:0.556em;height:2.400em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.556em" height="2.400em" viewbox="0 0 556 2400"><path d="M145 15 v585 v1200 v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v-1200 v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v1200 v585 h43z
M367 15 v585 v1200 v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v-1200 v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v1200 v585 h43z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.45em;"><span class="pstrut" style="height:4.4em;"></span><span style="width:0.556em;height:2.400em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.556em" height="2.400em" viewbox="0 0 556 2400"><path d="M145 15 v585 v1200 v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v-1200 v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v1200 v585 h43z
M367 15 v585 v1200 v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v-1200 v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v1200 v585 h43z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnlines="none solid" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\left[
    \begin{array}{cc|c}
      1&amp;2&amp;3\\
      4&amp;5&amp;6
    \end{array}
\right]
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">5</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:2.4em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-0.95em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>n</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>ifÂ </mtext><mstyle scriptlevel="0" displaystyle="false"><mi>n</mi></mstyle><mtext>Â isÂ even</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>3</mn><mi>n</mi><mo>+</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>ifÂ </mtext><mstyle scriptlevel="0" displaystyle="false"><mi>n</mi></mstyle><mtext>Â isÂ odd</mtext></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">        f(n) =
        \begin{cases}
        n/2,  &amp; \text{if $n$ is even} \\
        3n+1, &amp; \text{if $n$ is odd}
        \end{cases}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mord">/2</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">3</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">ifÂ </span><span class="mord mathnormal">n</span><span class="mord">Â isÂ even</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">ifÂ </span><span class="mord mathnormal">n</span><span class="mord">Â isÂ odd</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>        \left.
        \begin{array}{l}
        \text{if $n$ is even:}&n/2\\
        \text{if $n$ is odd:}&3n+1
        \end{array}
        \right\}
        =f(n)
</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">{</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>a</mi><mn>1</mn></msub><mi>x</mi><mo>+</mo><msub><mi>b</mi><mn>1</mn></msub><mi>y</mi><mo>+</mo><msub><mi>c</mi><mn>1</mn></msub><mi>z</mi><mo>=</mo><msub><mi>d</mi><mn>1</mn></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>a</mi><mn>2</mn></msub><mi>x</mi><mo>+</mo><msub><mi>b</mi><mn>2</mn></msub><mi>y</mi><mo>+</mo><msub><mi>c</mi><mn>2</mn></msub><mi>z</mi><mo>=</mo><msub><mi>d</mi><mn>2</mn></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>a</mi><mn>3</mn></msub><mi>x</mi><mo>+</mo><msub><mi>b</mi><mn>3</mn></msub><mi>y</mi><mo>+</mo><msub><mi>c</mi><mn>3</mn></msub><mi>z</mi><mo>=</mo><msub><mi>d</mi><mn>3</mn></msub></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">\left\{
\begin{array}{c}
a_1x+b_1y+c_1z=d_1 \\
a_2x+b_2y+c_2z=d_2 \\
a_3x+b_3y+c_3z=d_3
\end{array}
\right.
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-2.5em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>â©</span></span></span><span style="top:-2.492em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.016em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.016em" style="width:0.8889em" viewbox="0 0 888.89 16" preserveaspectratio="xMinYMin"><path d="M384 0 H504 V16 H384z M384 0 H504 V16 H384z"/></svg></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>â¨</span></span></span><span style="top:-4.292em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.016em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.016em" style="width:0.8889em" viewbox="0 0 888.89 16" preserveaspectratio="xMinYMin"><path d="M384 0 H504 V16 H384z M384 0 H504 V16 H384z"/></svg></span></span><span style="top:-4.3em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>â§</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>a</mi><mn>1</mn></msub><mi>x</mi><mo>+</mo><msub><mi>b</mi><mn>1</mn></msub><mi>y</mi><mo>+</mo><msub><mi>c</mi><mn>1</mn></msub><mi>z</mi><mo>=</mo><msub><mi>d</mi><mn>1</mn></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>a</mi><mn>2</mn></msub><mi>x</mi><mo>+</mo><msub><mi>b</mi><mn>2</mn></msub><mi>y</mi><mo>+</mo><msub><mi>c</mi><mn>2</mn></msub><mi>z</mi><mo>=</mo><msub><mi>d</mi><mn>2</mn></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>a</mi><mn>3</mn></msub><mi>x</mi><mo>+</mo><msub><mi>b</mi><mn>3</mn></msub><mi>y</mi><mo>+</mo><msub><mi>c</mi><mn>3</mn></msub><mi>z</mi><mo>=</mo><msub><mi>d</mi><mn>3</mn></msub></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">\begin{cases}
a_1x+b_1y+c_1z=d_1 \\
a_2x+b_2y+c_2z=d_2 \\
a_3x+b_3y+c_3z=d_3
\end{cases}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.32em;vertical-align:-1.91em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35em;"><span style="top:-2.2em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>â©</span></span></span><span style="top:-2.192em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.316em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.316em" style="width:0.8889em" viewbox="0 0 888.89 316" preserveaspectratio="xMinYMin"><path d="M384 0 H504 V316 H384z M384 0 H504 V316 H384z"/></svg></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>â¨</span></span></span><span style="top:-4.292em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.316em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.316em" style="width:0.8889em" viewbox="0 0 888.89 316" preserveaspectratio="xMinYMin"><path d="M384 0 H504 V316 H384z M384 0 H504 V316 H384z"/></svg></span></span><span style="top:-4.6em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>â§</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.85em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.53em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.91em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>x</mi><mo>=</mo><msub><mi>a</mi><mn>0</mn></msub><mo>+</mo><mfrac><msup><mn>1</mn><mn>2</mn></msup><mrow><msub><mi>a</mi><mn>1</mn></msub><mo>+</mo><mfrac><msup><mn>2</mn><mn>2</mn></msup><mrow><msub><mi>a</mi><mn>2</mn></msub><mo>+</mo><mfrac><msup><mn>3</mn><mn>2</mn></msup><mrow><msub><mi>a</mi><mn>3</mn></msub><mo>+</mo><mfrac><msup><mn>4</mn><mn>4</mn></msup><mrow><msub><mi>a</mi><mn>4</mn></msub><mo>+</mo><mo>â‹¯</mo></mrow></mfrac></mrow></mfrac></mrow></mfrac></mrow></mfrac></mrow><annotation encoding="application/x-tex">x = a_0 + \cfrac{1^2}{a_1
          + \cfrac{2^2}{a_2
          + \cfrac{3^2}{a_3 + \cfrac{4^4}{a_4 + \cdots}}}}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:6.866em;vertical-align:-5.276em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.59em;"><span style="top:-2.11em;"><span class="pstrut" style="height:3.59em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.59em;"><span style="top:-2.11em;"><span class="pstrut" style="height:3.59em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.59em;"><span style="top:-2.11em;"><span class="pstrut" style="height:3.59em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.59em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="minner">â‹¯</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.74em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">4</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span></span></span></span></span><span style="top:-3.82em;"><span class="pstrut" style="height:3.59em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-4.33em;"><span class="pstrut" style="height:3.59em;"></span><span class="mord"><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.316em;"><span></span></span></span></span></span><span></span></span></span></span><span style="top:-3.82em;"><span class="pstrut" style="height:3.59em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-4.33em;"><span class="pstrut" style="height:3.59em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.796em;"><span></span></span></span></span></span><span></span></span></span></span><span style="top:-3.82em;"><span class="pstrut" style="height:3.59em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-4.33em;"><span class="pstrut" style="height:3.59em;"></span><span class="mord"><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:5.276em;"><span></span></span></span></span></span><span></span></span></span></span></span></span></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>x</mi><mo>=</mo><msub><mi>a</mi><mn>0</mn></msub><mo>+</mo><mfrac><msup><mn>1</mn><mn>2</mn></msup><mrow><msub><mi>a</mi><mn>1</mn></msub><mo>+</mo></mrow></mfrac><mfrac><msup><mn>2</mn><mn>2</mn></msup><mrow><msub><mi>a</mi><mn>2</mn></msub><mo>+</mo></mrow></mfrac><mfrac><msup><mn>3</mn><mn>2</mn></msup><mrow><msub><mi>a</mi><mn>3</mn></msub><mo>+</mo></mrow></mfrac><mfrac><msup><mn>4</mn><mn>4</mn></msup><mrow><msub><mi>a</mi><mn>4</mn></msub><mo>+</mo></mrow></mfrac><mo>â‹¯</mo></mrow><annotation encoding="application/x-tex">x = a_0 + \frac{1^2}{a_1+}
          \frac{2^2}{a_2+}
          \frac{3^2}{a_3 +} \frac{4^4}{a_4 +} \cdots
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.3271em;vertical-align:-0.836em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">+</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">+</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">+</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">+</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">4</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â‹¯</span></span></span></span></span></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em" rowlines="solid none none"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">B</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">d</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">B</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">r</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msup><mi>e</mi><mrow><mi>i</mi><mfrac><mi>Ï€</mi><mn>2</mn></mfrac></mrow></msup><mspace width="1em"><msup><mi>e</mi><mfrac><mrow><mi>i</mi><mi>Ï€</mi></mrow><mn>2</mn></mfrac></msup></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msup><mi>e</mi><mrow><mi>i</mi><mi>Ï€</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msubsup><mo>âˆ«</mo><mrow><mo>âˆ’</mo><mfrac><mi>Ï€</mi><mn>2</mn></mfrac></mrow><mfrac><mi>Ï€</mi><mn>2</mn></mfrac></msubsup><mi>sin</mi><mo>â¡</mo><mi>x</mi><mtext>â€‰</mtext><mi>d</mi><mi>x</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msubsup><mo>âˆ«</mo><mrow><mo>âˆ’</mo><mi>Ï€</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow><mrow><mi>Ï€</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msubsup><mi>sin</mi><mo>â¡</mo><mi>x</mi><mtext>â€‰</mtext><mi>d</mi><mi>x</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{array}{cc}
\mathrm{Bad} &amp; \mathrm{Better} \\
\hline \\
e^{i\frac{\pi}2} \quad e^{\frac{i\pi}2}&amp; e^{i\pi/2} \\
\int_{-\frac\pi2}^\frac\pi2 \sin x\,dx &amp; \int_{-\pi/2}^{\pi/2}\sin x\,dx \\
\end{array}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:5.4011em;vertical-align:-2.4505em;"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.9505em;"><span style="top:-4.9505em;"><span class="pstrut" style="height:4.9505em;"></span><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.9505em;"><span style="top:-5.1934em;"><span class="pstrut" style="height:3.0829em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">Bad</span></span></span></span><span style="top:-3.9934em;"><span class="pstrut" style="height:3.0829em;"></span><span class="mord"></span></span><span style="top:-2.6719em;"><span class="pstrut" style="height:3.0829em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8471em;"><span style="top:-3.363em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6915em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:1em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9616em;"><span style="top:-3.363em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8551em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">iÏ€</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-1.229em;"><span class="pstrut" style="height:3.0829em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em;">âˆ«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.042em;"><span style="top:-2.6442em;margin-left:-0.1945em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6915em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span><span style="top:-3.5579em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6915em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5966em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">sin</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.4505em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.9505em;"><span style="top:-5.1934em;"><span class="pstrut" style="height:3.0829em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">Better</span></span></span></span><span style="top:-2.6719em;"><span class="pstrut" style="height:3.0829em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">iÏ€</span><span class="mord mtight">/2</span></span></span></span></span></span></span></span></span></span></span><span style="top:-1.229em;"><span class="pstrut" style="height:3.0829em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em;">âˆ«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0829em;"><span style="top:-2.3442em;margin-left:-0.1945em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="mord mtight">/2</span></span></span></span><span style="top:-3.2579em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">Ï€</span><span class="mord mtight">/2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5308em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">sin</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.4505em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span style="top:-6.7011em;"><span class="pstrut" style="height:4.9505em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.4505em;"><span></span></span></span></span></span></span></span></span></span></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em" rowlines="solid none"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">B</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">d</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">B</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">r</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">{</mo><mi>x</mi><mi mathvariant="normal">âˆ£</mi><msup><mi>x</mi><mn>2</mn></msup><mo>âˆˆ</mo><mi mathvariant="double-struck">Z</mi><mo stretchy="false">}</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">{</mo><mi>x</mi><mo>âˆ£</mo><msup><mi>x</mi><mn>2</mn></msup><mo>âˆˆ</mo><mi mathvariant="double-struck">Z</mi><mo stretchy="false">}</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{array}{cc}
\mathrm{Bad} &amp; \mathrm{Better} \\
\hline \\
\{x|x^2\in\Bbb Z\} &amp; \{x\mid x^2\in\Bbb Z\} \\
\end{array}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:4.05em;"></span><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">Bad</span></span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">{</span><span class="mord mathnormal">x</span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathbb">Z</span><span class="mclose">}</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">Better</span></span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">{</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âˆ£</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathbb">Z</span><span class="mclose">}</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span style="top:-4.9em;"><span class="pstrut" style="height:4.05em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span></span></span></span></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em" rowlines="solid none"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">B</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">d</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">B</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">r</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mo>âˆ­</mo><mi>V</mi></msub><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi mathvariant="normal">d</mi><mi>z</mi><mi mathvariant="normal">d</mi><mi>y</mi><mi mathvariant="normal">d</mi><mi>x</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mo>âˆ­</mo><mi>V</mi></msub><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mtext>â€‰</mtext><mi mathvariant="normal">d</mi><mi>z</mi><mtext>â€‰</mtext><mi mathvariant="normal">d</mi><mi>y</mi><mtext>â€‰</mtext><mi mathvariant="normal">d</mi><mi>x</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{array}{cc}
\mathrm{Bad} &amp; \mathrm{Better} \\
\hline \\
\iiint_V f(x){\rm d}z {\rm d}y {\rm d}x &amp; \iiint_V f(x)\,{\rm d}z\,{\rm d}y\,{\rm d}x
\end{array}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:4.05em;"></span><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">Bad</span></span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005em;">âˆ­</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1226em;"><span style="top:-2.3443em;margin-left:-0.1945em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3557em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord"><span class="mord"><span class="mord mathrm">d</span></span></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mord"><span class="mord"><span class="mord mathrm">d</span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord"><span class="mord"><span class="mord mathrm">d</span></span></span><span class="mord mathnormal">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">Better</span></span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005em;">âˆ­</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1226em;"><span style="top:-2.3443em;margin-left:-0.1945em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3557em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">d</span></span></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">d</span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">d</span></span></span><span class="mord mathnormal">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span style="top:-4.9em;"><span class="pstrut" style="height:4.05em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span></span></span></span></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em" rowlines="solid none none"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">B</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">d</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">B</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">r</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ«</mo><msub><mo>âˆ«</mo><mi>S</mi></msub><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mtext>â€‰</mtext><mi>d</mi><mi>y</mi><mtext>â€‰</mtext><mi>d</mi><mi>x</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mo>âˆ¬</mo><mi>S</mi></msub><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mtext>â€‰</mtext><mi>d</mi><mi>y</mi><mtext>â€‰</mtext><mi>d</mi><mi>x</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ«</mo><mo>âˆ«</mo><msub><mo>âˆ«</mo><mi>V</mi></msub><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mtext>â€‰</mtext><mi>d</mi><mi>z</mi><mtext>â€‰</mtext><mi>d</mi><mi>y</mi><mtext>â€‰</mtext><mi>d</mi><mi>x</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mo>âˆ­</mo><mi>V</mi></msub><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mtext>â€‰</mtext><mi>d</mi><mi>z</mi><mtext>â€‰</mtext><mi>d</mi><mi>y</mi><mtext>â€‰</mtext><mi>d</mi><mi>x</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{array}{cc}
\mathrm{Bad} &amp; \mathrm{Better} \\
\hline \\
\int\int_S f(x)\,dy\,dx &amp; \iint_S f(x)\,dy\,dx \\
\int\int\int_V f(x)\,dz\,dy\,dx &amp; \iiint_V f(x)\,dz\,dy\,dx
\end{array}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.8em;vertical-align:-2.15em;"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:4.65em;"></span><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">Bad</span></span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em;">âˆ«</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em;">âˆ«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1225em;"><span style="top:-2.3442em;margin-left:-0.1945em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3558em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em;">âˆ«âˆ«</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em;">âˆ«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1225em;"><span style="top:-2.3442em;margin-left:-0.1945em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3558em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">Better</span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005em;">âˆ¬</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1226em;"><span style="top:-2.3443em;margin-left:-0.1945em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3557em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005em;">âˆ­</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1226em;"><span style="top:-2.3443em;margin-left:-0.1945em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3557em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span style="top:-6.1em;"><span class="pstrut" style="height:4.65em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<p><a href="http://example.com/">http://example.com/</a><br>
<a href="mailto:address@example.com">address@example.com</a></p>
<hr>
<p>Here is a footnote reference,[^1] and another.[^longnote]</p>
<h2 id="endnotes"><a class="header-anchor" href="#endnotes">ğŸŒ³</a>Endnotes</h2>
<p>[^1]: Here is the footnote.<br>
[^longnote]: Hereâ€™s one with multiple blocks.</p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºç§‘å­¦</category>
      </categories>
  </entry>
  <entry>
    <title>Lua 5.0 ~ 5.4 å­¦ä¹ ç¬”è®°</title>
    <url>/2019/04/06/lua-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h2 id="1-begin"><a class="header-anchor" href="#1-begin">ğŸŒ³</a>1. Begin</h2>
<h3 id="1-1-chunk"><a class="header-anchor" href="#1-1-chunk">ğŸŒ³</a>1.1 chunk</h3>
<p>Chunk æ˜¯ä¸€ç³»åˆ—è¯­å¥ï¼ŒLua æ‰§è¡Œçš„æ¯ä¸€<strong>å—</strong>è¯­å¥ï¼Œæ¯”å¦‚<strong>ä¸€ä¸ªæ–‡ä»¶</strong>æˆ–è€…<strong>äº¤äº’æ¨¡å¼</strong>ä¸‹çš„<em>æ¯ä¸€è¡Œ</em>éƒ½æ˜¯ä¸€ä¸ª Chunkã€‚<br>
æ¯ä¸ªè¯­å¥ç»“å°¾çš„åˆ†å·ï¼ˆ;ï¼‰æ˜¯å¯é€‰çš„ï¼Œä½†å¦‚æœåŒä¸€è¡Œæœ‰å¤šä¸ªè¯­å¥æœ€å¥½ç”¨ï¼›åˆ†å¼€(but valid)<br>
Chunkå¯ä»¥å¾ˆå¤§ï¼Œåœ¨ Lua ä¸­å‡ ä¸ª MByte çš„ Chunk æ˜¯å¾ˆå¸¸è§çš„</p>
<p>äº¤äº’æ¨¡å¼ä¸‹ é”®å…¥æ–‡ä»¶ç»“æŸç¬¦å¯ä»¥é€€å‡ºäº¤äº’æ¨¡å¼ï¼ˆCtrl-D in Unix, Ctrl-Z in DOS/Windowsï¼‰ï¼Œæˆ–è€…è°ƒç”¨ OS åº“çš„ os.exit()å‡½æ•°ä¹Ÿå¯ä»¥é€€å‡º</p>
<blockquote>
<p>prompt&gt; lua -la -lb</p>
</blockquote>
<p>å‘½ä»¤é¦–å…ˆåœ¨ä¸€ä¸ª Chunk å†…å…ˆè¿è¡Œ a ç„¶åè¿è¡Œ bã€‚ï¼ˆæ³¨æ„ï¼š-l é€‰é¡¹ä¼šè°ƒç”¨ requireï¼Œå°†ä¼šåœ¨æŒ‡å®šçš„ç›®å½•ä¸‹æœç´¢æ–‡ä»¶ï¼Œå¦‚æœç¯å¢ƒå˜é‡æ²¡æœ‰è®¾å¥½ï¼Œä¸Šé¢çš„å‘½ä»¤å¯èƒ½ä¸èƒ½æ­£ç¡®è¿è¡Œã€‚)</p>
<blockquote>
<p>lua -i -la -lb</p>
</blockquote>
<p>å°†åœ¨ä¸€ä¸ª Chunk å†…å…ˆè¿è¡Œ a ç„¶åè¿è¡Œ bï¼Œæœ€åç›´æ¥è¿›å…¥äº¤äº’æ¨¡å¼</p>
<p>æœ€å¥½ä¸è¦ä½¿ç”¨ä¸‹åˆ’çº¿åŠ å¤§å†™å­—æ¯çš„æ ‡ç¤ºç¬¦ï¼Œå› ä¸º Lua çš„ä¿ç•™å­—ä¹Ÿæ˜¯è¿™æ ·çš„ã€‚</p>
<h3 id="1-4-lua-command-line"><a class="header-anchor" href="#1-4-lua-command-line">ğŸŒ³</a>1.4 lua command line</h3>
<ul>
<li>
<p>-eï¼šç›´æ¥å°†å‘½ä»¤ä¼ å…¥ Lua</p>
<blockquote>
<p>prompt&gt; lua -e â€œprint(math.sin(12))â€ --&gt; -0.53657291800043</p>
</blockquote>
</li>
<li>
<p>-lï¼šåŠ è½½ä¸€ä¸ªæ–‡ä»¶.</p>
</li>
<li>
<p>-iï¼šè¿›å…¥äº¤äº’æ¨¡å¼.<br>
_PROMPT å†…ç½®å˜é‡ä½œä¸ºäº¤äº’æ¨¡å¼çš„æç¤ºç¬¦</p>
<blockquote>
<p>prompt&gt; lua -i -e â€œ_PROMPT=â€™ lua&gt; 'â€<br>
lua&gt;</p>
</blockquote>
</li>
</ul>
<p>Lua çš„è¿è¡Œè¿‡ç¨‹ï¼Œåœ¨è¿è¡Œå‚æ•°ä¹‹å‰ï¼ŒLua ä¼šæŸ¥æ‰¾ç¯å¢ƒå˜é‡ <code>LUA_INIT</code> çš„å€¼ï¼Œ</p>
<ul>
<li>å¦‚æœå˜é‡å­˜åœ¨å¹¶ä¸”<code>å€¼</code>ä¸º<code>@filename</code>ï¼ŒLua å°†<strong>åŠ è½½</strong>æŒ‡å®šæ–‡ä»¶ã€‚</li>
<li>å¦‚æœå˜é‡å­˜åœ¨ä½†<code>ä¸æ˜¯ä»¥@å¼€å¤´</code>ï¼ŒLuaå‡å®š filename ä¸º Lua ä»£ç æ–‡ä»¶å¹¶ä¸”<strong>è¿è¡Œ</strong>ä»–ã€‚</li>
</ul>
<p>å…¨å±€å˜é‡ <code>arg</code> å­˜æ”¾ Lua çš„å‘½ä»¤è¡Œå‚æ•°ã€‚åœ¨è¿è¡Œä»¥å‰ï¼ŒLua ä½¿ç”¨æ‰€æœ‰å‚æ•°æ„é€  arg è¡¨ã€‚</p>
<ul>
<li>è„šæœ¬åç´¢å¼•ä¸º 0ï¼Œ</li>
<li>è„šæœ¬çš„å‚æ•°ä» 1 å¼€å§‹å¢åŠ ã€‚</li>
<li>è„šæœ¬å‰é¢çš„å‚æ•°ä»-1 å¼€å§‹å‡å°‘</li>
</ul>
<blockquote>
<p>prompt&gt; lua -e â€œsin=math.sinâ€ script a b<br>
arg è¡¨å¦‚ä¸‹ï¼š</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">arg</span>[<span class="number">-3</span>] = <span class="string">&quot;lua&quot;</span></span><br><span class="line"><span class="built_in">arg</span>[<span class="number">-2</span>] = <span class="string">&quot;-e&quot;</span></span><br><span class="line"><span class="built_in">arg</span>[<span class="number">-1</span>] = <span class="string">&quot;sin=math.sin&quot;</span></span><br><span class="line"><span class="built_in">arg</span>[<span class="number">0</span>] = <span class="string">&quot;script&quot;</span></span><br><span class="line"><span class="built_in">arg</span>[<span class="number">1</span>] = <span class="string">&quot;a&quot;</span></span><br><span class="line"><span class="built_in">arg</span>[<span class="number">2</span>] = <span class="string">&quot;b&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-lua-basic-type"><a class="header-anchor" href="#2-lua-basic-type">ğŸŒ³</a>2. lua basic type</h2>
<p>Lua æ˜¯åŠ¨æ€ç±»å‹è¯­è¨€ï¼Œå˜é‡ä¸è¦ç±»å‹å®šä¹‰ã€‚<br>
Lua ä¸­æœ‰8 ä¸ªåŸºæœ¬ç±»å‹åˆ†åˆ«ä¸ºï¼š<code>nilã€booleanã€numberã€stringã€userdataã€functionã€thread å’Œ table</code>ã€‚<br>
å‡½æ•° <code>type</code> å¯ä»¥æµ‹è¯•ç»™å®šå˜é‡æˆ–è€…å€¼çš„ç±»å‹ã€‚</p>
<p>åœ¨æ§åˆ¶ç»“æ„çš„æ¡ä»¶ä¸­é™¤äº† <code>false</code> å’Œ <code>nil</code> ä¸ºå‡ï¼Œå…¶ä»–å€¼éƒ½ä¸ºçœŸã€‚<br>
æ‰€ä»¥ Lua è®¤ä¸º <code>0</code> å’Œ<code>ç©ºä¸²</code>éƒ½æ˜¯çœŸã€‚</p>
<p><code>number</code>è¡¨ç¤ºå®æ•°ï¼ŒLua ä¸­æ²¡æœ‰æ•´æ•°ã€‚</p>
<p>note: <em><strong>ä¸€èˆ¬æœ‰ä¸ªé”™è¯¯çš„çœ‹æ³• CPU è¿ç®—æµ®ç‚¹æ•°æ¯”æ•´æ•°æ…¢ã€‚äº‹å®ä¸æ˜¯å¦‚æ­¤ï¼Œç”¨å®æ•°ä»£æ›¿æ•´æ•°ä¸ä¼šæœ‰ä»€ä¹ˆè¯¯å·®ï¼ˆé™¤éæ•°å­—å¤§äº 100,000,000,000,000ï¼‰ã€‚</strong></em><br>
Luaçš„ numbers å¯ä»¥å¤„ç†ä»»ä½•é•¿æ•´æ•°ä¸ç”¨æ‹…å¿ƒè¯¯å·®ã€‚</p>
<p>note: ä½ ä¹Ÿå¯ä»¥åœ¨ç¼–è¯‘ <code>Lua</code> çš„æ—¶å€™ä½¿ç”¨é•¿æ•´å‹æˆ–è€…<code>å•ç²¾åº¦æµ®ç‚¹å‹</code>ä»£æ›¿ numbersï¼Œåœ¨ä¸€äº›å¹³å°ç¡¬ä»¶<code>ä¸æ”¯æŒæµ®ç‚¹æ•°</code>çš„æƒ…å†µä¸‹è¿™ä¸ªç‰¹æ€§æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œå…·ä½“çš„æƒ…å†µè¯·å‚è€ƒ Lua å‘å¸ƒç‰ˆæ‰€é™„çš„è¯¦ç»†è¯´æ˜ã€‚</p>
<h3 id="2-4-string"><a class="header-anchor" href="#2-4-string">ğŸŒ³</a>2.4 string</h3>
<p>å­—ç¬¦çš„åºåˆ—, lua æ˜¯ 8 ä½å­—èŠ‚ï¼Œæ‰€ä»¥å­—ç¬¦ä¸²å¯ä»¥åŒ…å«ä»»ä½•æ•°å€¼å­—ç¬¦ï¼ŒåŒ…æ‹¬åµŒå…¥çš„ 0ã€‚<br>
è¿™æ„å‘³ç€ä½ å¯ä»¥å­˜å‚¨ä»»æ„çš„äºŒè¿›åˆ¶æ•°æ®åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²é‡Œã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = <span class="string">&quot;one string&quot;</span></span><br><span class="line">b = <span class="built_in">string</span>.<span class="built_in">gsub</span>(a, <span class="string">&quot;one&quot;</span>, <span class="string">&quot;another&quot;</span>) <span class="comment">-- change string parts</span></span><br><span class="line"><span class="built_in">print</span>(a) <span class="comment">--&gt; one string</span></span><br><span class="line"><span class="built_in">print</span>(b) <span class="comment">--&gt; another string</span></span><br></pre></td></tr></table></figure>
<p>Lua å¯ä»¥é«˜æ•ˆçš„å¤„ç†é•¿å­—ç¬¦ä¸²ï¼Œ<code>1M</code> çš„ string åœ¨ Lua ä¸­æ˜¯å¾ˆå¸¸è§çš„ã€‚å¯ä»¥ä½¿ç”¨<code>å•å¼•å·</code>æˆ–è€…<code>åŒå¼•å·</code>è¡¨ç¤ºå­—ç¬¦ä¸²</p>
<p>è¿˜å¯ä»¥åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨\dddï¼ˆddd ä¸ºä¸‰ä½åè¿›åˆ¶æ•°å­—ï¼‰æ–¹å¼è¡¨ç¤ºå­—æ¯ã€‚</p>
<blockquote>
<p>â€œalo\n123&quot;â€<br>
â€˜\97lo\10\04923&quot;â€™<br>
æ˜¯ç›¸åŒçš„</p>
</blockquote>
<p>è¿˜å¯ä»¥ä½¿ç”¨<code>[[...]]</code>è¡¨ç¤ºå­—ç¬¦ä¸²ã€‚<br>
è¿™ç§å½¢å¼çš„å­—ç¬¦ä¸²å¯ä»¥åŒ…å«<code>å¤šè¡Œ</code>ä¹Ÿï¼Œå¯ä»¥åµŒå¥—ä¸”<code>ä¸ä¼šè§£é‡Šè½¬ä¹‰åºåˆ—</code>ï¼Œå¦‚æœ<code>ç¬¬ä¸€ä¸ªå­—ç¬¦</code>æ˜¯<code>æ¢è¡Œç¬¦</code>ä¼šè¢«è‡ªåŠ¨<strong>å¿½ç•¥</strong>æ‰ã€‚</p>
<p>ç§å½¢å¼çš„å­—ç¬¦ä¸²ç”¨æ¥åŒ…å«ä¸€æ®µä»£ç æ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">page = <span class="string">[[</span></span><br><span class="line"><span class="string">&lt;HTML&gt;</span></span><br><span class="line"><span class="string">&lt;HEAD&gt;</span></span><br><span class="line"><span class="string">&lt;TITLE&gt;An HTML Page&lt;/TITLE&gt;</span></span><br><span class="line"><span class="string">&lt;/HEAD&gt;</span></span><br><span class="line"><span class="string">&lt;BODY&gt;</span></span><br><span class="line"><span class="string">Lua</span></span><br><span class="line"><span class="string">[[a text between double brackets]]</span></span><br><span class="line"><span class="string">&lt;/BODY&gt;</span></span><br><span class="line"><span class="string">&lt;/HTML&gt;</span></span><br><span class="line"><span class="string">]]</span></span><br><span class="line"><span class="built_in">io</span>.<span class="built_in">write</span>(page)</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œæ—¶ï¼ŒLua ä¼šè‡ªåŠ¨åœ¨ string å’Œ numbers ä¹‹é—´è‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ï¼Œå½“ä¸€ä¸ªå­—ç¬¦ä¸²ä½¿<br>
ç”¨ç®—æœ¯æ“ä½œç¬¦æ—¶ï¼Œstring å°±ä¼šè¢«è½¬æˆæ•°å­—ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;10&quot;</span> + <span class="number">1</span>) <span class="comment">--&gt; 11</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;10 + 1&quot;</span>) <span class="comment">--&gt; 10 + 1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;-5.3e - 10&quot;</span> * <span class="string">&quot;2&quot;</span>) <span class="comment">--&gt; -1.06e-09</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span> + <span class="number">1</span>) <span class="comment">-- ERROR (cannot convert &quot;hello&quot;)</span></span><br></pre></td></tr></table></figure>
<p><code>..</code>åœ¨ Lua ä¸­æ˜¯å­—ç¬¦ä¸²è¿æ¥ç¬¦ï¼Œå½“åœ¨ä¸€ä¸ª<code>æ•°å­—</code>åé¢å†™<code>..</code>æ—¶ï¼Œå¿…é¡»<code>åŠ ä¸Šç©ºæ ¼</code>ä»¥é˜²æ­¢è¢«è§£é‡Šé”™</p>
<p>æ˜¾å¼å°† string è½¬æˆæ•°å­—å¯ä»¥ä½¿ç”¨å‡½æ•° <code>tonumber()</code>ï¼Œå¦‚æœ string ä¸æ˜¯æ­£ç¡®çš„æ•°å­—è¯¥å‡½æ•°å°†è¿”å› <code>nil</code>ã€‚</p>
<p>å¯ä»¥è°ƒç”¨<code>tostring()</code>å°†æ•°å­—è½¬æˆå­—ç¬¦ä¸²ï¼Œè¿™ç§è½¬æ¢ä¸€ç›´æœ‰æ•ˆ</p>
<h3 id="2-5-function"><a class="header-anchor" href="#2-5-function">ğŸŒ³</a>2.5 Function</h3>
<p>å‡½æ•°æ˜¯<code>ç¬¬ä¸€ç±»å€¼</code>ï¼ˆå’Œå…¶ä»–å˜é‡ç›¸åŒï¼‰ï¼Œæ„å‘³ç€</p>
<ul>
<li>å‡½æ•°å¯ä»¥å­˜å‚¨åœ¨å˜é‡ä¸­ï¼Œ</li>
<li>å¯ä»¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œ</li>
<li>ä¹Ÿå¯ä»¥ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ã€‚</li>
</ul>
<h3 id="2-6-userdata-and-threads"><a class="header-anchor" href="#2-6-userdata-and-threads">ğŸŒ³</a>2.6 Userdata and Threads</h3>
<ul>
<li>userdata å¯ä»¥å°† C æ•°æ®å­˜æ”¾åœ¨ Lua å˜é‡ä¸­ï¼Œ</li>
<li>userdata åœ¨ Lua ä¸­é¢„å®šä¹‰æ“ä½œ<code>èµ‹å€¼</code>å’Œ<code>ç›¸ç­‰æ¯”è¾ƒ</code></li>
</ul>
<h2 id="3-expression-è¡¨è¾¾å¼"><a class="header-anchor" href="#3-expression-è¡¨è¾¾å¼">ğŸŒ³</a>3. expression è¡¨è¾¾å¼</h2>
<h3 id="3-2-relational-operators"><a class="header-anchor" href="#3-2-relational-operators">ğŸŒ³</a>3.2 Relational operators</h3>
<p>å…³ç³»è¿ç®—ç¬¦</p>
<blockquote>
<p>&lt; &gt; &lt;= &gt;= == ~=</p>
</blockquote>
<ul>
<li>Lua é€šè¿‡<code>å¼•ç”¨</code>æ¯”è¾ƒ<code>tablesã€userdataã€functions</code>ã€‚ä¹Ÿå°±æ˜¯è¯´å½“ä¸”ä»…å½“ä¸¤è€…è¡¨ç¤ºåŒä¸€ä¸ªå¯¹è±¡æ—¶ç›¸ç­‰ã€‚</li>
<li>Lua æ¯”è¾ƒæ•°å­—æŒ‰ä¼ ç»Ÿçš„æ•°å­—å¤§å°è¿›è¡Œï¼Œ</li>
<li>æ¯”è¾ƒå­—ç¬¦ä¸²æŒ‰å­—æ¯çš„é¡ºåºè¿›è¡Œï¼Œä½†æ˜¯å­—æ¯é¡ºåºä¾èµ–äºæœ¬åœ°ç¯å¢ƒ</li>
</ul>
<h3 id="3-3-logical-operator-é€»è¾‘è¿ç®—ç¬¦"><a class="header-anchor" href="#3-3-logical-operator-é€»è¾‘è¿ç®—ç¬¦">ğŸŒ³</a>3.3 logical operator é€»è¾‘è¿ç®—ç¬¦</h3>
<blockquote>
<p>and or not</p>
</blockquote>
<p>ä¸€ä¸ªå¾ˆå®ç”¨çš„æŠ€å·§ï¼šå¦‚æœ x ä¸º false æˆ–è€… nil åˆ™ç»™ x èµ‹åˆå§‹å€¼ v</p>
<blockquote>
<p>x = x or v</p>
</blockquote>
<p>C è¯­è¨€ä¸­çš„ä¸‰å…ƒè¿ç®—ç¬¦</p>
<blockquote>
<p>(a and b) or c ==&gt; a ? b : c</p>
</blockquote>
<h3 id="3-5-operator-priority-ä¼˜å…ˆçº§"><a class="header-anchor" href="#3-5-operator-priority-ä¼˜å…ˆçº§">ğŸŒ³</a>3.5 operator priority ä¼˜å…ˆçº§</h3>
<p>ä»é«˜åˆ°ä½çš„é¡ºåºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">^</span><br><span class="line"><span class="keyword">not</span> - (unary)</span><br><span class="line">* /</span><br><span class="line">+ -</span><br><span class="line">..</span><br><span class="line">&lt; &gt; &lt;= &gt;= ~= ==</span><br><span class="line"><span class="keyword">and</span></span><br><span class="line"><span class="keyword">or</span></span><br></pre></td></tr></table></figure>
<p>é™¤äº†^å’Œâ€¦å¤–æ‰€æœ‰çš„äºŒå…ƒè¿ç®—ç¬¦éƒ½æ˜¯<code>å·¦è¿æ¥</code>çš„ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a+i &lt; b/<span class="number">2</span>+<span class="number">1</span> &lt;<span class="comment">--&gt; (a+i) &lt; ((b/2)+1)</span></span><br><span class="line"><span class="number">5</span>+x^<span class="number">2</span>*<span class="number">8</span> &lt;<span class="comment">--&gt; 5+((x^2)*8)</span></span><br><span class="line">a &lt; y <span class="keyword">and</span> y &lt;= z &lt;<span class="comment">--&gt; (a &lt; y) and (y &lt;= z)</span></span><br><span class="line">-x^<span class="number">2</span> &lt;<span class="comment">--&gt; -(x^2)</span></span><br><span class="line">x^y^z &lt;<span class="comment">--&gt; x^(y^z)</span></span><br></pre></td></tr></table></figure>
<h3 id="3-6-table-constructor-è¡¨çš„æ„é€ "><a class="header-anchor" href="#3-6-table-constructor-è¡¨çš„æ„é€ ">ğŸŒ³</a>3.6 table constructor è¡¨çš„æ„é€ </h3>
<p>æœ€ç®€å•çš„æ„é€ å‡½æ•°æ˜¯<code>&#123;&#125;</code>ï¼Œç”¨æ¥åˆ›å»ºä¸€ä¸ª<code>ç©ºè¡¨</code>ã€‚</p>
<p>ä½¿ç”¨ table æ„é€ ä¸€ä¸ª listï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">list = <span class="literal">nil</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">io</span>.<span class="built_in">lines</span>() <span class="keyword">do</span></span><br><span class="line"> list = &#123;<span class="built_in">next</span>=list, value=line&#125;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åµŒå¥—æ„é€ å‡½æ•°</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">polyline = &#123;color=<span class="string">&quot;blue&quot;</span>, thickness=<span class="number">2</span>, npoints=<span class="number">4</span>,</span><br><span class="line"> &#123;x=<span class="number">0</span>, y=<span class="number">0</span>&#125;,</span><br><span class="line"> &#123;x=<span class="number">-10</span>, y=<span class="number">0</span>&#125;,</span><br><span class="line"> &#123;x=<span class="number">-10</span>, y=<span class="number">1</span>&#125;,</span><br><span class="line"> &#123;x=<span class="number">0</span>, y=<span class="number">1</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸èƒ½ä½¿ç”¨è´Ÿç´¢å¼•åˆå§‹åŒ–ä¸€ä¸ªè¡¨ä¸­å…ƒç´ ï¼Œ</li>
<li>å­—ç¬¦ä¸²ç´¢å¼•ä¹Ÿä¸èƒ½è¢«æ°å½“çš„è¡¨ç¤ºã€‚</li>
</ul>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">opnames = &#123;</span><br><span class="line">    [<span class="string">&quot;+&quot;</span>] = <span class="string">&quot;add&quot;</span>,</span><br><span class="line">    [<span class="string">&quot;-&quot;</span>] = <span class="string">&quot;sub&quot;</span>,</span><br><span class="line">    [<span class="string">&quot;*&quot;</span>] = <span class="string">&quot;mul&quot;</span>,</span><br><span class="line">    [<span class="string">&quot;/&quot;</span>] = <span class="string">&quot;div&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">i = <span class="number">20</span>; s = <span class="string">&quot;-&quot;</span></span><br><span class="line">a = &#123;[i+<span class="number">0</span>] = s, [i+<span class="number">1</span>] = s..s, [i+<span class="number">2</span>] = s..s..s,&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(opnames[s]) <span class="comment">--&gt; sub</span></span><br><span class="line"><span class="built_in">print</span>(a[<span class="number">22</span>]) <span class="comment">--&gt; ---</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æ³¨æ„ï¼šä¸æ¨èæ•°ç»„ä¸‹æ ‡<code>ä» 0 å¼€å§‹</code>ï¼Œå¦åˆ™<code>å¾ˆå¤šæ ‡å‡†åº“ä¸èƒ½ä½¿ç”¨</code>ã€‚</li>
<li>åœ¨æ„é€ å‡½æ•°çš„<code>æœ€åçš„</code>&quot;,&quot;æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥æ–¹ä¾¿ä»¥åçš„æ‰©å±•ã€‚</li>
<li>åœ¨æ„é€ å‡½æ•°ä¸­åŸŸåˆ†éš”ç¬¦é€—å·ï¼ˆ&quot;,&quot;ï¼‰å¯ä»¥ç”¨åˆ†å·ï¼ˆ&quot;;&quot;ï¼‰æ›¿ä»£ï¼Œé€šå¸¸æˆ‘ä»¬ä½¿ç”¨åˆ†å·ç”¨æ¥åˆ†å‰²ä¸åŒç±»å‹çš„è¡¨å…ƒç´ ã€‚</li>
</ul>
<p>å¦‚æœçœŸçš„æƒ³è¦æ•°ç»„ä¸‹æ ‡ä» 0 å¼€å§‹ï¼š</p>
<blockquote>
<p>days = {[0]=â€œSundayâ€, â€œMondayâ€, â€œTuesdayâ€, â€œWednesdayâ€, â€œThursdayâ€, â€œFridayâ€, â€œSaturdayâ€}<br>
{x=10, y=45; â€œoneâ€, â€œtwoâ€, â€œthreeâ€}</p>
</blockquote>
<h3 id="4-basic-syntax-åŸºæœ¬è¯­æ³•"><a class="header-anchor" href="#4-basic-syntax-åŸºæœ¬è¯­æ³•">ğŸŒ³</a>4. basic syntax åŸºæœ¬è¯­æ³•</h3>
<blockquote>
<p>a, b = 10, 2<em>x &lt;â€“&gt; a=10; b=2</em>x</p>
</blockquote>
<p>é‡åˆ°èµ‹å€¼è¯­å¥ Lua ä¼šå…ˆè®¡ç®—å³è¾¹æ‰€æœ‰çš„å€¼ç„¶åå†æ‰§è¡Œèµ‹å€¼æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™æ ·<br>
è¿›è¡Œäº¤æ¢å˜é‡çš„å€¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">x, y = y, x <span class="comment">-- swap &#x27;x&#x27; for &#x27;y&#x27;</span></span><br><span class="line">a[i], a[j] = a[j], a[i] <span class="comment">-- swap &#x27;a[i]&#x27; for &#x27;a[i]&#x27;</span></span><br></pre></td></tr></table></figure>
<p>å½“å˜é‡ä¸ªæ•°å’Œå€¼çš„ä¸ªæ•°ä¸ä¸€è‡´æ—¶ï¼ŒLua ä¼šä¸€ç›´ä»¥å˜é‡ä¸ªæ•°ä¸ºåŸºç¡€é‡‡å–ä»¥ä¸‹ç­–ç•¥ï¼š</p>
<ul>
<li>a. å˜é‡ä¸ªæ•°&gt;å€¼çš„ä¸ªæ•° æŒ‰å˜é‡ä¸ªæ•°è¡¥è¶³ nil</li>
<li>b. å˜é‡ä¸ªæ•°&lt;å€¼çš„ä¸ªæ•° å¤šä½™çš„å€¼ä¼šè¢«å¿½ç•¥</li>
</ul>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a, b, c = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(a,b,c) <span class="comment">--&gt; 0 1 nil</span></span><br><span class="line">a, b = a+<span class="number">1</span>, b+<span class="number">1</span>, b+<span class="number">2</span> <span class="comment">-- value of b+2 is ignored</span></span><br><span class="line"><span class="built_in">print</span>(a,b) <span class="comment">--&gt; 1 2</span></span><br><span class="line">a, b, c = <span class="number">0</span></span><br><span class="line"><span class="built_in">print</span>(a,b,c) <span class="comment">--&gt; 0 nil nil</span></span><br></pre></td></tr></table></figure>
<h3 id="4-2-local-variable-code-block-å±€éƒ¨å˜é‡-ä»£ç å—"><a class="header-anchor" href="#4-2-local-variable-code-block-å±€éƒ¨å˜é‡-ä»£ç å—">ğŸŒ³</a>4.2  local variable &amp; code block å±€éƒ¨å˜é‡ ä»£ç å—</h3>
<p>ä½¿ç”¨ <code>local</code> åˆ›å»ºä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œä¸å…¨å±€å˜é‡ä¸åŒï¼Œå±€éƒ¨å˜é‡åªåœ¨è¢«å£°æ˜çš„é‚£ä¸ªä»£ç å—å†…æœ‰æ•ˆã€‚ä»£ç å—ï¼šæŒ‡ä¸€ä¸ª<code>æ§åˆ¶ç»“æ„</code>å†…ï¼Œä¸€ä¸ª<code>å‡½æ•°ä½“</code>ï¼Œæˆ–è€…ä¸€ä¸ª <code>chunk</code>ï¼ˆå˜é‡è¢«å£°æ˜çš„é‚£ä¸ªæ–‡ä»¶æˆ–è€…æ–‡æœ¬ä¸²ï¼‰</p>
<p>åº”è¯¥å°½å¯èƒ½çš„ä½¿ç”¨å±€éƒ¨å˜é‡ï¼Œæœ‰ä¸¤ä¸ªå¥½å¤„ï¼š</p>
<ol>
<li>é¿å…å‘½åå†²çª</li>
<li>è®¿é—®å±€éƒ¨å˜é‡çš„é€Ÿåº¦æ¯”å…¨å±€å˜é‡æ›´å¿«.</li>
</ol>
<blockquote>
<p>do â€¦ end</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> conditions <span class="keyword">then</span></span><br><span class="line">    statements</span><br><span class="line"><span class="keyword">elseif</span> conditions <span class="keyword">then</span></span><br><span class="line">    statements</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    statements</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> condition <span class="keyword">do</span></span><br><span class="line">    statements</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">repeat</span></span><br><span class="line">    statements;</span><br><span class="line"><span class="keyword">until</span> conditions;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ•°å€¼ for å¾ªç¯:</span></span><br><span class="line"><span class="keyword">for</span> var=exp1,exp2,exp3 <span class="keyword">do</span></span><br><span class="line">    loop-part</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- èŒƒå‹ for å¾ªç¯ï¼š</span></span><br><span class="line"><span class="comment">-- print all values of array &#x27;a&#x27;</span></span><br><span class="line"><span class="keyword">for</span> i,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(a) <span class="keyword">do</span> <span class="built_in">print</span>(v) <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">pairs</span>(t) <span class="keyword">do</span> <span class="built_in">print</span>(k) <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="4-3-break-return"><a class="header-anchor" href="#4-3-break-return">ğŸŒ³</a>4.3 break return</h3>
<p>æœ‰æ—¶å€™ä¸ºäº†è°ƒè¯•æˆ–è€…å…¶ä»–ç›®çš„éœ€è¦åœ¨ block çš„ä¸­é—´ä½¿ç”¨ return æˆ–è€… breakï¼Œå¯ä»¥æ˜¾å¼çš„ä½¿ç”¨ doâ€¦end æ¥å®ç°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> <span class="params">()</span></span></span><br><span class="line">    <span class="keyword">return</span> <span class="comment">--&lt;&lt; SYNTAX ERROR</span></span><br><span class="line">    <span class="comment">-- &#x27;return&#x27; is the last statement in the next block</span></span><br><span class="line">    <span class="keyword">do</span> <span class="keyword">return</span> <span class="keyword">end</span> <span class="comment">-- OK</span></span><br><span class="line">    ... <span class="comment">-- statements not reached</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="5-function"><a class="header-anchor" href="#5-function">ğŸŒ³</a>5. function</h2>
<p>è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œå¦‚æœå‚æ•°åˆ—è¡¨ä¸ºç©ºï¼Œå¿…é¡»ä½¿ç”¨()è¡¨æ˜æ˜¯å‡½æ•°è°ƒç”¨ã€‚</p>
<p>å½“å‡½æ•°<code>åªæœ‰ä¸€ä¸ªå‚æ•°</code>å¹¶ä¸”è¿™ä¸ªå‚æ•°æ˜¯<code>å­—ç¬¦ä¸²</code>æˆ–è€…<code>è¡¨æ„é€ </code>çš„æ—¶å€™ï¼Œ()æ˜¯å¯é€‰çš„ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span> <span class="string">&quot;Hello World&quot;</span>     <span class="comment">--&gt; print(&quot;Hello World&quot;)</span></span><br><span class="line"><span class="built_in">dofile</span> <span class="string">&#x27;a.lua&#x27;</span>          <span class="comment">--&gt; dofile (&#x27;a.lua&#x27;)</span></span><br><span class="line"><span class="built_in">print</span> <span class="string">[[a multi-line</span></span><br><span class="line"><span class="string">    message]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">[[a multi-line</span></span><br><span class="line"><span class="string">    message]]</span>)</span><br><span class="line"></span><br><span class="line">f&#123;x=<span class="number">10</span>, y=<span class="number">20</span>&#125;   <span class="comment">--&gt; f(&#123;x=10, y=20&#125;)</span></span><br><span class="line"><span class="built_in">type</span>&#123;&#125;          <span class="comment">--&gt; type(&#123;&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- é¢å‘å¯¹è±¡æ–¹å¼è°ƒç”¨å‡½æ•°çš„è¯­æ³•</span></span><br><span class="line">o:foo(x) <span class="comment">-- &gt; o.foo(o, x)</span></span><br></pre></td></tr></table></figure>
<p>string.findï¼Œå…¶è¿”å›åŒ¹é…ä¸²<code>â€œå¼€å§‹å’Œç»“æŸçš„ä¸‹æ ‡â€</code>ï¼ˆå¦‚æœä¸å­˜åœ¨åŒ¹é…ä¸²è¿”å› <code>nil</code>ï¼‰ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s, e = <span class="built_in">string</span>.<span class="built_in">find</span>(<span class="string">&quot;hello Lua users&quot;</span>, <span class="string">&quot;Lua&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(s, e) <span class="comment">--&gt; 7 9</span></span><br></pre></td></tr></table></figure>
<h3 id="5-1-multi-result-return"><a class="header-anchor" href="#5-1-multi-result-return">ğŸŒ³</a>5.1 multi result return</h3>
<p>è¿”å›å¤šä¸ªç»“æœå€¼</p>
<ul>
<li>
<p>ä½œä¸ºè¡¨è¾¾å¼è°ƒç”¨å‡½æ•°</p>
<ol>
<li>å½“è°ƒç”¨<code>ä½œä¸ºè¡¨è¾¾å¼æœ€åä¸€ä¸ªå‚æ•°</code>æˆ–è€…<code>ä»…æœ‰ä¸€ä¸ªå‚æ•°</code>æ—¶ï¼Œæ ¹æ®å˜é‡ä¸ªæ•°å‡½æ•°å°½å¯èƒ½å¤šåœ°è¿”å›å¤šä¸ªå€¼ï¼Œä¸è¶³è¡¥ nilï¼Œè¶…å‡ºèˆå»ã€‚</li>
<li>å…¶ä»–æƒ…å†µä¸‹ï¼Œå‡½æ•°è°ƒç”¨<code>ä»…è¿”å›ç¬¬ä¸€ä¸ªå€¼</code>ï¼ˆå¦‚æœæ²¡æœ‰è¿”å›å€¼ä¸º nilï¼‰</li>
</ol>
  <figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo0</span> <span class="params">()</span></span> <span class="keyword">end</span> <span class="comment">-- returns no results</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo1</span> <span class="params">()</span></span> <span class="keyword">return</span> <span class="string">&#x27;a&#x27;</span> <span class="keyword">end</span> <span class="comment">-- returns 1 result</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo2</span> <span class="params">()</span></span> <span class="keyword">return</span> <span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span> <span class="keyword">end</span> <span class="comment">-- returns 2 results</span></span><br><span class="line"></span><br><span class="line">x,y = foo2(), <span class="number">20</span> <span class="comment">-- x=&#x27;a&#x27;, y=20</span></span><br><span class="line">x,y = foo0(), <span class="number">20</span>, <span class="number">30</span> <span class="comment">-- x=&#x27;nil&#x27;, y=20, 30 is discarded</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä½œä¸ºå‡½æ•°å‚æ•°è°ƒç”¨</p>
  <figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(foo2(), <span class="number">1</span>) <span class="comment">--&gt; a 1</span></span><br><span class="line"><span class="built_in">print</span>(foo2() .. <span class="string">&quot;x&quot;</span>) <span class="comment">--&gt; ax</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åœ¨è¡¨æ„é€ å‡½æ•° è°ƒç”¨</p>
  <figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = &#123;foo0(), foo2(), <span class="number">4</span>&#125; <span class="comment">-- a[1] = nil, a[2] = &#x27;a&#x27;, a[3] = 4</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>return f()è¿™ç§ç±»å‹çš„è¿”å› f()è¿”å›çš„<code>æ‰€æœ‰å€¼</code></p>
</li>
<li>
<p>å¯ä»¥ä½¿ç”¨åœ†æ‹¬å·å¼ºåˆ¶ä½¿è°ƒç”¨è¿”å›ä¸€ä¸ªå€¼ã€‚</p>
  <figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>((foo0())) <span class="comment">--&gt; nil</span></span><br><span class="line"><span class="built_in">print</span>((foo1())) <span class="comment">--&gt; a</span></span><br><span class="line"><span class="built_in">print</span>((foo2())) <span class="comment">--&gt; a</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å‡½æ•°å¤šå€¼è¿”å›çš„ç‰¹æ®Šå‡½æ•° unpackï¼Œæ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºè¾“å…¥å‚æ•°ï¼Œè¿”å›æ•°ç»„çš„æ‰€æœ‰å…ƒç´ ã€‚<br>
unpack è¢«ç”¨æ¥å®ç°èŒƒå‹è°ƒç”¨æœºåˆ¶ï¼Œåœ¨ C è¯­è¨€ä¸­å¯ä»¥ä½¿ç”¨å‡½æ•°æŒ‡é’ˆè°ƒç”¨å¯å˜çš„å‡½æ•°ï¼Œå¯ä»¥å£°æ˜å‚æ•°å¯å˜çš„å‡½æ•°ï¼Œä½†ä¸èƒ½ä¸¤è€…åŒæ—¶å¯å˜ã€‚</p>
<p>åœ¨ Lua ä¸­å¦‚æœä½ æƒ³è°ƒç”¨å¯å˜å‚æ•°çš„å¯å˜å‡½æ•°åªéœ€è¦è¿™æ ·</p>
<blockquote>
<p>f(unpack(a))</p>
</blockquote>
<p>é¢„å®šä¹‰çš„ unpack å‡½æ•°æ˜¯ç”¨ C è¯­è¨€å®ç°çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ Lua æ¥å®Œæˆï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unpack</span><span class="params">(t, i)</span></span></span><br><span class="line">    i = i <span class="keyword">or</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> t[i] <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> t[i], <span class="built_in">unpack</span>(t, i + <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="5-2-variable-parameter-å¯å˜å‚æ•°"><a class="header-anchor" href="#5-2-variable-parameter-å¯å˜å‚æ•°">ğŸŒ³</a>5.2 variable parameter å¯å˜å‚æ•°</h3>
<p>Lua å‡½æ•°å¯ä»¥æ¥å—å¯å˜æ•°ç›®çš„å‚æ•°ï¼Œå’Œ C è¯­è¨€ç±»ä¼¼åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨ä¸­ä½¿ç”¨ä¸‰ç‚¹<code>ï¼ˆ...ï¼‰</code>è¡¨ç¤ºå‡½æ•°æœ‰å¯å˜çš„å‚æ•°ã€‚<br>
Lua å°†å‡½æ•°çš„å‚æ•°æ”¾åœ¨ä¸€ä¸ªå« <code>arg</code> çš„è¡¨ä¸­ï¼Œé™¤äº†å‚æ•°ä»¥å¤–ï¼Œ<code>argè¡¨</code>ä¸­è¿˜æœ‰ä¸€ä¸ª<code>åŸŸ n</code> è¡¨ç¤ºå‚æ•°çš„ä¸ªæ•°ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">g</span> <span class="params">(a, b, ...)</span></span> <span class="keyword">end</span></span><br><span class="line">CALL PARAMETERS</span><br><span class="line">g(<span class="number">3</span>) a=<span class="number">3</span>, b=<span class="literal">nil</span>, <span class="built_in">arg</span>=&#123;n=<span class="number">0</span>&#125;</span><br><span class="line">g(<span class="number">3</span>, <span class="number">4</span>) a=<span class="number">3</span>, b=<span class="number">4</span>, <span class="built_in">arg</span>=&#123;n=<span class="number">0</span>&#125;</span><br><span class="line">g(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">8</span>) a=<span class="number">3</span>, b=<span class="number">4</span>, <span class="built_in">arg</span>=&#123;<span class="number">5</span>, <span class="number">8</span>; n=<span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæˆ‘ä»¬åªæƒ³è¦ string.find è¿”å›çš„ç¬¬äºŒä¸ªå€¼ï¼šä¸€ä¸ªå…¸å‹çš„æ–¹æ³•æ˜¯ä½¿ç”¨è™šå˜é‡ï¼ˆä¸‹åˆ’çº¿ï¼‰</p>
<blockquote>
<p>local _, x = string.find(s, p)</p>
</blockquote>
<h3 id="5-3-named-parameter-å‘½åå‚æ•°"><a class="header-anchor" href="#5-3-named-parameter-å‘½åå‚æ•°">ğŸŒ³</a>5.3 named parameter å‘½åå‚æ•°</h3>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rename</span> <span class="params">(arg)</span></span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">os</span>.<span class="built_in">rename</span>(<span class="built_in">arg</span>.old, <span class="built_in">arg</span>.new)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">rename</span>&#123;old=<span class="string">&quot;temp.lua&quot;</span>, new=<span class="string">&quot;temp1.lua&quot;</span>&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="6-function-plus-å†è®ºå‡½æ•°"><a class="header-anchor" href="#6-function-plus-å†è®ºå‡½æ•°">ğŸŒ³</a>6. function plus å†è®ºå‡½æ•°</h2>
<p>note: <em><strong>Lua ä¸­çš„å‡½æ•°æ˜¯å¸¦æœ‰è¯æ³•å®šç•Œï¼ˆlexical scopingï¼‰çš„ç¬¬ä¸€ç±»å€¼ï¼ˆfirst-class valuesï¼‰ã€‚</strong></em></p>
<p>**ç¬¬ä¸€ç±»å€¼(first-class values)**æŒ‡ï¼š<em><strong>åœ¨ Lua ä¸­å‡½æ•°å’Œå…¶ä»–å€¼ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²ï¼‰ä¸€æ ·ï¼Œå‡½æ•°å¯ä»¥è¢«å­˜æ”¾åœ¨å˜é‡ä¸­ï¼Œä¹Ÿå¯ä»¥å­˜æ”¾åœ¨è¡¨ä¸­ï¼Œå¯ä»¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œè¿˜å¯ä»¥ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ã€‚</strong></em></p>
<p>**è¯æ³•å®šç•Œ(lexical scoping)**æŒ‡ï¼š<em><strong>è¢«åµŒå¥—çš„å‡½æ•°å¯ä»¥è®¿é—®ä»–å¤–éƒ¨å‡½æ•°ä¸­çš„å˜é‡ã€‚è¿™ä¸€ç‰¹æ€§ç»™ Lua æä¾›äº†å¼ºå¤§çš„ç¼–ç¨‹èƒ½åŠ›ã€‚</strong></em></p>
<p>Lua ä¸­æˆ‘ä»¬ç»å¸¸è¿™æ ·å†™ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> <span class="params">(x)</span></span> <span class="keyword">return</span> <span class="number">2</span>*x <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¿™å®é™…ä¸Šæ˜¯åˆ©ç”¨ Lua æä¾›çš„â€œè¯­æ³•ä¸Šçš„ç”œå¤´â€ï¼ˆ<em><strong>syntactic sugar</strong></em>ï¼‰çš„ç»“æœï¼Œä¸‹é¢æ˜¯åŸæœ¬çš„å‡½æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- why you try like that? because i dont&#x27;t like sugar</span></span><br><span class="line">foo = <span class="function"><span class="keyword">function</span> <span class="params">(x)</span></span> <span class="keyword">return</span> <span class="number">2</span>*x <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æ ¹æ®å­¦ç”Ÿçš„æˆç»©ä»é«˜åˆ°ä½å¯¹å­¦ç”Ÿè¿›è¡Œæ’åºï¼Œ è¿™é‡Œçš„ names, grades ä½œç”¨åŸŸæ˜¯è¿™ä¸ªchunkçš„å…¨å±€</span></span><br><span class="line">names = &#123;<span class="string">&quot;Peter&quot;</span>, <span class="string">&quot;Paul&quot;</span>, <span class="string">&quot;Mary&quot;</span>&#125;</span><br><span class="line">grades = &#123;Mary = <span class="number">10</span>, Paul = <span class="number">7</span>, Peter = <span class="number">8</span>&#125;</span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">sort</span>(names, <span class="function"><span class="keyword">function</span> <span class="params">(n1, n2)</span></span></span><br><span class="line"><span class="keyword">return</span> grades[n1] &gt; grades[n2] <span class="comment">-- compare the grades</span></span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>
<p>ä»¥å…¶ä»–å‡½æ•°ä½œä¸ºå‚æ•°çš„å‡½æ•°åœ¨ Lua ä¸­è¢«ç§°ä½œ<code>é«˜çº§å‡½æ•°</code>ï¼Œé«˜çº§å‡½æ•°åœ¨ Lua ä¸­å¹¶æ²¡æœ‰ç‰¹æƒï¼Œåªæ˜¯ Lua æŠŠå‡½æ•°å½“ä½œ<code>ç¬¬ä¸€ç±»å‡½æ•°</code>å¤„ç†çš„ä¸€ä¸ªç®€å•çš„ç»“æœã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sortbygrade</span> <span class="params">(names, grades)</span></span></span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">sort</span>(names, <span class="function"><span class="keyword">function</span> <span class="params">(n1, n2)</span></span></span><br><span class="line">        <span class="keyword">return</span> grades[n1] &gt; grades[n2] <span class="comment">-- compare the grades</span></span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åŒ…å«åœ¨ sortbygrade å‡½æ•°å†…éƒ¨çš„ sort ä¸­çš„åŒ¿åå‡½æ•°å¯ä»¥è®¿é—® sortbygrade çš„å‚æ•°gradesï¼Œ<br>
åœ¨<code>åŒ¿åå‡½æ•°å†…éƒ¨</code> grades ä¸æ˜¯å…¨å±€å˜é‡ä¹Ÿä¸æ˜¯å±€éƒ¨å˜é‡ï¼Œæˆ‘ä»¬ç§°ä½œ<code>å¤–éƒ¨çš„å±€éƒ¨å˜é‡</code>ï¼ˆexternal local variableï¼‰æˆ–è€… <code>upvalue</code>ã€‚</p>
<p>æŠ€æœ¯ä¸Šæ¥è®²ï¼Œ<code>é—­åŒ…</code>æŒ‡å€¼è€Œä¸æ˜¯æŒ‡å‡½æ•°ï¼Œå‡½æ•°ä»…ä»…æ˜¯é—­åŒ…çš„ä¸€ä¸ª<code>åŸå‹å£°æ˜</code>ï¼›</p>
<blockquote>
<p>é—­åŒ…çš„å£°æ˜å‘¨æœŸ?</p>
</blockquote>
<p>ç®€å•çš„è¯´<code>é—­åŒ…</code> æ˜¯ <em><strong>ä¸€ä¸ªå‡½æ•°åŠ ä¸Šå®ƒå¯ä»¥æ­£ç¡®è®¿é—®çš„ upvaluesã€‚</strong></em></p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Lib = &#123;&#125;</span><br><span class="line">Lib.foo = <span class="function"><span class="keyword">function</span> <span class="params">(x,y)</span></span> <span class="keyword">return</span> x + y <span class="keyword">end</span></span><br><span class="line">Lib.goo = <span class="function"><span class="keyword">function</span> <span class="params">(x,y)</span></span> <span class="keyword">return</span> x - y <span class="keyword">end</span></span><br><span class="line"><span class="comment">--------------</span></span><br><span class="line">Lib = &#123;</span><br><span class="line">    foo = <span class="function"><span class="keyword">function</span> <span class="params">(x,y)</span></span> <span class="keyword">return</span> x + y <span class="keyword">end</span>,</span><br><span class="line">    goo = <span class="function"><span class="keyword">function</span> <span class="params">(x,y)</span></span> <span class="keyword">return</span> x - y <span class="keyword">end</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">--------------</span></span><br><span class="line">Lib = &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Lib.foo</span> <span class="params">(x,y)</span></span></span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Lib.goo</span> <span class="params">(x,y)</span></span></span><br><span class="line">    <span class="keyword">return</span> x - y</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>Lua æŠŠ <code>chunk</code> å½“ä½œ<code>å‡½æ•°</code>å¤„ç†ï¼Œåœ¨ chunk å†…å¯ä»¥å£°æ˜<code>å±€éƒ¨å‡½æ•°</code>ï¼ˆ<em><strong>ä»…ä»…åœ¨ chunk å†…å¯è§</strong></em>ï¼‰ï¼Œè¯æ³•å®šç•Œä¿è¯äº†åŒ…å†…çš„<code>å…¶ä»–å‡½æ•°</code><strong>å¯ä»¥è°ƒç”¨</strong>æ­¤å‡½æ•°ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- error usage</span></span><br><span class="line"><span class="keyword">local</span> fact = <span class="function"><span class="keyword">function</span> <span class="params">(n)</span></span></span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> n*fact(n<span class="number">-1</span>) <span class="comment">-- buggy</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢è¿™ç§æ–¹å¼å¯¼è‡´ Lua ç¼–è¯‘æ—¶é‡åˆ° fact(n-1)å¹¶<em>ä¸çŸ¥é“ä»–æ˜¯å±€éƒ¨å‡½æ•°</em> <code>fact</code>ï¼ŒLua ä¼šå»æŸ¥æ‰¾æ˜¯å¦æœ‰è¿™æ ·çš„<em>å…¨å±€å‡½æ•°</em> <code>fact</code>ã€‚<br>
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘ä»¬å¿…é¡»åœ¨<em>å®šä¹‰å‡½æ•°ä»¥å‰</em> å…ˆ<strong>å£°æ˜</strong>:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> fact</span><br><span class="line">fact = <span class="function"><span class="keyword">function</span> <span class="params">(n)</span></span></span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> n*fact(n<span class="number">-1</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>note:<em>ä½†æ˜¯ Lua æ‰©å±•äº†ä»–çš„è¯­æ³•ä½¿å¾—å¯ä»¥åœ¨ç›´æ¥é€’å½’å‡½æ•°å®šä¹‰æ—¶ä½¿ç”¨ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥ã€‚</em><br>
note:<em>åœ¨å®šä¹‰<code>é</code>ç›´æ¥é€’å½’å±€éƒ¨å‡½æ•°æ—¶è¦<strong>å…ˆå£°æ˜</strong>ç„¶åå®šä¹‰æ‰å¯ä»¥</em></p>
<h3 id="6-3-proper-tail-calls-å°¾è°ƒç”¨"><a class="header-anchor" href="#6-3-proper-tail-calls-å°¾è°ƒç”¨">ğŸŒ³</a>6.3 proper tail calls å°¾è°ƒç”¨</h3>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span><span class="params">(x)</span></span></span><br><span class="line">    <span class="keyword">return</span> g(x)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p><em>è¿™ç§æƒ…å†µä¸‹å½“è¢«è°ƒç”¨å‡½æ•° g ç»“æŸæ—¶ç¨‹åº<strong>ä¸éœ€è¦è¿”å›</strong>åˆ°<code>è°ƒç”¨è€… f</code>ï¼›</em><br>
<em>æ‰€ä»¥<strong>å°¾è°ƒç”¨ä¹‹å</strong>ç¨‹åºä¸éœ€è¦åœ¨æ ˆä¸­ä¿ç•™å…³äº<strong>è°ƒç”¨è€…çš„ä»»ä½•ä¿¡æ¯</strong>ã€‚</em><br>
<em>ä¸€äº›ç¼–è¯‘å™¨æ¯”å¦‚ <strong>Lua è§£é‡Šå™¨</strong>åˆ©ç”¨è¿™ç§ç‰¹æ€§åœ¨å¤„ç†å°¾è°ƒç”¨æ—¶<strong>ä¸ä½¿ç”¨é¢å¤–çš„æ ˆ</strong>ï¼Œæˆ‘ä»¬ç§°è¿™ç§è¯­è¨€<strong>æ”¯æŒ</strong><code>æ­£ç¡®çš„å°¾è°ƒç”¨</code>ã€‚</em></p>
<p>note:<em>ç”±äºå°¾è°ƒç”¨ä¸éœ€è¦ä½¿ç”¨æ ˆç©ºé—´ï¼Œé‚£ä¹ˆå°¾è°ƒç”¨<strong>é€’å½’çš„å±‚æ¬¡</strong>å¯ä»¥æ— é™åˆ¶çš„ã€‚ä¾‹å¦‚ä¸‹é¢è°ƒç”¨ä¸è®º n ä¸ºä½•å€¼<strong>ä¸ä¼šå¯¼è‡´æ ˆæº¢å‡º</strong>ã€‚</em></p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> <span class="params">(n)</span></span></span><br><span class="line">    <span class="keyword">if</span> n &gt; <span class="number">0</span> <span class="keyword">then</span> <span class="keyword">return</span> foo(n - <span class="number">1</span>) <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- éå°¾è°ƒç”¨</span></span><br><span class="line"><span class="keyword">return</span> g(x) + <span class="number">1</span> <span class="comment">-- must do the addition</span></span><br><span class="line"><span class="keyword">return</span> x <span class="keyword">or</span> g(x) <span class="comment">-- must adjust to 1 result</span></span><br><span class="line"><span class="keyword">return</span> (g(x)) <span class="comment">-- must adjust to 1 result</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å°†å°¾è°ƒç”¨ç†è§£æˆä¸€ç§ gotoï¼Œåœ¨<strong>çŠ¶æ€æœºçš„ç¼–ç¨‹</strong>é¢†åŸŸå°¾è°ƒç”¨æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚<br>
çŠ¶æ€æœºçš„åº”ç”¨è¦æ±‚å‡½æ•°è®°ä½æ¯ä¸€ä¸ªçŠ¶æ€ï¼Œæ”¹å˜çŠ¶æ€åªéœ€è¦ goto(or call)ä¸€ä¸ªç‰¹å®šçš„å‡½æ•°ã€‚</p>
<p>ä¼ ç»Ÿæ¨¡å¼çš„ç¼–è¯‘å™¨å¯¹äºå°¾è°ƒç”¨çš„å¤„ç†æ–¹å¼å°±åƒå¤„ç†å…¶ä»–æ™®é€šå‡½æ•°è°ƒç”¨ä¸€æ ·ï¼Œæ€»ä¼šåœ¨è°ƒç”¨æ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ ˆå¸§ï¼ˆstack frameï¼‰å¹¶å°†å…¶æ¨å…¥è°ƒç”¨æ ˆé¡¶éƒ¨ï¼Œç”¨äºè¡¨ç¤ºè¯¥æ¬¡å‡½æ•°è°ƒç”¨ã€‚</p>
<p>å½“ä¸€ä¸ªå‡½æ•°è°ƒç”¨å‘ç”Ÿæ—¶ï¼Œè®¡ç®—æœºå¿…é¡» â€œè®°ä½â€ è°ƒç”¨å‡½æ•°çš„ä½ç½® â€”â€” è¿”å›ä½ç½®ï¼Œæ‰å¯ä»¥åœ¨è°ƒç”¨ç»“æŸæ—¶å¸¦ç€è¿”å›å€¼å›åˆ°è¯¥ä½ç½®ï¼Œè¿”å›ä½ç½®ä¸€èˆ¬å­˜åœ¨è°ƒç”¨æ ˆä¸Šã€‚åœ¨å°¾è°ƒç”¨è¿™ç§ç‰¹æ®Šæƒ…å½¢ä¸­ï¼Œè®¡ç®—æœºç†è®ºä¸Šå¯ä»¥<em>ä¸éœ€è¦è®°ä½å°¾è°ƒç”¨çš„ä½ç½®</em>è€Œ<em>ä»è¢«è°ƒç”¨çš„å‡½æ•°ç›´æ¥<strong>å¸¦ç€è¿”å›å€¼</strong>è¿”å›è°ƒç”¨å‡½æ•°çš„è¿”å›ä½ç½®</em>ï¼ˆç›¸å½“äºç›´æ¥è¿ç»­è¿”å›ä¸¤æ¬¡ï¼‰ã€‚<br>
å°¾è°ƒç”¨æ¶ˆé™¤å³æ˜¯åœ¨ä¸æ”¹å˜å½“å‰è°ƒç”¨æ ˆï¼ˆä¹Ÿä¸æ·»åŠ æ–°çš„è¿”å›ä½ç½®ï¼‰çš„æƒ…å†µä¸‹è·³åˆ°æ–°å‡½æ•°çš„ä¸€ç§ä¼˜åŒ–ï¼ˆå®Œå…¨ä¸æ”¹å˜è°ƒç”¨æ ˆæ˜¯ä¸å¯èƒ½çš„ï¼Œè¿˜æ˜¯éœ€è¦æ ¡æ­£è°ƒç”¨æ ˆä¸Šå½¢å¼å‚æ•°ä¸å±€éƒ¨å˜é‡çš„ä¿¡æ¯ã€‚ï¼‰</p>
<p>ç”±äºå½“å‰å‡½æ•°å¸§ä¸ŠåŒ…å«å±€éƒ¨å˜é‡ç­‰ç­‰å¤§éƒ¨åˆ†çš„ä¸œè¥¿éƒ½ä¸éœ€è¦äº†ï¼Œå½“å‰çš„<em>å‡½æ•°å¸§ç»è¿‡é€‚å½“çš„æ›´åŠ¨</em>ä»¥åå¯ä»¥<em>ç›´æ¥å½“ä½œè¢«å°¾è°ƒç”¨çš„å‡½æ•°çš„å¸§ä½¿ç”¨</em>ï¼Œç„¶åç¨‹åºå³å¯ä»¥è·³åˆ°è¢«å°¾è°ƒç”¨çš„å‡½æ•°ã€‚äº§ç”Ÿè¿™ç§å‡½æ•°å¸§æ›´åŠ¨ä»£ç ä¸ â€œjumpâ€ï¼ˆè€Œä¸æ˜¯ä¸€èˆ¬å¸¸è§„å‡½æ•°è°ƒç”¨çš„ä»£ç ï¼‰çš„è¿‡ç¨‹ç§°ä½œ<strong>å°¾è°ƒç”¨æ¶ˆé™¤(Tail Call Elimination)<strong>æˆ–</strong>å°¾è°ƒç”¨ä¼˜åŒ–(Tail Call Optimization, TCO)</strong>ã€‚å°¾è°ƒç”¨ä¼˜åŒ–è®©ä½äºå°¾ä½ç½®çš„å‡½æ•°è°ƒç”¨è·Ÿ goto è¯­å¥æ€§èƒ½ä¸€æ ·é«˜ï¼Œä¹Ÿå› æ­¤ä½¿å¾—é«˜æ•ˆçš„ç»“æ„ç¼–ç¨‹æˆä¸ºç°å®ã€‚</p>
<p>ç„¶è€Œï¼Œå¯¹äº <strong>C++</strong> ç­‰è¯­è¨€æ¥è¯´ï¼Œåœ¨å‡½æ•°æœ€å return g(x); å¹¶ä¸ä¸€å®šæ˜¯å°¾é€’å½’â€”â€”åœ¨è¿”å›ä¹‹å‰å¾ˆå¯èƒ½æ¶‰åŠåˆ°<strong>å¯¹è±¡çš„ææ„å‡½æ•°</strong>ï¼Œä½¿å¾— g(x) ä¸æ˜¯æœ€åæ‰§è¡Œçš„é‚£ä¸ªã€‚è¿™å¯ä»¥é€šè¿‡è¿”å›å€¼ä¼˜åŒ–æ¥è§£å†³ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(data1, data2)</span></span></span><br><span class="line">   a(data1)</span><br><span class="line">   <span class="keyword">return</span> b(data2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ±‡ç¼–ä»£ç :</span><br><span class="line">```asm</span><br><span class="line">foo:</span><br><span class="line">  mov  reg,[sp+data1] ; é€è¿‡æ ˆæŒ‡é’ˆï¼ˆspï¼‰å–å¾— data1 å¹¶æ”¾åˆ°æš‚ç”¨æš‚å­˜å™¨ã€‚</span><br><span class="line">  push reg            ; å°† data1 æ”¾åˆ°æ ˆä¸Šä»¥ä¾¿ a ä½¿ç”¨ã€‚</span><br><span class="line">  call a              ; a ä½¿ç”¨ data1ã€‚</span><br><span class="line">  pop                 ; æŠŠ data1 å¾æ ˆä¸Šæ‹¿æ‰ã€‚</span><br><span class="line">  mov  reg,[sp+data2] ; é€è¿‡æ ˆæŒ‡é‡ï¼ˆspï¼‰å–å¾— data2 ä¸¦æ”¾åˆ°æš‚ç”¨æš‚å­˜å™¨ã€‚</span><br><span class="line">  push reg            ; å°† data2 æ”¾åˆ°æ ˆä¸Šä»¥ä¾¿ b ä½¿ç”¨ã€‚</span><br><span class="line">  call b              ; b ä½¿ç”¨ data2ã€‚</span><br><span class="line">  pop                 ; æŠŠ data2 å¾æ ˆä¸Šæ‹¿æ‰ã€‚</span><br><span class="line">  ret</span><br></pre></td></tr></table></figure>
<p>ä¼˜åŒ–åæ±‡ç¼–ä»£ç :</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">foo:</span><br><span class="line">  mov  reg,[sp+data1] ; é€è¿‡æ ˆæŒ‡é’ˆï¼ˆspï¼‰å–å¾— data1 å¹¶æ”¾åˆ°æš‚ç”¨æš‚å­˜å™¨ã€‚</span><br><span class="line">  push reg            ; å°† data1 æ”¾åˆ°æ ˆä¸Šä»¥ä¾¿ a ä½¿ç”¨ã€‚</span><br><span class="line">  call a              ; a ä½¿ç”¨ data1ã€‚</span><br><span class="line">  pop                 ; æŠŠ data1 å¾æ ˆä¸Šæ‹¿æ‰ã€‚</span><br><span class="line">  mov  reg,[sp+data2] ; é€è¿‡æ ˆæŒ‡é‡ï¼ˆspï¼‰å–å¾— data2 ä¸¦æ”¾åˆ°æš‚ç”¨æš‚å­˜å™¨ã€‚  </span><br><span class="line">  mov  [sp+data1],reg ; æŠŠ data2 æ”¾åˆ° b é¢„æœŸçš„ä½ç½®ã€‚</span><br><span class="line">  jmp  b              ; b ä½¿ç”¨ data2 ä¸¦è¿”å›åˆ°è°ƒç”¨ foo çš„å‡½æ•°ã€‚</span><br></pre></td></tr></table></figure>
<h2 id="7-iterator-genericity-for-è¿­ä»£å™¨-æ³›å‹for"><a class="header-anchor" href="#7-iterator-genericity-for-è¿­ä»£å™¨-æ³›å‹for">ğŸŒ³</a>7. iterator &amp; genericity for è¿­ä»£å™¨ æ³›å‹for</h2>
<p>åˆ›å»ºä¸€ä¸ª<code>é—­åŒ…</code>å¿…é¡»è¦åˆ›å»ºå…¶å¤–éƒ¨å±€éƒ¨å˜é‡ã€‚<br>
æ‰€ä»¥ä¸€ä¸ªå…¸å‹çš„é—­åŒ…çš„ç»“æ„åŒ…å«ä¸¤ä¸ªå‡½æ•°ï¼šä¸€ä¸ªæ˜¯<code>é—­åŒ…</code>è‡ªå·±ï¼›å¦ä¸€ä¸ªæ˜¯å·¥å‚ï¼ˆ<code>åˆ›å»ºé—­åŒ…çš„å‡½æ•°</code>ï¼‰ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">list_iter</span> <span class="params">(t)</span></span></span><br><span class="line">    <span class="keyword">local</span> i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">local</span> n = #t</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">        i = i + <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> i &lt;= n <span class="keyword">then</span> <span class="keyword">return</span> t[i] <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- usage:</span></span><br><span class="line">t = &#123;<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>&#125;</span><br><span class="line">iter = list_iter(t) <span class="comment">-- creates the iterator</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">local</span> element = iter() <span class="comment">-- calls the iterator</span></span><br><span class="line">    <span class="keyword">if</span> element == <span class="literal">nil</span> <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">print</span>(element)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ³›å‹ for</span></span><br><span class="line">t = &#123;<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>&#125;</span><br><span class="line"><span class="keyword">for</span> element <span class="keyword">in</span> list_iter(t) <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(element)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>note:<em>è¿™ä¸ªä¾‹å­ä¸­ list_iter æ˜¯ä¸€ä¸ªå·¥å‚ï¼Œæ¯æ¬¡è°ƒç”¨ä»–éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„é—­åŒ…ï¼ˆè¿­ä»£å™¨æœ¬èº«ï¼‰</em></p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- è¿­ä»£å™¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">allwords</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">local</span> line = <span class="built_in">io</span>.<span class="built_in">read</span>() <span class="comment">-- current line</span></span><br><span class="line">    <span class="keyword">local</span> pos = <span class="number">1</span> <span class="comment">-- current position in the line</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span></span> <span class="comment">-- iterator function</span></span><br><span class="line">        <span class="keyword">while</span> line <span class="keyword">do</span> <span class="comment">-- repeat while there are lines</span></span><br><span class="line">            <span class="keyword">local</span> s, e = <span class="built_in">string</span>.<span class="built_in">find</span>(line, <span class="string">&quot;%w+&quot;</span>, pos)</span><br><span class="line">            <span class="keyword">if</span> s <span class="keyword">then</span> <span class="comment">-- found a word</span></span><br><span class="line">                pos = e + <span class="number">1</span> <span class="comment">-- next position is after this word</span></span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">sub</span>(line, s, e) <span class="comment">-- return the word</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                line = <span class="built_in">io</span>.<span class="built_in">read</span>() <span class="comment">-- word not found; try next line</span></span><br><span class="line">                pos = <span class="number">1</span> <span class="comment">-- restart from first position</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span> <span class="comment">-- no more lines: end of traversal</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- usage:</span></span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> allwords() <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(word)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="7-2-genericity-for-æ³›å‹-for-çš„è¯­ä¹‰"><a class="header-anchor" href="#7-2-genericity-for-æ³›å‹-for-çš„è¯­ä¹‰">ğŸŒ³</a>7.2 genericity for æ³›å‹ for çš„è¯­ä¹‰</h3>
<p>ä¸€èˆ¬å¼:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> var_1, ..., var_n <span class="keyword">in</span> explist <span class="keyword">do</span> block <span class="keyword">end</span></span><br><span class="line"><span class="comment">-- ==&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="keyword">local</span> _f, _s, _var = explist</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">local</span> var_1, ... , var_n = _f(_s, _var)</span><br><span class="line">        _var = var_1</span><br><span class="line">        <span class="keyword">if</span> _var == <span class="literal">nil</span> <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">        block</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="7-3-iterator-without-status-æ— çŠ¶æ€çš„è¿­ä»£å™¨"><a class="header-anchor" href="#7-3-iterator-without-status-æ— çŠ¶æ€çš„è¿­ä»£å™¨">ğŸŒ³</a>7.3 iterator without status æ— çŠ¶æ€çš„è¿­ä»£å™¨</h3>
<p>note:<em>è¿­ä»£çš„çŠ¶æ€åŒ…æ‹¬è¢«éå†çš„è¡¨ï¼ˆå¾ªç¯è¿‡ç¨‹ä¸­ä¸ä¼šæ”¹å˜çš„<code>çŠ¶æ€å¸¸é‡</code>ï¼‰å’Œå½“å‰çš„ç´¢å¼•ä¸‹æ ‡ï¼ˆ<code>æ§åˆ¶å˜é‡</code>ï¼‰ï¼Œ</em></p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">iter</span> <span class="params">(a, i)</span></span></span><br><span class="line">    i = i + <span class="number">1</span></span><br><span class="line">    <span class="keyword">local</span> v = a[i]</span><br><span class="line">    <span class="keyword">if</span> v <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> i, v</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ipairs</span> <span class="params">(a)</span></span></span><br><span class="line">    <span class="keyword">return</span> iter, a, <span class="number">0</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>note:<em>å½“ Lua è°ƒç”¨ ipairs(a)å¼€å§‹å¾ªç¯æ—¶ï¼Œä»–è·å–ä¸‰ä¸ªå€¼:è¿­ä»£å‡½æ•° iterï¼ŒçŠ¶æ€å¸¸é‡ a å’Œæ§åˆ¶å˜é‡åˆå§‹å€¼ 0ï¼›ç„¶å Lua è°ƒç”¨ iter(a,0)è¿”å› 1,a[1]ï¼ˆé™¤é a[1]=nilï¼‰ï¼›ç›´åˆ°<strong>ç¬¬ä¸€ä¸ª</strong>é nil å…ƒç´ </em></p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> n</span><br><span class="line"><span class="comment">-- n = nil å…¨éƒ¨</span></span><br><span class="line"><span class="comment">-- n = 1 æ‰“å°ä»2 å¼€å§‹</span></span><br><span class="line"><span class="comment">-- n = 0 å‡ºé”™</span></span><br><span class="line">dd=&#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,&#125;</span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> <span class="built_in">next</span>, dd, n <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(k,v)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="7-3-multi-status-iterator-å¤šçŠ¶æ€çš„è¿­ä»£å™¨"><a class="header-anchor" href="#7-3-multi-status-iterator-å¤šçŠ¶æ€çš„è¿­ä»£å™¨">ğŸŒ³</a>7.3 multi status iterator å¤šçŠ¶æ€çš„è¿­ä»£å™¨</h3>
<h2 id="8-compile-run-debug-ç¼–è¯‘-è¿è¡Œ-è°ƒè¯•"><a class="header-anchor" href="#8-compile-run-debug-ç¼–è¯‘-è¿è¡Œ-è°ƒè¯•">ğŸŒ³</a>8. compile run debug ç¼–è¯‘ è¿è¡Œ è°ƒè¯•</h2>
<p>note: <em>è§£é‡Šå‹è¯­è¨€çš„ç‰¹å¾ä¸åœ¨äºä»–ä»¬æ˜¯å¦è¢«ç¼–è¯‘ï¼Œè€Œæ˜¯<code>ç¼–è¯‘å™¨</code>æ˜¯<code>è¯­è¨€è¿è¡Œæ—¶</code>çš„ä¸€éƒ¨åˆ†</em></p>
<p>loadfile:<em>ç¼–è¯‘ä»£ç æˆä¸­é—´ç å¹¶ä¸”è¿”å›ç¼–è¯‘åçš„ chunk ä½œä¸ºä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸æ‰§è¡Œä»£ç ï¼›</em></p>
<p>note:<em>åœ¨å‘ç”Ÿé”™è¯¯çš„æƒ…å†µä¸‹ï¼Œloadfile è¿”å› nil å’Œé”™è¯¯ä¿¡æ¯ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è‡ªå®šä¹‰é”™è¯¯å¤„ç†</em></p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">f = <span class="built_in">loadstring</span>(<span class="string">&quot;i = i + 1&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>note:<em>f å°†æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨æ—¶æ‰§è¡Œ i=i+1</em></p>
<p>Lua æŠŠæ¯ä¸€ä¸ª chunk éƒ½ä½œä¸ºä¸€ä¸ª<code>åŒ¿åå‡½æ•°</code>å¤„ç†ã€‚<br>
ä¾‹å¦‚ï¼šchunk â€œa = 1â€ï¼Œ<br>
<code>loadstring</code> è¿”å›ä¸å…¶ç­‰ä»·çš„ <code>function () a = 1 end</code>ä¸å…¶ä»–å‡½æ•°ä¸€æ ·ï¼Œ<br>
chunks å¯ä»¥å®šä¹‰å±€éƒ¨å˜é‡ä¹Ÿå¯ä»¥è¿”å›å€¼ï¼š<code>f = loadstring(&quot;local a = 10; return a + 20&quot;)</code></p>
<p>note:<em>loadfile å’Œ loadstring éƒ½ä¸ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå¦‚æœå‘ç”Ÿé”™è¯¯ä»–ä»¬å°†è¿”å› nil åŠ ä¸Šé”™è¯¯ä¿¡æ¯ï¼š</em><br>
note:<em>Lua ä¸­çš„<code>å‡½æ•°å®šä¹‰</code>æ˜¯å‘ç”Ÿåœ¨<code>è¿è¡Œæ—¶çš„èµ‹å€¼</code>è€Œä¸æ˜¯å‘ç”Ÿåœ¨ç¼–è¯‘æ—¶ã€‚</em></p>
<p>å¦‚æœä½ æƒ³å¿«æ·çš„è°ƒç”¨ dostringï¼ˆæ¯”å¦‚åŠ è½½å¹¶è¿è¡Œï¼‰ï¼Œå¯ä»¥è¿™æ ·<br>
<code>loadstring(s)()</code></p>
<p>å¦‚æœåŠ è½½çš„å†…å®¹å­˜åœ¨<code>è¯­æ³•é”™è¯¯</code>çš„è¯ï¼Œloadstring è¿”å› nil å’Œé”™è¯¯ä¿¡æ¯ï¼ˆattempt to call a nil valueï¼‰ï¼›ä¸ºäº†è¿”å›æ›´æ¸…æ¥šçš„é”™è¯¯ä¿¡æ¯å¯ä»¥ä½¿ç”¨ assertï¼š<br>
<code>assert(loadstring(s))()</code></p>
<p>note:<em>æ¯æ¬¡è°ƒç”¨ loadstring éƒ½ä¼šé‡æ–°ç¼–è¯‘,loadstring ç¼–è¯‘çš„æ—¶å€™ä¸å…³å¿ƒè¯æ³•èŒƒå›´</em></p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> i = <span class="number">0</span></span><br><span class="line">f = <span class="built_in">loadstring</span>(<span class="string">&quot;i = i + 1&quot;</span>)</span><br><span class="line">g = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span> i = i + <span class="number">1</span> <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>note:<em>è¿™ä¸ªä¾‹å­ä¸­ï¼Œå’Œæƒ³è±¡çš„ä¸€æ · <code>g</code> ä½¿ç”¨<strong>å±€éƒ¨å˜é‡</strong> iï¼Œç„¶è€Œ <code>f</code> ä½¿ç”¨<strong>å…¨å±€å˜é‡</strong> iï¼›<code>loadstring</code> æ€»æ˜¯åœ¨<strong>å…¨å±€ç¯å¢ƒ</strong>ä¸­<strong>ç¼–è¯‘</strong>ä»–çš„ä¸²ã€‚</em></p>
<p>note:<em>loadstring æœŸæœ›ä¸€ä¸ª chunkï¼Œå³è¯­å¥ã€‚å¦‚æœæƒ³è¦åŠ è½½<code>è¡¨è¾¾å¼</code>ï¼Œéœ€è¦åœ¨è¡¨è¾¾å¼å‰åŠ  <code>return</code>ï¼Œé‚£æ ·å°†è¿”å›è¡¨è¾¾å¼çš„å€¼ã€‚</em></p>
<h2 id="8-1-require"><a class="header-anchor" href="#8-1-require">ğŸŒ³</a>8.1 require</h2>
<ul>
<li><em>ä¼šæœç´¢ç›®å½•åŠ è½½æ–‡ä»¶</em></li>
<li><em>ä¼šåˆ¤æ–­æ˜¯å¦æ–‡ä»¶å·²ç»åŠ è½½é¿å…é‡å¤åŠ è½½åŒä¸€æ–‡ä»¶</em></li>
<li><em>?;?.lua;c:\windows?;/usr/local/lua/?/?.lua</em></li>
<li><em>require å’Œ dofile å®ŒæˆåŒæ ·çš„åŠŸèƒ½</em></li>
</ul>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> lili</span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">lili</span></span><br><span class="line"><span class="comment">lili.lua</span></span><br><span class="line"><span class="comment">c:\windows\lili</span></span><br><span class="line"><span class="comment">/usr/local/lua/lili/lili.lua</span></span><br><span class="line"><span class="comment">]]</span></span><br></pre></td></tr></table></figure>
<p>note:<em>è¡¨ä¸­ä¿ç•™åŠ è½½çš„æ–‡ä»¶çš„è™šåï¼Œè€Œä¸æ˜¯å®æ–‡ä»¶åã€‚æ‰€ä»¥å¦‚æœä½ ä½¿ç”¨ä¸åŒçš„è™šæ–‡ä»¶å requireåŒä¸€ä¸ªæ–‡ä»¶ä¸¤æ¬¡ï¼Œå°†ä¼šåŠ è½½ä¸¤æ¬¡è¯¥æ–‡ä»¶ã€‚æ¯”å¦‚ require &quot;foo&quot;å’Œ require â€œfoo.luaâ€ï¼Œå°†ä¼šåŠ è½½ foo.lua ä¸¤æ¬¡,å…¨å±€å˜é‡<code>_LOADED</code> è®¿é—®æ–‡ä»¶ååˆ—è¡¨, <code>_REQUIREDNAME</code></em></p>
<h3 id="8-2-c-packages"><a class="header-anchor" href="#8-2-c-packages">ğŸŒ³</a>8.2 C Packages</h3>
<p>note:<em>åŠ¨æ€è¿æ¥åº“ä¸æ˜¯ ANSI C çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨æ ‡å‡† C ä¸­å®ç°åŠ¨æ€è¿æ¥æ˜¯å¾ˆå›°éš¾çš„ã€‚</em></p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="built_in">path</span> = <span class="string">&quot;/usr/local/lua/lib/libluasocket.so&quot;</span></span><br><span class="line"><span class="comment">-- or path = &quot;C:\\windows\\luasocket.dll&quot;</span></span><br><span class="line"><span class="keyword">local</span> f = <span class="built_in">assert</span>(<span class="built_in">loadlib</span>(<span class="built_in">path</span>, <span class="string">&quot;luaopen_socket&quot;</span>))</span><br><span class="line">f() <span class="comment">-- actually open the library</span></span><br></pre></td></tr></table></figure>
<h3 id="8-3-error-é”™è¯¯"><a class="header-anchor" href="#8-3-error-é”™è¯¯">ğŸŒ³</a>8.3 error é”™è¯¯</h3>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span> <span class="string">&quot;enter a number:&quot;</span></span><br><span class="line">n = <span class="built_in">io</span>.<span class="built_in">read</span>(<span class="string">&quot;*number&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> n <span class="keyword">then</span> <span class="built_in">error</span>(<span class="string">&quot;invalid input&quot;</span>) <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="8-4-exception-pcall"><a class="header-anchor" href="#8-4-exception-pcall">ğŸŒ³</a>8.4 exception &amp; pcall</h3>
<h3 id="8-5-exception-msg-xpcall"><a class="header-anchor" href="#8-5-exception-msg-xpcall">ğŸŒ³</a>8.5 exception msg &amp; xpcall</h3>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">error</span>(<span class="string">&quot;string expected&quot;</span>, <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">debug</span>.<span class="built_in">traceback</span>())</span><br></pre></td></tr></table></figure>
<h2 id="9-0-coroutine"><a class="header-anchor" href="#9-0-coroutine">ğŸŒ³</a>9.0 coroutine</h2>
<p>ååŒç¨‹åºï¼ˆcoroutineï¼‰<em>ä¸å¤šçº¿ç¨‹æƒ…å†µä¸‹çš„çº¿ç¨‹æ¯”è¾ƒç±»ä¼¼ï¼šæœ‰è‡ªå·±çš„å †æ ˆï¼Œè‡ªå·±çš„å±€éƒ¨å˜é‡ï¼Œæœ‰è‡ªå·±çš„æŒ‡ä»¤æŒ‡é’ˆï¼Œä½†æ˜¯å’Œå…¶ä»–ååŒç¨‹åºå…±äº«å…¨å±€å˜é‡ç­‰å¾ˆå¤šä¿¡æ¯ã€‚</em></p>
<p>çº¿ç¨‹å’ŒååŒç¨‹åºçš„ä¸»è¦ä¸åŒåœ¨äºï¼šåœ¨å¤šå¤„ç†å™¨æƒ…å†µä¸‹ï¼Œä»æ¦‚å¿µä¸Šæ¥è®²å¤šçº¿ç¨‹ç¨‹åºåŒæ—¶è¿è¡Œå¤šä¸ªçº¿ç¨‹ï¼›è€ŒååŒç¨‹åºæ˜¯é€šè¿‡åä½œæ¥å®Œæˆï¼Œåœ¨<strong>ä»»ä¸€æŒ‡å®šæ—¶åˆ»åªæœ‰ä¸€ä¸ªååŒç¨‹åºåœ¨è¿è¡Œ</strong>ï¼Œå¹¶ä¸”è¿™ä¸ªæ­£åœ¨è¿è¡Œçš„ååŒç¨‹åºåªæœ‰åœ¨æ˜ç¡®çš„è¢«è¦æ±‚æŒ‚èµ·çš„æ—¶å€™æ‰ä¼šè¢«æŒ‚èµ·ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">co = <span class="built_in">coroutine</span>.<span class="built_in">create</span>(<span class="function"><span class="keyword">function</span> <span class="params">()</span></span> <span class="built_in">print</span>(<span class="string">&quot;hi&quot;</span>) <span class="keyword">end</span>)</span><br><span class="line"><span class="built_in">print</span>(co) <span class="comment">--&gt; thread: 0x8071d98</span></span><br></pre></td></tr></table></figure>
<p>note:<em>ååŒæœ‰ä¸‰ä¸ªçŠ¶æ€ï¼šæŒ‚èµ·æ€ã€è¿è¡Œæ€ã€åœæ­¢æ€.å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªååŒç¨‹åºæ—¶ä»–å¼€å§‹çš„çŠ¶æ€ä¸ºæŒ‚èµ·æ€ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åˆ›å»ºååŒç¨‹åºçš„æ—¶å€™ä¸ä¼šè‡ªåŠ¨è¿è¡Œï¼Œ</em></p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">coroutine</span>.<span class="built_in">status</span>(co)) <span class="comment">--&gt; suspended</span></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">coroutine</span>.<span class="built_in">status</span>(co)) <span class="comment">--&gt; dead</span></span><br><span class="line"></span><br><span class="line">co = <span class="built_in">coroutine</span>.<span class="built_in">create</span>(<span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">    <span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">10</span> <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;co&quot;</span>, i)</span><br><span class="line">        <span class="built_in">coroutine</span>.<span class="built_in">yield</span>()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ååŒç¨‹åºå¤„äºç»ˆæ­¢çŠ¶æ€ æ¿€æ´»ä»–ï¼Œresume å°†è¿”å› false å’Œé”™è¯¯ä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co)) <span class="comment">--&gt; false cannot resume dead coroutine</span></span><br></pre></td></tr></table></figure>
<p>note:<em>resume è¿è¡Œåœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œå› æ­¤å¦‚æœååŒå†…éƒ¨å­˜åœ¨é”™è¯¯ Lua å¹¶ä¸ä¼šæŠ›å‡ºé”™è¯¯è€Œæ˜¯å°†é”™è¯¯è¿”å›ç»™ resume å‡½æ•°ã€‚</em></p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- yield è¿”å›çš„é¢å¤–çš„å‚æ•°ä¹Ÿå°†ä¼šä¼ é€’ç»™ resumeã€‚</span></span><br><span class="line">co = <span class="built_in">coroutine</span>.<span class="built_in">create</span> (<span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;co&quot;</span>, <span class="built_in">coroutine</span>.<span class="built_in">yield</span>())</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co)</span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co, <span class="number">4</span>, <span class="number">5</span>) <span class="comment">--&gt; co 4 5</span></span><br></pre></td></tr></table></figure>
<ul>
<li>resume æŠŠé¢å¤–çš„å‚æ•°ä¼ é€’ç»™ååŒçš„ä¸»ç¨‹åºã€‚</li>
<li>resume è¿”å›é™¤äº† true ä»¥å¤–çš„å…¶ä»–éƒ¨åˆ†å°†ä½œä¸ºå‚æ•°ä¼ é€’ç»™ç›¸åº”çš„ yield, yield è¿”å›çš„é¢å¤–çš„å‚æ•°ä¹Ÿå°†ä¼šä¼ é€’ç»™ resumeã€‚</li>
<li>å½“ååŒä»£ç ç»“æŸæ—¶ä¸»å‡½æ•°è¿”å›çš„å€¼éƒ½ä¼šä¼ ç»™ç›¸åº”çš„ resume</li>
</ul>
<p>å¯¹ç§°ååŒ:<em>ç”±æ‰§è¡Œåˆ°æŒ‚èµ·ä¹‹é—´çŠ¶æ€è½¬æ¢çš„å‡½æ•°æ˜¯ç›¸åŒçš„ã€‚</em><br>
ä¸å¯¹ç§°ååŒ(åŠååŒ):<em>æŒ‚èµ·ä¸€ä¸ªæ­£åœ¨æ‰§è¡Œçš„ååŒçš„å‡½æ•°ä¸ä½¿ä¸€ ä¸ªè¢«æŒ‚èµ·çš„ååŒå†æ¬¡æ‰§è¡Œçš„å‡½æ•°æ˜¯ä¸åŒçš„</em></p>
<h3 id="9-2-filter-è¿‡æ»¤å™¨"><a class="header-anchor" href="#9-2-filter-è¿‡æ»¤å™¨">ğŸŒ³</a>9.2 filter è¿‡æ»¤å™¨</h3>
<p>è¿‡æ»¤å™¨:<em>æŒ‡åœ¨ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…ä¹‹é—´ï¼Œå¯ä»¥å¯¹æ•°æ® è¿›è¡ŒæŸäº›è½¬æ¢å¤„ç†ã€‚è¿‡æ»¤å™¨åœ¨åŒä¸€æ—¶é—´æ—¢æ˜¯ç”Ÿäº§è€…åˆæ˜¯æ¶ˆè´¹è€…ï¼Œä»–è¯·æ±‚ç”Ÿäº§è€…ç”Ÿäº§å€¼å¹¶ ä¸”è½¬æ¢æ ¼å¼åä¼ ç»™æ¶ˆè´¹è€…</em></p>
<p>example:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">receive</span> <span class="params">(prod)</span></span></span><br><span class="line"><span class="keyword">local</span> <span class="built_in">status</span>, value = <span class="built_in">coroutine</span>.<span class="built_in">resume</span>(prod)</span><br><span class="line">   <span class="keyword">return</span> value</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">send</span> <span class="params">(x)</span></span></span><br><span class="line">   <span class="built_in">coroutine</span>.<span class="built_in">yield</span>(x)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">producer</span> <span class="params">()</span></span></span><br><span class="line">   <span class="keyword">return</span> <span class="built_in">coroutine</span>.<span class="built_in">create</span>(<span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">            <span class="keyword">local</span> x = <span class="built_in">io</span>.<span class="built_in">read</span>() <span class="comment">-- produce new value</span></span><br><span class="line">            send(x)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filter</span> <span class="params">(prod)</span></span></span><br><span class="line">   <span class="keyword">return</span> <span class="built_in">coroutine</span>.<span class="built_in">create</span>(<span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">       <span class="keyword">local</span> line = <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">            <span class="keyword">local</span> x = receive(prod) <span class="comment">-- get new value</span></span><br><span class="line">            x = <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%5d %s&quot;</span>, line, x)</span><br><span class="line">            send(x) <span class="comment">-- send it to consumer</span></span><br><span class="line">            line = line + <span class="number">1</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">consumer</span> <span class="params">(prod)</span></span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">local</span> x = receive(prod) <span class="comment">-- get new value</span></span><br><span class="line">        <span class="built_in">io</span>.<span class="built_in">write</span>(x, <span class="string">&quot;\n&quot;</span>) <span class="comment">-- consume new value</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">consumer(filter(producer()))</span><br></pre></td></tr></table></figure>
<h3 id="9-3-iterator-è¿­ä»£å™¨"><a class="header-anchor" href="#9-3-iterator-è¿­ä»£å™¨">ğŸŒ³</a>9.3 iterator è¿­ä»£å™¨</h3>
<p>origin:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">permgen</span> <span class="params">(a, n)</span></span></span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">        printResult(a)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">for</span> i=<span class="number">1</span>,n <span class="keyword">do</span></span><br><span class="line">            <span class="comment">-- put i-th element as the last one</span></span><br><span class="line">            a[n], a[i] = a[i], a[n]</span><br><span class="line">            <span class="comment">-- generate all permutations of the other elements</span></span><br><span class="line">            permgen(a, n - <span class="number">1</span>)</span><br><span class="line">            <span class="comment">-- restore i-th element</span></span><br><span class="line">            a[n], a[i] = a[i], a[n]</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printResult</span> <span class="params">(a)</span></span></span><br><span class="line">   <span class="keyword">for</span> i,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(a) <span class="keyword">do</span></span><br><span class="line">       <span class="built_in">io</span>.<span class="built_in">write</span>(v, <span class="string">&quot; &quot;</span>)</span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line">   <span class="built_in">io</span>.<span class="built_in">write</span>(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">permgen (&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;, <span class="number">4</span>)</span><br></pre></td></tr></table></figure>
<p>example:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">permgen</span> <span class="params">(a, n)</span></span></span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">       <span class="built_in">coroutine</span>.<span class="built_in">yield</span>(a)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">for</span> i=<span class="number">1</span>,n <span class="keyword">do</span></span><br><span class="line">            <span class="comment">-- put i-th element as the last one</span></span><br><span class="line">            a[n], a[i] = a[i], a[n]</span><br><span class="line">            <span class="comment">-- generate all permutations of the other elements</span></span><br><span class="line">            permgen(a, n - <span class="number">1</span>)</span><br><span class="line">            <span class="comment">-- restore i-th element</span></span><br><span class="line">            a[n], a[i] = a[i], a[n]</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">perm</span> <span class="params">(a)</span></span></span><br><span class="line">    <span class="keyword">local</span> n = #a</span><br><span class="line">    <span class="keyword">local</span> co = <span class="built_in">coroutine</span>.<span class="built_in">create</span>(<span class="function"><span class="keyword">function</span> <span class="params">()</span></span> permgen(a, n) <span class="keyword">end</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span></span> <span class="comment">-- iterator</span></span><br><span class="line">        <span class="keyword">local</span> code, res = <span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printResult</span> <span class="params">(a)</span></span></span><br><span class="line">    <span class="keyword">for</span> i,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(a) <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">io</span>.<span class="built_in">write</span>(v, <span class="string">&quot; &quot;</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">io</span>.<span class="built_in">write</span>(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> p <span class="keyword">in</span> perm&#123;<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>&#125; <span class="keyword">do</span></span><br><span class="line">   printResult(p)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>coroutine.wrap:<em>wrap åˆ›å»ºä¸€ä¸ªååŒç¨‹åº;ä¸åŒçš„æ˜¯ wrap ä¸è¿”å›å åŒæœ¬èº«ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå½“è¿™ä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶å°† resume ååŒ</em></p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">perm</span> <span class="params">(a)</span></span></span><br><span class="line">   <span class="keyword">local</span> n = #a</span><br><span class="line">   <span class="keyword">return</span> <span class="built_in">coroutine</span>.<span class="built_in">wrap</span>(<span class="function"><span class="keyword">function</span> <span class="params">()</span></span> permgen(a, n) <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="9-4-pre-emptive-multi-thread-éæŠ¢å å¼å¤šçº¿ç¨‹"><a class="header-anchor" href="#9-4-pre-emptive-multi-thread-éæŠ¢å å¼å¤šçº¿ç¨‹">ğŸŒ³</a>9.4 pre-emptive multi thread éæŠ¢å å¼å¤šçº¿ç¨‹</h3>
<p>note:<em>ååŒæ˜¯éæŠ¢å å¼çš„ã€‚ å½“ä¸€ä¸ªååŒæ­£åœ¨è¿è¡Œæ—¶ï¼Œä¸èƒ½åœ¨å¤–éƒ¨ç»ˆæ­¢ä»–ã€‚åªèƒ½é€šè¿‡æ˜¾ç¤ºçš„è°ƒç”¨ yield æŒ‚èµ·ä»–çš„æ‰§è¡Œã€‚</em></p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">ååŒæ˜¯éæŠ¢å å¼çš„ã€‚ å½“ä¸€ä¸ªååŒæ­£åœ¨è¿è¡Œæ—¶ï¼Œä¸èƒ½åœ¨å¤–éƒ¨ç»ˆæ­¢ä»–ã€‚åªèƒ½é€šè¿‡æ˜¾ç¤ºçš„è°ƒç”¨ <span class="built_in">yield</span> æŒ‚èµ·ä»–çš„æ‰§è¡Œã€‚</span><br></pre></td></tr></table></figure>
<hr>
<blockquote>
<p>table &amp; object</p>
</blockquote>
<h2 id="11-datastruct"><a class="header-anchor" href="#11-datastruct">ğŸŒ³</a>11. datastruct</h2>
<h3 id="11-1-array-æ•°ç»„"><a class="header-anchor" href="#11-1-array-æ•°ç»„">ğŸŒ³</a>11.1 array æ•°ç»„</h3>
<h3 id="11-2-matrix-multidimensional-array-é˜µ-å¤šç»´æ•°ç»„"><a class="header-anchor" href="#11-2-matrix-multidimensional-array-é˜µ-å¤šç»´æ•°ç»„">ğŸŒ³</a>11.2 matrix &amp; multidimensional array é˜µ å¤šç»´æ•°ç»„</h3>
<p>ç¨€ç–çŸ©é˜µ:<em>æŒ‡çŸ©é˜µçš„å¤§éƒ¨åˆ†å…ƒç´ éƒ½ä¸ºç©ºæˆ–è€… 0 çš„çŸ©é˜µã€‚</em></p>
<h3 id="11-3-linked-list-sé“¾è¡¨"><a class="header-anchor" href="#11-3-linked-list-sé“¾è¡¨">ğŸŒ³</a>11.3 linked list sé“¾è¡¨</h3>
<h3 id="11-4-queen-dique-sé˜Ÿåˆ—-åŒç«¯é˜Ÿåˆ—"><a class="header-anchor" href="#11-4-queen-dique-sé˜Ÿåˆ—-åŒç«¯é˜Ÿåˆ—">ğŸŒ³</a>11.4 queen &amp; dique sé˜Ÿåˆ— åŒç«¯é˜Ÿåˆ—</h3>
<p>note:<em>Lua çš„ table åº“æä¾›çš„ insert å’Œ remove æ“ä½œæ¥å®ç°é˜Ÿåˆ—ï¼Œä½†è¿™ç§æ–¹å¼ å®ç°çš„é˜Ÿåˆ—é’ˆå¯¹<strong>å¤§æ•°æ®é‡</strong>æ—¶æ•ˆç‡å¤ªä½</em></p>
<p>note:<em>æœ‰æ•ˆçš„æ–¹å¼æ˜¯ä½¿ç”¨ä¸¤ä¸ªç´¢å¼•ä¸‹æ ‡ï¼Œä¸€ä¸ªè¡¨ç¤ºç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦ä¸€ä¸ªè¡¨ç¤ºæœ€åä¸€ä¸ªå…ƒç´ ã€‚</em></p>
<h3 id="11-5-set-package-é›†åˆ-åŒ…"><a class="header-anchor" href="#11-5-set-package-é›†åˆ-åŒ…">ğŸŒ³</a>11.5 set &amp; package é›†åˆ åŒ…</h3>
<h3 id="11-6-string-buffer-å­—ç¬¦ä¸²ç¼“å†²"><a class="header-anchor" href="#11-6-string-buffer-å­—ç¬¦ä¸²ç¼“å†²">ğŸŒ³</a>11.6 string buffer å­—ç¬¦ä¸²ç¼“å†²</h3>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- WARNING: bad code ahead!!</span></span><br><span class="line"><span class="keyword">local</span> buff = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">io</span>.<span class="built_in">lines</span>() <span class="keyword">do</span></span><br><span class="line">   buff = buff .. line .. <span class="string">&quot;\n&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å‡å®šåœ¨ loop ä¸­é—´ï¼Œbuff å·²ç»æ˜¯ä¸€ä¸ª 50KB çš„å­—ç¬¦ä¸²ï¼Œ æ¯ä¸€è¡Œçš„å¤§å°ä¸º 20bytesï¼Œ<br>
å½“ Lua æ‰§è¡Œ <code>buff..line..&quot;\n&quot;</code>æ—¶ï¼Œå¥¹åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¤§å°ä¸º 50,020 bytesï¼Œå¹¶ä¸”ä» buff ä¸­å°† 50KB çš„å­—ç¬¦ä¸²æ‹·è´åˆ°æ–°ä¸²ä¸­ã€‚<br>
è€çš„å­—ç¬¦ä¸²å˜æˆäº†åƒåœ¾æ•°æ®ï¼Œä¸¤è½®å¾ªç¯ä¹‹åï¼Œå°†æœ‰ä¸¤ä¸ªè€ä¸²åŒ…å«è¶…è¿‡ 100KB çš„åƒåœ¾ æ•°æ®ã€‚è¿™ä¸ªæ—¶å€™ Lua ä¼šåšå‡ºæ­£ç¡®çš„å†³å®šï¼Œè¿›è¡Œä»–çš„åƒåœ¾æ”¶é›†å¹¶é‡Šæ”¾ 100KB çš„å†…å­˜ã€‚é—®é¢˜ åœ¨äºæ¯ä¸¤æ¬¡å¾ªç¯ Lua å°±è¦è¿›è¡Œä¸€æ¬¡åƒåœ¾æ”¶é›†ï¼Œè¯»å–æ•´ä¸ªæ–‡ä»¶éœ€è¦è¿›è¡Œ 200 æ¬¡åƒåœ¾æ”¶é›†ã€‚ å¹¶ä¸”å®ƒçš„å†…å­˜ä½¿ç”¨æ˜¯æ•´ä¸ªæ–‡ä»¶å¤§å°çš„ä¸‰å€ã€‚</p>
<p>note:<em>å…¶å®ƒçš„é‡‡ç”¨åƒåœ¾æ”¶é›†ç®—æ³•çš„å¹¶ä¸”å­—ç¬¦ä¸²ä¸å¯å˜çš„è¯­è¨€ ä¹Ÿéƒ½å­˜åœ¨è¿™ä¸ªé—®é¢˜ã€‚Java ä¸“é—¨æä¾› StringBuffer æ¥æ”¹å–„è¿™ç§æƒ…å†µã€‚</em></p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">newStack</span> <span class="params">()</span></span></span><br><span class="line">   <span class="keyword">return</span> &#123;<span class="string">&quot;&quot;</span>&#125;   <span class="comment">-- starts with an empty string</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addString</span> <span class="params">(stack, s)</span></span></span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">insert</span>(stack,s) <span class="comment">--push&#x27;s&#x27;intothethestack for i=#stack-1, 1, -1 do</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">string</span>.<span class="built_in">len</span>(stack[i]) &gt; <span class="built_in">string</span>.<span class="built_in">len</span>(stack[i+<span class="number">1</span>]) <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    stack[i] = stack[i] .. stack[i+<span class="number">1</span>]</span><br><span class="line">    stack[i+<span class="number">1</span>] = <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> s = newStack()</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">io</span>.<span class="built_in">lines</span>() <span class="keyword">do</span></span><br><span class="line">   addString(s, line .. <span class="string">&quot;\n&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">s = toString(s)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æˆ–è€…</span></span><br><span class="line"><span class="keyword">local</span> t = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">io</span>.<span class="built_in">lines</span>() <span class="keyword">do</span></span><br><span class="line">   <span class="built_in">table</span>.<span class="built_in">insert</span>(t, line)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">s = <span class="built_in">table</span>.<span class="built_in">concat</span>(t, <span class="string">&quot;\n&quot;</span>) .. <span class="string">&quot;\n&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="12-data-file-storage-persistence-æ•°æ®æ–‡ä»¶ä¸æŒä¹…åŒ–"><a class="header-anchor" href="#12-data-file-storage-persistence-æ•°æ®æ–‡ä»¶ä¸æŒä¹…åŒ–">ğŸŒ³</a>12. data file storage &amp; Persistence æ•°æ®æ–‡ä»¶ä¸æŒä¹…åŒ–</h2>
<blockquote>
<p>string.format(&quot;%q&quot;, o)</p>
</blockquote>
<h2 id="13-metatables-metamethods"><a class="header-anchor" href="#13-metatables-metamethods">ğŸŒ³</a>13. metatables metamethods</h2>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t1 = &#123;&#125;</span><br><span class="line"><span class="built_in">setmetatable</span>(t, t1)</span><br><span class="line"><span class="built_in">assert</span>(<span class="built_in">getmetatable</span>(t) == t1)</span><br></pre></td></tr></table></figure>
<p>note:<em>ä¸€ç»„ç›¸å…³çš„è¡¨å¯ä»¥å…±äº«ä¸€ä¸ª metatable (æè¿°ä»–ä»¬å…±åŒçš„è¡Œä¸º)ã€‚ä¸€ä¸ªè¡¨ä¹Ÿå¯ä»¥æ˜¯<strong>è‡ªèº«</strong>çš„ metatable(æè¿°å…¶ç§æœ‰è¡Œä¸º)ã€‚</em></p>
<h3 id="13-1-arithmetic-operation-metamethods-ç®—æœ¯è¿ç®—çš„-matamethods"><a class="header-anchor" href="#13-1-arithmetic-operation-metamethods-ç®—æœ¯è¿ç®—çš„-matamethods">ğŸŒ³</a>13.1  arithmetic operation metamethods ç®—æœ¯è¿ç®—çš„ matamethods</h3>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Set = &#123;&#125;</span><br><span class="line">Set.mt = &#123;&#125; <span class="comment">-- metatable for sets</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Set.new</span> <span class="params">(t)</span></span></span><br><span class="line">   <span class="keyword">local</span> set = &#123;&#125;</span><br><span class="line">    <span class="built_in">setmetatable</span>(set, Set.mt)</span><br><span class="line">   <span class="keyword">for</span> _, l <span class="keyword">in</span> <span class="built_in">ipairs</span>(t) <span class="keyword">do</span> set[l] = <span class="literal">true</span> <span class="keyword">end</span></span><br><span class="line">   <span class="keyword">return</span> set</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Set.union</span> <span class="params">(a,b)</span></span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">getmetatable</span>(a) ~= Set.mt <span class="keyword">or</span> <span class="built_in">getmetatable</span>(b) ~= Set.mt <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">error</span>(<span class="string">&quot;attempt to `add&#x27; a set with a non-set value&quot;</span>, <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">   <span class="keyword">local</span> res = Set.new&#123;&#125;</span><br><span class="line">   <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">pairs</span>(a) <span class="keyword">do</span> res[k] = <span class="literal">true</span> <span class="keyword">end</span></span><br><span class="line">   <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">pairs</span>(b) <span class="keyword">do</span> res[k] = <span class="literal">true</span> <span class="keyword">end</span></span><br><span class="line">   <span class="keyword">return</span> res</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Set.intersection</span> <span class="params">(a,b)</span></span></span><br><span class="line">   <span class="keyword">local</span> res = Set.new&#123;&#125;</span><br><span class="line">   <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">pairs</span>(a) <span class="keyword">do</span></span><br><span class="line">res[k] = b[k]</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">   <span class="keyword">return</span> res</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Set.tostring</span> <span class="params">(set)</span></span></span><br><span class="line">   <span class="keyword">local</span> s = <span class="string">&quot;&#123;&quot;</span></span><br><span class="line">   <span class="keyword">local</span> sep = <span class="string">&quot;&quot;</span></span><br><span class="line">   <span class="keyword">for</span> e <span class="keyword">in</span> <span class="built_in">pairs</span>(set) <span class="keyword">do</span></span><br><span class="line">s = s .. sep .. e</span><br><span class="line">sep = <span class="string">&quot;, &quot;</span> <span class="keyword">end</span></span><br><span class="line">   <span class="keyword">return</span> s .. <span class="string">&quot;&#125;&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Set.print</span> <span class="params">(s)</span></span></span><br><span class="line">   <span class="built_in">print</span>(Set.<span class="built_in">tostring</span>(s))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">s1 = Set.new&#123;<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">50</span>&#125;</span><br><span class="line">s2 = Set.new&#123;<span class="number">30</span>, <span class="number">1</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">getmetatable</span>(s1))     <span class="comment">--&gt; table: 00672B60</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">getmetatable</span>(s2))     <span class="comment">--&gt; table: 00672B60</span></span><br><span class="line"></span><br><span class="line">Set.mt.<span class="built_in">__add</span> = Set.union</span><br><span class="line"></span><br><span class="line">s3 = s1 + s2</span><br><span class="line">Set.<span class="built_in">print</span>(s3) <span class="comment">--&gt; &#123;1, 10, 20, 30, 50&#125;</span></span><br><span class="line"></span><br><span class="line">Set.mt.<span class="built_in">__mul</span> = Set.intersection</span><br><span class="line">Set.<span class="built_in">print</span>((s1 + s2)*s1)     <span class="comment">--&gt; &#123;10, 20, 30, 50&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>note:<em>é™¤äº†__add,__mul, è¿˜æœ‰__sub(å‡),__div(é™¤),__unm(è´Ÿ),__pow(å¹‚)ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰__concat å®šä¹‰è¿æ¥è¡Œä¸ºã€‚</em></p>
<p>å¦‚æœä¸¤ä¸ªæ“ä½œæ•°æœ‰ä¸åŒçš„ metatable, Lua é€‰æ‹© metamethod çš„åŸåˆ™:</p>
<ul>
<li>å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°å­˜åœ¨å¸¦æœ‰__add åŸŸçš„ metatableï¼ŒLua ä½¿ç”¨å®ƒä½œä¸º metamethodï¼Œå’Œç¬¬äºŒä¸ªå‚æ•°æ— å…³;</li>
<li>å¦åˆ™ç¬¬äºŒä¸ªå‚æ•°å­˜åœ¨å¸¦æœ‰__add åŸŸçš„ metatableï¼ŒLua ä½¿ç”¨å®ƒä½œä¸º metamethod å¦åˆ™æŠ¥é”™ã€‚</li>
</ul>
<h3 id="13-2-relational-operation-metamethods-å…³ç³»è¿ç®—çš„-metamethods"><a class="header-anchor" href="#13-2-relational-operation-metamethods-å…³ç³»è¿ç®—çš„-metamethods">ğŸŒ³</a>13.2 relational operation metamethods å…³ç³»è¿ç®—çš„ metamethods</h3>
<p>note:<em>__eqï¼ˆç­‰äºï¼‰ï¼Œ__ltï¼ˆå°äºï¼‰ ï¼Œå’Œ__leï¼ˆå°äºç­‰äº)</em></p>
<p>note:<em><code>å½“æˆ‘ä»¬é‡åˆ°ååºï¼ˆpartial orderï¼‰æƒ…å†µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„å…ƒç´ éƒ½å¯ä»¥æ­£ç¡®çš„è¢«æ’åºæƒ…å†µã€‚ä¾‹å¦‚ï¼Œåœ¨å¤§å¤šæ•°æœºå™¨ä¸Šæµ®ç‚¹æ•°ä¸èƒ½è¢«æ’åºï¼Œå› ä¸ºä»–çš„å€¼ä¸æ˜¯ä¸€ä¸ªæ•°å­—ï¼ˆNot a Number å³ NaNï¼‰</code></em></p>
<p>note:<em>æ ¹æ® IEEE 754 çš„æ ‡å‡†ï¼ŒNaN è¡¨ç¤ºä¸€ä¸ªæœªå®šä¹‰çš„å€¼ï¼Œæ¯”å¦‚ 0/0 çš„ç»“æœã€‚è¯¥æ ‡å‡†æŒ‡å‡ºä»»ä½•æ¶‰åŠåˆ° NaN æ¯”è¾ƒçš„ç»“æœéƒ½åº”ä¸º falseã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒNaN &lt;= x æ€»æ˜¯ falseï¼Œx &lt; NaN ä¹Ÿæ€»æ˜¯ falseã€‚è¿™æ ·ä¸€æ¥ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ a &lt;= b è½¬æ¢ä¸º not (b &lt; a)å°±ä¸å†æ­£ç¡®äº†ã€‚</em></p>
<p>note:<em>&lt;=ä»£è¡¨é›†åˆçš„åŒ…å«ï¼ša &lt;= b è¡¨ç¤ºé›†åˆ a æ˜¯é›†åˆ b çš„å­é›†ã€‚è¿™ç§æ„ä¹‰ä¸‹ï¼Œå¯èƒ½ a &lt;= b å’Œ b &lt; a éƒ½æ˜¯ falseï¼›</em></p>
<p>note:<em>å…³ç³»å…ƒç®—çš„ metamethods ä¸æ”¯æŒæ··åˆç±»å‹è¿ç®—</em></p>
<p>note:<em>è¯•å›¾æ¯”è¾ƒä¸€ä¸ªå­—ç¬¦ä¸²å’Œä¸€ä¸ªæ•°å­—ï¼ŒLua å°†æŠ›å‡ºé”™è¯¯.ç›¸ä¼¼çš„ï¼Œå¦‚æœä½ è¯•å›¾æ¯”è¾ƒä¸¤ä¸ªå¸¦æœ‰ä¸åŒ metamethods çš„å¯¹è±¡ï¼ŒLua ä¹Ÿå°†æŠ›å‡ºé”™è¯¯ã€‚</em></p>
<p>note:<em>ä½†ç›¸ç­‰æ¯”è¾ƒä»æ¥ä¸ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå¦‚æœä¸¤ä¸ªå¯¹è±¡æœ‰ä¸åŒçš„ metamethodï¼Œæ¯”è¾ƒçš„ç»“æœä¸ºfalseï¼Œç”šè‡³å¯èƒ½ä¸ä¼šè°ƒç”¨ metamethod.</em></p>
<p>note:<em>ä»…å½“ä¸¤ä¸ªæœ‰å…±åŒçš„ metamethod çš„å¯¹è±¡è¿›è¡Œç›¸ç­‰æ¯”è¾ƒçš„æ—¶å€™ï¼ŒLua æ‰ä¼šè°ƒç”¨å¯¹åº”çš„ metamethodã€‚</em></p>
<h3 id="13-3-others-metamethods"><a class="header-anchor" href="#13-3-others-metamethods">ğŸŒ³</a>13.3 others metamethods</h3>
<p>note:<em><code>print</code> å‡½æ•°æ€»æ˜¯è°ƒç”¨ tostring æ¥æ ¼å¼åŒ–å®ƒçš„è¾“å‡º, tostring ä¼šé¦–å…ˆæ£€æŸ¥å¯¹è±¡æ˜¯å¦å­˜åœ¨ä¸€ä¸ªå¸¦æœ‰<code>__tostring</code>åŸŸçš„ metatableã€‚</em></p>
<p>å‡å®šä½ æƒ³ä¿æŠ¤ä½ çš„é›†åˆä½¿å…¶ä½¿ç”¨è€…æ—¢çœ‹ä¸åˆ°ä¹Ÿä¸èƒ½ä¿®æ”¹ metatablesã€‚<br>
å¦‚æœä½ å¯¹ metatable è®¾ç½®äº†__metatable çš„å€¼ï¼Œ getmetatable å°†è¿”å›è¿™ä¸ªåŸŸçš„å€¼ï¼Œè€Œè°ƒç”¨ setmetatableå°†ä¼šå‡ºé”™ï¼š</p>
<blockquote>
<p><a href="http://Set.mt">Set.mt</a>.__metatable = â€œnot your businessâ€</p>
</blockquote>
<h3 id="13-4-table-relative-metamethods-è¡¨ç›¸å…³-metamethods"><a class="header-anchor" href="#13-4-table-relative-metamethods-è¡¨ç›¸å…³-metamethods">ğŸŒ³</a>13.4 table relative metamethods è¡¨ç›¸å…³ metamethods</h3>
<h4 id="13-4-1-the-index-metamethod"><a class="header-anchor" href="#13-4-1-the-index-metamethod">ğŸŒ³</a>13.4.1 The __index Metamethod</h4>
<p>note:<em>å½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªè¡¨çš„ä¸å­˜åœ¨çš„åŸŸï¼Œè¿™ç§è®¿é—®è§¦å‘ lua è§£é‡Šå™¨å»æŸ¥æ‰¾__index metamethod</em><br>
note:<em>__index metamethod ä¸éœ€è¦éæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä»–ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè¡¨ã€‚</em></p>
<ul>
<li>å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼ŒLua å°† table å’Œç¼ºå°‘çš„åŸŸä½œä¸ºå‚æ•°è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼›</li>
<li>ä»–æ˜¯ä¸€ä¸ªè¡¨çš„æ—¶å€™ï¼ŒLua å°†åœ¨è¿™ä¸ªè¡¨ä¸­çœ‹æ˜¯å¦æœ‰ç¼ºå°‘çš„åŸŸã€‚</li>
</ul>
<h4 id="13-4-2-the-newindex-metamethod"><a class="header-anchor" href="#13-4-2-the-newindex-metamethod">ğŸŒ³</a>13.4.2 The __newindex Metamethod</h4>
<p>note:<em>å½“ä½ ç»™è¡¨çš„ä¸€ä¸ªç¼ºå°‘çš„åŸŸèµ‹å€¼ï¼Œè§£é‡Šå™¨å°±ä¼šæŸ¥æ‰¾__newindex metamethod,å¦‚æœå­˜åœ¨åˆ™è°ƒç”¨è¿™ä¸ªå‡½æ•°è€Œä¸è¿›è¡Œèµ‹å€¼æ“ä½œã€‚</em></p>
<p>è°ƒç”¨rawset(t,k,v)ä¸æ‰ç”¨ä»»ä½• metamethod å¯¹è¡¨ t çš„ k åŸŸèµ‹å€¼ä¸º vã€‚</p>
<h4 id="13-4-3-table-default-value-æœ‰é»˜è®¤å€¼çš„è¡¨"><a class="header-anchor" href="#13-4-3-table-default-value-æœ‰é»˜è®¤å€¼çš„è¡¨">ğŸŒ³</a>13.4.3 table default value æœ‰é»˜è®¤å€¼çš„è¡¨</h4>
<h4 id="13-4-4-table-monitor-ç›‘æ§è¡¨"><a class="header-anchor" href="#13-4-4-table-monitor-ç›‘æ§è¡¨">ğŸŒ³</a>13.4.4 table monitor ç›‘æ§è¡¨</h4>
<p>å•è¡¨ç›‘æ§</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">t = &#123;&#125; <span class="comment">-- original table (created somewhere)</span></span><br><span class="line"><span class="comment">-- keep a private access to original table</span></span><br><span class="line"><span class="keyword">local</span> _t = t</span><br><span class="line"><span class="comment">-- create proxy</span></span><br><span class="line">t = &#123;&#125;</span><br><span class="line"><span class="comment">-- create metatable</span></span><br><span class="line"><span class="keyword">local</span> mt = &#123;</span><br><span class="line"><span class="built_in">__index</span> = <span class="function"><span class="keyword">function</span> <span class="params">(t,k)</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;*access to element &quot;</span> .. <span class="built_in">tostring</span>(k))</span><br><span class="line">    <span class="keyword">return</span> _t[k] <span class="comment">-- access the original table</span></span><br><span class="line"><span class="keyword">end</span>,</span><br><span class="line"><span class="built_in">__newindex</span> = <span class="function"><span class="keyword">function</span> <span class="params">(t,k,v)</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;*update of element &quot;</span> .. <span class="built_in">tostring</span>(k) ..</span><br><span class="line">    <span class="string">&quot; to &quot;</span> .. <span class="built_in">tostring</span>(v))</span><br><span class="line">    _t[k] = v <span class="comment">-- update original table</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">setmetatable</span>(t, mt)</span><br></pre></td></tr></table></figure>
<p>note:<em>æ³¨æ„ï¼šä¸å¹¸çš„æ˜¯ï¼Œè¿™ä¸ªè®¾è®¡ä¸å…è®¸æˆ‘ä»¬éå†è¡¨ã€‚</em></p>
<p>å¤šè¡¨ç›‘æ§</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- create private index</span></span><br><span class="line"><span class="keyword">local</span> index = &#123;&#125;</span><br><span class="line"><span class="comment">-- create metatable</span></span><br><span class="line"><span class="keyword">local</span> mt = &#123;</span><br><span class="line">    <span class="built_in">__index</span> = <span class="function"><span class="keyword">function</span> <span class="params">(t,k)</span></span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;*access to element &quot;</span> .. <span class="built_in">tostring</span>(k))</span><br><span class="line">        <span class="keyword">return</span> t[index][k] <span class="comment">-- access the original table</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">__newindex</span> = <span class="function"><span class="keyword">function</span> <span class="params">(t,k,v)</span></span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;*update of element &quot;</span> .. <span class="built_in">tostring</span>(k) .. <span class="string">&quot; to &quot;</span>.. <span class="built_in">tostring</span>(v))</span><br><span class="line">        t[index][k] = v <span class="comment">-- update original table</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">track</span> <span class="params">(t)</span></span></span><br><span class="line">    <span class="keyword">local</span> proxy = &#123;&#125;</span><br><span class="line">    proxy[index] = t</span><br><span class="line">    <span class="built_in">setmetatable</span>(proxy, mt)</span><br><span class="line">    <span class="keyword">return</span> proxy</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h4 id="13-4-5-readonly-table-åªè¯»è¡¨"><a class="header-anchor" href="#13-4-5-readonly-table-åªè¯»è¡¨">ğŸŒ³</a>13.4.5 readonly table åªè¯»è¡¨</h4>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readOnly</span> <span class="params">(t)</span></span></span><br><span class="line">    <span class="keyword">local</span> proxy = &#123;&#125;</span><br><span class="line">    <span class="keyword">local</span> mt = &#123; <span class="comment">-- create metatable</span></span><br><span class="line">        <span class="built_in">__index</span> = t,</span><br><span class="line">        <span class="built_in">__newindex</span> = <span class="function"><span class="keyword">function</span> <span class="params">(t,k,v)</span></span></span><br><span class="line">            <span class="built_in">error</span>(<span class="string">&quot;attempt to update a read-only table&quot;</span>, <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">setmetatable</span>(proxy, mt)</span><br><span class="line">    <span class="keyword">return</span> proxy</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">days = readOnly&#123;<span class="string">&quot;Sunday&quot;</span>, <span class="string">&quot;Monday&quot;</span>, <span class="string">&quot;Tuesday&quot;</span>, <span class="string">&quot;Wednesday&quot;</span>,<span class="string">&quot;Thursday&quot;</span>, <span class="string">&quot;Friday&quot;</span>, <span class="string">&quot;Saturday&quot;</span>&#125;</span><br></pre></td></tr></table></figure>
<h2 id="14-environment-ç¯å¢ƒ"><a class="header-anchor" href="#14-environment-ç¯å¢ƒ">ğŸŒ³</a>14. environment ç¯å¢ƒ</h2>
<h3 id="14-1-dynamic-access-global-value-ä½¿ç”¨åŠ¨æ€åå­—è®¿é—®å…¨å±€å˜é‡"><a class="header-anchor" href="#14-1-dynamic-access-global-value-ä½¿ç”¨åŠ¨æ€åå­—è®¿é—®å…¨å±€å˜é‡">ğŸŒ³</a>14.1 dynamic access global value ä½¿ç”¨åŠ¨æ€åå­—è®¿é—®å…¨å±€å˜é‡</h3>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getfield</span> <span class="params">(f)</span></span></span><br><span class="line">    <span class="keyword">local</span> v = <span class="built_in">_G</span> <span class="comment">-- start with the table of globals</span></span><br><span class="line">    <span class="keyword">for</span> w <span class="keyword">in</span> <span class="built_in">string</span>.<span class="built_in">gfind</span>(f, <span class="string">&quot;[%w_]+&quot;</span>) <span class="keyword">do</span></span><br><span class="line">        v = v[w]</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> v</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setfield</span> <span class="params">(f, v)</span></span></span><br><span class="line">    <span class="keyword">local</span> t = <span class="built_in">_G</span> <span class="comment">-- start with the table of globals</span></span><br><span class="line">    <span class="keyword">for</span> w, d <span class="keyword">in</span> <span class="built_in">string</span>.<span class="built_in">gfind</span>(f, <span class="string">&quot;([%w_]+)(.?)&quot;</span>) <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> d == <span class="string">&quot;.&quot;</span> <span class="keyword">then</span> <span class="comment">-- not last field?</span></span><br><span class="line">            t[w] = t[w] <span class="keyword">or</span> &#123;&#125; <span class="comment">-- create table if absent</span></span><br><span class="line">            t = t[w] <span class="comment">-- get the table</span></span><br><span class="line">        <span class="keyword">else</span> <span class="comment">-- last field</span></span><br><span class="line">            t[w] = v <span class="comment">-- do the assignment</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="14-2-delcare-global-value-å£°æ˜å…¨å±€å˜é‡"><a class="header-anchor" href="#14-2-delcare-global-value-å£°æ˜å…¨å±€å˜é‡">ğŸŒ³</a>14.2 delcare global value å£°æ˜å…¨å±€å˜é‡</h3>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> declaredNames = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">declare</span> <span class="params">(name, initval)</span></span></span><br><span class="line">    <span class="built_in">rawset</span>(<span class="built_in">_G</span>, name, initval)</span><br><span class="line">    declaredNames[name] = <span class="literal">true</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">setmetatable</span>(<span class="built_in">_G</span>, &#123;</span><br><span class="line">    <span class="built_in">__newindex</span> = <span class="function"><span class="keyword">function</span> <span class="params">(t, n, v)</span></span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> declaredNames[n] <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;attempt to write to undeclared var. &quot;</span>..n, <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">rawset</span>(t, n, v) <span class="comment">-- do the actual set</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    <span class="built_in">__index</span> = <span class="function"><span class="keyword">function</span> <span class="params">(_, n)</span></span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> declaredNames[n] <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;attempt to read undeclared var. &quot;</span>..n, <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="14-3-un-global-environment-éå…¨å±€çš„ç¯å¢ƒ"><a class="header-anchor" href="#14-3-un-global-environment-éå…¨å±€çš„ç¯å¢ƒ">ğŸŒ³</a>14.3 un-global environment éå…¨å±€çš„ç¯å¢ƒ</h3>
<p>note:<em>å½“ä½ å®‰è£…ä¸€ä¸ª metatable å»æ§åˆ¶å…¨å±€è®¿é—®æ—¶ï¼Œä½ çš„æ•´ä¸ªç¨‹åºéƒ½å¿…é¡»éµå¾ªåŒä¸€ä¸ªæŒ‡å¯¼æ–¹é’ˆã€‚å¦‚æœä½ æƒ³ä½¿ç”¨æ ‡å‡†åº“ï¼Œæ ‡å‡†åº“ä¸­å¯èƒ½ä½¿ç”¨åˆ°æ²¡æœ‰å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä½ å°†ç¢°åˆ°åè¿ã€‚</em></p>
<p>Setfenv:<em>æ¥å—å‡½æ•°å’Œæ–°çš„ç¯å¢ƒä½œä¸ºå‚æ•°ã€‚é™¤äº†ä½¿ç”¨å‡½æ•°æœ¬èº«ï¼Œè¿˜å¯ä»¥æŒ‡å®šä¸€ä¸ªæ•°å­—è¡¨ç¤ºæ ˆé¡¶çš„æ´»åŠ¨å‡½æ•°ã€‚æ•°å­— 1 ä»£è¡¨å½“å‰å‡½æ•°ï¼Œæ•°å­— 2 ä»£è¡¨è°ƒç”¨å½“å‰å‡½æ•°çš„å‡½æ•°</em></p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = <span class="number">1</span> <span class="comment">-- create a global variable</span></span><br><span class="line"><span class="comment">-- change current environment to a new empty table</span></span><br><span class="line"><span class="built_in">setfenv</span>(<span class="number">1</span>, &#123;&#125;)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure>
<p>å¿…é¡»åœ¨å•ç‹¬çš„ chunk å†…è¿è¡Œè¿™æ®µä»£ç ï¼Œå¦‚æœä½ åœ¨äº¤äº’æ¨¡å¼é€è¡Œè¿è¡Œä»–ï¼Œæ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ªä¸åŒçš„å‡½æ•°ï¼Œè°ƒç”¨ setfenv åªä¼šå½±å“ä»–è‡ªå·±çš„é‚£ä¸€è¡Œ</p>
<p>å°è£…: populate</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = <span class="number">1</span> <span class="comment">-- create a global variable</span></span><br><span class="line"><span class="comment">-- change current environment</span></span><br><span class="line"><span class="built_in">setfenv</span>(<span class="number">1</span>, &#123;<span class="built_in">_G</span> = <span class="built_in">_G</span>&#125;)</span><br><span class="line"><span class="built_in">_G</span>.<span class="built_in">print</span>(a) <span class="comment">--&gt; nil</span></span><br><span class="line"><span class="built_in">_G</span>.<span class="built_in">print</span>(<span class="built_in">_G</span>.a) <span class="comment">--&gt; 1</span></span><br></pre></td></tr></table></figure>
<p>ç»§æ‰¿å°è£…</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = <span class="number">1</span> <span class="comment">-- create a global variable</span></span><br><span class="line"><span class="comment">-- change current environment</span></span><br><span class="line"><span class="built_in">setfenv</span>(<span class="number">1</span>, &#123;<span class="built_in">_G</span> = <span class="built_in">_G</span>&#125;)</span><br><span class="line"><span class="built_in">_G</span>.<span class="built_in">print</span>(a) <span class="comment">--&gt; nil</span></span><br><span class="line"><span class="built_in">_G</span>.<span class="built_in">print</span>(<span class="built_in">_G</span>.a) <span class="comment">--&gt; 1</span></span><br></pre></td></tr></table></figure>
<p>note:<em>å½“ä½ åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°æ—¶ï¼Œä»–ä»åˆ›å»ºä»–çš„å‡½æ•°ç»§æ‰¿äº†ç¯å¢ƒå˜é‡</em><br>
note:<em>å¦‚æœä¸€ä¸ªchunk æ”¹å˜äº†ä»–è‡ªå·±çš„ç¯å¢ƒï¼Œè¿™ä¸ª chunk æ‰€æœ‰åœ¨æ”¹å˜ä¹‹åå®šä¹‰çš„å‡½æ•°éƒ½å…±äº«ç›¸åŒçš„ç¯å¢ƒï¼Œéƒ½ä¼šå—åˆ°å½±å“ã€‚è¿™å¯¹åˆ›å»º<strong>å‘½åç©ºé—´</strong>æ˜¯éå¸¸æœ‰ç”¨çš„æœºåˆ¶</em></p>
<h2 id="15-package"><a class="header-anchor" href="#15-package">ğŸŒ³</a>15 package</h2>
<p>note:<em>å¤§å¤šæ•°è¯­è¨€ä¸­ï¼Œpackages ä¸æ˜¯<strong>ç¬¬ä¸€ç±»å€¼(first-class values)</strong>ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œä»–ä»¬ä¸èƒ½å­˜å‚¨åœ¨å˜é‡é‡Œï¼Œä¸èƒ½ä½œä¸ºå‡½æ•°å‚æ•°ã€‚ã€‚ã€‚ ï¼‰</em></p>
<ul>
<li>å¯¹æ¯ä¸€ä¸ªå‡½æ•°å®šä¹‰éƒ½å¿…é¡»æ˜¾ç¤ºçš„åœ¨å‰é¢åŠ ä¸ŠåŒ…çš„åç§°ã€‚</li>
<li>åŒä¸€åŒ…å†…çš„å‡½æ•°<code>ç›¸äº’è°ƒç”¨</code>å¿…é¡»åœ¨è¢«è°ƒç”¨å‡½æ•°å‰<strong>æŒ‡å®šåŒ…å</strong>ã€‚</li>
</ul>
<p>ç¼ºç‚¹:</p>
<ul>
<li><em>ä¿®æ”¹å‡½æ•°çš„çŠ¶æ€(å…¬æœ‰å˜æˆç§æœ‰æˆ–è€…ç§æœ‰å˜æˆå…¬æœ‰)æˆ‘ä»¬å¿…é¡»ä¿®æ”¹å‡½æ•°å¾—<strong>è°ƒç”¨æ–¹å¼</strong>ã€‚</em></li>
<li><em>è®¿é—®åŒä¸€ä¸ªpackage å†…çš„å…¶ä»–å…¬æœ‰çš„å®ä½“å†™æ³•å†—ä½™ï¼Œå¿…é¡»åŠ ä¸Šå‰ç¼€ P.ã€‚</em></li>
</ul>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">checkComplex</span> <span class="params">(c)</span></span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> ((<span class="built_in">type</span>(c) == <span class="string">&quot;table&quot;</span>) <span class="keyword">and</span> <span class="built_in">tonumber</span>(c.r) <span class="keyword">and</span> <span class="built_in">tonumber</span>(c.i)) <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">error</span>(<span class="string">&quot;bad complex number&quot;</span>, <span class="number">3</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">new</span> <span class="params">(r, i)</span></span> <span class="keyword">return</span> &#123;r=r, i=i&#125; <span class="keyword">end</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span> <span class="params">(c1, c2)</span></span></span><br><span class="line">    checkComplex(c1);</span><br><span class="line">    checkComplex(c2);</span><br><span class="line">    <span class="keyword">return</span> new(c1.r + c2.r, c1.i + c2.i)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ—è¡¨æ”¾åœ¨åé¢ å› ä¸ºå¿…é¡»é¦–å…ˆå®šä¹‰å±€éƒ¨å‡½æ•°</span></span><br><span class="line">complex = &#123;</span><br><span class="line">    new = new,</span><br><span class="line">    add = add,</span><br><span class="line">    <span class="built_in">sub</span> = <span class="built_in">sub</span>,</span><br><span class="line">    mul = mul,</span><br><span class="line">    div = div,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="15-3-package-file"><a class="header-anchor" href="#15-3-package-file">ğŸŒ³</a>15.3 package &amp; file</h3>
<pre><code>note:*å½“ require åŠ è½½ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªå˜é‡æ¥è¡¨ç¤ºè™šæ‹Ÿçš„æ–‡ä»¶å*

<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- ä¸éœ€è¦ require å°±å¯ä»¥ä½¿ç”¨ package</span></span><br><span class="line"><span class="keyword">local</span> P = &#123;&#125; <span class="comment">-- package</span></span><br><span class="line"><span class="keyword">if</span> _REQUIREDNAME == <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">    complex = P</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">_G</span>[_REQUIREDNAME] = P</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

note:*æˆ‘ä»¬å¯ä»¥åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¹‹å†…å®šä¹‰å¤šä¸ª packagesï¼Œæˆ‘ä»¬éœ€è¦åšçš„åªæ˜¯å°†æ¯ä¸€ä¸ª package æ”¾åœ¨ä¸€ä¸ª **do ä»£ç å—***å†…ï¼Œè¿™æ · local å˜é‡æ‰èƒ½è¢«é™åˆ¶åœ¨é‚£ä¸ªä»£ç å—ä¸­*

è‡ªåŠ¨åŠ è½½

<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> location = &#123;</span><br><span class="line">foo = <span class="string">&quot;/usr/local/lua/lib/pack1_1.lua&quot;</span>,</span><br><span class="line">goo = <span class="string">&quot;/usr/local/lua/lib/pack1_1.lua&quot;</span>,</span><br><span class="line">foo1 = <span class="string">&quot;/usr/local/lua/lib/pack1_2.lua&quot;</span>,</span><br><span class="line">goo1 = <span class="string">&quot;/usr/local/lua/lib/pack1_3.lua&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pack1 = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">setmetatable</span>(pack1, &#123;<span class="built_in">__index</span> = <span class="function"><span class="keyword">function</span> <span class="params">(t, funcname)</span></span></span><br><span class="line">    <span class="keyword">local</span> file = location[funcname]</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> file <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">error</span>(<span class="string">&quot;package pack1 does not define &quot;</span> .. funcname)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">assert</span>(<span class="built_in">loadfile</span>(file))()    <span class="comment">-- load and run definition</span></span><br><span class="line">    <span class="keyword">return</span> t[funcname]          <span class="comment">-- return the function</span></span><br><span class="line"><span class="keyword">end</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> pack1</span><br></pre></td></tr></table></figure>
</code></pre>
<h2 id="16-object-oriented-programming-é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡"><a class="header-anchor" href="#16-object-oriented-programming-é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡">ğŸŒ³</a>16 object-oriented programming é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡</h2>
<ul>
<li>
<p>ç¤ºä¾‹ä»£ç </p>
 <figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Account = &#123;</span><br><span class="line">    balance=<span class="number">0</span>,</span><br><span class="line">    withdraw = <span class="function"><span class="keyword">function</span> <span class="params">(self, v)</span></span></span><br><span class="line">        <span class="built_in">self</span>.balance = <span class="built_in">self</span>.balance - v</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Account:deposit</span> <span class="params">(v)</span></span></span><br><span class="line">    <span class="built_in">self</span>.balance = <span class="built_in">self</span>.balance + v</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">Account.deposit(Account, <span class="number">200.00</span>)</span><br><span class="line">Account:withdraw(<span class="number">100.00</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Account:new</span> <span class="params">(o)</span></span></span><br><span class="line">    o = o <span class="keyword">or</span> &#123;&#125; <span class="comment">-- create object if user does not provide one</span></span><br><span class="line">    <span class="built_in">setmetatable</span>(o, <span class="built_in">self</span>)</span><br><span class="line">    <span class="built_in">self</span>.<span class="built_in">__index</span> = <span class="built_in">self</span></span><br><span class="line">    <span class="keyword">return</span> o</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">a = Account:new&#123;balance = <span class="number">0</span>&#125;</span><br><span class="line">a:deposit(<span class="number">100.00</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">getmetatable</span>(a).<span class="built_in">__index</span>.deposit(a, <span class="number">100.00</span>)</span><br><span class="line">Account.deposit(a, <span class="number">100.00</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="16-3-multiple-inheritance-å¤šé‡ç»§æ‰¿"><a class="header-anchor" href="#16-3-multiple-inheritance-å¤šé‡ç»§æ‰¿">ğŸŒ³</a>16.3 multiple inheritance å¤šé‡ç»§æ‰¿</h3>
<pre><code> å¤šé‡ç»§æ‰¿æ„å‘³ç€ä¸€ä¸ªç±»æ‹¥æœ‰å¤šä¸ªçˆ¶ç±»
</code></pre>
<h3 id="16-4-private-ç§æœ‰æ€§"><a class="header-anchor" href="#16-4-private-ç§æœ‰æ€§">ğŸŒ³</a>16.4 private ç§æœ‰æ€§</h3>
<pre><code> é€šè¿‡é—­åŒ…å®ç°ç§æœ‰æ€§

 <figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">newAccount</span> <span class="params">(initialBalance)</span></span></span><br><span class="line">    <span class="keyword">local</span> <span class="built_in">self</span> = &#123;</span><br><span class="line">        balance = initialBalance,</span><br><span class="line">        LIM = <span class="number">10000.00</span>,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">local</span> withdraw = <span class="function"><span class="keyword">function</span> <span class="params">(v)</span></span></span><br><span class="line">    <span class="built_in">self</span>.balance = <span class="built_in">self</span>.balance - v</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">local</span> deposit = <span class="function"><span class="keyword">function</span> <span class="params">(v)</span></span></span><br><span class="line">    <span class="built_in">self</span>.balance = <span class="built_in">self</span>.balance + v</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">local</span> extra = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">self</span>.balance &gt; <span class="built_in">self</span>.LIM <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">self</span>.balance*<span class="number">0.10</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span> <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">local</span> getBalance = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>.balance + <span class="built_in">self</span>.extra()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">--local getBalance = function () return self.balance end</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        withdraw = withdraw,</span><br><span class="line">        deposit = deposit,</span><br><span class="line">        getBalance = getBalance</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">acc1 = newAccount(<span class="number">100.00</span>)</span><br><span class="line">acc1.withdraw(<span class="number">40.00</span>)</span><br><span class="line"><span class="built_in">print</span>(acc1.getBalance())    <span class="comment">--&gt; 60</span></span><br></pre></td></tr></table></figure>
</code></pre>
<h3 id="16-5-single-method-çš„å¯¹è±¡å®ç°æ–¹æ³•"><a class="header-anchor" href="#16-5-single-method-çš„å¯¹è±¡å®ç°æ–¹æ³•">ğŸŒ³</a>16.5 Single-Method çš„å¯¹è±¡å®ç°æ–¹æ³•</h3>
<pre><code> <figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">newObject</span> <span class="params">(value)</span></span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">(action, v)</span></span></span><br><span class="line">        <span class="keyword">if</span> action == <span class="string">&quot;get&quot;</span> <span class="keyword">then</span> <span class="keyword">return</span> value</span><br><span class="line">        <span class="keyword">elseif</span> action == <span class="string">&quot;set&quot;</span> <span class="keyword">then</span> value = v</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">error</span>(<span class="string">&quot;invalid action&quot;</span>)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">d = newObject(<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(d(<span class="string">&quot;get&quot;</span>)) <span class="comment">--&gt; 0</span></span><br><span class="line">d(<span class="string">&quot;set&quot;</span>, <span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(d(<span class="string">&quot;get&quot;</span>)) <span class="comment">--&gt; 10</span></span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h2 id="17-weak-table"><a class="header-anchor" href="#17-weak-table">ğŸŒ³</a>17 weak table</h2>
<p>ä¸€ä¸ª weak å¼•ç”¨æ˜¯æŒ‡<em>ä¸€ä¸ªä¸è¢« Lua è®¤ä¸ºæ˜¯åƒåœ¾çš„å¯¹è±¡çš„å¼•ç”¨ã€‚</em><br>
å¦‚æœä¸€ä¸ªå¯¹è±¡æ‰€æœ‰çš„å¼•ç”¨æŒ‡å‘éƒ½æ˜¯weakï¼Œå¯¹è±¡å°†è¢«æ”¶é›†ï¼Œè€Œé‚£äº› weak å¼•ç”¨å°†ä¼šè¢«åˆ é™¤ã€‚<br>
å¦‚æœä¸€ä¸ªå¯¹è±¡åªå­˜åœ¨äº weak tables ä¸­ï¼ŒLua å°†ä¼šæœ€ç»ˆå°†å®ƒæ”¶é›†ã€‚</p>
<p>ä¸‰ç§ç±»å‹çš„ weak tablesï¼š</p>
<ul>
<li>
<p>weak keys ç»„æˆçš„ tablesï¼›</p>
</li>
<li>
<p>weak values ç»„æˆçš„ tablesï¼›</p>
</li>
<li>
<p>ä»¥åŠçº¯ weak tables ç±»å‹ï¼Œä»–ä»¬çš„ keys å’Œ values éƒ½æ˜¯ weak çš„ã€‚</p>
<p>è¡¨çš„ weak æ€§ç”±ä»–çš„ metatable çš„__mode åŸŸæ¥æŒ‡å®šçš„ã€‚</p>
  <figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = &#123;&#125;</span><br><span class="line">b = &#123;&#125;</span><br><span class="line"><span class="built_in">setmetatable</span>(a, b)</span><br><span class="line">b.<span class="built_in">__mode</span> = <span class="string">&quot;k&quot;</span> <span class="comment">-- now &#x27;a&#x27; has weak keys</span></span><br><span class="line">key = &#123;&#125; <span class="comment">-- creates first key</span></span><br><span class="line">a[&#123;key&#125;] = <span class="number">1</span></span><br><span class="line">key = &#123;&#125; <span class="comment">-- creates second key</span></span><br><span class="line">a[key] = <span class="number">2</span></span><br><span class="line"><span class="built_in">collectgarbage</span>() <span class="comment">-- forces a garbage collection cycle</span></span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> <span class="built_in">pairs</span>(a) <span class="keyword">do</span> <span class="built_in">print</span>(v) <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒä¸ªèµ‹å€¼è¯­å¥ key={}è¦†ç›–äº†ç¬¬ä¸€ä¸ª key çš„å€¼ã€‚å½“åƒåœ¾æ”¶é›†å™¨å·¥ä½œæ—¶ï¼Œåœ¨å…¶ä»–åœ°æ–¹æ²¡æœ‰æŒ‡å‘ç¬¬ä¸€ä¸ª key çš„å¼•ç”¨ï¼Œæ‰€ä»¥å®ƒè¢«æ”¶é›†äº†</p>
<p>note:<em>åªæœ‰å¯¹è±¡æ‰å¯ä»¥ä»ä¸€ä¸ª weak table ä¸­è¢«æ”¶é›†ã€‚æ¯”å¦‚æ•°å­—å’Œå¸ƒå°”å€¼ç±»å‹çš„å€¼ï¼Œéƒ½æ˜¯ä¸ä¼šè¢«æ”¶é›†çš„ã€‚</em></p>
<p>example:<em>å¦‚æœæˆ‘ä»¬åœ¨ table ä¸­æ’å…¥äº†ä¸€ä¸ªæ•°å€¼å‹çš„ keyï¼ˆåœ¨å‰é¢é‚£ä¸ªä¾‹å­ä¸­ï¼‰ï¼Œå®ƒå°†æ°¸è¿œä¸ä¼šè¢«æ”¶é›†å™¨ä» table ä¸­ç§»é™¤ã€‚å½“ç„¶ï¼Œå¦‚æœå¯¹åº”äºè¿™ä¸ªæ•°å€¼å‹ key çš„ <strong>vaule</strong>è¢«æ”¶é›†ï¼Œé‚£ä¹ˆå®ƒçš„æ•´ä¸ªå…¥å£å°†ä¼šä» weak table ä¸­è¢«ç§»é™¤ã€‚</em></p>
<p>note:<em>ä¸€ä¸ªå­—ç¬¦ä¸²ä¸ä¼šä» weak tables ä¸­è¢«ç§»é™¤ï¼ˆé™¤éå®ƒæ‰€å…³è”çš„ vaule è¢«æ”¶é›†ï¼‰</em></p>
<h3 id="17-1-è®°å¿†å‡½æ•°"><a class="header-anchor" href="#17-1-è®°å¿†å‡½æ•°">ğŸŒ³</a>17.1 è®°å¿†å‡½æ•°</h3>
<p>å¦‚æœè¿™ä¸ªç»“æœè¡¨ä¸­æœ‰ weak å€¼ï¼Œæ¯æ¬¡çš„åƒåœ¾æ”¶é›†å¾ªç¯éƒ½ä¼šç§»é™¤å½“å‰æ—¶é—´å†…æ‰€æœ‰æœªè¢«ä½¿ç”¨çš„ç»“æœ</p>
<pre><code>  <figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> results = &#123;&#125;</span><br><span class="line"><span class="built_in">setmetatable</span>(results, &#123;<span class="built_in">__mode</span> = <span class="string">&quot;v&quot;</span>&#125;) <span class="comment">-- make values weak</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createRGB</span> <span class="params">(r, g, b)</span></span></span><br><span class="line">    <span class="keyword">local</span> key = r .. <span class="string">&quot;-&quot;</span> .. g .. <span class="string">&quot;-&quot;</span> .. b</span><br><span class="line">    <span class="keyword">if</span> results[key] <span class="keyword">then</span> <span class="keyword">return</span> results[key]</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">local</span> newcolor = &#123;red = r, green = g, blue = b&#125;</span><br><span class="line">        results[key] = newcolor</span><br><span class="line">        <span class="keyword">return</span> newcolor</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<blockquote>
<p>æ ‡å‡†åº“</p>
</blockquote>
<h2 id="18-æ•°å­¦åº“"><a class="header-anchor" href="#18-æ•°å­¦åº“">ğŸŒ³</a>18. æ•°å­¦åº“</h2>
<p>ä¸‰è§’å‡½æ•°åº“ï¼ˆsin, cos, tan, asin, acos, etc.ï¼‰<br>
å¹‚æŒ‡å‡½æ•°ï¼ˆexp, log, log10ï¼‰ï¼Œ<br>
èˆå…¥å‡½æ•°ï¼ˆfloor, ceilï¼‰ã€<br>
maxã€minï¼ŒåŠ ä¸Šä¸€ä¸ªå˜é‡ piã€‚</p>
<p>æ‰€æœ‰çš„ä¸‰è§’å‡½æ•°éƒ½åœ¨å¼§åº¦å•ä½ä¸‹å·¥ä½œã€‚<strong>ï¼ˆLua4.0 ä»¥å‰åœ¨åº¦æ•°ä¸‹å·¥ä½œã€‚ï¼‰</strong><br>
ä½ å¯ä»¥ä½¿ç”¨ <code>deg</code>å’Œ <code>rad</code> å‡½æ•°åœ¨åº¦å’Œå¼§åº¦ä¹‹é—´è½¬æ¢ã€‚</p>
<p>math.random ç”¨æ¥äº§ç”Ÿä¼ªéšæœºæ•°ï¼Œæœ‰ä¸‰ç§è°ƒç”¨æ–¹å¼ï¼š</p>
<ul>
<li>ç¬¬ä¸€ï¼šä¸å¸¦å‚æ•°ï¼Œå°†äº§ç”Ÿ [0,1)èŒƒå›´å†…çš„éšæœºæ•°.</li>
<li>ç¬¬äºŒï¼šå¸¦ä¸€ä¸ªå‚æ•° nï¼Œå°†äº§ç”Ÿ 1 &lt;= x &lt;= n èŒƒå›´å†…çš„éšæœºæ•° x.</li>
<li>ç¬¬ä¸‰ï¼šå¸¦ä¸¤ä¸ªå‚æ•° a å’Œ b,å°†äº§ç”Ÿ a &lt;= x &lt;= b èŒƒå›´å†…çš„éšæœºæ•° x.</li>
</ul>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">math</span>.<span class="built_in">randomseed</span>(<span class="built_in">os</span>.<span class="built_in">time</span>())</span><br></pre></td></tr></table></figure>
<h2 id="19-table-lib"><a class="header-anchor" href="#19-table-lib">ğŸŒ³</a>19. table lib</h2>
<p>table.getn table.setn å·²ç»å¼ƒç”¨</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = &#123;<span class="literal">nil</span>, <span class="number">1</span>, <span class="number">2</span>, key = <span class="string">&#x27;1234321&#x27;</span>, <span class="literal">nil</span>, <span class="number">15</span>, <span class="string">&#x27;sagewqgag&#x27;</span>, <span class="literal">nil</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(a) <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(k,v)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(a) <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ddd&#x27;</span>,k,v)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;len:&#x27;</span>,#a)</span><br></pre></td></tr></table></figure>
<p>ipairs iterate number index until first <code>nil</code><br>
pairs iterate all except <code>nil</code><br>
when <code>&#123;nil, 1, 2, key = '1234321', nil, 15, 'sagewqgag', nil&#125;</code>, #a = 6<br>
when <code>&#123;1, 2, key = '1234321', nil, 15, 'sagewqgag', nil&#125;</code>, #a = 2<br>
when <code>&#123;1, 2, key = '1234321', 15, 'sagewqgag', nil&#125;</code>, #a = 4<br>
when <code>&#123;1, 2, key = '1234321', 15, 'sagewqgag'&#125;</code>, #a = 4</p>
<p>table.insert å‡½æ•°åœ¨ arrayæŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶<strong>å°†åé¢æ‰€æœ‰å…¶ä»–çš„å…ƒç´ åç§»ã€‚</strong></p>
<p>ä¸å¸¦ä½ç½®å‚æ•°è°ƒç”¨ insertï¼Œå°†ä¼šåœ¨ array<strong>æœ€åä½ç½®</strong>æ’å…¥å…ƒç´ ï¼ˆæ‰€ä»¥ä¸éœ€è¦å…ƒç´ ç§»åŠ¨ï¼‰</p>
<p>note:<em>æ’åºå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°å¹¶ä¸”å¦‚æœåœ¨ array ä¸­æ’åºåç¬¬ä¸€ä¸ªå‚æ•°åœ¨ç¬¬äºŒä¸ªå‚æ•°å‰é¢ï¼Œæ’åºå‡½æ•°å¿…é¡»è¿”å› trueã€‚å¦‚æœæœªæä¾›æ’åºå‡½æ•°ï¼Œsort ä½¿ç”¨é»˜è®¤çš„å°äºæ“ä½œç¬¦è¿›è¡Œæ¯”è¾ƒ</em></p>
<h2 id="20-string-lib"><a class="header-anchor" href="#20-string-lib">ğŸŒ³</a>20 string lib</h2>
<p><code>string.len(s)</code>è¿”å›å­—ç¬¦ä¸² s çš„é•¿åº¦ï¼›<br>
<code>string.rep(s,n)</code>è¿”å›é‡å¤ n æ¬¡å­—ç¬¦ä¸² s çš„ä¸²ï¼›<br>
ä½ ä½¿ç”¨ <code>string.rep(&quot;a&quot;, 2^20)</code>å¯ä»¥åˆ›å»ºä¸€ä¸ª 1M bytes çš„å­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚ï¼Œä¸ºäº†æµ‹è¯•éœ€è¦ï¼‰ ï¼›<br>
<code>string.lower(s)</code>å°† s ä¸­çš„å¤§å†™å­—æ¯è½¬æ¢æˆå°å†™ï¼ˆ<code>string.upper</code>å°†å°å†™è½¬æ¢æˆå¤§å†™ï¼‰<br>
<code>string.sub(s,i,j)</code>å‡½æ•°æˆªå–å­—ç¬¦ä¸² s çš„ä»ç¬¬ i ä¸ªå­—ç¬¦åˆ°ç¬¬ j ä¸ªå­—ç¬¦ä¹‹é—´çš„ä¸²ã€‚</p>
<p>Luaä¸­ï¼Œ<em>å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ç´¢å¼•ä» 1 å¼€å§‹ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è´Ÿç´¢å¼•ï¼Œè´Ÿç´¢å¼•ä»å­—ç¬¦ä¸²çš„ç»“å°¾å‘å‰è®¡æ•°ï¼š-1 æŒ‡å‘æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œ-2 æŒ‡å‘å€’æ•°ç¬¬äºŒä¸ªï¼Œä»¥æ­¤ç±»æ¨ã€‚</em><br>
note:<em>Lua ä¸­çš„å­—ç¬¦ä¸²æ˜¯æ’å®šä¸å˜çš„ã€‚String.sub å‡½æ•°ä»¥åŠ Lua ä¸­å…¶ä»–çš„å­—ç¬¦ä¸²æ“ä½œå‡½æ•°éƒ½ä¸ä¼šæ”¹å˜å­—ç¬¦ä¸²çš„å€¼ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚</em><br>
å¦‚æœä½ æƒ³ä¿®æ”¹ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡çš„å€¼ï¼Œä½ å¿…é¡»å°†å˜é‡èµ‹ç»™ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s = <span class="built_in">string</span>.<span class="built_in">sub</span>(s, <span class="number">2</span>, <span class="number">-2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">char</span>(<span class="number">97</span>)) <span class="comment">--&gt; a</span></span><br><span class="line">i = <span class="number">99</span>; <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">char</span>(i, i+<span class="number">1</span>, i+<span class="number">2</span>)) <span class="comment">--&gt; cde</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">byte</span>(<span class="string">&quot;abc&quot;</span>)) <span class="comment">--&gt; 97</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">byte</span>(<span class="string">&quot;abc&quot;</span>, <span class="number">2</span>)) <span class="comment">--&gt; 98</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">byte</span>(<span class="string">&quot;abc&quot;</span>, <span class="number">-1</span>)) <span class="comment">--&gt; 99</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;pi = %.4f&quot;</span>, PI)) <span class="comment">--&gt; pi = 3.1416</span></span><br><span class="line">d = <span class="number">5</span>; m = <span class="number">11</span>; y = <span class="number">1990</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%02d/%02d/%04d&quot;</span>, d, m, y)) <span class="comment">--&gt; 05/11/1990</span></span><br><span class="line">tag, title = <span class="string">&quot;h1&quot;</span>, <span class="string">&quot;a title&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;&lt;%s&gt;%s&lt;/%s&gt;&quot;</span>, tag, title, tag)) <span class="comment">--&gt; &lt;h1&gt;a title&lt;/h1&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="20-1-pattern-matching-æ¨¡å¼åŒ¹é…"><a class="header-anchor" href="#20-1-pattern-matching-æ¨¡å¼åŒ¹é…">ğŸŒ³</a>20.1 pattern matching æ¨¡å¼åŒ¹é…</h3>
<p>Luaå¹¶ä¸ä½¿ç”¨POSIXè§„èŒƒçš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆä¹Ÿå†™ä½œ<strong>regexp</strong>ï¼‰æ¥è¿›è¡Œæ¨¡å¼åŒ¹é…ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s = <span class="string">&quot;hello world&quot;</span></span><br><span class="line">i, j = <span class="built_in">string</span>.<span class="built_in">find</span>(s, <span class="string">&quot;hello&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(i, j) <span class="comment">--&gt; 1 5</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">sub</span>(s, i, j)) <span class="comment">--&gt; hello</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">find</span>(s, <span class="string">&quot;world&quot;</span>)) <span class="comment">--&gt; 7 11</span></span><br><span class="line">i, j = <span class="built_in">string</span>.<span class="built_in">find</span>(s, <span class="string">&quot;l&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(i, j) <span class="comment">--&gt; 3 3</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">find</span>(s, <span class="string">&quot;lll&quot;</span>)) <span class="comment">--&gt; nil</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> t = &#123;&#125; <span class="comment">-- table to store the indices</span></span><br><span class="line"><span class="keyword">local</span> i = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">    i = <span class="built_in">string</span>.<span class="built_in">find</span>(s, <span class="string">&quot;\n&quot;</span>, i+<span class="number">1</span>) <span class="comment">-- find &#x27;next&#x27; newline</span></span><br><span class="line">    <span class="keyword">if</span> i == <span class="literal">nil</span> <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">insert</span>(t, i)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">s = <span class="built_in">string</span>.<span class="built_in">gsub</span>(<span class="string">&quot;Lua is cute&quot;</span>, <span class="string">&quot;cute&quot;</span>, <span class="string">&quot;great&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(s) <span class="comment">--&gt; Lua is great</span></span><br><span class="line">s = <span class="built_in">string</span>.<span class="built_in">gsub</span>(<span class="string">&quot;all lii&quot;</span>, <span class="string">&quot;l&quot;</span>, <span class="string">&quot;x&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(s) <span class="comment">--&gt; axx xii</span></span><br><span class="line">s = <span class="built_in">string</span>.<span class="built_in">gsub</span>(<span class="string">&quot;Lua is great&quot;</span>, <span class="string">&quot;perl&quot;</span>, <span class="string">&quot;tcl&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(s) <span class="comment">--&gt; Lua is great</span></span><br><span class="line"></span><br><span class="line">s = <span class="built_in">string</span>.<span class="built_in">gsub</span>(<span class="string">&quot;all lii&quot;</span>, <span class="string">&quot;l&quot;</span>, <span class="string">&quot;x&quot;</span>, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(s) <span class="comment">--&gt; axl lii</span></span><br><span class="line">s = <span class="built_in">string</span>.<span class="built_in">gsub</span>(<span class="string">&quot;all lii&quot;</span>, <span class="string">&quot;l&quot;</span>, <span class="string">&quot;x&quot;</span>, <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(s) <span class="comment">--&gt; axx lii</span></span><br><span class="line">_, count = <span class="built_in">string</span>.<span class="built_in">gsub</span>(str, <span class="string">&quot; &quot;</span>, <span class="string">&quot; &quot;</span>)</span><br></pre></td></tr></table></figure>
<p>note:<em>_ åªæ˜¯ä¸€ä¸ªå“‘å…ƒå˜é‡</em></p>
<h3 id="20-2-pattern-æ¨¡å¼"><a class="header-anchor" href="#20-2-pattern-æ¨¡å¼">ğŸŒ³</a>20.2 pattern æ¨¡å¼</h3>
<pre><code>+ åŒ¹é…å‰ä¸€å­—ç¬¦ 1 æ¬¡æˆ–å¤šæ¬¡
* åŒ¹é…å‰ä¸€å­—ç¬¦ 0 æ¬¡æˆ–å¤šæ¬¡
- åŒ¹é…å‰ä¸€å­—ç¬¦ 0 æ¬¡æˆ–å¤šæ¬¡
? åŒ¹é…å‰ä¸€å­—ç¬¦ 0 æ¬¡æˆ– 1 æ¬¡
'[_%a][_%w]*' åŒ¹é… Lua ç¨‹åºä¸­çš„æ ‡ç¤ºç¬¦ï¼šå­—æ¯æˆ–è€…ä¸‹åˆ’çº¿å¼€å¤´çš„å­—æ¯ä¸‹åˆ’çº¿æ•°å­—åºåˆ—ã€‚
åŒ¹é…ä¸€å¯¹åœ†æ‹¬å·()æˆ–è€…æ‹¬å·ä¹‹é—´çš„ç©ºç™½ï¼Œå¯ä»¥ä½¿ç”¨ '%(%s*%)'
</code></pre>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s = <span class="string">&quot;Deadline is 30/05/1999, firm&quot;</span></span><br><span class="line"><span class="built_in">date</span> = <span class="string">&quot;%d%d/%d%d/%d%d%d%d&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">sub</span>(s, <span class="built_in">string</span>.<span class="built_in">find</span>(s, <span class="built_in">date</span>))) <span class="comment">--&gt; 30/05/1999</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">gsub</span>(<span class="string">&quot;hello, up-down!&quot;</span>, <span class="string">&quot;%A&quot;</span>, <span class="string">&quot;.&quot;</span>)) <span class="comment">--&gt; hello..up.down. 4</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">gsub</span>(<span class="string">&quot;one, and two; and three&quot;</span>, <span class="string">&quot;%a+&quot;</span>, <span class="string">&quot;word&quot;</span>)) <span class="comment">--&gt; word, word word; word word</span></span><br><span class="line"></span><br><span class="line">i, j = <span class="built_in">string</span>.<span class="built_in">find</span>(<span class="string">&quot;the number 1298 is even&quot;</span>, <span class="string">&quot;%d+&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(i,j) <span class="comment">--&gt; 12 15</span></span><br></pre></td></tr></table></figure>
<h3 id="20-3-matchings-æ•è·"><a class="header-anchor" href="#20-3-matchings-æ•è·">ğŸŒ³</a>20.3 matchings æ•è·</h3>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">pair = <span class="string">&quot;name = Anna&quot;</span></span><br><span class="line">_, _, key, value = <span class="built_in">string</span>.<span class="built_in">find</span>(pair, <span class="string">&quot;(%a+)%s*=%s*(%a+)&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(key, value) <span class="comment">--&gt; name Anna</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">date</span> = <span class="string">&quot;17/7/1990&quot;</span></span><br><span class="line">_, _, d, m, y = <span class="built_in">string</span>.<span class="built_in">find</span>(<span class="built_in">date</span>, <span class="string">&quot;(%d+)/(%d+)/(%d+)&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(d, m, y) <span class="comment">--&gt; 17 7 1990</span></span><br><span class="line"></span><br><span class="line">s = <span class="string">[[then he said: &quot;it&#x27;s all right&quot;!]]</span></span><br><span class="line">a, b, c, quotedPart = <span class="built_in">string</span>.<span class="built_in">find</span>(s, <span class="string">&quot;([\&quot;&#x27;])(.-)%1&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(quotedPart) <span class="comment">--&gt; it&#x27;s all right</span></span><br><span class="line"><span class="built_in">print</span>(c) <span class="comment">--&gt; &quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="21-io-lib"><a class="header-anchor" href="#21-io-lib">ğŸŒ³</a>21. IO lib</h2>
<h3 id="21-1-simple-i-o-mode"><a class="header-anchor" href="#21-1-simple-i-o-mode">ğŸŒ³</a>21.1 simple I/O mode</h3>
<p>io.input å’Œ io.output å‡½æ•°æ¥æ”¹å˜å½“å‰æ–‡ä»¶ã€‚<br>
ä¾‹å¦‚io.input(filename)å°±æ˜¯æ‰“å¼€ç»™å®šæ–‡ä»¶ï¼ˆä»¥è¯»æ¨¡å¼ï¼‰ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºå½“å‰è¾“å…¥æ–‡ä»¶ã€‚<br>
æ¥ä¸‹æ¥æ‰€æœ‰çš„è¾“å…¥éƒ½æ¥è‡ªäºè¯¥æ–‡ï¼Œç›´åˆ°å†æ¬¡ä½¿ç”¨ io.inputã€‚io.output å‡½æ•°ã€‚<br>
ä¸€æ—¦äº§ç”Ÿé”™è¯¯ä¸¤ä¸ªå‡½æ•°éƒ½ä¼šäº§ç”Ÿé”™è¯¯ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="built_in">io</span>.<span class="built_in">write</span>(<span class="string">&quot;sin (3) = &quot;</span>, <span class="built_in">math</span>.<span class="built_in">sin</span>(<span class="number">3</span>), <span class="string">&quot;\n&quot;</span>)</span><br><span class="line"><span class="comment">--&gt; sin (3) = 0.1411200080598672</span></span><br><span class="line">&gt; <span class="built_in">io</span>.<span class="built_in">write</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;sin (3) = %.4f\n&quot;</span>, <span class="built_in">math</span>.<span class="built_in">sin</span>(<span class="number">3</span>)))</span><br><span class="line"><span class="comment">--&gt; sin (3) = 0.1411</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ç¼–å†™ä»£ç æ—¶åº”å½“é¿å…åƒ io.write(aâ€¦bâ€¦c)ï¼›è¿™æ ·çš„ä¹¦å†™ï¼Œè¿™åŒ io.write(a,b,c)çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯åè€…å› ä¸ºé¿å…äº†ä¸²è”æ“ä½œï¼Œè€Œæ¶ˆè€—è¾ƒå°‘çš„èµ„æºã€‚</p>
<p>Write å‡½æ•°ä¸ print å‡½æ•°ä¸åŒåœ¨äºï¼Œwrite ä¸é™„åŠ ä»»ä½•é¢å¤–çš„å­—ç¬¦åˆ°è¾“å‡ºä¸­å»ï¼Œä¾‹å¦‚åˆ¶è¡¨ç¬¦ï¼Œæ¢è¡Œç¬¦ç­‰ç­‰ã€‚<br>
write å‡½æ•°æ˜¯ä½¿ç”¨å½“å‰è¾“å‡ºæ–‡ä»¶ï¼Œè€Œ print å§‹ç»ˆä½¿ç”¨æ ‡å‡†è¾“å‡ºã€‚<br>
printå‡½æ•°ä¼šè‡ªåŠ¨è°ƒç”¨å‚æ•°çš„ tostringæ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥æ˜¾ç¤ºå‡ºè¡¨ï¼ˆtablesï¼‰å‡½æ•°ï¼ˆfunctionsï¼‰å’Œ nilã€‚</p>
<p>â€œ*allâ€ è¯»å–æ•´ä¸ªæ–‡ä»¶<br>
â€œ*lineâ€ è¯»å–ä¸‹ä¸€è¡Œ<br>
â€œ*numberâ€ ä»ä¸²ä¸­è½¬æ¢å‡ºä¸€ä¸ªæ•°å€¼<br>
num è¯»å– num ä¸ªå­—ç¬¦åˆ°ä¸²</p>
<p>io.read(&quot;*all&quot;)å‡½æ•°ä»å½“å‰ä½ç½®è¯»å–æ•´ä¸ªè¾“å…¥æ–‡ä»¶ã€‚å¦‚æœå½“å‰ä½ç½®åœ¨æ–‡ä»¶æœ«å°¾ï¼Œæˆ–è€…æ–‡ä»¶ä¸ºç©ºï¼Œå‡½æ•°å°†è¿”å›ç©ºä¸²ã€‚<br>
io.read(&quot;*line&quot;)å‡½æ•°è¿”å›å½“å‰è¾“å…¥æ–‡ä»¶çš„ä¸‹ä¸€è¡Œï¼ˆä¸åŒ…å«æœ€åçš„æ¢è¡Œç¬¦ï¼‰ã€‚å½“åˆ°è¾¾æ–‡ä»¶æœ«å°¾ï¼Œè¿”å›å€¼ä¸º nilï¼ˆè¡¨ç¤ºæ²¡æœ‰ä¸‹ä¸€è¡Œå¯è¿”å›ï¼‰<br>
<em>è¯¥è¯»å–æ–¹å¼æ˜¯ read å‡½æ•°çš„é»˜è®¤æ–¹å¼ï¼Œæ‰€ä»¥å¯ä»¥ç®€å†™ä¸º io.read()ã€‚</em><br>
io.read(&quot;*number&quot;)å‡½æ•°ä»å½“å‰è¾“å…¥æ–‡ä»¶ä¸­è¯»å–å‡ºä¸€ä¸ªæ•°å€¼ã€‚åªæœ‰åœ¨è¯¥å‚æ•°ä¸‹ read å‡½æ•°æ‰è¿”å›æ•°å€¼ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²ã€‚<br>
å¦‚æœåœ¨å½“å‰ä½ç½®æ‰¾ä¸åˆ°ä¸€ä¸ªæ•°å­—ï¼ˆç”±äºæ ¼å¼ä¸å¯¹ï¼Œæˆ–è€…æ˜¯åˆ°äº†æ–‡ä»¶çš„ç»“å°¾ï¼‰ï¼Œåˆ™è¿”å› nil å¯ä»¥å¯¹æ¯ä¸ªå‚æ•°è®¾ç½®é€‰é¡¹ï¼Œå‡½æ•°å°†è¿”å›å„è‡ªçš„ç»“æœã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">6.0 -3.23 15e12</span></span><br><span class="line"><span class="comment">4.3 234 1000001</span></span><br><span class="line"><span class="comment">...</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line"><span class="keyword">local</span> n1, n2, n3 = <span class="built_in">io</span>.<span class="built_in">read</span>(<span class="string">&quot;*number&quot;</span>, <span class="string">&quot;*number&quot;</span>, <span class="string">&quot;*number&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> n1 <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">max</span>(n1, n2, n3))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> size = <span class="number">2</span>^<span class="number">13</span> <span class="comment">-- good buffer size (8K)</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line"><span class="keyword">local</span> block = <span class="built_in">io</span>.<span class="built_in">read</span>(size)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> block <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line"><span class="built_in">io</span>.<span class="built_in">write</span>(block)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="21-2-complete-i-o-mode"><a class="header-anchor" href="#21-2-complete-i-o-mode">ğŸŒ³</a>21.2 complete I/O mode</h3>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> f = <span class="built_in">assert</span>(<span class="built_in">io</span>.<span class="built_in">open</span>(filename, <span class="string">&quot;r&quot;</span>))</span><br><span class="line"><span class="keyword">local</span> t = f:<span class="built_in">read</span>(<span class="string">&quot;*all&quot;</span>)</span><br><span class="line">f:<span class="built_in">close</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> temp = <span class="built_in">io</span>.<span class="built_in">input</span>() <span class="comment">-- save current file</span></span><br><span class="line"><span class="built_in">io</span>.<span class="built_in">input</span>(<span class="string">&quot;newinput&quot;</span>) <span class="comment">-- open a new current file</span></span><br><span class="line">... <span class="comment">-- do something with new input</span></span><br><span class="line"><span class="built_in">io</span>.<span class="built_in">input</span>():<span class="built_in">close</span>() <span class="comment">-- close current file</span></span><br><span class="line"><span class="built_in">io</span>.<span class="built_in">input</span>(temp) <span class="comment">-- restore previous current file</span></span><br></pre></td></tr></table></figure>
<p>I/O ä¼˜åŒ–çš„ä¸€ä¸ªå°æŠ€å·§:<br>
é€šå¸¸ Lua ä¸­è¯»å–æ•´ä¸ªæ–‡ä»¶è¦æ¯”ä¸€è¡Œä¸€è¡Œçš„è¯»å–ä¸€ä¸ªæ–‡ä»¶å¿«çš„å¤šã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="built_in">lines</span>, rest = f:<span class="built_in">read</span>(BUFSIZE, <span class="string">&quot;*line&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> BUFSIZE = <span class="number">2</span>^<span class="number">13</span> <span class="comment">-- 8K</span></span><br><span class="line"><span class="keyword">local</span> f = <span class="built_in">io</span>.<span class="built_in">input</span>(<span class="built_in">arg</span>[<span class="number">1</span>]) <span class="comment">-- open input file</span></span><br><span class="line"><span class="keyword">local</span> cc, lc, wc = <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span> <span class="comment">-- char, line, and word counts</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">local</span> <span class="built_in">lines</span>, rest = f:<span class="built_in">read</span>(BUFSIZE, <span class="string">&quot;*line&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">lines</span> <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">if</span> rest <span class="keyword">then</span> <span class="built_in">lines</span> = <span class="built_in">lines</span> .. rest .. <span class="string">&#x27;\n&#x27;</span> <span class="keyword">end</span></span><br><span class="line">    cc = cc + <span class="built_in">string</span>.<span class="built_in">len</span>(<span class="built_in">lines</span>)</span><br><span class="line">    <span class="comment">-- count words in the chunk</span></span><br><span class="line">    <span class="keyword">local</span> _,t = <span class="built_in">string</span>.<span class="built_in">gsub</span>(<span class="built_in">lines</span>, <span class="string">&quot;%S+&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">    wc = wc + t</span><br><span class="line">    <span class="comment">-- count newlines in the chunk</span></span><br><span class="line">    _,t = <span class="built_in">string</span>.<span class="built_in">gsub</span>(<span class="built_in">lines</span>, <span class="string">&quot;\n&quot;</span>, <span class="string">&quot;\n&quot;</span>)</span><br><span class="line">    lc = lc + t</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(lc, wc, cc)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> inp = <span class="built_in">assert</span>(<span class="built_in">io</span>.<span class="built_in">open</span>(<span class="built_in">arg</span>[<span class="number">1</span>], <span class="string">&quot;rb&quot;</span>))</span><br><span class="line"><span class="keyword">local</span> out = <span class="built_in">assert</span>(<span class="built_in">io</span>.<span class="built_in">open</span>(<span class="built_in">arg</span>[<span class="number">2</span>], <span class="string">&quot;wb&quot;</span>))</span><br><span class="line"><span class="keyword">local</span> data = inp:<span class="built_in">read</span>(<span class="string">&quot;*all&quot;</span>)</span><br><span class="line">data = <span class="built_in">string</span>.<span class="built_in">gsub</span>(data, <span class="string">&quot;\r\n&quot;</span>, <span class="string">&quot;\n&quot;</span>)</span><br><span class="line">out:<span class="built_in">write</span>(data)</span><br><span class="line"><span class="built_in">assert</span>(out:<span class="built_in">close</span>())</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fsize</span> <span class="params">(file)</span></span></span><br><span class="line"><span class="keyword">local</span> current = file:seek() <span class="comment">-- get current position</span></span><br><span class="line"><span class="keyword">local</span> size = file:seek(<span class="string">&quot;end&quot;</span>) <span class="comment">-- get file size</span></span><br><span class="line">file:seek(<span class="string">&quot;set&quot;</span>, current) <span class="comment">-- restore position</span></span><br><span class="line"><span class="keyword">return</span> size</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="22-system-lib-æ“ä½œç³»ç»Ÿåº“"><a class="header-anchor" href="#22-system-lib-æ“ä½œç³»ç»Ÿåº“">ğŸŒ³</a>22 system lib æ“ä½œç³»ç»Ÿåº“</h2>
<p>Lua æ˜¯ä»¥ ANSI C å†™æˆçš„</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- obs: 10800 = 3*60*60 (3 hours)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">time</span>&#123;year=<span class="number">1970</span>, month=<span class="number">1</span>, day=<span class="number">1</span>, hour=<span class="number">0</span>&#125;)</span><br><span class="line"><span class="comment">--&gt; 10800</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">time</span>&#123;year=<span class="number">1970</span>, month=<span class="number">1</span>, day=<span class="number">1</span>, hour=<span class="number">0</span>, sec=<span class="number">1</span>&#125;)</span><br><span class="line"><span class="comment">--&gt; 10801</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">time</span>&#123;year=<span class="number">1970</span>, month=<span class="number">1</span>, day=<span class="number">1</span>&#125;)</span><br><span class="line"><span class="comment">--&gt; 54000 (obs: 54000 = 10800 + 12*60*60)</span></span><br><span class="line"></span><br><span class="line">temp = <span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;*t&quot;</span>, <span class="number">906000490</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">&#123;year = 1998, month = 9, day = 16, yday = 259, wday = 4,</span></span><br><span class="line"><span class="comment">hour = 23, min = 48, sec = 10, isdst = false&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">%a abbreviated weekday name (e.g., Wed)</span></span><br><span class="line"><span class="comment">%A full weekday name (e.g., Wednesday)</span></span><br><span class="line"><span class="comment">%b abbreviated month name (e.g., Sep)</span></span><br><span class="line"><span class="comment">%B full month name (e.g., September)</span></span><br><span class="line"><span class="comment">%c date and time (e.g., 09/16/98 23:48:10)</span></span><br><span class="line"><span class="comment">%d day of the month (16) [01-31]</span></span><br><span class="line"><span class="comment">%H hour, using a 24-hour clock (23) [00-23]</span></span><br><span class="line"><span class="comment">%I hour, using a 12-hour clock (11) [01-12]</span></span><br><span class="line"><span class="comment">%M minute (48) [00-59]</span></span><br><span class="line"><span class="comment">%m month (09) [01-12]</span></span><br><span class="line"><span class="comment">%p either &quot;am&quot; or &quot;pm&quot; (pm)</span></span><br><span class="line"><span class="comment">%S second (10) [00-61]</span></span><br><span class="line"><span class="comment">%w weekday (3) [0-6 = Sunday-Saturday]</span></span><br><span class="line"><span class="comment">%x date (e.g., 09/16/98)</span></span><br><span class="line"><span class="comment">%X time (e.g., 23:48:10)</span></span><br><span class="line"><span class="comment">%Y full year (1998)</span></span><br><span class="line"><span class="comment">%y two-digit year (98) [00-99]</span></span><br><span class="line"><span class="comment">%% the character &#x27;%&#x27;</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- äº‹å®ä¸Šå¦‚æœä¸ä½¿ç”¨ä»»ä½•å‚æ•°å°±è°ƒç”¨ dateï¼Œå°±æ˜¯ä»¥%c çš„å½¢å¼è¾“å‡ºã€‚</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;today is %A, in %B&quot;</span>))</span><br><span class="line"><span class="comment">--&gt; today is Tuesday, in May</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%x&quot;</span>, <span class="number">906000490</span>))</span><br><span class="line"><span class="comment">--&gt; 09/16/1998</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">os</span>.<span class="built_in">getenv</span>(<span class="string">&quot;HOME&quot;</span>)) <span class="comment">--&gt; /home/lua</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createDir</span> <span class="params">(dirname)</span></span></span><br><span class="line">    <span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">&quot;mkdir &quot;</span> .. dirname)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="23-debug-lib"><a class="header-anchor" href="#23-debug-lib">ğŸŒ³</a>23. debug lib</h2>
<p>debug åº“ç”±ä¸¤ç§å‡½æ•°ç»„æˆï¼šè‡ªçœ(<code>introspective</code>)å‡½æ•°å’Œ <code>hooks</code>ã€‚</p>
<p>è‡ªçœå‡½æ•° <em>ä½¿å¾—æˆ‘ä»¬å¯ä»¥æ£€æŸ¥è¿è¡Œç¨‹åºçš„æŸäº›æ–¹é¢ï¼Œæ¯”å¦‚æ´»åŠ¨å‡½æ•°æ ˆã€å½“å‰æ‰§è¡Œä»£ç çš„è¡Œå·ã€æœ¬åœ°å˜é‡çš„åå’Œå€¼ã€‚</em><br>
Hooks <em>å¯ä»¥è·Ÿè¸ªç¨‹åºçš„æ‰§è¡Œæƒ…å†µã€‚</em></p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">debug</span>.<span class="built_in">getinfo</span>(foo)</span><br></pre></td></tr></table></figure>
<p>ä»¥æ•°å­— n è°ƒç”¨ <code>debug.getinfo(n)</code>æ—¶ï¼Œè¿”å›åœ¨ <strong>n çº§æ ˆ</strong>çš„æ´»åŠ¨å‡½æ•°çš„ä¿¡æ¯æ•°æ®ã€‚<br>
æ¯”å¦‚ï¼Œå¦‚æœ n=1ï¼Œè¿”å›çš„æ˜¯æ­£åœ¨è¿›è¡Œè°ƒç”¨çš„é‚£ä¸ªå‡½æ•°çš„ä¿¡æ¯ã€‚ï¼ˆn=0 è¡¨ç¤º C å‡½æ•° getinfo æœ¬èº«ï¼‰<br>
å¦‚æœ n æ¯”æ ˆä¸­æ´»åŠ¨å‡½æ•°çš„ä¸ªæ•°å¤§çš„è¯ï¼Œdebug.getinfo è¿”å› nilã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">traceback</span> <span class="params">()</span></span></span><br><span class="line">    <span class="keyword">local</span> level = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">local</span> info = <span class="built_in">debug</span>.<span class="built_in">getinfo</span>(level, <span class="string">&quot;Sl&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> info <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">if</span> info.what == <span class="string">&quot;C&quot;</span> <span class="keyword">then</span> <span class="comment">-- is a C function?</span></span><br><span class="line">            <span class="built_in">print</span>(level, <span class="string">&quot;C function&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">-- a Lua function</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;[%s]:%d&quot;</span>,</span><br><span class="line">            info.short_src, info.currentline))</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        level = level + <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">a 10</span></span><br><span class="line"><span class="comment">b 20</span></span><br><span class="line"><span class="comment">x nil</span></span><br><span class="line"><span class="comment">a 4</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> <span class="params">(a,b)</span></span></span><br><span class="line">    <span class="keyword">local</span> x</span><br><span class="line">    <span class="keyword">do</span> <span class="keyword">local</span> c = a - b <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">local</span> a = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">local</span> name, value = <span class="built_in">debug</span>.<span class="built_in">getlocal</span>(<span class="number">1</span>, a)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> name <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">        <span class="built_in">print</span>(name, value)</span><br><span class="line">        a = a + <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">foo(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getvarvalue</span> <span class="params">(name)</span></span></span><br><span class="line">    <span class="keyword">local</span> value, found</span><br><span class="line">    <span class="comment">-- try local variables</span></span><br><span class="line">    <span class="keyword">local</span> i = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">local</span> n, v = <span class="built_in">debug</span>.<span class="built_in">getlocal</span>(<span class="number">2</span>, i)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> n <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">if</span> n == name <span class="keyword">then</span></span><br><span class="line">        value = v</span><br><span class="line">        found = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        i = i + <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">if</span> found <span class="keyword">then</span> <span class="keyword">return</span> value <span class="keyword">end</span></span><br><span class="line">    <span class="comment">-- try upvalues</span></span><br><span class="line">    <span class="keyword">local</span> func = <span class="built_in">debug</span>.<span class="built_in">getinfo</span>(<span class="number">2</span>).func</span><br><span class="line">    i = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">local</span> n, v = <span class="built_in">debug</span>.<span class="built_in">getupvalue</span>(func, i)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> n <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">if</span> n == name <span class="keyword">then</span> <span class="keyword">return</span> v <span class="keyword">end</span></span><br><span class="line">        i = i + <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">-- not found; get global</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">getfenv</span>(func)[name]</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="23-2-hooks"><a class="header-anchor" href="#23-2-hooks">ğŸŒ³</a>23.2 hooks</h3>
<p>Lua ä½¿ç”¨å•ä¸ªå‚æ•°è°ƒç”¨ hooksï¼Œå‚æ•°ä¸ºä¸€ä¸ªæè¿°äº§ç”Ÿè°ƒç”¨çš„äº‹ä»¶ï¼šâ€œcallâ€ã€â€œreturnâ€ã€â€œlineâ€ æˆ– â€œcountâ€ã€‚</p>
<p>æœ‰å››ç§å¯ä»¥è§¦å‘ä¸€ä¸ª hook çš„äº‹ä»¶ï¼š</p>
<ul>
<li>å½“ Lua è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ call äº‹ä»¶å‘ç”Ÿï¼›</li>
<li>æ¯æ¬¡å‡½æ•°è¿”å›çš„æ—¶å€™ï¼Œreturn äº‹ä»¶å‘ç”Ÿï¼›</li>
<li>Lua å¼€å§‹æ‰§è¡Œä»£ç çš„æ–°è¡Œæ—¶å€™ï¼Œline äº‹ä»¶å‘ç”Ÿï¼›</li>
<li>è¿è¡ŒæŒ‡å®šæ•°ç›®çš„æŒ‡ä»¤ä¹‹åï¼Œcount äº‹ä»¶å‘ç”Ÿã€‚</li>
</ul>
<blockquote>
<p>C API</p>
</blockquote>
<h2 id="24-c-api-overview"><a class="header-anchor" href="#24-c-api-overview">ğŸŒ³</a>24. C API Overview</h2>
<p>Lua è§£é‡Šå™¨æ˜¯ä¸€ä¸ªä½¿ç”¨ Lua æ ‡å‡†åº“å®ç°çš„ç‹¬ç«‹çš„è§£é‡Šå™¨ï¼Œå¥¹æ˜¯ä¸€ä¸ªå¾ˆå°çš„åº”ç”¨ï¼ˆæ€»å…±ä¸è¶…è¿‡ 500 è¡Œçš„ä»£ç ï¼‰ã€‚</p>
<p>è§£é‡Šå™¨è´Ÿè´£ç¨‹åºå’Œä½¿ç”¨è€…çš„æ¥å£ï¼š<em>ä»ä½¿ç”¨è€…é‚£é‡Œè·å–æ–‡ä»¶æˆ–è€…å­—ç¬¦ä¸²ï¼Œå¹¶ä¼ ç»™ Lua æ ‡å‡†åº“ï¼ŒLua æ ‡å‡†åº“è´Ÿè´£æœ€ç»ˆçš„ä»£ç è¿è¡Œã€‚</em></p>
<p>ç¬¬ä¸€ç§ï¼ŒC ä½œä¸ºåº”ç”¨ç¨‹åºè¯­è¨€ï¼ŒLua ä½œä¸ºä¸€ä¸ª<strong>åº“</strong>ä½¿ç”¨ï¼›<br>
ç¬¬äºŒç§ï¼Œåè¿‡æ¥ï¼ŒLua ä½œä¸ºç¨‹åºè¯­è¨€ï¼ŒC ä½œä¸ºåº“ä½¿ç”¨ã€‚</p>
<p>C API:<br>
- è¯»å†™ Lua å…¨å±€å˜é‡çš„å‡½æ•°ï¼Œ<br>
- è°ƒç”¨ Lua å‡½æ•°çš„å‡½æ•°ï¼Œ<br>
- è¿è¡Œ Lua ä»£ç ç‰‡æ–­çš„å‡½æ•°ï¼Œ<br>
- æ³¨å†Œ C å‡½æ•°ç„¶åå¯ä»¥åœ¨Lua ä¸­è¢«è°ƒç”¨çš„å‡½æ•°ï¼Œç­‰ç­‰ã€‚</p>
<p>å‹æ ˆå‡½æ•°:</p>
<pre><code>- ç©ºå€¼ï¼ˆnilï¼‰ç”¨ lua_pushnilï¼Œ
- æ•°å€¼å‹ï¼ˆdoubleï¼‰ç”¨ lua_pushnumberï¼Œ
- å¸ƒå°”å‹ï¼ˆåœ¨ C ä¸­ç”¨æ•´æ•°è¡¨ç¤ºï¼‰ç”¨lua_pushbooleanï¼Œ
- ä»»æ„çš„å­—ç¬¦ä¸²ï¼ˆchar*ç±»å‹ï¼Œ**å…è®¸åŒ…å«'\0'å­—ç¬¦**ï¼‰ç”¨ lua_pushlstringï¼ŒCè¯­è¨€é£æ ¼ï¼ˆä»¥'\0'ç»“æŸï¼‰çš„å­—ç¬¦ä¸²ï¼ˆconst char*ï¼‰ç”¨ lua_pushstringï¼š
</code></pre>
<p>Lua ä¸­çš„å­—ç¬¦ä¸²ä¸æ˜¯ä»¥é›¶ä¸ºç»“æŸç¬¦çš„ï¼›å®ƒä»¬ä¾èµ–äºä¸€ä¸ªæ˜ç¡®çš„é•¿åº¦ï¼Œå› æ­¤å¯ä»¥åŒ…å«ä»»æ„çš„äºŒè¿›åˆ¶æ•°æ®ã€‚<br>
Lua ä»æ¥ä¸ä¿æŒä¸€ä¸ªæŒ‡å‘<strong>å¤–éƒ¨å­—ç¬¦ä¸²</strong>ï¼ˆæˆ–ä»»ä½•å…¶å®ƒå¯¹è±¡ï¼Œé™¤äº† C å‡½æ•°â€”â€”å®ƒæ€»æ˜¯é™æ€æŒ‡é’ˆï¼‰çš„æŒ‡é’ˆã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">int lua_checkstack (lua_State *L, int sz);</span><br></pre></td></tr></table></figure>
<p>lua_isnumber å’Œ lua_isstring å‡½æ•°ä¸æ£€æŸ¥è¿™ä¸ªå€¼æ˜¯å¦æ˜¯æŒ‡å®šçš„ç±»å‹ï¼Œè€Œæ˜¯çœ‹å®ƒ<strong>æ˜¯å¦èƒ½è¢«è½¬æ¢æˆæŒ‡å®šçš„é‚£ç§ç±»å‹</strong>ã€‚ä¾‹å¦‚ï¼Œä»»ä½•æ•°å­—ç±»å‹éƒ½æ»¡è¶³ lua_isstring</p>
<p>lua_type å‡½æ•°ï¼Œå®ƒè¿”å›æ ˆä¸­å…ƒç´ çš„ç±»å‹ã€‚</p>
<p>ç»™å®šçš„å…ƒç´ çš„ç±»å‹ä¸æ­£ç¡®,lua_tobooleanã€lua_tonumber å’Œ lua_strlen è¿”å› 0ï¼Œå…¶ä»–å‡½æ•°è¿”å› NULL</p>
<p>å½“ä¸€ä¸ª C å‡½æ•°è¿”å›åï¼ŒLua ä¼šæ¸…ç†ä»–çš„æ ˆ</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">char</span> *s = lua_tostring(L, <span class="number">-1</span>); <span class="comment">/* any Lua string */</span></span><br><span class="line"><span class="type">size_t</span> l = lua_strlen(L, <span class="number">-1</span>); <span class="comment">/* its length */</span></span><br><span class="line">assert(s[l] == <span class="string">&#x27;\0&#x27;</span>);</span><br><span class="line">assert(<span class="built_in">strlen</span>(s) &lt;= l);</span><br></pre></td></tr></table></figure>
<p>å‡½æ•° lua_gettop è¿”å›å †æ ˆä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œå®ƒä¹Ÿæ˜¯æ ˆé¡¶å…ƒç´ çš„ç´¢å¼•</p>
<p>ä¸€ä¸ªè´Ÿæ•°ç´¢å¼•-x å¯¹åº”äºæ­£æ•°ç´¢å¼• gettop-x+1ã€‚</p>
<p>lua_settop è®¾ç½®æ ˆé¡¶ï¼ˆä¹Ÿå°±æ˜¯å †æ ˆä¸­çš„å…ƒç´ ä¸ªæ•°ï¼‰ä¸ºä¸€ä¸ªæŒ‡å®šçš„å€¼ã€‚<br>
- å¦‚æœå¼€å§‹çš„æ ˆé¡¶é«˜äºæ–°çš„æ ˆé¡¶ï¼Œé¡¶éƒ¨çš„å€¼è¢«ä¸¢å¼ƒã€‚<br>
- å¦åˆ™ï¼Œä¸ºäº†å¾—åˆ°æŒ‡å®šçš„å¤§å°è¿™ä¸ªå‡½æ•°å‹å…¥ç›¸åº”ä¸ªæ•°çš„ç©ºå€¼ï¼ˆnilï¼‰åˆ°æ ˆä¸Šã€‚</p>
<p>lua_settop(L,0)æ¸…ç©ºå †æ ˆã€‚</p>
<p>å‡½æ•° lua_pushvalue å‹å…¥å †æ ˆä¸ŠæŒ‡å®šç´¢å¼•çš„ä¸€ä¸ªæŠŸè´åˆ°æ ˆé¡¶ï¼›<br>
lua_remove ç§»é™¤æŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ ï¼Œå¹¶å°†å…¶ä¸Šé¢æ‰€æœ‰çš„å…ƒç´ ä¸‹ç§»æ¥å¡«è¡¥è¿™ä¸ªä½ç½®çš„ç©ºç™½ï¼›<br>
lua_insert ç§»åŠ¨æ ˆé¡¶å…ƒç´ åˆ°æŒ‡å®šç´¢å¼•çš„ä½ç½®ï¼Œå¹¶å°†è¿™ä¸ªç´¢å¼•ä½ç½®ä¸Šé¢çš„å…ƒç´ å…¨éƒ¨ä¸Šç§»è‡³æ ˆé¡¶è¢«ç§»åŠ¨ç•™ä¸‹çš„ç©ºéš”ï¼›<br>
æœ€åï¼Œlua_replace ä»æ ˆé¡¶å¼¹å‡ºå…ƒç´ å€¼å¹¶å°†å…¶è®¾ç½®åˆ°æŒ‡å®šç´¢å¼•ä½ç½®ï¼Œæ²¡æœ‰ä»»ä½•ç§»åŠ¨æ“ä½œã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">stackDump</span> <span class="params">(lua_State *L)</span> &#123;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="type">int</span> top = lua_gettop(L);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=top;i++)&#123; <span class="comment">/*repeatforeachlevel*/</span></span><br><span class="line">        <span class="type">int</span> t = lua_type(L, i);</span><br><span class="line">        <span class="keyword">switch</span> (t) &#123;</span><br><span class="line">        <span class="keyword">case</span> LUA_TSTRING: <span class="comment">/* strings */</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;`%s&#x27;&quot;</span>, lua_tostring(L, i));</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> LUA_TBOOLEAN: <span class="comment">/* booleans */</span></span><br><span class="line">            <span class="built_in">printf</span>(lua_toboolean(L, i) ? <span class="string">&quot;true&quot;</span> : <span class="string">&quot;false&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> LUA_TNUMBER: <span class="comment">/* numbers */</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%g&quot;</span>, lua_tonumber(L, i));</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>: <span class="comment">/* other values */</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>, lua_typename(L, t)); </span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot; &quot;</span>); <span class="comment">/* put a separator */</span> &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>); <span class="comment">/* end the listing */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span> <span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    lua_State *L = lua_open();</span><br><span class="line">    lua_pushboolean(L, <span class="number">1</span>); lua_pushnumber(L, <span class="number">10</span>);</span><br><span class="line">    lua_pushnil(L); lua_pushstring(L, <span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    stackDump(L);</span><br><span class="line">    <span class="comment">/* true 10 nil `hello&#x27; */</span></span><br><span class="line">    lua_pushvalue(L, <span class="number">-4</span>); stackDump(L);</span><br><span class="line">    <span class="comment">/* true 10 nil `hello&#x27; true */</span></span><br><span class="line">    lua_replace(L, <span class="number">3</span>); stackDump(L);</span><br><span class="line">    <span class="comment">/* true 10 true `hello&#x27; */</span></span><br><span class="line">    lua_settop(L, <span class="number">6</span>); stackDump(L);</span><br><span class="line">    <span class="comment">/* true 10 true `hello&#x27; nil nil */</span></span><br><span class="line">    lua_remove(L, <span class="number">-3</span>); stackDump(L);</span><br><span class="line">    <span class="comment">/* true 10 true nil nil */</span></span><br><span class="line">    lua_settop(L, <span class="number">-5</span>); stackDump(L);</span><br><span class="line">    <span class="comment">/* true */</span></span><br><span class="line">    lua_close(L);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="24-3-c-api-exception-handler"><a class="header-anchor" href="#24-3-c-api-exception-handler">ğŸŒ³</a>24.3 C API exception handler</h3>
<p>å½“æˆ‘ä»¬å†™ä¸€ä¸ªåº“ä»£ç æ—¶ï¼ˆä¹Ÿå°±æ˜¯è¢« Lua è°ƒç”¨çš„ C å‡½æ•°ï¼‰é•¿è·³è½¬ï¼ˆlong jumpï¼‰çš„ç”¨å¤„å‡ ä¹å’Œä¸€ä¸ªçœŸæ­£çš„å¼‚å¸¸å¤„ç†ä¸€æ ·çš„æ–¹ä¾¿ï¼Œå› ä¸º Lua æŠ“å–äº†ä»»åŠ¡å¶ç„¶çš„é”™è¯¯ã€‚</p>
<p>panic å‡½æ•°<br>
lua_pcall<br>
lua_cpcall<br>
luaL_error</p>
<h2 id="25-invoking-lua-function"><a class="header-anchor" href="#25-invoking-lua-function">ğŸŒ³</a>25. invoking lua function</h2>
<h2 id="26-invoking-c-function"><a class="header-anchor" href="#26-invoking-c-function">ğŸŒ³</a>26. invoking C function</h2>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">lua_pushcfunction(l, l_sin);</span><br><span class="line">lua_setglobal(l, <span class="string">&quot;mysin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">l_sin</span> <span class="params">(lua_State *L)</span> &#123;</span><br><span class="line">    <span class="type">double</span> d = luaL_checknumber(L, <span class="number">1</span>);</span><br><span class="line">    lua_pushnumber(L, <span class="built_in">sin</span>(d));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>; <span class="comment">/* number of results */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Cå‡½æ•°åº“</span></span><br><span class="line">LUAMOD_API <span class="type">int</span></span><br><span class="line"><span class="title function_">luaopen_rmq_core</span><span class="params">(lua_State *L)</span> &#123;</span><br><span class="line">    luaL_Reg l[] = &#123;</span><br><span class="line">        &#123; <span class="string">&quot;lwrite&quot;</span>, lrmq_write &#125;,</span><br><span class="line">        &#123; <span class="string">&quot;pack&quot;</span>, lrmq_pack &#125;,</span><br><span class="line">        &#123; <span class="string">&quot;unpack&quot;</span>, lrmq_unpack &#125;,</span><br><span class="line">        &#123; <span class="string">&quot;bind&quot;</span>, lrmq_bind &#125;,</span><br><span class="line">        &#123; <span class="literal">NULL</span>, <span class="literal">NULL</span> &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">    luaL_checkversion(L);</span><br><span class="line">    luaL_newlib(L,l);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="28-user-defined-types-in-c"><a class="header-anchor" href="#28-user-defined-types-in-c">ğŸŒ³</a>28. user-defined types in C</h2>
<p>æ¥å£è®¿é—®å½¢å¼:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = array.new(<span class="number">1000</span>)</span><br><span class="line"><span class="built_in">print</span>(a) <span class="comment">--&gt; userdata: 0x8064d48</span></span><br><span class="line"><span class="built_in">print</span>(array.size(a)) <span class="comment">--&gt; 1000</span></span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">1000</span> <span class="keyword">do</span></span><br><span class="line">array.set(a, i, <span class="number">1</span>/i)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">newarray</span> <span class="params">(lua_State *L)</span> &#123;</span><br><span class="line">    <span class="type">int</span> n = luaL_checkint(L, <span class="number">1</span>);</span><br><span class="line">    <span class="type">size_t</span> nbytes = <span class="keyword">sizeof</span>(NumArray) + (n - <span class="number">1</span>)*<span class="keyword">sizeof</span>(<span class="type">double</span>);</span><br><span class="line">    NumArray *a = (NumArray *)lua_newuserdata(L, nbytes);</span><br><span class="line">    luaL_getmetatable(L, <span class="string">&quot;LuaBook.array&quot;</span>);</span><br><span class="line">    lua_setmetatable(L, <span class="number">-2</span>);</span><br><span class="line">    a-&gt;size = n;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>; <span class="comment">/* new userdatum is already on the stack */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> NumArray *<span class="title function_">checkarray</span> <span class="params">(lua_State *L)</span> &#123;</span><br><span class="line">    <span class="type">void</span> *ud = luaL_checkudata(L, <span class="number">1</span>, <span class="string">&quot;LuaBook.array&quot;</span>);</span><br><span class="line">    luaL_argcheck(L, ud != <span class="literal">NULL</span>, <span class="number">1</span>, <span class="string">&quot;`array&#x27; expected&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> (NumArray *)ud;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">getsize</span> <span class="params">(lua_State *L)</span> &#123;</span><br><span class="line">    NumArray *a = checkarray(L);</span><br><span class="line">    lua_pushnumber(L, a-&gt;size);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">double</span> *<span class="title function_">getelem</span> <span class="params">(lua_State *L)</span> &#123;</span><br><span class="line">    NumArray *a = checkarray(L);</span><br><span class="line">    <span class="type">int</span> index = luaL_checkint(L, <span class="number">2</span>);</span><br><span class="line">    luaL_argcheck(L, <span class="number">1</span> &lt;= index &amp;&amp; index &lt;= a-&gt;size, <span class="number">2</span>,</span><br><span class="line">    <span class="string">&quot;index out of range&quot;</span>);</span><br><span class="line">    <span class="comment">/* return element address */</span></span><br><span class="line">    <span class="keyword">return</span> &amp;a-&gt;values[index - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">setarray</span> <span class="params">(lua_State *L)</span> &#123;</span><br><span class="line">    <span class="type">double</span> newvalue = luaL_checknumber(L, <span class="number">3</span>);</span><br><span class="line">    *getelem(L) = newvalue;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">getarray</span> <span class="params">(lua_State *L)</span> &#123;</span><br><span class="line">    lua_pushnumber(L, *getelem(L));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">luaL_reg</span> <span class="title">arraylib_f</span> [] =</span> &#123;</span><br><span class="line">    &#123;<span class="string">&quot;new&quot;</span>, newarray&#125;,</span><br><span class="line">    &#123;<span class="literal">NULL</span>, <span class="literal">NULL</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">luaL_reg</span> <span class="title">arraylib_m</span> [] =</span> &#123;</span><br><span class="line">    &#123;<span class="string">&quot;__tostring&quot;</span>, array2string&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;set&quot;</span>, setarray&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;get&quot;</span>, getarray&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;size&quot;</span>, getsize&#125;,</span><br><span class="line">    &#123;<span class="literal">NULL</span>, <span class="literal">NULL</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">array2string</span> <span class="params">(lua_State *L)</span> &#123;</span><br><span class="line">    NumArray *a = checkarray(L);</span><br><span class="line">    lua_pushfstring(L, <span class="string">&quot;array(%d)&quot;</span>, a-&gt;size);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">luaopen_array</span> <span class="params">(lua_State *L)</span> &#123;</span><br><span class="line">    luaL_newmetatable(L, <span class="string">&quot;LuaBook.array&quot;</span>);</span><br><span class="line">    lua_pushstring(L, <span class="string">&quot;__index&quot;</span>);</span><br><span class="line">    lua_pushvalue(L, <span class="number">-2</span>); <span class="comment">/* pushes the metatable */</span></span><br><span class="line">    lua_settable(L, <span class="number">-3</span>); <span class="comment">/* metatable.__index = metatable */</span></span><br><span class="line">    </span><br><span class="line">    luaL_openlib(L, <span class="literal">NULL</span>, arraylib_m, <span class="number">0</span>);</span><br><span class="line">    luaL_openlib(L, <span class="string">&quot;array&quot;</span>, arraylib_f, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>note:<em>luaL_openlib çš„å¦ä¸€ä¸ªç‰¹å¾ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨ï¼Œå½“æˆ‘ä»¬ä¼ é€’ä¸€ä¸ª NULLä½œä¸ºåº“åæ—¶ï¼ŒluaL_openlib å¹¶æ²¡æœ‰åˆ›å»ºä»»ä½•åŒ…å«å‡½æ•°çš„è¡¨ï¼›ç›¸åï¼Œä»–è®¤ä¸ºå°è£…å‡½æ•°çš„è¡¨åœ¨æ ˆå†…ï¼Œä½äºä¸´æ—¶çš„ upvalues çš„ä¸‹é¢ã€‚</em></p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°è£…å‡½æ•°çš„è¡¨æ˜¯ metatable æœ¬èº«ï¼Œä¹Ÿå°±æ˜¯ luaL_openlib æ”¾ç½®æ–¹æ³•çš„åœ°æ–¹ã€‚*</p>
<p>é¢å‘å¯¹è±¡è®¿é—®å½¢å¼:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = array.new(<span class="number">1000</span>)</span><br><span class="line"><span class="built_in">print</span>(a:size()) <span class="comment">--&gt; 1000</span></span><br><span class="line">a:set(<span class="number">10</span>, <span class="number">3.4</span>)</span><br><span class="line"><span class="built_in">print</span>(a:get(<span class="number">10</span>)) <span class="comment">--&gt; 3.4</span></span><br></pre></td></tr></table></figure>
<h2 id="29-resource-managerment-èµ„æºç®¡ç†"><a class="header-anchor" href="#29-resource-managerment-èµ„æºç®¡ç†">ğŸŒ³</a>29. resource managerment èµ„æºç®¡ç†</h2>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;dirent.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="comment">/* forward declaration for the iterator function */</span></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">dir_iter</span> <span class="params">(lua_State *L)</span>;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">l_dir</span> <span class="params">(lua_State *L)</span> &#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *path = luaL_checkstring(L, <span class="number">1</span>);</span><br><span class="line">    <span class="comment">/* create a userdatum to store a DIR address */</span></span><br><span class="line">    DIR **d = (DIR **)lua_newuserdata(L, <span class="keyword">sizeof</span>(DIR *));</span><br><span class="line">    <span class="comment">/* set its metatable */</span></span><br><span class="line">    luaL_getmetatable(L, <span class="string">&quot;LuaBook.dir&quot;</span>);</span><br><span class="line">    lua_setmetatable(L, <span class="number">-2</span>);</span><br><span class="line">    <span class="comment">/* try to open the given directory */</span></span><br><span class="line">    *d = opendir(path);</span><br><span class="line">    <span class="keyword">if</span> (*d == <span class="literal">NULL</span>) <span class="comment">/* error opening the directory? */</span></span><br><span class="line">    luaL_error(L, <span class="string">&quot;cannot open %s: %s&quot;</span>, path,</span><br><span class="line">    strerror(errno));</span><br><span class="line">    <span class="comment">/* creates and returns the iterator function</span></span><br><span class="line"><span class="comment">        (its sole upvalue, the directory userdatum,</span></span><br><span class="line"><span class="comment">        is already on the stack top */</span></span><br><span class="line">    lua_pushcclosure(L, dir_iter, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">dir_iter</span> <span class="params">(lua_State *L)</span> &#123;</span><br><span class="line">    DIR *d = *(DIR **)lua_touserdata(L, lua_upvalueindex(<span class="number">1</span>));</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">dirent</span> *<span class="title">entry</span>;</span></span><br><span class="line">    <span class="keyword">if</span> ((entry = readdir(d)) != <span class="literal">NULL</span>) &#123;</span><br><span class="line">    lua_pushstring(L, entry-&gt;d_name);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">/* no more values to return */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">dir_gc</span> <span class="params">(lua_State *L)</span> &#123;</span><br><span class="line">    DIR *d = *(DIR **)lua_touserdata(L, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (d) closedir(d);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">luaopen_dir</span> <span class="params">(lua_State *L)</span> &#123;</span><br><span class="line">    luaL_newmetatable(L, <span class="string">&quot;LuaBook.dir&quot;</span>);</span><br><span class="line">    <span class="comment">/* set its __gc field */</span></span><br><span class="line">    lua_pushstring(L, <span class="string">&quot;__gc&quot;</span>);</span><br><span class="line">    lua_pushcfunction(L, dir_gc);</span><br><span class="line">    lua_settable(L, <span class="number">-3</span>);</span><br><span class="line">    <span class="comment">/* register the `dir&#x27; function */</span></span><br><span class="line">    lua_pushcfunction(L, l_dir);</span><br><span class="line">    lua_setglobal(L, <span class="string">&quot;dir&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="lua-ç‰ˆæœ¬æ›´æ–°è®°å½•"><a class="header-anchor" href="#lua-ç‰ˆæœ¬æ›´æ–°è®°å½•">ğŸŒ³</a>Lua ç‰ˆæœ¬æ›´æ–°è®°å½•</h2>
<h3 id="ä¸­æ–‡ç‰ˆ"><a class="header-anchor" href="#ä¸­æ–‡ç‰ˆ">ğŸŒ³</a>ä¸­æ–‡ç‰ˆ</h3>
<h4 id="è‡ª-lua-5-3-ä»¥æ¥çš„å˜åŒ–"><a class="header-anchor" href="#è‡ª-lua-5-3-ä»¥æ¥çš„å˜åŒ–">ğŸŒ³</a>è‡ª Lua 5.3 ä»¥æ¥çš„å˜åŒ–</h4>
<p>ä»¥ä¸‹æ˜¯ Lua 5.4 å¼•å…¥çš„ä¸»è¦å˜åŒ–ã€‚å‚è€ƒæ‰‹å†Œåˆ—å‡ºäº†å¿…é¡»å¼•å…¥çš„ä¸å…¼å®¹æ€§ã€‚</p>
<h5 id="ä¸»è¦å˜åŒ–"><a class="header-anchor" href="#ä¸»è¦å˜åŒ–">ğŸŒ³</a>ä¸»è¦å˜åŒ–</h5>
<ul>
<li>åƒåœ¾æ”¶é›†çš„æ–°ç”Ÿä»£æ¨¡å¼(æ–°æ–¹æ³• æ„å‘³ç€æ›´é¢‘ç¹åœ°å¯åŠ¨è¾ƒçŸ­çš„è·Ÿè¸ªï¼Œä»…æ¶µç›–æœ€è¿‘åˆ›å»ºçš„å¯¹è±¡ã€‚ ä»…åœ¨çŸ­æš‚çš„çˆ¬ç½‘ä¹‹åæ— æ³•è¾¾åˆ°æ‰€éœ€çš„å†…å­˜æ¶ˆè€—æŒ‡æ ‡æ—¶ï¼Œæ‰æ‰§è¡Œæ‰€æœ‰å¯¹è±¡çš„å®Œå…¨çˆ¬ç½‘ã€‚ è¿™ç§æ–¹æ³•å¯å®ç°æ›´é«˜çš„æ€§èƒ½å’Œæ›´ä½çš„å†…å­˜æ¶ˆè€— åœ¨å­˜å‚¨å¤§é‡å­˜åœ¨æ—¶é—´çŸ­çš„å¯¹è±¡çš„æƒ…å†µä¸‹ã€‚)</li>
<li>å¾…å…³é—­å˜é‡</li>
<li>å¸¸é‡å˜é‡</li>
<li>userdata å¯ä»¥æœ‰å¤šä¸ªç”¨æˆ·å€¼</li>
<li>math.random çš„æ–°å®ç°</li>
<li>è­¦å‘Šç³»ç»Ÿ</li>
<li>å…³äºå‡½æ•°å‚æ•°å’Œè¿”å›å€¼çš„è°ƒè¯•ä¿¡æ¯</li>
<li>æ•´æ•° â€˜forâ€™ å¾ªç¯çš„æ–°è¯­ä¹‰</li>
<li>å¯é€‰çš„ â€˜initâ€™ å‚æ•°ç”¨äº â€˜string.gmatchâ€™</li>
<li>æ–°å‡½æ•° â€˜lua_resetthreadâ€™ å’Œ â€˜coroutine.closeâ€™</li>
<li>å­—ç¬¦ä¸²åˆ°æ•°å­—çš„å¼ºåˆ¶è½¬æ¢ç§»è‡³å­—ç¬¦ä¸²åº“</li>
<li>å½“ç¼©å°å†…å­˜å—æ—¶ï¼Œå…è®¸åˆ†é…å‡½æ•°å¤±è´¥</li>
<li>â€˜string.formatâ€™ ä¸­çš„æ–°æ ¼å¼ â€˜%pâ€™</li>
<li>utf8 åº“æ¥å—æœ€å¤š 2^31 çš„ä»£ç ç‚¹</li>
</ul>
<h4 id="è‡ª-lua-5-2-ä»¥æ¥çš„å˜åŒ–"><a class="header-anchor" href="#è‡ª-lua-5-2-ä»¥æ¥çš„å˜åŒ–">ğŸŒ³</a>è‡ª Lua 5.2 ä»¥æ¥çš„å˜åŒ–</h4>
<p>ä»¥ä¸‹æ˜¯ Lua 5.3 å¼•å…¥çš„ä¸»è¦å˜åŒ–ã€‚å‚è€ƒæ‰‹å†Œåˆ—å‡ºäº†å¿…é¡»å¼•å…¥çš„ä¸å…¼å®¹æ€§ã€‚</p>
<h5 id="ä¸»è¦å˜åŒ–"><a class="header-anchor" href="#ä¸»è¦å˜åŒ–">ğŸŒ³</a>ä¸»è¦å˜åŒ–</h5>
<ul>
<li>æ•´æ•°ï¼ˆé»˜è®¤ 64 ä½ï¼‰</li>
<li>å®˜æ–¹æ”¯æŒ 32 ä½æ•°å­—</li>
<li>ä½è¿ç®—ç¬¦</li>
<li>åŸºæœ¬çš„ utf-8 æ”¯æŒ</li>
<li>ç”¨äºæ‰“åŒ…å’Œè§£åŒ…å€¼çš„å‡½æ•°</li>
<li>ä»¥ä¸‹æ˜¯ Lua 5.3 å¼•å…¥çš„å…¶ä»–å˜åŒ–ï¼š</li>
</ul>
<h5 id="è¯­è¨€"><a class="header-anchor" href="#è¯­è¨€">ğŸŒ³</a>è¯­è¨€</h5>
<ul>
<li>userdata å¯ä»¥æœ‰ä»»ä½• Lua å€¼ä½œä¸ºç”¨æˆ·å€¼</li>
<li>å‘ä¸‹å–æ•´é™¤æ³•</li>
<li>ä¸€äº›å…ƒæ–¹æ³•çš„æ›´çµæ´»è§„åˆ™</li>
</ul>
<h5 id="åº“"><a class="header-anchor" href="#åº“">ğŸŒ³</a>åº“</h5>
<ul>
<li>ipairs å’Œ table åº“å°Šé‡å…ƒæ–¹æ³•</li>
<li>string.dump ä¸­çš„ strip é€‰é¡¹</li>
<li>table åº“å°Šé‡å…ƒæ–¹æ³•</li>
<li>æ–°å‡½æ•° table.move</li>
<li>æ–°å‡½æ•° string.pack</li>
<li>æ–°å‡½æ•° string.unpack</li>
<li>æ–°å‡½æ•° string.packsize</li>
</ul>
<h5 id="c-api"><a class="header-anchor" href="#c-api">ğŸŒ³</a>C API</h5>
<ul>
<li>æ›´ç®€å•çš„ C ä¸­çš„å»¶ç»­å‡½æ•° API</li>
<li>lua_gettable å’Œç±»ä¼¼å‡½æ•°è¿”å›ç»“æœå€¼çš„ç±»å‹</li>
<li>lua_dump ä¸­çš„ strip é€‰é¡¹</li>
<li>æ–°å‡½æ•°ï¼šlua_geti</li>
<li>æ–°å‡½æ•°ï¼šlua_seti</li>
<li>æ–°å‡½æ•°ï¼šlua_isyieldable</li>
<li>æ–°å‡½æ•°ï¼šlua_numbertointeger</li>
<li>æ–°å‡½æ•°ï¼šlua_rotate</li>
<li>æ–°å‡½æ•°ï¼šlua_stringtonumber</li>
</ul>
<h5 id="lua-ç‹¬ç«‹è§£é‡Šå™¨"><a class="header-anchor" href="#lua-ç‹¬ç«‹è§£é‡Šå™¨">ğŸŒ³</a>Lua ç‹¬ç«‹è§£é‡Šå™¨</h5>
<ul>
<li>å¯ç”¨ä½œè®¡ç®—å™¨ï¼›æ— éœ€å‰ç¼€ â€˜=â€™</li>
<li>arg è¡¨å¯¹æ‰€æœ‰ä»£ç å¯ç”¨</li>
</ul>
<h4 id="è‡ª-lua-5-1-ä»¥æ¥çš„å˜åŒ–"><a class="header-anchor" href="#è‡ª-lua-5-1-ä»¥æ¥çš„å˜åŒ–">ğŸŒ³</a>è‡ª Lua 5.1 ä»¥æ¥çš„å˜åŒ–</h4>
<p>ä»¥ä¸‹æ˜¯ Lua 5.2 å¼•å…¥çš„ä¸»è¦å˜åŒ–ã€‚å‚è€ƒæ‰‹å†Œåˆ—å‡ºäº†å¿…é¡»å¼•å…¥çš„ä¸å…¼å®¹æ€§ã€‚</p>
<h5 id="ä¸»è¦å˜åŒ–"><a class="header-anchor" href="#ä¸»è¦å˜åŒ–">ğŸŒ³</a>ä¸»è¦å˜åŒ–</h5>
<ul>
<li>å¯æŒ‚èµ·çš„ pcall å’Œå…ƒæ–¹æ³•</li>
<li>å…¨å±€å˜é‡çš„æ–°è¯æ³•æ–¹æ¡ˆ</li>
<li>çŸ­å‘½è¡¨</li>
<li>ä½è¿ç®—çš„æ–°åº“</li>
<li>è½»é‡çº§ C å‡½æ•°</li>
<li>ç´§æ€¥åƒåœ¾æ”¶é›†å™¨</li>
<li>goto è¯­å¥</li>
<li>è¡¨çš„ç»ˆç»“å™¨<br>
ä»¥ä¸‹æ˜¯ Lua 5.2 å¼•å…¥çš„å…¶ä»–å˜åŒ–ï¼š</li>
</ul>
<h5 id="è¯­è¨€"><a class="header-anchor" href="#è¯­è¨€">ğŸŒ³</a>è¯­è¨€</h5>
<ul>
<li>çº¿ç¨‹æˆ–å‡½æ•°ä¸å†æœ‰ fenv</li>
<li>è¡¨å°Šé‡ __len å…ƒæ–¹æ³•</li>
<li>å­—ç¬¦ä¸²ä¸­çš„åå…­è¿›åˆ¶å’Œ \z è½¬ä¹‰</li>
<li>æ”¯æŒåå…­è¿›åˆ¶æµ®ç‚¹æ•°</li>
<li>ä¸åŒç±»å‹çš„é¡ºåºå…ƒæ–¹æ³•</li>
<li>ä¸å†éªŒè¯æ“ä½œç ä¸€è‡´æ€§</li>
<li>é’©å­äº‹ä»¶ â€œtail returnâ€ è¢« â€œtail callâ€ å–ä»£</li>
<li>ç©ºè¯­å¥</li>
<li>break è¯­å¥å¯ä»¥å‡ºç°åœ¨å—çš„ä¸­é—´</li>
</ul>
<h5 id="åº“"><a class="header-anchor" href="#åº“">ğŸŒ³</a>åº“</h5>
<ul>
<li>é€šè¿‡ xpcall è°ƒç”¨çš„å‡½æ•°çš„å‚æ•°</li>
<li>load å’Œ loadfile çš„å¯é€‰ â€˜modeâ€™ å‚æ•°ï¼ˆæ§åˆ¶äºŒè¿›åˆ¶ x æ–‡æœ¬ï¼‰</li>
<li>load å’Œ loadfile çš„å¯é€‰ â€˜envâ€™ å‚æ•°ï¼ˆåŠ è½½å—çš„ç¯å¢ƒï¼‰</li>
<li>loadlib å¯ä»¥åŠ è½½å…·æœ‰å…¨å±€åç§°çš„åº“ï¼ˆRTLD_GLOBALï¼‰</li>
<li>æ–°å‡½æ•° package.searchpath</li>
<li>æ¨¡å—åŠ è½½æ—¶æ¥æ”¶å®ƒä»¬çš„è·¯å¾„</li>
<li>math.log ä¸­çš„å¯é€‰åŸºæ•°</li>
<li>string.rep ä¸­çš„å¯é€‰åˆ†éš”ç¬¦</li>
<li>file:write è¿”å›æ–‡ä»¶</li>
<li>å…³é—­ç®¡é“è¿”å›é€€å‡ºçŠ¶æ€</li>
<li>os.exit å¯ä»¥å…³é—­çŠ¶æ€</li>
<li>æ–°å…ƒæ–¹æ³• __pairs å’Œ __ipairs</li>
<li>collectgarbage å’Œ lua_gc çš„æ–°é€‰é¡¹ â€˜isrunningâ€™</li>
<li>è¾¹ç•Œæ¨¡å¼</li>
<li>æ¨¡å¼ä¸­çš„ \0</li>
<li>io.read çš„æ–°é€‰é¡¹ *L</li>
<li>io.lines çš„é€‰é¡¹</li>
<li>debug.getlocal å¯ä»¥è®¿é—®å‡½æ•°çš„å¯å˜å‚æ•°</li>
</ul>
<h5 id="c-api"><a class="header-anchor" href="#c-api">ğŸŒ³</a>C API</h5>
<ul>
<li>æ³¨å†Œè¡¨ä¸­é¢„å®šä¹‰çš„ä¸»çº¿ç¨‹</li>
<li>æ–°å‡½æ•° lua_absindex, lua_arith, lua_compare, lua_copy, lua_len, lua_rawgetp, lua_rawsetp, lua_upvalueid, lua_upvaluejoin, lua_version.</li>
<li>æ–°å‡½æ•° luaL_checkversion, luaL_setmetatable, luaL_testudata, luaL_tolstring.</li>
<li>lua_pushstring å’Œ pushlstring è¿”å›å­—ç¬¦ä¸²</li>
<li>debug API ä¸­å¯ç”¨çš„ nparams å’Œ isvararg</li>
<li>æ–°çš„ lua_Unsigned</li>
</ul>
<h5 id="å®ç°"><a class="header-anchor" href="#å®ç°">ğŸŒ³</a>å®ç°</h5>
<ul>
<li>æ¯ä¸ªå‡½æ•°çš„æœ€å¤§å¸¸é‡æé«˜åˆ° 226</li>
<li>åƒåœ¾æ”¶é›†çš„ä»£é™…æ¨¡å¼ï¼ˆå®éªŒæ€§ï¼‰</li>
<li>NaN æŠ€å·§ï¼ˆå®éªŒæ€§ï¼‰</li>
<li>ctypes çš„å†…éƒ¨ï¼ˆä¸å¯å˜ï¼‰ç‰ˆæœ¬</li>
<li>å­—ç¬¦ä¸²ç¼“å†²åŒºçš„æ›´ç®€å•å®ç°</li>
<li>è§£æå™¨ä½¿ç”¨æ›´å°‘çš„ C æ ˆç©ºé—´ï¼ˆä¸å†æœ‰è‡ªåŠ¨æ•°ç»„ï¼‰</li>
</ul>
<h5 id="lua-ç‹¬ç«‹è§£é‡Šå™¨"><a class="header-anchor" href="#lua-ç‹¬ç«‹è§£é‡Šå™¨">ğŸŒ³</a>Lua ç‹¬ç«‹è§£é‡Šå™¨</h5>
<ul>
<li>æ–°çš„ -E é€‰é¡¹ä»¥é¿å…ç¯å¢ƒå˜é‡</li>
<li>å¤„ç†éå­—ç¬¦ä¸²é”™è¯¯æ¶ˆæ¯</li>
</ul>
<h3 id="è‹±æ–‡åŸç‰ˆ"><a class="header-anchor" href="#è‹±æ–‡åŸç‰ˆ">ğŸŒ³</a>è‹±æ–‡åŸç‰ˆ</h3>
<h4 id="changes-since-lua-5-3"><a class="header-anchor" href="#changes-since-lua-5-3">ğŸŒ³</a>Changes since Lua 5.3</h4>
<p>Here are the main changes introduced in Lua 5.4. The reference manual lists the incompatibilities that had to be introduced.</p>
<h5 id="main-changes"><a class="header-anchor" href="#main-changes">ğŸŒ³</a>Main changes</h5>
<ul>
<li>new generational mode for garbage collection</li>
<li>to-be-closed variables</li>
<li>const variables</li>
<li>userdata can have multiple user values</li>
<li>new implementation for math.random</li>
<li>warning system</li>
<li>debug information about function arguments and returns</li>
<li>new semantics for the integer â€˜forâ€™ loop</li>
<li>optional â€˜initâ€™ argument to â€˜string.gmatchâ€™</li>
<li>new functions â€˜lua_resetthreadâ€™ and â€˜coroutine.closeâ€™</li>
<li>string-to-number coercions moved to the string library</li>
<li>allocation function allowed to fail when shrinking a memory block</li>
<li>new format â€˜%pâ€™ in â€˜string.formatâ€™</li>
<li>utf8 library accepts codepoints up to 2^31</li>
</ul>
<h4 id="changes-since-lua-5-2"><a class="header-anchor" href="#changes-since-lua-5-2">ğŸŒ³</a>Changes since Lua 5.2</h4>
<p>Here are the main changes introduced in Lua 5.3. The reference manual lists the incompatibilities that had to be introduced.</p>
<h5 id="main-changes"><a class="header-anchor" href="#main-changes">ğŸŒ³</a>Main changes</h5>
<ul>
<li>integers (64-bit by default)</li>
<li>official support for 32-bit numbers</li>
<li>bitwise operators</li>
<li>basic utf-8 support</li>
<li>functions for packing and unpacking values</li>
<li>Here are the other changes introduced in Lua 5.3:</li>
</ul>
<h5 id="language"><a class="header-anchor" href="#language">ğŸŒ³</a>Language</h5>
<ul>
<li>userdata can have any Lua value as uservalue</li>
<li>floor division</li>
<li>more flexible rules for some metamethods</li>
</ul>
<h5 id="libraries"><a class="header-anchor" href="#libraries">ğŸŒ³</a>Libraries</h5>
<ul>
<li>ipairs and the table library respect metamethods</li>
<li>strip option in string.dump</li>
<li>table library respects metamethods</li>
<li>new function table.move</li>
<li>new function string.pack</li>
<li>new function string.unpack</li>
<li>new function string.packsize</li>
</ul>
<h5 id="c-api"><a class="header-anchor" href="#c-api">ğŸŒ³</a>C API</h5>
<ul>
<li>simpler API for continuation functions in C</li>
<li>lua_gettable and similar functions return type of resulted value</li>
<li>strip option in lua_dump</li>
<li>new function: lua_geti</li>
<li>new function: lua_seti</li>
<li>new function: lua_isyieldable</li>
<li>new function: lua_numbertointeger</li>
<li>new function: lua_rotate</li>
<li>new function: lua_stringtonumber</li>
</ul>
<h5 id="lua-standalone-interpreter"><a class="header-anchor" href="#lua-standalone-interpreter">ğŸŒ³</a>Lua standalone interpreter</h5>
<ul>
<li>can be used as calculator; no need to prefix with â€˜=â€™</li>
<li>arg table available to all code</li>
</ul>
<h4 id="changes-since-lua-5-1"><a class="header-anchor" href="#changes-since-lua-5-1">ğŸŒ³</a>Changes since Lua 5.1</h4>
<p>Here are the main changes introduced in Lua 5.2. The reference manual lists the incompatibilities that had to be introduced.</p>
<h5 id="main-changes"><a class="header-anchor" href="#main-changes">ğŸŒ³</a>Main changes</h5>
<ul>
<li>yieldable pcall and metamethods</li>
<li>new lexical scheme for globals</li>
<li>ephemeron tables</li>
<li>new library for bitwise operations</li>
<li>light C functions</li>
<li>emergency garbage collector</li>
<li>goto statement</li>
<li>finalizers for tables<br>
Here are the other changes introduced in Lua 5.2:</li>
</ul>
<h5 id="language"><a class="header-anchor" href="#language">ğŸŒ³</a>Language</h5>
<ul>
<li>no more fenv for threads or functions</li>
<li>tables honor the __len metamethod</li>
<li>hex and \z escapes in strings</li>
<li>support for hexadecimal floats</li>
<li>order metamethods work for different types</li>
<li>no more verification of opcode consistency</li>
<li>hook event â€œtail returnâ€ replaced by â€œtail callâ€</li>
<li>empty statement</li>
<li>break statement may appear in the middle of a block</li>
</ul>
<h5 id="libraries"><a class="header-anchor" href="#libraries">ğŸŒ³</a>Libraries</h5>
<ul>
<li>arguments for function called through xpcall</li>
<li>optional â€˜modeâ€™ argument to load and loadfile (to control binary x text)</li>
<li>optional â€˜envâ€™ argument to load and loadfile (environment for loaded chunk)</li>
<li>loadlib may load libraries with global names (RTLD_GLOBAL)</li>
<li>new function package.searchpath</li>
<li>modules receive their paths when loaded</li>
<li>optional base in math.log</li>
<li>optional separator in string.rep</li>
<li>file:write returns file</li>
<li>closing a pipe returns exit status</li>
<li>os.exit may close state</li>
<li>new metamethods __pairs and __ipairs</li>
<li>new option â€˜isrunningâ€™ for collectgarbage and lua_gc</li>
<li>frontier patterns</li>
<li>\0 in patterns</li>
<li>new option *L for io.read</li>
<li>options for io.lines</li>
<li>debug.getlocal can access function varargs</li>
</ul>
<h5 id="c-api"><a class="header-anchor" href="#c-api">ğŸŒ³</a>C API</h5>
<ul>
<li>main thread predefined in the registry</li>
<li>new functions lua_absindex, lua_arith, lua_compare, lua_copy, lua_len, lua_rawgetp, lua_rawsetp, lua_upvalueid, lua_upvaluejoin, lua_version.</li>
<li>new functions luaL_checkversion, luaL_setmetatable, luaL_testudata, luaL_tolstring.</li>
<li>lua_pushstring and pushlstring return string</li>
<li>nparams and isvararg available in debug API</li>
<li>new lua_Unsigned</li>
</ul>
<h5 id="implementation"><a class="header-anchor" href="#implementation">ğŸŒ³</a>Implementation</h5>
<ul>
<li>max constants per function raised to 226</li>
<li>generational mode for garbage collection (experimental)</li>
<li>NaN trick (experimental)</li>
<li>internal (immutable) version of ctypes</li>
<li>simpler implementation for string buffers</li>
<li>parser uses much less C-stack space (no more auto arrays)</li>
</ul>
<h5 id="lua-standalone-interpreter"><a class="header-anchor" href="#lua-standalone-interpreter">ğŸŒ³</a>Lua standalone interpreter</h5>
<ul>
<li>new -E option to avoid environment variables</li>
<li>handling of non-string error messages</li>
</ul>
<h2 id="lua-5-4-ç‰ˆæœ¬æ›´æ–°"><a class="header-anchor" href="#lua-5-4-ç‰ˆæœ¬æ›´æ–°">ğŸŒ³</a>Lua 5.4 ç‰ˆæœ¬æ›´æ–°</h2>
<p>Lua5.4å·²ç»è¿›å…¥rc(Release Candidate)çŠ¶æ€ï¼Œç›¸ä¿¡å¾ˆå¿«å°±ä¼šå‘å¸ƒæ­£å¼ç‰ˆã€‚è¿™ä¸ªç‰ˆæœ¬åœ¨è¯­è¨€å±‚é¢ä¸Šä¿®æ”¹çš„ä¸œè¥¿å¹¶ä¸å¤šï¼Œä½†æ˜¯é»˜è®¤çš„GCè¢«æ¢æˆäº†â€œåˆ†ä»£å¼GCâ€ï¼Œè¿™å¯¹äºé‚£äº›ç»å¸¸äº§ç”ŸçŸ­æœŸå¯¹è±¡çš„ç¨‹åºåº”è¯¥ä¼šæœ‰å¾ˆæ˜æ˜¾çš„æ€§èƒ½æå‡ã€‚GCå¸¦æ¥çš„è´Ÿæ‹…æ°¸è¿œæ˜¯è‡ªåŠ¨å†…å­˜ç®¡ç†è¯­è¨€çš„ä¸€å¤§ç—›ç‚¹ï¼Œå¦‚æœèƒ½åœ¨è¿™ä¸€ç‚¹ä¸Šå–å¾—çªç ´ï¼Œé‚£è‚¯å®šæ¯”æä¾›æ›´å¤šè¯­æ³•ç³–æ¥å¾—æœ‰ä»·å€¼ã€‚</p>
<p>æ­¤å¤–5.4å¯ä»¥æŒ‡å®šå±€éƒ¨å˜é‡çš„å±æ€§ï¼Œç”¨è¿™æ ·çš„è¯­æ³•ï¼š</p>
<p>local a <NAME> = 3<br>
NAMEå¯ä»¥æ˜¯constæˆ–closeï¼Œä¸ºconstæ—¶è¡¨ç¤ºconstå˜é‡(const variables)ï¼Œconstå˜é‡å¯ä»¥å¸®åŠ©ç¼–è¯‘å™¨ä½œä¸€äº›ä¼˜åŒ–ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</NAME></p>
<p>local a <const> = 4<br>
local b = a + 7<br>
print(b)<br>
ç¼–è¯‘å™¨ä¼šæŠŠaæ¶ˆé™¤æ‰ï¼Œç›´æ¥ç»™bèµ‹11ã€‚è¿™ç§ä¼˜åŒ–æ˜¯æœ‰é™çš„ï¼Œå¯¹äºåŸºæœ¬ç±»å‹å’Œå­—ç¬¦ä¸²ï¼Œèƒ½å¤Ÿæœ‰æ•ˆå‡å°‘å¯„å­˜å™¨çš„è®¿é—®ï¼Œä½†å¯¹äºtableè²Œä¼¼ç›Šå¤„ä¸å¤§ã€‚ä»£ç æ–‡ä»¶å¦‚æœéœ€è¦ä¸€äº›æ•°å€¼å¸¸é‡ï¼Œå¯ä»¥å†™æˆconstå˜é‡ï¼Œæ¯”å¦‚ï¼š</const></p>
<p>local MAX_LEN <const> = 20<br>
function check_name(name)<br>
return #name &lt;= MAX_LEN<br>
end<br>
åœ¨check_nameä¸­å°±æ²¡æœ‰upvalueçš„è®¿é—®ï¼Œè€Œæ˜¯ç›´æ¥è½¬æ¢æˆå’Œ20çš„æ¯”è¾ƒã€‚</const></p>
<p>closeå˜é‡(To-be-closed Variables)éœ€è¦å’Œcloseå…ƒæ–¹æ³•ç»“åˆä½¿ç”¨ï¼Œåœ¨å˜é‡è¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œä¼šè°ƒç”¨å˜é‡çš„closeå…ƒæ–¹æ³•ï¼Œè¿™å¬èµ·æ¥æ˜¯ä¸æ˜¯æœ‰ç‚¹åƒC++çš„RAIIç”¨æ³•ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p>
<p>local function newlock()<br>
local lock = {<br>
acquire = function()<br>
print(â€œacquire lockâ€)<br>
end,<br>
release = function()<br>
print(â€œrelease lockâ€)<br>
end,<br>
}<br>
return lock<br>
end</p>
<p>local function lockguard(lock)<br>
local wrap = {<br>
lock = lock<br>
}<br>
lock.acquire()<br>
return setmetatable(wrap, {__close = function(t, err)<br>
t.lock.release()<br>
end})<br>
end</p>
<p>local lock = newlock()<br>
do<br>
for i = 1, 3 do<br>
local l <close> = lockguard(lock)<br>
print(i)<br>
error(â€œerrâ€)<br>
end<br>
end<br>
å®šä¹‰local l <close>åï¼Œæ— è®ºæ˜¯å¦æœ‰é”™è¯¯ï¼Œreleaseéƒ½èƒ½å¾—åˆ°è°ƒç”¨ï¼›ä»è¿™ä¸ªä¾‹å­ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œcloseå˜é‡ä¸€èˆ¬ç”¨äºéœ€è¦åŠæ—¶é‡Šæ”¾èµ„æºçš„æƒ…å†µï¼›å¦åˆ™Luaçš„GCå¯ä»¥åº”ä»˜å¤§å¤šæ•°æƒ…å†µã€‚</close></close></p>
<p>é™¤äº†ä¸Šé¢æåˆ°çš„ç‰¹æ€§ï¼Œè¿˜æœ‰ä¸€äº›æ–°çš„ä¿®æ”¹ç½—åˆ—å¦‚ä¸‹ï¼š</p>
<p>userdataç°åœ¨å¯ä»¥å…³è”å¤šä¸ªuserå€¼ï¼ŒCçš„APIä¹Ÿæœ‰ç›¸åº”çš„ä¿®æ”¹ï¼Œå¦‚æœæˆ‘ä»¬æ–°å»ºçš„userdataæ²¡æœ‰å…³è”å€¼ï¼Œåˆ™å°½é‡ä½¿ç”¨lua_newuserdatauvï¼Œè¿™æ ·æ›´é«˜æ•ˆï¼Œlua_newuserdataä»…ä»…ä¸ºäº†å…¼å®¹ï¼Œä¸”é»˜è®¤ä¼šå…³è”1ä¸ªå€¼ã€‚<br>
math.randomä½¿ç”¨äº†æ–°çš„ç®—æ³•ã€‚<br>
åç¨‹åº“æä¾›äº†æ–°çš„APIcoroutine.closeå’Œlua_resetthreadï¼Œcoroutine.closeåªèƒ½åœ¨æŒ‚èµ·æˆ–æ­»äº¡çŠ¶æ€ä¸‹è°ƒç”¨ï¼ŒæŒ‚èµ·çŠ¶æ€ä¸‹ä¼šä½¿ç”¨åç¨‹è¿›å…¥æ­»äº¡çŠ¶æ€ï¼Œå¹¶ä¸”å…³é—­æ‰€æœ‰çš„closeå˜é‡ã€‚</p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºç§‘å­¦</category>
      </categories>
      <tags>
        <tag>lua</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL 8.0 note</title>
    <url>/2018/11/28/mysql-8.0-note/</url>
    <content><![CDATA[<h2 id="mysql-8-0-å®‰è£…-note"><a class="header-anchor" href="#mysql-8-0-å®‰è£…-note">ğŸŒ³</a>mysql 8.0 å®‰è£… note</h2>
<p>æˆ‘çœŸçš„ä½›äº† ä»Šå¤©è£…ä¸ªmysql 8.0 å„ç§å‘ å¥½åƒä¸æ”¯æŒ è®¾ç½®set password= password(â€œ123456â€) è¿™æ ·çš„å†™æ³• å„ç§æŠ¥é”™<br>
è¦</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; alter user &#x27;root&#x27;@&#x27;localhost&#x27;IDENTIFIED BY &#x27;MyNewPass&#x27;;</span><br><span class="line"></span><br><span class="line">ERROR 1819 (HY000): Your password does notsatisfy the current policy requirements</span><br><span class="line"></span><br><span class="line">mysql&gt; alter user &#x27;root&#x27;@&#x27;localhost&#x27;IDENTIFIED BY &#x27;MyNewPass@123&#x27;;</span><br><span class="line"></span><br><span class="line">ERROR 1396 (HY000): Operation ALTER USERfailed for &#x27;root&#x27;@&#x27;localhost&#x27;</span><br><span class="line"></span><br><span class="line">mysql&gt; alter user&#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;MyNewPass@123&#x27;;</span><br></pre></td></tr></table></figure>
<p>è¿˜æœ‰ä»–çš„å¯†ç <a href="https://blog.csdn.net/hellosunqi/article/details/70941754">å®‰å…¨ç­–ç•¥</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; GRANT REPLICATION CLIENT ON *.*TO &#x27;zabbix&#x27;@&#x27;%&#x27; IDENTIFIED BY â€˜xxxxxxxxâ€™;</span><br><span class="line"></span><br><span class="line">ERROR 1819 (HY000): Your password does notsatisfy the current policy requirements</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªä¸validate_password_policyçš„å€¼æœ‰å…³ã€‚</p>
<p>validate_password_policyæœ‰ä»¥ä¸‹å–å€¼ï¼š<br>
0Â orÂ LOW<br>
Length<br>
1Â orÂ MEDIUM<br>
Length; numeric, lowercase/uppercase, and special characters<br>
2Â orÂ STRONG<br>
Length; numeric, lowercase/uppercase, and special characters; dictionary file</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; set global validate_password_length=0ï¼›</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; SHOW VARIABLES LIKE &#x27;validate_password%&#x27;;</span><br><span class="line">+--------------------------------------+-------+</span><br><span class="line">| Variable_name Â  Â  Â  Â  Â  Â  Â  Â  Â Â  Â  Â | Value |</span><br><span class="line">+--------------------------------------+-------+</span><br><span class="line">| validate_password_dictionary_file Â  Â | Â  Â  Â  |</span><br><span class="line">| validate_password_length Â  Â  Â  Â  Â  Â  | 4 Â Â  |</span><br><span class="line">| validate_password_mixed_case_count Â  | 1 Â  Â  |</span><br><span class="line">| validate_password_number_count Â  Â  Â  | 1 Â  Â  |</span><br><span class="line">| validate_password_policy Â  Â  Â  Â  Â  Â  | LOWÂ  |</span><br><span class="line">| validate_password_special_char_count | 1 Â  Â  |</span><br><span class="line">+--------------------------------------+-------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>è¿˜æœ‰ä¸€ä¸ªä¿®æ”¹å­˜å‚¨è¿‡ç¨‹ æƒé™ä»€ä¹ˆçš„</p>
<p>æ€»ä¹‹ æˆ‘ä½›äº†</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># å…ˆåˆ›å»ºç”¨æˆ·tomï¼Œå¯†ç ä¸ºtom</span><br><span class="line">mysql&gt; create user &#x27;tom&#x27;@&#x27;loaclhost&#x27; identified by &#x27;tom&#x27;;</span><br><span class="line"># å†èµ‹äºˆå…·ä½“è¡¨glodon_testæƒé™</span><br><span class="line">mysql&gt; GRANT ALL privileges ON glodon_test TO &#x27;tom&#x27;@&#x27;localhost&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.08 sec)</span><br><span class="line"># åˆ·æ–°æƒé™å³å¯ç”Ÿæ•ˆ</span><br><span class="line">mysql&gt; flush privileges;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>è®¡ç®—æœºç§‘å­¦</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>å¥èº«ç¬”è®°</title>
    <url>/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h2 id="å¥èº«æ¡ˆä¾‹"><a class="header-anchor" href="#å¥èº«æ¡ˆä¾‹">ğŸŒ³</a>å¥èº«æ¡ˆä¾‹</h2>
<h3 id="æ¡ˆä¾‹-1"><a class="header-anchor" href="#æ¡ˆä¾‹-1">ğŸŒ³</a>æ¡ˆä¾‹ 1</h3>
<h4 id="æ¡ˆä¾‹-åŠ›é‡è®­ç»ƒåŠ¨ä½œå›¾ç‰‡å±•ç¤º"><a class="header-anchor" href="#æ¡ˆä¾‹-åŠ›é‡è®­ç»ƒåŠ¨ä½œå›¾ç‰‡å±•ç¤º">ğŸŒ³</a>æ¡ˆä¾‹ åŠ›é‡è®­ç»ƒåŠ¨ä½œå›¾ç‰‡å±•ç¤º</h4>
<p><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%B8%85soserious_1.png" alt="å¸…soserious_1"></p>
<p>èƒ¸ï¼š é£é¸Ÿ æ¨ä¸¾ ä¿¯å§æ’‘<br>
èƒŒï¼š å“‘é“ƒå•è‡‚åˆ’èˆ¹ å¼•ä½“å‘ä¸Š æ‚¬æŒ‚å¸¦åå‘åˆ’èˆ¹ ä¿¯å§æ’‘ è®©èƒŒéƒ¨ä¸¤å—è‚Œè‚‰å¤¹ç´§çš„åŠ¨ä½œ<br>
è‚©ï¼š è‚©æ¨ ä¾§å¹³ä¸¾ é¢æ‹‰ è€¸è‚©<br>
è…¿ï¼š åªèƒ½æ·±è¹² é«˜ä½è‡€æ¡¥<br>
è‡‚ï¼šè‡‚å±ˆä¼¸ äºŒå¤´å¼¯ä¸¾ ä¸‰å¤´æ‹‰ä¼¸(æ‰¶å¢™æ‹¿æ°´ç“¶å‘åæ‹‰ä¼¸)</p>
<p>å•ä¸ªæ°´ç“¶1.1kg ä¸åŠ›ç«­æ¢ å¤§æ°´ç“¶æˆ–è€…å“‘é“ƒ</p>
<table>
<thead>
<tr>
<th>èƒ¸</th>
<th>èƒŒ</th>
<th>è‚©</th>
<th>è…¿</th>
<th>æ‰‹è‡‚</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E4%B8%8A%E6%96%9C%E5%93%91%E9%93%83%E6%8E%A8%E4%B8%BE.gif" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%93%91%E9%93%83%E4%B8%8A%E6%96%9C%E6%8F%A1%E6%8E%A8.jpg" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%B9%B3%E6%9D%BF%E6%9D%A0%E9%93%83%E5%8D%A7%E6%8E%A8.gif" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%93%91%E9%93%83%E9%A3%9E%E9%B8%9F.png" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E7%BB%B3%E7%B4%A2%E9%A3%9E%E9%B8%9F.png" alt></td>
<td><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%8D%95%E8%87%82%E5%93%91%E9%93%83%E5%88%92%E8%88%B9.webp" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E4%BF%AF%E8%BA%AB%E5%93%91%E9%93%83%E5%88%92%E8%88%B9.jpeg" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%BC%95%E4%BD%93%E5%90%91%E4%B8%8A.webp" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E6%9D%A0%E9%93%83%E5%BC%AF%E8%85%B0%E5%88%92%E8%88%B9.webp" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%8D%95%E8%87%82%E5%93%91%E9%93%83%E4%BF%AF%E8%BA%AB%E5%88%92%E8%88%B9.webp" alt></td>
<td><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%93%91%E9%93%83%E8%82%A9%E6%8E%A8.jpg" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%93%91%E9%93%83%E4%BE%A7%E5%B9%B3%E4%B8%BE.gif" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E7%BB%B3%E7%B4%A2%E4%BE%A7%E5%B9%B3%E4%B8%BE.gif" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E7%BB%B3%E7%B4%A2%E9%9D%A2%E6%8B%89.gif" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%93%91%E9%93%83%E8%80%B8%E8%82%A9.gif" alt></td>
<td><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E8%B4%9F%E9%87%8D%E5%BC%93%E7%AE%AD%E6%AD%A5.webp" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E9%AB%98%E8%84%9A%E6%9D%AF%E6%B7%B1%E8%B9%B2.webp" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E6%9D%A0%E9%93%83%E7%AE%AD%E6%AD%A5%E8%B5%B0.webp" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%8F%B2%E5%AF%86%E6%96%AF%E5%8D%95%E8%85%BF%E7%AE%AD%E6%AD%A5%E8%B9%B2.webp" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%8E%9F%E5%9C%B0%E6%9D%A0%E9%93%83%E8%B4%9F%E9%87%8D%E7%AE%AD%E6%AD%A5%E8%B9%B2.webp" alt></td>
<td><img src="https://zirpon.github.io/img/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%93%91%E9%93%83%E6%AD%A3%E6%8F%A1%E5%BC%AF%E4%B8%BE.jpg" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E9%94%A4%E5%BC%8F%E5%BC%AF%E4%B8%BE.gif" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E7%BB%B3%E7%B4%A2%E8%87%82%E5%B1%88%E4%BC%B8.gif" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E7%BB%B3%E7%B4%A2%E4%BA%8C%E5%A4%B4%E5%BC%AF%E4%B8%BE.gif" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E7%BB%B3%E7%B4%A2%E4%B8%8B%E5%8E%8B.png" alt></td>
</tr>
<tr>
<td><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E4%BF%AF%E5%8D%A7%E6%92%91.gif" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E7%BB%B3%E7%B4%A2%E4%B8%8B%E5%8E%8B.png" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E7%BB%B3%E7%B4%A2%E4%B8%8B%E5%8E%8B.gif" alt></td>
<td><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%9D%90%E5%A7%BF%E4%B8%8B%E6%8B%89.gif" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%99%A8%E6%A2%B0%E5%88%92%E8%88%B9.gif" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E7%BB%B3%E7%B4%A2%E5%88%92%E8%88%B9.gif" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E7%BB%B3%E7%B4%A2%E7%9B%B4%E6%9D%86%E4%B8%8B%E5%8E%8B.png" alt>  <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%93%91%E9%93%83%E9%94%A4%E5%BC%8F%E5%BC%AF%E4%B8%BE.gif" alt></td>
<td></td>
<td><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E8%85%BF%E4%B8%BE.jpeg" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E6%B7%B1%E8%B9%B2.jpg" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E8%85%BF%E5%B1%88%E4%BC%B8.gif" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E8%85%BF%E5%BC%AF%E4%B8%BE.gif" alt></td>
<td><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%9E%82%E5%BC%8F%E5%BC%AF%E4%B8%BE.jpg" alt> <img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E7%BB%B3%E7%B4%A2%E4%B8%8B%E5%8E%8B.gif" alt></td>
</tr>
</tbody>
</table>
<hr>
<table>
<thead>
<tr>
<th>å±…å®¶å“‘é“ƒè®­ç»ƒå…¨èº«</th>
<th>å±…å®¶å“‘é“ƒè®­ç»ƒå…¨èº«</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%B1%85%E5%AE%B6%E5%93%91%E9%93%83%E8%AE%AD%E7%BB%83%E5%85%A8%E8%BA%AB.gif" alt></td>
<td><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%B1%85%E5%AE%B6%E5%93%91%E9%93%83%E8%AE%AD%E7%BB%83%E5%85%A8%E8%BA%AB-12x4.gif" alt></td>
</tr>
</tbody>
</table>
<!-- 
{ flink }
- class_name: èƒ¸
  class_desc:
  link_list:
    - name: ä¸Šæ–œå“‘é“ƒæ¨ä¸¾
      link: https://zirpon.github.io/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/
      avatar: https://zirpon.github.io/img/å¥èº«ç¬”è®°/ä¸Šæ–œå“‘é“ƒæ¨ä¸¾.gif
      descr:   èƒ¸
    - name: å“‘é“ƒä¸Šæ–œæ¡æ¨
      link: https://zirpon.github.io/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/
      avatar: https://zirpon.github.io/img/å¥èº«ç¬”è®°/å“‘é“ƒä¸Šæ–œæ¡æ¨.jpg
      descr:   èƒ¸
    - name: å¹³æ¿æ é“ƒå§æ¨
      link: https://zirpon.github.io/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/
      avatar: https://zirpon.github.io/img/å¥èº«ç¬”è®°/å¹³æ¿æ é“ƒå§æ¨.gif
      descr: èƒ¸
    - name: ç»³ç´¢é£é¸Ÿ
      link: https://zirpon.github.io/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/
      avatar: https://zirpon.github.io/img/å¥èº«ç¬”è®°/ç»³ç´¢é£é¸Ÿ.png
      descr: èƒ¸
    - name: ç»³ç´¢ç›´æ†ä¸‹å‹
      link: https://zirpon.github.io/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/
      avatar: https://zirpon.github.io/img/å¥èº«ç¬”è®°/ç»³ç´¢ç›´æ†ä¸‹å‹.png
      descr: èƒ¸
    - name: ä¿¯å§æ’‘
      link: https://zirpon.github.io/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/
      avatar: https://zirpon.github.io/img/å¥èº«ç¬”è®°/ä¿¯å§æ’‘.gif
      descr:    èƒ¸   
{ endflink %}
-->
<hr>
<h4 id="æ¡ˆä¾‹åŠ¨ä½œå¤§å›¾å±•ç¤º"><a class="header-anchor" href="#æ¡ˆä¾‹åŠ¨ä½œå¤§å›¾å±•ç¤º">ğŸŒ³</a>æ¡ˆä¾‹åŠ¨ä½œå¤§å›¾å±•ç¤º</h4>
<div class="gallery-container" data-type="data" data-button data-limit="10" data-first="10">
    <div class="gallery-items">[{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/ä¸Šæ–œå“‘é“ƒæ¨ä¸¾.gif","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/å“‘é“ƒä¸Šæ–œæ¡æ¨.jpg","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/åå§¿ä¸‹æ‹‰.gif","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/å“‘é“ƒè‚©æ¨.jpg","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/å¹³æ¿æ é“ƒå§æ¨.gif","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/å™¨æ¢°åˆ’èˆ¹.gif","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/å“‘é“ƒä¾§å¹³ä¸¾.gif","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/å“‘é“ƒé£é¸Ÿ.png","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/ç»³ç´¢é£é¸Ÿ.png","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/ç»³ç´¢åˆ’èˆ¹.gif","alt":"","title":""}]</div>
  </div>
<hr>
<div class="gallery-container" data-type="data" data-button data-limit="10" data-first="10">
    <div class="gallery-items">[{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/ç»³ç´¢ä¾§å¹³ä¸¾.gif","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/ä¿¯å§æ’‘.gif","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/ç»³ç´¢ç›´æ†ä¸‹å‹.png","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/ç»³ç´¢é¢æ‹‰.gif","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/ç»³ç´¢ä¸‹å‹.png","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/ç»³ç´¢ä¸‹å‹.gif","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/å“‘é“ƒæ­£æ¡å¼¯ä¸¾.jpg","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/å“‘é“ƒé”¤å¼å¼¯ä¸¾.gif","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/å“‘é“ƒè€¸è‚©.gif","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/è…¿ä¸¾.jpeg","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/ç»³ç´¢è‡‚å±ˆä¼¸.gif","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/æ·±è¹².jpg","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/ç»³ç´¢äºŒå¤´å¼¯ä¸¾.gif","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/è…¿å±ˆä¼¸.gif","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/ç»³ç´¢ä¸‹å‹.png","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/ç»³ç´¢ä¸‹å‹.gif","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/è…¿å¼¯ä¸¾.gif","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/å‚å¼å¼¯ä¸¾.jpg","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/é”¤å¼å¼¯ä¸¾.gif","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/å•ç¬”åˆ’èˆ¹.gif","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/æ‚¬æŒ‚å¸¦åå‘åˆ’èˆ¹.png","alt":"","title":""},{"url":"https://zirpon.github.io/img/å¥èº«ç¬”è®°/äººä½“è‚Œç¾¤åˆ†å¸ƒ.jpg","alt":"","title":""}]</div>
  </div>
<hr>
<h4 id="æ¡ˆä¾‹åŠ¨ä½œ-è¯¦ç»†æ•™ç¨‹-ç½‘å€"><a class="header-anchor" href="#æ¡ˆä¾‹åŠ¨ä½œ-è¯¦ç»†æ•™ç¨‹-ç½‘å€">ğŸŒ³</a>æ¡ˆä¾‹åŠ¨ä½œ è¯¦ç»†æ•™ç¨‹ ç½‘å€</h4>
<p><a href="https://www.sohu.com/a/26775982_115763" title="ä¸Šæ–œå“‘é“ƒæ¨ä¸¾">ä¸Šæ–œå“‘é“ƒæ¨ä¸¾</a><br>
<a href="https://www.jianshen8.com/xiangmu/gangling/3797.html" title="å¹³æ¿æ é“ƒå§æ¨">å¹³æ¿æ é“ƒå§æ¨</a><br>
<a href="https://zhuanlan.zhihu.com/p/47741743" title="å“‘é“ƒä¸Šæ–œæ¡æ¨">å“‘é“ƒä¸Šæ–œæ¡æ¨</a><br>
[å“‘é“ƒé£é¸Ÿ]<br>
[ç»³ç´¢é£é¸Ÿ]<br>
<a href="https://dxy.com/article/28105" title="ä¿¯å§æ’‘">ä¿¯å§æ’‘</a><br>
<a href="https://baijiahao.baidu.com/s?id=1801172181200687791" title="ç»³ç´¢ä¸‹å‹">ç»³ç´¢ä¸‹å‹</a><br>
<a href="https://www.jianshen8.com/jirou/beibu/3877.html" title="åå§¿ä¸‹æ‹‰">åå§¿ä¸‹æ‹‰</a><br>
<a href="https://zhuanlan.zhihu.com/p/166001324" title="å™¨æ¢°åˆ’èˆ¹">å™¨æ¢°åˆ’èˆ¹</a><br>
<a href="https://www.jianshen8.com/jirou/beibu/3880.html" title="ç»³ç´¢åˆ’èˆ¹">ç»³ç´¢åˆ’èˆ¹</a><br>
[å“‘é“ƒæ­£æ¡å¼¯ä¸¾]<br>
<a href="https://zhuanlan.zhihu.com/p/405219168" title="å“‘é“ƒé”¤å¼å¼¯ä¸¾">å“‘é“ƒé”¤å¼å¼¯ä¸¾</a><br>
<a href="https://www.jianshen8.com/xiangmu/yaling/3817.html" title="å“‘é“ƒè‚©æ¨">å“‘é“ƒè‚©æ¨</a><br>
<a href="https://baijiahao.baidu.com/s?id=1804979026950277400" title="å“‘é“ƒä¾§å¹³ä¸¾">å“‘é“ƒä¾§å¹³ä¸¾</a><br>
<a href="https://www.jianshen8.com/jirou/jianbu/13094.html" title="ç»³ç´¢ä¾§å¹³ä¸¾">ç»³ç´¢ä¾§å¹³ä¸¾</a><br>
<a href="https://www.zhihu.com/tardis/zm/art/53242447?source_id=1005" title="ç»³ç´¢é¢æ‹‰">ç»³ç´¢é¢æ‹‰</a><br>
[å“‘é“ƒè€¸è‚©]<br>
<a href="https://www.sohu.com/a/194508544_99954444" title="è…¿ä¸¾">è…¿ä¸¾</a><br>
<a href="https://zhuanlan.zhihu.com/p/65685567" title="æ·±è¹²">æ·±è¹²</a><br>
<a href="https://www.jianshen8.com/jirou/tuibu/3902.html" title="è…¿å±ˆä¼¸">è…¿å±ˆä¼¸</a><br>
<a href="https://www.jianshen8.com/jirou/tuibu/3904.html" title="è…¿å¼¯ä¸¾">è…¿å¼¯ä¸¾</a><br>
[ç»³ç´¢è‡‚å±ˆä¼¸]<br>
[ç»³ç´¢äºŒå¤´å¼¯ä¸¾]<br>
[å‚å¼å¼¯ä¸¾]<br>
<a href="https://www.sohu.com/a/821921754_121124676" title="é”¤å¼å¼¯ä¸¾">é”¤å¼å¼¯ä¸¾</a><br>
<a href="https://www.sohu.com/a/271140419_482779" title="ä¿¯èº«å“‘é“ƒåˆ’èˆ¹">ä¿¯èº«å“‘é“ƒåˆ’èˆ¹</a></p>
<h4 id="æ¡ˆä¾‹é¥®é£Ÿè®¡åˆ’è¡¨"><a class="header-anchor" href="#æ¡ˆä¾‹é¥®é£Ÿè®¡åˆ’è¡¨">ğŸŒ³</a>æ¡ˆä¾‹é¥®é£Ÿè®¡åˆ’è¡¨âŒšï¸</h4>
<p><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%B8%85soserious_2.png" alt="å¸…soserious_2"><br>
<img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%B8%85soserious_3.png" alt="å¸…soserious_3"><br>
<img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%B8%85soserious_4.gif" alt="å¸…soserious_4"></p>
<h3 id="æ¡ˆä¾‹2-æŸä¸ªåšä¸»çš„åˆ†äº«"><a class="header-anchor" href="#æ¡ˆä¾‹2-æŸä¸ªåšä¸»çš„åˆ†äº«">ğŸŒ³</a>æ¡ˆä¾‹2 æŸä¸ªåšä¸»çš„åˆ†äº«</h3>
<h4 id="1-1-ä¸€å¼€å§‹"><a class="header-anchor" href="#1-1-ä¸€å¼€å§‹">ğŸŒ³</a>1.1 ä¸€å¼€å§‹</h4>
<ul>
<li>6:30 (å…¨éº¦é¢åŒ… + 2 egg + è„±è„‚ç‰›å¥¶)
<ul>
<li>è·‘æ­¥ 3å…¬é‡Œ</li>
<li>4ç»„å¼€åˆè·³</li>
<li>4ç»„ é«˜æŠ¬è…¿</li>
</ul>
</li>
<li>ä¸­åˆ ç™½æ°´ç…®é¸¡èƒ¸ + è”¬èœæ²™æ‹‰ + å…¨éº¦é¢åŒ…</li>
<li>æ™šä¸Š (1 egg +  1 piece é¢åŒ… + ç‰›å¥¶)
<ul>
<li>5 å…¬é‡Œ</li>
<li>4 ç»„å¼€åˆè·³</li>
</ul>
</li>
</ul>
<h4 id="1-2-ä¸¤å‘¨åå®Œå…¨åœæ­¢è·‘æ­¥-å¼€å§‹åŠ›é‡è®­ç»ƒ-3å‘¨"><a class="header-anchor" href="#1-2-ä¸¤å‘¨åå®Œå…¨åœæ­¢è·‘æ­¥-å¼€å§‹åŠ›é‡è®­ç»ƒ-3å‘¨">ğŸŒ³</a>1.2 ä¸¤å‘¨åå®Œå…¨åœæ­¢è·‘æ­¥ å¼€å§‹åŠ›é‡è®­ç»ƒ 3å‘¨</h4>
<ul>
<li>è´Ÿé‡æ·±è¹²<br>
<img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%81%A5%E8%BA%AB%E5%8A%9B%E9%87%8F%E8%AE%AD%E7%BB%831.gif" alt="å¥èº«åŠ›é‡è®­ç»ƒ1"><br>
<img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%81%A5%E8%BA%AB%E5%8A%9B%E9%87%8F%E8%AE%AD%E7%BB%832.gif" alt="å¥èº«åŠ›é‡è®­ç»ƒ2"><br>
<img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%81%A5%E8%BA%AB%E5%8A%9B%E9%87%8F%E8%AE%AD%E7%BB%83%E6%B7%B1%E8%B9%B23.gif" alt="å¥èº«åŠ›é‡è®­ç»ƒæ·±è¹²3"></li>
<li>ä»°å§èµ·å<br>
<img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/%E5%81%A5%E8%BA%AB%E5%8A%9B%E9%87%8F%E8%AE%AD%E7%BB%83%E4%BB%B0%E5%8D%A7%E8%B5%B7%E5%9D%90.png" alt="å¥èº«åŠ›é‡è®­ç»ƒä»°å§èµ·å"></li>
</ul>
<h3 id="æ¡ˆä¾‹3-å¦ä¸€ä¸ªåšä¸»çš„åˆ†äº«"><a class="header-anchor" href="#æ¡ˆä¾‹3-å¦ä¸€ä¸ªåšä¸»çš„åˆ†äº«">ğŸŒ³</a>æ¡ˆä¾‹3 å¦ä¸€ä¸ªåšä¸»çš„åˆ†äº«</h3>
<ul>
<li>æœ‰æ°§ (æŒç»­æ…¢è·‘ or èµ°è·‘é—´æ­‡)</li>
<li>HIT (æ¯å‘¨è¿›è¡Œ1~2æ¬¡ é«˜å¼ºåº¦hit)
<ul>
<li>å¿«è·‘45ç§’(12.5å…¬é‡Œ/ç§’)</li>
<li>æ”¾æ¾æ…¢è·‘30ç§’</li>
<li>é‡å¤8-12ç»„</li>
</ul>
</li>
<li>è…¹è‚Œè®­ç»ƒ
<ul>
<li>å·è…¹          15æ¬¡</li>
<li>ä¿„ç½—æ–¯è½¬ä½“    40æ¬¡</li>
<li>å·è…¹15æ¬¡</li>
<li>åˆºæ‹³ä»°å§èµ·å  20æ¬¡</li>
<li>åŠ¨æ€å¹³æ¿æ”¯æ’‘  10æ¬¡</li>
<li>å·è…¹ä¸¾è…¿      15æ¬¡</li>
<li>90åº¦å·è…¹      15æ¬¡</li>
</ul>
</li>
</ul>
<h2 id="3-è¯„è®ºåŒºæ™®é€šäººçš„å»ºè®®"><a class="header-anchor" href="#3-è¯„è®ºåŒºæ™®é€šäººçš„å»ºè®®">ğŸŒ³</a>3. è¯„è®ºåŒºæ™®é€šäººçš„å»ºè®®</h2>
<ul>
<li>çƒ­èº«</li>
<li>æ·±è¹²10åˆ†é’Ÿ</li>
<li>åŠ›é‡è®­ç»ƒ10åˆ†é’Ÿ</li>
<li>å¹³æ¿æ”¯æ’‘1åˆ†é’Ÿä¸¤æ¬¡</li>
<li>è·³ç»³40åˆ†é’Ÿ(3000ä¸ªå·¦å³)</li>
</ul>
<p>æ·±è¹²è·ŸåŠ›é‡è®­ç»ƒæ¯å¤©å¿…åš ï¼Œå…¶ä»–å¯ä»¥æ¢   å¯ä»¥è·‘ä¸¤å¤©æ­¥è·³ä¸‰å¤©ç»³<br>
æ§åˆ¶é¥®é£Ÿï¼Œæ¯å¤©6ç‚¹åé™¤äº†æ°´è·Ÿä¸€ç‚¹æ°´æœä¸å†è¿›é£Ÿï¼Œå¤šå–æ°´ï¼Œå¤šè¡¥å……è›‹ç™½è´¨ï¼Œ</p>
<p>äº²èº«ç»å†å››ä¸ªæœˆç˜¦50æ–¤ã€‚<br>
è´µåœ¨åšæŒéš¾åœ¨ä¿æŒï¼Œä½ è·‘æ­¥å¯ä»¥è·‘çš„å¾ˆæ…¢ï¼Œä½†ä½ å¿…é¡»è·‘ä¸‹å»ï¼Œä½ è·³ç»³å¯ä»¥è·³ä¸€ä¸ªç»Šä¸€æ¬¡ä½†è¯·åšæŒä¸‹å»</p>
<h2 id="4-å“‘é“ƒè´Ÿé‡æ·±è¹²çš„æ ‡å‡†åŠ¨ä½œè®²è§£"><a class="header-anchor" href="#4-å“‘é“ƒè´Ÿé‡æ·±è¹²çš„æ ‡å‡†åŠ¨ä½œè®²è§£">ğŸŒ³</a>4. å“‘é“ƒè´Ÿé‡æ·±è¹²çš„æ ‡å‡†åŠ¨ä½œè®²è§£</h2>
<ul>
<li>è‡ªé‡æ·±è¹²</li>
<li>è´Ÿé‡æ·±è¹²</li>
</ul>
<blockquote>
<p>3-4ç»„*10-20æ¬¡</p>
</blockquote>
<p>æ·±è¹²è¢«èª‰ä¸ºâ€œåŠ›é‡è®­ç»ƒä¹‹ç‹â€ï¼Œå¾ˆå¤šçš„å¥èº«åŠ¨ä½œéƒ½ä¼šç»“åˆæ·±è¹²çš„åŠ¨ä½œã€‚<br>
æ·±è¹²çœ‹ä¼¼é”»ç‚¼ä¸‹åŠèº«ï¼Œå®åˆ™èƒ½å¤Ÿé”»ç‚¼å…¨èº«çš„åŠ›é‡ã€‚<br>
æ·±è¹²æ—¶ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåˆºæ¿€<strong>å¤§è‡€è‚Œ</strong>ï¼ŒåŒæ—¶åˆºæ¿€äº†<strong>éª¨éª¼è‚Œ</strong>å‘åŠ›ã€‚<br>
æ·±è¹²çš„æ ‡å‡†åŠ¨ä½œä¸ºï¼š<br>
1. èƒŒéƒ¨å‘ˆå¼“å½¢ã€‚<br>
2. è‡€éƒ¨å‘ååï¼Œé‡é‡è½åœ¨è„šåè·Ÿã€‚<br>
3. æŠŠæ¡è¹²çš„æ·±åº¦ï¼Œä¸€èˆ¬è¦è¶…è¿‡æ°´å¹³é¢ä»¥ä¸‹ã€‚<br>
4. ä¸¤è…¿æ‰“å¼€ä¸è‚©è†€åŒå®½ã€‚<br>
5. è¹²èµ·çš„é€Ÿåº¦ä¸å®œè¿‡å¿«ã€‚</p>
<h3 id="4-1-æ‹¿ä¸­é—´"><a class="header-anchor" href="#4-1-æ‹¿ä¸­é—´">ğŸŒ³</a>4.1 æ‹¿ä¸­é—´</h3>
<p><img src="https://www.fitnes.cn/d/file/dongzuo/2020-04-17/269fc16d8b92d68510451fa918b46db6.jpg" alt="dd"></p>
<p>æ ‡å‡†åŠ¨ä½œ:</p>
<ol>
<li>
<p>åŒæ‰‹æ§ç€å“‘é“ƒï¼Œå°†å“‘é“ƒæ‘†åœ¨èƒ¸å‰ï¼Œä¸¤æ‰‹å†…æ”¶ï¼Œè‚©èƒ›ä¸‹å‹æ”¾æ¾ã€‚åŒè„šä¸é«‹å…³èŠ‚åŒå®½ï¼Œè„šå°–æœå‰ï¼ˆæˆ–å¾®å¾®å¤–å…«ï¼‰ï¼Œé‡ç‚¹åº”æ˜¯ä¸‹è¹²æ—¶ï¼Œ<code>è†ç›–ä¸è„šå°–åŒæ–¹å‘</code>ã€‚</p>
</li>
<li>
<p>æ”¶è‡€ï¼Œä¿æŒå¤§è…¿éƒ¨ä½ä¸åœ°é¢å¹³è¡Œæˆ–æ ¹æ®è‡ªå·±çš„çµæ´»ç¨‹åº¦å’ŒæŸ”éŸ§æ€§å°½é‡ä¿æŒä¸åœ°é¢å¹³è¡Œã€‚èº«ä½“é‡å¿ƒå±…ä¸­ã€‚æŒºèƒ¸ã€æŠ¬å¤´ã€æ”¶è…¹ï¼Œæ·±å¸ä¸€å£æ°”ã€‚</p>
</li>
<li>
<p>æ„Ÿå—é«‹å…³èŠ‚å‘åç§»åŠ¨ï¼ˆå¾€åã€å¾€ä¸‹åï¼‰ï¼Œè¿‡ç¨‹ä¸­èƒ¸ã€è¢«éƒ½æ˜¯ç»´æŒæŒºç›´ã€‚èº«ä½“<code>ä¸‹è¹²å¹¶ç¨å‘å‰å€¾</code>ã€‚</p>
</li>
<li>
<p>æœ€åï¼Œä¿æŒèº¯å¹²ç¨³å®šï¼Œè„šéƒ¨å‘ä¸‹ç”¨åŠ›<strong>è¹¬åœ°</strong>ã€‚ä¸­å¿ƒè½åœ¨è„šæŒä¸­éƒ¨ï¼Œä¼¸è†ä¼¸é«‹å‘ä¸Šç›´ç›´è¹²èµ·ã€‚å›åˆ°èµ·å§‹åŠ¨ä½œã€‚</p>
</li>
</ol>
<p>4.2 æ‹¿ä¸¤è¾¹</p>
<p><img src="https://www.jirou.com/uploads/allimg/190724/153-1ZH4151940F8.jpg" alt="dd"></p>
<ul>
<li>çƒ­èº«</li>
<li>æ¥ä¸‹æ¥ç«™ç«‹ä¹‹åæŠŠå“‘é“ƒæ¡èµ·æ¥ï¼Œå¹¶ä¸”æ”¾åœ¨èº«ä½“ä¸¤ä¾§ï¼Œåœ¨è·Ÿéšç€å¤§å®¶åšæ·±è¹²çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„<code>æ‰‹è‡‚å§‹ç»ˆè¦ä¿æŒä¸åŠ¨</code>çš„å§¿åŠ¿</li>
</ul>
<h2 id="5-åŠ›é‡è®­ç»ƒ"><a class="header-anchor" href="#5-åŠ›é‡è®­ç»ƒ">ğŸŒ³</a>5. åŠ›é‡è®­ç»ƒ</h2>
<ul>
<li>è‚Œè‚‰è®­ç»ƒï¼šå¥ç¾è¿åŠ¨å‘˜å¢åŠ è‚Œè‚‰çš„ä¸€ç§è®­ç»ƒï¼Œç›®çš„æ˜¯æœ€å¤§é™åº¦åœ°å¢é•¿è‚Œè‚‰</li>
<li>åŠ›é‡è®­ç»ƒï¼šèƒ½åˆºæ¿€èº«ä½“åˆ†æ³Œæ¿€ç´ ï¼Œå¢åŠ ä½ çš„åŸºç¡€ä»£è°¢</li>
</ul>
<blockquote>
<p>åŠ›é‡è®­ç»ƒå¯åˆ†ä¸ºå™¨æ¢°è®­ç»ƒã€è‡ªç”±é‡é‡è®­ç»ƒã€è‡ªèº«å¾’æ‰‹é‡é‡è®­ç»ƒã€‚</p>
</blockquote>
<h3 id="5-1-å™¨æ¢°è®­ç»ƒ"><a class="header-anchor" href="#5-1-å™¨æ¢°è®­ç»ƒ">ğŸŒ³</a>5.1 å™¨æ¢°è®­ç»ƒ</h3>
<p>å°±æ˜¯å¥èº«ä¸­å¿ƒé‡Œæœ€å¸¸è§çš„é‡è®­æœºæ¢°ï¼Œæœ€å¥½åœ¨ä½¿ç”¨æ—¶å’¨è¯¢ç°åœºæ•™ç»ƒï¼Œå™¨æ¢°ä½¿ç”¨å‰å¯èƒ½éœ€è¦å¾®è°ƒã€‚</p>
<h3 id="5-2-è‡ªç”±é‡é‡è®­ç»ƒ"><a class="header-anchor" href="#5-2-è‡ªç”±é‡é‡è®­ç»ƒ">ğŸŒ³</a>5.2 è‡ªç”±é‡é‡è®­ç»ƒ</h3>
<p>æ˜¯æŒ‡æ²¡æœ‰æœºæ¢°çš„è¾…åŠ©ï¼Œé <strong>å“‘é“ƒ</strong>ã€<strong>æ é“ƒ</strong>ã€<strong>å£¶é“ƒ</strong>æˆ–è€…å…¶ä»–èƒ½å¤Ÿè´Ÿé‡çš„å™¨æ¢°ï¼Œå¦‚<strong>å¤§è½®èƒ</strong>ï¼Œ<strong>é•¿æŸ„é”¤</strong>ç­‰å°±å¯ä»¥ç‹¬ç«‹å®Œæˆçš„è®­ç»ƒã€‚å»ºè®®æœ‰äººåœ¨æ—è¾…åŠ©ï¼Œé‡é‡çš„é€‰æ‹©æ³¨æ„å¾ªåºæ¸è¿›ã€‚</p>
<h3 id="5-3-è‡ªèº«å¾’æ‰‹é‡é‡è®­ç»ƒ"><a class="header-anchor" href="#5-3-è‡ªèº«å¾’æ‰‹é‡é‡è®­ç»ƒ">ğŸŒ³</a>5.3 è‡ªèº«å¾’æ‰‹é‡é‡è®­ç»ƒ</h3>
<p>é¡¾åæ€ä¹‰ï¼Œä¸ç”¨å™¨æ¢°ï¼Œåˆ©ç”¨è‡ªå·±èº«ä½“çš„é‡é‡æ¥è®­ç»ƒ<br>
- æ·±è¹²<br>
- ä»°å§èµ·åç­‰<br>
- ä¼˜ç‚¹å¤§å®¶éƒ½çŸ¥é“ï¼Œç®€å•ã€çœé’±<br>
- ç¼ºç‚¹æ˜¯ç¼ºä¹æ¸è¿›çš„é˜»åŠ›ï¼Œä½†å¯¹äºæ–°æ‰‹è¶³å¤Ÿäº†ï¼Œå¯æœ‰æ•ˆå‡è„‚ã€é”»ç‚¼å¿ƒè‚ºå’Œå¡‘å½¢</p>
<ul>
<li>
<p>å››ç‚¹è·ªæ’‘ï¼š</p>
<p><img src="http://img.mp.itc.cn/upload/20160513/b03606e47d8341a8968eff67a8fdf99b.jpg" alt="å››ç‚¹è·ªæ’‘"></p>
<ul>
<li>
<p>â˜†æ³¨æ„è†ç›–ä¸èƒ½æ¥è§¦åœ°é¢</p>
</li>
<li>
<p>å››ç‚¹æ˜¯æŒ‡ä¸¤åªæ‰‹å’Œä¸¤ä¸ªè„šå°–</p>
</li>
<li>
<p>èº«ä½“è¦æˆâ€œNå‹â€</p>
</li>
<li>
<p>å¤´ã€èº«å¤„äºä¸€æ¡ç›´çº¿</p>
</li>
<li>
<p>è‡‚ã€èº«å‚ç›´ï¼Œé«‹ã€è†å‚ç›´ã€‚</p>
</li>
<li>
<p>è…¹éƒ¨æ”¶ç´§ï¼Œä¸‹å·´å†…æ”¶</p>
</li>
<li>
<p>ä¿æŒ<strong>30</strong>ç§’</p>
</li>
</ul>
</li>
<li>
<p>çŒé¸Ÿç‹—å¼ï¼š<br>
<img src="http://img.mp.itc.cn/upload/20160513/e13672faf89f48d59094eb815cf6ee72.jpg" alt="çŒé¸Ÿç‹—å¼"></p>
<ul>
<li>
<p>ä¼¸ç›´å³æ‰‹ã€å·¦è…¿ç„¶åæ‰‹ã€è†ç›¸ç¢°</p>
</li>
<li>
<p>ä»¥æ­¤å¾€å¤</p>
</li>
<li>
<p>å¤´ã€èº«å¤„äºä¸€æ¡ç›´çº¿</p>
</li>
<li>
<p>ä¿æŒè…¹éƒ¨ã€è‡€éƒ¨æ”¶ç´§</p>
</li>
<li>
<p>å·¦å³å„10ç»„</p>
<ul>
<li>åˆçº§ï¼šæ¯ç»„6ä¸ªï¼Œ3ç»„ï¼›</li>
<li>ä¸­çº§ï¼šæ¯ç»„10ä¸ªï¼Œ3ç»„ï¼›</li>
<li>é«˜çº§ï¼šæ¯ç»„15ä¸ªï¼Œ4ç»„ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p>ä¿„ç½—æ–¯è½¬ä½“</p>
</li>
<li>
<p>æ—‹è…¿è‡€æ¡¥</p>
</li>
</ul>
<h2 id="6-å¹³æ¿æ”¯æ’‘"><a class="header-anchor" href="#6-å¹³æ¿æ”¯æ’‘">ğŸŒ³</a>6. å¹³æ¿æ”¯æ’‘</h2>
<p><img src="https://pic.rmb.bdstatic.com/bjh/news/265556556e20b5db874a4ca532da58ae.gif" alt="å¹³æ¿æ”¯æ’‘"></p>
<blockquote>
<p>3-6ç»„*60s-90s</p>
</blockquote>
<p><strong>æ¯ç»„ä¿æŒ60ç§’ï¼Œæ¯æ¬¡è®­ç»ƒ4ç»„ï¼Œç»„ä¸ç»„ä¹‹é—´é—´æ­‡ä¸è¶…è¿‡20ç§’ã€‚</strong></p>
<h2 id="7-ç«™å§¿å“‘é“ƒå¹³ä¸¾"><a class="header-anchor" href="#7-ç«™å§¿å“‘é“ƒå¹³ä¸¾">ğŸŒ³</a>7. ç«™å§¿å“‘é“ƒå¹³ä¸¾</h2>
<p><img src="http://5b0988e595225.cdn.sohucs.com/images/20190829/36bdf8fd40554ba89ebb4e6d9c916cd2.gif" alt="ç«™å§¿å“‘é“ƒå¹³ä¸¾"></p>
<ul>
<li>å‰å¹³ä¸¾</li>
<li>ä¾§å¹³ä¸¾</li>
</ul>
<p>ä¸€å¼€å§‹æˆ‘ä»¬ç«™å¥½åœ¨åœ°é¢ä¸Šï¼ŒåŒæ‰‹æ¡ä½å“‘é“ƒè‡ªç„¶æ”¾æ¾åœ¨æˆ‘ä»¬çš„èº«ä½“ä¸¤ä¾§ã€‚<br>
è°ƒæ•´å¥½åï¼Œè®©åŒæ‰‹å‘åŠ›ï¼Œè®©åŒæ‰‹èƒ½å¤Ÿå‘ä¸Šå¹³ä¸¾ï¼Œç›´åˆ°æ‰‹è‡‚ä¸åœ°é¢å¹³è¡Œï¼Œå¹¶ä¸”åŒæ‰‹ä¼¸ç›´ã€‚ç„¶åå†æ”¾ä¸‹æ‰‹è‡‚ï¼Œé‡æ–°å¼€å§‹åŠ¨ä½œã€‚</p>
<blockquote>
<p>3-4ç»„*10-20æ¬¡</p>
</blockquote>
<h2 id="8-ä¿¯å§æ’‘"><a class="header-anchor" href="#8-ä¿¯å§æ’‘">ğŸŒ³</a>8. ä¿¯å§æ’‘</h2>
<p><img src="http://5b0988e595225.cdn.sohucs.com/images/20190829/15fdeb0d318e43bea8f3a14ef7f5aa8f.gif" alt="ä¿¯å§æ’‘"></p>
<p><strong>åˆç»ƒè€…</strong>æ¥è¯´ï¼Œ<strong>æ¯å¤©20-30ä¸ª</strong></p>
<blockquote>
<p>3-4ç»„*10-20æ¬¡</p>
</blockquote>
<h2 id="9-10-at-home-exercises-to-get-rid-of-belly-fat-in-a-month"><a class="header-anchor" href="#9-10-at-home-exercises-to-get-rid-of-belly-fat-in-a-month">ğŸŒ³</a>9. 10 At-Home Exercises to Get Rid of Belly Fat In a Month</h2>
<ul>
<li>five jumping jacks 1 burpee</li>
</ul>
<p><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/Pasted%20image%2020221110070535.png" alt="jumping jacks"><br>
<img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/Pasted%20image%2020221110070610.png" alt="jumping jacks"></p>
<ul>
<li>4 mountain climbers 2 sit-throughs</li>
</ul>
<p><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/Pasted%20image%2020221110070645.png" alt="mountain climbers"><br>
<img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/Pasted%20image%2020221110070658.png" alt="mountain climbers"></p>
<ul>
<li>plyo step-ups</li>
</ul>
<p><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/Pasted%20image%2020221110070723.png" alt="plyo"></p>
<ul>
<li>push-ups</li>
</ul>
<p><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/Pasted%20image%2020221110070740.png" alt="push-ups"></p>
<ul>
<li>2 split squat jumps 1 burpee</li>
</ul>
<p><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/Pasted%20image%2020221110070818.png" alt="split squat jumps"></p>
<ul>
<li>toe taps</li>
</ul>
<p><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/Pasted%20image%2020221110070840.png" alt="toe taps"></p>
<ul>
<li>plank walks</li>
</ul>
<p><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/Pasted%20image%2020221110070852.png" alt="plank walks"></p>
<ul>
<li>sprinter sit-ups</li>
</ul>
<p><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/Pasted%20image%2020221110070910.png" alt="sit-ups"></p>
<ul>
<li>squat thrusts</li>
</ul>
<p><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/Pasted%20image%2020221110070922.png" alt="squat thrusts"></p>
<ul>
<li>sumo goblet &amp;&amp; squat pulse</li>
</ul>
<p><img src="/2021/01/06/%E5%81%A5%E8%BA%AB%E7%AC%94%E8%AE%B0/Pasted%20image%2020221110071009.png" alt="squat pulse"></p>
<ul>
<li>æ¯å‘¨æ…¢è·‘3â€“4æ¬¡ æ¯æ¬¡40åˆ†é’Ÿ</li>
</ul>
<h2 id="10-å¥èº«åŠ³ç´¯ä¼¤ç—›é—®é¢˜"><a class="header-anchor" href="#10-å¥èº«åŠ³ç´¯ä¼¤ç—›é—®é¢˜">ğŸŒ³</a>10. å¥èº«åŠ³ç´¯ä¼¤ç—›é—®é¢˜</h2>
<h3 id="1-è„šåº•æ¿å¤–ä¾§è‚Œè‚‰ç–¼ç—›å¯èƒ½ç”±å¤šç§åŸå› å¼•èµ·"><a class="header-anchor" href="#1-è„šåº•æ¿å¤–ä¾§è‚Œè‚‰ç–¼ç—›å¯èƒ½ç”±å¤šç§åŸå› å¼•èµ·">ğŸŒ³</a>1. è„šåº•æ¿å¤–ä¾§è‚Œè‚‰ç–¼ç—›å¯èƒ½ç”±å¤šç§åŸå› å¼•èµ·</h3>
<p>å¸¸è§åŸå› å’Œåº”å¯¹å»ºè®®å¦‚ä¸‹ï¼š</p>
<p>å¯èƒ½åŸå› <br>
è¿‡åº¦ä½¿ç”¨æˆ–åŠ³æŸ</p>
<p>é•¿æ—¶é—´è¡Œèµ°ã€è·‘æ­¥ã€ç«™ç«‹æˆ–çªç„¶å¢åŠ è¿åŠ¨é‡å¯èƒ½å¯¼è‡´å¤–ä¾§è‚Œè‚‰ç–²åŠ³ã€‚</p>
<p>é‹å­ä¸åˆé€‚ï¼ˆå¦‚é‹åº•å¤ªç¡¬ã€æ”¯æ’‘ä¸è¶³ï¼‰ä¹Ÿå¯èƒ½åŠ é‡è´Ÿæ‹…ã€‚</p>
<p>è¶³åº•ç­‹è†œç‚</p>
<p>è™½ç„¶å…¸å‹ç–¼ç—›åœ¨è¶³è·Ÿæˆ–è¶³å¼“ï¼Œä½†ç‚ç—‡å¯èƒ½æ‰©æ•£è‡³å¤–ä¾§ã€‚</p>
<p>æ™¨èµ·ç¬¬ä¸€æ­¥ç–¼ç—›æ˜æ˜¾ï¼Œæ´»åŠ¨åå‡è½»ã€‚</p>
<p>è…“éª¨è‚Œè‚Œè…±ç‚</p>
<p>å¤–ä¾§è„šè¸è‡³è¶³åº•çš„è…“éª¨è‚Œè…±è¿‡åº¦ä½¿ç”¨æˆ–æ‰­ä¼¤å¯èƒ½å¼•å‘ç‚ç—‡ï¼Œç–¼ç—›å¯æ”¾å°„è‡³è¶³åº•å¤–ä¾§ã€‚</p>
<p>è·–éª¨åº”åŠ›æ€§æŸä¼¤</p>
<p>ç¬¬äº”è·–éª¨ï¼ˆå°è¶¾æ ¹éƒ¨ï¼‰çš„åº”åŠ›æ€§éª¨æŠ˜æˆ–éª¨è†œç‚å¯èƒ½å¯¼è‡´å¤–ä¾§ç–¼ç—›ï¼Œå¸¸è§äºè·‘æ­¥æˆ–è·³è·ƒåã€‚</p>
<p>è¶³éƒ¨ç»“æ„é—®é¢˜</p>
<p>é«˜è¶³å¼“æˆ–æ‰å¹³è¶³å¯èƒ½å¯¼è‡´å¤–ä¾§å‹åŠ›å¼‚å¸¸ã€‚</p>
<p>æ­¥æ€å¼‚å¸¸ï¼ˆå¦‚å†…ç¿»ä¸è¶³ï¼‰ä¹Ÿå¯èƒ½å¼•å‘å¤–ä¾§è‚Œè‚‰ä»£å¿æ€§ç–¼ç—›ã€‚</p>
<p>ç¥ç»å‹è¿«</p>
<p>å¤–ä¾§è¶³åº•ç¥ç»å—å‹ï¼ˆå¦‚ç©¿ç´§é‹ã€å±€éƒ¨è‚¿èƒ€ï¼‰å¯èƒ½å¯¼è‡´åˆºç—›æˆ–éº»æœ¨ã€‚</p>
<p>è‡ªæˆ‘ç¼“è§£æ–¹æ³•<br>
ä¼‘æ¯ä¸å†°æ•·</p>
<p>å‡å°‘æ´»åŠ¨ï¼Œé¿å…åŠ é‡ç–¼ç—›çš„åŠ¨ä½œã€‚</p>
<p>æ¯å¤©å†°æ•·ç–¼ç—›éƒ¨ä½ï¼ˆæ¯æ¬¡15åˆ†é’Ÿï¼Œ2-3æ¬¡/æ—¥ï¼‰ã€‚</p>
<p>æ‹‰ä¼¸ä¸æ”¾æ¾</p>
<p>è¶³åº•ç­‹è†œæ‹‰ä¼¸ï¼šåä½ï¼Œç”¨æ‰‹å°†è„šè¶¾å‘åæ‰³ï¼Œæ„Ÿå—è¶³åº•æ‹‰ä¼¸ï¼Œä¿æŒ20ç§’ï¼Œé‡å¤3æ¬¡ã€‚</p>
<p>è…“éª¨è‚Œæ‹‰ä¼¸ï¼šåä½ï¼Œè…¿ä¼¸ç›´ï¼Œç”¨æ¯›å·¾ç»•ä½å‰è„šæŒï¼Œå°†è„šå‘å†…ç¿»ï¼ˆå¦‚å›¾ï¼‰ï¼Œä¿æŒ20ç§’ã€‚</p>
<p>ç”¨ç½‘çƒæˆ–ç­‹è†œçƒæ»šå‹è¶³åº•æ”¾æ¾è‚Œè‚‰ã€‚</p>
<p>æ›´æ¢é‹å­</p>
<p>é€‰æ‹©æœ‰è¶³å¼“æ”¯æ’‘ã€ç¼“å†²è‰¯å¥½çš„é‹å­ï¼Œé¿å…å¹³åº•é‹æˆ–ç£¨æŸä¸¥é‡çš„æ—§é‹ã€‚</p>
<p>æŠ—ç‚æ­¢ç—›</p>
<p>å¯çŸ­æœŸä½¿ç”¨å¸ƒæ´›èŠ¬ç­‰éç”¾ä½“æŠ—ç‚è¯ï¼ˆéµåŒ»å˜±æˆ–è¯´æ˜ä¹¦ï¼‰ã€‚</p>
<p>ä½•æ—¶å°±åŒ»ï¼Ÿ<br>
ç–¼ç—›æŒç»­è¶…è¿‡1-2å‘¨ï¼Œä¼‘æ¯åæ— ç¼“è§£ã€‚</p>
<p>å‡ºç°æ˜æ˜¾è‚¿èƒ€ã€å‘çº¢æˆ–å‘çƒ­ã€‚</p>
<p>æ— æ³•æ­£å¸¸è¡Œèµ°ï¼Œæˆ–ç–¼ç—›å¤œé—´åŠ é‡ã€‚</p>
<p>æ€€ç–‘éª¨æŠ˜ï¼ˆå¦‚å¤–ä¼¤åå‰§ç—›ã€å±€éƒ¨å‹ç—›æ˜æ˜¾ï¼‰ã€‚</p>
<p>åŒ»ç”Ÿå¯èƒ½é€šè¿‡Xå…‰ã€è¶…å£°æˆ–MRIæ£€æŸ¥ï¼Œå¹¶æ ¹æ®ç»“æœå»ºè®®ç‰©ç†æ²»ç–—ã€å®šåˆ¶é‹å«æˆ–è¯ç‰©æ²»ç–—ã€‚</p>
<p>é¢„é˜²å»ºè®®<br>
è¿åŠ¨å‰å……åˆ†çƒ­èº«ï¼Œé€æ­¥å¢åŠ è¿åŠ¨å¼ºåº¦ã€‚</p>
<p>é€‰æ‹©é€‚åˆè¶³å‹çš„é‹å­ï¼Œå¿…è¦æ—¶ä½¿ç”¨çŸ«å½¢é‹å«ã€‚</p>
<p>é¿å…é•¿æ—¶é—´ç©¿é«˜è·Ÿé‹æˆ–ç¡¬åº•é‹ã€‚</p>
<p>å®šæœŸè¿›è¡Œè¶³éƒ¨è‚Œè‚‰å¼ºåŒ–è®­ç»ƒï¼ˆå¦‚ç”¨è„šè¶¾æŠ“æ¯›å·¾ï¼‰ã€‚</p>
<p>å¦‚æœç–¼ç—›æŒç»­æˆ–åŠ é‡ï¼ŒåŠæ—¶å°±åŒ»æ˜ç¡®è¯Šæ–­ï¼Œé¿å…å»¶è¯¯æ²»ç–—ï¼</p>
<h3 id="2-å…ç–«åŠ›ä¸‹é™-å‘ç‚"><a class="header-anchor" href="#2-å…ç–«åŠ›ä¸‹é™-å‘ç‚">ğŸŒ³</a>2. å…ç–«åŠ›ä¸‹é™ å‘ç‚</h3>
<p>å…ç–«åŠ›ä¸‹é™ä¸ç‚ç—‡åå¤å‘ä½œä¹‹é—´å­˜åœ¨å¯†åˆ‡å…³è”ã€‚å½“å…ç–«åŠ›é™ä½æ—¶ï¼Œèº«ä½“å¯¹æŠ—æ„ŸæŸ“å’Œä¿®å¤æŸä¼¤çš„èƒ½åŠ›å‡å¼±ï¼Œå¯èƒ½å¯¼è‡´ç‚ç—‡éš¾ä»¥æ§åˆ¶æˆ–åå¤å‡ºç°ã€‚ä»¥ä¸‹æ˜¯å¯èƒ½çš„åŸå› ã€åº”å¯¹å»ºè®®å’Œæ”¹å–„æ–¹å‘ï¼š</p>
<p>å…ç–«åŠ›ä¸‹é™ä¸ç‚ç—‡å…³è”çš„å¸¸è§åŸå› <br>
æ…¢æ€§å‹åŠ›</p>
<p>é•¿æœŸå‹åŠ›ä¼šå¯¼è‡´çš®è´¨é†‡å‡é«˜ï¼ŒæŠ‘åˆ¶å…ç–«ç»†èƒæ´»æ€§ï¼Œå¢åŠ ç‚ç—‡å› å­ï¼ˆå¦‚IL-6ï¼‰é‡Šæ”¾ã€‚</p>
<p>è¥å…»ä¸è‰¯</p>
<p>ç¼ºä¹è›‹ç™½è´¨ã€ç»´ç”Ÿç´ Cã€Dã€é”Œã€ç¡’ç­‰å…³é”®è¥å…»ç´ ï¼Œå½±å“å…ç–«ç»†èƒç”Ÿæˆå’ŒæŠ—ç‚èƒ½åŠ›ã€‚</p>
<p>ç¡çœ ä¸è¶³</p>
<p>ç¡çœ æ˜¯å…ç–«ç³»ç»Ÿä¿®å¤çš„å…³é”®æœŸï¼Œé•¿æœŸç†¬å¤œä¼šå‡å°‘æŠ—ç—…æ¯’è›‹ç™½ï¼ˆå¦‚å¹²æ‰°ç´ ï¼‰çš„åˆ†æ³Œã€‚</p>
<p>è‚ é“èŒç¾¤å¤±è¡¡</p>
<p>70%å…ç–«ç»†èƒåœ¨è‚ é“ï¼ŒèŒç¾¤å¤±è°ƒï¼ˆå¦‚ç›Šç”ŸèŒå‡å°‘ï¼‰ä¼šå‰Šå¼±å…ç–«å±éšœï¼Œä¿ƒå‘æ…¢æ€§ç‚ç—‡ã€‚</p>
<p>æ…¢æ€§ç–¾ç—…</p>
<p>ç³–å°¿ç—…ã€è‡ªèº«å…ç–«ç—…ï¼ˆå¦‚ç±»é£æ¹¿å…³èŠ‚ç‚ï¼‰ç­‰ä¼šæŒç»­æ¶ˆè€—å…ç–«èµ„æºï¼Œå¯¼è‡´ç‚ç—‡å¤±æ§ã€‚</p>
<p>è¯ç‰©æˆ–æ²»ç–—å½±å“</p>
<p>é•¿æœŸä½¿ç”¨æŠ—ç”Ÿç´ ã€æ¿€ç´ æˆ–åŒ–ç–—å¯èƒ½æŠ‘åˆ¶å…ç–«åŠŸèƒ½ã€‚</p>
<p>åº”å¯¹ç‚ç—‡ä¸æå‡å…ç–«åŠ›çš„å…³é”®æªæ–½</p>
<ol>
<li>è°ƒæ•´é¥®é£Ÿ<br>
æŠ—ç‚é£Ÿç‰©ï¼šæ·±æµ·é±¼ï¼ˆOmega-3ï¼‰ã€å§œé»„ã€ç»¿èŒ¶ã€æ·±è‰²è”¬èœï¼ˆå¯Œå«æŠ—æ°§åŒ–å‰‚ï¼‰ã€åšæœã€‚</li>
</ol>
<p>å¢å¼ºå…ç–«ï¼šä¼˜è´¨è›‹ç™½ï¼ˆé¸¡è›‹ã€è±†ç±»ï¼‰ã€ç»´ç”Ÿç´ Cï¼ˆæŸ‘æ©˜ã€è¥¿å…°èŠ±ï¼‰ã€é”Œï¼ˆç‰¡è›ã€å—ç“œå­ï¼‰ã€‚</p>
<p>é¿å…ä¿ƒç‚é£Ÿç‰©ï¼šç²¾åˆ¶ç³–ã€åå¼è„‚è‚ªï¼ˆæ²¹ç‚¸é£Ÿå“ï¼‰ã€åŠ å·¥è‚‰ç±»ã€‚</p>
<ol start="2">
<li>ç”Ÿæ´»æ–¹å¼å¹²é¢„<br>
è§„å¾‹ç¡çœ ï¼šä¿è¯æ¯å¤©7-9å°æ—¶ï¼Œå°½é‡åœ¨23ç‚¹å‰å…¥ç¡ã€‚</li>
</ol>
<p>é€‚åº¦è¿åŠ¨ï¼šæ¯å‘¨150åˆ†é’Ÿä¸­ç­‰å¼ºåº¦è¿åŠ¨ï¼ˆå¦‚å¿«èµ°ã€æ¸¸æ³³ï¼‰ï¼Œè¿‡åº¦è¿åŠ¨åè€ŒæŠ‘åˆ¶å…ç–«ã€‚</p>
<p>å‡å‹ç®¡ç†ï¼šå†¥æƒ³ã€æ·±å‘¼å¸ã€ç‘œä¼½æˆ–å¿ƒç†å’¨è¯¢ï¼Œé™ä½çš®è´¨é†‡æ°´å¹³ã€‚</p>
<ol start="3">
<li>é’ˆå¯¹æ€§è¥å…»è¡¥å……<br>
ç»´ç”Ÿç´ Dï¼šè¡€æ¶²æµ“åº¦å»ºè®®ç»´æŒåœ¨40-60 ng/mLï¼Œç¼ºä¹è€…éœ€è¡¥å……ï¼ˆæ¯æ—¥1000-2000 IUï¼‰ã€‚</li>
</ol>
<p>ç›Šç”ŸèŒï¼šé€‰æ‹©å«ä¹³é…¸æ†èŒã€åŒæ­§æ†èŒçš„è¡¥å……å‰‚ï¼Œè°ƒèŠ‚è‚ é“å…ç–«ã€‚</p>
<p>æŠ—æ°§åŒ–å‰‚ï¼šå¦‚NACï¼ˆN-ä¹™é…°åŠèƒ±æ°¨é…¸ï¼‰ã€è°·èƒ±ç”˜è‚½ï¼Œå¸®åŠ©æ¸…é™¤ç‚ç—‡è‡ªç”±åŸºã€‚</p>
<ol start="4">
<li>æ§åˆ¶æ„ŸæŸ“ä¸ç‚ç—‡<br>
æ€¥æ€§æ„ŸæŸ“ï¼šç»†èŒæ„ŸæŸ“éœ€éµåŒ»å˜±ç”¨æŠ—ç”Ÿç´ ï¼Œç—…æ¯’æ„ŸæŸ“ä»¥å¯¹ç—‡æ²»ç–—ä¸ºä¸»ã€‚</li>
</ol>
<p>æ…¢æ€§ç‚ç—‡ï¼šåœ¨åŒ»ç”ŸæŒ‡å¯¼ä¸‹ä½¿ç”¨æŠ—ç‚è¯ç‰©ï¼ˆå¦‚ä½å‰‚é‡æ¿€ç´ ã€NSAIDsï¼‰ï¼Œæˆ–å°è¯•å¤©ç„¶æŠ—ç‚å‰‚ï¼ˆå§œé»„ç´ ã€ä¹³é¦™æå–ç‰©ï¼‰ã€‚</p>
<p>ä½•æ—¶éœ€è¦å°±åŒ»ï¼Ÿ<br>
ç‚ç—‡åå¤å‘ä½œï¼ˆå¦‚å£è…”æºƒç–¡ã€çš®è‚¤æ„ŸæŸ“ã€å°¿è·¯æ„ŸæŸ“ç­‰è¶…è¿‡æ¯æœˆ1æ¬¡ï¼‰ã€‚</p>
<p>ä¼´éšä¸æ˜åŸå› å‘çƒ­ã€ä½“é‡ä¸‹é™ã€æŒç»­ç–²åŠ³ã€‚</p>
<p>å‡ºç°è‡ªèº«å…ç–«ç—‡çŠ¶ï¼šå…³èŠ‚è‚¿ç—›ã€çš®ç–¹ã€è„±å‘ç­‰ã€‚</p>
<p>å¸¸è§„æªæ–½æ— æ•ˆï¼Œéœ€æ’æŸ¥æ½œåœ¨ç–¾ç—…ï¼ˆå¦‚HIVã€è‚¿ç˜¤ã€å…ç–«ç¼ºé™·ç—…ï¼‰ã€‚</p>
<p>é‡ç‚¹æ’æŸ¥çš„åŒ»å­¦æ£€æŸ¥<br>
è¡€æ¶²æ£€æŸ¥</p>
<p>è¡€å¸¸è§„ï¼ˆçœ‹ç™½ç»†èƒã€æ·‹å·´ç»†èƒè®¡æ•°ï¼‰</p>
<p>Cååº”è›‹ç™½ï¼ˆCRPï¼‰ã€è¡€æ²‰ï¼ˆESRï¼‰è¯„ä¼°ç‚ç—‡æ°´å¹³</p>
<p>å…ç–«çƒè›‹ç™½ï¼ˆIgG/IgA/IgMï¼‰ã€è¡¥ä½“æ°´å¹³</p>
<p>ç»´ç”Ÿç´ Dã€é”Œç­‰å¾®é‡å…ƒç´ æ£€æµ‹</p>
<p>å…¶ä»–æ£€æŸ¥</p>
<p>è‚ é“èŒç¾¤åˆ†æï¼ˆé’ˆå¯¹æ…¢æ€§è…¹æ³»/ä¾¿ç§˜è€…ï¼‰</p>
<p>è‡ªèº«æŠ—ä½“ç­›æŸ¥ï¼ˆå¦‚ANAã€RFï¼‰</p>
<p>é¢„é˜²ä¸é•¿æœŸç®¡ç†<br>
æˆ’çƒŸé™é…’ï¼šå¸çƒŸç›´æ¥æŸä¼¤å‘¼å¸é“å…ç–«å±éšœï¼Œé…’ç²¾æŠ‘åˆ¶éª¨é«“é€ è¡€åŠŸèƒ½ã€‚</p>
<p>æ¥ç§ç–«è‹—ï¼šæµæ„Ÿç–«è‹—ã€è‚ºç‚ç–«è‹—ç­‰å¯å‡å°‘æ„ŸæŸ“é£é™©ã€‚</p>
<p>ç¯å¢ƒæ§åˆ¶ï¼šé¿å…é•¿æœŸæ¥è§¦æ±¡æŸ“ç©ºæ°”æˆ–åŒ–å­¦æ¯’ç´ ï¼ˆå¦‚ç”²é†›ï¼‰ã€‚</p>
<p>å…ç–«åŠ›ä¸‹é™å’Œç‚ç—‡ååº”æ˜¯èº«ä½“å‘å‡ºçš„è­¦ç¤ºä¿¡å·ï¼Œéœ€ä»ç”Ÿæ´»æ–¹å¼ã€è¥å…»ã€åŒ»å­¦å¹²é¢„å¤šç»´åº¦è°ƒæ•´ã€‚è‹¥è°ƒæ•´åä»æ— æ”¹å–„ï¼Œå»ºè®®å°½æ—©åˆ°é£æ¹¿å…ç–«ç§‘æˆ–å†…ç§‘å°±è¯Šï¼Œé¿å…å»¶è¯¯æ½œåœ¨ç–¾ç—…çš„æ²»ç–—ã€‚</p>
<h3 id="3-ejaculation-å…ç–«åŠ›-ä¸å¥èº«"><a class="header-anchor" href="#3-ejaculation-å…ç–«åŠ›-ä¸å¥èº«">ğŸŒ³</a>3. ejaculation å…ç–«åŠ› ä¸å¥èº«</h3>
<p>ejaculationåæ˜¯å¦ä¼šå¯¼è‡´å…ç–«åŠ›ä¸‹é™ï¼Œç›®å‰åŒ»å­¦ç ”ç©¶å°šæ— æ˜ç¡®ä¸€è‡´çš„ç»“è®ºï¼Œä½†å¯ä»¥ä»ç”Ÿç†æœºåˆ¶å’Œç°æœ‰ç ”ç©¶è§’åº¦åˆ†æå¯èƒ½çš„å½±å“åŠåº”å¯¹å»ºè®®ï¼š</p>
<p>ä¸€ã€ejaculationåå¯èƒ½çš„ç”Ÿç†å˜åŒ–<br>
çŸ­æš‚å…ç–«æ³¢åŠ¨</p>
<p>éƒ¨åˆ†ç ”ç©¶è¡¨æ˜ï¼Œæ€§é«˜æ½®åä½“å†… å‚¬ä¹³ç´ ï¼ˆProlactinï¼‰ æ°´å¹³å‡é«˜ï¼Œå¯èƒ½çŸ­æš‚æŠ‘åˆ¶å…ç–«ç»†èƒï¼ˆå¦‚è‡ªç„¶æ€ä¼¤ç»†èƒNKç»†èƒï¼‰æ´»æ€§ï¼Œä½†è¿™ç§å½±å“é€šå¸¸æ˜¯æš‚æ—¶æ€§çš„ï¼ˆæ•°å°æ—¶å†…æ¢å¤ï¼‰ï¼Œä¸ä¼šæ˜¾è‘—å‰Šå¼±é•¿æœŸå…ç–«åŠ›ã€‚</p>
<p>è¥å…»ç‰©è´¨æµå¤±</p>
<p>ç²¾æ¶²ä¸­å«æœ‰é”Œã€è›‹ç™½è´¨ã€ç»´ç”Ÿç´ Cç­‰æˆåˆ†ï¼Œé¢‘ç¹ejaculationå¯èƒ½å¯¼è‡´è¿™äº›è¥å…»ç´ çš„æµå¤±ã€‚ä¾‹å¦‚ï¼š</p>
<p>é”Œï¼šæ¯æ¬¡ejaculationçº¦æŸå¤±3-5mgé”Œï¼ˆæˆå¹´ç”·æ€§æ¯æ—¥æ¨èæ‘„å…¥é‡11mgï¼‰ï¼Œç¼ºé”Œå¯èƒ½å½±å“å…ç–«ç»†èƒåŠŸèƒ½ã€‚</p>
<p>ç¡’ã€ç»´ç”Ÿç´ Cï¼šå‚ä¸æŠ—æ°§åŒ–å’Œå…ç–«è°ƒèŠ‚ï¼Œè¿‡åº¦æµå¤±å¯èƒ½å¢åŠ æ„ŸæŸ“é£é™©ã€‚</p>
<p>æ¿€ç´ å˜åŒ–ä¸åº”æ¿€ååº”</p>
<p>æ€§æ´»åŠ¨åï¼Œçš®è´¨é†‡ï¼ˆå‹åŠ›æ¿€ç´ ï¼‰çŸ­æš‚å‡é«˜å¯èƒ½æŠ‘åˆ¶å…ç–«åŠŸèƒ½ï¼Œä½†é€‚åº¦æ€§è¡Œä¸ºåè€Œé€šè¿‡é‡Šæ”¾å†…å•¡è‚½å‡è½»å‹åŠ›ï¼Œé•¿æœŸçœ‹å¯èƒ½å¯¹å…ç–«æœ‰ç›Šã€‚</p>
<p>äºŒã€ç°æœ‰ç ”ç©¶ç»“è®º<br>
çŸ­æœŸå½±å“ï¼š</p>
<p>æœ‰ç ”ç©¶è§‚å¯Ÿåˆ°ç”·æ€§åœ¨æ€§é«˜æ½®å2å°æ—¶å†…ï¼Œå”¾æ¶²ä¸­çš„IgAï¼ˆå…ç–«çƒè›‹ç™½Aï¼Œé»è†œå…ç–«å…³é”®æˆåˆ†ï¼‰æ°´å¹³ä¸‹é™ï¼Œä½†24å°æ—¶å†…æ¢å¤ã€‚</p>
<p>å¦ä¸€é¡¹ç ”ç©¶å‘ç°ï¼Œé€‚åº¦æ€§è¡Œä¸ºï¼ˆæ¯å‘¨1-2æ¬¡ï¼‰å¯æå‡IgAæ°´å¹³ï¼Œé™ä½æ„Ÿå†’é£é™©ï¼›ä½†è¿‡åº¦é¢‘ç¹ï¼ˆå¦‚æ¯å¤©ï¼‰å¯èƒ½é€‚å¾—å…¶åã€‚</p>
<p>é•¿æœŸå½±å“ï¼š</p>
<p>ç›®å‰æ— è¯æ®è¡¨æ˜è§„å¾‹ejaculationä¼šç›´æ¥å¯¼è‡´å…ç–«åŠ›æŒç»­ä¸‹é™ã€‚ç›¸åï¼Œé€‚åº¦æ€§ç”Ÿæ´»å¯èƒ½é€šè¿‡å‡è½»å‹åŠ›ã€æ”¹å–„ç¡çœ é—´æ¥å¢å¼ºå…ç–«åŠ›ã€‚</p>
<p>ä¸‰ã€å¦‚ä½•å‡å°‘æ½œåœ¨è´Ÿé¢å½±å“<br>
æ§åˆ¶é¢‘ç‡</p>
<p>æ ¹æ®è‡ªèº«çŠ¶æ€è°ƒæ•´ï¼Œé¿å…è¿‡åº¦é¢‘ç¹ejaculationï¼ˆå¦‚æ¯å¤©å¤šæ¬¡ï¼‰ï¼Œå°¤å…¶æ˜¯å·²æ„Ÿåˆ°ç–²åŠ³æˆ–è¥å…»æ‘„å…¥ä¸è¶³æ—¶ã€‚</p>
<p>è¡¥å……å…³é”®è¥å…»ç´ </p>
<p>é”Œï¼šç‰¡è›ã€çº¢è‚‰ã€å—ç“œå­ã€åšæœï¼ˆå¦‚æ¯æ—¥è¡¥å……ä¸è¶…è¿‡40mgï¼‰ã€‚</p>
<p>ç¡’ï¼šå·´è¥¿åšæœã€é±¼ç±»ã€é¸¡è›‹ã€‚</p>
<p>ç»´ç”Ÿç´ Cï¼šæŸ‘æ©˜ç±»æ°´æœã€è¥¿å…°èŠ±ã€å½©æ¤’ã€‚</p>
<p>è›‹ç™½è´¨ï¼šé¸¡è›‹ã€è±†ç±»ã€ç˜¦è‚‰ï¼Œç»´æŒå…ç–«ç»†èƒåˆæˆã€‚</p>
<p>æ³¨é‡æ¢å¤</p>
<p>ejaculationåä¿è¯å……è¶³ç¡çœ ï¼ˆ7-9å°æ—¶ï¼‰ï¼Œé¿å…ç†¬å¤œæˆ–å‰§çƒˆè¿åŠ¨åç«‹å³è¿›è¡Œæ€§æ´»åŠ¨ã€‚</p>
<p>é¿å…æç«¯è¡Œä¸º</p>
<p>ç¦æ¬²æˆ–è¿‡åº¦çºµæ¬²å‡å¯èƒ½å½±å“å…ç–«å¹³è¡¡ï¼Œæ‰¾åˆ°é€‚åˆè‡ªèº«çš„èŠ‚å¥ï¼ˆå¦‚æ¯å‘¨1-3æ¬¡ï¼‰ã€‚</p>
<p>å››ã€éœ€è¦è­¦æƒ•çš„æƒ…å†µ<br>
è‹¥ejaculationåå‡ºç°ä»¥ä¸‹ç—‡çŠ¶ï¼Œå¯èƒ½ä¸å…ç–«åŠ›ä¸‹é™æˆ–å…¶ä»–å¥åº·é—®é¢˜ç›¸å…³ï¼Œå»ºè®®å°±åŒ»æ’æŸ¥ï¼š</p>
<p>åå¤æ„Ÿå†’ã€å£è…”æºƒç–¡ã€ä¼¤å£æ„ˆåˆç¼“æ…¢ã€‚</p>
<p>æŒç»­ç–²åŠ³ã€ä½“é‡ä¸‹é™ã€å¤œé—´ç›—æ±—ã€‚</p>
<p>ä¼´éšç¾ä¸¸ç–¼ç—›ã€æ’å°¿å¼‚å¸¸ï¼ˆéœ€æ’é™¤å‰åˆ—è…ºç‚æˆ–æ€§ä¼ æ’­æ„ŸæŸ“ï¼‰ã€‚</p>
<p>æ€»ç»“<br>
é€‚åº¦ejaculationæœ¬èº«ä¸ä¼šæ˜¾è‘—é™ä½å…ç–«åŠ›ï¼Œä½†è¿‡åº¦é¢‘ç¹å¯èƒ½å¯¼è‡´è¥å…»æ¶ˆè€—æˆ–çŸ­æœŸå…ç–«æ³¢åŠ¨ã€‚</p>
<p>å…³é”®æ˜¯é€šè¿‡å‡è¡¡é¥®é£Ÿã€è§„å¾‹ä½œæ¯å’Œé€‚åº¦è¿åŠ¨ç»´æŒæ•´ä½“å…ç–«å¥åº·ã€‚</p>
<p>è‹¥æ€€ç–‘å…ç–«åŠ›å¼‚å¸¸ï¼Œå¯æ£€æµ‹è¡€å¸¸è§„ã€å…ç–«çƒè›‹ç™½ã€å¾®é‡å…ƒç´ ï¼ˆå¦‚é”Œï¼‰ç­‰æŒ‡æ ‡ï¼Œé’ˆå¯¹æ€§è°ƒæ•´ã€‚</p>
<p>å¦‚æœ‰å…¶ä»–ç—‡çŠ¶æˆ–æ‹…å¿§ï¼Œå»ºè®®å’¨è¯¢æ³Œå°¿å¤–ç§‘æˆ–å…ç–«ç§‘åŒ»ç”Ÿè¿›ä¸€æ­¥è¯„ä¼°ï¼</p>
<h3 id="4-è¡¥é•é”Œç¡’"><a class="header-anchor" href="#4-è¡¥é•é”Œç¡’">ğŸŒ³</a>4. è¡¥é•é”Œç¡’</h3>
<p>è¡¥é”Œæ˜¯ç»´æŒå…ç–«ã€ç”Ÿæ®–ã€ä»£è°¢åŠŸèƒ½çš„é‡è¦æªæ–½ï¼Œå°¤å…¶å¯¹ç”·æ€§å¥åº·ã€ä¼¤å£æ„ˆåˆå’ŒæŠ—æ„ŸæŸ“èƒ½åŠ›è‡³å…³é‡è¦ã€‚ä»¥ä¸‹æ˜¯ç§‘å­¦è¡¥é”Œçš„è¯¦ç»†å»ºè®®ï¼š</p>
<p>ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦è¡¥é”Œï¼Ÿ<br>
ç”Ÿç†åŠŸèƒ½</p>
<p>å…ç–«æ”¯æŒï¼šé”Œå‚ä¸Tæ·‹å·´ç»†èƒåˆ†åŒ–ï¼Œç¼ºé”Œæ˜“å¯¼è‡´åå¤æ„ŸæŸ“ï¼ˆå¦‚æ„Ÿå†’ã€è…¹æ³»ï¼‰ã€‚</p>
<p>ç”Ÿæ®–å¥åº·ï¼šç²¾å­ç”Ÿæˆéœ€è¦é”Œï¼Œç¼ºé”Œå¯èƒ½é™ä½ç²¾å­è´¨é‡å’Œç¾é…®æ°´å¹³ã€‚</p>
<p>ä»£è°¢ä¸ä¿®å¤ï¼šå‚ä¸300å¤šç§é…¶æ´»æ€§ï¼Œä¿ƒè¿›ä¼¤å£æ„ˆåˆã€çš®è‚¤å¥åº·åŠDNAåˆæˆã€‚</p>
<p>ç¼ºé”Œçš„é«˜é£é™©äººç¾¤</p>
<p>ç´ é£Ÿè€…ï¼ˆæ¤ç‰©æ€§é£Ÿç‰©é”Œå¸æ”¶ç‡ä½ï¼‰</p>
<p>å­•å¦‡/å“ºä¹³æœŸå¥³æ€§ï¼ˆéœ€æ±‚é‡å¢åŠ ï¼‰</p>
<p>æ…¢æ€§è…¹æ³»æˆ–è‚ é“ç–¾ç—…æ‚£è€…ï¼ˆå¸æ”¶éšœç¢ï¼‰</p>
<p>é¢‘ç¹ejaculationæˆ–é«˜å¼ºåº¦è¿åŠ¨è€…ï¼ˆé”Œæµå¤±å¢åŠ ï¼‰</p>
<p>äºŒã€è¡¥é”Œçš„ç§‘å­¦æ–¹æ³•</p>
<ol>
<li>
<p>ä¼˜å…ˆé£Ÿè¡¥ï¼šé«˜é”Œé£Ÿç‰©æ¸…å•<br>
é£Ÿç‰©ç±»åˆ«	æ¨èé£Ÿç‰©ï¼ˆæ¯100gå«é”Œé‡ï¼‰	æ¯æ—¥å»ºè®®æ‘„å…¥é‡<br>
è´ç±»	ç‰¡è›ï¼ˆ16-40mgï¼‰	æ¯å‘¨1-2æ¬¡<br>
çº¢è‚‰	ç‰›è‚‰ï¼ˆ4.8mgï¼‰ã€ç¾Šè‚‰ï¼ˆ3.9mgï¼‰	æ¯æ—¥50-100g<br>
åšæœç§å­	å—ç“œå­ï¼ˆ7.6mgï¼‰ã€è…°æœï¼ˆ5.6mgï¼‰	æ¯æ—¥ä¸€å°æŠŠï¼ˆ20-30gï¼‰<br>
è±†ç±»	é¹°å˜´è±†ï¼ˆ3.4mgï¼‰ã€é»‘è±†ï¼ˆ2.5mgï¼‰	æ¯å‘¨3-4æ¬¡<br>
ä¹³åˆ¶å“	å¥¶é…ªï¼ˆ3.1mgï¼‰ã€é…¸å¥¶ï¼ˆ0.5mgï¼‰	æ¯æ—¥1-2ä»½<br>
è°·ç‰©	å…¨éº¦é¢åŒ…ï¼ˆ1.8mgï¼‰ã€ç‡•éº¦ï¼ˆ2.3mgï¼‰	é€‰æ‹©æœªç²¾åŠ å·¥äº§å“<br>
æ³¨æ„ï¼šåŠ¨ç‰©æ€§é£Ÿç‰©ä¸­çš„é”Œï¼ˆå¦‚çº¢è‚‰ã€è´ç±»ï¼‰å¸æ”¶ç‡ï¼ˆçº¦30-40%ï¼‰é«˜äºæ¤ç‰©æ€§é£Ÿç‰©ï¼ˆçº¦10-20%ï¼‰ã€‚</p>
</li>
<li>
<p>é”Œè¡¥å……å‰‚é€‰æ‹©<br>
é€‚ç”¨æƒ…å†µï¼š</p>
</li>
</ol>
<p>è¡€é”Œæ£€æµ‹æ˜¾ç¤ºç¼ºä¹ï¼ˆè¡€æ¸…é”Œï¼œ70Î¼g/dLï¼‰</p>
<p>é¥®é£Ÿæ— æ³•æ»¡è¶³éœ€æ±‚ï¼ˆå¦‚ç´ é£Ÿè€…ã€å­•å¦‡ï¼‰</p>
<p>å­˜åœ¨ç¼ºé”Œç—‡çŠ¶ï¼ˆè„±å‘ã€å‘³è§‰å‡é€€ã€åå¤æ„ŸæŸ“ï¼‰ã€‚</p>
<p>å¸¸è§ç±»å‹ï¼š</p>
<p>ç±»å‹	ç‰¹ç‚¹	é€‚åˆäººç¾¤<br>
è‘¡è„ç³–é…¸é”Œ	å¸æ”¶ç‡è¾ƒé«˜ï¼Œèƒƒè‚ é“åˆºæ¿€å°	å„¿ç«¥ã€æ™®é€šæˆäºº<br>
æŸ æª¬é…¸é”Œ	å¸æ”¶ç‡æœ€ä½³ï¼Œé€‚åˆç©ºè…¹æœç”¨	èƒƒè‚ åŠŸèƒ½æ­£å¸¸è€…<br>
é”Œé•åˆå‰‚	å«é•ï¼ŒååŒç¼“è§£ç–²åŠ³	è¿åŠ¨äººç¾¤ã€å‹åŠ›å¤§è€…<br>
è¯åˆé”Œï¼ˆå¦‚å¡å•¶ç”²é…¸é”Œï¼‰	ç”Ÿç‰©åˆ©ç”¨ç‡é«˜ï¼Œä»·æ ¼è¾ƒè´µ	ä¸¥é‡ç¼ºé”Œæˆ–å¸æ”¶éšœç¢è€…<br>
å‰‚é‡å»ºè®®ï¼š</p>
<p>æ™®é€šæˆäººï¼šæ¯æ—¥é¢å¤–è¡¥å……ä¸è¶…è¿‡ 15-25mgï¼ˆä¸­å›½è¥å…»å­¦ä¼šæ¨èæˆäººæ¯æ—¥æ‘„å…¥é‡ï¼šç”·12.5mgï¼Œå¥³7.5mgï¼‰ã€‚</p>
<p>æ²»ç–—ç¼ºé”Œï¼šéµåŒ»å˜±çŸ­æœŸæœç”¨ï¼ˆå¯é«˜è¾¾30-50mg/å¤©ï¼‰ï¼Œç–—ç¨‹é€šå¸¸1-3ä¸ªæœˆã€‚</p>
<p>æœç”¨æ—¶é—´ï¼š</p>
<p>é¤å1å°æ—¶æœç”¨ï¼Œå‡å°‘èƒƒéƒ¨ä¸é€‚ã€‚</p>
<p>é¿å…ä¸é’™ã€é“è¡¥å……å‰‚åŒæœï¼ˆé—´éš”è‡³å°‘2å°æ—¶ï¼‰ã€‚</p>
<p>ä¸‰ã€è¡¥é”Œæ³¨æ„äº‹é¡¹<br>
é¿å…è¿‡é‡</p>
<p>é•¿æœŸè¶…é‡ï¼ˆï¼40mg/å¤©ï¼‰å¯èƒ½æŠ‘åˆ¶é“œå¸æ”¶ï¼Œå¼•å‘è´«è¡€ã€ç¥ç»ç³»ç»Ÿé—®é¢˜ã€‚</p>
<p>å…¸å‹è¿‡é‡ç—‡çŠ¶ï¼šæ¶å¿ƒã€å‘•åã€å¤´ç—›ã€‚</p>
<p>ç‰¹æ®Šäººç¾¤</p>
<p>å­•å¦‡ï¼šæ¯æ—¥éœ€é”Œ9.5-12mgï¼Œä¼˜å…ˆé€šè¿‡é£Ÿç‰©è¡¥å……ï¼Œå¦‚éœ€ç”¨è¡¥å……å‰‚éœ€åŒ»ç”ŸæŒ‡å¯¼ã€‚</p>
<p>è€å¹´äººï¼šèƒƒé…¸åˆ†æ³Œå‡å°‘å¯èƒ½å½±å“å¸æ”¶ï¼Œå¯é€‰æ‹©è¯åˆé”Œæˆ–ä¸ç»´ç”Ÿç´ CåŒæœä¿ƒè¿›å¸æ”¶ã€‚</p>
<p>è¯ç‰©ç›¸äº’ä½œç”¨</p>
<p>æŠ—ç”Ÿç´ ï¼ˆå¦‚å››ç¯ç´ ã€å–¹è¯ºé…®ç±»ï¼‰ä¸é”Œç»“åˆé™ä½è¯æ•ˆï¼Œéœ€é—´éš”2å°æ—¶æœç”¨ã€‚</p>
<p>åˆ©å°¿å‰‚ï¼ˆå¦‚æ°¢æ°¯å™»å—ªï¼‰å¯èƒ½å¢åŠ é”Œæ’æ³„ï¼Œéœ€ç›‘æµ‹é”Œæ°´å¹³ã€‚</p>
<p>å››ã€ç¼ºé”Œè‡ªæµ‹ä¸å°±åŒ»å»ºè®®<br>
è‡ªæµ‹ä¿¡å·ï¼š</p>
<p>é¢‘ç¹æ„Ÿå†’ã€å£è…”æºƒç–¡</p>
<p>è„±å‘ã€æŒ‡ç”²ç™½æ–‘</p>
<p>å‘³è§‰/å—…è§‰å‡é€€</p>
<p>å„¿ç«¥å‘è‚²è¿Ÿç¼“ã€æ³¨æ„åŠ›ä¸‹é™ã€‚</p>
<p>ä½•æ—¶å°±åŒ»ï¼š</p>
<p>ç–‘ä¼¼ç¼ºé”Œä¸”è°ƒæ•´é¥®é£Ÿåæ— æ”¹å–„ã€‚</p>
<p>ä¼´éšæ…¢æ€§è…¹æ³»ã€æ¶ˆç˜¦æˆ–çš®è‚¤ç—…å˜ã€‚</p>
<p>éœ€é€šè¿‡ è¡€æ¸…é”Œæ£€æµ‹ æˆ– å‘é”Œæ£€æµ‹ ç¡®è¯Šã€‚</p>
<p>äº”ã€è¡¥é”Œçš„ååŒè¥å…»ç´ <br>
ç»´ç”Ÿç´ Cï¼šå¢å¼ºé”Œå¸æ”¶ï¼ˆå¦‚é¤ååƒæ©™å­ï¼‰ã€‚</p>
<p>ç»´ç”Ÿç´ Aï¼šä¸é”ŒååŒç»´æŒé»è†œå…ç–«ï¼ˆå¦‚èƒ¡èåœã€åŠ¨ç‰©è‚è„ï¼‰ã€‚</p>
<p>ç¡’ï¼šè”åˆè¡¥å……å¯æå‡æŠ—æ°§åŒ–èƒ½åŠ›ï¼ˆå·´è¥¿åšæœã€é±¼ç±»ï¼‰ã€‚</p>
<p>æ€»ç»“ï¼šè¡¥é”Œåº”ä¼˜å…ˆé€šè¿‡é¥®é£Ÿè°ƒæ•´ï¼Œå¿…è¦æ—¶é€‰æ‹©åˆé€‚è¡¥å……å‰‚å¹¶æ§åˆ¶å‰‚é‡ã€‚é•¿æœŸæˆ–å¤§å‰‚é‡è¡¥é”Œéœ€åœ¨åŒ»ç”ŸæŒ‡å¯¼ä¸‹è¿›è¡Œï¼Œé¿å…ç›²ç›®è¡¥å……å¯¼è‡´å¤±è¡¡ã€‚</p>
<h3 id="5-l-ç²¾æ°¨é…¸ç‰‡"><a class="header-anchor" href="#5-l-ç²¾æ°¨é…¸ç‰‡">ğŸŒ³</a>5. L-ç²¾æ°¨é…¸ç‰‡</h3>
<p>L-ç²¾æ°¨é…¸ï¼ˆL-Arginineï¼‰æ˜¯ä¸€ç§æ¡ä»¶å¿…éœ€æ°¨åŸºé…¸ï¼Œåœ¨äººä½“ä¸­å…·æœ‰å¤šç§ç”Ÿç†åŠŸèƒ½ã€‚å®ƒé€šè¿‡è½¬åŒ–ä¸ºä¸€æ°§åŒ–æ°®ï¼ˆNOï¼‰ï¼Œå‚ä¸è¡€ç®¡èˆ’å¼ ã€å…ç–«è°ƒèŠ‚å’Œæ¿€ç´ åˆ†æ³Œç­‰è¿‡ç¨‹ã€‚ä»¥ä¸‹æ˜¯å…³äºL-ç²¾æ°¨é…¸ç‰‡çš„è¯¦ç»†è§£æï¼ŒåŒ…æ‹¬ä½œç”¨ã€é€‚ç”¨äººç¾¤ã€æœç”¨å»ºè®®åŠæ³¨æ„äº‹é¡¹ï¼š</p>
<p>ä¸€ã€L-ç²¾æ°¨é…¸çš„ä¸»è¦ä½œç”¨<br>
æ”¹å–„å¿ƒè¡€ç®¡å¥åº·</p>
<p>ä¿ƒè¿›ä¸€æ°§åŒ–æ°®ç”Ÿæˆï¼Œæ‰©å¼ è¡€ç®¡ï¼Œæ”¹å–„è¡€æ¶²å¾ªç¯ã€‚</p>
<p>å¯èƒ½æœ‰åŠ©äºé™ä½è¡€å‹ï¼Œç¼“è§£å¿ƒç»ç—›ç—‡çŠ¶ã€‚</p>
<p>å¢å¼ºè¿åŠ¨è¡¨ç°</p>
<p>å¢åŠ è‚Œè‚‰è¡€æµé‡ï¼Œå»¶ç¼“ç–²åŠ³ï¼Œä¿ƒè¿›è¿åŠ¨åæ¢å¤ã€‚</p>
<p>éƒ¨åˆ†ç ”ç©¶æ˜¾ç¤ºå¯¹è€åŠ›è¿åŠ¨æœ‰ç›Šï¼Œä½†æ•ˆæœå› äººè€Œå¼‚ã€‚</p>
<p>æ”¯æŒç”·æ€§ç”Ÿæ®–å¥åº·</p>
<p>æ”¹å–„å‹ƒèµ·åŠŸèƒ½ï¼ˆé€šè¿‡å¢åŠ é˜´èŒè¡€æµï¼‰ã€‚</p>
<p>å¯èƒ½æé«˜ç²¾å­è´¨é‡ï¼ˆéœ€ç»“åˆå…¶ä»–è¥å…»ç´ å¦‚é”Œï¼‰ã€‚</p>
<p>å…ç–«è°ƒèŠ‚</p>
<p>ä¿ƒè¿›å…ç–«ç»†èƒï¼ˆå¦‚Tç»†èƒï¼‰åŠŸèƒ½ï¼Œå¢å¼ºæŠ—æ„ŸæŸ“èƒ½åŠ›ã€‚</p>
<p>å…¶ä»–æ½œåœ¨ç›Šå¤„</p>
<p>ä¿ƒè¿›ä¼¤å£æ„ˆåˆï¼ˆç²¾æ°¨é…¸æ˜¯èƒ¶åŸè›‹ç™½åˆæˆçš„åŸæ–™ï¼‰ã€‚</p>
<p>å¯èƒ½æ”¹å–„èƒ°å²›ç´ æ•æ„Ÿæ€§ï¼ˆå¯¹ç³–å°¿ç—…æ‚£è€…æœ‰ä¸€å®šå¸®åŠ©ï¼‰ã€‚</p>
<p>äºŒã€é€‚ç”¨äººç¾¤<br>
å¿ƒè¡€ç®¡ç–¾ç—…æ‚£è€…</p>
<p>é«˜è¡€å‹ã€åŠ¨è„‰ç¡¬åŒ–ã€å¿ƒç»ç—›æ‚£è€…ï¼ˆéœ€åŒ»ç”ŸæŒ‡å¯¼ä¸‹ä½¿ç”¨ï¼‰ã€‚</p>
<p>è¿åŠ¨çˆ±å¥½è€…</p>
<p>å¸Œæœ›æå‡è€åŠ›ã€åŠ é€Ÿæ¢å¤çš„å¥èº«æˆ–è·‘æ­¥çˆ±å¥½è€…ã€‚</p>
<p>ç”·æ€§å¥åº·éœ€æ±‚è€…</p>
<p>è½»åº¦å‹ƒèµ·åŠŸèƒ½éšœç¢ï¼ˆEDï¼‰æˆ–ç²¾å­è´¨é‡ä¸ä½³è€…ã€‚</p>
<p>å…ç–«åŠ›ä½ä¸‹è€…</p>
<p>åå¤æ„ŸæŸ“ã€æœ¯åæ¢å¤æœŸäººç¾¤ã€‚</p>
<p>å…¶ä»–</p>
<p>çš®è‚¤ä¼¤å£æ„ˆåˆç¼“æ…¢è€…ã€‚</p>
<p>è€å¹´äººï¼ˆæ”¹å–„è¡€ç®¡åŠŸèƒ½ï¼Œå»¶ç¼“è¡°è€ï¼‰ã€‚</p>
<p>ä¸‰ã€æœç”¨å»ºè®®<br>
å‰‚é‡</p>
<p>ä¸€èˆ¬ä¿å¥ï¼šæ¯æ—¥500-2000mgï¼Œåˆ†æ¬¡æœç”¨ã€‚</p>
<p>è¿åŠ¨è¡¨ç°ï¼šè¿åŠ¨å‰30-60åˆ†é’Ÿæœç”¨3000-6000mgã€‚</p>
<p>ç”·æ€§å¥åº·ï¼šæ¯æ—¥3000-5000mgï¼ŒæŒç»­4-12å‘¨ã€‚</p>
<p>ç–¾ç—…è¾…åŠ©æ²»ç–—ï¼šéµåŒ»å˜±ï¼Œå¯èƒ½éœ€è¦æ›´é«˜å‰‚é‡ï¼ˆå¦‚5000-9000mg/å¤©ï¼‰ã€‚</p>
<p>æœç”¨æ—¶é—´</p>
<p>ç©ºè…¹æœç”¨å¸æ”¶æœ€ä½³ï¼ˆé¤å‰1å°æ—¶æˆ–é¤å2å°æ—¶ï¼‰ã€‚</p>
<p>é¿å…ä¸é«˜è„‚è‚ªé£Ÿç‰©åŒæœï¼Œå¯èƒ½å½±å“å¸æ”¶ã€‚</p>
<p>æ­é…å»ºè®®</p>
<p>ä¸ç“œæ°¨é…¸ï¼ˆCitrullineï¼‰åˆç”¨ï¼šç“œæ°¨é…¸å¯è½¬åŒ–ä¸ºç²¾æ°¨é…¸ï¼Œå»¶é•¿ä½œç”¨æ—¶é—´ã€‚</p>
<p>ä¸æŠ—æ°§åŒ–å‰‚ï¼ˆå¦‚ç»´ç”Ÿç´ Cã€Eï¼‰åˆç”¨ï¼šä¿æŠ¤ä¸€æ°§åŒ–æ°®ä¸è¢«æ°§åŒ–ã€‚</p>
<p>å››ã€æ³¨æ„äº‹é¡¹<br>
å‰¯ä½œç”¨</p>
<p>å¸¸è§ï¼šèƒƒè‚ é“ä¸é€‚ï¼ˆè…¹èƒ€ã€è…¹æ³»ï¼‰ï¼Œå¤šè§äºé«˜å‰‚é‡ï¼ˆï¼10g/å¤©ï¼‰ã€‚</p>
<p>ç½•è§ï¼šä½è¡€å‹ã€ç”µè§£è´¨å¤±è¡¡ï¼ˆé•¿æœŸé«˜å‰‚é‡ä½¿ç”¨ï¼‰ã€‚</p>
<p>ç¦å¿Œäººç¾¤</p>
<p>ç–±ç–¹ç—…æ¯’æ„ŸæŸ“è€…ï¼šç²¾æ°¨é…¸å¯èƒ½ä¿ƒè¿›ç—…æ¯’å¤åˆ¶ã€‚</p>
<p>ä¸¥é‡è‚è‚¾åŠŸèƒ½ä¸å…¨è€…ï¼šéœ€åŒ»ç”Ÿè¯„ä¼°ã€‚</p>
<p>ä½è¡€å‹æ‚£è€…ï¼šå¯èƒ½è¿›ä¸€æ­¥é™ä½è¡€å‹ã€‚</p>
<p>è¯ç‰©ç›¸äº’ä½œç”¨</p>
<p>é™å‹è¯ï¼šå¯èƒ½å¢å¼ºé™å‹æ•ˆæœï¼Œéœ€ç›‘æµ‹è¡€å‹ã€‚</p>
<p>ç¡é…¸é…¯ç±»è¯ç‰©ï¼ˆå¦‚ç¡é…¸ç”˜æ²¹ï¼‰ï¼šåˆç”¨å¯èƒ½å¯¼è‡´è¡€å‹è¿‡ä½ã€‚</p>
<p>æŠ—å‡è¡€è¯ï¼šå¯èƒ½å¢åŠ å‡ºè¡€é£é™©ã€‚</p>
<p>é•¿æœŸä½¿ç”¨</p>
<p>é•¿æœŸé«˜å‰‚é‡è¡¥å……å¯èƒ½å¹²æ‰°å…¶ä»–æ°¨åŸºé…¸ä»£è°¢ï¼Œå»ºè®®å‘¨æœŸæ€§ä½¿ç”¨ï¼ˆå¦‚ç”¨2-3ä¸ªæœˆï¼Œåœ1ä¸ªæœˆï¼‰ã€‚</p>
<p>äº”ã€L-ç²¾æ°¨é…¸çš„é£Ÿç‰©æ¥æº<br>
è‚‰ç±»ï¼šç‰›è‚‰ã€é¸¡è‚‰ã€çŒªè‚‰ã€‚</p>
<p>æµ·é²œï¼šä¸‰æ–‡é±¼ã€è™¾ã€é‡‘æªé±¼ã€‚</p>
<p>åšæœç§å­ï¼šæ ¸æ¡ƒã€æä»ã€å—ç“œå­ã€‚</p>
<p>è±†ç±»ï¼šå¤§è±†ã€é¹°å˜´è±†ã€æ‰è±†ã€‚</p>
<p>ä¹³åˆ¶å“ï¼šç‰›å¥¶ã€å¥¶é…ªã€‚</p>
<p>å…­ã€å¸¸è§é—®é¢˜<br>
L-ç²¾æ°¨é…¸ä¸ç²¾æ°¨é…¸çš„åŒºåˆ«ï¼Ÿ</p>
<p>L-ç²¾æ°¨é…¸æ˜¯ç²¾æ°¨é…¸çš„å¤©ç„¶æ´»æ€§å½¢å¼ï¼Œè¡¥å……å‰‚é€šå¸¸ä½¿ç”¨L-ç²¾æ°¨é…¸ã€‚</p>
<p>L-ç²¾æ°¨é…¸å¯¹æ‰€æœ‰äººéƒ½æœ‰æ•ˆå—ï¼Ÿ</p>
<p>æ•ˆæœå› äººè€Œå¼‚ï¼Œå°¤å…¶æ˜¯è¿åŠ¨è¡¨ç°å’Œå‹ƒèµ·åŠŸèƒ½æ”¹å–„ï¼Œéƒ¨åˆ†äººå¯èƒ½æ— æ˜æ˜¾æ„Ÿå—ã€‚</p>
<p>å¯ä»¥é•¿æœŸæœç”¨å—ï¼Ÿ</p>
<p>ä¸€èˆ¬ä¿å¥å‰‚é‡ï¼ˆï¼œ3g/å¤©ï¼‰å¯é•¿æœŸä½¿ç”¨ï¼Œä½†å»ºè®®å®šæœŸåœç”¨ä»¥é¿å…è€å—æ€§ã€‚</p>
<p>æ€»ç»“<br>
L-ç²¾æ°¨é…¸ç‰‡æ˜¯ä¸€ç§å¤šåŠŸèƒ½è¡¥å……å‰‚ï¼Œé€‚åˆå¿ƒè¡€ç®¡å¥åº·ã€è¿åŠ¨è¡¨ç°ã€ç”·æ€§å¥åº·åŠå…ç–«åŠ›æå‡ç­‰éœ€æ±‚ã€‚ä½†éœ€æ ¹æ®ä¸ªäººæƒ…å†µé€‰æ‹©åˆé€‚å‰‚é‡ï¼Œå¹¶æ³¨æ„ç¦å¿Œå’Œå‰¯ä½œç”¨ã€‚å¦‚æœ‰åŸºç¡€ç–¾ç—…æˆ–æ­£åœ¨æœè¯ï¼Œå»ºè®®å’¨è¯¢åŒ»ç”Ÿåå†ä½¿ç”¨ã€‚</p>
<hr>
<h2 id="99-æ€»ç»“çš„tips"><a class="header-anchor" href="#99-æ€»ç»“çš„tips">ğŸŒ³</a>99. æ€»ç»“çš„TIPS</h2>
<h3 id="99-1-å°ç™½åˆšå¼€å§‹è¿›å¥èº«æˆ¿ç»ƒ30-40åˆ†é’Ÿå™¨æ¢°å†ç»ƒæœ‰æ°§-åŠ›é‡è®­ç»ƒè€—å°½ç³–åŸåæœ‰æ°§ç‡ƒè„‚æ•ˆç‡é«˜"><a class="header-anchor" href="#99-1-å°ç™½åˆšå¼€å§‹è¿›å¥èº«æˆ¿ç»ƒ30-40åˆ†é’Ÿå™¨æ¢°å†ç»ƒæœ‰æ°§-åŠ›é‡è®­ç»ƒè€—å°½ç³–åŸåæœ‰æ°§ç‡ƒè„‚æ•ˆç‡é«˜">ğŸŒ³</a>99.1 å°ç™½åˆšå¼€å§‹è¿›å¥èº«æˆ¿ç»ƒ30-40åˆ†é’Ÿå™¨æ¢°å†ç»ƒæœ‰æ°§ï¼ˆ<strong>åŠ›é‡è®­ç»ƒ</strong>è€—å°½<code>ç³–åŸ</code>å<strong>æœ‰æ°§</strong>ç‡ƒè„‚æ•ˆç‡é«˜ï¼‰</h3>
<p><strong>é«˜å¼ºåº¦é—´æ­‡è®­ç»ƒï¼ˆhigh-intensity interval trainingï¼ŒHIITï¼‰</strong>ï¼šæŒ‡ç»ƒä¹ è€…åœ¨æé‡çš„è¿åŠ¨å¼ºåº¦ä¸‹å…¨åŠ›æŒç»­è¿åŠ¨æ•°åç§’ï¼Œç„¶åçŸ­æš‚ä¼‘æ¯ï¼Œå†é‡å¤çŸ­æ—¶é—´å…¨åŠ›è¿åŠ¨çš„è®­ç»ƒæ–¹æ³•ï¼Œè¿™æ˜¯ä¸€ç§æœ‰æ°§å’Œæ— æ°§è¿åŠ¨ç›¸ç»“åˆçš„é”»ç‚¼æ–¹å¼ï¼Œä¸”å¯ä»¥ä¸éœ€è¦å€ŸåŠ©ä»»ä½•å™¨æ¢°æˆ–æ˜¯å·¥å…·ï¼Œèƒ½å¿«é€Ÿç‡ƒçƒ§çƒ­é‡ï¼Œè¾¾åˆ°å‡è‚¥çš„ç›®çš„</p>
<p>99.2 æ— æ°§è¿åŠ¨: anaerobic exercise</p>
<p>99.2.2 æ¦‚å¿µ:<br>
æ— æ°§è¿åŠ¨æ˜¯æŒ‡äººä½“è‚Œè‚‰åœ¨æ— æ°§ä¾›èƒ½ä»£è°¢çŠ¶æ€ä¸‹è¿›è¡Œçš„è¿åŠ¨ã€‚</p>
<p>99.2.3 ç‰¹å¾:<br>
æ— æ°§è¿åŠ¨å¤§éƒ¨åˆ†æ˜¯è´Ÿè·å¼ºåº¦é«˜ã€ç¬é—´æ€§å¼ºçš„è¿åŠ¨ï¼Œæ‰€ä»¥å¾ˆéš¾æŒç»­é•¿æ—¶é—´ï¼Œè€Œä¸”ç–²åŠ³æ¶ˆé™¤çš„æ—¶é—´ä¹Ÿæ…¢ã€‚</p>
<p>åœ¨è¿åŠ¨è¿‡ç¨‹ä¸­ï¼Œèº«ä½“çš„æ–°é™ˆä»£è°¢æ˜¯åŠ é€Ÿçš„ï¼ŒåŠ é€Ÿçš„ä»£è°¢éœ€è¦æ¶ˆè€—æ›´å¤šçš„èƒ½é‡ã€‚<br>
äººä½“çš„èƒ½é‡æ˜¯é€šè¿‡èº«ä½“å†…çš„ç³–ã€è›‹ç™½è´¨å’Œè„‚è‚ªåˆ†è§£ä»£è°¢å¾—æ¥çš„ã€‚</p>
<p>æ— æ°§è¿åŠ¨çš„æœ€å¤§ç‰¹å¾æ˜¯ï¼šè¿åŠ¨æ—¶æ°§æ°”çš„æ‘„å–é‡éå¸¸ä½ã€‚<br>
ç”±äºé€Ÿåº¦è¿‡å¿«åŠçˆ†å‘åŠ›è¿‡çŒ›ï¼Œäººä½“å†…çš„ç³–åˆ†æ¥ä¸åŠç»è¿‡æ°§æ°”åˆ†è§£ï¼Œè€Œä¸å¾—ä¸ä¾é â€œæ— æ°§ä¾›èƒ½â€ã€‚</p>
<p>è¿™ç§è¿åŠ¨ä¼šåœ¨ä½“å†…äº§ç”Ÿè¿‡å¤šçš„<strong>ä¹³é…¸</strong>ï¼Œå¯¼è‡´è‚Œè‚‰ç–²åŠ³ä¸èƒ½æŒä¹…ï¼Œè¿åŠ¨åæ„Ÿåˆ°è‚Œè‚‰é…¸ç—›ï¼Œå‘¼å¸æ€¥ä¿ƒã€‚</p>
<p>å…¶å®æ˜¯<code>é…µè§£</code>æ—¶äº§ç”Ÿå¤§é‡<strong>ä¸™é…®é…¸</strong>ã€<strong>ä¹³é…¸</strong>ç­‰<strong>ä¸­é—´ä»£è°¢äº§ç‰©</strong>ï¼Œä¸èƒ½é€šè¿‡å‘¼å¸æ’é™¤ã€‚</p>
<p>è¿™äº›é…¸æ€§äº§ç‰©å †ç§¯åœ¨<strong>ç»†èƒ</strong>å’Œ<strong>è¡€æ¶²</strong>ä¸­ï¼Œå°±æˆäº†â€œç–²åŠ³æ¯’ç´ â€ï¼Œä¼šè®©äººæ„Ÿåˆ°ç–²ä¹æ— åŠ›ã€è‚Œè‚‰é…¸ç—›ï¼Œè¿˜ä¼šå‡ºç°å‘¼å¸ã€å¿ƒè·³åŠ å¿«å’Œå¿ƒå¾‹å¤±å¸¸ï¼Œä¸¥é‡æ—¶ä¼šå‡ºç°é…¸ä¸­æ¯’å’Œå¢åŠ è‚è‚¾è´Ÿæ‹…ã€‚</p>
<p>äººä½“<strong>é¢„å­˜</strong>çš„ATPèƒ½é‡åªèƒ½ç»´æŒæé™å¼ºåº¦è¿åŠ¨å¤§çº¦<strong>2ç§’</strong>ï¼Œéšåç”±CPåˆæˆATPï¼Œå¤§çº¦èƒ½ç»´æŒ6ç§’ï¼Œåˆè®¡<strong>8ç§’</strong>å·¦å³ã€‚<br>
ä¹Ÿå°±æ˜¯è¯´ï¼Œå…¨é€Ÿè·‘ä¸åˆ°ä¸€ç™¾ç±³å³å‘Šç½„ï¼Œè·‘äºŒç™¾ç±³æ—¶åé¢çš„ä¸€ç™¾ç±³ï¼Œå¿…é¡»ç”±<strong>è¡€ç³–</strong>åœ¨æ— æ°§çŠ¶æ€ä¸‹ï¼Œè¿…é€Ÿåˆæˆæ–°çš„çƒ­èƒ½ç‰©è´¨ATPæ¥æä¾›èƒ½é‡ï¼Œå…¶å‰¯äº§å“æ˜¯ä¹³é…¸ã€‚</p>
<p>è·‘äºŒç™¾ç±³æˆ–å››ç™¾ç±³ã€ä¸€ç™¾ç±³æ¸¸æ³³ã€ç½‘çƒå’Œè¶³çƒç­‰è¿åŠ¨ï¼Œæ˜¯åˆ©ç”¨<strong>è‚Œç³–åŸ</strong>æ— æ°§åˆ†è§£æ‰€æä¾›çš„èƒ½é‡ï¼Œæ•…è¿åŠ¨åè‚Œè‚‰é‡Œç´¯ç§¯å¤§é‡<strong>ä¹³é…¸</strong>ï¼Œä¹³é…¸å †ç§¯æ˜¯è¿åŠ¨åå¼•èµ·è‚Œè‚‰ç—›çš„åŸå› ä¹‹ä¸€ã€‚</p>
<p>99.2.4 ä¾›èƒ½ç³»ç»Ÿ:</p>
<p>å‚ä¸æ— æ°§è¿åŠ¨çš„ä¾›èƒ½ç³»ç»Ÿä¸ºATP-CPç³»ç»Ÿã€ç³–é…µè§£ç³»ç»Ÿã€æ°§åŒ–èƒ½ç³»ç»Ÿï¼Œ</p>
<p>ä¾‹å¦‚ï¼Œ10ç§’å†…å³å¯å®Œæˆçš„ç™¾ç±³è·‘ï¼ŒATP-CPç³»ç»Ÿä¸ºä¸»è¦ä¾›èƒ½ç³»ç»Ÿï¼Œä½†ç³–é…µè§£å’Œæ°§åŒ–èƒ½ç³»ç»Ÿä¹ŸåŒæ—¶ä¾›åº”å°‘éƒ¨åˆ†èƒ½é‡ã€‚</p>
<h3 id="99-2-4-1-atp-cp"><a class="header-anchor" href="#99-2-4-1-atp-cp">ğŸŒ³</a>99.2.4.1 ATP-CP</h3>
<p>ç»†èƒå¯é€šè¿‡åˆ†è§£<strong>ç£·é…¸è‚Œé…¸</strong>æä¾›èƒ½é‡å’Œ<strong>æ— æœºç£·é…¸</strong>ï¼Œä½¿ADPé‡æ–°åˆæˆATPï¼Œä»è€Œç»´æŒATPæ°´å¹³çš„ç¨³å®šï¼Œæ­¤è¿‡ç¨‹éå¸¸è¿…é€Ÿï¼Œè€Œä¸”ä¸éœ€è¦ç»†èƒå†…çš„ç‰¹å®šç»“æ„å³å¯å®Œæˆï¼Œå¹¶ä¸”æ­¤è¿‡ç¨‹ä¸éœ€è¦æ°§å³å¯è¿›è¡Œï¼Œä½†ä¹Ÿå¯åœ¨æœ‰æ°§æ¡ä»¶ä¸‹è¿›è¡Œã€‚</p>
<p>åƒæ— æ°§è¿åŠ¨è¿™æ ·çš„å¤§å¼ºåº¦ã€å‰§çƒˆè¿åŠ¨ï¼Œåœ¨æœ€åˆçš„å‡ ç§’å†…ï¼ŒATPå«é‡ç»´æŒåœ¨ä¸€ä¸ªç›¸å¯¹ä¸å˜çš„æ°´å¹³ï¼Œä½†ç£·é…¸è‚Œé…¸å«é‡å´ä¸æ–­ä¸‹é™ï¼Œå› ä¸ºè¦è¡¥å……æ¶ˆè€—çš„ATPã€‚</p>
<p>åŠ›ç«­æ—¶ï¼ŒATPå’Œç£·é…¸è‚Œé…¸çš„å«é‡æ˜¾è‘—ä¸‹é™ï¼Œä»¥è‡³äºä¸èƒ½ç»§ç»­æä¾›èƒ½é‡æ¥ç»´æŒè‚Œè‚‰çš„æ”¶ç¼©å’Œèˆ’å¼ ã€‚</p>
<p>å› æ­¤ï¼Œåˆ†è§£ç£·é…¸è‚Œé…¸æ¥ç»´æŒATPå«é‡çš„ä½œç”¨æ˜¯æœ‰é™çš„ã€‚</p>
<p>ä½“å†…å‚¨å­˜çš„ATPå’Œç£·é…¸è‚Œé…¸ï¼Œæ—¢èƒ½æä¾›æ— æ°§è¿åŠ¨ï¼ˆä¾‹å¦‚å…¨é€Ÿå¥”è·‘ï¼‰3-15ç§’çš„èƒ½é‡ä¾›åº”ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´ä»¥åï¼Œè‚Œè‚‰å°†é€šè¿‡<strong>ç³–é…µè§£</strong>å’Œæœ‰æ°§æ°§åŒ–äº§ç”ŸATPä¾›èƒ½ã€‚</p>
<p>99.2.4.2 ç³–é…µè§£<br>
ç³–é…µè§£å³é€šè¿‡ä¸€ç³»åˆ—<strong>ç³–é…µè§£é…¶</strong>å¼•èµ·<strong>è‘¡è„ç³–åˆ†è§£</strong>çš„è¿‡ç¨‹ã€‚<br>
ç³–é…µè§£ç³»ç»Ÿè¿œæ¯”ATP-CPç³»ç»Ÿå¤æ‚å¾—å¤šï¼Œåœ¨<strong>ç³–åŸ</strong>åˆ†è§£æˆä¹³é…¸çš„è¿‡ç¨‹ä¸­éœ€è¦10-12ä¸ª<strong>é…¶ä¿ƒååº”</strong>ï¼Œæ‰€æœ‰çš„é…¶ä¿ƒååº”éƒ½æ˜¯åœ¨<strong>ç»†èƒè´¨</strong>ä¸­è¿›è¡Œçš„ã€‚</p>
<p>1åˆ†å­<strong>ç³–åŸ</strong>åœ¨ç³–é…µè§£è¿‡ç¨‹ä¸­ä¼šå‡€äº§3åˆ†å­çš„ATPï¼Œ1åˆ†å­<strong>è‘¡è„ç³–</strong>ç³–é…µè§£è¿‡ç¨‹ä¸­ä¼šå‡€äº§2åˆ†å­ATPã€‚<br>
ç³–é…µè§£ç³»ç»Ÿä¸èƒ½äº§ç”Ÿå¤§é‡ATPï¼Œä½†ATP-CPç³»ç»Ÿå’Œç³–é…µè§£ç³»ç»Ÿä»å¯åœ¨æ°§æ°”ä¸è¶³çš„æƒ…å†µä¸‹æä¾›èƒ½é‡ï¼Œä¾›è‚Œè‚‰æ”¶ç¼©ï¼Œè¿™ä¸¤å¤§ç³»ç»Ÿä¸»è¦ä¸ºå¤§å¼ºåº¦è¿åŠ¨çš„å‰å‡ åˆ†é’Ÿä¾›èƒ½ã€‚</p>
<p>åœ¨å®Œæ•´çš„æ— æ°§è¿åŠ¨ä¸­ï¼Œè¿™ä¸¤ä¸ªç³»ç»Ÿ<strong>åªèƒ½ç»´æŒä¸åˆ°2åˆ†é’Ÿ</strong>ï¼Œé•¿æ—¶é—´çš„è¿åŠ¨éœ€è¦ç¬¬ä¸‰ä¸ªèƒ½é‡ç³»ç»Ÿâ€”â€”<strong>æ°§åŒ–èƒ½ç³»ç»Ÿ</strong>ã€‚</p>
<h3 id="99-2-4-3-æ°§åŒ–èƒ½"><a class="header-anchor" href="#99-2-4-3-æ°§åŒ–èƒ½">ğŸŒ³</a>99.2.4.3 æ°§åŒ–èƒ½</h3>
<p>æœºä½“åœ¨æœ‰æ°§æ¡ä»¶ä¸‹åˆ†è§£åº•ç‰©äº§ç”Ÿèƒ½é‡çš„è¿‡ç¨‹ï¼Œç§°ä¸ºç»†èƒå†…å‘¼å¸ï¼Œæ­¤è¿‡ç¨‹éœ€è¦æ°§çš„å‚ä¸ï¼Œå› æ­¤æˆä¸ºæœ‰æ°§è¿‡ç¨‹ã€‚<br>
åœ¨é•¿æ—¶é—´è¿åŠ¨ä¸­ï¼Œéª¨éª¼è‚Œéœ€è¦ä¸€ä¸ªç¨³å®šçš„ä¾›èƒ½ç³»ç»Ÿæ¥ç»´æŒ<strong>è‚Œçº¤ç»´</strong>çš„æ”¶ç¼©ã€‚<br>
ç›¸å¯¹äºæ— æ°§äº§ç”ŸATPï¼Œæœ‰æ°§ä»£è°¢ç³»ç»Ÿçš„åŠ¨å‘˜é€Ÿåº¦æ…¢ï¼Œä½†å…¶<strong>å…·æœ‰å¼ºå¤§çš„äº§èƒ½èƒ½åŠ›</strong>ï¼Œå› æ­¤æœ‰æ°§ä»£è°¢æ˜¯è€åŠ›è¿åŠ¨çš„ä¸»è¦ä¾›èƒ½æ–¹å¼ï¼Œä½†åœ¨æ— æ°§è¿åŠ¨ä¸­ï¼Œè™½ç„¶äº§èƒ½é€Ÿç‡ä¸èƒ½è·Ÿä¸Šæœºä½“çš„è¿åŠ¨é€Ÿåº¦ï¼Œä½†å…¶åœ¨æ— æ°§è¿åŠ¨åç¨‹ä¾›èƒ½ä¸å¯å°è§‘ã€‚</p>
<p>ç ”ç©¶å‘ç°ï¼Œé€šè¿‡æ— æ°§è¿åŠ¨å¯ä»¥æé«˜æœºä½“çš„è‚Œè‚‰åŠ›é‡ã€çˆ†å‘åŠ›ã€å¢åŠ è‚Œè‚‰ä½“ç§¯ï¼Œæé«˜è¿åŠ¨é€Ÿåº¦ã€‚<br>
å¸¸è§çš„æ— æ°§è¿åŠ¨é¡¹ç›®æœ‰ï¼š<code>çŸ­è·‘</code>ã€<code>ä¸¾é‡</code>ã€<code>æŠ•æ·</code>ã€<code>è·³é«˜</code>ã€<code>è·³è¿œ</code>ã€<code>æ‹”æ²³</code>ã€<code>ä¿¯å§æ’‘</code>ã€<code>æ½œæ°´</code>ã€<code>è‚ŒåŠ›è®­ç»ƒ</code>ï¼ˆé•¿æ—¶é—´çš„è‚Œè‚‰æ”¶ç¼©ï¼‰ç­‰ã€‚</p>
<h2 id="99-2-5-æ— æ°§è¿åŠ¨ä¸æœ‰æ°§è¿åŠ¨çš„åŒºåˆ«"><a class="header-anchor" href="#99-2-5-æ— æ°§è¿åŠ¨ä¸æœ‰æ°§è¿åŠ¨çš„åŒºåˆ«">ğŸŒ³</a>99.2.5 æ— æ°§è¿åŠ¨ä¸æœ‰æ°§è¿åŠ¨çš„åŒºåˆ«</h2>
<p>æœ‰æ°§è¿åŠ¨ä¹Ÿå«åšæœ‰æ°§ä»£è°¢è¿åŠ¨ï¼Œæ˜¯æŒ‡äººä½“åœ¨æ°§æ°”å……åˆ†ä¾›åº”çš„æƒ…å†µä¸‹è¿›è¡Œçš„ä½“è‚²é”»ç‚¼ã€‚</p>
<p>æœ‰æ°§è¿åŠ¨çš„å¥½å¤„æ˜¯ï¼šå¯ä»¥æå‡æ°§æ°”çš„æ‘„å–é‡ï¼Œèƒ½æ›´å¥½åœ°æ¶ˆè€—ä½“å†…å¤šä½™çš„çƒ­é‡ã€‚</p>
<p>ç‰¹ç‚¹æ˜¯å¼ºåº¦ä½ã€æœ‰èŠ‚å¥ã€æŒç»­æ—¶é—´è¾ƒé•¿ã€‚è¦æ±‚æ¯æ¬¡é”»ç‚¼çš„æ—¶é—´ä¸å°‘äº1å°æ—¶ï¼Œæ¯å‘¨åšæŒ3åˆ°5æ¬¡ã€‚</p>
<p>é€šè¿‡è¿™ç§é”»ç‚¼ï¼Œæ°§æ°”èƒ½å……åˆ†é…µè§£ä½“å†…çš„ç³–åˆ†ï¼Œè¿˜å¯æ¶ˆè€—ä½“å†…è„‚è‚ªï¼Œå¢å¼ºå’Œæ”¹å–„å¿ƒè‚ºåŠŸèƒ½ï¼Œé¢„é˜²éª¨è´¨ç–æ¾ï¼Œè°ƒèŠ‚å¿ƒç†å’Œç²¾ç¥çŠ¶æ€ï¼Œæ˜¯å¥èº«çš„ä¸»è¦è¿åŠ¨æ–¹å¼ã€‚</p>
<p>æœ‰æ°§è¿åŠ¨çš„ä¸»è¦ä¾›èƒ½æ–¹å¼ä¸º<strong>æ°§åŒ–èƒ½ç³»ç»Ÿ</strong>ã€‚</p>
<p>å¸¸è§çš„æœ‰æ°§è¿åŠ¨é¡¹ç›®æœ‰ï¼šç‘œä¼½ã€æ­¥è¡Œã€<code>æ…¢è·‘</code>ã€æ»‘å†°ã€<code>æ¸¸æ³³</code>ã€<code>éª‘è‡ªè¡Œè½¦</code>ã€æ‰“å¤ªææ‹³ã€è·³å¥èº«èˆã€åšéŸµå¾‹æ“ç­‰ã€‚</p>
<p>äººä½“è¿åŠ¨æ˜¯éœ€è¦èƒ½é‡çš„ï¼Œå¦‚æœèƒ½é‡æ¥è‡ªç»†èƒå†…çš„æœ‰æ°§ä»£è°¢ï¼ˆæ°§åŒ–ååº”ï¼‰ï¼Œå°±æ˜¯æœ‰æ°§è¿åŠ¨ï¼›ä½†è‹¥èƒ½é‡æ¥è‡ª<strong>æ— æ°§é…µè§£</strong>ï¼Œå°±æ˜¯æ— æ°§è¿åŠ¨ã€‚</p>
<p>æœ‰æ°§ä»£è°¢æ—¶ï¼Œå……åˆ†æ°§åŒ–1ä¸ªåˆ†å­è‘¡è„ç³–ï¼Œèƒ½äº§ç”Ÿ38ä¸ªATPçš„èƒ½é‡ï¼›<br>
è€Œåœ¨æ— æ°§é…µè§£æ—¶ï¼Œ1ä¸ªåˆ†å­çš„è‘¡è„ç³–ä»…äº§ç”Ÿ2ä¸ªATPã€‚</p>
<p>æœ‰æ°§è¿åŠ¨æ—¶è‘¡è„ç³–ä»£è°¢åç”Ÿæˆæ°´å’ŒäºŒæ°§åŒ–ç¢³ï¼Œå¯ä»¥é€šè¿‡å‘¼å¸å¾ˆå®¹æ˜“è¢«æ’å‡ºä½“å¤–ï¼Œå¯¹äººä½“æ— å®³ã€‚<br>
ç„¶è€Œåœ¨é…µè§£æ—¶äº§ç”Ÿå¤§é‡ä¹³é…¸ç­‰ä¸­é—´ä»£è°¢äº§ç‰©ã€‚</p>
<p>ä¸¤è€…åŒºåˆ«ï¼šåœ¨å¢åŠ è‚Œè‚‰åŠ›é‡æ–¹é¢ï¼Œæ— æ°§è¿åŠ¨çš„è´¡çŒ®è¾ƒå¤§ã€‚</p>
<p>ä¸€é¡¹æœ€æ–°ç ”ç©¶æ˜¾ç¤º,æ¡åŠ›ä¸å¤Ÿçš„äººæ›´æœ‰å¯èƒ½ç½¹æ‚£å¿ƒè„ç—…æˆ–è€…ä¸­é£,ä¸”æ¡åŠ›æŸå¤±è¶Šå¤§,é£ é™©è¶Šé«˜ã€‚</p>
<p>æŸå›½ä¸€é¡¹ç ”ç©¶äººå‘˜èŠ±äº†4å¹´æ—¶é—´è·Ÿè¸ªè°ƒæŸ¥äº†17ä¸ªå›½å®¶å¹´é¾„åœ¨35~70å²çš„14ä¸‡äºº,å¹¶é‡‡ç”¨æ‰‹æŒè®¾å¤‡å¯¹å—è¯•è€…çš„æ¡åŠ›è¿›è¡Œäº†è¡¡é‡ã€‚</p>
<p>ç»“æœè¡¨æ˜,æ¡åŠ›æ¯ä¸‹é™5å…¬ æ–¤,è·Ÿè¿åŠ¨å¯†åˆ‡ç›¸å…³çš„ [2]  å¿ƒè¡€ç®¡ç–¾ç—…é£é™©æˆ–ç”±å…¶ä»–åŸå› å¯¼è‡´çš„å¾ªç¯ç³»ç»Ÿç–¾ç—…å°±ç›¸åº”å¢åŠ 17%ã€‚</p>
<p>äººä½“é¢„å­˜çš„ATPèƒ½é‡åªèƒ½ç»´æŒæé™å¼ºåº¦è¿åŠ¨å¤§çº¦2ç§’ï¼Œéšåç”±CPåˆæˆATPï¼Œå¤§çº¦èƒ½ç»´æŒ6ç§’ï¼Œåˆè®¡8ç§’å·¦å³ã€‚<br>
ä¹Ÿå°±æ˜¯è¯´ï¼Œå…¨é€Ÿè·‘ä¸åˆ°ä¸€ç™¾ç±³å³å‘Šç½„ï¼Œè·‘äºŒç™¾ç±³æ—¶åé¢çš„ä¸€ç™¾ç±³ï¼Œå¿…é¡»ç”±è¡€ç³–åœ¨æ— æ°§çŠ¶æ€ä¸‹ï¼Œè¿…é€Ÿåˆæˆæ–°çš„çƒ­èƒ½ç‰©è´¨ATPæ¥æä¾›èƒ½é‡ï¼Œå…¶å‰¯äº§å“æ˜¯ä¹³é…¸ã€‚<br>
è·‘äºŒç™¾ç±³æˆ–å››ç™¾ç±³ã€ä¸€ç™¾ç±³æ¸¸æ³³ã€ç½‘çƒå’Œè¶³çƒç­‰è¿åŠ¨ï¼Œæ˜¯åˆ©ç”¨è‚Œç³–åŸæ— æ°§åˆ†è§£æ‰€æä¾›çš„èƒ½é‡ï¼Œæ•…è¿åŠ¨åè‚Œè‚‰é‡Œç´¯ç§¯å¤§é‡ä¹³é…¸ï¼Œä¹³é…¸å †ç§¯æ˜¯è¿åŠ¨åå¼•èµ·è‚Œè‚‰ç—›çš„åŸå› ä¹‹ä¸€ã€‚</p>
<p>è‚Œç³–åŸæ— æ°§åˆ†è§£æ‰€æä¾›çš„èƒ½é‡ï¼Œåªèƒ½ç»´æŒä¸€åˆ†é’Ÿå·¦å³ï¼Œè·‘å®Œå››ç™¾ç±³åå°±å…¨éƒ¨ç”¨å®Œã€‚</p>
<p>è·‘å…«ç™¾ç±³æ—¶ï¼Œåé¢çš„å››ç™¾ç±³ï¼Œå¿…é¡»ç”±ç³–ã€è„‚è‚ªé…¸å’Œæ°¨åŸºé…¸åœ¨æœ‰æ°§çŠ¶æ€ä¸‹ï¼Œåˆæˆæ–°çš„çƒ­èƒ½ç‰©è´¨ATPæ¥æä¾›èƒ½é‡ï¼Œè€Œç³–ç”±ç³–åŸåˆ†è§£åä¾›åº”ï¼Œè„‚è‚ªé…¸ç”±è„‚è‚ªåˆ†è§£åä¾›åº”ï¼Œæ°¨åŸºé…¸ç”±è›‹ç™½è´¨åˆ†è§£åä¾›åº”ï¼Œè¿™æ•´ä¸ªè¿‡ç¨‹éœ€è¦æ°§æ°”ï¼Œä¹Ÿå°±æ˜¯é æ°§æ°”ç‡ƒçƒ§ç³–ã€è„‚è‚ªå’Œè›‹ç™½è´¨æ¥ç”Ÿäº§çƒ­èƒ½ç‰©è´¨ATPï¼Œä¾›åº”åæ®µè¿åŠ¨æ‰€éœ€çš„çƒ­é‡ï¼Œè¿™åæ®µçš„è¿åŠ¨å°±æ˜¯æœ‰æ°§è¿åŠ¨ã€‚</p>
<p>è·‘å…«ç™¾ç±³æˆ–ä¸€åƒäº”ç™¾ç±³ã€äºŒç™¾å’Œå››ç™¾ç±³æ¸¸æ³³ã€æ‹³å‡»ç­‰è¿åŠ¨ï¼Œéƒ½éœ€è¦å¼€å§‹åˆ©ç”¨æ°§æ°”ç‡ƒçƒ§ç³–åŸã€è„‚è‚ªå’Œè›‹ç™½è´¨ï¼Œæ•…æ­¤ç±»è¿åŠ¨çš„åæ®µéƒ½æ˜¯æœ‰æ°§è¿åŠ¨ï¼Œä½œä¸ºæœ‰æ°§è¿åŠ¨ï¼Œå¿ƒç‡ä¸€èˆ¬åœ¨<strong>130æ¬¡/åˆ†</strong>ä¸ºæœ€ä½³ã€‚</p>
<p>è¿åŠ¨çš„å‰æ®µå¤§çº¦äº”åˆ†é’Ÿå…ˆçƒ§<strong>ç³–åŸ</strong>ï¼Œè¿åŠ¨æŒç»­è¶Šä¹…ä¼šçƒ§æ‰è¶Šå¤šçš„è„‚è‚ªï¼Œåªè¦æŒç»­<strong>åŠå°æ—¶è‡³ä¸€å°æ—¶</strong>ï¼Œæ‰€æ¶ˆè€—çƒ­é‡çš„äº”æˆï¼Œå°±ç”±ç‡ƒçƒ§<strong>è„‚è‚ª</strong>æ¥ä¾›åº”ã€‚</p>
<p>ä¸¤è€…é€‰æ‹©ï¼šè‡³äºé€‰æ‹©æœ‰æ°§è¿åŠ¨è¿˜æ˜¯æ— æ°§è¿åŠ¨ï¼Œé¦–å…ˆè¦çœ‹è‡ªå·±çš„é”»ç‚¼ç›®çš„æ˜¯ä»€ä¹ˆå’Œä¸ªäººçš„å®é™…æƒ…å†µã€‚<br>
æœ‰æ°§è¿åŠ¨çš„å¼ºåº¦ç›¸å¯¹è¾ƒä½ï¼Œæ¯”è¾ƒå®‰å…¨ï¼Œæœºä½“å„å™¨å®˜çš„è´Ÿè·ä¹Ÿç›¸å¯¹è¾ƒå°ï¼Œä¸æ˜“å‡ºç°ä¼¤å®³äº‹æ•…ï¼›<br>
è€Œæ— æ°§è¿åŠ¨å¼ºåº¦ç›¸å¯¹é«˜ï¼Œæœºä½“å„å™¨å®˜çš„æ‰¿å—çš„è´Ÿè·ä¹Ÿæ˜¯ç›¸å¯¹è¾ƒå¤§ï¼Œå¯ä»¥æ›´å¥½åœ°æé«˜æœºä½“çš„å·¥ä½œèƒ½åŠ›ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæƒ³è¦<strong>æé«˜è‡ªå·±çš„å¿ƒè‚ºæœºèƒ½</strong>ï¼Œé€‰æ‹©æœ‰æ°§è¿åŠ¨å°±æ¯”è¾ƒå¥½ã€‚<br>
è€Œå¦‚æœä½ ç°åœ¨åªèƒ½ä¸¾èµ·60æ–¤çš„é‡ç‰©ï¼Œä½ æƒ³è¦æé«˜æ‚¨çš„åŠ›é‡ï¼Œä¸¾èµ·70æ–¤çš„é‡ç‰©ï¼Œé‚£ä¹ˆä½ å°±è¦é€‰æ‹©æ— æ°§è¿åŠ¨äº†ã€‚<br>
æ— æ°§è¿åŠ¨å¯¹äºå¡‘é€ è‚Œè‚‰çš„çº¿æ¡ï¼Œå¢åŠ è‚Œè‚‰åŠ›é‡è€Œè¨€æ˜¯é¦–é€‰çš„ã€‚</p>
<h3 id="99-3-æœ‰æ°§è¿åŠ¨ï¼šaerobic-exercise"><a class="header-anchor" href="#99-3-æœ‰æ°§è¿åŠ¨ï¼šaerobic-exercise">ğŸŒ³</a>99.3 æœ‰æ°§è¿åŠ¨ï¼šAerobic exercise</h3>
<p>æ˜¯ä¸æ˜¯â€œæœ‰æ°§è¿åŠ¨â€ï¼Œè¡¡é‡çš„æ ‡å‡†æ˜¯å¿ƒç‡ã€‚å¿ƒç‡ä¿æŒåœ¨<strong>150æ¬¡/åˆ†é’Ÿ</strong>çš„è¿åŠ¨é‡ä¸ºæœ‰æ°§è¿åŠ¨ï¼Œå› ä¸ºæ­¤æ—¶è¡€æ¶²å¯ä»¥ä¾›ç»™å¿ƒè‚Œè¶³å¤Ÿçš„æ°§æ°”ï¼›<br>
å› æ­¤ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯å¼ºåº¦ä½ã€æœ‰èŠ‚å¥ã€æŒç»­æ—¶é—´è¾ƒé•¿ã€‚<br>
è¦æ±‚æ¯æ¬¡é”»ç‚¼çš„æ—¶é—´ä¸å°‘äº30åˆ†é’Ÿï¼Œæ¯å‘¨åšæŒ3åˆ°5æ¬¡ã€‚</p>
<p>è¿™ç§é”»ç‚¼ï¼Œæ°§æ°”èƒ½å……åˆ†ç‡ƒçƒ§ï¼ˆå³æ°§åŒ–ï¼‰ä½“å†…çš„ç³–åˆ†ï¼Œè¿˜å¯æ¶ˆè€—ä½“å†…è„‚è‚ªï¼Œå¢å¼ºå’Œæ”¹å–„å¿ƒè‚ºåŠŸèƒ½ï¼Œé¢„é˜²éª¨è´¨ç–æ¾ï¼Œè°ƒèŠ‚å¿ƒç†å’Œç²¾ç¥çŠ¶æ€ï¼Œæ˜¯å¥èº«çš„ä¸»è¦è¿åŠ¨æ–¹å¼ã€‚</p>
<p>å¥èº«ä»·å€¼</p>
<p>é€šè¿‡æœ‰è§„å¾‹çš„æœ‰æ°§è¿åŠ¨é”»ç‚¼ï¼Œäººä½“<strong>å¿ƒè„åŠŸèƒ½</strong>æ›´å¼ºï¼Œ<strong>è„‰æè¾“å‡ºé‡</strong>æ›´å¤šï¼Œåˆ™<strong>ä¾›æ°§èƒ½åŠ›</strong>æ›´å¼ºï¼Œ<strong>è„‰ææ•°</strong>ä¼šé€‚å½“å‡å°‘ã€‚<br>
ä¸€ä¸ªå¿ƒè‚ºåŠŸèƒ½å¥½çš„äººå¯ä»¥å‚åŠ è¾ƒé•¿æ—¶é—´çš„æœ‰æ°§è¿åŠ¨ï¼Œä¸”è¿åŠ¨æ¢å¤ä¹Ÿè¾ƒå¿«ã€‚</p>
<p>æ’è¡Œæ¦œ<br>
NO1ã€æ¸¸æ³³<br>
è¿åŠ¨ä¼˜ç‚¹ï¼šæ¸¸æ³³éœ€å…‹æœæ°´çš„é˜»åŠ›è€Œéé‡åŠ›ï¼Œè‚Œè‚‰å’Œå…³èŠ‚ä¸æ˜“å—æŸï¼Œèƒ½æœ‰æ•ˆä¿æŠ¤è†å…³èŠ‚;å†·æ°´ç¯å¢ƒä¸‹æ¸¸æ³³çƒ­é‡æ¶ˆè€—å¤§ï¼Œå±äºå‡è‚¥æ•ˆæœæ˜¾è‘—çš„è¿åŠ¨ï¼›å½“é…åˆèŠ‚é£Ÿæ—¶ï¼Œæ•ˆæœæ›´åŠ æ˜¾è‘—ã€‚<br>
é€‚å®œäººç¾¤ï¼šè†å…³èŠ‚å—æŸï¼›ä½“é‡ä¸¥é‡è¶…æ ‡ï¼›å‡è‚¥ï¼›å¢å¼ºä½“è´¨çš„æ—ç¾¤ã€‚<br>
è¿åŠ¨å‘¨æœŸï¼šæ¯å‘¨<strong>3ï½4æ¬¡</strong>ï¼Œæ¯æ¬¡<strong>30ï½60åˆ†é’Ÿ</strong>ã€‚<br>
çƒ­é‡æ¶ˆè€—ï¼šçº¦650åƒå¡/å°æ—¶</p>
<p>NO2ã€æ…¢è·‘<br>
è¿åŠ¨ä¼˜ç‚¹ï¼šæé«˜ç¡çœ è´¨é‡ï¼Œé€šè¿‡è·‘æ­¥ï¼Œå¤§è„‘çš„ä¾›è¡€ã€ä¾›æ°§é‡å¯ä»¥æå‡20%ï¼Œè¿™æ ·å¤œæ™šçš„ç¡çœ è´¨é‡ä¹Ÿä¼šè·Ÿç€æé«˜ï¼›â€œé€šé£â€ä½œç”¨ï¼Œåœ¨è·‘æ­¥çš„è¿‡ç¨‹ä¸­ï¼Œè‚ºéƒ¨çš„å®¹é‡å¹³å‡ä»5.8Lä¸Šå‡åˆ°6.2Lï¼ŒåŒæ—¶ï¼Œè¡€æ¶²ä¸­æ°§æ°”çš„æºå¸¦é‡ä¹Ÿä¼šå¤§å¤§å¢åŠ ï¼›æé«˜å¿ƒè„åŠŸèƒ½ï¼Œé•¿æœŸæ…¢è·‘å¯ä½¿å®‰é™<strong>å¿ƒç‡å‡æ…¢</strong>ã€<strong>è¡€ç®¡å£çš„å¼¹æ€§å¢åŠ </strong>ï¼›è§£å‹ï¼Œæ…¢è·‘å¯ä»¥ç¼“è§£ç´§å¼ å’Œç„¦è™‘ï¼Œæœ‰ç›Šå¥åº·ã€‚<br>
é€‚å®œäººç¾¤ï¼šå‡è‚¥ï¼Œéœ€è¦ç¼“è§£å‹åŠ›ï¼Œç¼“è§£äºšå¥åº·ï¼Œä»¥åŠé¢„é˜²å¿ƒè¡€ç®¡ç–¾ç—…çš„æ—ç¾¤ã€‚<br>
è¿åŠ¨å‘¨æœŸï¼šæ¯å‘¨<strong>3ï½4æ¬¡</strong>ï¼Œæ¯æ¬¡<strong>40ï½60åˆ†é’Ÿ</strong>ã€‚<br>
çƒ­é‡æ¶ˆè€—ï¼šçº¦650åƒå¡/å°æ—¶</p>
<p>å¥èº«è§‚ç‚¹</p>
<p>åº“ç€å¯è°“ç¾å›½çŸ¥åçš„é¢„é˜²åŒ»å­¦å¤§è…•ï¼Œä»–é•¿æœŸæ‹…ä»»ç¾å›½æ€»ç»Ÿçš„ç§äººåŒ»ç”Ÿï¼Œæ›¾æ˜¯â€œæœ‰æ°§å¥èº«è¿åŠ¨â€çš„é¦–åˆ›è€…ã€‚<br>
ä»–è®¤ä¸ºæ¯ä¸ªäººç”Ÿå‘½çš„é•¿çŸ­å’Œè´¨é‡å®Œå…¨å–å†³äºä¸ªäººå¯¹ç–¾ç—…çš„é¢„é˜²ï¼Œè€Œä¸æ˜¯åŒ»ç”Ÿå’Œå…¶ä»–ä»€ä¹ˆäººæ‰€èƒ½å·¦å³å¾—äº†çš„ï¼›ä¸é¢„é˜²ç›¸æ¯”ï¼Œä»»ä½•æŒ½æ•‘ç”Ÿå‘½çš„åŒ»ç–—æªæ–½éƒ½æ˜¾å¾—ä¸ºæ—¶å·²æ™šã€‚</p>
<p>åº“ç€å‡­è‡ªå·±çš„å®è·µç»éªŒï¼Œå‘äººä»¬äº®æ˜äº†è‡ªå·±å¯¹å¥èº«è¿åŠ¨çš„è§‚ç‚¹ã€‚<br>
1.é€‚åº¦é”»ç‚¼ã€‚<br>
å¤§è¿åŠ¨é‡çš„å¥èº«è¿åŠ¨æœ‰å¯èƒ½ä¼šæ…¢æ…¢æŸä¼¤ä½ çš„èº«ä½“ï¼Œæ¯”å¦‚ï¼Œæ¯å‘¨è·‘æ­¥è¶…è¿‡15è‹±é‡Œå°±æœ‰äº›è¿‡é‡äº†ã€‚<br>
å»ºè®®æ¯å‘¨é”»ç‚¼4è‡³5æ¬¡ï¼Œæ¯æ¬¡30åˆ†é’Ÿã€‚<br>
åº“ç€è®¤ä¸ºï¼Œåªè¦é€‚é‡è¿åŠ¨ï¼Œå°±å¯ä»¥æœ‰æ•ˆé™ä½æ‚£å¿ƒè¡€ç®¡ç—…å’Œç™Œç—‡çš„å¯èƒ½æ€§ã€‚</p>
<p>å‡è‚¥</p>
<p>!<br>
7.åº”è¯¥æ€æ ·å®‰æ’åŠ›é‡ç»ƒä¹ å’Œæœ‰æ°§é”»ç‚¼å‘¢ï¼Ÿ<br>
æœ‰æ°§è¿åŠ¨æ¯”èµ·åŠ›é‡è®­ç»ƒæ¶ˆè€—çš„çƒ­é‡è¦å¤šï¼ŒåŠ›é‡è®­ç»ƒåªæ˜¯ä¸ºäº†é”»ç‚¼è‚Œè‚‰ã€å¢åŠ è‚Œè‚‰ï¼Œçƒ­é‡æ¶ˆè€—è¦å°‘ï¼Œ<br>
æ‰€ä»¥åº”è¯¥æŠŠ<strong>æœ‰æ°§è¿åŠ¨</strong>æ”¾åœ¨<strong>åŠ›é‡è®­ç»ƒ</strong><code>å</code>è¿›è¡Œï¼Œè¿™æ ·å®‰æ’ï¼Œå°±å¯ä»¥ä¿è¯æ—¢æœ‰ä½“åŠ›è¿›è¡Œæœ‰æ°§è¿åŠ¨ï¼Œåˆèƒ½è¿›è¡ŒåŠ›é‡è®­ç»ƒã€‚</p>
<p>æœ‰æ°§è¿åŠ¨(3å¼ )<br>
æœ‰æ°§è¿åŠ¨éœ€è¦å¤§é‡å‘¼å¸ç©ºæ°”ï¼Œå¯¹å¿ƒã€è‚ºæ˜¯å¾ˆå¥½çš„é”»ç‚¼ï¼Œå¯ä»¥å¢å¼ºè‚ºæ´»é‡å’Œå¿ƒè„åŠŸèƒ½ã€‚<br>
é•¿æœŸåšæŒæœ‰æ°§è¿åŠ¨èƒ½<code>å¢åŠ ä½“å†…è¡€çº¢è›‹ç™½çš„æ•°é‡</code>ï¼Œ<code>æé«˜æœºä½“æŠµæŠ—åŠ›</code>ï¼Œ<code>æŠ—è¡°è€</code>ï¼Œ<code>å¢å¼ºå¤§è„‘çš®å±‚</code>çš„å·¥ä½œæ•ˆç‡å’Œ<code>å¿ƒè‚ºåŠŸèƒ½</code>ï¼Œå¢åŠ è„‚è‚ªæ¶ˆè€—ï¼Œ<code>é˜²æ­¢åŠ¨è„‰ç¡¬åŒ–</code>ï¼Œé™ä½å¿ƒè„‘è¡€ç®¡ç–¾ç—…çš„å‘ç—…ç‡ã€‚</p>
<p><code>â…¡å‹ç³–å°¿ç—…æ‚£è€…</code>ã€<code>è‚¥èƒ–ç—‡æ‚£</code>è€…ä»¥åŠ<code>è„‚è‚ªè‚æ‚£è€…</code>ï¼Œä¸€å®šè¦åšæœ‰æ°§è¿åŠ¨ï¼Œ<br>
æ‚£æœ‰<code>å¿ƒå¾‹ä¸é½</code>ã€<code>å¿ƒè„‘åŠ¨è„‰è¡€ç®¡ç¡¬åŒ–</code>çš„äººï¼Œä»¥åŠå¹´é¾„å¤§çš„äººï¼Œä¹Ÿéƒ½åº”è¯¥åšæœ‰æ°§è¿åŠ¨ã€‚</p>
<p>å¦‚æœæ˜¯ä¸ºäº†å¼ºå£®è‚Œè‚‰ã€å¥ç¾ä½“å½¢ï¼Œé¢„é˜²æ¤é—´ç›˜çªå‡ºç—‡ã€é¢ˆæ¤ç—…ä»¥åŠéª¨è´¨ç–æ¾ã€éª¨è´¨è½¯åŒ–çš„äººï¼Œåº”å½“åšæ— æ°§è¿åŠ¨ã€‚</p>
<p>å¦‚æœå¿ƒç‡è¾¾åˆ°<strong>150ï½160æ¬¡/åˆ†é’Ÿ</strong>ï¼Œæ­¤æ—¶è¡€æ¶²å¯¹å¿ƒè‚Œä¾›æ°§å·²ä¸å……åˆ†ï¼Œä¾¿ä¸ºåŠæœ‰æ°§è¿åŠ¨ã€‚</p>
<p>å¦‚æœå¿ƒç‡è¾¾åˆ°<strong>160æ¬¡/åˆ†é’Ÿ</strong>ä»¥ä¸Šï¼Œä¾¿ä¸ºæ— æ°§è¿åŠ¨äº†ï¼Œå³è¡€æ¶²ä¸­çš„æ°§æ°”å¯¹å¿ƒè‚Œå·²æ˜¯ä¾›ä¸åº”æ±‚äº†ã€‚</p>
<p>æ–°é™ˆä»£è°¢éœ€è¦æ°§æ°”çš„å‚ä¸ï¼Œæœ‰æ°§è¿åŠ¨ç”±äºæ°§æ°”å……è¶³ï¼Œå¯ä½¿ä½“å†…è¥å…»ç‰©è´¨ä»£è°¢å½»åº•ï¼Œå³è¾¾åˆ°æœ€ç»ˆä»£è°¢â€”â€”è¥å…»ç‰©è´¨åˆ†è§£ä¸ºäºŒæ°§åŒ–ç¢³å’Œæ°´ã€‚</p>
<p>æœ‰æ°§è¿åŠ¨èƒ½å¤Ÿè¾¾åˆ°ç˜¦èº«å‡è‚¥çš„æ•ˆæœï¼Œæ™šé¥­åè¿›è¡Œ<strong>åŠå°æ—¶</strong>çš„æ•£æ­¥ï¼Œå°±èƒ½å¾ˆå¥½åœ°å°†æ™šé¥­ä¸­çš„è„‚è‚ªè¿›è€Œè›‹ç™½è´¨è¿›è¡Œè°ƒèŠ‚æ¶ˆè€—ã€‚</p>
<p>å‡è‚¥</p>
<p>1ã€å¿ƒç‡<br>
<strong>è„‚è‚ª</strong>çš„<strong>åˆ†è§£ä»£è°¢</strong>æ˜¯ä¸€ç³»åˆ—å¤æ‚çš„ç”ŸåŒ–ååº”ï¼Œè€Œå¿ƒç‡åæ˜ çš„æ˜¯<strong>äº¤æ„Ÿç¥ç»</strong>çš„å…´å¥‹åº¦ï¼Œäº¤æ„Ÿç¥ç»çš„å…´å¥‹ä¿ƒè¿›äº†ä¸€ç³»åˆ—<strong>è„‚è§£æ¿€ç´ </strong>çš„åˆ†æ³Œï¼Œä»è€Œæ´»åŒ–<strong>è„‚è§£é…¶</strong>ï¼Œä½¿å‚¨å­˜åœ¨<strong>è„‚è‚ªç»†èƒç»„ç»‡</strong>é‡Œçš„è„‚è‚ªåˆ†è§£ä¸ºæ¸¸ç¦»<strong>è„‚é…¸å’Œç”˜æ²¹</strong>ï¼Œè€Œè„‚é…¸åœ¨æ°§ä¾›ç»™å……è¶³çš„æ¡ä»¶ä¸‹ï¼Œå¯åˆ†è§£æˆäºŒæ°§åŒ–ç¢³å’Œæ°´å¹¶é‡Šæ”¾å¤§é‡çš„èƒ½é‡ã€‚</p>
<p>æœ€å¤§å¿ƒç‡ï¼šMHRä¸º220ï¼ä½ çš„å¹´é¾„ï¼Œæœ€ä½å¿ƒç‡ï¼Œä¸€èˆ¬åœ¨æ—©æ™¨æµ‹è¯•ã€‚</p>
<p>ä¿ç•™å¿ƒç‡å°±æ˜¯æœ€å¤§å¿ƒç‡ï¼æœ€ä½å¿ƒç‡ã€‚</p>
<p>å‡è‚¥å¿ƒç‡ä¹Ÿå°±æ˜¯æœ‰æ°§è¿åŠ¨çš„å¿ƒç‡èŒƒå›´åº”è¯¥æ˜¯æœ€ä½å¿ƒç‡+ä¿ç•™å¿ƒç‡Ã—50%ï½60%ï¼š124</p>
<p>é”»ç‚¼è€åŠ›çš„å¿ƒç‡èŒƒå›´æ˜¯æœ€ä½å¿ƒç‡+ä¿ç•™å¿ƒç‡Ã—60%ï½70%ï¼š136.8</p>
<p>2ã€æ—¶é—´<br>
æ ¹æ®ç¾å›½è¿åŠ¨åŒ»å­¦çš„ç ”ç©¶ï¼Œæœ‰æ°§è¿åŠ¨<strong>å‰15åˆ†é’Ÿ</strong>ï¼Œç”±<strong>è‚ç³–å…ƒ</strong>ä½œä¸ºä¸»è¦èƒ½æºä¾›åº”ï¼Œ<strong>è„‚è‚ª</strong>ä¾›èƒ½åœ¨è¿åŠ¨å<strong>15ï½20åˆ†é’Ÿ</strong>æ‰å¼€å§‹å¯åŠ¨ï¼Œ</p>
<p>æœ‰æ°§è¿åŠ¨</p>
<p>2ã€æ¥è¿‘è€Œä¸è¶…è¿‡â€œé¶å¿ƒç‡â€ä¸€èˆ¬æ¥è¯´ï¼Œé¶å¿ƒç‡ä¸º170ï¼å¹´é¾„çš„æ•°å€¼ã€‚<br>
å¦‚æœä½ 60å²ï¼Œé¶å¿ƒç‡å°±æ˜¯170ï¼60=110ï¼ˆæ¬¡/åˆ†ï¼‰ã€‚ï¼š138<br>
3ã€è‡ªæˆ‘æ„Ÿè§‰æ˜¯æŒæ¡è¿åŠ¨é‡å’Œè¿åŠ¨å¼ºåº¦çš„é‡è¦æŒ‡æ ‡ï¼Œ</p>
<p>åŒ…æ‹¬è½»åº¦å‘¼å¸æ€¥ä¿ƒã€æ„Ÿåˆ°æœ‰ç‚¹å¿ƒè·³ã€å‘¨èº«å¾®çƒ­ã€é¢è‰²å¾®çº¢ã€æ´¥æ´¥å°æ±—ï¼Œè¿™è¡¨æ˜è¿åŠ¨é€‚é‡ï¼›<br>
å¦‚æœæœ‰æ˜æ˜¾çš„å¿ƒæ…Œã€<strong>æ°”çŸ­</strong>ã€å¿ƒå£å‘çƒ­ã€<strong>å¤´æ™•</strong>ã€å¤§æ±—ã€ç–²æƒ«ä¸å ªï¼Œè¡¨æ˜è¿åŠ¨è¶…é™ã€‚</p>
<p>5ã€æ”¾æ¾ä¸çƒ­èº«æœ‰åŒæ ·çš„ä½œç”¨ï¼Œ<br>
åœ¨è¿åŠ¨ä¸­ï¼Œè¡€æ¶²å¾ªç¯åŠ å¿«ï¼Œè¡€æ¶²çš„é‡ä¹Ÿå¢åŠ äº†ï¼Œç‰¹åˆ«æ˜¯å››è‚¢éƒ¨åˆ†ã€‚<br>
å¦‚æœé©¬ä¸Šåœæ­¢è¿åŠ¨ï¼Œ<strong>è¡€æ¶²</strong>ä¼š<strong>å›¤ç§¯</strong>åœ¨<strong>ä¸‹è‚¢</strong>è€Œç»™å¿ƒè„é€ æˆå¤šä½™çš„è´Ÿæ‹…ã€‚<br>
ä¸¥é‡æ—¶ä¼šå½±å“åˆ°å¤§è„‘ä¾›è¡€ï¼Œç”šè‡³å‡ºç°çœ©æ™•å’Œå¤´æ˜ã€‚æ‰€ä»¥è¿åŠ¨ç›®çš„è¾¾åˆ°ååº”è¯¥æœ‰5ï½10åˆ†é’Ÿçš„æ”¾æ¾ï¼Œä¹Ÿå°±æ˜¯é€æ­¥å‡å°è¿åŠ¨å¼ºåº¦ï¼Œæ…¢æ…¢åœ°æ¢å¤åˆ°å®‰é™çŠ¶æ€ã€‚<br>
ä¸€å‘¨é‡</p>
<p>å…³äºè¿åŠ¨çš„é¢‘ç‡ï¼Œç¾å›½è¿åŠ¨åŒ»å­¦ä¼šæ¨è<strong>æ­£å¸¸äºº</strong>åº”è¯¥<strong>æ¯å‘¨è¿åŠ¨2ï½5æ¬¡</strong></p>
<p>ä¸€èˆ¬äººæ…¢è·‘ä¸€åˆ†é’Ÿæ¶ˆè€—15åƒå¡å·¦å³çƒ­é‡ï¼ˆä½“é‡è¶Šå¤§æ¶ˆè€—è¶Šå¤šï¼‰ï¼Œè€Œä¸€å…¬æ–¤ï¼ˆ1000å…‹ï¼‰çš„è„‚è‚ªæ˜¯4500åƒå¡ã€‚<br>
å¦‚æœæ¯å¤©æ…¢è·‘30åˆ†é’Ÿï¼Œåœ¨é¥®é£Ÿæ²¡æœ‰å˜åŒ–çš„æƒ…å†µä¸‹10å¤©å¯å‡ä¸€å…¬æ–¤ã€‚</p>
<p>ç ”ç©¶å‘ç°ï¼Œ<strong>ä¸¤å°æ—¶</strong>ä¸­é‡çš„<strong>æœ‰æ°§</strong>é”»ç‚¼å¯è€—å°½ä½“å†…90%çš„<strong>ç™½æ°¨é…¸</strong>â€”â€”å¯¹è‚Œè‚‰ç”Ÿé•¿éå¸¸é‡è¦çš„ä¸€ç§æ°¨åŸºé…¸ã€‚</p>
<p>è¦æ”¹å˜è„‚è‚ªä¸è‚Œè‚‰æ¯”ç‡ï¼Œåº”è¯¥é‡‡ç”¨ç›¸å¯¹é‡äº›çš„åŠ›é‡ç»ƒä¹ å‘å±•å¹¶ä¿æŒè‚Œè‚‰æ€»é‡ã€‚åŠ›é‡ç»ƒä¹ ä¹‹åï¼Œè¿›è¡Œä¸­åˆ°é«˜å¼ºåº¦çš„æœ‰æ°§é”»ç‚¼ã€‚</p>
<p>æœ‰åˆ©å¿ƒè„<br>
äº‹å®ï¼šç¾å›½å¿ƒè„åä¼šæŒ‡å‡ºï¼Œæ¯å‘¨3ï½4æ¬¡ã€æ¯æ¬¡è‡³å°‘30åˆ†é’Ÿï¼Œä»¥æœ€å¤§å¿ƒç‡çš„50%ï½75%é”»ç‚¼çš„æœ‰æ°§è¿åŠ¨å¯¹å¿ƒè„æœ€æœ‰åˆ©ã€‚<br>
å®ƒå°†å¯¹å¿ƒè¡€ç®¡ç³»ç»Ÿå’Œå¿ƒè‚ºåŠŸèƒ½æœ‰ç§¯æçš„æ”¹å–„ä½œç”¨ï¼Œå¹¶æ˜¾è‘—å‡å°‘ç›¸å…³ç–¾ç—…çš„å±é™©ã€‚<br>
ç¾å›½å¿ƒè„åä¼šå»ºè®®ï¼Œåˆç»ƒè€…çš„è¿åŠ¨å¿ƒç‡ä»¥æœ€å¤§å¿ƒç‡çš„50%ä¸ºå®œï¼Œå‡ å‘¨åï¼Œå¼ºåº¦é€æ¸å¢åŠ åˆ°æœ€å¤§å¿ƒç‡çš„75%<br>
ã€‚æ€»ä¹‹ï¼Œè®­ç»ƒå¼ºåº¦è¶Šå¤§ã€‚ä½ çš„ä½“å‹ä¿æŒå¾—è¶Šå¥½ã€‚å› ä¸ºå¿ƒè„ä¸å…¶ä»–éƒ¨ä½ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä¸€å—è‚Œè‚‰ï¼Œå®ƒåŒæ ·éœ€è¦å¤§å¼ºåº¦çš„ç»ƒä¹ ï¼</p>
<p>æœ‰æ°§è¿åŠ¨æ–¹æ³•</p>
<p>3ã€åŒ€é€Ÿè·‘å¿ƒç‡æ§åˆ¶åœ¨æ¯åˆ†é’Ÿ150æ¬¡å·¦å³ï¼Œè´Ÿè·æ—¶é—´ä¿æŒåœ¨30åˆ†é’Ÿä»¥ä¸Šã€‚<br>
5ã€è·³ç»³3åˆ†é’Ÿï¼Œä¼‘æ¯1åˆ†é’Ÿï¼Œå†è¿›è¡Œä¸‹ä¸€ç»„çš„ç»ƒä¹ ã€‚æ¯æ¬¡è®­ç»ƒåš3ç»„å³å¯ã€‚å½“å—è®­è€…è§‰å¾—é€‚åº”æ­¤è¿åŠ¨é‡æ—¶ï¼Œå¯å»æ‰ä¸­é—´çš„ä¼‘æ¯æ—¶é—´ï¼Œè¿ç»­è·³3åˆ†é’Ÿã€‚<br>
6ã€ç©ºå‡»3åˆ†é’Ÿä¸ºä¸€ç»„ï¼Œåš3ï½5ç»„ã€‚</p>
<p>ç»¼è¿°<br>
æœ‰æ°§è¿åŠ¨æ˜¯å¢å¼ºäººä½“å¸å…¥ä¸ä½¿ç”¨æ°§æ°”çš„è€ä¹…è¿åŠ¨ã€‚å®ƒçš„è¿åŠ¨ç‰¹ç‚¹æ˜¯è´Ÿè·é‡è½»ã€æœ‰èŠ‚å¾‹æ„Ÿã€æŒç»­æ—¶é—´é•¿ã€‚è¿åŠ¨åŒ»å­¦æµ‹å®šï¼Œæœ‰æ°§è¿åŠ¨é€‚å®œçš„è¿åŠ¨è´Ÿè·ä¸º<br>
<strong>æ¯å‘¨4ï½5æ¬¡</strong>ï¼Œæ¯æ¬¡æŒç»­<strong>20ï½30åˆ†é’Ÿ</strong>ï¼Œè¿åŠ¨æ—¶å¿ƒç‡ä¸º<strong>120ï½135æ¬¡/åˆ†</strong></p>
]]></content>
      <categories>
        <category>å¥èº«</category>
        <category>ç”Ÿæ´»</category>
        <category>è¿åŠ¨</category>
      </categories>
      <tags>
        <tag>life</tag>
        <tag>gym</tag>
      </tags>
  </entry>
  <entry>
    <title>å…è´¹ é›¶åŸºç¡€è‡ªè¡ŒåŠ¨æ‰‹ pdfè½¬æ–‡å­—</title>
    <url>/2024/06/03/%E5%85%8D%E8%B4%B9-%E9%9B%B6%E5%9F%BA%E7%A1%80%E8%87%AA%E8%A1%8C%E5%8A%A8%E6%89%8B-pdf%E8%BD%AC%E6%96%87%E5%AD%97/</url>
    <content><![CDATA[<h1>å…è´¹ é›¶åŸºç¡€è‡ªè¡ŒåŠ¨æ‰‹ pdfè½¬æ–‡å­—</h1>
<h2 id="å·¥å…·"><a class="header-anchor" href="#å·¥å…·">ğŸŒ³</a>å·¥å…·</h2>
<p><a href="https://ocrmypdf.readthedocs.io/en/latest/index.html">ocrmypdf æ–‡æ¡£</a><br>
<a href="https://ocrmypdf.readthedocs.io/en/latest/installation.html">ocrmypdf æ–‡æ¡£ å®˜ç½‘å…·ä½“ä¸‹è½½æ•™ç¨‹</a><br>
<a href="https://ghostscript.com/releases/gsdnld.html">Ghostscript ä¸‹è½½åœ°å€</a></p>
<ul>
<li>Python 64-bit</li>
<li>Tesseract 64-bit</li>
<li>Ghostscript 64-bit</li>
</ul>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">winget install -e --id Python.Python.<span class="number">3</span>.<span class="number">11</span></span><br><span class="line">winget install -e --id UB-Mannheim.TesseractOCR</span><br><span class="line">python3 -m pip install ocrmypdf</span><br></pre></td></tr></table></figure>
<h2 id="å½“å‰ç›®å½•-æ‰¹é‡è½¬åŒ–pdfä¸ºå¯å¤åˆ¶æ–‡å­—çš„å›¾ç‰‡-æ‰§è¡Œä»£ç "><a class="header-anchor" href="#å½“å‰ç›®å½•-æ‰¹é‡è½¬åŒ–pdfä¸ºå¯å¤åˆ¶æ–‡å­—çš„å›¾ç‰‡-æ‰§è¡Œä»£ç ">ğŸŒ³</a>å½“å‰ç›®å½• æ‰¹é‡è½¬åŒ–pdfä¸ºå¯å¤åˆ¶æ–‡å­—çš„å›¾ç‰‡ æ‰§è¡Œä»£ç </h2>
<p><a href="batch.py">ä»£ç æ–‡ä»¶</a></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">python ./batch.py <span class="string">&#x27;.&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="batch-py-æºç "><a class="header-anchor" href="#batch-py-æºç ">ğŸŒ³</a><a href="http://batch.py">batch.py</a> æºç </h3>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> annotations</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ocrmypdf</span><br><span class="line"></span><br><span class="line"><span class="comment"># pylint: disable=logging-format-interpolation</span></span><br><span class="line"><span class="comment"># pylint: disable=logging-not-lazy</span></span><br><span class="line"></span><br><span class="line">script_dir = Path(__file__).parent</span><br><span class="line"><span class="built_in">print</span>(script_dir)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) &gt; <span class="number">1</span>:</span><br><span class="line">    start_dir = Path(sys.argv[<span class="number">1</span>])</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    start_dir = Path(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(start_dir)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) &gt; <span class="number">2</span>:</span><br><span class="line">    log_file = Path(sys.argv[<span class="number">2</span>])</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    log_file = script_dir.with_name(<span class="string">&#x27;ocr-tree.log&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(log_file)</span><br><span class="line"></span><br><span class="line">logging.basicConfig(</span><br><span class="line">    level=logging.INFO,</span><br><span class="line">    <span class="built_in">format</span>=<span class="string">&#x27;%(asctime)s %(message)s&#x27;</span>,</span><br><span class="line">    filename=log_file,</span><br><span class="line">    filemode=<span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">ocrmypdf.configure_logging(ocrmypdf.Verbosity.quiet)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> filename <span class="keyword">in</span> start_dir.glob(<span class="string">&quot;**/*.pdf&quot;</span>):</span><br><span class="line">    logging.info(<span class="string">f&quot;Processing <span class="subst">&#123;filename&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Processing <span class="subst">&#123;filename&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(filename)</span><br><span class="line">    output_file = <span class="string">f&quot;<span class="subst">&#123;filename&#125;</span>_tmp.pdf&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(output_file)</span><br><span class="line"></span><br><span class="line">    result = ocrmypdf.ocr(filename, output_file, deskew=<span class="literal">True</span>, language=[<span class="string">&quot;chi_sim&quot;</span>,<span class="string">&quot;eng&quot;</span>], jobs=<span class="number">2</span>, skip_text=<span class="literal">True</span>, progress_bar=<span class="literal">True</span>, optimize=<span class="number">1</span>, png_quality=<span class="number">30</span>, jpeg_quality=<span class="number">40</span>)</span><br><span class="line">    <span class="comment">#, jbig2_page_group_size=1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> result == ocrmypdf.ExitCode.already_done_ocr:</span><br><span class="line">        logging.error(<span class="string">&quot;Skipped document because it already contained text&quot;</span>)</span><br><span class="line">    <span class="keyword">elif</span> result == ocrmypdf.ExitCode.ok:</span><br><span class="line">        logging.info(<span class="string">&quot;OCR complete&quot;</span>)</span><br><span class="line">    logging.info(result)</span><br></pre></td></tr></table></figure>
<h2 id="æ±‡æ€»"><a class="header-anchor" href="#æ±‡æ€»">ğŸŒ³</a>æ±‡æ€»</h2>
<h3 id="ocrè¯†åˆ«pdf"><a class="header-anchor" href="#ocrè¯†åˆ«pdf">ğŸŒ³</a>OCRè¯†åˆ«pdf</h3>
<blockquote>
<p>ocrmypdf --force-ocr old.pdf new.pdf</p>
</blockquote>
<h3 id="é…åˆimg2pdf-æŠŠå›¾ç‰‡è½¬ä¸ºocrè¯†åˆ«çš„pdf"><a class="header-anchor" href="#é…åˆimg2pdf-æŠŠå›¾ç‰‡è½¬ä¸ºocrè¯†åˆ«çš„pdf">ğŸŒ³</a>é…åˆimg2pdfï¼ŒæŠŠå›¾ç‰‡è½¬ä¸ºOCRè¯†åˆ«çš„pdf</h3>
<blockquote>
<p>img2pdf --pagesize A4 page*.png | ocrmypdf - myfile.pdf</p>
</blockquote>
<h3 id="å¦‚æœä½¿ç”¨-poppler-å¾—å®‰è£…mscv"><a class="header-anchor" href="#å¦‚æœä½¿ç”¨-poppler-å¾—å®‰è£…mscv">ğŸŒ³</a>å¦‚æœä½¿ç”¨ poppler å¾—å®‰è£…MSCV</h3>
<ul>
<li>[ ] <a href="https://blog.csdn.net/sinat_37967865/article/details/102477235">æ•™ç¨‹</a></li>
<li>[ ] <a href="https://github.com/writecrow/ocr2text">ocr2text æ•™ç¨‹</a></li>
</ul>
<h3 id="æŠŠocrè¯†åˆ«è½¬ä¸ºtxtæ–‡æœ¬"><a class="header-anchor" href="#æŠŠocrè¯†åˆ«è½¬ä¸ºtxtæ–‡æœ¬">ğŸŒ³</a>æŠŠOCRè¯†åˆ«è½¬ä¸ºtxtæ–‡æœ¬</h3>
<p><a href="https://github.com/writecrow/ocr2text">è‹±æ–‡æ•™ç¨‹</a></p>
<p><a href="https://blog.csdn.net/m0_37576542/article/details/132315537">è¶…è¯¦ç»†è§£å†³pytesseract.pytesseract.TesseractNotFoundError: tesseract is not installed or itâ€˜s not in yoâ€¦</a></p>
<p><a href="https://pymupdf.readthedocs.io/en/latest/pixmap.html#Pixmap.pil_tobytes">pymupdf æ–‡æ¡£</a></p>
<p><a href="https://tesseract-ocr.github.io/tessdoc/Command-Line-Usage.html">tesseract-ocr ä½¿ç”¨æ–‡æ¡£</a><br>
ä¾‹å¦‚ï¼š</p>
<blockquote>
<p>tesseract.exe images/eurotext.png -l eng+deu</p>
</blockquote>
<ul>
<li>
<p>[ ] ä¸‹è½½ <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/">anaconda</a></p>
</li>
<li>
<p>[ ] ä¸‹è½½ <a href="https://github.com/UB-Mannheim/tesseract/wiki">tesseract-ocr</a> å®‰è£…ç¨‹åº <em><strong>è®°å¾—å‹¾é€‰ä¸­æ–‡æ”¯æŒåº“</strong></em></p>
</li>
<li>
<p>[ ] pip install pytesseract</p>
<ol>
<li>pytesseract å®é™…ä¸Šæ˜¯ä½¿ç”¨pythonä»£ç  æ‰§è¡Œ <code>tesseract.exe</code> ç¨‹åº æ‰€ä»¥ä¼ å‚æ–¹å¼è¿˜æ˜¯å‚è€ƒ <code>tesseract-ocr ä½¿ç”¨æ–‡æ¡£</code></li>
<li>å¦å¤–è¿˜éœ€è¦ ä¿®æ”¹ pytesseract åº“ä¸­ <code>tesseract.exe</code> çš„æ‰§è¡Œè·¯å¾„ ä¸ºç”¨æˆ·å®‰è£… <code>tesseract-ocr</code> çš„è·¯å¾„</li>
<li>å¦å¤– æŠŠ<code>tesseract.exe</code>çš„å®‰è£…è·¯å¾„ ä»¥åŠ <code>tesseract-ocr</code> æ–‡å­—åº“çš„è·¯å¾„ è®¾ç½®äºç³»ç»Ÿå˜é‡</li>
</ol>
<p>å…·ä½“å‚è€ƒ <a href="https://blog.csdn.net/m0_37576542/article/details/132315537">è¶…è¯¦ç»†è§£å†³pytesseract.pytesseract.TesseractNotFoundError: tesseract is not installed or itâ€˜s not in yoâ€¦</a></p>
</li>
<li>
<p>[ ] ä¸‹è½½ è¯†åˆ«è½¬åŒ–è„šæœ¬</p>
<blockquote>
<p>git clone <a href="https://github.com/writecrow/ocr2text.git">https://github.com/writecrow/ocr2text.git</a></p>
</blockquote>
</li>
<li>
<p>[ ] è¿è¡Œ <code>Anaconda Powershell Prompt</code> ç„¶å cd <code>ocr2text</code> ç›®å½•ä¸‹ æ‰§è¡Œ</p>
<blockquote>
<p>pip install --user --requirement requirements.txt<br>
python3.12.exe .\<a href="http://ocr2text.py">ocr2text.py</a></p>
</blockquote>
</li>
</ul>
<h3 id="ocr2text-py-æºç -å¸¦ç‚¹å°ä¿®æ”¹"><a class="header-anchor" href="#ocr2text-py-æºç -å¸¦ç‚¹å°ä¿®æ”¹">ğŸŒ³</a><a href="http://ocr2text.py">ocr2text.py</a> æºç  å¸¦ç‚¹å°ä¿®æ”¹</h3>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="keyword">import</span> errno</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> tempfile</span><br><span class="line"><span class="keyword">from</span> tempfile <span class="keyword">import</span> mkdtemp</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> io</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">except</span> ImportError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Error: You need to install the &quot;Image&quot; package. Type the following:&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;pip install Image&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">import</span> pytesseract</span><br><span class="line"><span class="keyword">except</span> ImportError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Error: You need to install the &quot;pytesseract&quot; package. Type the following:&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;pip install pytesseract&#x27;</span>)</span><br><span class="line">    exit()</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">from</span> pdf2image <span class="keyword">import</span> convert_from_path, convert_from_bytes</span><br><span class="line"><span class="keyword">except</span> ImportError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Error: You need to install the &quot;pdf2image&quot; package. Type the following:&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;pip install pdf2image&#x27;</span>)</span><br><span class="line">    exit()</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> textract <span class="keyword">import</span> exceptions</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">update_progress</span>(<span class="params">progress</span>):</span><br><span class="line">    barLength = <span class="number">10</span>  <span class="comment"># Modify this to change the length of the progress bar</span></span><br><span class="line">    status = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(progress, <span class="built_in">int</span>):</span><br><span class="line">        progress = <span class="built_in">float</span>(progress)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(progress, <span class="built_in">float</span>):</span><br><span class="line">        progress = <span class="number">0</span></span><br><span class="line">        status = <span class="string">&quot;error: progress var must be float\r\n&quot;</span></span><br><span class="line">    <span class="keyword">if</span> progress &lt; <span class="number">0</span>:</span><br><span class="line">        progress = <span class="number">0</span></span><br><span class="line">        status = <span class="string">&quot;Halt...\r\n&quot;</span></span><br><span class="line">    <span class="keyword">if</span> progress &gt;= <span class="number">1</span>:</span><br><span class="line">        progress = <span class="number">1</span></span><br><span class="line">        status = <span class="string">&quot;\r\n&quot;</span></span><br><span class="line">    block = <span class="built_in">int</span>(<span class="built_in">round</span>(barLength*progress))</span><br><span class="line">    text = <span class="string">&quot;\rPercent: [&#123;0&#125;] &#123;1&#125;% &#123;2&#125;&quot;</span>.<span class="built_in">format</span>(</span><br><span class="line">        <span class="string">&quot;#&quot;</span>*block + <span class="string">&quot;-&quot;</span>*(barLength-block), progress*<span class="number">100</span>, status)</span><br><span class="line">    sys.stdout.write(text)</span><br><span class="line">    sys.stdout.flush()</span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">args</span>):</span><br><span class="line">        <span class="comment"># run a subprocess and put the stdout and stderr on the pipe object</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            pipe = subprocess.Popen(</span><br><span class="line">                args,</span><br><span class="line">                stdout=subprocess.PIPE, stderr=subprocess.PIPE,</span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">except</span> OSError <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">if</span> e.errno == errno.ENOENT:</span><br><span class="line">                <span class="comment"># File not found.</span></span><br><span class="line">                <span class="comment"># This is equivalent to getting exitcode 127 from sh</span></span><br><span class="line">                <span class="keyword">raise</span> exceptions.ShellError(</span><br><span class="line">                    <span class="string">&#x27; &#x27;</span>.join(args), <span class="number">127</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># pipe.wait() ends up hanging on large files. using</span></span><br><span class="line">        <span class="comment"># pipe.communicate appears to avoid this issue</span></span><br><span class="line">        stdout, stderr = pipe.communicate()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># if pipe is busted, raise an error (unlike Fabric)</span></span><br><span class="line">        <span class="keyword">if</span> pipe.returncode != <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">raise</span> exceptions.ShellError(</span><br><span class="line">                <span class="string">&#x27; &#x27;</span>.join(args), pipe.returncode, stdout, stderr,</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> stdout, stderr</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">extract_tesseract</span>(<span class="params">filename</span>):</span><br><span class="line">        <span class="comment">#temp_dir = mkdtemp()</span></span><br><span class="line">        <span class="comment">#base = os.path.join(temp_dir, &#x27;conv&#x27;)</span></span><br><span class="line">        <span class="comment">#temp_dir = &#x27;tempdir&#x27;           </span></span><br><span class="line">        temp_dir, _ = os.path.splitext(filename)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(temp_dir):</span><br><span class="line">                os.makedirs(temp_dir)</span><br><span class="line">        contents = []</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">        </span><br><span class="line">            <span class="keyword">import</span> pymupdf</span><br><span class="line"></span><br><span class="line">            doc = pymupdf.<span class="built_in">open</span>(filename) <span class="comment"># open a document</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> page_index <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(doc)): <span class="comment"># iterate over pdf pages</span></span><br><span class="line">                page = doc[page_index] <span class="comment"># get the page</span></span><br><span class="line">                image_list = page.get_images()</span><br><span class="line"></span><br><span class="line">                <span class="comment"># print the number of images found on the page</span></span><br><span class="line">                <span class="comment">#if image_list:</span></span><br><span class="line">                <span class="comment">#    print(f&quot;Found &#123;len(image_list)&#125; images on page &#123;page_index&#125;&quot;)</span></span><br><span class="line">                <span class="comment">#else:</span></span><br><span class="line">                <span class="comment">#   print(&quot;No images found on page&quot;, page_index)</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span> image_index, img <span class="keyword">in</span> <span class="built_in">enumerate</span>(image_list, start=<span class="number">1</span>): <span class="comment"># enumerate the image list</span></span><br><span class="line">                    xref = img[<span class="number">0</span>] <span class="comment"># get the XREF of the image</span></span><br><span class="line">                    pix = pymupdf.Pixmap(doc, xref) <span class="comment"># create a Pixmap</span></span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> pix.n - pix.alpha &gt; <span class="number">3</span>: <span class="comment"># CMYK: convert to RGB first</span></span><br><span class="line">                        pix = pymupdf.Pixmap(pymupdf.csRGB, pix)</span><br><span class="line"></span><br><span class="line">                    pix.save(<span class="string">&quot;%s\\page_%05d-image_%02d.png&quot;</span> % (temp_dir, page_index, image_index)) <span class="comment"># save the image as png</span></span><br><span class="line">                    png_bytes = pix.tobytes()</span><br><span class="line">                    page_content = pytesseract.image_to_string(Image.<span class="built_in">open</span>(io.BytesIO(png_bytes)), <span class="string">&#x27;eng+chi_sim&#x27;</span>)</span><br><span class="line">                    contents.append(page_content)</span><br><span class="line">                    pix = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> dirpath, dirnames, files <span class="keyword">in</span> os.walk(temp_dir):</span><br><span class="line">                <span class="keyword">for</span> name <span class="keyword">in</span> files:</span><br><span class="line">                    filename, file_extension = os.path.splitext(name)</span><br><span class="line">                    <span class="keyword">if</span> (file_extension.lower() != <span class="string">&#x27;.png&#x27;</span>):</span><br><span class="line">                        <span class="keyword">continue</span></span><br><span class="line">                    source_path = os.path.join(dirpath, name)</span><br><span class="line">                    relative_directory = os.path.dirname(os.path.realpath(name))</span><br><span class="line">                    pngfile = os.path.join(relative_directory, source_path)</span><br><span class="line">                    <span class="comment">#print(&#x27;pic path: &#x27; + repr(pngfile))</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">#page_content = pytesseract.image_to_string(Image.open(io.BytesIO(pngfile)), &#x27;eng+chi_sim&#x27;)</span></span><br><span class="line">                    <span class="comment">#contents.append(page_content)</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join(contents)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># https://python-pptx.readthedocs.io/en/latest/</span></span><br><span class="line">            <span class="comment">#stdout, _ = run([&#x27;pdftoppm&#x27;, filename, base])</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;extract_tesseract: &#x27;</span> + filename)</span><br><span class="line">            <span class="keyword">for</span> page <span class="keyword">in</span> <span class="built_in">sorted</span>(os.listdir(temp_dir)):</span><br><span class="line">                page_path = os.path.join(temp_dir, page)</span><br><span class="line">                <span class="comment"># https://github.com/Belval/pdf2image</span></span><br><span class="line">                page_content = pytesseract.image_to_string(Image.<span class="built_in">open</span>(page_path))</span><br><span class="line">                contents.append(page_content)</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join(contents)</span><br><span class="line">        <span class="keyword">finally</span>:</span><br><span class="line">            <span class="comment">#shutil.rmtree(temp_dir)</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">convert_recursive</span>(<span class="params">source, destination, count</span>):</span><br><span class="line">    pdfCounter = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> dirpath, dirnames, files <span class="keyword">in</span> os.walk(source):</span><br><span class="line">        <span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">            <span class="keyword">if</span> file.lower().endswith(<span class="string">&#x27;.pdf&#x27;</span>):</span><br><span class="line">                pdfCounter += <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;pdfCounter: &#x27;</span> + <span class="built_in">str</span>(pdfCounter))</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27; Helper function for looping through files recursively &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> dirpath, dirnames, files <span class="keyword">in</span> os.walk(source):</span><br><span class="line">        <span class="keyword">for</span> name <span class="keyword">in</span> files:</span><br><span class="line">            filename, file_extension = os.path.splitext(name)</span><br><span class="line">            <span class="keyword">if</span> (file_extension.lower() != <span class="string">&#x27;.pdf&#x27;</span>):</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;name:&#x27;</span> + name)</span><br><span class="line">            relative_directory = os.path.relpath(dirpath, source)</span><br><span class="line">            source_path = os.path.join(dirpath, name)</span><br><span class="line">            output_directory = os.path.join(destination, relative_directory)</span><br><span class="line">            output_filename = os.path.join(output_directory, filename + <span class="string">&#x27;.txt&#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(output_directory):</span><br><span class="line">                os.makedirs(output_directory)</span><br><span class="line">            count = convert(source_path, output_filename, count, pdfCounter)</span><br><span class="line">    <span class="keyword">return</span> count</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">convert</span>(<span class="params">sourcefile, destination_file, count, pdfCounter</span>):</span><br><span class="line">    text = extract_tesseract(sourcefile)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(destination_file, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f_out:</span><br><span class="line">        f_out.write(text)</span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Converted &#x27;</span> + source)</span><br><span class="line">    count += <span class="number">1</span></span><br><span class="line">    update_progress(count / pdfCounter)</span><br><span class="line">    <span class="keyword">return</span> count</span><br><span class="line"></span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;********************************&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;*** PDF to TXT file, via OCR ***&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;********************************&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line">dir_path = os.path.dirname(os.path.realpath(__file__))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Source file or folder of PDF(s) [&#x27;</span> + dir_path + <span class="string">&#x27;]:&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;(Press [Enter] for current working directory)&#x27;</span>)</span><br><span class="line">source = <span class="built_in">input</span>()</span><br><span class="line"><span class="keyword">if</span> source == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">    source = dir_path</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Destination folder for TXT [&#x27;</span> + dir_path + <span class="string">&#x27;]:&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;(Press [Enter] for current working directory)&#x27;</span>)</span><br><span class="line">destination = <span class="built_in">input</span>()</span><br><span class="line"><span class="keyword">if</span> destination == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">    destination = dir_path</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (os.path.exists(source)):</span><br><span class="line">    <span class="keyword">if</span> (os.path.isdir(source)):</span><br><span class="line">        count = convert_recursive(source, destination, count)</span><br><span class="line">    <span class="keyword">elif</span> os.path.isfile(source):  </span><br><span class="line">        filepath, fullfile = os.path.split(source)</span><br><span class="line">        filename, file_extension = os.path.splitext(fullfile)</span><br><span class="line">        <span class="keyword">if</span> (file_extension.lower() == <span class="string">&#x27;.pdf&#x27;</span>):</span><br><span class="line">            count = convert(source, os.path.join(destination, filename + <span class="string">&#x27;.txt&#x27;</span>), count, <span class="number">1</span>)</span><br><span class="line">    plural = <span class="string">&#x27;s&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> count == <span class="number">1</span>:</span><br><span class="line">        plural = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">str</span>(count) + <span class="string">&#x27; file&#x27;</span> + plural + <span class="string">&#x27; converted&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;The path &#x27;</span> + source + <span class="string">&#x27; seems to be invalid&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="ç„¶åå°±èƒ½é€šè¿‡æœ—è¯»-è¾¹è¯»è¾¹çœ‹-æå‡é˜…è¯»æ•ˆç‡"><a class="header-anchor" href="#ç„¶åå°±èƒ½é€šè¿‡æœ—è¯»-è¾¹è¯»è¾¹çœ‹-æå‡é˜…è¯»æ•ˆç‡">ğŸŒ³</a>ç„¶åå°±èƒ½é€šè¿‡æœ—è¯» è¾¹è¯»è¾¹çœ‹ æå‡é˜…è¯»æ•ˆç‡</h2>
<h2 id="pdfè½¬docx"><a class="header-anchor" href="#pdfè½¬docx">ğŸŒ³</a><a href="https://pdf2docx.readthedocs.io/en/latest/index.html">pdfè½¬docx</a></h2>
]]></content>
      <categories>
        <category>è®¡ç®—æœºç§‘å­¦</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>ocrmypdf</tag>
        <tag>Tesseract</tag>
        <tag>pdfè½¬æ–‡å­—</tag>
      </tags>
  </entry>
  <entry>
    <title>åŠ å¯†è´§å¸å­¦ä¹ </title>
    <url>/2025/03/18/%E5%8A%A0%E5%AF%86%E8%B4%A7%E5%B8%81%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h1>åŠ å¯†è´§å¸å­¦ä¹ </h1>
<h2 id="äº¤æ˜“æ‰€æ‰‹ç»­è´¹"><a class="header-anchor" href="#äº¤æ˜“æ‰€æ‰‹ç»­è´¹">ğŸŒ³</a><a href="https://www.528btc.com/tk/1688961172104610.html">äº¤æ˜“æ‰€æ‰‹ç»­è´¹</a></h2>
<p>æ³°è¾¾å¸æ‰‹ç»­è´¹æœ€ä½çš„äº¤æ˜“æ‰€<br>
åœ¨å½“å‰å¸‚åœºä¸Šï¼Œæœ‰è®¸å¤šäº¤æ˜“æ‰€æä¾›æ³°è¾¾å¸çš„äº¤æ˜“æœåŠ¡ã€‚ç„¶è€Œï¼Œæ‰‹ç»­è´¹ç‡å› äº¤æ˜“æ‰€è€Œå¼‚ã€‚æ ¹æ®æˆ‘ä»¬çš„è°ƒç ”ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›æ‰‹ç»­è´¹è¾ƒä½çš„æ³°è¾¾å¸äº¤æ˜“æ‰€ï¼š</p>
<ol>
<li>Binanceï¼šä½œä¸ºå…¨çƒæœ€å¤§çš„åŠ å¯†è´§å¸äº¤æ˜“æ‰€ä¹‹ä¸€ï¼ŒBinanceæä¾›äº†ä½æ‰‹ç»­è´¹çš„äº¤æ˜“ç¯å¢ƒã€‚è¯¥äº¤æ˜“æ‰€åœ¨æ³°è¾¾å¸äº¤æ˜“ä¸­æ”¶å–æ¯ç¬”äº¤æ˜“0.1%çš„æ‰‹ç»­è´¹ã€‚æ­¤å¤–ï¼ŒBinanceè¿˜ä¸ºæŒæœ‰å…¶å¹³å°åŸç”Ÿä»£å¸BNBçš„ç”¨æˆ·æä¾›äº†æ›´ä½çš„äº¤æ˜“æ‰‹ç»­è´¹ã€‚</li>
<li>Huobiï¼šHuobiæ˜¯å¦ä¸€å®¶çŸ¥åçš„åŠ å¯†è´§å¸äº¤æ˜“æ‰€ï¼Œåœ¨æ³°è¾¾å¸äº¤æ˜“ä¸­æ‰‹ç»­è´¹è¾ƒä½ã€‚è¯¥äº¤æ˜“æ‰€æ”¶å–æ¯ç¬”äº¤æ˜“0.2%çš„æ‰‹ç»­è´¹ï¼Œå¹¶å¯æä¾›æ›´ä½çš„è´¹ç‡ç»™æŒæœ‰å…¶å¹³å°ä»£å¸HTçš„ç”¨æˆ·ã€‚</li>
<li>OKExï¼šOKExæ˜¯å…¨çƒé¢†å…ˆçš„æ•°å­—èµ„äº§äº¤æ˜“å¹³å°ä¹‹ä¸€ï¼Œæ‰‹ç»­è´¹ç›¸å¯¹è¾ƒä½ã€‚è¯¥äº¤æ˜“æ‰€åœ¨æ³°è¾¾å¸äº¤æ˜“ä¸­æ”¶å–æ¯ç¬”äº¤æ˜“0.1%çš„æ‰‹ç»­è´¹ï¼Œå¹¶å¯æä¾›æ›´ä½çš„è´¹ç‡ç»™æŒæœ‰å…¶å¹³å°ä»£å¸OKBçš„ç”¨æˆ·ã€‚</li>
<li>Krakenï¼šKrakenæ˜¯ä¸€å®¶æ€»éƒ¨ä½äºç¾å›½çš„çŸ¥ååŠ å¯†è´§å¸äº¤æ˜“æ‰€ï¼Œæ‰‹ç»­è´¹ç›¸å¯¹è¾ƒä½ã€‚è¯¥äº¤æ˜“æ‰€åœ¨æ³°è¾¾å¸äº¤æ˜“ä¸­æ”¶å–æ¯ç¬”äº¤æ˜“0.16%~0.26%çš„æ‰‹ç»­è´¹ï¼Œè´¹ç‡æ ¹æ®äº¤æ˜“é‡çš„ä¸åŒè€Œæœ‰æ‰€å·®å¼‚ã€‚</li>
</ol>
<h2 id="äº¤æ˜“æ‰€"><a class="header-anchor" href="#äº¤æ˜“æ‰€">ğŸŒ³</a>äº¤æ˜“æ‰€</h2>
<h3 id="bitkan"><a class="header-anchor" href="#bitkan">ğŸŒ³</a><a href="https://bitkan.com/zh">bitkan</a></h3>
<h3 id="ç«å¸"><a class="header-anchor" href="#ç«å¸">ğŸŒ³</a><a href="https://www.htx.com.pk/zh-cn/">ç«å¸</a></h3>
<h3 id="å¸å®‰"><a class="header-anchor" href="#å¸å®‰">ğŸŒ³</a><a href="https://www.binance.com/">å¸å®‰</a></h3>
<h3 id="gate-io-å­¦ä¹ æ–‡æ¡£"><a class="header-anchor" href="#gate-io-å­¦ä¹ æ–‡æ¡£">ğŸŒ³</a><a href="https://www.gate.io/zh/futures/trading-guide-for-beginners">gate.io å­¦ä¹ æ–‡æ¡£</a></h3>
<h4 id="ä»€ä¹ˆæ˜¯åŠ å¯†è´§å¸åˆçº¦"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯åŠ å¯†è´§å¸åˆçº¦">ğŸŒ³</a><a href="https://www.gate.io/zh/learn/course/gateio-contracts-trading-guide-a-must-read-for-newbies">ä»€ä¹ˆæ˜¯åŠ å¯†è´§å¸åˆçº¦</a></h4>
<h3 id="bitget"><a class="header-anchor" href="#bitget">ğŸŒ³</a><a href="https://www.bitget.com/zh-TC/">bitget</a></h3>
<h3 id="æ¬§æ˜“"><a class="header-anchor" href="#æ¬§æ˜“">ğŸŒ³</a><a href="https://www.okx.com/zh-hans">æ¬§æ˜“</a></h3>
<h4 id="æ¬§æ˜“åˆçº¦æŒ‡å—"><a class="header-anchor" href="#æ¬§æ˜“åˆçº¦æŒ‡å—">ğŸŒ³</a><a href="https://www.okx.com/zh-hans/learn">æ¬§æ˜“åˆçº¦æŒ‡å—</a></h4>
<h3 id="cryptomus"><a class="header-anchor" href="#cryptomus">ğŸŒ³</a><a href="https://cryptomus.com/zh">cryptomus</a></h3>
<h3 id="gemwallet"><a class="header-anchor" href="#gemwallet">ğŸŒ³</a><a href="https://gemwallet.com/zh-cn/usdt-wallet/">gemwallet</a></h3>
<h3 id="kraken"><a class="header-anchor" href="#kraken">ğŸŒ³</a><a href="https://www.kraken.com/zh-cn">kraken</a></h3>
<h3 id="bnb-chain"><a class="header-anchor" href="#bnb-chain">ğŸŒ³</a><a href="https://www.bnbchain.org/zh-CN/what-is-bnb">BNB chain</a></h3>
<h4 id="none"><a class="header-anchor" href="#none">ğŸŒ³</a><a href="https://www.120btc.com/baike/qukuai/378511109.html"></a></h4>
<h2 id="ç”µç«ç«çŒœ-å¯ä»¥ç”¨åŠ å¯†è´§å¸å—"><a class="header-anchor" href="#ç”µç«ç«çŒœ-å¯ä»¥ç”¨åŠ å¯†è´§å¸å—">ğŸŒ³</a>ç”µç«ç«çŒœ å¯ä»¥ç”¨åŠ å¯†è´§å¸å—</h2>
<p>Here is a footnote reference,[^1] and another.[^longnote]</p>
<h2 id="endnotes"><a class="header-anchor" href="#endnotes">ğŸŒ³</a>Endnotes</h2>
<p>[^1]: Here is the footnote.<br>
[^longnote]: Hereâ€™s one with multiple blocks.</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>Hexo</category>
        <category>é‡‘è</category>
      </categories>
      <tags>
        <tag>é‡‘è</tag>
      </tags>
  </entry>
  <entry>
    <title>å•Šå“ˆç®—æ³• è¯»ä¹¦ç¬”è®°</title>
    <url>/2024/06/03/%E5%95%8A%E5%93%88%E7%AE%97%E6%B3%95-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h1>å•Šå“ˆç®—æ³• è¯»ä¹¦ç¬”è®°</h1>
<blockquote>
<p><a href="https://github.com/chenchen-cs/Aha-algorithm/">ã€Šå•Šå“ˆç®—æ³•ã€‹æºç </a> &gt; <a href="https://github.com/OctopusLian/AhaAlgorithms/">å•Šå“ˆç®—æ³•ã€‹ç¬¬å…«ç« æºç </a></p>
</blockquote>
<div class="gallery-container" data-type="data" data-button data-limit="10" data-first="10">
    <div class="gallery-items">[{"url":"https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg","alt":"","title":""},{"url":"https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg","alt":"","title":""},{"url":"https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg","alt":"","title":""},{"url":"https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg","alt":"","title":""},{"url":"https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg","alt":"","title":""},{"url":"https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg","alt":"","title":""},{"url":"https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg","alt":"","title":""},{"url":"https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg","alt":"","title":""}]</div>
  </div>
<h2 id="ç¬¬-1-ç« -ä¸€å¤§æ³¢æ•°æ­£åœ¨é è¿‘-æ’åº-1"><a class="header-anchor" href="#ç¬¬-1-ç« -ä¸€å¤§æ³¢æ•°æ­£åœ¨é è¿‘-æ’åº-1">ğŸŒ³</a>ç¬¬ 1 ç«  ä¸€å¤§æ³¢æ•°æ­£åœ¨é è¿‘â€”â€”æ’åº 1</h2>
<h3 id="ç¬¬-1-èŠ‚-æœ€å¸›æœ€ç®€å•çš„æ’åº-æ¡¶æ’åº-2"><a class="header-anchor" href="#ç¬¬-1-èŠ‚-æœ€å¸›æœ€ç®€å•çš„æ’åº-æ¡¶æ’åº-2">ğŸŒ³</a>ç¬¬ 1 èŠ‚ æœ€å¸›æœ€ç®€å•çš„æ’åºâ€”â€”æ¡¶æ’åº 2</h3>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">bucketSort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span> i, j;</span><br><span class="line">    <span class="type">int</span> max = arr[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] &gt; max) &#123;</span><br><span class="line">            max = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> bucket[max + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt;= max; i++) &#123;</span><br><span class="line">        bucket[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        bucket[arr[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt;= max; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span> (bucket[i] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            arr[j++] = i;</span><br><span class="line">            bucket[i]--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> arr[] = &#123;<span class="number">5</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">9</span>&#125;;</span><br><span class="line">    <span class="type">int</span> n = <span class="keyword">sizeof</span>(arr) / <span class="keyword">sizeof</span>(arr[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">    bucketSort(arr, n);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬-2-èŠ‚-é‚»å±…å¥½è¯´è¯-å†’æ³¡æ’åº-7"><a class="header-anchor" href="#ç¬¬-2-èŠ‚-é‚»å±…å¥½è¯´è¯-å†’æ³¡æ’åº-7">ğŸŒ³</a>ç¬¬ 2 èŠ‚ é‚»å±…å¥½è¯´è¯â€”â€”å†’æ³¡æ’åº 7</h3>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">bubbleSort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span> i, j, temp;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; n - <span class="number">1</span> - i; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="comment">// äº¤æ¢ arr[j] å’Œ arr[j + 1]</span></span><br><span class="line">                temp = arr[j];</span><br><span class="line">                arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">                arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> arr[] = &#123;<span class="number">5</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">9</span>&#125;;</span><br><span class="line">    <span class="type">int</span> n = <span class="keyword">sizeof</span>(arr) / <span class="keyword">sizeof</span>(arr[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">    bubbleSort(arr, n);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬-3-èŠ‚-æœ€å¸¸ç”¨çš„æ’åº-å¿«é€Ÿæ’åº"><a class="header-anchor" href="#ç¬¬-3-èŠ‚-æœ€å¸¸ç”¨çš„æ’åº-å¿«é€Ÿæ’åº">ğŸŒ³</a>ç¬¬ 3 èŠ‚ æœ€å¸¸ç”¨çš„æ’åºâ€”â€”å¿«é€Ÿæ’åº</h3>
<p>|åŸºå‡†-&gt;   mid   &lt;-|<br>
|mid-&gt;   åŸºå‡†|   &lt;-|</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a[<span class="number">101</span>], n;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">quicksort</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">    <span class="type">int</span> i, j, t, temp;</span><br><span class="line">    <span class="keyword">if</span> (left &gt; right) <span class="keyword">return</span>;</span><br><span class="line">    temp = a[left];</span><br><span class="line">    i = left;</span><br><span class="line">    j = right;</span><br><span class="line">    <span class="keyword">while</span> (i != j) &#123;</span><br><span class="line">        <span class="keyword">while</span> (a[j] &gt;= temp &amp;&amp; i &lt; j)</span><br><span class="line">            j--;</span><br><span class="line">        <span class="keyword">while</span> (a[i] &lt;= temp &amp;&amp; i &lt; j)</span><br><span class="line">            i++;</span><br><span class="line">        <span class="keyword">if</span> (i &lt; j) &#123;</span><br><span class="line">            t = a[i];</span><br><span class="line">            a[i] = a[j];</span><br><span class="line">            a[j] = t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    a[left] = a[i];</span><br><span class="line">    a[i] = temp;</span><br><span class="line"></span><br><span class="line">    quicksort(left, i - <span class="number">1</span>);</span><br><span class="line">    quicksort(i + <span class="number">1</span>, right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;è¯·è¾“å…¥æ•°ç»„çš„å¤§å°ï¼š&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;è¯·è¾“å…¥æ•°ç»„å…ƒç´ ï¼š&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    quicksort(<span class="number">0</span>, n - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æ’åºåçš„æ•°ç»„ï¼š&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, a[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬-4-èŠ‚-å°å“¼ä¹°ä¹¦-20"><a class="header-anchor" href="#ç¬¬-4-èŠ‚-å°å“¼ä¹°ä¹¦-20">ğŸŒ³</a>ç¬¬ 4 èŠ‚ å°å“¼ä¹°ä¹¦ 20</h3>
<blockquote>
<p>åœ¨ç²—ç•¥è®¡ç®—æ—¶é—´å¤æ‚åº¦çš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸è®¤ä¸ºè®¡ç®—æœºæ¯ç§’é’Ÿå¤§çº¦è¿è¡Œ 10 äº¿æ¬¡ï¼ˆå½“ç„¶å®é™…æƒ…å†µè¦æ›´å¿«ï¼‰ã€‚<br>
æ¡¶æ’åºæ˜¯æ˜€å¿«çš„ï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(N+M)ï¼›å†’æ³¡æ’åºæ˜¯ O(N 2 )ï¼›å¿«é€Ÿæ’åºæ˜¯ O(NlogN)</p>
</blockquote>
<h2 id="ç¬¬-2-ç« -æ ˆ-é˜Ÿåˆ—-é“¾è¡¨"><a class="header-anchor" href="#ç¬¬-2-ç« -æ ˆ-é˜Ÿåˆ—-é“¾è¡¨">ğŸŒ³</a>ç¬¬ 2 ç«  æ ˆã€é˜Ÿåˆ—ã€é“¾è¡¨</h2>
<h3 id="ç¬¬-1-èŠ‚-è§£å¯†-qq-å·-é˜Ÿåˆ—"><a class="header-anchor" href="#ç¬¬-1-èŠ‚-è§£å¯†-qq-å·-é˜Ÿåˆ—">ğŸŒ³</a>ç¬¬ 1 èŠ‚ è§£å¯† QQ å·â€”â€”é˜Ÿåˆ—</h3>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">queue</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">int</span> data[<span class="number">100</span>]; <span class="comment">// é˜Ÿåˆ—çš„ä¸»ä½“ï¼Œç”¨æ¥å­˜å‚¨å†…å®¹</span></span><br><span class="line">    <span class="type">int</span> head;      <span class="comment">// é˜Ÿé¦–</span></span><br><span class="line">    <span class="type">int</span> tail;      <span class="comment">// é˜Ÿå°¾</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">queue</span> <span class="title">q</span>;</span></span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="comment">// åˆå§‹åˆ–é˜Ÿåˆ—</span></span><br><span class="line">    q.head = <span class="number">1</span>;</span><br><span class="line">    q.tail = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= <span class="number">9</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ä¾æ¬¡å‘é˜Ÿåˆ—æ’å…¥9ä¸ªæ•°</span></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;q.data[q.tail]);</span><br><span class="line">        q.tail++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (q.head &lt; q.tail) <span class="comment">// å½“é˜Ÿåˆ—ä¸ä¸ºç©ºçš„æ—¶å€™æ‰§è¡Œå¾ªç¯</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// æ‰“å°é˜Ÿé¦–å¹¶å°†é˜Ÿé¦–å‡ºé˜Ÿ</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, q.data[q.head]);</span><br><span class="line">        q.head++;</span><br><span class="line">        <span class="comment">// å…ˆå°†æ–°é˜Ÿé¦–çš„æ•°æ·»åŠ åˆ°é˜Ÿå°¾</span></span><br><span class="line">        q.data[q.tail] = q.data[q.head];</span><br><span class="line">        q.tail++;</span><br><span class="line">        <span class="comment">// å†å°†é˜Ÿé¦–å‡ºé˜Ÿ</span></span><br><span class="line">        q.head++;</span><br><span class="line">    &#125;</span><br><span class="line">    getchar();</span><br><span class="line">    getchar();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬-2-èŠ‚-è§£å¯†å›æ–‡-æ ˆ"><a class="header-anchor" href="#ç¬¬-2-èŠ‚-è§£å¯†å›æ–‡-æ ˆ">ğŸŒ³</a>ç¬¬ 2 èŠ‚ è§£å¯†å›æ–‡â€”â€”æ ˆ</h3>
<h3 id="ç¬¬-3-èŠ‚-çº¸ç‰Œæ¸¸æˆ-å°çŒ«é’“é±¼-35"><a class="header-anchor" href="#ç¬¬-3-èŠ‚-çº¸ç‰Œæ¸¸æˆ-å°çŒ«é’“é±¼-35">ğŸŒ³</a>ç¬¬ 3 èŠ‚ çº¸ç‰Œæ¸¸æˆâ€”â€”å°çŒ«é’“é±¼ 35</h3>
<h3 id="ç¬¬-4-èŠ‚-é“¾è¡¨"><a class="header-anchor" href="#ç¬¬-4-èŠ‚-é“¾è¡¨">ğŸŒ³</a>ç¬¬ 4 èŠ‚ é“¾è¡¨</h3>
<h3 id="ç¬¬-5-èŠ‚-æ¨¡æ‹Ÿé“¾è¡¨-54"><a class="header-anchor" href="#ç¬¬-5-èŠ‚-æ¨¡æ‹Ÿé“¾è¡¨-54">ğŸŒ³</a>ç¬¬ 5 èŠ‚ æ¨¡æ‹Ÿé“¾è¡¨ 54</h3>
<h2 id="ç¬¬-3-ç« -æšä¸¾-å»±æš´åŠ›-57"><a class="header-anchor" href="#ç¬¬-3-ç« -æšä¸¾-å»±æš´åŠ›-57">ğŸŒ³</a>ç¬¬ 3 ç«  æšä¸¾ï¼å»±æš´åŠ› 57</h2>
<h3 id="ç¬¬-1-èŠ‚-å‘çˆ¹çš„å¥¥æ•°-58"><a class="header-anchor" href="#ç¬¬-1-èŠ‚-å‘çˆ¹çš„å¥¥æ•°-58">ğŸŒ³</a>ç¬¬ 1 èŠ‚ å‘çˆ¹çš„å¥¥æ•° 58</h3>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> a[<span class="number">10</span>];</span><br><span class="line">book[<span class="number">10</span>], total = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// å®šä¹‰æ·±åº¦ä¼˜å…ˆæœç´¢å‡½æ•°ï¼Œç”¨äºç”Ÿæˆç¬¦åˆåŠ æ³•è¿ç®—è§„åˆ™çš„æ•°å­—ç»„åˆ</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> step)</span> &#123;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœé€’å½’åˆ°äº†ç¬¬10æ­¥ï¼Œå³ç”Ÿæˆäº†ä¸€ä¸ªå®Œæ•´çš„æ•°å­—åºåˆ—</span></span><br><span class="line">    <span class="keyword">if</span> (step == <span class="number">10</span>) &#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­å‰å…­ä¸ªæ•°å­—ç»„æˆçš„æ•°åŠ ä¸Šç¬¬ä¸ƒä¸ªæ•°å­—æ˜¯å¦ç­‰äºåä¸‰ä¸ªæ•°å­—ç»„æˆçš„æ•°</span></span><br><span class="line">        <span class="keyword">if</span> (a[<span class="number">1</span>] * <span class="number">100</span> + a[<span class="number">2</span>] * <span class="number">10</span> + a[<span class="number">3</span>] + a[<span class="number">4</span>] * <span class="number">100</span> + a[<span class="number">5</span>] * <span class="number">10</span> + a[<span class="number">6</span>] == a[<span class="number">7</span>] * <span class="number">100</span> + a[<span class="number">8</span>] * <span class="number">10</span> + a[<span class="number">9</span>]) &#123;</span><br><span class="line">            total++; <span class="comment">// æ»¡è¶³æ¡ä»¶çš„ç»„åˆæ•°åŠ ä¸€</span></span><br><span class="line">            <span class="comment">// è¾“å‡ºå½“å‰æ»¡è¶³æ¡ä»¶çš„ç»„åˆ</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d%d%d+%d%d%d=%d%d%d\n&quot;</span>, a[<span class="number">1</span>], a[<span class="number">2</span>], a[<span class="number">3</span>], a[<span class="number">4</span>], a[<span class="number">5</span>], a[<span class="number">6</span>], a[<span class="number">7</span>], a[<span class="number">8</span>], a[<span class="number">9</span>]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span>; <span class="comment">// è¿”å›ä¸Šä¸€å±‚é€’å½’</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éå†æ‰€æœ‰æ•°å­—ï¼ˆ1-9ï¼‰</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (book[i] == <span class="number">0</span>) &#123; <span class="comment">// åˆ¤æ–­å½“å‰æ•°å­—æ˜¯å¦å¯ç”¨</span></span><br><span class="line">            a[step] = i; <span class="comment">// å°†å½“å‰æ•°å­—æ”¾å…¥æ•°ç»„çš„å½“å‰ä½ç½®</span></span><br><span class="line">            book[i] = <span class="number">1</span>; <span class="comment">// æ ‡è®°å½“å‰æ•°å­—å·²ä½¿ç”¨</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// è¿›å…¥ä¸‹ä¸€å±‚é€’å½’ï¼Œç”Ÿæˆä¸‹ä¸€ä¸ªæ•°å­—åºåˆ—</span></span><br><span class="line">            dfs(step + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            book[i] = <span class="number">0</span>; <span class="comment">// å›æº¯ï¼šé‡ç½®å½“å‰æ•°å­—çŠ¶æ€ï¼Œä»¥ä¾¿ä¸‹æ¬¡ä½¿ç”¨</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>; <span class="comment">// è¿”å›ä¸Šä¸€å±‚é€’å½’</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    dfs(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;total=%d&quot;</span>, total / <span class="number">2</span>);</span><br><span class="line">    getchar();</span><br><span class="line">    getchar();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬-2-èŠ‚-ç‚¸å»äºº"><a class="header-anchor" href="#ç¬¬-2-èŠ‚-ç‚¸å»äºº">ğŸŒ³</a>ç¬¬ 2 èŠ‚ ç‚¸å»äºº</h3>
<h3 id="ç¬¬-3-èŠ‚-ç«æŸ´æ£ç­‰åº¿-67"><a class="header-anchor" href="#ç¬¬-3-èŠ‚-ç«æŸ´æ£ç­‰åº¿-67">ğŸŒ³</a>ç¬¬ 3 èŠ‚ ç«æŸ´æ£ç­‰åº¿ 67</h3>
<h3 id="ç¬¬-4-èŠ‚-æ•°çš„å…¨æ’åˆ—-70"><a class="header-anchor" href="#ç¬¬-4-èŠ‚-æ•°çš„å…¨æ’åˆ—-70">ğŸŒ³</a>ç¬¬ 4 èŠ‚ æ•°çš„å…¨æ’åˆ— 70</h3>
<h2 id="ç¬¬-4-ç« -ä¸‡èƒ½çš„æœç´¢"><a class="header-anchor" href="#ç¬¬-4-ç« -ä¸‡èƒ½çš„æœç´¢">ğŸŒ³</a>ç¬¬ 4 ç«  ä¸‡èƒ½çš„æœç´¢</h2>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> a[<span class="number">10</span>], book[<span class="number">10</span>], n;</span><br><span class="line"><span class="comment">// å®šä¹‰dfså‡½æ•°ï¼Œç”¨äºé€’å½’åœ°ç”Ÿæˆåºåˆ—</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> step)</span> &#123;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="comment">// å¦‚æœå·²ç»é€’å½’åˆ°ç¬¬n+1æ­¥ï¼Œæ„å‘³ç€ç”Ÿæˆäº†ä¸€ä¸ªå®Œæ•´çš„åºåˆ—</span></span><br><span class="line">    <span class="keyword">if</span> (step == n + <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// æ‰“å°åºåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, a[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ‰“å°æ¢è¡Œç¬¦</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        <span class="comment">// è¿”å›ä¸Šä¸€å±‚é€’å½’</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// éå†1åˆ°nä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœå½“å‰æ•°æœªè¢«ä½¿ç”¨è¿‡</span></span><br><span class="line">        <span class="keyword">if</span> (book[i] == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// å°†å½“å‰æ•°æ”¾å…¥åºåˆ—ä¸­</span></span><br><span class="line">            a[step] = i;</span><br><span class="line">            <span class="comment">// æ ‡è®°å½“å‰æ•°å·²è¢«ä½¿ç”¨</span></span><br><span class="line">            book[i] = <span class="number">1</span>;</span><br><span class="line">            <span class="comment">// é€’å½’è¿›å…¥ä¸‹ä¸€å±‚ï¼Œç»§ç»­ç”Ÿæˆåºåˆ—</span></span><br><span class="line">            dfs(step + <span class="number">1</span>);</span><br><span class="line">            <span class="comment">// é‡ç½®å½“å‰æ•°çš„ä½¿ç”¨æ ‡è®°ï¼Œä»¥ç”¨äºç”Ÿæˆå…¶ä»–åºåˆ—</span></span><br><span class="line">            book[i] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¿”å›ä¸Šä¸€å±‚é€’å½’</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    dfs(<span class="number">1</span>);</span><br><span class="line">    getchar();</span><br><span class="line">    getchar();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬-1-èŠ‚-ä¸æ’å—å¢™ä¸å›å¤´-æ·±åºä¼˜å…ˆæœç´¢-73"><a class="header-anchor" href="#ç¬¬-1-èŠ‚-ä¸æ’å—å¢™ä¸å›å¤´-æ·±åºä¼˜å…ˆæœç´¢-73">ğŸŒ³</a>ç¬¬ 1 èŠ‚ ä¸æ’å—å¢™ä¸å›å¤´â€”â€”æ·±åºä¼˜å…ˆæœç´¢ 73</h3>
<blockquote>
<p><a href="#%E7%AC%AC-1-%E8%8A%82-%E5%9D%91%E7%88%B9%E7%9A%84%E5%A5%A5%E6%95%B0-58">ç¼– å· ä¸º 1-9 çš„ ä¹ å¼  æ‰‘ å…‹ ç‰Œ , ç„¶ å å°† è¿™ ä¹ å¼  æ‰‘ å…‹ç‰Œ æ”¾ åˆ° ä¹ ä¸ª ç›’ å­ ä¸­ ,å¹¶ ä½¿ å¾— å£ å£ å£ + å£ å£ å£ = å£ å£ å£ æˆ ç«‹</a></p>
</blockquote>
<h3 id="ç¬¬-2-èŠ‚-è§£æ•‘å°å“ˆ-81"><a class="header-anchor" href="#ç¬¬-2-èŠ‚-è§£æ•‘å°å“ˆ-81">ğŸŒ³</a>ç¬¬ 2 èŠ‚ è§£æ•‘å°å“ˆ 81</h3>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span>  _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="comment">/*	ç®—æ³•ï¼šæ·±åº¦ä¼˜å…ˆæœç´¢(DFS)</span></span><br><span class="line"><span class="comment">	æ—¶é—´ï¼š2021.10.28</span></span><br><span class="line"><span class="comment">	ç›®çš„ï¼šæ‰¾å‡ºå°å“¼è§£æ•‘å°å“ˆçš„æœ€çŸ­è·¯å¾„</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> n, m, p, q, min = <span class="number">99999999</span>;</span><br><span class="line"><span class="type">int</span> a[<span class="number">51</span>][<span class="number">51</span>], book[<span class="number">51</span>][<span class="number">51</span>];</span><br><span class="line"><span class="type">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> step)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> next[<span class="number">4</span>][<span class="number">2</span>] = &#123;</span><br><span class="line">		&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,<span class="comment">//å‘å³èµ°</span></span><br><span class="line">		&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,<span class="comment">//å‘ä¸‹èµ°</span></span><br><span class="line">		&#123;<span class="number">0</span>,<span class="number">-1</span>&#125;,<span class="comment">//å‘å·¦èµ°</span></span><br><span class="line">		&#123;<span class="number">-1</span>,<span class="number">0</span>&#125;<span class="comment">//å‘ä¸Šèµ°</span></span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="type">int</span> tx, ty, k;</span><br><span class="line">	<span class="comment">//åˆ¤æ–­æ˜¯å¦åˆ°è¾¾å°å“ˆçš„ä½ç½®</span></span><br><span class="line">	<span class="keyword">if</span> (x == p &amp;&amp; y == q)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//æ›´æ–°æœ€å°å€¼</span></span><br><span class="line">		<span class="keyword">if</span> (step &lt; min)</span><br><span class="line">			min = step;</span><br><span class="line">		<span class="keyword">return</span>;<span class="comment">//è¯·æ³¨æ„è¿™é‡Œçš„è¿”å›å¾ˆé‡è¦</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//æšä¸¾4ç§èµ°æ³•</span></span><br><span class="line">	<span class="keyword">for</span> (k = <span class="number">0</span>; k &lt;= <span class="number">3</span>; k++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//è®¡ç®—ä¸‹ä¸€ä¸ªç‚¹åæ ‡</span></span><br><span class="line">		tx = x + next[k][<span class="number">0</span>];</span><br><span class="line">		ty = y + next[k][<span class="number">1</span>];</span><br><span class="line">		<span class="comment">//åˆ¤æ–­æ˜¯å¦è¶Šç•Œ</span></span><br><span class="line">		<span class="keyword">if</span> (tx&lt;<span class="number">1</span> || tx&gt;n || ty&lt;<span class="number">1</span> || ty&gt;m)</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		<span class="comment">//åˆ¤æ–­è¯¥ç‚¹æ˜¯å¦ä¸ºéšœç¢ç‰©æˆ–è€…å·²ç»åœ¨è·¯å¾„é‡Œ</span></span><br><span class="line">		<span class="keyword">if</span> (a[tx][ty] == <span class="number">0</span> &amp;&amp; book[tx][ty] == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			book[tx][ty] = <span class="number">1</span>;<span class="comment">//æ ‡è®°è¿™ä¸ªç‚¹å·²ç»è¢«èµ°è¿‡</span></span><br><span class="line">			dfs(tx, ty, step + <span class="number">1</span>);</span><br><span class="line">			book[tx][ty] = <span class="number">0</span>;<span class="comment">//å°è¯•ç»“æŸï¼Œå–æ¶ˆè¿™ä¸ªç‚¹çš„æ ‡è®°</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i, j, startx, starty;</span><br><span class="line">	<span class="comment">//è¯»å…¥nå’Œmï¼Œnä¸ºè¡Œmä¸ºåˆ—</span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">	<span class="comment">//è¯»å…¥è¿·å®«</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		<span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= m; j++)</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i][j]);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//è¯»å…¥èµ·ç‚¹å’Œç»ˆç‚¹åæ ‡</span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d %d&quot;</span>, &amp;startx, &amp;starty, &amp;p, &amp;q);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//ä»èµ·ç‚¹å¼€å§‹æœç´¢</span></span><br><span class="line">	book[startx][startx] = <span class="number">1</span>;<span class="comment">//æ ‡è®°èµ·ç‚¹å·²ç»åœ¨è·¯å¾„ä¸­ï¼Œé˜²æ­¢åé¢é‡å¤èµ°</span></span><br><span class="line">	<span class="comment">//ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯èµ·ç‚¹çš„xåæ ‡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯èµ·ç‚¹çš„yåæ ‡ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯åˆå§‹æ­¥æ•°ä¸º0</span></span><br><span class="line">	dfs(startx, starty, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//è¾“å‡ºæœ€çŸ­æ­¥æ•°</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, min);</span><br><span class="line">	getchar(); getchar();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬-3-èŠ‚-å±‚å±‚é€’è¿›-å¹¿åºä¼˜å…ˆæœç´¢"><a class="header-anchor" href="#ç¬¬-3-èŠ‚-å±‚å±‚é€’è¿›-å¹¿åºä¼˜å…ˆæœç´¢">ğŸŒ³</a>ç¬¬ 3 èŠ‚ å±‚å±‚é€’è¿›â€”â€”å¹¿åºä¼˜å…ˆæœç´¢</h3>
<blockquote>
<p>å¹¿ åº¦ ä¼˜ å…ˆ æœ ç´¢ (Breadth First Search,BFS), ä¹Ÿ ç§° ä¸º å®½ åº¦ ä¼˜ å…ˆ æœ ç´¢</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="comment">/*	ç®—æ³•ï¼šå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFS)</span></span><br><span class="line"><span class="comment">	æ—¶é—´ï¼š2021.10.28</span></span><br><span class="line"><span class="comment">	ç›®çš„ï¼šæ‰¾å‡ºå°å“¼è§£æ•‘å°å“ˆçš„æœ€çŸ­è·¯å¾„</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">note</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="type">int</span> x;<span class="comment">//æ¨ªåæ ‡</span></span><br><span class="line">	<span class="type">int</span> y;<span class="comment">//çºµåæ ‡</span></span><br><span class="line">	<span class="type">int</span> f;<span class="comment">//çˆ¶äº²åœ¨é˜Ÿåˆ—ä¸­çš„ç¼–å·ï¼Œæœ¬é¢˜ä¸è¦æ±‚è¾“å‡ºè·¯å¾„ï¼Œå¯ä»¥ä¸éœ€è¦f</span></span><br><span class="line">	<span class="type">int</span> s;<span class="comment">//æ­¥æ•°</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">note</span> <span class="title">que</span>[2501];</span><span class="comment">//å› ä¸ºåœ°å›¾å¤§å°ä¸è¶…è¿‡50*50ï¼Œå› æ­¤é˜Ÿåˆ—æ‰©å±•ä¸ä¼šè¶…è¿‡2500ä¸ª</span></span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> a[<span class="number">51</span>][<span class="number">51</span>] = &#123; <span class="number">0</span> &#125;, book[<span class="number">51</span>][<span class="number">51</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	<span class="comment">//å®šä¹‰ä¸€ä¸ªç”¨äºè¡¨ç¤ºèµ°çš„æ–¹å‘çš„æ•°ç»„</span></span><br><span class="line">	<span class="type">int</span> next[<span class="number">4</span>][<span class="number">2</span>] = &#123;</span><br><span class="line">		&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,<span class="comment">//å‘å³èµ°</span></span><br><span class="line">		&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,<span class="comment">//å‘ä¸‹èµ°</span></span><br><span class="line">		&#123;<span class="number">0</span>,<span class="number">-1</span>&#125;,<span class="comment">//å‘å·¦èµ°</span></span><br><span class="line">		&#123;<span class="number">-1</span>,<span class="number">0</span>&#125;<span class="comment">//å‘ä¸Šèµ°</span></span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="type">int</span> head, tail;</span><br><span class="line">	<span class="type">int</span> i, j, k, n, m, startx, starty, p, q, tx, ty, flag;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">	<span class="keyword">for</span> (i =<span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		<span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= m; j++)</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i][j]);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d %d&quot;</span>, &amp;startx, &amp;starty, &amp;p, &amp;q);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//é˜Ÿåˆ—åˆå§‹åŒ–</span></span><br><span class="line">	head = <span class="number">1</span>;</span><br><span class="line">	tail = <span class="number">1</span>;</span><br><span class="line">	<span class="comment">//å¾€é˜Ÿåˆ—è¾“å…¥è¿·å®«å…¥å£åæ ‡</span></span><br><span class="line">	que[tail].x = startx;</span><br><span class="line">	que[tail].y = starty;</span><br><span class="line">	que[tail].f = <span class="number">0</span>;</span><br><span class="line">	que[tail].s = <span class="number">0</span>;</span><br><span class="line">	tail++;</span><br><span class="line">	book[startx][starty]=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	flag = <span class="number">0</span>;<span class="comment">//ç”¨æ¥æ ‡è®°æ˜¯å¦åˆ°è¾¾ç›®æ ‡ç‚¹ï¼Œ0è¡¨ç¤ºæš‚æ—¶è¿˜æ²¡æœ‰åˆ°è¾¾ï¼Œ1è¡¨ç¤ºåˆ°è¾¾</span></span><br><span class="line">	<span class="keyword">while</span> (head &lt; tail)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//æšä¸¾å››ä¸ªæ–¹å‘</span></span><br><span class="line">		<span class="keyword">for</span> (k = <span class="number">0</span>; k &lt;= <span class="number">3</span>; k++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//è®¡ç®—ä¸‹ä¸€ä¸ªç‚¹çš„åæ ‡</span></span><br><span class="line">			tx = que[head].x + next[k][<span class="number">0</span>];</span><br><span class="line">			ty = que[head].y + next[k][<span class="number">1</span>];</span><br><span class="line">			<span class="comment">//åˆ¤æ–­æ˜¯å¦è¶Šç•Œ</span></span><br><span class="line">			<span class="keyword">if</span> (tx&lt;<span class="number">1</span> || tx&gt;n || ty&lt;<span class="number">1</span> || ty&gt;m)</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">			<span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯éšœç¢ç‰©æˆ–è€…å·²ç»åœ¨è·¯å¾„ä¸­</span></span><br><span class="line">			<span class="keyword">if</span> (a[tx][ty] == <span class="number">0</span> &amp;&amp; book[tx][ty] == <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">//æŠŠè¿™ä¸ªç‚¹æ ‡è®°ä¸ºå·²ç»èµ°è¿‡</span></span><br><span class="line">				<span class="comment">//æ³¨æ„å®½æœæ¯ä¸ªç‚¹åªå…¥é˜Ÿä¸€æ¬¡ï¼Œæ‰€ä»¥å’Œæ·±æœä¸åŒï¼Œä¸éœ€è¦å°†bookæ•°ç»„è¿˜åŸ</span></span><br><span class="line">				book[tx][ty] = <span class="number">1</span>;</span><br><span class="line">				<span class="comment">//æ’å…¥æ–°çš„ç‚¹åˆ°é˜Ÿåˆ—ä¸­</span></span><br><span class="line">				que[tail].x = tx;</span><br><span class="line">				que[tail].y = ty;</span><br><span class="line">				que[tail].f = head;<span class="comment">//å› ä¸ºè¿™ä¸ªç‚¹æ˜¯ä»headæ‰©å±•å‡ºæ¥çš„ï¼Œæ‰€ä»¥ä»–çš„çˆ¶äº²æ˜¯</span></span><br><span class="line">				<span class="comment">//headï¼Œæœ¬é¢˜ç›®ä¸éœ€è¦æ±‚è·¯å¾„ï¼Œå› æ­¤æœ¬å¥å¯çœç•¥</span></span><br><span class="line">				que[tail].s = que[head].s + <span class="number">1</span>;<span class="comment">//æ­¥æ•°æ˜¯çˆ¶äº²çš„æ­¥æ•°+1</span></span><br><span class="line">				tail++;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//å¦‚æœåˆ°ç›®æ ‡ç‚¹äº†ï¼Œåœæ­¢æ‰©å±•ï¼Œä»»åŠ¡ç»“æŸï¼Œé€€å‡ºå¾ªç¯</span></span><br><span class="line">			<span class="keyword">if</span> (tx == p &amp;&amp; ty == q)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">//æ³¨æ„ä¸‹é¢ä¸¤å¥è¯çš„ä½ç½®åƒä¸‡ä¸è¦å†™åäº†</span></span><br><span class="line">				flag = <span class="number">1</span>;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (flag == <span class="number">1</span>)</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		head++;<span class="comment">//æ³¨æ„è¿™åœ°æ–¹åƒä¸‡ä¸è¦å¿˜è®°ï¼Œå½“ä¸€ä¸ªç‚¹æ‰©å±•ç»“æŸåï¼Œhead++æ‰èƒ½å¯¹åé¢çš„ç‚¹åœ¨è¿›è¡Œæ‰©å±•</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//æ‰“å°é˜Ÿåˆ—ä¸­æœ«å°¾æœ€åä¸€ä¸ªç‚¹ï¼ˆç›®æ ‡ç‚¹ï¼‰çš„æ­¥æ•°</span></span><br><span class="line">	<span class="comment">//æ³¨æ„tailæ˜¯æŒ‡å‘é˜Ÿåˆ—é˜Ÿå°¾ï¼ˆå³æœ€åä¸€ä½ï¼‰çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼Œæ‰€ä»¥è¿™éœ€è¦-1</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, que[tail - <span class="number">1</span>].s);</span><br><span class="line"></span><br><span class="line">	getchar(); getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬-4-èŠ‚-å†è§£ç‚¸å»äºº-95"><a class="header-anchor" href="#ç¬¬-4-èŠ‚-å†è§£ç‚¸å»äºº-95">ğŸŒ³</a>ç¬¬ 4 èŠ‚ å†è§£ç‚¸å»äºº 95</h3>
<h4 id="å¹¿åº¦ä¼˜å…ˆæœç´¢-è§£æ³•"><a class="header-anchor" href="#å¹¿åº¦ä¼˜å…ˆæœç´¢-è§£æ³•">ğŸŒ³</a>å¹¿åº¦ä¼˜å…ˆæœç´¢ è§£æ³•</h4>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span>  _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="comment">/*	ç®—æ³•ï¼šå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFS)</span></span><br><span class="line"><span class="comment">	æ—¶é—´ï¼š2021.10.28</span></span><br><span class="line"><span class="comment">	ç›®çš„ï¼šä¼˜åŒ–3.2ç‚¸å¼¹äººçš„ä»£ç </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="type">int</span> x;<span class="comment">//æ¨ªåæ ‡</span></span><br><span class="line">	<span class="type">int</span> y;<span class="comment">//çºµåæ ‡</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">char</span> a[<span class="number">20</span>][<span class="number">21</span>];<span class="comment">//ç”¨æ¥å­˜å‚¨åœ°å›¾</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">getnum</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> sum, x, y;</span><br><span class="line">	sum = <span class="number">0</span>;<span class="comment">//sumç”¨æ¥è®¡æ•°ï¼ˆå¯ä»¥æ¶ˆç­çš„æ•Œäººæ•°ï¼‰ï¼Œæ‰€ä»¥åˆå§‹åŒ–ä¸º0</span></span><br><span class="line">	<span class="comment">//å°†åæ ‡i,jå¤åˆ¶åˆ°ä¸¤ä¸ªæ–°å˜é‡x,yä¸­ï¼Œä»¥ä¾¿ä»¥åå‘ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘ç»Ÿè®¡å¯ä»¥æ¶ˆç­çš„æ•Œäººæ•°</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//å‘ä¸Šç»Ÿè®¡å¯ä»¥æ¶ˆç­çš„æ•Œäººæ•°</span></span><br><span class="line">	x = i; y = j;</span><br><span class="line">	<span class="keyword">while</span> (a[x][y] != <span class="string">&#x27;#&#x27;</span>)<span class="comment">//åˆ¤æ–­çš„ç‚¹ä¸æ˜¯å¢™ï¼Œå¦‚æœä¸æ˜¯å¢™å°±ç»§ç»­</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//å¦‚æœå½“å‰çš„ç‚¹æ˜¯æ•Œäººï¼Œåˆ™è¿›è¡Œè®¡æ•°</span></span><br><span class="line">		<span class="keyword">if</span> (a[x][y] == <span class="string">&#x27;G&#x27;</span>)</span><br><span class="line">			sum++;</span><br><span class="line">		<span class="comment">//x--çš„ä½œç”¨æ˜¯ç»§ç»­å‘ä¸Šç»Ÿè®¡</span></span><br><span class="line">		x--;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å‘ä¸‹ç»Ÿè®¡å¯ä»¥æ¶ˆç­çš„æ•Œäººæ•°</span></span><br><span class="line">	x = i; y = j;</span><br><span class="line">	<span class="keyword">while</span> (a[x][y] != <span class="string">&#x27;#&#x27;</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (a[x][y] == <span class="string">&#x27;G&#x27;</span>)</span><br><span class="line">			sum++;</span><br><span class="line">		<span class="comment">//x++çš„ä½œç”¨æ˜¯ç»§ç»­å‘ä¸‹ç»Ÿè®¡</span></span><br><span class="line">		x++;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å‘å·¦ç»Ÿè®¡å¯ä»¥æ¶ˆç­çš„æ•Œäººæ•°</span></span><br><span class="line">	x = i; y = j;</span><br><span class="line">	<span class="keyword">while</span> (a[x][y] != <span class="string">&#x27;#&#x27;</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (a[x][y] == <span class="string">&#x27;G&#x27;</span>)</span><br><span class="line">			sum++;</span><br><span class="line">		<span class="comment">//y--çš„ä½œç”¨æ˜¯ç»§ç»­å‘å·¦ç»Ÿè®¡</span></span><br><span class="line">		y--;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å‘å³ç»Ÿè®¡å¯ä»¥æ¶ˆç­çš„æ•Œäººæ•°</span></span><br><span class="line">	x = i; y = j;</span><br><span class="line">	<span class="keyword">while</span> (a[x][y] != <span class="string">&#x27;#&#x27;</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (a[x][y] == <span class="string">&#x27;G&#x27;</span>)</span><br><span class="line">			sum++;</span><br><span class="line">		<span class="comment">//y++çš„ä½œç”¨æ˜¯ç»§ç»­å‘å³ç»Ÿè®¡</span></span><br><span class="line">		y++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">node</span> <span class="title">que</span>[401];</span><span class="comment">//å‡è®¾åœ°å›¾å¤§å°ä¸è¶…è¿‡20*20ï¼Œå› æ­¤é˜Ÿåˆ—æ‰©å±•ä¸ä¼šè¶…è¿‡400ä¸ª</span></span><br><span class="line">	<span class="type">int</span> head, tail;</span><br><span class="line">	<span class="type">int</span> book[<span class="number">20</span>][<span class="number">20</span>] = &#123; <span class="number">0</span> &#125;;<span class="comment">//å®šä¹‰ä¸€ä¸ªæ ‡è®°æ•°ç»„å¹¶å…¨éƒ¨åˆå§‹åŒ–ä¸º0</span></span><br><span class="line">	<span class="type">int</span> i, j, k, sum, max = <span class="number">0</span>, mx, my, n, m, startx, starty, tx, ty;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å®šä¹‰ä¸€ä¸ªç”¨äºè¡¨è¾¾èµ°çš„æ–¹å‘çš„æ•°ç»„</span></span><br><span class="line">	<span class="type">int</span> next[<span class="number">4</span>][<span class="number">2</span>] = &#123;</span><br><span class="line">		&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,<span class="comment">//å‘å³èµ°</span></span><br><span class="line">		&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,<span class="comment">//å‘ä¸‹èµ°</span></span><br><span class="line">		&#123;<span class="number">0</span>,<span class="number">-1</span>&#125;,<span class="comment">//å‘å·¦èµ°</span></span><br><span class="line">		&#123;<span class="number">-1</span>,<span class="number">0</span>&#125;<span class="comment">//å‘ä¸Šèµ°</span></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//è¯»å…¥nå’Œm,nè¡¨ç¤ºæœ‰å¤šå°‘è¡Œå­—ç¬¦ï¼Œmè¡¨ç¤ºæ¯è¡Œæœ‰å¤šå°‘åˆ—</span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d %d&quot;</span>, &amp;n, &amp;m, &amp;startx, &amp;starty);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//è¯»å…¥nè¡Œå­—ç¬¦</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt;= n - <span class="number">1</span>; i++)</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, &amp;a[i]);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//é˜Ÿåˆ—åˆå§‹åŒ–</span></span><br><span class="line">	head = <span class="number">1</span>;</span><br><span class="line">	tail = <span class="number">1</span>;</span><br><span class="line">	<span class="comment">//å¾€é˜Ÿåˆ—æ’å…¥å°äººçš„èµ·å§‹åæ ‡</span></span><br><span class="line">	que[tail].x = startx;</span><br><span class="line">	que[tail].y = starty;</span><br><span class="line">	tail++;</span><br><span class="line">	book[startx][starty] = <span class="number">1</span>;</span><br><span class="line">	max = getnum(startx, starty);</span><br><span class="line">	mx = startx;</span><br><span class="line">	my = starty;</span><br><span class="line">	<span class="comment">//å½“é˜Ÿåˆ—ä¸ä¸ºç©ºçš„æ—¶å€™å¾ªç¯</span></span><br><span class="line">	<span class="keyword">while</span> (head &lt; tail)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//æšä¸¾4ä¸ªæ–¹å‘</span></span><br><span class="line">		<span class="keyword">for</span> (k = <span class="number">0</span>; k &lt;= <span class="number">3</span>; k++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//å°è¯•èµ°çš„ä¸‹ä¸€ä¸ªç‚¹çš„åæ ‡</span></span><br><span class="line">			tx = que[head].x + next[k][<span class="number">0</span>];</span><br><span class="line">			ty = que[head].y + next[k][<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">			<span class="comment">//åˆ¤æ–­æ˜¯å¦è¶Šç•Œ</span></span><br><span class="line">			<span class="keyword">if</span> (tx&lt;<span class="number">0</span> || tx&gt;n - <span class="number">1</span> || ty&lt;<span class="number">0</span> || ty&gt;m - <span class="number">1</span>)</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">			<span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºå¹³åœ°æˆ–è€…æ›¾ç»èµ°è¿‡</span></span><br><span class="line">			<span class="keyword">if</span> (a[tx][ty] == <span class="string">&#x27;.&#x27;</span> &amp;&amp; book[tx][ty] == <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">//æ¯ä¸ªç‚¹åªå…¥é˜Ÿä¸€æ¬¡ï¼Œæ‰€ä»¥éœ€è¦æ ‡è®°è¿™ä¸ªç‚¹å·²ç»èµ°è¿‡</span></span><br><span class="line">				book[tx][ty] = <span class="number">1</span>;</span><br><span class="line">				<span class="comment">//æ’å…¥æ–°æ‰©å±•çš„ç‚¹åˆ°é˜Ÿåˆ—ä¸­</span></span><br><span class="line">				que[tail].x = tx;</span><br><span class="line">				que[tail].y = ty;</span><br><span class="line">				tail++;</span><br><span class="line"></span><br><span class="line">				<span class="comment">//ç»Ÿè®¡å½“å‰æ–°æ‰©å±•çš„ç‚¹å¯ä»¥æ¶ˆç­çš„æ•Œäººæ€»æ•°</span></span><br><span class="line">				sum = getnum(tx, ty);</span><br><span class="line">				<span class="comment">//æ›´æ–°maxçš„å€¼</span></span><br><span class="line">				<span class="keyword">if</span> (sum &gt; max)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="comment">//å¦‚æœå½“å‰ç»Ÿè®¡å‡ºçš„æ‰€èƒ½æ¶ˆç­æ•Œäººæ•°å¤§äºmax,åˆ™æ›´æ–°max</span></span><br><span class="line">					<span class="comment">//å¹¶ç”¨mxå’Œmyè®°å½•è¯¥ç‚¹åæ ‡</span></span><br><span class="line">					max = sum;</span><br><span class="line">					mx = tx;</span><br><span class="line">					my = ty;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		head++;<span class="comment">//æ³¨æ„è¿™åœ°æ–¹åƒä¸‡ä¸è¦å¿˜è®°ï¼Œå½“ä¸€ä¸ªç‚¹æ‰©å±•ç»“æŸåï¼Œå¿…é¡»è¦head++æ‰èƒ½å¯¹åé¢çš„ç‚¹è¿›è¡Œæ‰©å±•</span></span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//æœ€åè¾“å‡ºè¿™ä¸ªç‚¹å’Œæœ€å¤šå¯ä»¥æ¶ˆç­çš„æ•Œäººæ•°</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;å°†ç‚¸å¼¹æ”¾ç½®åœ¨ï¼ˆ%d,%d)å¤„ï¼Œå¯ä»¥æ¶ˆç­%dä¸ªæ•Œäºº\n&quot;</span>, mx, my, max);</span><br><span class="line">	getchar(); getchar();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ·±åº¦ä¼˜å…ˆæœç´¢-è§£æ³•"><a class="header-anchor" href="#æ·±åº¦ä¼˜å…ˆæœç´¢-è§£æ³•">ğŸŒ³</a>æ·±åº¦ä¼˜å…ˆæœç´¢ è§£æ³•</h4>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span>  _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="comment">/*	ç®—æ³•ï¼šæ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFS)</span></span><br><span class="line"><span class="comment">	æ—¶é—´ï¼š2021.10.29</span></span><br><span class="line"><span class="comment">	ç›®çš„ï¼šä¼˜åŒ–3.2ç‚¸å¼¹äººçš„ä»£ç </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">char</span> a[<span class="number">20</span>][<span class="number">21</span>];</span><br><span class="line"><span class="type">int</span> book[<span class="number">20</span>][<span class="number">20</span>], max, mx, my, n, m;</span><br><span class="line"><span class="type">int</span> <span class="title function_">getnum</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> sum, x, y;</span><br><span class="line">	sum = <span class="number">0</span>;<span class="comment">//sumç”¨æ¥è®¡æ•°ï¼ˆå¯ä»¥æ¶ˆç­çš„æ•Œäººæ•°ï¼‰ï¼Œæ‰€ä»¥åˆå§‹åŒ–ä¸º0</span></span><br><span class="line">	<span class="comment">//å°†åæ ‡i,jå¤åˆ¶åˆ°ä¸¤ä¸ªæ–°å˜é‡x,yä¸­ï¼Œä»¥ä¾¿ä»¥åå‘ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘ç»Ÿè®¡å¯ä»¥æ¶ˆç­çš„æ•Œäººæ•°</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//å‘ä¸Šç»Ÿè®¡å¯ä»¥æ¶ˆç­çš„æ•Œäººæ•°</span></span><br><span class="line">	x = i; y = j;</span><br><span class="line">	<span class="keyword">while</span> (a[x][y] != <span class="string">&#x27;#&#x27;</span>)<span class="comment">//åˆ¤æ–­çš„ç‚¹ä¸æ˜¯å¢™ï¼Œå¦‚æœä¸æ˜¯å¢™å°±ç»§ç»­</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//å¦‚æœå½“å‰çš„ç‚¹æ˜¯æ•Œäººï¼Œåˆ™è¿›è¡Œè®¡æ•°</span></span><br><span class="line">		<span class="keyword">if</span> (a[x][y] == <span class="string">&#x27;G&#x27;</span>)</span><br><span class="line">			sum++;</span><br><span class="line">		<span class="comment">//x--çš„ä½œç”¨æ˜¯ç»§ç»­å‘ä¸Šç»Ÿè®¡</span></span><br><span class="line">		x--;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å‘ä¸‹ç»Ÿè®¡å¯ä»¥æ¶ˆç­çš„æ•Œäººæ•°</span></span><br><span class="line">	x = i; y = j;</span><br><span class="line">	<span class="keyword">while</span> (a[x][y] != <span class="string">&#x27;#&#x27;</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (a[x][y] == <span class="string">&#x27;G&#x27;</span>)</span><br><span class="line">			sum++;</span><br><span class="line">		<span class="comment">//x++çš„ä½œç”¨æ˜¯ç»§ç»­å‘ä¸‹ç»Ÿè®¡</span></span><br><span class="line">		x++;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å‘å·¦ç»Ÿè®¡å¯ä»¥æ¶ˆç­çš„æ•Œäººæ•°</span></span><br><span class="line">	x = i; y = j;</span><br><span class="line">	<span class="keyword">while</span> (a[x][y] != <span class="string">&#x27;#&#x27;</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (a[x][y] == <span class="string">&#x27;G&#x27;</span>)</span><br><span class="line">			sum++;</span><br><span class="line">		<span class="comment">//y--çš„ä½œç”¨æ˜¯ç»§ç»­å‘å·¦ç»Ÿè®¡</span></span><br><span class="line">		y--;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å‘å³ç»Ÿè®¡å¯ä»¥æ¶ˆç­çš„æ•Œäººæ•°</span></span><br><span class="line">	x = i; y = j;</span><br><span class="line">	<span class="keyword">while</span> (a[x][y] != <span class="string">&#x27;#&#x27;</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (a[x][y] == <span class="string">&#x27;G&#x27;</span>)</span><br><span class="line">			sum++;</span><br><span class="line">		<span class="comment">//y++çš„ä½œç”¨æ˜¯ç»§ç»­å‘ä¸Šç»Ÿè®¡</span></span><br><span class="line">		y++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//å®šä¹‰ä¸€ä¸ªç”¨äºè¡¨ç¤ºèµ°çš„æ–¹å‘çš„æ•°ç»„</span></span><br><span class="line">	<span class="type">int</span> next[<span class="number">4</span>][<span class="number">2</span>] = &#123;</span><br><span class="line">		&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,<span class="comment">//å‘å³èµ°</span></span><br><span class="line">		&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,<span class="comment">//å‘ä¸‹èµ°</span></span><br><span class="line">		&#123;<span class="number">0</span>,<span class="number">-1</span>&#125;,<span class="comment">//å‘å·¦èµ°</span></span><br><span class="line">		&#123;<span class="number">-1</span>,<span class="number">0</span>&#125;<span class="comment">//å‘ä¸Šèµ°</span></span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="type">int</span> k, sum, tx, ty;</span><br><span class="line">	<span class="comment">//è®¡ç®—è¿™ä¸ªç‚¹å½“å‰å¯ä»¥æ¶ˆç­çš„æ•Œäººæ€»æ•°</span></span><br><span class="line">	sum = getnum(x, y);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//æ›´æ–°maxçš„å€¼</span></span><br><span class="line">	<span class="keyword">if</span> (sum &gt; max)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//å¦‚æœå½“å‰çš„ç‚¹ç»Ÿè®¡å‡ºçš„æ‰€èƒ½æ¶ˆç­çš„æ•Œäººæ•°å¤§äºmax,</span></span><br><span class="line">		<span class="comment">//åˆ™æ›´æ–°maxï¼Œå¹¶ç”¨mxå’Œmyè®°å½•å½“å‰ç‚¹çš„åæ ‡</span></span><br><span class="line">		max = sum;</span><br><span class="line">		mx = x;</span><br><span class="line">		my = y;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//æšä¸¾å››ä¸ªæ–¹å‘</span></span><br><span class="line">	<span class="keyword">for</span> (k = <span class="number">0</span>; k &lt;= <span class="number">3</span>; k++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//ä¸‹ä¸ªç‚¹çš„åæ ‡</span></span><br><span class="line">		tx = x + next[k][<span class="number">0</span>];</span><br><span class="line">		ty = y + next[k][<span class="number">1</span>];</span><br><span class="line">		<span class="comment">//åˆ¤æ–­æ˜¯å¦è¶Šç•Œ</span></span><br><span class="line">		<span class="keyword">if</span> (tx&lt;<span class="number">0</span> || tx&gt;n - <span class="number">1</span> || ty&lt;<span class="number">0</span> || ty&gt;m - <span class="number">1</span>)</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		<span class="comment">//åˆ¤æ–­æ˜¯å¦å›´å¢™æˆ–è€…å·²ç»èµ°è¿‡</span></span><br><span class="line">		<span class="keyword">if</span> (a[tx][ty] == <span class="string">&#x27;.&#x27;</span> &amp;&amp; book[tx][ty] == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			book[tx][ty] = <span class="number">1</span>;<span class="comment">//æ ‡è®°è¿™ä¸ªç‚¹å·²èµ°è¿‡</span></span><br><span class="line">			dfs(tx, ty);<span class="comment">//å¼€å§‹å°è¯•ä¸‹ä¸€ä¸ªç‚¹</span></span><br><span class="line">			<span class="comment">//book[tx][ty]=0</span></span><br><span class="line"><span class="comment">//æ­¤å¤„ä¸ç”¨æ”¶å›ï¼Œä¸è·¯å¾„æˆ–è€…æ­¥æ•°æœ‰å…³çš„æ·±æœï¼Œéœ€è¦æ”¶å›æ ‡è®°ï¼Œæ— å…³åˆ™ä¸éœ€è¦å›æ”¶</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i, startx, starty;</span><br><span class="line">	<span class="comment">//è¯»å…¥nå’Œmï¼Œnè¡¨ç¤ºæœ‰å¤šå°‘è¡Œå­—ç¬¦ï¼Œmè¡¨ç¤ºæ¯è¡Œæœ‰å¤šå°‘å­—ç¬¦</span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d %d&quot;</span>, &amp;n, &amp;m, &amp;startx, &amp;starty);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//è¯»å…¥nè¡Œå­—ç¬¦</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt;= n - <span class="number">1</span>; i++)</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, a[i]);</span><br><span class="line">	<span class="comment">//ä»å°äººç«™çš„ä½ç½®å¼€å§‹å°è¯•</span></span><br><span class="line">	book[startx][starty] = <span class="number">1</span>;</span><br><span class="line">	max = getnum(startx, starty);</span><br><span class="line">	mx = startx;</span><br><span class="line">	my = starty;</span><br><span class="line">	dfs(startx, starty);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;å°†ç‚¸å¼¹æ”¾ç½®åœ¨ï¼ˆ%d %d),æœ€å¤šå¯ä»¥ä¸‹æ¶ˆç­%dä¸ªæ•Œäºº\n&quot;</span>, mx, my, max);</span><br><span class="line">	getchar(); getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬-5-èŠ‚-å®å²›æ¢é™©"><a class="header-anchor" href="#ç¬¬-5-èŠ‚-å®å²›æ¢é™©">ğŸŒ³</a>ç¬¬ 5 èŠ‚ å®å²›æ¢é™©</h3>
<h4 id="å¹¿åº¦æœç´¢"><a class="header-anchor" href="#å¹¿åº¦æœç´¢">ğŸŒ³</a>å¹¿åº¦æœç´¢</h4>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span>  _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="comment">//	ç®—æ³•ï¼šBFS</span></span><br><span class="line"><span class="comment">//	æ—¶é—´ï¼š2021.10.29</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="type">int</span> x;<span class="comment">//æ¨ªåæ ‡</span></span><br><span class="line">	<span class="type">int</span> y;<span class="comment">//çºµåæ ‡</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">node</span> <span class="title">que</span>[2501];</span></span><br><span class="line">	<span class="type">int</span> head, tail;</span><br><span class="line">	<span class="type">int</span> a[<span class="number">51</span>][<span class="number">51</span>];</span><br><span class="line">	<span class="type">int</span> book[<span class="number">51</span>][<span class="number">51</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	<span class="type">int</span> i, j, k, sum, max = <span class="number">0</span>, mx, my, n, m, startx, starty, tx, ty;</span><br><span class="line">	<span class="comment">//å®šä¹‰ä¸€ä¸ªæ–¹å‘æ•°ç»„</span></span><br><span class="line">	<span class="type">int</span> next[<span class="number">4</span>][<span class="number">2</span>] = &#123;</span><br><span class="line">		&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,<span class="comment">//å‘å³èµ°</span></span><br><span class="line">		&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,<span class="comment">//å‘ä¸‹èµ°</span></span><br><span class="line">		&#123;<span class="number">0</span>,<span class="number">-1</span>&#125;,<span class="comment">//å‘å·¦èµ°</span></span><br><span class="line">		&#123;<span class="number">-1</span>,<span class="number">0</span>&#125;<span class="comment">//å‘ä¸Šèµ°</span></span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="comment">//è¯»å…¥nè¡Œmåˆ—ä»¥åŠå°å“¼é™è½çš„åæ ‡</span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d %d&quot;</span>, &amp;n, &amp;m, &amp;startx, &amp;starty);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//è¯»å…¥åœ°å›¾</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		<span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i][j]);</span><br><span class="line">	<span class="comment">//é˜Ÿåˆ—åˆå§‹åŒ–</span></span><br><span class="line">	head = <span class="number">1</span>;</span><br><span class="line">	tail = <span class="number">1</span>;</span><br><span class="line">	<span class="comment">//å¾€é˜Ÿåˆ—æ’å…¥é™è½çš„èµ·å§‹åæ ‡</span></span><br><span class="line">	que[tail].x = startx;</span><br><span class="line">	que[tail].y = starty;</span><br><span class="line">	tail++;</span><br><span class="line">	book[startx][starty] = <span class="number">1</span>;</span><br><span class="line">	sum = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å½“é˜Ÿåˆ—ä¸ä¸ºç©ºçš„æ—¶å€™å¾ªç¯</span></span><br><span class="line">	<span class="keyword">while</span> (head &lt; tail)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//æšä¸¾4ä¸ªæ–¹å‘</span></span><br><span class="line">		<span class="keyword">for</span> (k = <span class="number">0</span>; k &lt;= <span class="number">3</span>; k++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//è®¡ç®—ä¸‹ä¸€æ­¥çš„åæ ‡</span></span><br><span class="line">			tx = que[head].x + next[k][<span class="number">0</span>];</span><br><span class="line">			ty = que[head].y + next[k][<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">			<span class="comment">//åˆ¤æ–­æ˜¯å¦è¶Šç•Œ</span></span><br><span class="line">			<span class="keyword">if</span> (tx&lt;<span class="number">1</span> || tx&gt;n || ty&lt;<span class="number">1</span> || ty&gt;m)</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">			<span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯é™†åœ°æˆ–è€…æ›¾ç»æ˜¯å¦èµ°è¿‡</span></span><br><span class="line">			<span class="keyword">if</span> (a[tx][ty] &gt; <span class="number">0</span> &amp;&amp; book[tx][ty] == <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				sum++;</span><br><span class="line">				<span class="comment">//æ¯ä¸ªç‚¹åªå…¥é˜Ÿä¸€æ¬¡ï¼Œæ‰€ä»¥éœ€è¦æ ‡è®°è¿™ä¸ªç‚¹å·²ç»èµ°è¿‡</span></span><br><span class="line">				book[tx][ty] = <span class="number">1</span>;</span><br><span class="line">				<span class="comment">//å°†æ–°æ‰©å±•çš„ç‚¹åŠ å…¥é˜Ÿåˆ—</span></span><br><span class="line">				que[tail].x = tx;</span><br><span class="line">				que[tail].y = ty;</span><br><span class="line">				tail++;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		head++;<span class="comment">//æ³¨æ„è¿™åœ°æ–¹åƒä¸‡ä¸èƒ½å¿˜è®°</span></span><br><span class="line">		<span class="comment">//å½“ä¸€ä¸ªç‚¹æ‰©å±•ç»“æŸåï¼Œhead++æ‰èƒ½ç»§ç»­å¾€ä¸‹æ‰©å±•</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//æœ€åè¾“å‡ºå²›å±¿çš„å¤§å°</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, sum);</span><br><span class="line">	getchar(); getchar();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ·±åº¦æ¢ç´¢"><a class="header-anchor" href="#æ·±åº¦æ¢ç´¢">ğŸŒ³</a>æ·±åº¦æ¢ç´¢</h4>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span>  _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="comment">//	ç®—æ³•ï¼šDFS</span></span><br><span class="line"><span class="comment">//	æ—¶é—´ï¼š2021.10.29</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> a[<span class="number">51</span>][<span class="number">51</span>];</span><br><span class="line"><span class="type">int</span> book[<span class="number">51</span>][<span class="number">51</span>], n, m, sum;</span><br><span class="line"><span class="type">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//å®šä¹‰ä¸€ä¸ªæ–¹å‘æ•°ç»„</span></span><br><span class="line">	<span class="type">int</span> next[<span class="number">4</span>][<span class="number">2</span>] = &#123;</span><br><span class="line">		&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,<span class="comment">//å‘å³èµ°</span></span><br><span class="line">		&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,<span class="comment">//å‘ä¸‹èµ°</span></span><br><span class="line">		&#123;<span class="number">0</span>,<span class="number">-1</span>&#125;,<span class="comment">//å‘å·¦èµ°</span></span><br><span class="line">		&#123;<span class="number">-1</span>,<span class="number">0</span>&#125;<span class="comment">//å‘ä¸Šèµ°</span></span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="type">int</span> k, tx, ty;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//æšä¸¾4ä¸ªæ–¹å‘</span></span><br><span class="line">	<span class="keyword">for</span> (k = <span class="number">0</span>; k &lt;= <span class="number">3</span>; k++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//è®¡ç®—ä¸‹ä¸€æ­¥åæ ‡</span></span><br><span class="line">		tx = x + next[k][<span class="number">0</span>];</span><br><span class="line">		ty = y + next[k][<span class="number">1</span>];</span><br><span class="line">		<span class="comment">//åˆ¤æ–­æ˜¯å¦è¶Šç•Œ</span></span><br><span class="line">		<span class="keyword">if</span> (tx&lt;<span class="number">1</span> || tx&gt;n || ty&lt;<span class="number">1</span> || ty&gt;m)</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		<span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯é™†åœ°</span></span><br><span class="line">		<span class="keyword">if</span> (a[tx][ty] &gt; <span class="number">0</span> &amp;&amp; book[tx][ty] == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			sum++;</span><br><span class="line">			book[tx][ty] = <span class="number">1</span>;<span class="comment">//æ ‡è®°è¿™ä¸ªç‚¹å·²èµ°è¿‡</span></span><br><span class="line">			dfs(tx, ty);<span class="comment">//å¼€å§‹å°è¯•ä¸‹ä¸€ä¸ªç‚¹</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i, j, startx, starty;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d %d&quot;</span>, &amp;n, &amp;m, &amp;startx, &amp;starty);</span><br><span class="line">	<span class="comment">//è¯»å…¥åœ°å›¾</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		<span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i][j]);</span><br><span class="line"></span><br><span class="line">	book[startx][starty] = <span class="number">1</span>;</span><br><span class="line">	sum = <span class="number">1</span>;</span><br><span class="line">	<span class="comment">//ä»é™è½çš„ä½ç½®å¼€å§‹</span></span><br><span class="line">	dfs(startx, starty);</span><br><span class="line">	<span class="comment">//æœ€åè¾“å‡ºå²›å±¿çš„å¤§å°</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, sum);</span><br><span class="line">	getchar(); getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ å® è¿™ å°± æ˜¯ æ±‚ ä¸€ ä¸ª å›¾ ä¸­ ç‹¬ ç«‹ å­ å›¾ çš„ ä¸ª æ•° . è¿™ ä¸ª ç®— æ³• å°± æ˜¯ é¼ é¼ å¤§ å çš„ Floodfill æ¼«æ°´å¡« å…… æ³•<br>
( ä¹Ÿ ç§° ç§ å­ å¡« å…… æ³• ),Floodfill åœ¨ è®¡ ç®— æ˜º å›¾ å½¢ å­¦ ä¸­ æ˜‰ ç€ é å¸¸ å¹¿ æ³› çš„ è¿ ç”¨ , æ¯” å¦‚ å›¾ åƒ åˆ† å‰² ã€ ç‰© ä½“<br>
è¯† åˆ« ç­‰ ç­‰ ã€‚ å¤ å¤– æˆ‘ ä»¬ ç†Ÿ çŸ¥ çš„ Windows ä¸‹ â€œ ç”» å›¾â€œ è½¯ ä»¶ çš„ æ²¹ æ¼† æ¡¶ å·¥ å…· å°± æ˜¯ åŸº äº è¿™ ä¸ª ç®— æ³• çš„ ã€‚<br>
å½“ ä½  éœ€ è¦ ç»™ æ£  ä¸ª å¯† é—­ åŒº åŸŸ æ¶‚ è‰² æˆ– è€… æ›´ æ”¹ æ ‡ ä¸ª å¯† é—­ åŒº åŸŸçš„ é¢œ è‰² æ—¶ , ç¨‹ åº è‡ª åŠ¨ é€‰ ä¸­ ä¸ ç§ å­ ç‚¹ ( é¼ <br>
æ ‡ å·¦ é”® å• å‡» çš„ ä½ ç½® ) å‘¨ è¾¹ é¢œ è‰² ç›¸ åŒ çš„ åŒº åŸŸ , æ‹³ ç€ å°† è¯¥ åŒº åŸŸ æ›¿ æ‰¢ æˆ æˆ‡ å®š çš„ é¢œ è‰² ã€‚Photoshop çš„<br>
é­” æ˜¯ æ¡ é€‰ æ‹© å·¥ å…· ä¹Ÿ å¯ ä»¥ åŸº äº è¿™ ä¸ª ç®— æ³• å® ç° ã€‚ å…· ä½“ çš„ ç®— æ³• æ˜¯ : æ›¥ æ‰¾ ç§ å­ ç‚¹ å‘¨ è¾¹ çš„ ç‚¹ , å°† ä¸ ç§ å­<br>
ç‚¹ é¢œ è‰² ç›¸ è¿‘ çš„ ç‚¹ ( å¯ ä»¥ è®¾ ç½® ä¸€ ä¸ª é—¹ å€¼ ) å…¥ é˜Ÿ ä½œ ä¸º æ–° ç§ å­ , å¹¶ å¯¹ æ–° å…¥ é˜Ÿ çš„ ç§ å­ ä¹Ÿ è¿¹ è¡Œ åŒ æ · çš„ æ‰©<br>
å±• æ“ ä½œ , è¿™ æ · å°± é€‰ å– äº† å’Œ æ˜€ åˆ ç§ å­ ç›¸ è¿‘ é¢œ è‰² çš„ åŒº åŸŸ</p>
<h3 id="ç¬¬-6-èŠ‚-æ°´ç®¡å·¥æ¸¸æˆ-117"><a class="header-anchor" href="#ç¬¬-6-èŠ‚-æ°´ç®¡å·¥æ¸¸æˆ-117">ğŸŒ³</a>ç¬¬ 6 èŠ‚ æ°´ç®¡å·¥æ¸¸æˆ 117</h3>
<p><a href="https://github.com/0joe1/algorithm/">github 0joe1 æ°´ç®¡å·¥æ¸¸æˆ æºç </a></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> a[<span class="number">51</span>][<span class="number">51</span>];</span><br><span class="line"><span class="type">int</span> book[<span class="number">51</span>][<span class="number">51</span>],n,m,flag=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">pos</span>&#123;</span></span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    <span class="type">int</span> y;</span><br><span class="line">&#125;s[<span class="number">100</span>];</span><br><span class="line"><span class="type">int</span> top=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">_Bool</span> <span class="title function_">isvalid</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x&gt;=<span class="number">0</span> &amp;&amp; x&lt;n &amp;&amp; y&gt;=<span class="number">0</span> &amp;&amp; y&lt;m &amp;&amp; a[x][y])&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> front)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (x==n<span class="number">-1</span> &amp;&amp; y==m)&#123;</span><br><span class="line">        flag=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;top;i++)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;(%d,%d) &quot;</span>,s[i].x,s[i].y);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!isvalid(x,y) || book[x][y])&#123;</span><br><span class="line">       <span class="comment">// printf(&quot;(%d,%d)&quot;,x,y);</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    book[x][y]=<span class="number">1</span>;</span><br><span class="line">    s[top].x=x;</span><br><span class="line">    s[top].y=y;</span><br><span class="line">    top++;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (a[x][y]&gt;<span class="number">0</span> &amp;&amp; a[x][y]&lt;=<span class="number">4</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">switch</span> (front)</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            dfs(x<span class="number">-1</span>,y,<span class="number">4</span>);</span><br><span class="line">            dfs(x+<span class="number">1</span>,y,<span class="number">2</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            dfs(x,y<span class="number">-1</span>,<span class="number">3</span>);</span><br><span class="line">            dfs(x,y+<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            dfs(x<span class="number">-1</span>,y,<span class="number">4</span>);</span><br><span class="line">            dfs(x+<span class="number">1</span>,y,<span class="number">2</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">            dfs(x,y<span class="number">-1</span>,<span class="number">3</span>);</span><br><span class="line">            dfs(x,y+<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (a[x][y]&gt;<span class="number">4</span> &amp;&amp; a[x][y]&lt;=<span class="number">6</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">switch</span> (front)</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            dfs(x,y+<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            dfs(x+<span class="number">1</span>,y,<span class="number">2</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            dfs(x,y<span class="number">-1</span>,<span class="number">3</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">            dfs(x<span class="number">-1</span>,y,<span class="number">4</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    book[x][y]=<span class="number">0</span>;</span><br><span class="line">    top--;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i,j,num=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;m;j++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i][j]);</span><br><span class="line">    dfs(<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (flag)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;æ‰¾åˆ°é“ºè®¾æ–¹æ¡ˆ&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;impossible\n&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*5 4</span></span><br><span class="line"><span class="comment">5 3 5 3</span></span><br><span class="line"><span class="comment">1 5 3 0</span></span><br><span class="line"><span class="comment">2 3 5 1</span></span><br><span class="line"><span class="comment">6 1 1 5</span></span><br><span class="line"><span class="comment">1 5 5 4*/</span></span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬-5-ç« -å›¾çš„éå†-128"><a class="header-anchor" href="#ç¬¬-5-ç« -å›¾çš„éå†-128">ğŸŒ³</a>ç¬¬ 5 ç«  å›¾çš„éå† 128</h2>
<h3 id="ç¬¬-1-èŠ‚-æ·±åºå’Œå¹¿åºä¼˜å…ˆç©¶ç«Ÿæ˜¯æŒ‡å•¥-129"><a class="header-anchor" href="#ç¬¬-1-èŠ‚-æ·±åºå’Œå¹¿åºä¼˜å…ˆç©¶ç«Ÿæ˜¯æŒ‡å•¥-129">ğŸŒ³</a>ç¬¬ 1 èŠ‚ æ·±åºå’Œå¹¿åºä¼˜å…ˆç©¶ç«Ÿæ˜¯æŒ‡å•¥ 129</h3>
<h4 id="æ·±åº¦ä¼˜å…ˆæœç´¢éå†å›¾"><a class="header-anchor" href="#æ·±åº¦ä¼˜å…ˆæœç´¢éå†å›¾">ğŸŒ³</a>æ·±åº¦ä¼˜å…ˆæœç´¢éå†å›¾</h4>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span>  _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="comment">//	æ—¶é—´ï¼š2021.10.30</span></span><br><span class="line"><span class="comment">//  ç›®çš„ï¼šç”¨æ·±åº¦ä¼˜å…ˆæœç´¢éå†å›¾ï¼ˆæ— å‘ï¼‰</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> book[<span class="number">101</span>], sum, n, e[<span class="number">101</span>][<span class="number">101</span>];</span><br><span class="line"><span class="comment">//è¿™é‡Œçš„å›¾æ˜¯ç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„eæ¥å­˜å‚¨ï¼ŒäºŒç»´æ•°ç»„ä¸­ç¬¬iè¡Œç¬¬jåˆ—è¡¨ç¤ºçš„å°±æ˜¯é¡¶ç‚¹iåˆ°&#x27;</span></span><br><span class="line"><span class="comment">//é¡¶ç‚¹jæ˜¯å¦æœ‰è¾¹ï¼Œ1è¡¨ç¤ºæœ‰è¾¹ï¼Œæ— ç©·è¡¨ç¤ºæ²¡æœ‰è¾¹ã€‚è¿™é‡Œæˆ‘ä»¬å°†è‡ªå·±åˆ°è‡ªå·±ï¼ˆå³iç­‰äºj)</span></span><br><span class="line"><span class="comment">//è®¾ä¸º0.æˆ‘ä»¬å°†è¿™ç§å­˜å‚¨å›¾çš„æ–¹æ³•ç§°ä¸ºå›¾çš„é‚»æ¥çŸ©é˜µå­˜å‚¨æ³•ã€‚</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> cur)</span><span class="comment">//curæ˜¯å½“å‰æ‰€åœ¨çš„é¡¶ç‚¹ç¼–å·</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, cur);</span><br><span class="line">	sum++;<span class="comment">//æ¯è®¿é—®ä¸€ä¸ªé¡¶ç‚¹ï¼Œsumå°±åŠ 1</span></span><br><span class="line">	<span class="keyword">if</span> (sum == n)   <span class="keyword">return</span>;<span class="comment">//æ‰€æœ‰çš„é¡¶ç‚¹éƒ½å·²ç»è®¿é—®è¿‡åˆ™ç›´æ¥é€€å‡º</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)<span class="comment">//ä»1å·é¡¶ç‚¹åˆ°nå·é¡¶ç‚¹ä¾æ¬¡å°è¯•ï¼Œçœ‹å“ªäº›é¡¶ç‚¹ä¸å½“å‰é¡¶ç‚¹curæœ‰è¾¹ç›¸è¿</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//åˆ¤æ–­å½“å‰é¡¶ç‚¹curåˆ°é¡¶ç‚¹iæ˜¯å¦æœ‰è¾¹ï¼Œå¹¶åˆ¤æ–­é¡¶ç‚¹iæ˜¯å¦å·²è®¿é—®è¿‡</span></span><br><span class="line">		<span class="keyword">if</span> (e[cur][i] == <span class="number">1</span> &amp;&amp; book[i] == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			book[i] = <span class="number">1</span>;</span><br><span class="line">			dfs(i);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i, j, m, a, b;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">	<span class="comment">//åˆå§‹åŒ–äºŒç»´çŸ©é˜µ</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		<span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">			<span class="keyword">if</span> (i == j) e[i][j] = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">else</span> e[i][j] = <span class="number">99999999</span>;<span class="comment">//æˆ‘ä»¬è¿™é‡Œå‡è®¾99999999ä¸ºæ­£æ— ç©·</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//è¯»å…¥é¡¶ç‚¹ä¹‹é—´çš„è¾¹</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">		e[a][b] = <span class="number">1</span>;</span><br><span class="line">		e[b][a] = <span class="number">1</span>;<span class="comment">//è¿™é‡Œæ˜¯æ— å‘å›¾ï¼Œæ‰€ä»¥éœ€è¦å°†e[b][a]ä¹Ÿèµ‹ä¸º1</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//ä»1å·åŸå¸‚å‡ºå‘</span></span><br><span class="line">	book[<span class="number">1</span>] = <span class="number">1</span>;<span class="comment">//æ ‡è®°1å·é¡¶ç‚¹å·²è®¿é—®</span></span><br><span class="line">	dfs(<span class="number">1</span>);<span class="comment">//ä»1å·é¡¶ç‚¹å¼€å§‹éå†</span></span><br><span class="line">	getchar(); getchar();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å¹¿åº¦ä¼˜å…ˆæœç´¢éå†å›¾"><a class="header-anchor" href="#å¹¿åº¦ä¼˜å…ˆæœç´¢éå†å›¾">ğŸŒ³</a>å¹¿åº¦ä¼˜å…ˆæœç´¢éå†å›¾</h4>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span>  _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="comment">//	æ—¶é—´ï¼š2021.10.30</span></span><br><span class="line"><span class="comment">//  ç›®çš„ï¼šç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢éå†å›¾(æ— å‘ï¼‰</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i, j, n, m, a, b, cur, book[<span class="number">101</span>] = &#123; <span class="number">0</span> &#125;, e[<span class="number">101</span>][<span class="number">101</span>];</span><br><span class="line">	<span class="type">int</span> que[<span class="number">10001</span>], head, tail;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">	<span class="comment">//åˆå§‹åŒ–äºŒç»´çŸ©é˜µ</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		<span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">			<span class="keyword">if</span> (i == j) e[i][j] = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">else</span> e[i][j] = <span class="number">99999999</span>;<span class="comment">//å‡è®¾99999999ä¸ºæ— ç©·å¤§</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//è¯»å…¥é¡¶ç‚¹ä¹‹é—´çš„è¾¹</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">		e[a][b] = <span class="number">1</span>;</span><br><span class="line">		e[b][a] = <span class="number">1</span>;<span class="comment">//å› ä¸ºè¿™é‡Œæ˜¯æ— å‘å›¾</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//é˜Ÿåˆ—åˆå§‹åŒ–</span></span><br><span class="line">	head = <span class="number">1</span>;</span><br><span class="line">	tail = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//ä»1å·é¡¶ç‚¹å‡ºå‘ï¼Œå°†1å·é¡¶ç‚¹åŠ å…¥é˜Ÿåˆ—</span></span><br><span class="line">	que[tail] = <span class="number">1</span>;</span><br><span class="line">	tail++;</span><br><span class="line">	book[<span class="number">1</span>] = <span class="number">1</span>;<span class="comment">//æ ‡è®°1å·é¡¶ç‚¹å·²è®¿é—®</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//å½“é˜Ÿåˆ—ä¸ä¸ºç©ºçš„æ—¶å€™å¾ªç¯</span></span><br><span class="line">	<span class="keyword">while</span> (head &lt; tail)</span><br><span class="line">	&#123;</span><br><span class="line">		cur = que[head];<span class="comment">//å½“å‰æ­£åœ¨è®¿é—®çš„é¡¶ç‚¹ç¼–å·</span></span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)<span class="comment">//ä»1-nä¾æ¬¡å°è¯•</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//åˆ¤æ–­ä»é¡¶ç‚¹curåˆ°é¡¶ç‚¹iæ˜¯å¦æœ‰è¾¹ï¼Œå¹¶åˆ¤æ–­é¡¶ç‚¹iæ˜¯å¦å·²ç»è®¿é—®è¿‡</span></span><br><span class="line">			<span class="keyword">if</span> (e[cur][i] == <span class="number">1</span> &amp;&amp; book[i] == <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">//å¦‚æœä»é¡¶ç‚¹curåˆ°é¡¶ç‚¹iæœ‰è¾¹ï¼Œå¹¶ä¸”é¡¶ç‚¹iæ²¡æœ‰è¢«è®¿é—®è¿‡ï¼Œåˆ™å°†é¡¶ç‚¹iå…¥é˜Ÿ</span></span><br><span class="line">				que[tail] = i;</span><br><span class="line">				tail++;</span><br><span class="line">				book[i] = <span class="number">1</span>;<span class="comment">//æ ‡è®°é¡¶ç‚¹iå·²è®¿é—®</span></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//å¦‚æœtailå¤§äºnï¼Œåˆ™è¡¨æ˜æ‰€æœ‰é¡¶ç‚¹éƒ½å·²ç»è¢«è®¿é—®è¿‡äº†</span></span><br><span class="line">			<span class="keyword">if</span> (tail &gt; n)</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		head++;<span class="comment">//æ³¨æ„è¿™ä¸ªåœ°æ–¹ï¼Œåƒä¸‡ä¸è¦å¿˜è®°å½“ä¸€ä¸ªé¡¶ç‚¹æ‰©å±•ç»“æŸåï¼Œhead++ï¼Œç„¶åæ‰èƒ½ç»§ç»­å‘ä¸‹æ‰©å±•</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; tail; i++)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, que[i]);</span><br><span class="line">	getchar(); getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬-2-èŠ‚-åŸå¸‚åœ°å›¾-å›¾çš„æ·±åºä¼˜å…ˆéå†"><a class="header-anchor" href="#ç¬¬-2-èŠ‚-åŸå¸‚åœ°å›¾-å›¾çš„æ·±åºä¼˜å…ˆéå†">ğŸŒ³</a>ç¬¬ 2 èŠ‚ åŸå¸‚åœ°å›¾â€”â€”å›¾çš„æ·±åºä¼˜å…ˆéå†</h3>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span>  _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="comment">//	æ—¶é—´ï¼š2021.11.1</span></span><br><span class="line"><span class="comment">//	ç®—æ³•ï¼šç”¨æ·±åº¦ä¼˜å…ˆæœç´¢éå†å›¾ï¼ˆæœ‰å‘ï¼‰</span></span><br><span class="line"><span class="comment">//	ç›®çš„ï¼šæ‰¾å‡ºä¸¤ä¸ªåœ°ç‚¹çš„æœ€çŸ­è·¯å¾„</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> min = <span class="number">99999999</span>, book[<span class="number">101</span>], n, e[<span class="number">101</span>][<span class="number">101</span>];<span class="comment">//æˆ‘ä»¬è¿™é‡Œå‡è®¾99999999ä¸ºæ­£æ— ç©·</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//curæ˜¯å½“å‰æ‰€åœ¨çš„åŸå¸‚ç¼–å·ï¼Œdisæ˜¯å½“å‰å·²ç»èµ°è¿‡çš„è·¯ç¨‹</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> cur, <span class="type">int</span> dis)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> j;</span><br><span class="line">	<span class="comment">//å¦‚æœå½“å‰èµ°è¿‡çš„è·¯ç¨‹å·²ç»å¤§äºä¹‹å‰æ‰¾åˆ°çš„æœ€çŸ­è·¯ï¼Œåˆ™æ²¡æœ‰å¿…è¦å†å¾€ä¸‹å°è¯•äº†ï¼Œç«‹å³è¿”å›</span></span><br><span class="line">	<span class="keyword">if</span> (dis &gt; min) <span class="keyword">return</span>;</span><br><span class="line">	<span class="keyword">if</span> (cur == n)<span class="comment">//åˆ¤æ–­æ˜¯å¦åˆ°è¾¾äº†ç›®æ ‡åŸå¸‚</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (dis &lt; min) min = dis;<span class="comment">//æ›´æ–°æœ€å°å€¼</span></span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= n; j++)<span class="comment">//ä»1å·åŸå¸‚åˆ°nå·åŸå¸‚ä¾æ¬¡å°è¯•</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//åˆ¤æ–­å½“å‰åŸå¸‚curåˆ°åŸå¸‚jæ˜¯å¦æœ‰è·¯ï¼Œå¹¶åˆ¤æ–­åŸå¸‚jæ˜¯å¦åœ¨å·²èµ°è¿‡çš„è·¯å¾„ä¸­</span></span><br><span class="line">		<span class="keyword">if</span> (e[cur][j] != <span class="number">99999999</span> &amp;&amp; book[j] == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			book[j] = <span class="number">1</span>;<span class="comment">//æ ‡è®°åŸå¸‚jå·²ç»åœ¨è·¯å¾„ä¸­</span></span><br><span class="line">			dfs(j, dis + e[cur][j]);<span class="comment">//ä»åŸå¸‚jå†å‡ºå‘ï¼Œç»§ç»­å¯»æ‰¾ç›®æ ‡åŸå¸‚</span></span><br><span class="line">			book[j] = <span class="number">0</span>;<span class="comment">//ä¹‹å‰ä¸€æ­¥æ¢ç´¢å®Œæ¯•ä¹‹åï¼Œå–æ¶ˆå¯¹åŸå¸‚jçš„æ ‡è®°</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i, j, m, a, b, c;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">	<span class="comment">//åˆå§‹åŒ–äºŒç»´çŸ©é˜µ</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		<span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">			<span class="keyword">if</span> (i == j) e[i][j] = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">else</span>   e[i][j] = <span class="number">99999999</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//è¯»å…¥åŸå¸‚ä¹‹é—´çš„é“è·¯</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">		e[a][b] = c;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//ä»1å·åŸå¸‚å‡ºå‘</span></span><br><span class="line">	book[<span class="number">1</span>] = <span class="number">1</span>;<span class="comment">//æ ‡è®°1å·åŸå¸‚å·²ç»åœ¨è·¯å¾„ä¸­</span></span><br><span class="line">	dfs(<span class="number">1</span>, <span class="number">0</span>);<span class="comment">//1è¡¨ç¤ºå½“å‰æ‰€åœ¨çš„åŸå¸‚ç¼–å·ï¼Œ0è¡¨ç¤ºå½“å‰å·²ç»èµ°è¿‡çš„è·¯ç¨‹</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, min);<span class="comment">//æ‰“å°1å·åŸå¸‚åˆ°5å·åŸå¸‚çš„æœ€çŸ­è·¯å¾„</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬-3-èŠ‚-æœ€å°‘è½¬æœº-å›¾çš„å¹¿åºä¼˜å…ˆéå†"><a class="header-anchor" href="#ç¬¬-3-èŠ‚-æœ€å°‘è½¬æœº-å›¾çš„å¹¿åºä¼˜å…ˆéå†">ğŸŒ³</a>ç¬¬ 3 èŠ‚ æœ€å°‘è½¬æœºâ€”â€”å›¾çš„å¹¿åºä¼˜å…ˆéå†</h3>
<p>å¹¿ åº¦ ä¼˜ å…ˆ æœ ç´¢ æ›´åŠ  é€‚ ç”¨ äº æ‰€ æœ‰è¾¹çš„æƒ å€¼ ç›¸ åŒçš„ æƒ… å†µ<br>
å›¾ çš„ é‚»æ¥ çŸ© é˜µ å­˜ å‚… æ³• ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span>  _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="comment">//   æ—¶é—´ï¼š2021.11.3</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="type">int</span> x;<span class="comment">//åŸå¸‚ç¼–å·</span></span><br><span class="line">	<span class="type">int</span> s;<span class="comment">//è½¬æœºæ¬¡æ•°</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">node</span> <span class="title">que</span>[2501];</span></span><br><span class="line">	<span class="type">int</span> e[<span class="number">51</span>][<span class="number">51</span>] = &#123; <span class="number">0</span> &#125;, book[<span class="number">51</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	<span class="type">int</span> head, tail;</span><br><span class="line">	<span class="type">int</span> i, j, n, m, a, b, cur, start, end, flag = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d %d&quot;</span>, &amp;n, &amp;m, &amp;start, &amp;end);</span><br><span class="line">	<span class="comment">//åˆå§‹åŒ–äºŒç»´çŸ©é˜µ</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		<span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">			<span class="keyword">if</span> (i == j)  e[i][j] = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">else</span>  e[i][j] = <span class="number">99999999</span>;</span><br><span class="line">	<span class="comment">//è¯»å…¥åŸå¸‚ä¹‹é—´çš„èˆªç­</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">		<span class="comment">//æ³¨æ„è¿™é‡Œæ˜¯æ— å‘å›¾</span></span><br><span class="line">		e[a][b] = <span class="number">1</span>;</span><br><span class="line">		e[b][a] = <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//é˜Ÿåˆ—åˆå§‹åŒ–</span></span><br><span class="line">	head = <span class="number">1</span>;</span><br><span class="line">	tail = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//ä»startå·åŸå¸‚å‡ºå‘ï¼Œå°†startå·åŸå¸‚åŠ å…¥é˜Ÿåˆ—</span></span><br><span class="line">	que[tail].x = start;</span><br><span class="line">	que[tail].s = <span class="number">0</span>;</span><br><span class="line">	tail++;</span><br><span class="line">	book[<span class="number">1</span>] = start;<span class="comment">//æ ‡è®°startå·åŸå¸‚å·²åœ¨é˜Ÿåˆ—ä¸­</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//å½“é˜Ÿåˆ—ä¸ä¸ºç©ºçš„æ—¶å€™å¾ªç¯</span></span><br><span class="line">	<span class="keyword">while</span> (head &lt; tail)</span><br><span class="line">	&#123;</span><br><span class="line">		cur = que[head].x;<span class="comment">//å½“å‰é˜Ÿåˆ—ä¸­é¦–åŸå¸‚çš„ç¼–å·</span></span><br><span class="line">		<span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= n; j++)<span class="comment">//ä»1åˆ°nä¾æ¬¡å°è¯•</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//ä»åŸå¸‚curåˆ°åŸå¸‚jæ˜¯å¦æœ‰èˆªç­å¹¶ä¸”åˆ¤æ–­åŸå¸‚jæ˜¯å¦å·²ç»åœ¨é˜Ÿåˆ—ä¸­</span></span><br><span class="line">			<span class="keyword">if</span> (e[cur][j] != <span class="number">99999999</span> &amp;&amp; book[j] == <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">//å¦‚æœä»åŸå¸‚curåˆ°åŸå¸‚jæœ‰èˆªç­å¹¶ä¸”åŸå¸‚jä¸åœ¨é˜Ÿåˆ—ä¸­ï¼Œåˆ™å°†jå·åŸå¸‚å…¥é˜Ÿ</span></span><br><span class="line">				que[tail].x = j;</span><br><span class="line">				que[tail].s = que[head].s + <span class="number">1</span>;<span class="comment">//è½¬æœºæ¬¡æ•°+1</span></span><br><span class="line">				tail++;</span><br><span class="line">				<span class="comment">//æ ‡è®°åŸå¸‚jå·²ç»åœ¨é˜Ÿåˆ—ä¸­</span></span><br><span class="line">				book[j] = <span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//å¦‚æœåˆ°è¾¾ç›®æ ‡åŸå¸‚ï¼Œåœæ­¢æ‰©å±•ï¼Œä»»åŠ¡ç»“æŸï¼Œé€€å‡ºå¾ªç¯</span></span><br><span class="line">			<span class="keyword">if</span> (que[tail].x == end)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">//æ³¨æ„ä¸‹é¢ä¸¤å¥è¯çš„ä½ç½®åƒä¸‡ä¸è¦å†™é¢ å€’äº†</span></span><br><span class="line">				flag = <span class="number">1</span>;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (flag == <span class="number">1</span>)</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		head++;<span class="comment">//æ³¨æ„è¿™åœ°æ–¹ï¼Œåƒä¸‡ä¸è¦å¿˜è®°å½“ä¸€ä¸ªç‚¹æ‰©å±•ç»“æŸåï¼Œhead++æ‰èƒ½ç»§ç»­æ‰©å±•</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//æ‰“å°é˜Ÿåˆ—ä¸­æœ«å°¾æœ€åä¸€ä¸ªï¼ˆç›®æ ‡åŸå¸‚ï¼‰çš„è½¬æœºæ¬¡æ•°</span></span><br><span class="line">	<span class="comment">//æ³¨æ„tailæ˜¯æŒ‡å‘é˜Ÿåˆ—é˜Ÿå°¾ï¼ˆå³æœ€åä¸€ä½ï¼‰çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼Œæ‰€ä»¥éœ€è¦-1</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, que[tail - <span class="number">1</span>].s);</span><br><span class="line"></span><br><span class="line">	getchar(); getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬-6-ç« -æœ€çŸ­è·¯å»®"><a class="header-anchor" href="#ç¬¬-6-ç« -æœ€çŸ­è·¯å»®">ğŸŒ³</a>ç¬¬ 6 ç«  æœ€çŸ­è·¯å»®</h2>
<h3 id="ç¬¬-1-èŠ‚-åªæœ‰äº”è¡Œçš„ç®—æ³•-floyd-warshall"><a class="header-anchor" href="#ç¬¬-1-èŠ‚-åªæœ‰äº”è¡Œçš„ç®—æ³•-floyd-warshall">ğŸŒ³</a>ç¬¬ 1 èŠ‚ åªæœ‰äº”è¡Œçš„ç®—æ³•â€”â€”Floyd-Warshall</h3>
<p>å¤š æº æœ€ çŸ­ è·¯ å¾„</p>
<p>å¦‚æœè¦è®©ä»»æ„ä¸¤ç‚¹(ä¾‹å¦‚ä»é¡¶ç‚¹ a åˆ°é¡¶ç‚¹ b)ä¹‹é—´çš„è·¯ç¨‹å˜çŸ­ï¼Œ<br>
åªèƒ½å¼•å…¥ç¬¬ä¸‰ä¸ªç‚¹(é¡¶ç‚¹ k)ï¼Œå¹¶é€šè¿‡è¿™ä¸ªé¡¶ç‚¹ k ä¸­è½¬å³ aâ†’kâ†’bï¼Œæ‰å¯èƒ½ç¼©çŸ­åŸæ¥ä»é¡¶ç‚¹ a åˆ°é¡¶ç‚¹ b çš„è·¯ç¨‹ã€‚é‚£ä¹ˆè¿™ä¸ªä¸­è½¬çš„é¡¶ç‚¹ k æ˜¯ 1~n ä¸­çš„å“ªä¸ªç‚¹å‘¢?<br>
ç”šè‡³æœ‰æ—¶å€™ä¸åªé€šè¿‡ä¸€ä¸ªç‚¹ï¼Œè€Œæ˜¯ç»è¿‡ä¸¤ä¸ªç‚¹æˆ–è€…æ›´å¤šç‚¹ä¸­è½¬ä¼šæ›´çŸ­ï¼Œ<br>
å³ aâ†’k1â†’k2â†’b æˆ–è€… aâ†’k1â†’k2â†’â€¦kiâ€¦â†’bã€‚</p>
<p>æ¯”å¦‚ä¸Šå›¾ä¸­<br>
ä» 4 å·åŸå¸‚åˆ° 3 å·åŸå¸‚(4-3)çš„è·¯ç¨‹ e[4][3]åŸæœ¬æ˜¯ 12,<br>
å¦‚æœåªé€šè¿‡ 1 å·åŸå¸‚ä¸­è½¬(4â†’1â†’3)ï¼Œè·¯ç¨‹å°†ç¼©çŸ­ä¸º 11(e[4][1]+e[1][3]=5+6=11)ã€‚<br>
å…¶å® 1 å·åŸå¸‚åˆ° 3 å·åŸå¸‚ä¹Ÿå¯ä»¥é€šè¿‡ 2 å·åŸå¸‚ä¸­è½¬,ä½¿å¾— 1 å·åˆ° 3 å·åŸå¸‚çš„è·¯ç¨‹ç¼©çŸ­ä¸º 5<br>
(e[1][2]+e[2][3]=2+3=5)ã€‚<br>
æ‰€ä»¥å¦‚æœåŒæ—¶ç»è¿‡ 1 å·å’Œ 2 å·ä¸¤ä¸ªåŸå¸‚ä¸­è½¬çš„è¯ï¼Œä» 4 å·åŸå¸‚åˆ° 3 å·åŸå¸‚çš„è·¯ç¨‹ä¼šè¿›ä¸€æ­¥ç¼©çŸ­ä¸º 10ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span>  _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="comment">//	ç®—æ³•ï¼šFloyd-Warshall</span></span><br><span class="line"><span class="comment">//	æ—¶é—´ï¼š2021.11.3 22ç‚¹41åˆ†</span></span><br><span class="line"><span class="comment">//  ç›®çš„ï¼šæ±‚è§£å¤šæºè·¯æœ€çŸ­è·¯å¾„é—®é¢˜ï¼ˆä»»æ„ä¸¤ä¸ªç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„ï¼‰</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> e[<span class="number">10</span>][<span class="number">10</span>], k, i, j, n, m, t1, t2, t3;</span><br><span class="line">	<span class="type">int</span> inf = <span class="number">99999999</span>;<span class="comment">//ç”¨inf(infinityçš„ç¼©å†™)å­˜å‚¨ä¸€ä¸ªæˆ‘ä»¬è®¤ä¸ºçš„æ­£æ— ç©·å€¼</span></span><br><span class="line">	<span class="comment">//è¯»å…¥nå’Œm,nè¡¨ç¤ºé¡¶ç‚¹ä¸ªæ•°ï¼Œmè¡¨ç¤ºè¾¹çš„æ¡æ•°</span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		<span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">			<span class="keyword">if</span> (i == j) e[i][j] = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">else</span> e[i][j] = inf;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//è¯»å…¥è¾¹</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;t1, &amp;t2, &amp;t3);</span><br><span class="line">		e[t1][t2] = t3;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//Floyd-Warshallç®—æ³•æ ¸å¿ƒè¯­å¥</span></span><br><span class="line">	<span class="keyword">for</span> (k = <span class="number">1</span>; k &lt;= n; k++)</span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">			<span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">				<span class="keyword">if</span> (e[i][j] &gt; e[i][k] + e[k][j])</span><br><span class="line">					e[i][j] = e[i][k] + e[k][j];</span><br><span class="line">	<span class="comment">//è¾“å‡ºæœ€ç»ˆçš„ç»“æœ</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%10d&quot;</span>, e[i][j]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬-2-èŠ‚-dijkstra-ç®—æ³•-é€šè¿‡è¾¹å®ç°æ¾å»…-155"><a class="header-anchor" href="#ç¬¬-2-èŠ‚-dijkstra-ç®—æ³•-é€šè¿‡è¾¹å®ç°æ¾å»…-155">ğŸŒ³</a>ç¬¬ 2 èŠ‚ Dijkstra ç®—æ³•â€”â€”é€šè¿‡è¾¹å®ç°æ¾å»… 155</h3>
<p>å• æº æœ€ çŸ­ è·¯ å¾„ è¿ªæ°æ–¯ç‰¹æ‹‰</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span>  _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="comment">//	æ—¶é—´ï¼š2021.11.3 23ç‚¹11åˆ†</span></span><br><span class="line"><span class="comment">//	ç®—æ³•ï¼šDijkstraç®—æ³•</span></span><br><span class="line"><span class="comment">//	ç›®çš„ï¼šæ±‚è§£å•æºæœ€çŸ­è·¯å¾„ï¼ˆæŒ‡å®šä¸€ä¸ªç‚¹ï¼ˆæºç‚¹ï¼‰åˆ°å…¶ä½™å„ä¸ªé¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„ï¼‰</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> e[<span class="number">10</span>][<span class="number">10</span>], dis[<span class="number">10</span>], book[<span class="number">10</span>], i, j, n, m, t1, t2, t3, u, v, min;</span><br><span class="line">	<span class="type">int</span> inf = <span class="number">99999999</span>;<span class="comment">//ç”¨inf(infinityçš„ç¼©å†™)å­˜å‚¨ä¸€ä¸ªæˆ‘ä»¬è®¤ä¸ºçš„æ­£æ— ç©·å€¼</span></span><br><span class="line">	<span class="comment">//è¯»å…¥nå’Œm,nè¡¨ç¤ºé¡¶ç‚¹ä¸ªæ•°ï¼Œmè¡¨ç¤ºè¾¹çš„æ¡æ•°</span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		<span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">			<span class="keyword">if</span> (i == j) e[i][j] = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">else</span> e[i][j] = inf;</span><br><span class="line">	<span class="comment">//è¯»å…¥è¾¹</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;t1, &amp;t2, &amp;t3);</span><br><span class="line">		e[t1][t2] = t3;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//åˆå§‹åŒ–disæ•°ç»„</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		dis[i] = e[<span class="number">1</span>][i];</span><br><span class="line"></span><br><span class="line">	<span class="comment">//bookæ•°ç»„åˆå§‹åŒ–</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		book[i] = <span class="number">0</span>;</span><br><span class="line">	book[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//Dijkstraç®—æ³•æ ¸å¿ƒè¯­å¥</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n - <span class="number">1</span>; i++)<span class="comment">//ä¸€å…±nä¸ªé¡¶ç‚¹ï¼Œ1å·æœ¬èº«å·²ç»åœ¨pé›†åˆé‡Œé¢äº†ï¼Œæ‰€ä»¥</span></span><br><span class="line">	&#123;						<span class="comment">//åªéœ€è¦å¾ªç¯n-1æ¬¡å³å¯</span></span><br><span class="line">		<span class="comment">//æ‰¾åˆ°ç¦»1å·é¡¶ç‚¹æœ€è¿‘çš„é¡¶ç‚¹</span></span><br><span class="line">		min = inf;</span><br><span class="line">		<span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (book[j] == <span class="number">0</span> &amp;&amp; dis[j] &lt; min)</span><br><span class="line">			&#123;</span><br><span class="line">				min = dis[j];</span><br><span class="line">				u = j;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		book[u] = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span> (v = <span class="number">1</span>; v &lt;= n; v++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (e[u][v] &lt; inf)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span> (dis[v] &gt; dis[u] + e[u][v])</span><br><span class="line">					dis[v] = dis[u] + e[u][v];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//è¾“å‡ºæœ€åçš„ç»“æœ</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, dis[i]);</span><br><span class="line"></span><br><span class="line">	getchar(); getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€š è¿‡ ä¸Š é¢ çš„ ä»£ ç  æˆ‘ ä»¬ å¯ ä»¥ çœ‹ å‡º , è¿™ ä¸ª ç®— æ³• çš„ æ—¶ é—´ å¤ æ™‚ åº¦ æ˜¯ O å‰ ã€‚ å…¶ ä¸­ æ¯ æ¬¡ æ‰¾ åˆ° ç¦» 1 å·<br>
é¡¹ ç‚¹ æ˜€ è¿‘ çš„ é¡¶ ç‚¹ çš„ æ—¶ é—´ å¤ æ™‚ åº¦ æ˜¯ O (9J, è¿™ é‡Œ æˆ‘ ä»¬ å¯ ä»¥ ç”¨ â€œ å † â€œ( å°† åœ¨ ä¸‹ ä¸€ ç«  å­¦ åˆ° ã€• æ™¥ ä¼˜ åŒ– ,<br>
ä½¿ å¾— è¿™ä¸€éƒ¨åˆ†çš„æ—¶ é—´ å¤ æ™‚ åº¦ é™ ä½ åˆ° O(logWã€‚ å¦ å¤– å¯¹ äº è¾¹ æ•° M å°‘ äº A çš„ ç¨€ ç– å›¾ æ™¥ è¯´ ( æˆ‘ ä»¬<br>
æŠŠ M è¿œ å° äº F çš„ å›¾ ç§° ä¸º ç¨€ ç– å›¾ , è€Œ M ç›¸ å¯¹ è¾ƒ å¤§ çš„ å›¾ ç§° ä¸º ç¨  å¯† å›¾ ), æˆ‘ ä»¬ å¯ä»¥ ç”¨ é‚° æ¥ è¡¨ ( è¿™<br>
æ˜¯ ä¸ª ç¥ é©¬ ä¸œ è¥¿ ? ä¸ è¦ ç€ æ€¥ , å¾… ä¼š å† ä»” ç»† è®² è§£) æ™¥ ä»£ æ›¿ é‚» æ¥ çŸ© é˜µ , ä½¿ å¾— æ•´ ä¸ª æ—¶ é—´ å¤ æ™‚ åº¦ ä¼˜ åŒ– åˆ°<br>
O(M+N)logN. è¯· æ³¨ æ„ ! åœ¨ æ˜€ å çš„ æƒ… å†µ ä¸‹ M å°± æ˜¯ , è¿™ æœ· çš„ è¯ (M+WilogW è¦ æ¯” P è¿˜ è¦ å¤§ ã€‚<br>
ä½† æ˜¯ å¤§ å¤š æ•° æƒ… å†µ ä¸‹ å¹¶ ä¸ ä¼š æ˜‰ é‚£ ä¹ˆ å¤š è¾¹ , å›  æ­¤ (M+WiogN è¦ æ¯” F å° å¾ˆ å¤š ã€‚<br>
è¿™ é‡Œ æˆ‘ ä»¬ ä¸» è¦ æ™¥ è®² è§£ å¦‚ ä½• ä½¿ ç”¨ é‚» æ¥ è¡¨ æ™¥ å­˜ å‚¨ ä¸€ ä¸ª å›¾ , å…ˆ ä¸Š æ•°</p>
<p>ä¸ è¿‡ æœ¹ æ®<br>
è¿™ ä¸ª åŸ ç† , ç”¨ æ˜¬ ç®— æ³• æ±‚ æ˜€ çŸ­ è·¯ å¾„ çš„ å›¹ æ˜¯ ä¸ èƒ½ æ˜‰ è´Ÿ æ™ƒ è¾¹ çš„ , å›  ä¸º æ‰© å±• åˆ° è´Ÿ æ™ƒ è¾¹ çš„ æ—¶ å€™ ä¼š äº§ ç”Ÿ æ›´<br>
çŸ­ çš„ è·¯ ç¨‹ , æ˜‰ å¯ èƒ½ å°± ç ´ å äº† å·² ç» æ›´ æ–° çš„ ç‚¹ è·¯ ç¨‹ ä¸ ä¼š æ”¹ å˜ çš„ æ€§ è´¨</p>
<h4 id="æ•°æ®ç»“æ„ï¼šé‚»æ¥çŸ©é˜µ"><a class="header-anchor" href="#æ•°æ®ç»“æ„ï¼šé‚»æ¥çŸ©é˜µ">ğŸŒ³</a>æ•°æ®ç»“æ„ï¼šé‚»æ¥çŸ©é˜µ</h4>
<p><img src="/2024/06/03/%E5%95%8A%E5%93%88%E7%AE%97%E6%B3%95-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E9%82%BB%E6%8E%A5%E7%9F%A9%E9%98%B5.png" alt="é‚»æ¥çŸ©é˜µ"></p>
<h4 id="æ•°æ®ç»“æ„ï¼šé‚»æ¥è¡¨"><a class="header-anchor" href="#æ•°æ®ç»“æ„ï¼šé‚»æ¥è¡¨">ğŸŒ³</a>æ•°æ®ç»“æ„ï¼šé‚»æ¥è¡¨</h4>
<p><img src="/2024/06/03/%E5%95%8A%E5%93%88%E7%AE%97%E6%B3%95-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E9%82%BB%E6%8E%A5%E8%A1%A8.png" alt="é‚»æ¥è¡¨"></p>
<h3 id="ç¬¬-3-èŠ‚-bellman-ford-è§£å†³è´Ÿæƒè¾¹"><a class="header-anchor" href="#ç¬¬-3-èŠ‚-bellman-ford-è§£å†³è´Ÿæƒè¾¹">ğŸŒ³</a>ç¬¬ 3 èŠ‚ Bellman-Fordâ€”â€”è§£å†³è´Ÿæƒè¾¹</h3>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span>  _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="comment">//	æ—¶é—´ï¼š2021.11.14  22ç‚¹08åˆ†</span></span><br><span class="line"><span class="comment">//	ç®—æ³•ï¼šBellman-Ford</span></span><br><span class="line"><span class="comment">//	ç›®çš„ï¼šè§£å†³è´Ÿæƒè¾¹å¾—é—®é¢˜</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> dis[<span class="number">10</span>], bak[<span class="number">10</span>], i, k, n, m, u[<span class="number">10</span>], v[<span class="number">10</span>], w[<span class="number">10</span>], check, flag;</span><br><span class="line">	<span class="type">int</span> inf = <span class="number">99999999</span>;<span class="comment">//ç”¨infå­˜å‚¨ä¸€ä¸ªæˆ‘ä»¬è®¤ä¸ºå¾—æ­£æ— ç©·å€¼</span></span><br><span class="line">	<span class="comment">//è¯»å…¥nå’Œmï¼Œnè¡¨ç¤ºé¡¶ç‚¹ä¸ªæ•°ï¼Œmè¡¨ç¤ºè¾¹çš„ä¸ªæ•°</span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//è¯»å…¥è¾¹</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;u[i], &amp;v[i], &amp;w[i]);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//åˆå§‹åŒ–disæ•°ç»„ï¼Œè¿™é‡Œæ˜¯1å·é¡¶ç‚¹åˆ°å…¶ä½™å„ä¸ªé¡¶ç‚¹å¾—åˆå§‹è·¯ç¨‹</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		dis[i] = inf;</span><br><span class="line">	dis[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//Bellman-Fordç®—æ³•æ ¸å¿ƒè¯­å¥</span></span><br><span class="line">	<span class="keyword">for</span> (k = <span class="number">1</span>; k &lt;= n - <span class="number">1</span>; k++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//å°†disæ•°ç»„å¤‡ä»½åˆ°bakæ•°ç»„ä¸­</span></span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++) bak[i] = dis[i];</span><br><span class="line">		<span class="comment">//è¿›è¡Œä¸€è½®æ¾å¼›</span></span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">			<span class="keyword">if</span> (dis[v[i]] &gt; dis[u[i]] + w[i])</span><br><span class="line">				dis[v[i]] = dis[u[i]] + w[i];</span><br><span class="line">		<span class="comment">//æ¾å¼›å®Œæ¯•åæ£€æµ‹disæ˜¯å¦æœ‰æ›´æ–°</span></span><br><span class="line">		check = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++) <span class="keyword">if</span> (bak[i] != dis[i]) &#123; check = <span class="number">1</span>; <span class="keyword">break</span>; &#125;</span><br><span class="line">		<span class="keyword">if</span> (check == <span class="number">0</span>) <span class="keyword">break</span>;<span class="comment">//å¦‚æœdisæ•°ç»„æ²¡æœ‰æ›´æ–°ï¼Œæå‰é€€å‡ºå¾ªç¯ç»“æŸç®—æ³•</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//æ£€æµ‹è´Ÿæƒå›è·¯</span></span><br><span class="line">	flag = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">		<span class="keyword">if</span> (dis[v[i]] &gt; dis[u[i]] + w[i]) flag = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (flag == <span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">&quot;æ­¤å›¾å«æœ‰è´Ÿæƒå›è·¯&quot;</span>);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//è¾“å‡ºæœ€ç»ˆçš„ç»“æœ</span></span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, dis[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	getchar(); getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬-4-èŠ‚-bellman-ford-çš„é˜Ÿåˆ—ä¼˜åŒ–"><a class="header-anchor" href="#ç¬¬-4-èŠ‚-bellman-ford-çš„é˜Ÿåˆ—ä¼˜åŒ–">ğŸŒ³</a>ç¬¬ 4 èŠ‚ Bellman-Ford çš„é˜Ÿåˆ—ä¼˜åŒ–</h3>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span>  _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="comment">//	æ—¶é—´ï¼š2021.11.14  22ç‚¹44åˆ†</span></span><br><span class="line"><span class="comment">//	ç®—æ³•ï¼šBellman-Ford ç®—æ³•é˜Ÿåˆ—ä¼˜åŒ–</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> n, m, i, j, k;</span><br><span class="line">	<span class="comment">//u,vå’Œwçš„æ•°ç»„å¤§å°è¦æ ¹æ®å®é™…æƒ…å†µæ¥è®¾ç½®ï¼Œè¦æ¯”mçš„æœ€å¤§å€¼è¦å¤§ä¸€</span></span><br><span class="line">	<span class="type">int</span> u[<span class="number">8</span>], v[<span class="number">8</span>], w[<span class="number">8</span>];</span><br><span class="line">	<span class="comment">//firstè¦æ¯”nçš„æœ€å¤§å€¼å¤§1ï¼Œnextè¦æ¯”mçš„æœ€å¤§å€¼è¦å¤§ä¸€</span></span><br><span class="line">	<span class="type">int</span> first[<span class="number">6</span>], next[<span class="number">8</span>];</span><br><span class="line">	<span class="type">int</span> dis[<span class="number">6</span>] = &#123; <span class="number">0</span> &#125;, book[<span class="number">6</span>] = &#123; <span class="number">0</span> &#125;;<span class="comment">//bookæ•°ç»„ç”¨æ¥è®°å½•é‚£äº›é¡¶ç‚¹å·²ç»åœ¨é˜Ÿåˆ—ä¸­äº†</span></span><br><span class="line">	<span class="type">int</span> que[<span class="number">101</span>] = &#123; <span class="number">0</span> &#125;, head = <span class="number">1</span>, tail = <span class="number">1</span>;<span class="comment">//å®šä¹‰ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¹¶åˆå§‹åŒ–é˜Ÿåˆ—</span></span><br><span class="line">	<span class="type">int</span> inf = <span class="number">99999999</span>;<span class="comment">//ç”¨infæ¥å­˜å‚¨ä¸€ä¸ªæˆ‘ä»¬è®¤ä¸ºçš„æ­£æ— ç©·å€¼</span></span><br><span class="line">	<span class="comment">//è¯»å…¥n,m</span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//åˆå§‹åŒ–disæ•°ç»„ï¼Œè¿™é‡Œæ˜¯1å·é¡¶ç‚¹åˆ°å…¶ä½™å„ä¸ªé¡¶ç‚¹çš„åˆå§‹åŒ–è·¯ç¨‹</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		dis[i] = inf;</span><br><span class="line">	dis[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//åˆå§‹åŒ–bookæ•°ç»„ï¼Œåˆå§‹åŒ–ä¸º0ï¼Œåˆšå¼€å§‹éƒ½ä¸åœ¨é˜Ÿåˆ—ä¸­</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++) book[i] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//åˆå§‹åŒ–firstæ•°ç»„ä¸‹æ ‡1~nçš„å€¼ä¸º-1ï¼Œè¡¨ç¤º1~né¡¶ç‚¹æš‚æ—¶éƒ½æ²¡æœ‰è¾¹</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++) first[i] = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//è¯»å…¥æ¯ä¸€æ¡è¾¹</span></span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;u[i], &amp;v[i], &amp;w[i]);</span><br><span class="line">		<span class="comment">//ä¸‹é¢ä¸¤å¥æ˜¯å»ºç«‹é‚»æ¥è¡¨çš„å…³é”®</span></span><br><span class="line">		next[i] = first[u[i]];</span><br><span class="line">		first[u[i]] = i;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//1å·é¡¶ç‚¹å…¥é˜Ÿ</span></span><br><span class="line">	que[tail] = <span class="number">1</span>; tail++;</span><br><span class="line">	book[<span class="number">1</span>] = <span class="number">1</span>;<span class="comment">//æ ‡è®°1å·é¡¶ç‚¹å·²ç»å…¥é˜Ÿ</span></span><br><span class="line">	<span class="keyword">while</span> (head &lt; tail)<span class="comment">//é˜Ÿåˆ—ä¸ä¸ºç©ºçš„æ—¶å€™å¾ªç¯</span></span><br><span class="line">	&#123;</span><br><span class="line">		k = first[que[head]];<span class="comment">//å½“å‰éœ€è¦å¤„ç†çš„é˜Ÿé¦–é¡¶ç‚¹</span></span><br><span class="line">		<span class="keyword">while</span> (k != <span class="number">-1</span>)<span class="comment">//æ‰«æå½“å‰é¡¶ç‚¹æ‰€æœ‰çš„è¾¹</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (dis[v[k]] &gt; dis[u[k]] + w[k])<span class="comment">//åˆ¤æ–­æ˜¯å¦æ¾å¼›æˆåŠŸ</span></span><br><span class="line">			&#123;</span><br><span class="line">				dis[v[k]] = dis[u[k]] + w[k];<span class="comment">//æ›´æ–°é¡¶ç‚¹1åˆ°é¡¶ç‚¹v[k]çš„è·¯ç¨‹</span></span><br><span class="line">				<span class="comment">//è¿™é‡Œçš„bookæ•°ç»„ç”¨æ¥åˆ¤æ–­é¡¶ç‚¹v[k]æ˜¯å¦åœ¨é˜Ÿåˆ—ä¸­</span></span><br><span class="line">				<span class="comment">//å¦‚æœä¸ä½¿ç”¨ä¸€ä¸ªæ•°ç»„æ¥æ ‡è®°çš„è¯ï¼Œåˆ¤æ–­ä¸€ä¸ªé¡¶ç‚¹æ˜¯å¦åœ¨é˜Ÿåˆ—ä¸­æ¯æ¬¡éƒ½éœ€è¦</span></span><br><span class="line">				<span class="comment">//ä»é˜Ÿåˆ—çš„headåˆ°tailæ‰«ä¸€éï¼Œå¾ˆæµªè´¹æ—¶é—´</span></span><br><span class="line">				<span class="keyword">if</span> (book[v[k]] == <span class="number">0</span>)<span class="comment">//0è¡¨ç¤ºä¸åœ¨é˜Ÿåˆ—ä¸­ï¼Œå°†é¡¶ç‚¹v[k]åŠ å…¥é˜Ÿåˆ—ä¸­</span></span><br><span class="line">				&#123;</span><br><span class="line">					<span class="comment">//ä¸‹é¢ä¸¤å¥æ˜¯å…¥é˜Ÿæ“ä½œ</span></span><br><span class="line">					que[tail] = v[k];</span><br><span class="line">					tail++;</span><br><span class="line">					book[v[k]] = <span class="number">1</span>;<span class="comment">//åŒæ—¶æ ‡è®°é¡¶ç‚¹v[k]å·²ç»å…¥é˜Ÿ</span></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			k = next[k];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//å‡ºé˜Ÿ</span></span><br><span class="line">		book[que[head]] = <span class="number">0</span>;</span><br><span class="line">		head++;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//è¾“å‡º1å·é¡¶ç‚¹åˆ°å…¶ä½™å„ç‚¹çš„æœ€çŸ­è·¯å¾„</span></span><br><span class="line">	<span class="keyword">for</span>(i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, dis[i]);</span><br><span class="line"></span><br><span class="line">	getchar(); getchar();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬-5-èŠ‚-æœ€çŸ­è·¯å»®ç®—æ³•å¯¹æ¯”åˆ†æ"><a class="header-anchor" href="#ç¬¬-5-èŠ‚-æœ€çŸ­è·¯å»®ç®—æ³•å¯¹æ¯”åˆ†æ">ğŸŒ³</a>ç¬¬ 5 èŠ‚ æœ€çŸ­è·¯å»®ç®—æ³•å¯¹æ¯”åˆ†æ</h3>
<p><img src="/2024/06/03/%E5%95%8A%E5%93%88%E7%AE%97%E6%B3%95-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BB%AE%E7%AE%97%E6%B3%95%E5%AF%B9%E6%AF%94%E5%88%86%E6%9E%90.png" alt="æœ€çŸ­è·¯å»®ç®—æ³•å¯¹æ¯”åˆ†æ"></p>
<p>å¦‚ æšœ è¦ æ±‚ çš„ æ˜¯ æ‰€ æ˜‰ ç‚¹ å¯¹ é—´ çš„ æ˜€ çŸ­ è·¯ å¾„ , æˆ– è€… å¦‚ æšœ æ•° æ® èŒƒ å›´ è¾ƒ å° , åˆ™ Floyd ç®— æ³• æ¯” è¾ƒ é€‚ åˆ ã€‚<br>
Dijkstra ç®— æ³• æ˜€ å¤§ çš„ å¼Š ç«¯ æ˜¯ å®ƒ æ—  æ³• é€‚ åº” æ˜‰ è´Ÿ æ™ƒ è¾¹ çš„ å›¾ . ä½† æ˜¯ Dijkstra å…· æ˜‰ è‰¯ å¥½çš„ å¯ æ‰© å±• æ€§ , æ‰©å±• å å¯ä»¥ é€‚ åº” å¾ˆ å¤š é—® é¡¾ ã€‚ å¤ å¤– ç”¨ å † ä¼˜ åŒ– çš„ Dijkstra ç®— æ³• çš„ æ—¶ é—´ å¤ æ™‚ åº¦ å¯ ä»¥ è¾¾ åˆ° O(MlogN).<br>
å½“è¾¹ æ˜‰è´Ÿ æ™ƒ æ—¶ , éœ€ è¦ ä½¿ ç”¨ Bellman-Ford ç®— æ³• æˆ– è€… é˜Ÿ åˆ— ä¼˜ åŒ– çš„ Bellman-Ford ç®— æ³• .</p>
<h2 id="ç¬¬-7-ç« -ç¥å¥‡çš„æ ‘"><a class="header-anchor" href="#ç¬¬-7-ç« -ç¥å¥‡çš„æ ‘">ğŸŒ³</a>ç¬¬ 7 ç«  ç¥å¥‡çš„æ ‘</h2>
<h3 id="ç¬¬-1-èŠ‚-åº·å¯-æ ‘-ä¹‹æ—…"><a class="header-anchor" href="#ç¬¬-1-èŠ‚-åº·å¯-æ ‘-ä¹‹æ—…">ğŸŒ³</a>ç¬¬ 1 èŠ‚ åº·å¯â€œæ ‘â€ä¹‹æ—…</h3>
<p><img src="/2024/06/03/%E5%95%8A%E5%93%88%E7%AE%97%E6%B3%95-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%A0%91%E4%B8%8E%E5%9B%BE.png" alt="æ ‘ä¸å›¾"></p>
<h3 id="ç¬¬-2-èŠ‚-äºŒå‰æ ‘"><a class="header-anchor" href="#ç¬¬-2-èŠ‚-äºŒå‰æ ‘">ğŸŒ³</a>ç¬¬ 2 èŠ‚ äºŒå‰æ ‘</h3>
<h3 id="ç¬¬-3-èŠ‚-å †-ç¥å¥‡çš„ä¼˜å…ˆé˜Ÿåˆ—"><a class="header-anchor" href="#ç¬¬-3-èŠ‚-å †-ç¥å¥‡çš„ä¼˜å…ˆé˜Ÿåˆ—">ğŸŒ³</a>ç¬¬ 3 èŠ‚ å †â€”â€”ç¥å¥‡çš„ä¼˜å…ˆé˜Ÿåˆ—</h3>
<h4 id="æœ€å°å †"><a class="header-anchor" href="#æœ€å°å †">ğŸŒ³</a>æœ€å°å †</h4>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span>  _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="comment">//	ç®—æ³•ï¼šå †æ’åºï¼ˆå»ºç«‹æœ€å°å †å®ç°ä»å°åˆ°å¤§æ’åºï¼‰</span></span><br><span class="line"><span class="comment">//	æ—¶é—´ï¼š2021.11.15 16ç‚¹02åˆ†</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> h[<span class="number">101</span>];<span class="comment">//ç”¨æ¥å­˜æ”¾å †çš„æ•°ç»„</span></span><br><span class="line"><span class="type">int</span> n;<span class="comment">//ç”¨æ¥å­˜æ”¾å †ä¸­å…ƒç´ çš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯å †çš„å¤§å°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//äº¤æ¢å‡½æ•°ï¼Œç”¨æ¥äº¤æ¢é˜Ÿä¸­ä¸¤ä¸ªå…ƒç´ çš„å€¼</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> t;</span><br><span class="line">	t = h[x];</span><br><span class="line">	h[x] = h[y];</span><br><span class="line">	h[y] = t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘ä¸‹è°ƒæ•´çš„å‡½æ•°</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">siftdown</span><span class="params">(<span class="type">int</span> i)</span><span class="comment">//ä¼ å…¥ä¸€ä¸ªéœ€è¦å‘ä¸‹è°ƒæ•´çš„ç»“ç‚¹ç¼–å·i,å³ä»å †çš„é¡¶ç‚¹å¼€å§‹å‘ä¸‹è°ƒæ•´</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> t, flag = <span class="number">0</span>;<span class="comment">//flagç”¨æ¥æ ‡è®°æ˜¯å¦éœ€è¦ç»§ç»­å‘ä¸‹è°ƒæ•´</span></span><br><span class="line">	<span class="comment">//å½“iç»“ç‚¹æœ‰å„¿å­ï¼ˆå…¶å®æ˜¯è‡³å°‘æœ‰å·¦å„¿å­ï¼‰å¹¶ä¸”æœ‰éœ€è¦ç»§ç»­è°ƒæ•´çš„æ—¶å€™å¾ªç¯å°±æ‰§è¡Œ</span></span><br><span class="line">	<span class="keyword">while</span> (i * <span class="number">2</span> &lt;= n &amp;&amp; flag == <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//é¦–å…ˆåˆ¤æ–­å®ƒå’Œå·¦å„¿å­çš„å…³ç³»ï¼Œå¹¶ç”¨tè®°å½•å€¼è¾ƒå°çš„ç»“ç‚¹ç¼–å·</span></span><br><span class="line">		<span class="keyword">if</span> (h[i] &gt; h[i * <span class="number">2</span>])</span><br><span class="line">			t = i * <span class="number">2</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			t = i;</span><br><span class="line">		<span class="comment">//å¦‚æœå®ƒæœ‰å³å„¿å­ï¼Œå†å¯¹å³å„¿å­è¿›è¡Œè®¨è®º</span></span><br><span class="line">		<span class="keyword">if</span> (i * <span class="number">2</span> + <span class="number">1</span> &lt;= n)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//å¦‚æœå³å„¿å­çš„å€¼æ›´å°ï¼Œæ›´æ–°è¾ƒå°çš„ç»“ç‚¹ç¼–å·</span></span><br><span class="line">			<span class="keyword">if</span> (h[t] &gt; h[i * <span class="number">2</span> + <span class="number">1</span>])</span><br><span class="line">				t = i * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//å¦‚æœå‘ç°æœ€å°çš„ç»“ç‚¹ç¼–å·ä¸æ˜¯è‡ªå·±ï¼Œè¯´æ˜å­ç»“ç‚¹ä¸­æœ‰æ¯”çˆ¶ç»“ç‚¹æ›´å°çš„</span></span><br><span class="line">		<span class="keyword">if</span> (t != i)</span><br><span class="line">		&#123;</span><br><span class="line">			swap(t, i);<span class="comment">//äº¤æ¢å®ƒä»¬</span></span><br><span class="line">			i = t;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			flag = <span class="number">1</span>;<span class="comment">//å¦åˆ™è¯´æ˜å½“å‰çš„çˆ¶ç»“ç‚¹å·²ç»æ¯”ä¸¤ä¸ªå­ç»“ç‚¹éƒ½è¦å°äº†ï¼Œä¸éœ€è¦åœ¨è¿›è¡Œè°ƒæ•´</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å»ºç«‹å †çš„å‡½æ•°</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">creat</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	<span class="comment">//ä»æœ€åä¸€ä¸ªéå¶ç»“ç‚¹åˆ°ç¬¬ä¸€ä¸ªç»“ç‚¹ä¾æ¬¡è¿›è¡Œå‘ä¸Šè°ƒæ•´</span></span><br><span class="line">	<span class="keyword">for</span> (i = n / <span class="number">2</span>; i &gt;= <span class="number">1</span>; i--)</span><br><span class="line">	&#123;</span><br><span class="line">		siftdown(i);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ é™¤æœ€å¤§çš„å…ƒç´ </span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deletemax</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> t;</span><br><span class="line">	t = h[<span class="number">1</span>];<span class="comment">//ç”¨ä¸€ä¸ªä¸´æ—¶å˜é‡è®°å½•å †é¡¶ç‚¹çš„å€¼</span></span><br><span class="line">	h[<span class="number">1</span>] = h[n];<span class="comment">//å°†å †çš„æœ€åä¸€ä¸ªç‚¹èµ‹å€¼åˆ°å †é¡¶</span></span><br><span class="line">	n--;<span class="comment">//å †çš„å…ƒç´ å‡å°‘1</span></span><br><span class="line">	siftdown(<span class="number">1</span>);<span class="comment">//å‘ä¸‹è°ƒæ•´</span></span><br><span class="line">	<span class="keyword">return</span> t;<span class="comment">//è¿”å›ä¹‹å‰è®°å½•çš„å †çš„é¡¶ç‚¹çš„æœ€å¤§å€¼</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i, num;</span><br><span class="line">	<span class="comment">//è¯»å…¥è¦æ’åºçš„æ•°å­—ä¸ªæ•°</span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;num);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= num; i++)</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;h[i]);</span><br><span class="line">	n = num;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å»ºå †</span></span><br><span class="line">	creat();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//åˆ é™¤é¡¶éƒ¨å…ƒç´ ,è¿ç»­åˆ é™¤næ¬¡ï¼Œå…¶å®ä¹Ÿå°±æ˜¯ä»å¤§åˆ°å°æŠŠæ•°è¾“å‡ºå‡ºæ¥</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= num; i++)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, deletemax());</span><br><span class="line"></span><br><span class="line">	getchar(); getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æœ€å¤§å †"><a class="header-anchor" href="#æœ€å¤§å †">ğŸŒ³</a>æœ€å¤§å †</h4>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span>  _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="comment">//	ç®—æ³•ï¼šå †æ’åºï¼ˆå»ºç«‹æœ€å¤§å †å®ç°ä»å°åˆ°å¤§æ’åºï¼‰</span></span><br><span class="line"><span class="comment">//	æ—¶é—´ï¼š2021.11.15 16ç‚¹44åˆ†</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> h[<span class="number">101</span>];<span class="comment">//ç”¨æ¥å­˜æ”¾å †çš„æ•°ç»„</span></span><br><span class="line"><span class="type">int</span> n;<span class="comment">//ç”¨æ¥å­˜å‚¨å †ä¸­å…ƒç´ çš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯å †çš„å¤§å°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//äº¤æ¢å‡½æ•°ï¼Œç”¨æ¥äº¤æ¢å †ä¸­çš„ä¸¤ä¸ªå…ƒç´ çš„å€¼</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> t;</span><br><span class="line">	t = h[x];</span><br><span class="line">	h[x] = h[y];</span><br><span class="line">	h[y] = t;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å‘ä¸‹è°ƒæ•´å‡½æ•°</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">siftdown</span><span class="params">(<span class="type">int</span> i)</span><span class="comment">//ä¼ å…¥ä¸€ä¸ªéœ€è¦å‘ä¸‹è°ƒæ•´çš„ç»“ç‚¹ç¼–å·iï¼Œè¿™é‡Œä¼ å…¥1ï¼Œå³ä»å †çš„é¡¶ç‚¹å¼€å§‹å‘ä¸‹è°ƒæ•´</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> t, flag = <span class="number">0</span>;<span class="comment">//flagç”¨æ¥æ ‡è®°æ˜¯å¦éœ€è¦ç»§ç»­å‘ä¸‹è°ƒæ•´</span></span><br><span class="line">	<span class="comment">//å½“ç»“ç‚¹æœ‰å„¿å­ï¼ˆå…¶å®æ˜¯è‡³å°‘æœ‰å·¦å„¿å­ï¼‰å¹¶ä¸”æœ‰éœ€è¦ç»§ç»­è°ƒæ•´çš„æ—¶å€™å¾ªç¯å°±æ‰§è¡Œ</span></span><br><span class="line">	<span class="keyword">while</span> (i * <span class="number">2</span> &lt;= n &amp;&amp; flag == <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//é¦–å…ˆåˆ¤æ–­å®ƒå’Œå·¦å„¿å­çš„å…³ç³»ï¼Œå¹¶ä¸”ç”¨tè®°å½•è¾ƒå¤§çš„ç»“ç‚¹ç¼–å·</span></span><br><span class="line">		<span class="keyword">if</span> (h[i] &lt; h[i * <span class="number">2</span>])</span><br><span class="line">			t = i * <span class="number">2</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			t = i;</span><br><span class="line">		<span class="comment">//å¦‚æœå®ƒæœ‰å³å„¿å­ï¼Œå†å¯¹å³å„¿å­è¿›è¡Œè®¨è®º</span></span><br><span class="line">		<span class="keyword">if</span> (i * <span class="number">2</span> + <span class="number">1</span> &lt;= n)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//å¦‚æœå³å„¿å­çš„å€¼æ›´å¤§ï¼Œæ›´æ–°è¾ƒå°çš„ç»“ç‚¹ç¼–å·</span></span><br><span class="line">			<span class="keyword">if</span> (h[t] &lt; h[i * <span class="number">2</span> + <span class="number">1</span>])</span><br><span class="line">				t = i * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//å¦‚æœå‘ç°æœ€å¤§çš„ç»“ç‚¹ç¼–å·ä¸æ˜¯è‡ªå·±ï¼Œè¯´æ˜å­ç»“ç‚¹æœ‰æ¯”çˆ¶ç»“ç‚¹æ›´å¤§çš„</span></span><br><span class="line">		<span class="keyword">if</span> (t != i)</span><br><span class="line">		&#123;</span><br><span class="line">			swap(t, i);<span class="comment">//äº¤æ¢å®ƒä»¬</span></span><br><span class="line">			i = t;<span class="comment">//æ›´æ–°iä¸ºåˆšæ‰ä¸å®ƒäº¤æ¢çš„å„¿å­ç»“ç‚¹çš„ç¼–å·ï¼Œä¾¿äºæ¥ä¸‹æ¥ç»§ç»­å‘ä¸‹è°ƒæ•´</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			flag = <span class="number">1</span>;<span class="comment">//å¦åˆ™è¯´æ˜å½“å‰çš„çˆ¶ç»“ç‚¹å·²ç»æ¯”ä¸¤ä¸ªå­ç»“ç‚¹éƒ½è¦å¤§äº†ï¼Œä¸éœ€è¦å†è¿›è¡Œè°ƒæ•´äº†</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å»ºç«‹å †çš„å‡½æ•°</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">creat</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	<span class="comment">//ä»æœ€åä¸€ä¸ªéå¶ç»“ç‚¹åˆ°ç¬¬ä¸€ä¸ªç»“ç‚¹ä¾æ¬¡è¿›è¡Œå‘ä¸Šè°ƒæ•´</span></span><br><span class="line">	<span class="keyword">for</span> (i = n / <span class="number">2</span>; i &gt;= <span class="number">1</span>; i--)</span><br><span class="line">	&#123;</span><br><span class="line">		siftdown(i);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å †æ’åº</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">heapsort</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">while</span> (n &gt; <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		swap(<span class="number">1</span>, n);</span><br><span class="line">		n--;</span><br><span class="line">		siftdown(<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i, num;</span><br><span class="line">	<span class="comment">//è¯»å…¥nä¸ªæ•°</span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;num);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= num; i++)</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;h[i]);</span><br><span class="line">	n = num;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å»ºå †</span></span><br><span class="line">	creat();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å †æ’åº</span></span><br><span class="line">	heapsort();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//è¾“å‡º</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= num; i++)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, h[i]);</span><br><span class="line"></span><br><span class="line">	getchar();</span><br><span class="line">	getchar();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ”¯ æŒ æ’ å…¥ å…ƒ ç´  å’Œ å¯» æ‰¾ æ˜€ å¤§ ã€” å° ) å€¼ å…ƒ ç´  çš„ æ•° æ® ç»“ æš„ç§° ä¸º ä¼˜ å…ˆ é˜Ÿ åˆ—</p>
<p>ä½¿ ç”¨ æ™® é€š é˜Ÿ åˆ— æ™¥ å® ç° è¿™ ä¸¤ ä¸ª åŠŸ èƒ½ , é‚£ ä¹ˆ å¯» æ‰¾ æ˜€ å¤§ å…ƒ ç´  éœ€ è¦ æšš ä¸¾ æ•´ ä¸ª é˜Ÿ åˆ— ,è¿™ æœ· çš„ æ—¶ é—´ å¤ æ™‚ åº¦ æ¯” è¾ƒé«˜<br>
å¦‚ æšœ æ˜¯ å·² æ’ åº å¥½ çš„ æ•° ç»„ , é‚£ ä¹ˆ æ’ å…¥ ä¸€ ä¸ª å…ƒ ç´  åˆ™ éœ€ è¦ ç§» åŠ¨ å¾ˆ å¤š å…ƒ ç´  ,æ—¶ é—´ å¤ æ™‚ åº¦ ä¾ æ—§ å¾ˆ é«˜ ã€‚<br>
è€Œ å † å°± æ˜¯ ä¸€ ç§ ä¼˜ å…ˆ é˜Ÿ åˆ— çš„ å® ç° , å¯ ä»¥ å¾ˆ å¥½ åœ° è§£ å†¯ è¿™ ä¸¤ ç§ æ“ ä½œ ã€‚</p>
<p>å † è¿˜ ç» å¸¸ è¢« ç”¨ æ™¥ æ±‚ ä¸€ ä¸ª æ•° åˆ— ä¸­ ç¬¬ K å¤§ çš„ æ•° ,<br>
åª éœ€ è¦ å»º ç«‹ ä¸€ ä¸ª å¤§ å°ä¸º äºº çš„ æ˜€ å° å † , å † é¡¹ å°± æ˜¯ ç¬¬ äºº å¤§çš„ æ•° ã€‚<br>
å‡ è®¾ æ˜‰ 10 ä¸ª æ•° , è¦ æ±‚ ç¬¬ 3 å¤§ çš„ æ•° ã€‚<br>
ç¬¬ä¸€ æ­¥ é€‰ å– ä»» æ„ 3 ä¸ª æ•° , æ¯” å¦‚ è¯´ æ˜¯ å‰ 3 ä¸ª , å°† è¿™ 3 ä¸ª æ•° å»º æˆ æ˜€ å° å † ,<br>
ç„¶ å ä» ç¬¬ 4 ä¸ª æ•° å¼€ å§‹ ,ä¸å † é¡¶ çš„ æ•° æ¯” è¾ƒ , å¦‚ æšœ æ¯” å † é¡º çš„ æ•° è¦ å° , é‚£ ä¹ˆ è¿™ ä¸ª æ•° å°± ä¸ è¦ , å¦‚ æšœ æ¯” å † é¡¹ çš„ æ•° è¦ å¤§ , åˆ™ å² å¼ƒ<br>
å½“å‰ å † é¡¶ è€Œ å°† è¿™ ä¸ª æ•° åš ä¸º æ–° çš„ å † é¡¶ , å¹¶ å† å» ç»´ æŠ¤ å † , ç”¨ åŒ æœ· çš„ æ–¹ æ³• å» å¤„ç† ç¬¬ 5-~10</p>
<h3 id="ç¬¬-4-èŠ‚-æ“’è´¼å…ˆæ“’ç‹-å¹¶æŸ¥é›†"><a class="header-anchor" href="#ç¬¬-4-èŠ‚-æ“’è´¼å…ˆæ“’ç‹-å¹¶æŸ¥é›†">ğŸŒ³</a>ç¬¬ 4 èŠ‚ æ“’è´¼å…ˆæ“’ç‹â€”â€”å¹¶æŸ¥é›†</h3>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span>  _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="comment">//	ç®—æ³•ï¼šå¹¶æŸ¥é›†</span></span><br><span class="line"><span class="comment">//	æ—¶é—´ï¼š2021.11.15 19ç‚¹30åˆ†</span></span><br><span class="line"><span class="comment">//  ç›®çš„ï¼šæ‰¾å‡ºä¸€å…±å¤šå°‘ä¸ªçŠ¯ç½ªå›¢ä¼™ï¼Œå…¶å®å°±æ˜¯æ‰¾å‡ºå¤šå°‘ä¸ªâ€œç¥–å®—â€</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> f[<span class="number">1000</span>] = &#123; <span class="number">0</span> &#125;, n, m, k, sum = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//è¿™é‡Œåˆå§‹åŒ–ï¼Œéå¸¸çš„é‡è¦ï¼Œæ•°ç»„é‡Œé¢å­˜çš„æ˜¯è‡ªå·±æ•°ç»„ä¸‹æ ‡çš„ç¼–å·å°±å¥½äº†</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">init</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		f[i] = i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¿™æ˜¯æ‰¾çˆ¹çš„é€’å½’å‡½æ•°ï¼Œä¸åœåœ°å»æ‰¾çˆ¹ï¼Œç›´åˆ°æ‰¾åˆ°ç¥–å®—ä¸ºæ­¢ï¼Œå…¶å®å°±æ˜¯å»æ‰¾çŠ¯ç½ªå›¢ä¼™çš„æœ€é«˜é¢†å¯¼äºº</span></span><br><span class="line"><span class="comment">//â€œæ“’è´¼å…ˆæ“’ç‹â€åŸåˆ™</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">getf</span><span class="params">(<span class="type">int</span> v)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (f[v] == v)</span><br><span class="line">		<span class="keyword">return</span> v;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//è¿™é‡Œæ˜¯è·¯å¾„å‹ç¼©ï¼Œæ¯æ¬¡åœ¨å‡½æ•°è¿”å›çš„æ—¶å€™ï¼Œé¡ºå¸¦æŠŠè·¯ä¸Šé‡åˆ°çš„äººçš„â€œBOSSâ€</span></span><br><span class="line">		<span class="comment">//æ”¹ä¸ºæœ€åæ‰¾åˆ°çš„ç¥–å®—ç¼–å·ï¼Œä¹Ÿå°±æ˜¯çŠ¯ç½ªå›¢ä¼™çš„æœ€é«˜é¢†å¯¼äººç¼–å·ã€‚è¿™æ ·å¯ä»¥æé«˜</span></span><br><span class="line">		<span class="comment">//ä»Šåæ‰¾åˆ°çŠ¯ç½ªå›¢ä¼™çš„æœ€é«˜é¢†å¯¼äººï¼ˆå…¶å®æ˜¯æ•°çš„ç¥–å…ˆï¼‰çš„é€Ÿåº¦</span></span><br><span class="line">		f[v] = getf(f[v]);</span><br><span class="line">		<span class="keyword">return</span> f[v];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¿™é‡Œæ˜¯åˆå¹¶ä¸¤é›†åˆçš„å‡½æ•°</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span> v, <span class="type">int</span> u)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> t1, t2;</span><br><span class="line">	t1 = getf(v);</span><br><span class="line">	t2 = getf(u);</span><br><span class="line">	<span class="keyword">if</span> (t1 != t2)<span class="comment">//åˆ¤æ–­ä¸¤ä¸ªç»“ç‚¹æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼Œå³æ˜¯å¦ä¸ºä¸€ä¸ªç¥–å…ˆ</span></span><br><span class="line">	&#123;</span><br><span class="line">		f[t2] = t1;</span><br><span class="line">		<span class="comment">//é å·¦åŸåˆ™ï¼Œå·¦è¾¹å˜æˆå³è¾¹çš„BOSSï¼Œå³æŠŠå³è¾¹çš„é›†åˆï¼Œä½œä¸ºå·¦è¾¹é›†åˆçš„å­é›†åˆ</span></span><br><span class="line">		<span class="comment">//ç»è¿‡è·¯å¾„å‹ç¼©ä»¥åï¼Œå°†f[u]çš„æ ¹çš„å€¼ä¹Ÿèµ‹å€¼ä¸ºvçš„ç¥–å…ˆf[t1]</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i, x, y;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">	<span class="comment">//åˆå§‹åŒ–æ˜¯å¿…é¡»çš„</span></span><br><span class="line">	init();</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//å¼€å§‹åˆå¹¶çŠ¯ç½ªå›¢ä¼™</span></span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;x, &amp;y);</span><br><span class="line">		merge(x, y);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//æœ€åæ‰«ææœ‰å¤šå°‘ä¸ªç‹¬ç«‹çš„çŠ¯ç½ªå›¢ä¼™</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (f[i] == i)</span><br><span class="line">			sum++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, sum);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å® æ ‘è¿˜æ˜‰ å¾ˆ å¤š ç¥ å¥‡çš„ ç”¨ æ³• , æ¯” å¦‚ :</p>
<ul>
<li>çº¿ æ®µ æ ‘ã€</li>
<li>æ•° çŠ¶æ•° ç»„ã€</li>
<li>Trie æ ‘( å­— å…¸ æ ‘)ã€</li>
<li>äºŒ å‰ æœ ç´¢ æ ‘ã€</li>
<li>çº¢ é»‘ æ ‘( æ˜¯ä¸€ ç§ å¹³ è¡¡ äºŒ å‰ æœ ç´¢ æ ‘) ç­‰ ç­‰</li>
</ul>
<h2 id="ç¬¬-8-ç« -æ›´å¤šç²¾å» ç®—æ³•"><a class="header-anchor" href="#ç¬¬-8-ç« -æ›´å¤šç²¾å» ç®—æ³•">ğŸŒ³</a>ç¬¬ 8 ç«  æ›´å¤šç²¾å» ç®—æ³•</h2>
<h3 id="ç¬¬-1-èŠ‚-é•–å±€è¿é•–-å›¾çš„æœ€å°ç”Ÿæˆæ ‘"><a class="header-anchor" href="#ç¬¬-1-èŠ‚-é•–å±€è¿é•–-å›¾çš„æœ€å°ç”Ÿæˆæ ‘">ğŸŒ³</a>ç¬¬ 1 èŠ‚ é•–å±€è¿é•–â€”â€”å›¾çš„æœ€å°ç”Ÿæˆæ ‘</h3>
<h4 id="kruskal-æœ€å°ç”Ÿæˆæ ‘-å¹¶æŸ¥é›†è¿é€šè¿ç”¨"><a class="header-anchor" href="#kruskal-æœ€å°ç”Ÿæˆæ ‘-å¹¶æŸ¥é›†è¿é€šè¿ç”¨">ğŸŒ³</a>kruskal æœ€å°ç”Ÿæˆæ ‘ å¹¶æŸ¥é›†è¿é€šè¿ç”¨</h4>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span>  _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="comment">//	ç®—æ³•ï¼šå›¾çš„æœ€å°ç”Ÿæˆæ ‘</span></span><br><span class="line"><span class="comment">//	æ—¶é—´ï¼š2021.11.15 20ç‚¹23åˆ†</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="type">int</span> u;</span><br><span class="line">	<span class="type">int</span> v;</span><br><span class="line">	<span class="type">int</span> w;</span><br><span class="line">&#125;;<span class="comment">//ä¸ºäº†æ–¹ä¾¿æ’åºï¼Œè¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªç»“æ„ä½“ç”¨æ¥å­˜å‚¨è¾¹çš„å…³ç³»</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> <span class="title">e</span>[10];</span><span class="comment">//æ•°ç»„å¤§å°æ ¹æ®å®é™…æƒ…å†µæ¥è®¾ç½®ï¼Œè¦æ¯”mçš„æœ€å¤§å€¼å¤§1</span></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> f[<span class="number">7</span>] = &#123; <span class="number">0</span> &#125;, sum = <span class="number">0</span>, count = <span class="number">0</span>;<span class="comment">//å¹¶æŸ¥é›†éœ€è¦ç”¨åˆ°çš„ä¸€äº›å˜é‡</span></span><br><span class="line"><span class="comment">//fæ•°ç»„å¤§å°æ ¹æ®å®é™…æƒ…å†µæ¥è®¾ç½®ï¼Œè¦æ¯”nçš„æœ€å¤§å€¼å¤§1</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">quicksort</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i, j;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">edge</span> <span class="title">t</span>;</span></span><br><span class="line">	<span class="keyword">if</span> (left &gt; right)</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">	i = left;</span><br><span class="line">	j = right;</span><br><span class="line">	<span class="keyword">while</span> (i != j)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//é¡ºåºå¾ˆé‡è¦ï¼Œè¦ä»å³è¾¹å¼€å§‹æ‰¾</span></span><br><span class="line">		<span class="keyword">while</span> (e[j].w &gt;= e[left].w &amp;&amp; i &lt; j)</span><br><span class="line">			j--;</span><br><span class="line">		<span class="comment">//å†ä»å·¦è¾¹å¼€å§‹æ‰¾</span></span><br><span class="line">		<span class="keyword">while</span> (e[i].w &lt;= e[left].w &amp;&amp; i &lt; j)</span><br><span class="line">			i++;</span><br><span class="line">		<span class="comment">//äº¤æ¢</span></span><br><span class="line">		<span class="keyword">if</span> (i &lt; j)</span><br><span class="line">		&#123;</span><br><span class="line">			t = e[i];</span><br><span class="line">			e[i] = e[j];</span><br><span class="line">			e[j] = t;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//æœ€ç»ˆå°†åŸºå‡†æ•°å½’ä½ï¼Œå°†leftå’Œiäº’æ¢</span></span><br><span class="line">	t = e[left];</span><br><span class="line">	e[left] = e[i];</span><br><span class="line">	e[i] = t;</span><br><span class="line"></span><br><span class="line">	quicksort(left, i - <span class="number">1</span>);<span class="comment">//ç»§ç»­å¤„ç†å·¦è¾¹çš„ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹</span></span><br><span class="line">	quicksort(i+<span class="number">1</span>, right);<span class="comment">//ç»§ç»­å¤„ç†å³è¾¹çš„ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹</span></span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¹¶æŸ¥é›†å¯»æ‰¾ç¥–å…ˆçš„å‡½æ•°</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">getf</span><span class="params">(<span class="type">int</span> v)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (f[v] == v)</span><br><span class="line">		<span class="keyword">return</span> v;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//è¿™é‡Œæ˜¯è·¯å¾„å‹ç¼©</span></span><br><span class="line">		f[v] = getf(f[v]);</span><br><span class="line">		<span class="keyword">return</span> f[v];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¹¶æŸ¥é›†åˆå¹¶ä¸¤å­é›†åˆçš„å‡½æ•°</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span> v, <span class="type">int</span> u)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> t1, t2;</span><br><span class="line">	t1 = getf(v);</span><br><span class="line">	t2 = getf(u);</span><br><span class="line">	<span class="keyword">if</span> (t1 != t2)<span class="comment">//åˆ¤æ–­ä¸¤ä¸ªç‚¹æ˜¯å¦åœ¨åŒä¸€ä¸ªé›†åˆä¸­</span></span><br><span class="line">	&#123;</span><br><span class="line">		f[t2] = t1;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	<span class="comment">//è¯»å…¥nå’Œmï¼Œnè¡¨ç¤ºé¡¶ç‚¹ä¸ªæ•°ï¼Œmè¡¨ç¤ºè¾¹çš„æ¡æ•°</span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">	<span class="comment">//è¯»å…¥è¾¹ï¼Œè¿™é‡Œç”¨ä¸€ä¸ªç»“æ„ä½“æ¥å­˜å‚¨è¾¹çš„å…³ç³»</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;e[i].u, &amp;e[i].v, &amp;e[i].w);</span><br><span class="line"></span><br><span class="line">	quicksort(<span class="number">1</span>, m);<span class="comment">//æŒ‰ç…§æƒå€¼ä»å°åˆ°å¤§å¯¹è¾¹è¿›è¡Œå¿«é€Ÿæ’åº</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//å¹¶æŸ¥é›†åˆå§‹åŒ–</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		f[i] = i;</span><br><span class="line">	<span class="comment">//Kruskalç®—æ³•æ ¸å¿ƒéƒ¨åˆ†</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= m; i++)<span class="comment">//å¼€å§‹ä»å°åˆ°å¤§æšä¸¾æ¯ä¸€æ¡è¾¹</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//åˆ¤æ–­ä¸€æ¡è¾¹çš„ä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦å·²ç»è”é€šï¼Œå³åˆ¤æ–­æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­</span></span><br><span class="line">		<span class="keyword">if</span> (merge(e[i].u, e[i].v))<span class="comment">//å¦‚æœç›®å‰å°šæœªä¸è¿é€šï¼Œåˆ™é€‰ç”¨è¿™æ¡è¾¹</span></span><br><span class="line">		&#123;</span><br><span class="line">			count++;</span><br><span class="line">			sum = sum + e[i].w;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (count == n - <span class="number">1</span>)<span class="comment">//ç›´åˆ°é€‰ç”¨äº†n-1æ¡è¾¹ä¹‹åé€€å‡ºå¾ªç¯</span></span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, sum);<span class="comment">//æ‰“å°ç»“æœ</span></span><br><span class="line">	getchar();</span><br><span class="line">	getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬-2-èŠ‚-å†è°ˆæœ€å°ç”Ÿæˆæ ‘"><a class="header-anchor" href="#ç¬¬-2-èŠ‚-å†è°ˆæœ€å°ç”Ÿæˆæ ‘">ğŸŒ³</a>ç¬¬ 2 èŠ‚ å†è°ˆæœ€å°ç”Ÿæˆæ ‘</h3>
<p><a href="https://www.cs.usfca.edu/~galles/visualization/Prim.html">Prim æœ€å°ç”Ÿæˆæ ‘ å¯è§†åŒ–ç®—æ³•(Prim Minimum Cost Spanning Treeh)</a><br>
<a href="https://algorithm-visualizer.org/greedy/prims-minimum-spanning-tree">Prim Minimum Cost Spanning Treeh</a></p>
<h4 id="prim-æœ€å°ç”Ÿæˆæ ‘-è·ç¦»æ ‘æœ€çŸ­è·¯å¾„çš„é¡¶ç‚¹æœç´¢-æ—¶é—´å¤æ‚åº¦-o-nÂ²"><a class="header-anchor" href="#prim-æœ€å°ç”Ÿæˆæ ‘-è·ç¦»æ ‘æœ€çŸ­è·¯å¾„çš„é¡¶ç‚¹æœç´¢-æ—¶é—´å¤æ‚åº¦-o-nÂ²">ğŸŒ³</a>Prim æœ€å°ç”Ÿæˆæ ‘ è·ç¦»æ ‘æœ€çŸ­è·¯å¾„çš„é¡¶ç‚¹æœç´¢ æ—¶é—´å¤æ‚åº¦ <em>O(NÂ²)</em></h4>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> n,m,i,j,k,min,t1,t2,t3;</span><br><span class="line">	<span class="type">int</span> e[<span class="number">7</span>][<span class="number">7</span>],dis[<span class="number">7</span>],book[<span class="number">7</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">	<span class="type">int</span> inf=<span class="number">99999999</span>;</span><br><span class="line">	<span class="type">int</span> count=<span class="number">0</span>,sum=<span class="number">0</span>;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">			<span class="keyword">if</span>(i==j) e[i][j]=<span class="number">0</span>;</span><br><span class="line">				<span class="keyword">else</span> e[i][j]=inf;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å¼€å§‹è¯»å…¥è¾¹</span></span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>,&amp;t1,&amp;t2,&amp;t3);</span><br><span class="line">		e[t1][t2]=t3;</span><br><span class="line">		e[t2][t1]=t3;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//åˆå§‹åŒ–disæ•°ç»„</span></span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		dis[i]=e[<span class="number">1</span>][i];</span><br><span class="line"></span><br><span class="line">	book[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">	count++;</span><br><span class="line">	<span class="keyword">while</span>(count&lt;n)</span><br><span class="line">	&#123;</span><br><span class="line">		min=inf;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(book[i]==<span class="number">0</span> &amp;&amp; dis[i]&lt;min)</span><br><span class="line">			&#123;</span><br><span class="line">				min=dis[i];</span><br><span class="line">				j=i;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		book[j]=<span class="number">1</span>;</span><br><span class="line">		count++;</span><br><span class="line">		sum=sum+dis[j];</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span>(k=<span class="number">1</span>;k&lt;=n;k++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(book[k]==<span class="number">0</span> &amp;&amp; dis[k]&gt;e[j][k])</span><br><span class="line">				dis[k]=e[j][k];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,sum);</span><br><span class="line"></span><br><span class="line">	getchar();getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h4 id="prim-æœ€å°ç”Ÿæˆæ ‘-å †ä¼˜åŒ–-é‚»æ¥è¡¨-o-mlogn"><a class="header-anchor" href="#prim-æœ€å°ç”Ÿæˆæ ‘-å †ä¼˜åŒ–-é‚»æ¥è¡¨-o-mlogn">ğŸŒ³</a>prim æœ€å°ç”Ÿæˆæ ‘ å †ä¼˜åŒ–+é‚»æ¥è¡¨ <em>O</em>(<em>M</em>log<em>N</em>)</h4>
<p>æŠŠ6ä¸ªç‚¹æ”¾è¿›å †ä¸­ æ‰«æä¸€ä¸ªç‚¹çš„ è¾¹é‚»æ¥è¡¨ä»¥å å°±popå‡ºç›´åˆ°æ‰€æœ‰ç‚¹popå‡º</p>
<p>ç¨€ç–å›¾ï¼šè¾¹çš„æ•°é‡è¿œå°äºé¡¶ç‚¹æ•°é‡çš„å¹³æ–¹ï¼ˆ|E| &lt;&lt; |V|^2ï¼‰çš„å›¾ç§°ä¸ºç¨€ç–å›¾ã€‚è¿™é‡Œçš„â€œè¿œå°äºâ€æ˜¯ä¸€ä¸ªç›¸å¯¹çš„æ¦‚å¿µï¼Œæ²¡æœ‰ç»å¯¹çš„æ•°å€¼ç•Œé™ã€‚</p>
<p>ç¨ å¯†å›¾ï¼šè¾¹çš„æ•°é‡æ¥è¿‘é¡¶ç‚¹æ•°é‡çš„å¹³æ–¹ï¼ˆ|E| â‰ˆ |V|^2ï¼‰çš„å›¾ç§°ä¸ºç¨ å¯†å›¾ã€‚<br>
<img src="http://www.aiug.cn/wp-content/uploads/2024/09/%E7%A8%80%E7%96%8F%E5%9B%BE%E5%92%8C%E7%A8%A0%E5%AF%86%E5%9B%BE.png" alt="ç¨€ç–å›¾&amp;ç¨ å¯†å›¾"></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> dis[<span class="number">7</span>], book[<span class="number">7</span>] = &#123;<span class="number">0</span>&#125;; <span class="comment">// bookB A aR MET BA BOA RAE</span></span><br><span class="line"><span class="type">int</span> h[<span class="number">7</span>], pos[<span class="number">7</span>], size;    <span class="comment">// b ç”¨ æ™¥ ä¿ å­˜ å † ,pos ç”¨ æ™¥ å­˜ å‚… æ¯ ä¸ª é¡¶ ç‚¹ åœ¨ å † ä¸­ çš„ ä½ ç¹® ,size ä¸º å † çš„ å¤§ å°</span></span><br><span class="line"><span class="comment">// äº¤ æ¢å‡½æ•° , ç”¨ ç±³ äº¤ æ¢ å † ä¸­ çš„ ä¸¤ ä¸ª å…ƒ ç´  çš„ å€¼</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    t = h[x];</span><br><span class="line">    h[x] = h[y];</span><br><span class="line">    h[y] = t;</span><br><span class="line">    <span class="comment">// åŒ æ­¥ æ›´ æ–° pos</span></span><br><span class="line">    t = pos[h[x]];</span><br><span class="line">    pos[h[x]] = pos[h[y]];</span><br><span class="line">    pos[h[y]] = t;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å‘ ä¸‹ è°ƒ æ•´ å‡½ æ•°</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">siftdown</span><span class="params">(<span class="type">int</span> i)</span> <span class="comment">// ä¼˜ å…¥ ä¸€ ä¸ª éœ è¦ å‘ ä¸‹ è°ƒ æ•´ çš„ ç»“ ç‚¹ ç¸– å·</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> t, flag = <span class="number">0</span>; <span class="comment">// 5lag ç”¨ æ™¥ æœ‡ è®° æ˜¯ å¦ éœ€ è¦ ç»§ ç»­ å‘ ä¸‹ è°ƒ æ•´</span></span><br><span class="line">    <span class="keyword">while</span> (i * <span class="number">2</span> &lt;= size &amp;&amp; flag == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// æ¯” è¾ƒ i å’Œ å®ƒ å·¦ å„¿ äº i42 åœ¨ ais ä¸­ çš„ å€¼ , å¹² ç”¨ t è®° å½• å€¼ è½¼ å° çš„ ç»“ ç‚¹ ç¸– å·</span></span><br><span class="line">        <span class="keyword">if</span> (dis[h[i]] &gt; dis[h[[i * <span class="number">2</span>]]])</span><br><span class="line">            t = i * <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            t = i;</span><br><span class="line">        <span class="comment">// åŠ  æšœ å®ƒ æ˜‰ å³ å„¿ å­ , å† å¯¹ æ˜‰ å„¿ äºŒ è¿› è¡Œ è®¨ è®º</span></span><br><span class="line">        <span class="keyword">if</span> (i * <span class="number">2</span> + <span class="number">1</span> &lt;= size)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// åŠ  æ˜¨ æ˜‰ å„¿ å­ çš„ å€¼ æ›´ å° , æ›´ æ–° è¾ƒ å° çš„ ç»“ ç‚¹ ç¸–å·</span></span><br><span class="line">            <span class="keyword">if</span> (dis[h[[t]]] &gt; dis[h[i * <span class="number">2</span> + <span class="number">1</span>]])</span><br><span class="line">                t = i * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚ æ¦‚ å‘ ç° æ˜€ å° çš„ ç»“ ç‚¹ ç¸– å· ä¸ æ˜¯ è‡ª å·± , è¯´ æ˜ å­ ç»“ ç‚¹ ä¸­ æ˜‰ æ¯” çˆ¶ ç»“ ç‚¹ æ›´ å°” çš„</span></span><br><span class="line">        <span class="keyword">if</span> (t != i)</span><br><span class="line">        &#123;</span><br><span class="line">            swap(t, i) <span class="comment">// äº¤ æ¢ å®ƒ ä»¬</span></span><br><span class="line">                i = t; <span class="comment">// æ›´ æ–° ; ä¸º åˆš æ‰ ä¸ å®ƒ äº¤ æ¢ çš„ å„¿ å­” ç»“ ç‚¹ çš„ ç¸– å· , ä¾¿ äº æ¥ ä¸‹ ç±³ ç»§ ç»­ å‘ ä¸‹ è°ƒ æ•´</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            flag = <span class="number">1</span>; <span class="comment">// åˆ™ è¯´ æ˜ å½“ å‰ çš„ æ–‡ ç»“ ç‚¹ å·² ç» æ¯” ä¸¤ ä¸ª å­” ç»“ ç‚¹ éƒ½ è¦ å° äº† , ä¸ éœœ è¦ å½· è¿› è¡Œ è°ƒ å­¤ äº†</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">siftup</span><span class="params">(<span class="type">int</span> i)</span> <span class="comment">// ä¼  å…¥ ä¸€ ä¸ª éœ€ è¦ å‘ ä¸Š è°ƒ æ•´ çš„ ç»“ ç‚¹ ç¸– å·</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> flag = <span class="number">0</span>; <span class="comment">// ç”¨ æ±Ÿæœ‡ è®° æ˜¯ å¦ éœ€ è¦ ç»§ ç»­ åŠ ä¸Š è°ƒ æ•´</span></span><br><span class="line">    <span class="keyword">if</span> (i == <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span>; <span class="comment">// å¦‚ æšœ æ˜¯ å † é¡¶ , å°± è¿” å› , ä¸ éœœ è¦ è°ƒ é©¹ äº†</span></span><br><span class="line">    <span class="comment">// ä¸ åœ¨ å † é¡¶ , å¹¶ ä¸œ å½“ å‰ ç»“ ç‚¹ 3 çš„ å€¼ æ¯” æ–‡ ç»“ ç‚¹ å° çš„ æ—¶ å€™ ç»§ ç»­ å‘ ä¸Š è°ƒ æ•´</span></span><br><span class="line">    <span class="keyword">while</span> (i != <span class="number">1</span> &amp;&amp; flag == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ¤ æ–­ æ˜¯ å¦ æ¯” çˆ¶ ç»“ ç‚¹ çš„ å°</span></span><br><span class="line">        <span class="keyword">if</span> (dis[h[i]] &lt; dis[h[i / <span class="number">2</span>]])</span><br><span class="line">            swap(i, i / <span class="number">2</span>); <span class="comment">// RREME EEE</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            flag = <span class="number">1</span>; <span class="comment">// RAGA Hi SRE TAYE SC EEK</span></span><br><span class="line">        i = i / <span class="number">2</span>;    <span class="comment">// è¿™ å¥ è¯ å¾ˆ é‡ è¦ , æ›´ æ–° ç¸– å· &#123; ä¸º å®ƒ çˆ¶ ç»“ ç‚¹ çš„ ç¸– å· , ä» è€Œ ä¾¿ äº ä¸‹ ä¸€ æ¬¡ ç»§ ç»­ åŠ ä¸Š è°ƒ æ•´</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä» å † é¡¶ å– å‡º ä¸€ ä¸ª å…ƒ ç´ </span></span><br><span class="line"><span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    t = h[<span class="number">1</span>];       <span class="comment">// ç”¨ ä¸€ ä¸ª ä¸´ æ—¶ å˜ é‡ è®° å½• å † é¡¶ ç‚¹ çš„ å€¼</span></span><br><span class="line">    pos[t] = <span class="number">0</span>;     <span class="comment">// å…¶ å® è¿™ å¥ è¦ ä¸ è¦ æ—  æ‰€ è°“</span></span><br><span class="line">    h[<span class="number">1</span>] = h[size]; <span class="comment">// å°† å † çš„ æ˜€ å ä¸€ ä¸ª ç‚¹ èµ” å€¼ åˆ° ç»³ é¡¹</span></span><br><span class="line">    pos[h[<span class="number">1</span>]] = <span class="number">1</span>;</span><br><span class="line">    size--;      <span class="comment">// å † çš„ å…ƒ ç´  å‡‘ å°‘ 1</span></span><br><span class="line">    siftdown(<span class="number">1</span>); <span class="comment">// å‘ ä¸‹ è°ƒ æ•´</span></span><br><span class="line">    <span class="keyword">return</span> t;    <span class="comment">// è¿” å› ä¹‹ å‰ è®° å½• çš„ èœ¡ é¡¹ ç‚¹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n, m, i, j, k;</span><br><span class="line">    <span class="comment">// Vs w å’Œ next çš„ æ•° ç»„ å¤§ å° è¦ æœ¹ æ® å® é™… æƒ… å†µ æ™¥ è®¾ ç¹® , æ­¤ å›¾ æ˜¯ æ—  å‘ å›¾ , è¦ æ¯” 2 *m çš„ æ˜€ å¤§ å€¼ è¦ å¤§ 1</span></span><br><span class="line">    <span class="comment">// #izst è¦ æ¯” n çš„ æ˜€ å¤§ å€¼ è¦ å¤§ 1, è¦ æ¯” 24m çš„ æ˜€ å¤§ å€¼ è¦ å¤§ 1</span></span><br><span class="line">    <span class="type">int</span> u[<span class="number">19</span>] v[<span class="number">19</span>], w[<span class="number">19</span>], sizet[<span class="number">7</span>], next[<span class="number">19</span>];</span><br><span class="line">    <span class="type">int</span> inf = <span class="number">99999999</span>;     <span class="comment">// ç”¨ inf ã€Šinfini y çš„ ç¸© å†— ã€‹ å­˜ å‚… ä¸€ ä¸ª æˆ‘ ä»¬ è®¤ ä¸º çš„ æ­£ æ—  ç©· å€¼</span></span><br><span class="line">    <span class="type">int</span> count = <span class="number">0</span>, sum = <span class="number">0</span>; <span class="comment">// count ç”¨ æœ— è®° å½• ç”Ÿ æˆ æœ‘ ä¸­ é¡¶ ç‚¹ çš„ ä¸ª æ•° ,sum ç”¨ æ™¥ å­˜ å€Ÿ è·¯ å¾€ ä¹‹ å’Œ</span></span><br><span class="line">    <span class="comment">// è¯» å…¥ nm,n è¡¨ ç¤º é¡¶ åº— ä¸ª æ•° ,m è¡¨ ç¤º è¾¹ çš„ æ™¡ æ•°</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¯» å…¥ è¾¹</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;u[i], &amp;v[i], &amp;w[i]);</span><br><span class="line">    <span class="comment">// è¿™ é‡Œ æ˜¯ æ—  å‘ å›¾ , æ‰€ ä»¥ éœ€ è¦ å°† æ‰€ æ˜‰ çš„ è¾¹ å† å å‘ å­˜ å€© ä¸€ æ¬¡</span></span><br><span class="line">    <span class="keyword">for</span> (i = m + <span class="number">1</span>; i &lt;= <span class="number">2</span> * m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        u[i] = v[i - m];</span><br><span class="line">        v[i] = u[i - m];</span><br><span class="line">        w[i] = w[i - m];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¼€ å§‹ä½¿ ç”¨ é‚» æ¥ è¡¨ å­˜ å‚… è¾¹</span></span><br><span class="line">    <span class="keyword">for</span> (i = l; i &lt;= n; i++)</span><br><span class="line">        first[i] = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= <span class="number">2</span> * m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        next[i] = first[u[i]];</span><br><span class="line">        first[u[i]] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 2rim æœ¸ å¿ƒéƒ¨åˆ† å¼€ å§‹</span></span><br><span class="line">    <span class="comment">//  å°† 2 å· é¡¶ ç‚¹ åŠ  å…¥ ç”Ÿ æˆ– æœ‘</span></span><br><span class="line">    book[<span class="number">1</span>] = <span class="number">1</span>; <span class="comment">// è¿™ é‡Œ ç”¨ book æš— æœ‡ è®° ä¸€ ä¸ª é¡¹ ç‚¹ å·² ç» åŠ  å…¥ ç”Ÿ æˆ æœ‘</span></span><br><span class="line">    count++;</span><br><span class="line">    <span class="comment">// åˆ å§‹ åŒ– ais æ•° ç»„ , è¿™ é‡Œ æ˜¯ 1 å· é¡¶ ç‚¹ åˆ° å…¶ ä½™ å„ ä¸ª é¡¶ ç‚¹ çš„ åˆ å§‹ è·Œ é«˜</span></span><br><span class="line">    dis[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">2</span>; i &lt;= n; i++)</span><br><span class="line">        dis[i] = inf;</span><br><span class="line">    k = first[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">while</span> (k != <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        dis[v[k]] = w[k];</span><br><span class="line">        k = next[k];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ å§‹ åŒ– å †</span></span><br><span class="line">    size = n;</span><br><span class="line">    <span class="keyword">for</span> (i = l; i &lt;= size; i++)</span><br><span class="line">        &#123;h[i] = i; pos[i]=i&#125;</span><br><span class="line">    <span class="keyword">for</span> (i = size / <span class="number">2</span>; i &gt;= <span class="number">1</span>; i--)</span><br><span class="line">        siftdown(i);</span><br><span class="line"></span><br><span class="line">    pop(); <span class="comment">// å…ˆ å¼¹ å‡º ä¸€ ä¸ª å † é¡¶ å…ƒ ç´  , å›  ä¸º æ­¤ æ—¶ å † é¡¶ æ˜¯ 1 å· é¡¶ ç‚¹</span></span><br><span class="line">    <span class="keyword">while</span> (count &lt; n)</span><br><span class="line">    &#123;</span><br><span class="line">        j = pop();</span><br><span class="line">        book[j] = <span class="number">1</span>;</span><br><span class="line">        count++;</span><br><span class="line">        sum = sum + dis[j];</span><br><span class="line">        k = first[j];</span><br><span class="line">        <span class="keyword">while</span> (k != <span class="number">-1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (book[v[k]] == <span class="number">0</span> &amp;&amp; dis[v[k]] &gt; w[k])</span><br><span class="line">            &#123;</span><br><span class="line">                dis[v[k]] = w[k];</span><br><span class="line">                siftup(pos[v[k]]);</span><br><span class="line">            &#125;</span><br><span class="line">            k = next[k];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, sum);</span><br><span class="line">    getchar();</span><br><span class="line">    getchar();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬-3-èŠ‚-é‡è¦åŸå¸‚-å›¾çš„å‰²ç‚¹"><a class="header-anchor" href="#ç¬¬-3-èŠ‚-é‡è¦åŸå¸‚-å›¾çš„å‰²ç‚¹">ğŸŒ³</a>ç¬¬ 3 èŠ‚ é‡è¦åŸå¸‚â€”â€”å›¾çš„å‰²ç‚¹</h3>
<iframe src="https://player.bilibili.com/player.html?isOutside=true&aid=883492649&bvid=BV1ZK4y1x7dm&cid=198468710&p=1&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAXN 1000</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> graph[MAXN][MAXN];</span><br><span class="line"><span class="type">int</span> dfn[MAXN], low[MAXN], parent[MAXN];</span><br><span class="line"><span class="type">int</span> isCut[MAXN];</span><br><span class="line"><span class="type">int</span> timeCounter;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">tarjan</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    dfn[u] = low[u] = ++timeCounter;</span><br><span class="line">    <span class="type">int</span> children = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> v = <span class="number">0</span>; v &lt; n; v++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (graph[u][v]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!dfn[v]) &#123;</span><br><span class="line">                children++;</span><br><span class="line">                parent[v] = u;</span><br><span class="line">                tarjan(v, n);</span><br><span class="line">                low[u] = (low[u] &lt; low[v]) ? low[u] : low[v];</span><br><span class="line">                <span class="keyword">if</span> (parent[u] == <span class="number">-1</span> &amp;&amp; children &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                    isCut[u] = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (parent[u] != <span class="number">-1</span> &amp;&amp; low[v] &gt;= dfn[u]) &#123;</span><br><span class="line">                    isCut[u] = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (v != parent[u]) &#123;</span><br><span class="line">                low[u] = (low[u] &lt; dfn[v]) ? low[u] : dfn[v];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="built_in">memset</span>(graph, <span class="number">0</span>, <span class="keyword">sizeof</span>(graph));</span><br><span class="line">    <span class="built_in">memset</span>(dfn, <span class="number">0</span>, <span class="keyword">sizeof</span>(dfn));</span><br><span class="line">    <span class="built_in">memset</span>(low, <span class="number">0</span>, <span class="keyword">sizeof</span>(low));</span><br><span class="line">    <span class="built_in">memset</span>(parent, <span class="number">-1</span>, <span class="keyword">sizeof</span>(parent));</span><br><span class="line">    <span class="built_in">memset</span>(isCut, <span class="number">0</span>, <span class="keyword">sizeof</span>(isCut));</span><br><span class="line">    timeCounter = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="type">int</span> u, v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;u, &amp;v);</span><br><span class="line">        graph[u][v] = <span class="number">1</span>;</span><br><span class="line">        graph[v][u] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!dfn[i]) &#123;</span><br><span class="line">            tarjan(i, n);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (isCut[i]) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Cut vertex: %d\n&quot;</span>, i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬-4-èŠ‚-å…³é”®é“è·¯-å›¾çš„å‰²è¾¹"><a class="header-anchor" href="#ç¬¬-4-èŠ‚-å…³é”®é“è·¯-å›¾çš„å‰²è¾¹">ğŸŒ³</a>ç¬¬ 4 èŠ‚ å…³é”®é“è·¯â€”â€”å›¾çš„å‰²è¾¹</h3>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAXN 1000</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> graph[MAXN][MAXN];</span><br><span class="line"><span class="type">int</span> dfn[MAXN], low[MAXN], parent[MAXN];</span><br><span class="line"><span class="type">int</span> timeCounter;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">tarjan</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    dfn[u] = low[u] = ++timeCounter;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> v = <span class="number">0</span>; v &lt; n; v++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (graph[u][v]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!dfn[v]) &#123;</span><br><span class="line">                parent[v] = u;</span><br><span class="line">                tarjan(v, n);</span><br><span class="line">                low[u] = (low[u] &lt; low[v]) ? low[u] : low[v];</span><br><span class="line">                <span class="keyword">if</span> (low[v] &gt; dfn[u]) &#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;Bridge: %d - %d\n&quot;</span>, u, v);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (v != parent[u]) &#123;</span><br><span class="line">                low[u] = (low[u] &lt; dfn[v]) ? low[u] : dfn[v];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="built_in">memset</span>(graph, <span class="number">0</span>, <span class="keyword">sizeof</span>(graph));</span><br><span class="line">    <span class="built_in">memset</span>(dfn, <span class="number">0</span>, <span class="keyword">sizeof</span>(dfn));</span><br><span class="line">    <span class="built_in">memset</span>(low, <span class="number">0</span>, <span class="keyword">sizeof</span>(low));</span><br><span class="line">    <span class="built_in">memset</span>(parent, <span class="number">-1</span>, <span class="keyword">sizeof</span>(parent));</span><br><span class="line">    timeCounter = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="type">int</span> u, v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;u, &amp;v);</span><br><span class="line">        graph[u][v] = <span class="number">1</span>;</span><br><span class="line">        graph[v][u] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!dfn[i]) &#123;</span><br><span class="line">            tarjan(i, n);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬-5-èŠ‚-æˆ‘è¦åšæœˆè€-äºŒåˆ†å›¾æœ€å¤§åŒ¹é…"><a class="header-anchor" href="#ç¬¬-5-èŠ‚-æˆ‘è¦åšæœˆè€-äºŒåˆ†å›¾æœ€å¤§åŒ¹é…">ğŸŒ³</a>ç¬¬ 5 èŠ‚ æˆ‘è¦åšæœˆè€â€”â€”äºŒåˆ†å›¾æœ€å¤§åŒ¹é…</h3>
<h4 id="æ¦‚å¿µæ€§çš„ä¸œè¥¿-äºŒåˆ†å›¾-åŒˆç‰™åˆ©ç®—æ³•-å¢å¹¿è·¯ç®—æ³•"><a class="header-anchor" href="#æ¦‚å¿µæ€§çš„ä¸œè¥¿-äºŒåˆ†å›¾-åŒˆç‰™åˆ©ç®—æ³•-å¢å¹¿è·¯ç®—æ³•">ğŸŒ³</a>æ¦‚å¿µæ€§çš„ä¸œè¥¿ äºŒåˆ†å›¾ åŒˆç‰™åˆ©ç®—æ³• å¢å¹¿è·¯ç®—æ³•</h4>
<h2 id="ç¬¬-9-ç« -è¿˜èƒ½æ›´å¥½å—-å¸è½¯äºšæ´²ç ”ç©¶é™¢é¢è¯•"><a class="header-anchor" href="#ç¬¬-9-ç« -è¿˜èƒ½æ›´å¥½å—-å¸è½¯äºšæ´²ç ”ç©¶é™¢é¢è¯•">ğŸŒ³</a>ç¬¬ 9 ç«  è¿˜èƒ½æ›´å¥½å—â€”â€”å¸è½¯äºšæ´²ç ”ç©¶é™¢é¢è¯•</h2>
<h4 id="æˆ‘çš„ç¬¬ä¸€æœ¬ç®—æ³•ä¹¦"><a class="header-anchor" href="#æˆ‘çš„ç¬¬ä¸€æœ¬ç®—æ³•ä¹¦">ğŸŒ³</a>æˆ‘çš„ç¬¬ä¸€æœ¬ç®—æ³•ä¹¦</h4>
<p>åºç« ç®—æ³•çš„åŸºæœ¬çŸ¥è¯†001<br>
0-1ä»€ä¹ˆæ˜¯ç®—æ³•002<br>
0-2è¿è¡Œæ—¶é—´çš„è®¡ç®—æ–¹æ³•007<br>
ç¬¬1ç« æ•°æ®ç»“æ„009<br>
1-1ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„010<br>
1-2é“¾è¡¨013<br>
1-3æ•°ç»„016<br>
1-4æ ˆ020<br>
1-5é˜Ÿåˆ—022<br>
1-6å“ˆå¸Œè¡¨024<br>
1-7å †032<br>
1-8äºŒå‰æŸ¥æ‰¾æ ‘036<br>
ç¬¬2ç« æ’åº043<br>
2-1ä»€ä¹ˆæ˜¯æ’åº044<br>
2-2å†’æ³¡æ’åº046<br>
2-3é€‰æ‹©æ’åº050<br>
2-4æ’å…¥æ’åº052<br>
2-5å †æ’åº056<br>
2-6å½’å¹¶æ’åº060<br>
2-7å¿«é€Ÿæ’åº064<br>
ç¬¬3ç« æ•°ç»„çš„æŸ¥æ‰¾071<br>
3-1çº¿æ€§æŸ¥æ‰¾072<br>
3-2äºŒåˆ†æŸ¥æ‰¾074<br>
ç¬¬4ç« å›¾çš„æœç´¢077<br>
4-1ä»€ä¹ˆæ˜¯å›¾078<br>
4-2å¹¿åº¦ä¼˜å…ˆæœç´¢082<br>
4-3æ·±åº¦ä¼˜å…ˆæœç´¢086<br>
4-4è´å°”æ›¼-ç¦ç‰¹ç®—æ³•090<br>
4-5ç‹„å…‹æ–¯ç‰¹æ‹‰ç®—æ³•096<br>
4-6Aç®—æ³•103<br>
ç¬¬5ç« å®‰å…¨ç®—æ³•107<br>
5-1å®‰å…¨å’Œç®—æ³•108<br>
5-2åŠ å¯†çš„åŸºç¡€çŸ¥è¯†112<br>
5-3å“ˆå¸Œå‡½æ•°116<br>
5-4å…±äº«å¯†é’¥åŠ å¯†120<br>
5-5å…¬å¼€å¯†é’¥åŠ å¯†124<br>
5-6æ··åˆåŠ å¯†132<br>
5-7è¿ªè²-èµ«å°”æ›¼å¯†é’¥äº¤æ¢136<br>
5-8æ¶ˆæ¯è®¤è¯ç 144<br>
5-9æ•°å­—ç­¾å152<br>
5-10æ•°å­—è¯ä¹¦158<br>
ç¬¬6ç« èšç±»165<br>
6-1ä»€ä¹ˆæ˜¯èšç±»166<br>
6-2k-meansç®—æ³•168<br>
ç¬¬7ç« å…¶ä»–ç®—æ³•173<br>
7-1æ¬§å‡ é‡Œå¾—ç®—æ³•174<br>
7-2ç´ æ€§æµ‹è¯•178<br>
7-3ç½‘é¡µæ’å182<br>
7-4æ±‰è¯ºå¡”190</p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºç§‘å­¦</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>è¯»ä¹¦</tag>
        <tag>æ’åº</tag>
      </tags>
  </entry>
  <entry>
    <title>å¤§è¯æ•°æ®ç»“æ„ è¯»ä¹¦ç¬”è®°</title>
    <url>/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h1>å¤§è¯æ•°æ®ç»“æ„ è¯»ä¹¦ç¬”è®°</h1>
<h2 id="1-ç»ªè®º"><a class="header-anchor" href="#1-ç»ªè®º">ğŸŒ³</a>1. ç»ªè®º</h2>
<h3 id="é€»è¾‘ç»“æ„"><a class="header-anchor" href="#é€»è¾‘ç»“æ„">ğŸŒ³</a>é€»è¾‘ç»“æ„</h3>
<ul>
<li>é›†åˆç»“æ„</li>
<li>çº¿æ€§ç»“æ„</li>
<li>æ ‘å½¢ç»“æ„</li>
<li>å›¾å½¢ç»“æ„</li>
</ul>
<h3 id="ç‰©ç†ç»“æ„"><a class="header-anchor" href="#ç‰©ç†ç»“æ„">ğŸŒ³</a>ç‰©ç†ç»“æ„</h3>
<ul>
<li>é¡ºåºå­˜å‚¨ç»“æ„</li>
<li>é“¾æ¥å­˜å‚¨ç»“æ„</li>
</ul>
<h2 id="2-ç®—æ³•"><a class="header-anchor" href="#2-ç®—æ³•">ğŸŒ³</a>2. ç®—æ³•</h2>
<h3 id="ç®—æ³•ç‰¹å¾"><a class="header-anchor" href="#ç®—æ³•ç‰¹å¾">ğŸŒ³</a>ç®—æ³•ç‰¹å¾</h3>
<ul>
<li>è¾“å…¥è¾“å‡º</li>
<li>æœ‰ç©·æ€§</li>
<li>ç¡®å®šæ€§</li>
<li>å¯è¡Œæ€§</li>
</ul>
<h3 id="ç®—æ³•æ—¶é—´å¤æ‚åº¦"><a class="header-anchor" href="#ç®—æ³•æ—¶é—´å¤æ‚åº¦">ğŸŒ³</a>ç®—æ³•æ—¶é—´å¤æ‚åº¦</h3>
<h4 id="å¸¸æ•°é˜¶-o-1"><a class="header-anchor" href="#å¸¸æ•°é˜¶-o-1">ğŸŒ³</a>å¸¸æ•°é˜¶ O(1)</h4>
<h4 id="çº¿æ€§é˜¶-o-n"><a class="header-anchor" href="#çº¿æ€§é˜¶-o-n">ğŸŒ³</a>çº¿æ€§é˜¶ O(n)</h4>
<h4 id="å¯¹æ•°é˜¶-o-logn"><a class="header-anchor" href="#å¯¹æ•°é˜¶-o-logn">ğŸŒ³</a>å¯¹æ•°é˜¶ O(logn)</h4>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> count =<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(count &lt; n)</span><br><span class="line">&#123;</span><br><span class="line">    count = count * <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>x</mi></msup><mo>=</mo><mi>n</mi><mo>=</mo><mo>&gt;</mo><mi>x</mi><mo>=</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi></mrow><annotation encoding="application/x-tex">{2^x} = n =&gt; x = log_2n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span></span></span></span></p>
<h4 id="å¹³æ–¹é˜¶-o-n-2"><a class="header-anchor" href="#å¹³æ–¹é˜¶-o-n-2">ğŸŒ³</a>å¹³æ–¹é˜¶ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O({n^2})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></h4>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (j= <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="comment">/* æ—¶ é—´ å¤ æ‚ åº¦ ä¸º 0(1) çš„ ç¨‹åº æ­¥éª¤ åº åˆ— */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span>(i = <span class="number">0</span>; i &lt;n; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (j =i; j &lt;n; j++) <span class="comment">/* æ³¨æ„j = i è€Œä¸ æ˜¯0 */</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">/* æ—¶é—´ å¤ æ‚ åº¦ä¸º0(1) HBRP RAR */</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>+</mo><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>2</mn><mo stretchy="false">)</mo><mo>+</mo><mo lspace="0em" rspace="0em">â‹¯</mo><mo>+</mo><mn>1</mn><mo>=</mo><mfrac><mrow><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac><mo>=</mo><mfrac><msup><mi>n</mi><mn>2</mn></msup><mn>2</mn></mfrac><mo>+</mo><mfrac><mi>n</mi><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">n+(n-1)+(n-2)+{\cdots}+1 =\frac{n(n+1)}{2}=\frac{n^2}{2}+\frac{n}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord"><span class="minner">â‹¯</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3629em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0179em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0404em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p>
<h4 id="å¸¸è§æ—¶é—´å¤æ‚åº¦"><a class="header-anchor" href="#å¸¸è§æ—¶é—´å¤æ‚åº¦">ğŸŒ³</a>å¸¸è§æ—¶é—´å¤æ‚åº¦</h4>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>3</mn></msup><mo stretchy="false">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy="false">(</mo><msup><mn>2</mn><mi>n</mi></msup><mo stretchy="false">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">!</mo><mo stretchy="false">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mi>n</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1) &lt; O(logn) &lt; O(n) &lt; O(nlogn) &lt; O(n^2) &lt; O(n^3) &lt; O(2^n)&lt; O(n!) &lt; O(n^n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">!)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p>
<h2 id="3-çº¿æ€§è¡¨"><a class="header-anchor" href="#3-çº¿æ€§è¡¨">ğŸŒ³</a>3. çº¿æ€§è¡¨</h2>
<h3 id="éšæœºå­˜å–ç»“æ„"><a class="header-anchor" href="#éšæœºå­˜å–ç»“æ„">ğŸŒ³</a>éšæœºå­˜å–ç»“æ„</h3>
<p>é‚£ ä¹ˆ æˆ‘ä»¬ å¯¹ æ¯ä¸ªçº¿æ€§ è¡¨ ä½ ç½® çš„ å­˜å…¥æˆ–è€…å–å‡º æ•°æ®,å¯¹äºè®¡ç®—æœº æ¥è¯´ éƒ½æ˜¯ç›¸ç­‰çš„æ—¶é—´,<br>
ä¹Ÿ å°± æ˜¯ ä¸€ ä¸ª å¸¸æ•°,å®ƒ çš„å­˜å– æ—¶é—´äººæ€§èƒ½ä¸ºO(1)ã€‚<br>
æˆ‘ä»¬ é€šå¸¸ æŠŠå…·æœ‰ è¿™ ä¸€ ç‰¹ç‚¹ çš„ å­˜å‚¨ ç»“æ„ ç§°ä¸ºéšæœºå­˜å–ç»“æ„</p>
<p>çº¿æ€§ è¡¨ çš„ é¡ºåº å­˜å‚¨ ç»“æ„,åœ¨ å­˜ã€è¯» æ•°æ® æ—¶,ä¸ ç®¡ æ˜¯ å“ªä¸ª ä½ ç½® ,æ—¶é—´<br>
å¤æ‚åº¦ éƒ½æ˜¯ O(1); è€Œ æ’å…¥ æˆ– åˆ é™¤ æ—¶,æ—¶é—´ å¤ æ‚ åº¦ éƒ½æ˜¯ O(n)ã€‚</p>
<h3 id="çº¿æ€§-è¡¨-é“¾-å¼-å­˜å‚¨-ç»“æ„-å•-é“¾è¡¨"><a class="header-anchor" href="#çº¿æ€§-è¡¨-é“¾-å¼-å­˜å‚¨-ç»“æ„-å•-é“¾è¡¨">ğŸŒ³</a>çº¿æ€§ è¡¨ é“¾ å¼ å­˜å‚¨ ç»“æ„  å• é“¾è¡¨</h3>
<p>åœ¨ å•é“¾è¡¨ çš„ ç¬¬ä¸€ä¸ª ç»“ç‚¹å‰ é™„è®¾ ä¸ª ç»“ ç‚¹,ç§° ä¸ºå¤´ç»“ ç‚¹ ã€‚\å¤´ ç»“ ç‚¹ çš„ æ•°æ® åŸŸå¯ä»¥ ä¸ å­˜å‚¨ ä»»ä½•ä¿¡æ¯,<br>
ä¹Ÿå¯ä»¥ å­˜å‚¨å¦‚ çº¿æ€§ è¡¨ çš„ é•¿ åº¦ ç­‰é™„åŠ  ä¿¡æ¯,å¤´ ç»“ ç‚¹ çš„ æŒ‡é’ˆ åŸŸå­˜å‚¨ æŒ‡å‘ ç¬¬ ä¸€ ä¸ªç»“ ç‚¹ çš„æŒ‡é’ˆ</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> ElemType; <span class="comment">// å®šä¹‰æ•°æ®å…ƒç´ ç±»å‹</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> Status;   <span class="comment">// å®šä¹‰çŠ¶æ€ç±»å‹</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> OK 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ERROR 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å•é“¾è¡¨çš„èŠ‚ç‚¹ç»“æ„</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    ElemType data;       <span class="comment">// æ•°æ®åŸŸ</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> *<span class="title">next</span>;</span>   <span class="comment">// æŒ‡é’ˆåŸŸï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">&#125; Node, *LinkList;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å•é“¾è¡¨æ’å…¥æ“ä½œ</span></span><br><span class="line">Status <span class="title function_">ListInsert</span><span class="params">(LinkList *L, <span class="type">int</span> i, ElemType e)</span> &#123;</span><br><span class="line">    <span class="type">int</span> j = <span class="number">1</span>; <span class="comment">// è®¡æ•°å™¨ï¼Œè¡¨ç¤ºå½“å‰èŠ‚ç‚¹çš„ä½ç½®</span></span><br><span class="line">    LinkList p, s;</span><br><span class="line">    p = *L; <span class="comment">// pæŒ‡å‘é“¾è¡¨çš„å¤´èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯»æ‰¾ç¬¬i-1ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">while</span> (p &amp;&amp; j &lt; i) &#123;</span><br><span class="line">        p = p-&gt;next;</span><br><span class="line">        j++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœç¬¬i-1ä¸ªèŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›é”™è¯¯</span></span><br><span class="line">    <span class="keyword">if</span> (!p || j &gt; i) &#123;</span><br><span class="line">        <span class="keyword">return</span> ERROR;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span></span><br><span class="line">    s = (LinkList)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">    <span class="keyword">if</span> (!s) &#123;</span><br><span class="line">        <span class="keyword">return</span> ERROR; <span class="comment">// å†…å­˜åˆ†é…å¤±è´¥</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    s-&gt;data = e;       <span class="comment">// å°†æ•°æ®èµ‹å€¼ç»™æ–°èŠ‚ç‚¹</span></span><br><span class="line">    s-&gt;next = p-&gt;next; <span class="comment">// å°†pçš„åç»§èŠ‚ç‚¹èµ‹å€¼ç»™æ–°èŠ‚ç‚¹çš„åç»§</span></span><br><span class="line">    p-&gt;next = s;       <span class="comment">// å°†æ–°èŠ‚ç‚¹æ’å…¥åˆ°pä¹‹å</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•å•é“¾è¡¨æ’å…¥æ“ä½œ</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    LinkList L = (LinkList)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node)); <span class="comment">// åˆ›å»ºå¤´èŠ‚ç‚¹</span></span><br><span class="line">    L-&gt;next = <span class="literal">NULL</span>;                              <span class="comment">// åˆå§‹åŒ–ä¸ºç©ºé“¾è¡¨</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ’å…¥å…ƒç´ </span></span><br><span class="line">    ListInsert(&amp;L, <span class="number">1</span>, <span class="number">10</span>);</span><br><span class="line">    ListInsert(&amp;L, <span class="number">2</span>, <span class="number">20</span>);</span><br><span class="line">    ListInsert(&amp;L, <span class="number">3</span>, <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éå†é“¾è¡¨</span></span><br><span class="line">    LinkList p = L-&gt;next;</span><br><span class="line">    <span class="keyword">while</span> (p) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, p-&gt;data);</span><br><span class="line">        p = p-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> ElemType; <span class="comment">// å®šä¹‰æ•°æ®å…ƒç´ ç±»å‹</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> Status;   <span class="comment">// å®šä¹‰çŠ¶æ€ç±»å‹</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> OK 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ERROR 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å•é“¾è¡¨çš„èŠ‚ç‚¹ç»“æ„</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    ElemType data;       <span class="comment">// æ•°æ®åŸŸ</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> *<span class="title">next</span>;</span>   <span class="comment">// æŒ‡é’ˆåŸŸï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">&#125; Node, *LinkList;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å•é“¾è¡¨åˆ é™¤æ“ä½œ</span></span><br><span class="line">Status <span class="title function_">ListDelete</span><span class="params">(LinkList *L, <span class="type">int</span> i, ElemType *e)</span> &#123;</span><br><span class="line">    <span class="type">int</span> j = <span class="number">1</span>; <span class="comment">// è®¡æ•°å™¨ï¼Œè¡¨ç¤ºå½“å‰èŠ‚ç‚¹çš„ä½ç½®</span></span><br><span class="line">    LinkList p, q;</span><br><span class="line">    p = *L; <span class="comment">// pæŒ‡å‘é“¾è¡¨çš„å¤´èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯»æ‰¾ç¬¬i-1ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">while</span> (p &amp;&amp; j &lt; i) &#123;</span><br><span class="line">        p = p-&gt;next;</span><br><span class="line">        j++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœç¬¬i-1ä¸ªèŠ‚ç‚¹ä¸å­˜åœ¨æˆ–iæ— æ•ˆï¼Œåˆ™è¿”å›é”™è¯¯</span></span><br><span class="line">    <span class="keyword">if</span> (!p || !(p-&gt;next)) &#123;</span><br><span class="line">        <span class="keyword">return</span> ERROR;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    q = p-&gt;next;       <span class="comment">// qæŒ‡å‘è¦åˆ é™¤çš„èŠ‚ç‚¹</span></span><br><span class="line">    *e = q-&gt;data;      <span class="comment">// å°†åˆ é™¤èŠ‚ç‚¹çš„æ•°æ®èµ‹å€¼ç»™e</span></span><br><span class="line">    p-&gt;next = q-&gt;next; <span class="comment">// å°†qçš„åç»§èŠ‚ç‚¹èµ‹å€¼ç»™pçš„åç»§</span></span><br><span class="line">    <span class="built_in">free</span>(q);           <span class="comment">// é‡Šæ”¾qèŠ‚ç‚¹çš„å†…å­˜</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•å•é“¾è¡¨åˆ é™¤æ“ä½œ</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    LinkList L = (LinkList)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node)); <span class="comment">// åˆ›å»ºå¤´èŠ‚ç‚¹</span></span><br><span class="line">    L-&gt;next = <span class="literal">NULL</span>;                              <span class="comment">// åˆå§‹åŒ–ä¸ºç©ºé“¾è¡¨</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ’å…¥ä¸€äº›å…ƒç´ </span></span><br><span class="line">    LinkList p = L;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">        LinkList newNode = (LinkList)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">        newNode-&gt;data = i * <span class="number">10</span>;</span><br><span class="line">        newNode-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">        p-&gt;next = newNode;</span><br><span class="line">        p = newNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤ç¬¬3ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    ElemType e;</span><br><span class="line">    <span class="keyword">if</span> (ListDelete(&amp;L, <span class="number">3</span>, &amp;e) == OK) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;åˆ é™¤æˆåŠŸï¼Œåˆ é™¤çš„å…ƒç´ æ˜¯: %d\n&quot;</span>, e);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;åˆ é™¤å¤±è´¥\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éå†é“¾è¡¨</span></span><br><span class="line">    p = L-&gt;next;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;é“¾è¡¨ä¸­çš„å…ƒç´ : &quot;</span>);</span><br><span class="line">    <span class="keyword">while</span> (p) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, p-&gt;data);</span><br><span class="line">        p = p-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ—¶é—´ å¤ æ‚ åº¦ éƒ½æ˜¯ O(n)</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> ElemType; <span class="comment">// å®šä¹‰æ•°æ®å…ƒç´ ç±»å‹</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> Status;   <span class="comment">// å®šä¹‰çŠ¶æ€ç±»å‹</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> OK 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ERROR 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å•é“¾è¡¨çš„èŠ‚ç‚¹ç»“æ„</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    ElemType data;       <span class="comment">// æ•°æ®åŸŸ</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> *<span class="title">next</span>;</span>   <span class="comment">// æŒ‡é’ˆåŸŸï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">&#125; Node, *LinkList;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°¾æ’æ³•åˆ›å»ºå•é“¾è¡¨</span></span><br><span class="line">Status <span class="title function_">CreateList</span><span class="params">(LinkList *L, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    *L = (LinkList)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node)); <span class="comment">// åˆ›å»ºå¤´èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (!(*L)) <span class="keyword">return</span> ERROR;             <span class="comment">// å†…å­˜åˆ†é…å¤±è´¥</span></span><br><span class="line">    (*L)-&gt;next = <span class="literal">NULL</span>;                   <span class="comment">// åˆå§‹åŒ–ä¸ºç©ºé“¾è¡¨</span></span><br><span class="line"></span><br><span class="line">    LinkList tail = *L; <span class="comment">// å°¾æŒ‡é’ˆï¼Œåˆå§‹æŒ‡å‘å¤´èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        LinkList newNode = (LinkList)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node)); <span class="comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (!newNode) <span class="keyword">return</span> ERROR;                       <span class="comment">// å†…å­˜åˆ†é…å¤±è´¥</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;è¯·è¾“å…¥ç¬¬ %d ä¸ªå…ƒç´ çš„å€¼: &quot;</span>, i);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;newNode-&gt;data); <span class="comment">// è¾“å…¥æ•°æ®</span></span><br><span class="line">        newNode-&gt;next = <span class="literal">NULL</span>;        <span class="comment">// æ–°èŠ‚ç‚¹çš„æŒ‡é’ˆåŸŸç½®ä¸ºç©º</span></span><br><span class="line">        tail-&gt;next = newNode;        <span class="comment">// å°†æ–°èŠ‚ç‚¹é“¾æ¥åˆ°é“¾è¡¨å°¾éƒ¨</span></span><br><span class="line">        tail = newNode;              <span class="comment">// æ›´æ–°å°¾æŒ‡é’ˆ</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éå†å•é“¾è¡¨</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TraverseList</span><span class="params">(LinkList L)</span> &#123;</span><br><span class="line">    LinkList p = L-&gt;next; <span class="comment">// è·³è¿‡å¤´èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">while</span> (p) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, p-&gt;data);</span><br><span class="line">        p = p-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•æ•´è¡¨åˆ›å»º</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    LinkList L;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;è¯·è¾“å…¥é“¾è¡¨çš„é•¿åº¦: &quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (CreateList(&amp;L, n) == OK) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;é“¾è¡¨åˆ›å»ºæˆåŠŸï¼Œé“¾è¡¨ä¸­çš„å…ƒç´ ä¸º: &quot;</span>);</span><br><span class="line">        TraverseList(L);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;é“¾è¡¨åˆ›å»ºå¤±è´¥\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> ElemType; <span class="comment">// å®šä¹‰æ•°æ®å…ƒç´ ç±»å‹</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> Status;   <span class="comment">// å®šä¹‰çŠ¶æ€ç±»å‹</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> OK 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ERROR 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å•é“¾è¡¨çš„èŠ‚ç‚¹ç»“æ„</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    ElemType data;       <span class="comment">// æ•°æ®åŸŸ</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> *<span class="title">next</span>;</span>   <span class="comment">// æŒ‡é’ˆåŸŸï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">&#125; Node, *LinkList;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•´è¡¨åˆ é™¤æ“ä½œ</span></span><br><span class="line">Status <span class="title function_">ClearList</span><span class="params">(LinkList *L)</span> &#123;</span><br><span class="line">    LinkList p, q;</span><br><span class="line">    p = (*L)-&gt;next; <span class="comment">// æŒ‡å‘å¤´èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">while</span> (p) &#123;</span><br><span class="line">        q = p-&gt;next; <span class="comment">// ä¿å­˜ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        <span class="built_in">free</span>(p);     <span class="comment">// é‡Šæ”¾å½“å‰èŠ‚ç‚¹</span></span><br><span class="line">        p = q;       <span class="comment">// ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line">    (*L)-&gt;next = <span class="literal">NULL</span>; <span class="comment">// å°†å¤´èŠ‚ç‚¹çš„æŒ‡é’ˆåŸŸç½®ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•æ•´è¡¨åˆ é™¤æ“ä½œ</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    LinkList L = (LinkList)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node)); <span class="comment">// åˆ›å»ºå¤´èŠ‚ç‚¹</span></span><br><span class="line">    L-&gt;next = <span class="literal">NULL</span>;                              <span class="comment">// åˆå§‹åŒ–ä¸ºç©ºé“¾è¡¨</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ’å…¥ä¸€äº›å…ƒç´ </span></span><br><span class="line">    LinkList p = L;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">        LinkList newNode = (LinkList)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">        newNode-&gt;data = i * <span class="number">10</span>;</span><br><span class="line">        newNode-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">        p-&gt;next = newNode;</span><br><span class="line">        p = newNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éå†é“¾è¡¨</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;é“¾è¡¨ä¸­çš„å…ƒç´ : &quot;</span>);</span><br><span class="line">    p = L-&gt;next;</span><br><span class="line">    <span class="keyword">while</span> (p) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, p-&gt;data);</span><br><span class="line">        p = p-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤æ•´è¡¨</span></span><br><span class="line">    <span class="keyword">if</span> (ClearList(&amp;L) == OK) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;é“¾è¡¨å·²æ¸…ç©º\n&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;é“¾è¡¨æ¸…ç©ºå¤±è´¥\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å†æ¬¡éå†é“¾è¡¨</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;é“¾è¡¨ä¸­çš„å…ƒç´ : &quot;</span>);</span><br><span class="line">    p = L-&gt;next;</span><br><span class="line">    <span class="keyword">while</span> (p) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, p-&gt;data);</span><br><span class="line">        p = p-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ã€‚ æ¯” å¦‚ è¯´ æ¸¸æˆ å¼€å‘ ä¸­ ,<br>
å¯¹ äº ç”¨ æˆ· æ³¨å†Œ çš„ ä¸ª äºº ä¿¡æ¯ , é™¤ äº† æ³¨å†Œ æ—¶ æ’å…¥ æ•°æ® å¤–, ç» å¤§ å¤š æ•° æƒ…å†µ éƒ½ æ˜¯ è¯»<br>
å– , æ‰€ ä»¥ åº” è¯¥ è€ƒè™‘ ç”¨ é¡ºåº å­˜å‚¨ ç»“æ„ã€‚è€Œ æ¸¸æˆ ä¸­ çš„ ç©å®¶ çš„ æ­¦å™¨ æˆ– è€… è£…å¤‡ åˆ—<br>
è¡¨ , éš ç€ ç©å®¶ çš„ æ¸¸æˆ è¿‡ ç¨‹ ä¸­ , å¯ èƒ½ ä¼š éšæ—¶ å¢åŠ  æˆ– åˆ é™¤ , æ­¤ æ—¶ å† ç”¨ é¡ºåº å­˜å‚¨<br>
å°± ä¸ å¤ª åˆé€‚ äº† , å• é“¾è¡¨ ç»“æ„ å°± å¯ ä»¥ å¤§ å±• æ‹³</p>
<h3 id="é™æ€é“¾è¡¨"><a class="header-anchor" href="#é™æ€é“¾è¡¨">ğŸŒ³</a>é™æ€é“¾è¡¨</h3>
<p>ç”¨ æ•°ç»„æè¿° çš„ é“¾è¡¨å«åš é™æ€é“¾è¡¨,è¿™ ç§ æè¿° æ–¹æ³•è¿˜æœ‰ èµ· åå«åš æ¸¸æ ‡ å®Wik.</p>
<p><img src="/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E9%9D%99%E6%80%81%E9%93%BE%E8%A1%A8.png" alt="é™æ€é“¾è¡¨"></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAXSIZE 1000 <span class="comment">// é™æ€é“¾è¡¨çš„æœ€å¤§é•¿åº¦</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ERROR 0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> OK 1</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> Status;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> ElemType;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰é™æ€é“¾è¡¨çš„èŠ‚ç‚¹ç»“æ„</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    ElemType data; <span class="comment">// æ•°æ®åŸŸ</span></span><br><span class="line">    <span class="type">int</span> cur;       <span class="comment">// æ¸¸æ ‡ï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ä½ç½®</span></span><br><span class="line">&#125; Component, StaticLinkList[MAXSIZE];</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–é™æ€é“¾è¡¨</span></span><br><span class="line">Status <span class="title function_">InitList</span><span class="params">(StaticLinkList space)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; MAXSIZE - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        space[i].cur = i + <span class="number">1</span>; <span class="comment">// å°†æ¯ä¸ªèŠ‚ç‚¹çš„æ¸¸æ ‡æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line">    space[MAXSIZE - <span class="number">1</span>].cur = <span class="number">0</span>; <span class="comment">// æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„æ¸¸æ ‡ä¸º0ï¼Œè¡¨ç¤ºç©º</span></span><br><span class="line">    <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ†é…èŠ‚ç‚¹</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">Malloc_SLL</span><span class="params">(StaticLinkList space)</span> &#123;</span><br><span class="line">    <span class="type">int</span> i = space[<span class="number">0</span>].cur; <span class="comment">// è·å–å¤‡ç”¨é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (i) &#123;</span><br><span class="line">        space[<span class="number">0</span>].cur = space[i].cur; <span class="comment">// æ›´æ–°å¤‡ç”¨é“¾è¡¨çš„å¤´èŠ‚ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’å…¥æ“ä½œ</span></span><br><span class="line">Status <span class="title function_">ListInsert</span><span class="params">(StaticLinkList L, <span class="type">int</span> i, ElemType e)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (i &lt; <span class="number">1</span> || i &gt; MAXSIZE - <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> ERROR; <span class="comment">// æ’å…¥ä½ç½®ä¸åˆæ³•</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„curç”¨æ¥å­˜æ”¾ç¬¬ä¸€ä¸ªæ’å…¥å…ƒç´ çš„ä¸‹æ ‡</span></span><br><span class="line">    <span class="type">int</span> k = MAXSIZE - <span class="number">1</span>; <span class="comment">// kæŒ‡å‘å¤´èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt; i; j++) &#123;</span><br><span class="line">        <span class="comment">//è¿™é‡Œçš„k æ„å‘³ç€ ç¬¬jä¸ªå…ƒç´ çš„curçš„å€¼</span></span><br><span class="line">        k = L[k].cur; <span class="comment">// æ‰¾åˆ°ç¬¬i-1ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (k == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> ERROR; <span class="comment">// å¦‚æœèŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> newNode = Malloc_SLL(L); <span class="comment">// åˆ†é…ä¸€ä¸ªæ–°èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (newNode) &#123;</span><br><span class="line">        L[newNode].data = e;       <span class="comment">// å°†æ•°æ®èµ‹å€¼ç»™æ–°èŠ‚ç‚¹</span></span><br><span class="line">        L[newNode].cur = L[k].cur; <span class="comment">// æ–°èŠ‚ç‚¹çš„æ¸¸æ ‡æŒ‡å‘ç¬¬iä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        L[k].cur = newNode;        <span class="comment">// ç¬¬i-1ä¸ªèŠ‚ç‚¹çš„æ¸¸æ ‡æŒ‡å‘æ–°èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> OK;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ERROR; <span class="comment">// åˆ†é…å¤±è´¥</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éå†é™æ€é“¾è¡¨</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TraverseList</span><span class="params">(StaticLinkList L)</span> &#123;</span><br><span class="line">    <span class="type">int</span> i = L[MAXSIZE - <span class="number">1</span>].cur; <span class="comment">// ä»å¤´èŠ‚ç‚¹å¼€å§‹</span></span><br><span class="line">    <span class="keyword">while</span> (i) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, L[i].data);</span><br><span class="line">        i = L[i].cur; <span class="comment">// ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•é™æ€é“¾è¡¨æ’å…¥æ“ä½œ</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    StaticLinkList L;</span><br><span class="line">    InitList(L); <span class="comment">// åˆå§‹åŒ–é™æ€é“¾è¡¨</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ’å…¥å…ƒç´ </span></span><br><span class="line">    ListInsert(L, <span class="number">1</span>, <span class="number">10</span>);</span><br><span class="line">    ListInsert(L, <span class="number">2</span>, <span class="number">20</span>);</span><br><span class="line">    ListInsert(L, <span class="number">3</span>, <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éå†é“¾è¡¨</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;é™æ€é“¾è¡¨ä¸­çš„å…ƒç´ : &quot;</span>);</span><br><span class="line">    TraverseList(L);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¾ªç¯é“¾è¡¨"><a class="header-anchor" href="#å¾ªç¯é“¾è¡¨">ğŸŒ³</a>å¾ªç¯é“¾è¡¨</h3>
<p>å°† å• é“¾è¡¨ ä¸­ ç»ˆç«¯ ç»“ ç‚¹ çš„ æŒ‡é’ˆ ç«¯ç”±ç©º æŒ‡é’ˆ æ”¹ ä¸ºæŒ‡å‘ å¤´ ç»“ ç‚¹ ,å°± ä½¿ æ•´ä¸ªå• é“¾è¡¨ å½¢æˆä¸€ä¸ªç¯,è¿™ ç§å¤´å°¾ ç›¸ æ¥ çš„ å•é“¾è¡¨ ç§° ä¸º å• å¾ªç¯é“¾è¡¨,ç®€ ç§° å¾ªç¯é“¾è¡¨ (circular linkedlist).</p>
<p>å¾ªç¯é“¾è¡¨ä½¿ç”¨å°¾æŒ‡é’ˆ è¿™æ ·å°±çŸ¥é“ å¤´ç»“ç‚¹è·Ÿå°¾èŠ‚ç‚¹çš„æŒ‡é’ˆ<br>
å¦‚æœä½¿ç”¨å¤´æŒ‡é’ˆ å°±æ— æ³•ç›´æ¥å®šä½å°¾èŠ‚ç‚¹</p>
<p>å¾ªç¯é“¾è¡¨çš„åˆå¹¶</p>
<h3 id="åŒå‘é“¾è¡¨"><a class="header-anchor" href="#åŒå‘é“¾è¡¨">ğŸŒ³</a>åŒå‘é“¾è¡¨</h3>
<p><img src="/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8%E6%8F%92%E5%85%A5%E8%B5%8B%E5%80%BC%E9%A1%BA%E5%BA%8F.png" alt="åŒå‘é“¾è¡¨æ’å…¥èµ‹å€¼é¡ºåº"></p>
<h2 id="4-æ ˆä¸é˜Ÿåˆ—"><a class="header-anchor" href="#4-æ ˆä¸é˜Ÿåˆ—">ğŸŒ³</a>4. æ ˆä¸é˜Ÿåˆ—</h2>
<h3 id="æ ˆ-last-in-first-out-lifo"><a class="header-anchor" href="#æ ˆ-last-in-first-out-lifo">ğŸŒ³</a>æ ˆ last in first out LIFO</h3>
<h4 id="æ ˆçš„é¡ºåºå­˜å‚¨ç»“æ„ä¸å®ç°"><a class="header-anchor" href="#æ ˆçš„é¡ºåºå­˜å‚¨ç»“æ„ä¸å®ç°">ğŸŒ³</a>æ ˆçš„é¡ºåºå­˜å‚¨ç»“æ„ä¸å®ç°</h4>
<h4 id="ä¸¤æ ˆå…±äº«ç©ºé—´"><a class="header-anchor" href="#ä¸¤æ ˆå…±äº«ç©ºé—´">ğŸŒ³</a>ä¸¤æ ˆå…±äº«ç©ºé—´</h4>
<h4 id="æ ˆçš„é“¾å¼å­˜å‚¨ç»“æ„ä¸å®ç°"><a class="header-anchor" href="#æ ˆçš„é“¾å¼å­˜å‚¨ç»“æ„ä¸å®ç°">ğŸŒ³</a>æ ˆçš„é“¾å¼å­˜å‚¨ç»“æ„ä¸å®ç°</h4>
<h4 id="æ ˆçš„åº”ç”¨-å››åˆ™è¿ç®—è¡¨è¾¾å¼-ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€è¡¨è¾¾å¼"><a class="header-anchor" href="#æ ˆçš„åº”ç”¨-å››åˆ™è¿ç®—è¡¨è¾¾å¼-ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€è¡¨è¾¾å¼">ğŸŒ³</a>æ ˆçš„åº”ç”¨ å››åˆ™è¿ç®—è¡¨è¾¾å¼ ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€è¡¨è¾¾å¼</h4>
<h3 id="é˜Ÿåˆ—-first-in-first-out-fifo"><a class="header-anchor" href="#é˜Ÿåˆ—-first-in-first-out-fifo">ğŸŒ³</a>é˜Ÿåˆ— first in first out FIFO</h3>
<h4 id="å¾ªç¯é˜Ÿåˆ—-è§£å†³å‡æº¢å‡º"><a class="header-anchor" href="#å¾ªç¯é˜Ÿåˆ—-è§£å†³å‡æº¢å‡º">ğŸŒ³</a>å¾ªç¯é˜Ÿåˆ— è§£å†³å‡æº¢å‡º</h4>
<h4 id="é˜Ÿåˆ—çš„é“¾å¼å­˜å‚¨ç»“æ„"><a class="header-anchor" href="#é˜Ÿåˆ—çš„é“¾å¼å­˜å‚¨ç»“æ„">ğŸŒ³</a>é˜Ÿåˆ—çš„é“¾å¼å­˜å‚¨ç»“æ„</h4>
<h2 id="5-å­—ç¬¦ä¸²"><a class="header-anchor" href="#5-å­—ç¬¦ä¸²">ğŸŒ³</a>5. å­—ç¬¦ä¸²</h2>
<h3 id="kmpæ¨¡å¼åŒ¹é…"><a class="header-anchor" href="#kmpæ¨¡å¼åŒ¹é…">ğŸŒ³</a>KMPæ¨¡å¼åŒ¹é…</h3>
<a href="/2024/07/07/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0/" title="ç®—æ³•ç¬”è®°">kmpç®—æ³•</a>
<h2 id="6-æ ‘"><a class="header-anchor" href="#6-æ ‘">ğŸŒ³</a>6. æ ‘</h2>
<p>åˆ¤æ–­ä¸€ä¸ªç»“æ„æ˜¯ä¸æ˜¯æ ‘ï¼Œé€šå¸¸éœ€è¦æ»¡è¶³ä»¥ä¸‹å‡ ä¸ªæ¡ä»¶ï¼š</p>
<ol>
<li><strong>è¿é€šæ€§</strong>ï¼šæ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯è¿é€šçš„ï¼Œå³ä»»æ„ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´éƒ½æœ‰è·¯å¾„ç›¸é€šã€‚</li>
<li><strong>æ— ç¯æ€§</strong>ï¼šç»“æ„ä¸­ä¸èƒ½æœ‰å›è·¯ï¼ˆç¯ï¼‰ï¼Œå³ä¸å­˜åœ¨ä»æŸä¸ªèŠ‚ç‚¹å‡ºå‘ç»è¿‡è‹¥å¹²æ¡è¾¹åˆå›åˆ°è‡ªèº«çš„è·¯å¾„ã€‚</li>
<li><strong>nä¸ªèŠ‚ç‚¹æœ‰n-1æ¡è¾¹</strong>ï¼šå¯¹äºæœ‰nä¸ªèŠ‚ç‚¹çš„æ— å‘å›¾ï¼Œå¦‚æœå®ƒæ˜¯æ ‘ï¼Œåˆ™æ°å¥½æœ‰n-1æ¡è¾¹ã€‚</li>
<li><strong>å”¯ä¸€æ ¹èŠ‚ç‚¹ï¼ˆæœ‰å‘æ ‘ï¼‰</strong>ï¼šå¯¹äºæœ‰å‘æ ‘ï¼ˆå¦‚äºŒå‰æ ‘ï¼‰ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªå…¥åº¦ä¸º0çš„èŠ‚ç‚¹ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰ï¼Œå…¶ä½™èŠ‚ç‚¹å…¥åº¦ä¸º1ã€‚</li>
</ol>
<p><strong>æ€»ç»“</strong>ï¼š<br>
æ ‘æ˜¯ä¸€ç§è¿é€šä¸”æ— ç¯çš„å›¾ç»“æ„ï¼Œå¹¶ä¸”è¾¹æ•°ç­‰äºèŠ‚ç‚¹æ•°å‡ä¸€ã€‚</p>
<p><strong>åˆ¤æ–­æ–¹æ³•ä¸¾ä¾‹</strong>ï¼ˆä»¥æ— å‘å›¾ä¸ºä¾‹ï¼‰ï¼š</p>
<ul>
<li>ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰æˆ–å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰éå†ï¼Œçœ‹æ˜¯å¦æ‰€æœ‰èŠ‚ç‚¹éƒ½èƒ½è®¿é—®åˆ°ï¼ˆè¿é€šï¼‰ï¼Œä¸”éå†è¿‡ç¨‹ä¸­ä¸å‡ºç°å›åˆ°å·²è®¿é—®èŠ‚ç‚¹çš„æƒ…å†µï¼ˆæ— ç¯ï¼‰ã€‚</li>
<li>æ£€æŸ¥è¾¹æ•°æ˜¯å¦ä¸ºn-1ã€‚</li>
</ul>
<p><strong>ä¼ªä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­æ— å‘å›¾æ˜¯å¦ä¸ºæ ‘</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">isTree</span><span class="params">(Graph g)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!isConnected(g)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (hasCycle(g)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (g.edgeCount != g.nodeCount - <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ¦‚å¿µ"><a class="header-anchor" href="#æ¦‚å¿µ">ğŸŒ³</a>æ¦‚å¿µ</h3>
<p>ç»“ ç‚¹æ‹¥æœ‰ çš„ å­æ ‘æ•° ç§°ä¸ºç»“ç‚¹ çš„åº¦(Degree)ã€‚<br>
åº¦ä¸º0 çš„ ç»“ ç‚¹ ç§°ä¸ºå¶ ç»“ç‚¹ã€ˆLeaf) æˆ–ç»ˆç«¯ç»“ç‚¹;<br>
åº¦ ä¸ä¸º 0 çš„ ç»“ ç‚¹ç§° ä¸ºé ç»ˆç«¯ç»“ç‚¹ æˆ– åˆ† æ”¯ ç»“ ç‚¹ã€‚é™¤ æ ¹ ç»“ ç‚¹ ä¹‹ å¤–,åˆ† æ”¯ ç»“ ç‚¹ ä¹Ÿç§°ä¸º å†… éƒ¨ ç»“ ç‚¹ã€‚<br>
æ ‘ çš„ åº¦ æ˜¯ æ ‘å†… å„ ç»“ ç‚¹ çš„ åº¦ çš„ æœ€ å¤§å€¼</p>
<p>å¦‚ æœ å°† æ ‘ ä¸­ ç»“ ç‚¹ çš„ å„ å­ æ ‘ çœ‹ æˆä»å·¦ è‡³ å³ æ˜¯æœ‰æ¬¡ åº çš„ ,ä¸ èƒ½ äº’ æ¢ çš„ ,åˆ™ ç§° è¯¥ æ ‘ ä¸ºæœ‰åºæ ‘,å¦ åˆ™ ç§° ä¸º æ—  åºæ ‘</p>
<p>äºŒå‰æ ‘(Binary Tree) æ˜¯ n (n&gt;0 ) ä¸ª ç»“ ç‚¹çš„æœ‰ é™ é›†åˆ,è¯¥é›†åˆ<br>
æˆ–è€…ä¸ºç©ºé›† ( ç§° ä¸º ç©ºäºŒå‰æ ‘), æˆ–è€…ç”± ä¸€ ä¸ª æ ¹ ç»“ç‚¹å’Œ ä¸¤ æ£µ äº’ä¸ç›¸äº¤<br>
çš„ã€åˆ† åˆ«ç§° ä¸º æ ¹ç»“ç‚¹çš„å·¦ å­æ ‘å’Œ å³ å­ æ ‘çš„äºŒ å‰ æ ‘ç»„ æˆ</p>
<p>å·¦æ–œæ ‘<br>
å³æ–œæ•°<br>
æ»¡äºŒå‰æ ‘</p>
<p>å¯¹ä¸€æ£µå…·æœ‰ n ä¸ªç»“ç‚¹ çš„ äºŒ å‰ æ ‘æŒ‰å±‚ åº ç¼–å·,å¦‚ æœç¼–å·ä¸º1 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>&lt;</mo><mi>i</mi><mo>&lt;</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(1&lt;i&lt;n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6986em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> çš„ ç»“ ç‚¹ä¸åŒæ ·æ·±åº¦ çš„ æ»¡ äºŒåˆæ ‘ ä¸­ ç¼–å·ä¸º1 çš„ ç»“ ç‚¹ åœ¨äºŒå‰ æ ‘ ä¸­ ä½ ç½®å®Œå…¨ ç›¸åŒ,åˆ™ è¿™æ£µäºŒå‰æ ‘ç§°ä¸º <code>å®Œå…¨äºŒå‰æ ‘</code>ï¼Œç¼–å·æ˜¯è¿ç»­çš„</p>
<h3 id="æ€§è´¨"><a class="header-anchor" href="#æ€§è´¨">ğŸŒ³</a>æ€§è´¨</h3>
<p>å®Œå…¨äºŒå‰æ ‘ ç»“ç‚¹åº¦ä¸º1 åˆ™è¯¥ç»“ç‚¹åªæœ‰å·¦å­©å­ ä¸å­˜åœ¨åªæœ‰å³å­æ ‘çš„æƒ…å†µ</p>
<p>åŒæ ·ç»“ç‚¹æ•°çš„äºŒå‰æ ‘ å®Œå…¨äºŒå‰æ ‘æ·±åº¦æœ€å°</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">n_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ç»ˆç«¯ç»“ç‚¹æ•°<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">n_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> åº¦=1ç»“ç‚¹æ•° æœ‰ä¸€åˆ†æ”¯<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">n_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> åº¦=2ç»“ç‚¹æ•° æœ‰ä¸¤åˆ†æ”¯<br>
n æ€»ç»“ç‚¹æ•°</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>n</mi><mo>=</mo><msub><mi>n</mi><mn>0</mn></msub><mo>+</mo><msub><mi>n</mi><mn>1</mn></msub><mo>+</mo><msub><mi>n</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">n = n_0 + n_1 + n_2 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p>
<p>äºŒå‰æ ‘ï¼šåˆ†æ”¯æ•° = æ€»ç»“ç‚¹æ•°-1</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>n</mi><mn>1</mn></msub><mo>âˆ—</mo><mn>1</mn><mo>+</mo><msub><mi>n</mi><mn>2</mn></msub><mo>âˆ—</mo><mn>2</mn><mo>=</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n_1*1 + n_2*2 = n-1 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6153em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6153em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span></p>
<p>âˆ´ $$ n_0 + n_1 + n_2 - 1 = n_1<em>1 + n_2</em>2 $$<br>
âˆ´ $$ n_0 = n_2 + 1 $$</p>
<blockquote>
<p>å³ ç»ˆç«¯ç»“ç‚¹æ•° = 2åº¦ç»“ç‚¹æ•° + 1</p>
</blockquote>
<blockquote>
<p>äºŒå‰æ ‘ ç¬¬iå±‚è‡³å¤šæœ‰ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">2^{i-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8247em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8247em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span> ä¸ªç»“ç‚¹ i â‰¥ 1</p>
</blockquote>
<blockquote>
<p>æ·±åº¦ä¸ºkçš„äºŒå‰æ ‘è‡³å¤šæœ‰ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>k</mi></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^k-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9324em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> ä¸ªç»“ç‚¹ i â‰¥ 1</p>
</blockquote>
<blockquote>
<p>nä¸ªç»“ç‚¹çš„<code>æ»¡äºŒå‰æ ‘</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>=</mo><msup><mn>2</mn><mi>k</mi></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n=2^k-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9324em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> æ·±åº¦ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">k=log_2(n+1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></p>
</blockquote>
<h4 id="å®Œå…¨äºŒå‰æ ‘ç»“ç‚¹æ•°"><a class="header-anchor" href="#å®Œå…¨äºŒå‰æ ‘ç»“ç‚¹æ•°">ğŸŒ³</a>å®Œå…¨äºŒå‰æ ‘ç»“ç‚¹æ•°</h4>
<ul>
<li>â‰¤ åŒåº¦æ•°æ»¡äºŒå‰æ ‘ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>k</mi></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^k-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9324em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></li>
<li>ï¼ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mi>k</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^{k-1}-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9324em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></li>
</ul>
<p>âˆ´ $ 2^{k-1}-1 &lt; n â‰¤ 2^k-1 $</p>
<ul>
<li>n æ˜¯æ•´æ•° âˆ´ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>â‰¤</mo><msup><mn>2</mn><mi>k</mi></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n â‰¤ 2^k-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9324em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> =&gt; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>&lt;</mo><msup><mn>2</mn><mi>k</mi></msup></mrow><annotation encoding="application/x-tex">n&lt;2^k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span></li>
<li>n æ˜¯æ•´æ•° âˆ´ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>&gt;</mo><msup><mn>2</mn><mrow><mi>k</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n &gt; 2^{k-1}-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9324em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> =&gt; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>â‰¥</mo><msup><mn>2</mn><mrow><mi>k</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">n â‰¥ 2^{k-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span><br>
âˆ´ $ 2^{k-1} â‰¤ n &lt; 2^k $<br>
âˆ´ $ k-1 â‰¤ log_2n &lt; k $<br>
âˆµ kä½œä¸ºåº¦æ•°æ˜¯æ•´æ•° ä¾‹å­: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5</mn><mo>â‰¤</mo><mi>x</mi><mo>&lt;</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">5 â‰¤ x &lt; 6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">6</span></span></span></span> âˆ´ x â‰ˆ 5.u âˆ´ å¯¹xå–æ•´ + 1 = k<br>
âˆ´ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mo stretchy="false">âŒŠ</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><mo stretchy="false">âŒ‹</mo><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">k = âŒŠlog_2nâŒ‹ + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">âŒŠ</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose">âŒ‹</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è®¾xæ˜¯ä¸€ä¸ªå®æ•°ï¼Œåˆ™xå¯ä»¥è¡¨ç¤ºä¸ºæ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†çš„å’Œï¼Œå³x = âŒŠxâŒ‹ + &#123;x&#125;ï¼Œå…¶ä¸­âŒŠxâŒ‹æ˜¯xçš„æ•´æ•°éƒ¨åˆ†ï¼Œ&#123;x&#125;æ˜¯xçš„å°æ•°éƒ¨åˆ†</span><br><span class="line">ä¸Šå–æ•´ (Ceiling)ï¼šç”¨æ•°å­¦ç¬¦å·âŒˆxâŒ‰è¡¨ç¤ºï¼Œè¡¨ç¤ºå¤§äºç­‰äºxçš„æœ€å°æ•´æ•°ã€‚ä¾‹å¦‚ï¼ŒâŒˆ4.2âŒ‰=5ï¼ŒâŒˆ-4.2âŒ‰=-4ã€‚</span><br><span class="line">ä¸‹å–æ•´ (Floor)ï¼šç”¨æ•°å­¦ç¬¦å·âŒŠxâŒ‹è¡¨ç¤ºï¼Œè¡¨ç¤ºå°äºç­‰äºxçš„æœ€å¤§æ•´æ•°ã€‚ä¾‹å¦‚ï¼ŒâŒŠ4.2âŒ‹=4ï¼ŒâŒŠ-4.2âŒ‹=-5ã€‚</span><br></pre></td></tr></table></figure>
<p>nç»“ç‚¹å®Œå…¨äºŒå‰æ ‘ (æ·±åº¦ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">âŒˆ</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><mo stretchy="false">âŒ‰</mo><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">âŒˆlog_2nâŒ‰ + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">âŒˆ</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose">âŒ‰</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>) ä»»ä¸€ç»“ç‚¹ iï¼š</p>
<ul>
<li>i = 1, iä¸ºæ ¹, i&gt;1, parent= âŒŠi/2âŒ‹</li>
<li>2i &gt; n, i æ— å·¦å­©å­ å¦åˆ™ Lchild = 2i</li>
<li>2i+1 &gt; n, i æ— å³å­©å­ å¦åˆ™ Rchild = 2i+1</li>
</ul>
<h3 id="äºŒå‰æ ‘å­˜å‚¨ç»“æ„"><a class="header-anchor" href="#äºŒå‰æ ‘å­˜å‚¨ç»“æ„">ğŸŒ³</a>äºŒå‰æ ‘å­˜å‚¨ç»“æ„</h3>
<h4 id="é¡ºåºå­˜å‚¨ä¸€èˆ¬åªç”¨äº-å®Œå…¨äºŒå‰æ ‘"><a class="header-anchor" href="#é¡ºåºå­˜å‚¨ä¸€èˆ¬åªç”¨äº-å®Œå…¨äºŒå‰æ ‘">ğŸŒ³</a>é¡ºåºå­˜å‚¨ä¸€èˆ¬åªç”¨äº å®Œå…¨äºŒå‰æ ‘</h4>
<h4 id="äºŒå‰é“¾è¡¨"><a class="header-anchor" href="#äºŒå‰é“¾è¡¨">ğŸŒ³</a>äºŒå‰é“¾è¡¨</h4>
<h3 id="éå†äºŒå‰æ ‘"><a class="header-anchor" href="#éå†äºŒå‰æ ‘">ğŸŒ³</a>éå†äºŒå‰æ ‘</h3>
<ul>
<li>
<p>å‰åºéå† æ ¹-å·¦æ ‘å…¨å·¦åå›æº¯æ—¶é¡ºä¾¿è®¿é—®å³ç»“ç‚¹-å³æ ‘å…¨å·¦åå›æº¯æ—¶é¡ºä¾¿è®¿é—®å³ç»“ç‚¹</p>
</li>
<li>
<p>ä¸­åºéå† å·¦æ ‘æœ€å·¦ç»“ç‚¹å¼€å§‹-å›æº¯æ—¶é¡ºä¾¿è®¿é—®å³ç»“ç‚¹å³å¶å­-æ ¹ç»“ç‚¹-å³æ ‘æœ€å·¦ç»“ç‚¹å¼€å§‹-å›æº¯æ—¶é¡ºä¾¿è®¿é—®å³ç»“ç‚¹å³å¶å­</p>
</li>
<li>
<p>ååºéå† å·¦æ ‘æœ€åº•å±‚å¶å­å¼€å§‹-å›æº¯æ—¶ä»ä¸‹åˆ°ä¸Šä»å·¦åˆ°å³è®¿é—®å·¦æ ‘èŠ‚ç‚¹-å³æ ‘æœ€åº•å±‚å¶å­å¼€å§‹-å›æº¯æ—¶ä»ä¸‹åˆ°ä¸Šä»å·¦åˆ°å³è®¿é—®å³æ ‘èŠ‚ç‚¹-æ ¹</p>
</li>
<li>
<p>å±‚åºéå† æ ¹-ä»ä¸Šåˆ°ä¸‹ä»å·¦åˆ°å³ä¸€å±‚ä¸€å±‚éå†</p>
</li>
<li>
<p>å‰åºéå†+ä¸­åºéå† å”¯ä¸€ç¡®å®šäºŒå‰æ ‘</p>
</li>
<li>
<p>ååºéå†+ä¸­åºéå† å”¯ä¸€ç¡®å®šäºŒå‰æ ‘</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ...existing code...</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">BiTNode</span> &#123;</span><br><span class="line">    <span class="type">char</span> data;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">BiTNode</span> *lchild, *rchild;</span><br><span class="line">&#125; BiTNode, *BiTree;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‰åºéå†ï¼šæ ¹-å·¦-å³</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">PreOrder</span><span class="params">(BiTree T)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (T) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%c &quot;</span>, T-&gt;data);      <span class="comment">// è®¿é—®æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="built_in">PreOrder</span>(T-&gt;lchild);         <span class="comment">// éå†å·¦å­æ ‘</span></span><br><span class="line">        <span class="built_in">PreOrder</span>(T-&gt;rchild);         <span class="comment">// éå†å³å­æ ‘</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸­åºéå†ï¼šå·¦-æ ¹-å³</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">InOrder</span><span class="params">(BiTree T)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (T) &#123;</span><br><span class="line">        <span class="built_in">InOrder</span>(T-&gt;lchild);          <span class="comment">// éå†å·¦å­æ ‘</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%c &quot;</span>, T-&gt;data);      <span class="comment">// è®¿é—®æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="built_in">InOrder</span>(T-&gt;rchild);          <span class="comment">// éå†å³å­æ ‘</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ååºéå†ï¼šå·¦-å³-æ ¹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">PostOrder</span><span class="params">(BiTree T)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (T) &#123;</span><br><span class="line">        <span class="built_in">PostOrder</span>(T-&gt;lchild);        <span class="comment">// éå†å·¦å­æ ‘</span></span><br><span class="line">        <span class="built_in">PostOrder</span>(T-&gt;rchild);        <span class="comment">// éå†å³å­æ ‘</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%c &quot;</span>, T-&gt;data);      <span class="comment">// è®¿é—®æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å±‚åºéå†ç®—æ³•ï¼ˆä½¿ç”¨é˜Ÿåˆ—ï¼‰</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LevelOrder</span><span class="params">(BiTree T)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!T) <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">// ç®€å•é˜Ÿåˆ—å®ç°</span></span><br><span class="line">    BiTree queue[<span class="number">100</span>];</span><br><span class="line">    <span class="type">int</span> front = <span class="number">0</span>, rear = <span class="number">0</span>;</span><br><span class="line">    queue[rear++] = T;</span><br><span class="line">    <span class="keyword">while</span> (front &lt; rear) &#123;</span><br><span class="line">        BiTree node = queue[front++];</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%c &quot;</span>, node-&gt;data); <span class="comment">// è®¿é—®å½“å‰èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (node-&gt;lchild) queue[rear++] = node-&gt;lchild;</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;rchild) queue[rear++] = node-&gt;rchild;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ...existing code...</span></span><br></pre></td></tr></table></figure>
<h5 id="ä¾‹å­1"><a class="header-anchor" href="#ä¾‹å­1">ğŸŒ³</a>ä¾‹å­1</h5>
<p>å‰åºåºåˆ—ï¼šABCDEFGH<br>
ä¸­åºåºåˆ—ï¼šCDBAFEHG</p>
<p><code>å‰åºç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¿…ä¸ºæ ¹</code></p>
<h5 id="ä¾‹å­2"><a class="header-anchor" href="#ä¾‹å­2">ğŸŒ³</a>ä¾‹å­2</h5>
<p>ååºåºåˆ—ï¼šGDBEFCA<br>
ä¸­åºåºåˆ—ï¼šDGBAECF</p>
<p>âˆµ <code>ååº æœ€åä¸€ä¸ªå¿…ä¸ºæ ¹ A=æ ¹</code><br>
âˆ´ ä¸­åºåºåˆ—ä¸­ DGBä¸ºå·¦å­æ ‘ ECFä¸ºå³å­æ ‘<br>
âˆµ <code>ä¸­åºåºåˆ—æ ¹ç»“ç‚¹å·¦è¾¹ç¬¬ä¸€ä¸ªå¿…ä¸ºæ ¹çš„å·¦å­æ ‘</code> æ‰€ä»¥ Bä¸ºæ ¹å·¦ç»“ç‚¹<br>
ååºéå† Gåœ¨Då‰é¢ æ‰€ä»¥<br>
è¦ä¹ˆGDéƒ½ä¸º Bå¾—å­èŠ‚ç‚¹<br>
è¦ä¹ˆGæ˜¯Dçš„å­èŠ‚ç‚¹ Dæ˜¯Bçš„å­èŠ‚ç‚¹<br>
ä½†æ˜¯ä¸­åºéå†ä¸­å…ˆè®¿é—®çš„Då†è®¿é—®G å¦‚æœGDéƒ½æ˜¯Bå­èŠ‚ç‚¹ ååºéå†å·¦å­æ ‘åº”è¯¥æ˜¯DGB çŸ›ç›¾<br>
âˆ´ç¡®å®šå·¦å­æ ‘<br>
âˆµ<code>å­˜åœ¨è·Ÿå·¦å³å­æ ‘çš„æƒ…å†µä¸‹ ååºéå†å€’æ•°ç¬¬äºŒä¸ªå¿…ä¸ºæ ¹çš„å³å­æ ‘èŠ‚ç‚¹</code> Cä¸ºæ ¹å·¦èŠ‚ç‚¹<br>
âˆ´</p>
<ul>
<li>EFè¦ä¹ˆæ˜¯Cçš„å­èŠ‚ç‚¹</li>
<li>è¦ä¹ˆEæ˜¯Fçš„å­èŠ‚ç‚¹<br>
âˆµ ä¸­åºéå†ä¸­ å³å­æ ‘ECF Eä¸ºç¬¬ä¸€ä¸ª Cæ¯”Få…ˆéå†<br>
âˆ´ Eæ˜¯Cçš„å­èŠ‚ç‚¹ E,Fæ²¡æœ‰çˆ¶å­å…³ç³»<br>
âˆ´ Fæ˜¯Cçš„å­èŠ‚ç‚¹<br>
âˆ´ç¡®å®šå³å­æ ‘</li>
</ul>
<h3 id="æ‰©å±•äºŒå‰æ ‘-å»ºæ ‘"><a class="header-anchor" href="#æ‰©å±•äºŒå‰æ ‘-å»ºæ ‘">ğŸŒ³</a>æ‰©å±•äºŒå‰æ ‘ å»ºæ ‘</h3>
<p>å‰åºéå†ï¼šAB#D##C##</p>
<h3 id="æ ‘-æ£®æ—-äºŒå‰æ ‘çš„-è½¬æ¢"><a class="header-anchor" href="#æ ‘-æ£®æ—-äºŒå‰æ ‘çš„-è½¬æ¢">ğŸŒ³</a>æ ‘ æ£®æ— äºŒå‰æ ‘çš„ è½¬æ¢</h3>
<h4 id="æ ‘-äºŒå‰æ ‘"><a class="header-anchor" href="#æ ‘-äºŒå‰æ ‘">ğŸŒ³</a>æ ‘ -&gt; äºŒå‰æ ‘</h4>
<ul>
<li>å…„å¼ŸåŠ çº¿</li>
<li>ä¿ç•™æ¯ä¸ªç»“ç‚¹ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹è¿çº¿ å…¶ä»–åˆ é™¤</li>
<li>å±‚æ¬¡è°ƒæ•´ ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ä¸ºå·¦å­©å­ å…„å¼Ÿè½¬æ¢è¿‡æ¥çš„ä¸ºå³å­©å­</li>
</ul>
<h4 id="æ£®æ—"><a class="header-anchor" href="#æ£®æ—">ğŸŒ³</a>æ£®æ— -&gt;</h4>
<ul>
<li>æ ‘è½¬äºŒå‰æ ‘</li>
<li>æ ‘æ ¹åšå¦ä¸€æ£µæ ‘æ ¹èŠ‚ç‚¹çš„å³å­©å­</li>
</ul>
<h4 id="äºŒå‰æ ‘-æ ‘"><a class="header-anchor" href="#äºŒå‰æ ‘-æ ‘">ğŸŒ³</a>äºŒå‰æ ‘ -&gt; æ ‘</h4>
<ul>
<li>æ‰€æœ‰å·¦å­©å­çš„å³å­ç»“ç‚¹è¿æ¥å…¶çˆ¶èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹(çˆ·çˆ·èŠ‚ç‚¹)</li>
<li>åˆ é™¤å³å­èŠ‚ç‚¹åŸæ¥çš„ä¸å…¶çˆ¶èŠ‚ç‚¹è¿çº¿</li>
</ul>
<h4 id="äºŒå‰æ ‘-æ£®æ—"><a class="header-anchor" href="#äºŒå‰æ ‘-æ£®æ—">ğŸŒ³</a>äºŒå‰æ ‘ -&gt; æ£®æ—</h4>
<ul>
<li>ç æ ¹ç»“ç‚¹çš„å³åˆ†æ”¯ æ ¹èŠ‚ç‚¹å³å­©å­å­æ ‘ç‹¬ç«‹</li>
</ul>
<h4 id="æ ‘éå†"><a class="header-anchor" href="#æ ‘éå†">ğŸŒ³</a>æ ‘éå†</h4>
<ul>
<li>å…ˆæ ¹éå†</li>
<li>åæ ¹éå†</li>
</ul>
<h4 id="æ£®æ—éå†"><a class="header-anchor" href="#æ£®æ—éå†">ğŸŒ³</a>æ£®æ—éå†</h4>
<ul>
<li>å‰åºéå†</li>
<li>ååºéå†</li>
</ul>
<h3 id="å‰é©±åç»§-çº¿ç´¢äºŒå‰é“¾è¡¨-çº¿ç´¢äºŒå‰æ ‘-threaded-binary-tree"><a class="header-anchor" href="#å‰é©±åç»§-çº¿ç´¢äºŒå‰é“¾è¡¨-çº¿ç´¢äºŒå‰æ ‘-threaded-binary-tree">ğŸŒ³</a>å‰é©±åç»§ çº¿ç´¢äºŒå‰é“¾è¡¨ çº¿ç´¢äºŒå‰æ ‘ threaded binary tree</h3>
<h3 id="èµ«å¤«æ›¼æ ‘"><a class="header-anchor" href="#èµ«å¤«æ›¼æ ‘">ğŸŒ³</a>èµ«å¤«æ›¼æ ‘</h3>
<blockquote>
<p>å¸¦åŠè·¯å¾„é•¿åº¦ WPL æœ€å°çš„äºŒå‰æ ‘</p>
</blockquote>
<p>è®¾è®¡é•¿ çŸ­ ä¸ ç­‰ çš„ç¼–ç ,åˆ™ å¿…é¡»æ˜¯ä»» ä¸€ å­—ç¬¦ çš„ç¼–ç  éƒ½ ä¸ æ˜¯å¦ä¸€ ä¸ª å­—ç¬¦ çš„ ç¼–ç çš„ å‰ç¼€ ,è¿™ ç§ç¼–ç ç§°åšå‰ç¼€ç¼–ç </p>
<p>èµ«å¤«æ›¼ç¼–ç <br>
å­—ç¬¦é›† <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>d</mi><mn>2</mn></msub><mo separator="true">,</mo><mo lspace="0em" rspace="0em">â‹¯</mo><mo separator="true">,</mo><msub><mi>d</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">{d_1,d_2,{\cdots},d_n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="minner">â‹¯</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> -&gt; å¶å­<br>
å­—ç¬¦é¢‘ç‡ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>w</mi><mn>2</mn></msub><mo separator="true">,</mo><mo lspace="0em" rspace="0em">â‹¯</mo><mo separator="true">,</mo><msub><mi>w</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">{w_1,w_2,{\cdots},w_n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="minner">â‹¯</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> -&gt; å¶å­æƒå€¼<br>
æ„é€ èµ«å¤«æ›¼æ ‘<br>
å·¦åˆ†æ”¯ä»£è¡¨0 å³åˆ†æ”¯ä»£è¡¨1<br>
å¶å­ç»“ç‚¹è·¯å¾„çš„åˆ†æ”¯01åºåˆ—ä¸ºè¯¥å¶å­å­—ç¬¦çš„ç¼–ç </p>
<h2 id="7-å›¾"><a class="header-anchor" href="#7-å›¾">ğŸŒ³</a>7. å›¾</h2>
<h3 id="æ¦‚å¿µ"><a class="header-anchor" href="#æ¦‚å¿µ">ğŸŒ³</a>æ¦‚å¿µ</h3>
<p>å›¾ä¸­æ•°æ®å…ƒç´  -&gt; é¡¶ç‚¹ vertex<br>
æœ‰ç©·éç©º<br>
æ— å‘è¾¹ æ— å‘å›¾ (A,D) (D,A)<br>
æœ‰å‘è¾¹ å¼§ &lt;A, D&gt;<br>
ç®€å•å›¾ï¼šä¸å­˜åœ¨é¡¶ç‚¹åˆ°è‡ªèº«çš„è¾¹ åŒä¸€æ¡è¾¹ä¸é‡å¤å‡ºç°<br>
æ— å‘å®Œå…¨å›¾ï¼šä»»æ„ä¸¤é¡¶ç‚¹éƒ½å­˜åœ¨è¾¹ $ e = \frac{n*(n-1)}{2}$<br>
æœ‰å‘å®Œå…¨å›¾ï¼šä»»æ„ä¸¤é¡¶ç‚¹éƒ½å­˜åœ¨æ–¹å‘äº’ä¸ºç›¸åçš„ä¸¤æ¡å¼§ $ e = n*(n-1)$<br>
ç¨€ç–å›¾ï¼šæœ‰å¾ˆå°‘è¾¹æˆ–å¼§çš„å›¾<br>
ç¨ å¯†å›¾<br>
æƒ weightï¼šä¸å›¾çš„è¾¹æˆ–å¼§ç›¸å…³çš„æ•°<br>
ç½‘ï¼šå¸¦æƒçš„å›¾<br>
å­å›¾</p>
<p>Vè¡¨ç¤ºé¡¶ç‚¹é›†åˆ<br>
{E}è¡¨ç¤ºè¾¹/å¼§ é›†åˆ<br>
æ— å‘å›¾G=(V,{E}) è¾¹(v,vâ€™) âˆˆ E =&gt; v,vâ€™äº’ä¸ºé‚»æ¥ç‚¹(adjacent)<br>
é¡¶ç‚¹vçš„åº¦(Degree) : TD(v) = vçš„é‚»æ¥è¾¹æ•°<br>
å›¾æ€»è¾¹æ•°: $ e = \frac{1}{2}\sum_{i=1}^nTD(v_i) $</p>
<p>æœ‰å‘å›¾G=(V,{E}) å¼§ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&lt;</mo><mi>v</mi><mo separator="true">,</mo><msup><mi>v</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>&gt;</mo><mo>âˆˆ</mo><mi>E</mi></mrow><annotation encoding="application/x-tex">&lt;v,v&#x27;&gt; âˆˆ E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9463em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> =&gt; v,vâ€™é‚»æ¥åˆ°é¡¶ç‚¹vâ€™<br>
é¡¶ç‚¹vçš„å…¥åº¦(InDegree) : ID(v) = vä¸ºå¼§å¤´çš„å¼§æ•°<br>
é¡¶ç‚¹vçš„å‡ºåº¦(OutDegree) : OD(v) = vä¸ºå¼§å°¾çš„å¼§æ•°<br>
TD(v)=ID(v)+OD(v)<br>
å›¾æ€»è¾¹æ•°: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mi>I</mi><mi>D</mi><mo stretchy="false">(</mo><msub><mi>v</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mi>O</mi><mi>D</mi><mo stretchy="false">(</mo><msub><mi>v</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">e = \sum_{i=1}^nID(v_i) = \sum_{i=1}^nOD(v_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.104em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.104em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p>
<p>è·¯å¾„é•¿åº¦ = è·¯å¾„(è¾¹/å¼§)æ•°<br>
å›è·¯/ç¯ï¼šé¦–å°¾é¡¶ç‚¹ç›¸åŒçš„è·¯å¾„<br>
ç®€å•è·¯å¾„<br>
ç®€å• ç¯/å›è·¯ B-C-A-D-B é™¤é¦–å°¾é¡¶ç‚¹ å…¶ä½™é¡¶ç‚¹ä¸é‡å¤<br>
B-C-D-A-C -&gt; ä¸æ˜¯ç®€å•ç¯<br>
æ— å‘å›¾ä¸­ våˆ°vâ€™æœ‰è·¯å¾„ åˆ™vå’Œvâ€™æ˜¯è¿é€šçš„<br>
è¿é€šå›¾ï¼šä»»æ„ä¸¤é¡¶ç‚¹éƒ½è¿é€š åˆ™è¯¥å›¾ä¸ºè¿é€šå›¾(Connected Graph)<br>
è¿é€šåˆ†é‡ï¼šæ— å‘å›¾ä¸­çš„æå¤§è¿é€šå­å›¾<br>
å¼ºè¿é€šå›¾ï¼šåœ¨æœ‰å‘å›¾ä¸­,æ¯ä¸€å¯¹ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>i</mi></msub><mo separator="true">,</mo><mi>v</mi><mi>j</mi><mo>âˆˆ</mo><mi>V</mi></mrow><annotation encoding="application/x-tex">v_i,vjâˆˆV</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>ã€<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>i</mi></msub><mo mathvariant="normal">â‰ </mo><msub><mi>v</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">v_iâ‰ v_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel">î€ </span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>, ä»<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">v_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">v_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>,ä»<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">v_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">v_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> éƒ½æœ‰è·¯å¾„<br>
å¼ºè¿é€šåˆ†é‡: æœ‰å‘å›¾ä¸­çš„æå¤§å¼ºè¿é€šå­å›¾ç§°<br>
è¿é€šå›¾ç”Ÿæˆæ ‘ï¼šä¸€ä¸ªæå°çš„è¿é€šå­å›¾ åŒ…å«å…¨éƒ¨nä¸ªé¡¶ç‚¹ åªæœ‰æ„æˆæ ‘ğŸŒ³çš„n-1æ¡è¾¹<br>
éè¿é€šå›¾ï¼šnä¸ªé¡¶ç‚¹ è¾¹ e &lt; n-1<br>
nä¸ªé¡¶ç‚¹çš„å›¾ è¾¹ e &gt; n-1 å›¾å¿…å®šæœ‰ç¯<br>
æœ‰å‘æ ‘ï¼šå›¾æœ‰ä¸€ä¸ªé¡¶ç‚¹ å…¥åº¦=0 å…¶ä½™é¡¶ç‚¹ å…¥åº¦å‡=1(åªæœ‰ä¸€ä¸ªçˆ¶èŠ‚ç‚¹)<br>
ç”Ÿæˆæ ‘ï¼šæ— å‘å›¾ä¸­è¿é€šä¸” nä¸ªé¡¶ç‚¹n-1æ¡è¾¹<br>
ç”Ÿæˆæ£®æ—ï¼šæœ‰å‘å›¾åˆ†è§£æˆè‹¥å¹²æ£µæœ‰å‘æ ‘æ„æˆç”Ÿæˆæ£®æ—</p>
<h3 id="å­˜å‚¨ç»“æ„"><a class="header-anchor" href="#å­˜å‚¨ç»“æ„">ğŸŒ³</a>å­˜å‚¨ç»“æ„</h3>
<h4 id="é‚»æ¥çŸ©é˜µ"><a class="header-anchor" href="#é‚»æ¥çŸ©é˜µ">ğŸŒ³</a>é‚»æ¥çŸ©é˜µ</h4>
<p>æ— å‘å›¾è¾¹æ•°ç»„æ˜¯ä¸€ä¸ªå¯¹ç§°çŸ©é˜µ<br>
ä¸¤ä¸ªæ•°ç»„è¡¨ç¤ºå›¾</p>
<ul>
<li>ä¸€ç»´æ•°ç»„ å­˜å‚¨ é¡¶ç‚¹</li>
<li>äºŒç»´æ•°ç»„å­˜å‚¨ è¾¹/å¼§</li>
</ul>
<h5 id="æ— å‘å›¾-æœ‰å‘å›¾-é‚»æ¥çŸ©é˜µ"><a class="header-anchor" href="#æ— å‘å›¾-æœ‰å‘å›¾-é‚»æ¥çŸ©é˜µ">ğŸŒ³</a>æ— å‘å›¾/æœ‰å‘å›¾ é‚»æ¥çŸ©é˜µ</h5>
<p>é¡¶ç‚¹æ•°ç»„ï¼š<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><menclose notation="top bottom left right"><mtable rowspacing="0.16em" columnalign="center center center center" columnlines="solid solid solid" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>0</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>1</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>2</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>3</mn></msub></mstyle></mtd></mtr></mtable></menclose></mrow><annotation encoding="application/x-tex">
\begin{array}{|c|c|c|c|}
\hline
v_0 &amp; v_1 &amp; v_2 &amp; v_3 \\
\hline
\end{array}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.35em;"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.89em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mtable"><span class="vertical-separator" style="height:1.2em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-0.35em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:1.2em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-0.35em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:1.2em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-0.35em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:1.2em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-0.35em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:1.2em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-0.35em;"></span></span></span><span style="top:-2.65em;"><span class="pstrut" style="height:3em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.85em;"><span class="pstrut" style="height:3em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span></span></span></span></p>
<p>è¾¹æ•°ç»„ï¼š</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.16em" columnalign="center center" columnlines="solid" columnspacing="1em" rowlines="solid"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mstyle mathcolor="lime"><mo lspace="0em" rspace="0em">â†“</mo></mstyle></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mstyle mathcolor="yellow"><mtable rowspacing="0.16em" columnalign="center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>0</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>1</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>2</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>3</mn></msub></mstyle></mtd></mtr></mtable></mstyle></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mstyle mathcolor="teal"><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>0</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>1</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>2</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>3</mn></msub></mstyle></mtd></mtr></mtable></mstyle></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mstyle mathcolor="fuchsia"><mtable rowspacing="0.16em" columnalign="center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable></mstyle></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">
\begin{array}{c|c}
    \color{lime}{â†“}&amp;
    \color{yellow}\begin{matrix}
        v_0 &amp; v_1 &amp; v_2 &amp; v_3 \\
    \end{matrix}
    \\
    \hline
    \color{teal}
    \begin{matrix}
        v_0 \\ v_1 \\ v_2 \\ v_3 \\
    \end{matrix}
    &amp;
    \color{fuchsia}
    \begin{matrix}
        0 &amp; 1 &amp; 1 &amp; 1 \\
        1 &amp; 0 &amp; 1 &amp; 0 \\
        1 &amp; 1 &amp; 0 &amp; 1 \\
        1 &amp; 0 &amp; 1 &amp; 0 \\
    \end{matrix} 
\end{array}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:6.01em;vertical-align:-2.755em;"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.255em;"><span style="top:-5.255em;"><span class="pstrut" style="height:5.255em;"></span><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.255em;"><span style="top:-7.055em;"><span class="pstrut" style="height:4.65em;"></span><span class="mord"><span class="mord" style="color:lime;"><span class="mrel" style="color:lime;">â†“</span></span></span></span><span style="top:-4.045em;"><span class="pstrut" style="height:4.65em;"></span><span class="mord"><span class="mord" style="color:teal;"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:teal;"><span class="mord" style="color:teal;"><span class="mord mathnormal" style="margin-right:0.03588em;color:teal;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:teal;"><span class="mord mtight" style="color:teal;">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:teal;"><span class="mord" style="color:teal;"><span class="mord mathnormal" style="margin-right:0.03588em;color:teal;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:teal;"><span class="mord mtight" style="color:teal;">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:teal;"><span class="mord" style="color:teal;"><span class="mord mathnormal" style="margin-right:0.03588em;color:teal;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:teal;"><span class="mord mtight" style="color:teal;">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:teal;"><span class="mord" style="color:teal;"><span class="mord mathnormal" style="margin-right:0.03588em;color:teal;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:teal;"><span class="mord mtight" style="color:teal;">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.755em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:6.01em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-2.755em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.255em;"><span style="top:-7.055em;"><span class="pstrut" style="height:4.65em;"></span><span class="mord"><span class="mord" style="color:yellow;"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:yellow;"><span class="mord" style="color:yellow;"><span class="mord mathnormal" style="margin-right:0.03588em;color:yellow;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:yellow;"><span class="mord mtight" style="color:yellow;">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:yellow;"><span class="mord" style="color:yellow;"><span class="mord mathnormal" style="margin-right:0.03588em;color:yellow;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:yellow;"><span class="mord mtight" style="color:yellow;">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:yellow;"><span class="mord" style="color:yellow;"><span class="mord mathnormal" style="margin-right:0.03588em;color:yellow;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:yellow;"><span class="mord mtight" style="color:yellow;">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:yellow;"><span class="mord" style="color:yellow;"><span class="mord mathnormal" style="margin-right:0.03588em;color:yellow;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:yellow;"><span class="mord mtight" style="color:yellow;">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-4.045em;"><span class="pstrut" style="height:4.65em;"></span><span class="mord"><span class="mord" style="color:fuchsia;"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">1</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">1</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">1</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.755em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span style="top:-7.3em;"><span class="pstrut" style="height:5.255em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.755em;"><span></span></span></span></span></span></span></span></span></p>
<h5 id="ç½‘-é‚»æ¥çŸ©é˜µ"><a class="header-anchor" href="#ç½‘-é‚»æ¥çŸ©é˜µ">ğŸŒ³</a>ç½‘ é‚»æ¥çŸ©é˜µ</h5>
<p>é¡¶ç‚¹æ•°ç»„ï¼š<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><menclose notation="top bottom left right"><mtable rowspacing="0.16em" columnalign="center center center center center" columnlines="solid solid solid solid" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>0</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>1</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>2</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>3</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>4</mn></msub></mstyle></mtd></mtr></mtable></menclose></mrow><annotation encoding="application/x-tex">
\begin{array}{|c|c|c|c|c|}
\hline
v_0 &amp; v_1 &amp; v_2 &amp; v_3 &amp; v_4 \\
\hline
\end{array}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.35em;"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.89em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mtable"><span class="vertical-separator" style="height:1.2em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-0.35em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:1.2em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-0.35em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:1.2em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-0.35em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:1.2em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-0.35em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:1.2em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-0.35em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:1.2em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-0.35em;"></span></span></span><span style="top:-2.65em;"><span class="pstrut" style="height:3em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.85em;"><span class="pstrut" style="height:3em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span></span></span></span></p>
<p>è¾¹æ•°ç»„ï¼š<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.16em" columnalign="center center" columnlines="solid" columnspacing="1em" rowlines="solid"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mstyle mathcolor="lime"><mo lspace="0em" rspace="0em">â†“</mo></mstyle></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mstyle mathcolor="yellow"><mtable rowspacing="0.16em" columnalign="center center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>0</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>1</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>2</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>3</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>4</mn></msub></mstyle></mtd></mtr></mtable></mstyle></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mstyle mathcolor="teal"><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>0</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>1</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>2</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>3</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>4</mn></msub></mstyle></mtd></mtr></mtable></mstyle></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mstyle mathcolor="fuchsia"><mtable rowspacing="0.16em" columnalign="center center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>9</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">âˆ</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable></mstyle></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">
\begin{array}{c|c}
    \color{lime}{â†“}&amp;
    \color{yellow}\begin{matrix}
        v_0 &amp; v_1 &amp; v_2 &amp; v_3 &amp; v_4 \\
    \end{matrix}
    \\
    \hline
    \color{teal}
    \begin{matrix}
        v_0 \\ v_1 \\ v_2 \\ v_3 \\ v_4 \\
    \end{matrix}
    &amp;
    \color{fuchsia}
    \begin{matrix}
        0 &amp; âˆ &amp; âˆ &amp; âˆ &amp; 6 \\
        9 &amp; 0 &amp; 3 &amp; âˆ &amp; âˆ \\
        2 &amp; âˆ &amp; 0 &amp; 5 &amp; âˆ \\
        âˆ &amp; âˆ &amp; âˆ &amp; 0 &amp; 1 \\
        âˆ &amp; âˆ &amp; âˆ &amp; âˆ &amp; 0 \\
    \end{matrix} 
\end{array}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:7.21em;vertical-align:-3.355em;"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.855em;"><span style="top:-5.855em;"><span class="pstrut" style="height:5.855em;"></span><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.855em;"><span style="top:-8.255em;"><span class="pstrut" style="height:5.25em;"></span><span class="mord"><span class="mord" style="color:lime;"><span class="mrel" style="color:lime;">â†“</span></span></span></span><span style="top:-4.645em;"><span class="pstrut" style="height:5.25em;"></span><span class="mord"><span class="mord" style="color:teal;"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.25em;"><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:teal;"><span class="mord" style="color:teal;"><span class="mord mathnormal" style="margin-right:0.03588em;color:teal;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:teal;"><span class="mord mtight" style="color:teal;">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:teal;"><span class="mord" style="color:teal;"><span class="mord mathnormal" style="margin-right:0.03588em;color:teal;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:teal;"><span class="mord mtight" style="color:teal;">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:teal;"><span class="mord" style="color:teal;"><span class="mord mathnormal" style="margin-right:0.03588em;color:teal;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:teal;"><span class="mord mtight" style="color:teal;">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:teal;"><span class="mord" style="color:teal;"><span class="mord mathnormal" style="margin-right:0.03588em;color:teal;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:teal;"><span class="mord mtight" style="color:teal;">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:teal;"><span class="mord" style="color:teal;"><span class="mord mathnormal" style="margin-right:0.03588em;color:teal;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:teal;"><span class="mord mtight" style="color:teal;">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.75em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.355em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:7.21em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-3.355em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.855em;"><span style="top:-8.255em;"><span class="pstrut" style="height:5.25em;"></span><span class="mord"><span class="mord" style="color:yellow;"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:yellow;"><span class="mord" style="color:yellow;"><span class="mord mathnormal" style="margin-right:0.03588em;color:yellow;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:yellow;"><span class="mord mtight" style="color:yellow;">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:yellow;"><span class="mord" style="color:yellow;"><span class="mord mathnormal" style="margin-right:0.03588em;color:yellow;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:yellow;"><span class="mord mtight" style="color:yellow;">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:yellow;"><span class="mord" style="color:yellow;"><span class="mord mathnormal" style="margin-right:0.03588em;color:yellow;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:yellow;"><span class="mord mtight" style="color:yellow;">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:yellow;"><span class="mord" style="color:yellow;"><span class="mord mathnormal" style="margin-right:0.03588em;color:yellow;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:yellow;"><span class="mord mtight" style="color:yellow;">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:yellow;"><span class="mord" style="color:yellow;"><span class="mord mathnormal" style="margin-right:0.03588em;color:yellow;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:yellow;"><span class="mord mtight" style="color:yellow;">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-4.645em;"><span class="pstrut" style="height:5.25em;"></span><span class="mord"><span class="mord" style="color:fuchsia;"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.25em;"><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">0</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">9</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">2</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.75em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.25em;"><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.75em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.25em;"><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">3</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.75em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.25em;"><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">5</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">0</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.75em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.25em;"><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">6</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">âˆ</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">1</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:fuchsia;"><span class="mord" style="color:fuchsia;">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.75em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.355em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span style="top:-8.5em;"><span class="pstrut" style="height:5.855em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.355em;"><span></span></span></span></span></span></span></span></span></p>
<h4 id="é‚»æ¥è¡¨"><a class="header-anchor" href="#é‚»æ¥è¡¨">ğŸŒ³</a>é‚»æ¥è¡¨</h4>
<p>é¡¶ç‚¹å°‘ ç¨€ç–å›¾ é‚»æ¥å›¾å­˜å‚¨ç»“æ„ æµªè´¹ç©ºé—´</p>
<p>é‚»æ¥è¡¨ adjacency Listï¼šæ•°ç»„+é“¾è¡¨<br>
æ— å‘å›¾ -&gt; è¾¹è¡¨<br>
æœ‰å‘å›¾ -&gt; å¼§å°¾å‡ºè¾¹è¡¨<br>
æœ‰å‘å›¾<code>é€†é‚»æ¥è¡¨</code> -&gt; å¼§å¤´çš„è¡¨</p>
<p><img src="/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E9%82%BB%E6%8E%A5%E8%A1%A8.png" alt="é‚»æ¥è¡¨"></p>
<h4 id="åå­—é“¾è¡¨"><a class="header-anchor" href="#åå­—é“¾è¡¨">ğŸŒ³</a>åå­—é“¾è¡¨</h4>
<p>Orthogonal List</p>
<p><img src="/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E5%8D%81%E5%AD%97%E9%93%BE%E8%A1%A8.png" alt="åå­—é“¾è¡¨"></p>
<h4 id="é‚»æ¥å¤šé‡è¡¨"><a class="header-anchor" href="#é‚»æ¥å¤šé‡è¡¨">ğŸŒ³</a>é‚»æ¥å¤šé‡è¡¨</h4>
<p><img src="/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E9%82%BB%E6%8E%A5%E5%A4%9A%E9%87%8D%E8%A1%A8.png" alt="é‚»æ¥å¤šé‡è¡¨"></p>
<h4 id="è¾¹é›†æ•°ç»„"><a class="header-anchor" href="#è¾¹é›†æ•°ç»„">ğŸŒ³</a>è¾¹é›†æ•°ç»„</h4>
<p><img src="/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E8%BE%B9%E9%9B%86%E6%95%B0%E7%BB%84.png" alt="è¾¹é›†æ•°ç»„"></p>
<p><img src="/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E7%BB%93%E6%9E%84%E7%89%B9%E5%BE%81%E5%AF%B9%E6%AF%94.png" alt="ç»“æ„ç‰¹å¾å¯¹æ¯”"></p>
<h3 id="å›¾çš„éå†"><a class="header-anchor" href="#å›¾çš„éå†">ğŸŒ³</a>å›¾çš„éå†</h3>
<p>traveling graph</p>
<h4 id="æ·±åº¦ä¼˜å…ˆéå†"><a class="header-anchor" href="#æ·±åº¦ä¼˜å…ˆéå†">ğŸŒ³</a>æ·±åº¦ä¼˜å…ˆéå†</h4>
<p>DFS depth first search</p>
<p>ä»å›¾ä¸­ æŸä¸ªé¡¶ç‚¹vå‡ºå‘ ç„¶åä»vçš„æœªè¢«è®¿é—®çš„é‚»æ¥ç‚¹å‡ºå‘æ·±åº¦ä¼˜å…ˆéå†å›¾<br>
ç›´è‡³æ‰€æœ‰å’Œvæœ‰è·¯å¾„ç›¸é€šçš„é¡¶ç‚¹éƒ½è¢«è®¿é—®åˆ°</p>
<h5 id="é‚»æ¥çŸ©é˜µ-dfs"><a class="header-anchor" href="#é‚»æ¥çŸ©é˜µ-dfs">ğŸŒ³</a>é‚»æ¥çŸ©é˜µ DFS</h5>
<ul>
<li>éå†ç‚¹æ•°ç»„</li>
<li>æŸ¥è¯¢ç‚¹A æŸ¥è¯¢è¯¥ç‚¹çš„è¾¹çŸ©é˜µ è®¿é—®è¯¥ç‚¹çš„ç¬¬ä¸€ä¸ªé‚»æ¥ç‚¹B ç„¶åæ ‡è®°å·²è®¿é—®</li>
<li>è®¿é—®è¯¥é‚»æ¥ç‚¹B æŸ¥è¯¢è¯¥ç‚¹çš„è¾¹çŸ©é˜µ è®¿é—®è¯¥ç‚¹çš„ç¬¬ä¸€ä¸ªé‚»æ¥ç‚¹C ç„¶åæ ‡è®°å·²è®¿é—®</li>
<li>è®¿é—®C ã€‚ã€‚ã€‚åŒç† ç›´åˆ°è¯¥ åˆ†æ”¯ç‚¹ å…¨è¢«è®¿é—®ç»“æŸ</li>
<li>å›æº¯C æŸ¥è¯¢è¯¥ç‚¹çš„å…¶ä½™æœªè®¿é—®é‚»æ¥ç‚¹ å…¨è¢«è®¿é—®ç»“æŸ</li>
<li>å›æº¯B â€¦ ç›´åˆ°å›æº¯A</li>
</ul>
<h5 id="é‚»æ¥è¡¨"><a class="header-anchor" href="#é‚»æ¥è¡¨">ğŸŒ³</a>é‚»æ¥è¡¨</h5>
<ul>
<li>éå†ç‚¹æ•°ç»„</li>
<li>å¯¹ç‚¹A è®¿é—®è¯¥ç‚¹çš„é‚»æ¥é“¾è¡¨ è®¿é—®ç¬¬ä¸€åˆ†æ”¯é‚»æ¥ç‚¹B ç„¶åæ ‡è®°å·²è®¿é—®</li>
<li>æŸ¥è¯¢B â€¦ æŸ¥è¯¢C</li>
<li>å›æº¯ C å›æº¯B å›æº¯A</li>
</ul>
<p>æ·±åº¦éå† ç±»ä¼¼å‰åºéå† é€‰ä¸€åˆ†æ”¯å¾€æ·±åº¦æŸ¥è¯¢ç„¶åå›æº¯ ç›´åˆ°æ‰€æœ‰åˆ†æ”¯ç»“æŸ</p>
<h4 id="å¹¿åº¦ä¼˜å…ˆæœç´¢"><a class="header-anchor" href="#å¹¿åº¦ä¼˜å…ˆæœç´¢">ğŸŒ³</a>å¹¿åº¦ä¼˜å…ˆæœç´¢</h4>
<p>BFS breadth first search</p>
<p><a href="https://blog.csdn.net/qq_44918331/article/details/115542177">å›¾æ–‡è¯¦è§£ä¸¤ç§ç®—æ³•ï¼šæ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰å’Œå¹¿åº¦ä¼˜å…ˆéå†ï¼ˆBFS</a></p>
<h3 id="æœ€å°ç”Ÿæˆæ ‘"><a class="header-anchor" href="#æœ€å°ç”Ÿæˆæ ‘">ğŸŒ³</a>æœ€å°ç”Ÿæˆæ ‘</h3>
<p>minimum cost spanning tree</p>
<h4 id="prim-ç®—æ³•"><a class="header-anchor" href="#prim-ç®—æ³•">ğŸŒ³</a>prim ç®—æ³•</h4>
<p><img src="/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/prim%E7%AE%97%E6%B3%95.png" alt="primç®—æ³•"></p>
<h5 id="adjvexæ•°ç»„"><a class="header-anchor" href="#adjvexæ•°ç»„">ğŸŒ³</a>adjvexæ•°ç»„</h5>
<p>åœ¨ Primç®—æ³• ä¸­ç”¨äºå­˜å‚¨ lowcostæ•°ç»„ æ¯é¡¹æƒå€¼å¯¹åº”çš„èŒƒå›´å†…é¡¶ç‚¹ä¸‹æ ‡ï¼Œä¸»è¦ç”¨äºè¾“å‡ºæœ€å°ç”Ÿæˆæ ‘çš„è¾¹ä¿¡æ¯â€Œ<br>
åœ¨Primç®—æ³•ä¸­ï¼Œadjvexæ•°ç»„è®°å½•äº†lowcostæ•°ç»„ä¸­æ¯ä¸ªæœ€å°æƒå€¼å¯¹åº”çš„é¡¶ç‚¹ä¸‹æ ‡ï¼Œè¿™æ ·å¯ä»¥åœ¨ç”Ÿæˆæœ€å°ç”Ÿæˆæ ‘çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡adjvexæ•°ç»„ç¡®å®šæ¯æ¡è¾¹çš„èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œä»è€Œè¾“å‡ºæœ€å°ç”Ÿæˆæ ‘çš„è¾¹ä¿¡æ¯â€Œ</p>
<p>å…·ä½“æ¥è¯´ï¼Œadjvexæ•°ç»„çš„ä½œç”¨åŒ…æ‹¬ï¼š</p>
<p>-â€Œ å­˜å‚¨é¡¶ç‚¹ä¸‹æ ‡â€Œï¼šadjvexæ•°ç»„ç”¨äºä¿å­˜lowcostæ•°ç»„ä¸­æ¯ä¸ªæœ€å°æƒå€¼å¯¹åº”çš„é¡¶ç‚¹ä¸‹æ ‡ã€‚è¿™æ ·å¯ä»¥åœ¨ç”Ÿæˆæœ€å°ç”Ÿæˆæ ‘çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡adjvexæ•°ç»„ç¡®å®šæ¯æ¡è¾¹çš„èµ·ç‚¹ã€‚<br>
â€Œ- è¾“å‡ºè¾¹ä¿¡æ¯â€Œï¼šåœ¨Primç®—æ³•ä¸­ï¼Œé€šè¿‡éå†adjvexæ•°ç»„ï¼Œå¯ä»¥è¾“å‡ºæ„æˆæœ€å°ç”Ÿæˆæ ‘çš„è¾¹ä¿¡æ¯ã€‚<br>
ä¾‹å¦‚ï¼Œå½“æ‰¾åˆ°ä¸€ä¸ªé¡¶ç‚¹çš„lowcostå€¼æœ€å°ä¸”ä¸ä¸º0æ—¶ï¼Œå¯ä»¥é€šè¿‡adjvexæ•°ç»„ç¡®å®šè¯¥é¡¶ç‚¹çš„ä¸‹æ ‡ï¼Œä»è€Œè¾“å‡ºå¯¹åº”çš„è¾¹ä¿¡æ¯â€Œ</p>
<p>é€šè¿‡ä½¿ç”¨adjvexæ•°ç»„ï¼ŒPrimç®—æ³•èƒ½å¤Ÿæœ‰æ•ˆåœ°æ„å»ºè¿é€šç½‘çš„æœ€å°ä»£ä»·ç”Ÿæˆæ ‘ï¼Œç¡®ä¿ç”Ÿæˆçš„æ ‘æ˜¯æœ€å°ç”Ÿæˆæ ‘ã€‚</p>
<h5 id="prim-ç®—æ³•åŸç†"><a class="header-anchor" href="#prim-ç®—æ³•åŸç†">ğŸŒ³</a>prim ç®—æ³•åŸç†</h5>
<ul>
<li>ä» <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">v_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> å¼€å§‹ æ ¹æ®é‚»æ¥çŸ©é˜µ éå† <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">v_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> çš„é‚»æ¥è¾¹</li>
<li>è®°å½•ğŸ“<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">v_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> åˆ°æ¯ä¸ªç‚¹(æ³¨æ„ä¸æ˜¯å…¶é‚»æ¥ç‚¹æ˜¯æ¯ä¸ªç‚¹)çš„æœ€å°è¾¹æƒå€¼ lowcost</li>
<li>å–æœ€å°è¾¹æƒç‚¹ k æ ¹æ®é‚»æ¥çŸ©é˜µ æ‰«æè¯¥ç‚¹ k é‚»æ¥è¾¹æƒå€¼ å¹¶è®°å½• lowcost</li>
<li>å†æ¬¡å–æœ€å°è¾¹æƒç‚¹ k â€¦ é‡å¤ n-1æ¬¡</li>
</ul>
<p>é€‚åˆç”¨äºç¨ å¯†å›¾</p>
<h4 id="prim-ç®—æ³•æºç "><a class="header-anchor" href="#prim-ç®—æ³•æºç ">ğŸŒ³</a>prim ç®—æ³•æºç </h4>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAXVEX 100</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INFINITY 65535</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> numVertexes;</span><br><span class="line">    <span class="type">int</span> arc[MAXVEX][MAXVEX];</span><br><span class="line">&#125; MGraph;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Primç®—æ³•</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">MiniSpanTree_Prim</span><span class="params">(MGraph G)</span> &#123;</span><br><span class="line">    <span class="type">int</span> min, i, j, k;</span><br><span class="line">    <span class="type">int</span> adjvex[MAXVEX];   <span class="comment">// ä¿å­˜ç›¸å…³é¡¶ç‚¹ä¸‹æ ‡</span></span><br><span class="line">    <span class="type">int</span> lowcost[MAXVEX];  <span class="comment">// ä¿å­˜ç›¸å…³é¡¶ç‚¹é—´è¾¹çš„æƒå€¼</span></span><br><span class="line"></span><br><span class="line">    lowcost[<span class="number">0</span>] = <span class="number">0</span>;       <span class="comment">// ç¬¬ä¸€ä¸ªé¡¶ç‚¹åŠ å…¥ç”Ÿæˆæ ‘</span></span><br><span class="line">    adjvex[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; G.numVertexes; i++) &#123;</span><br><span class="line">        lowcost[i] = G.arc[<span class="number">0</span>][i];</span><br><span class="line">        adjvex[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; G.numVertexes; i++) &#123;</span><br><span class="line">        min = INFINITY;</span><br><span class="line">        k = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt; G.numVertexes; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (lowcost[j] != <span class="number">0</span> &amp;&amp; lowcost[j] &lt; min) &#123;</span><br><span class="line">                min = lowcost[j];</span><br><span class="line">                k = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;(%d, %d) æƒå€¼: %d\n&quot;</span>, adjvex[k], k, min);</span><br><span class="line">        lowcost[k] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt; G.numVertexes; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (lowcost[j] != <span class="number">0</span> &amp;&amp; G.arc[k][j] &lt; lowcost[j]) &#123;</span><br><span class="line">                lowcost[j] = G.arc[k][j];</span><br><span class="line">                adjvex[j] = k;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹ä¸»å‡½æ•°</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    MGraph G;</span><br><span class="line">    <span class="type">int</span> i, j;</span><br><span class="line">    G.numVertexes = <span class="number">6</span>;</span><br><span class="line">    <span class="type">int</span> arc[<span class="number">6</span>][<span class="number">6</span>] = &#123;</span><br><span class="line">        &#123;<span class="number">0</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">5</span>, INFINITY, INFINITY&#125;,</span><br><span class="line">        &#123;<span class="number">6</span>, <span class="number">0</span>, <span class="number">5</span>, INFINITY, <span class="number">3</span>, INFINITY&#125;,</span><br><span class="line">        &#123;<span class="number">1</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">4</span>&#125;,</span><br><span class="line">        &#123;<span class="number">5</span>, INFINITY, <span class="number">5</span>, <span class="number">0</span>, INFINITY, <span class="number">2</span>&#125;,</span><br><span class="line">        &#123;INFINITY, <span class="number">3</span>, <span class="number">6</span>, INFINITY, <span class="number">0</span>, <span class="number">6</span>&#125;,</span><br><span class="line">        &#123;INFINITY, INFINITY, <span class="number">4</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">0</span>&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; G.numVertexes; i++)</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; G.numVertexes; j++)</span><br><span class="line">            G.arc[i][j] = arc[i][j];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æœ€å°ç”Ÿæˆæ ‘çš„è¾¹å¦‚ä¸‹ï¼š\n&quot;</span>);</span><br><span class="line">    MiniSpanTree_Prim(G);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/prim%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt="primæµç¨‹å›¾"></p>
<h5 id="è¾…åŠ©ç†è§£çš„å‚è€ƒèµ„æ–™"><a class="header-anchor" href="#è¾…åŠ©ç†è§£çš„å‚è€ƒèµ„æ–™">ğŸŒ³</a>è¾…åŠ©ç†è§£çš„å‚è€ƒèµ„æ–™</h5>
<p><a href="https://blog.csdn.net/shengdaVolleyball/article/details/106484094">æ•°æ®ç»“æ„ä¸ç®—æ³• - å›¾ æœ€å°ç”Ÿæˆæ ‘ï¼ˆä¸€ï¼‰Primç®—æ³•</a></p>
<h4 id="kruskal-ç®—æ³•"><a class="header-anchor" href="#kruskal-ç®—æ³•">ğŸŒ³</a>kruskal ç®—æ³•</h4>
<ul>
<li>è¾¹é›†æ•°ç»„ å­˜ è¾¹å¤´å°¾è¾¹æƒ</li>
<li>æŒ‰è¾¹æƒä»å°åˆ°å¤§æ’åº è¾¹é›†æ•°ç»„</li>
<li>éå†æ¯æ¡è¾¹ æŸ¥è¯¢ å¹¶é›†/(æœ‰ç¯)</li>
<li>éå†å®Œæ‰€æœ‰è¾¹å°±ç»“æŸğŸ”š</li>
</ul>
<p>é€‚ç”¨äºç¨€ç–å›¾</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAXVEX 100</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAXEDGE 100</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> begin;</span><br><span class="line">    <span class="type">int</span> end;</span><br><span class="line">    <span class="type">int</span> weight;</span><br><span class="line">&#125; Edge;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> numVertexes, numEdges;</span><br><span class="line">    <span class="type">int</span> vexs[MAXVEX];</span><br><span class="line">    <span class="type">int</span> arc[MAXVEX][MAXVEX];</span><br><span class="line">&#125; MGraph;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> parent[MAXVEX];</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">&#125; DisjointSet;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥æ‰¾æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">Find</span><span class="params">(DisjointSet *ds, <span class="type">int</span> f)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (ds-&gt;parent[f] &gt; <span class="number">0</span>)</span><br><span class="line">        f = ds-&gt;parent[f];</span><br><span class="line">    <span class="keyword">return</span> f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå¹¶é›†åˆ</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Union</span><span class="params">(DisjointSet *ds, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">    <span class="type">int</span> root1 = Find(ds, i);</span><br><span class="line">    <span class="type">int</span> root2 = Find(ds, j);</span><br><span class="line">    <span class="keyword">if</span> (root1 != root2)</span><br><span class="line">        ds-&gt;parent[root2] = root1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾¹æ’åº</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">SortEdges</span><span class="params">(Edge edges[], <span class="type">int</span> numEdges)</span> &#123;</span><br><span class="line">    <span class="type">int</span> i, j;</span><br><span class="line">    Edge temp;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; numEdges - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; numEdges - <span class="number">1</span> - i; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (edges[j].weight &gt; edges[j + <span class="number">1</span>].weight) &#123;</span><br><span class="line">                temp = edges[j];</span><br><span class="line">                edges[j] = edges[j + <span class="number">1</span>];</span><br><span class="line">                edges[j + <span class="number">1</span>] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Kruskal ç®—æ³•</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Kruskal</span><span class="params">(MGraph G)</span> &#123;</span><br><span class="line">    <span class="type">int</span> i, n, m;</span><br><span class="line">    Edge edges[MAXEDGE];</span><br><span class="line">    <span class="type">int</span> k = <span class="number">0</span>;</span><br><span class="line">    DisjointSet ds;</span><br><span class="line">    <span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–å¹¶æŸ¥é›†</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; G.numVertexes; i++)</span><br><span class="line">        ds.parent[i] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æå–æ‰€æœ‰è¾¹</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; G.numVertexes; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt; G.numVertexes; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (G.arc[i][j] != <span class="number">0</span> &amp;&amp; G.arc[i][j] &lt; <span class="number">65535</span>) &#123;</span><br><span class="line">                edges[k].begin = i;</span><br><span class="line">                edges[k].end = j;</span><br><span class="line">                edges[k].weight = G.arc[i][j];</span><br><span class="line">                k++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¾¹æ’åº</span></span><br><span class="line">    SortEdges(edges, G.numEdges);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æœ€å°ç”Ÿæˆæ ‘çš„è¾¹å¦‚ä¸‹ï¼š\n&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; G.numEdges; i++) &#123;</span><br><span class="line">        n = Find(&amp;ds, edges[i].begin);</span><br><span class="line">        m = Find(&amp;ds, edges[i].end);</span><br><span class="line">        <span class="keyword">if</span> (n != m) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;(%d, %d) æƒå€¼: %d\n&quot;</span>, edges[i].begin, edges[i].end, edges[i].weight);</span><br><span class="line">            sum += edges[i].weight;</span><br><span class="line">            Union(&amp;ds, n, m);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æœ€å°ç”Ÿæˆæ ‘çš„æ€»æƒå€¼ä¸º: %d\n&quot;</span>, sum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹ä¸»å‡½æ•°</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    MGraph G;</span><br><span class="line">    <span class="type">int</span> i, j;</span><br><span class="line">    G.numVertexes = <span class="number">6</span>;</span><br><span class="line">    G.numEdges = <span class="number">9</span>;</span><br><span class="line">    <span class="type">int</span> arc[<span class="number">6</span>][<span class="number">6</span>] = &#123;</span><br><span class="line">        &#123;<span class="number">0</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">65535</span>, <span class="number">65535</span>&#125;,</span><br><span class="line">        &#123;<span class="number">6</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">65535</span>, <span class="number">3</span>, <span class="number">65535</span>&#125;,</span><br><span class="line">        &#123;<span class="number">1</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">4</span>&#125;,</span><br><span class="line">        &#123;<span class="number">5</span>, <span class="number">65535</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">65535</span>, <span class="number">2</span>&#125;,</span><br><span class="line">        &#123;<span class="number">65535</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">65535</span>, <span class="number">0</span>, <span class="number">6</span>&#125;,</span><br><span class="line">        &#123;<span class="number">65535</span>, <span class="number">65535</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">0</span>&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; G.numVertexes; i++)</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; G.numVertexes; j++)</span><br><span class="line">            G.arc[i][j] = arc[i][j];</span><br><span class="line"></span><br><span class="line">    Kruskal(G);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æœ€çŸ­è·¯å¾„"><a class="header-anchor" href="#æœ€çŸ­è·¯å¾„">ğŸŒ³</a>æœ€çŸ­è·¯å¾„</h3>
<p>æ— å‘å›¾ æœ‰å‘å›¾éƒ½å¯ä»¥ä½¿ç”¨</p>
<h4 id="dijkstra-ç®—æ³•"><a class="header-anchor" href="#dijkstra-ç®—æ³•">ğŸŒ³</a>dijkstra ç®—æ³•</h4>
<p>è´ªå¿ƒç®—æ³•</p>
<p>å•æºæœ€çŸ­è·¯å¾„</p>
<p><img src="/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/dijkstra%E7%AE%97%E6%B3%95.png" alt="dijkstraç®—æ³•"></p>
<iframe src="//player.bilibili.com/player.html?isOutside=true&aid=113418124133881&bvid=BV1QESyYGE55&cid=26597720238&p=1&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>
<h4 id="floyd-ç®—æ³•"><a class="header-anchor" href="#floyd-ç®—æ³•">ğŸŒ³</a>floyd ç®—æ³•</h4>
<p>åŠ¨æ€è§„åˆ’æ€è·¯</p>
<p>å…¨æºæœ€çŸ­è·¯å¾„</p>
<p>æ”¯æŒè´Ÿæƒè¾¹<br>
æ£€æµ‹è´Ÿæƒç¯</p>
<p><img src="/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/floyd%E7%AE%97%E6%B3%95.png" alt="floydç®—æ³•"></p>
<iframe src="//player.bilibili.com/player.html?isOutside=true&aid=114357698564223&bvid=BV1aZ5rzRE4b&cid=29479076773&p=1&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>
<h3 id="æ‹“æ‰‘æ’åº-topological-sorting"><a class="header-anchor" href="#æ‹“æ‰‘æ’åº-topological-sorting">ğŸŒ³</a>æ‹“æ‰‘æ’åº topological sorting</h3>
<p>AOV ç½‘ activity on vertex networkï¼šç”¨é¡¶ç‚¹è¡¨ç¤ºæ´»åŠ¨çš„ç½‘ï¼Œæœ‰å‘è¾¹ç”¨æ¥è¡¨ç¤ºæ´»åŠ¨ä¹‹é—´çš„å…ˆåé¡ºåº</p>
<p>æ‹“æ‰‘æ’åºï¼šå¯¹AOVç½‘å·¥ç¨‹æ´»åŠ¨çš„æµç¨‹æ’åº</p>
<p>DAG æœ‰å‘æ— ç¯å›¾ Directed Acyclic Graph</p>
<blockquote>
<p>æ‹“æ‰‘æ’åºå¯ä»¥ç”¨æ¥æ£€æµ‹æœ‰å‘å›¾ä¸­æ˜¯å¦æœ‰ç¯è·¯</p>
</blockquote>
<p>æ‹“æ‰‘æ’åºåºåˆ—ä¸å”¯ä¸€</p>
<p><img src="/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F.png" alt="æ‹“æ‰‘æ’åº"></p>
<iframe src="//player.bilibili.com/player.html?isOutside=true&aid=114356238942264&bvid=BV1Vh56zsE37&cid=29473769945&p=1&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>
<h3 id="å…³é”®è·¯å¾„"><a class="header-anchor" href="#å…³é”®è·¯å¾„">ğŸŒ³</a>å…³é”®è·¯å¾„</h3>
<p>AOEç½‘ï¼šåœ¨ä¸€ä¸ªè¡¨ç¤ºå·¥ç¨‹å¸¦æƒæœ‰å‘å›¾ä¸­ï¼Œç”¨é¡¶ç‚¹è¡¨ç¤ºäº‹ä»¶ï¼Œç”¨æœ‰å‘è¾¹è¡¨ç¤ºæ´»åŠ¨ï¼Œç”¨è¾¹ä¸Šçš„æƒå€¼è¡¨ç¤ºæ´»åŠ¨çš„æŒç»­æ—¶é—´ï¼Œè¿™ç§æœ‰å‘å›¾çš„è¾¹è¡¨ç¤ºæ´»åŠ¨çš„ç½‘</p>
<p>æˆ‘ä»¬ æŠŠ è·¯å¾„ä¸Š å„ä¸ª æ´»åŠ¨æ‰€æŒç»­ çš„ æ—¶ é—´ä¹‹å’Œ ç§° ä¸ºè·¯å¾„ é•¿ åº¦ ,<br>
ä» æº ç‚¹ åˆ° æ±‡ç‚¹å…·æœ‰ æœ€ å¤§é•¿ åº¦ çš„ è·¯ å¾„å« å…³é”® è·¯ å¾„ ,<br>
åœ¨ å…³é”® è·¯å¾„ä¸Š çš„ æ´»åŠ¨å« å…³é”® æ´»åŠ¨</p>
<p>é€†æ‹“æ‰‘æ’åº</p>
<ol>
<li>äº‹ä»¶ çš„ æœ€ æ—© å‘ ç”Ÿ æ—¶é—´ etv (earliest time of vertex): å³ é¡¶ ç‚¹ w çš„ æœ€ æ—© å‘ ç”Ÿ æ—¶<br>
é—´ ã€‚</li>
<li>äº‹ä»¶ çš„ æœ€ æ™š å‘ç”Ÿæ—¶é—´ Itv (latest time of vertex): å³ é¡¹ ç‚¹ w çš„ æœ€ æ™š å‘ç”Ÿæ—¶é—´ ,ä¹Ÿ å°± æ˜¯ æ¯ä¸ªé¡¶ç‚¹ å¯¹ åº” çš„ äº‹ä»¶ æœ€ æ™š éœ€è¦ å¼€å§‹ çš„ æ—¶ é—´,è¶…å‡ºæ­¤ æ—¶é—´ å°† ä¼šå»¶è¯¯ æ•´ä¸ªå·¥<br>
æœŸã€‚</li>
<li>æ´»åŠ¨ çš„æœ€æ—©å¼€å·¥æ—¶é—´ ete (earliest time of edge): å³ å¼§ ax çš„ æœ€ æ—© å‘ç”Ÿæ—¶é—´ ã€‚</li>
<li>æ´»åŠ¨ çš„æœ€æ™šå¼€å·¥æ—¶é—´ Ite (latest time of edge): å³ å¼§ ax çš„ æœ€ æ™š å‘ç”Ÿæ—¶é—´, ä¹Ÿ å°±æ˜¯ ä¸ æ¨è¿Ÿ å·¥æœŸ çš„ æœ€ æ™š å¼€å·¥ æ—¶ é—´</li>
</ol>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mi>t</mi><mi>v</mi><mo stretchy="false">[</mo><mi>k</mi><mo stretchy="false">]</mo><mo>=</mo><mi>max</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>e</mi><mi>t</mi><mi>v</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>+</mo><mi>l</mi><mi>e</mi><mi>n</mi><mo>&lt;</mo><msub><mi>v</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>v</mi><mi>k</mi></msub><mo>&gt;</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">etv[k] = \max(etv[i] + len&lt;v_i,v_k&gt;)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">max</span><span class="mopen">(</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mclose">)</span></span></span></span><br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>t</mi><mi>v</mi><mo stretchy="false">[</mo><mi>k</mi><mo stretchy="false">]</mo><mo>=</mo><mi>min</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>l</mi><mi>t</mi><mi>v</mi><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo>âˆ’</mo><mi>l</mi><mi>e</mi><mi>n</mi><mo>&lt;</mo><msub><mi>v</mi><mi>k</mi></msub><mo separator="true">,</mo><msub><mi>v</mi><mi>j</mi></msub><mo>&gt;</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">ltv[k] = \min(ltv[j] -  len&lt;v_k,v_j&gt;)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">lt</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">min</span><span class="mopen">(</span><span class="mord mathnormal">lt</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8252em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mclose">)</span></span></span></span></p>
<p><img src="/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E4%BA%8B%E4%BB%B6%E6%9C%80%E6%97%A9%E6%9C%80%E6%99%9A%E5%BC%80%E5%A7%8B%E6%97%B6%E9%97%B4.png" alt="äº‹ä»¶æœ€æ—©æœ€æ™šå¼€å§‹æ—¶é—´"></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mi>t</mi><mi>e</mi><mo>&lt;</mo><msub><mi>v</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>v</mi><mi>j</mi></msub><mo>&gt;</mo><mo>=</mo><mi>e</mi><mi>t</mi><mi>v</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">ete&lt;v_i,v_j&gt; = etv[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6542em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8252em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span><br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>t</mi><mi>e</mi><mo>&lt;</mo><msub><mi>v</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>v</mi><mi>j</mi></msub><mo>&gt;</mo><mo>=</mo><mi>e</mi><mi>t</mi><mi>v</mi><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo>âˆ’</mo><mi>l</mi><mi>e</mi><mi>n</mi><mo>&lt;</mo><msub><mi>v</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>v</mi><mi>j</mi></msub><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">lte&lt;v_i,v_j&gt; = etv[j] - len&lt;v_i,v_j&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">lt</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8252em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8252em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span></span></span></span></p>
<p><img src="/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B4%BB%E5%8A%A8%E6%9C%80%E6%99%9A%E5%BC%80%E5%A7%8B%E6%97%B6%E9%97%B4.png" alt="æ´»åŠ¨æœ€æ™šå¼€å§‹æ—¶é—´"></p>
<h2 id="8-æŸ¥æ‰¾"><a class="header-anchor" href="#8-æŸ¥æ‰¾">ğŸŒ³</a>8. æŸ¥æ‰¾</h2>
<h3 id="æ¦‚å¿µ"><a class="header-anchor" href="#æ¦‚å¿µ">ğŸŒ³</a>æ¦‚å¿µ</h3>
<p>æŸ¥æ‰¾è¡¨<br>
å…³é”®å­—<br>
æ¬¡å…³é”®å­—<br>
é™æ€æŸ¥æ‰¾è¡¨<br>
åŠ¨æ€æŸ¥æ‰¾è¡¨</p>
<h3 id="é¡ºåºè¡¨æŸ¥æ‰¾"><a class="header-anchor" href="#é¡ºåºè¡¨æŸ¥æ‰¾">ğŸŒ³</a>é¡ºåºè¡¨æŸ¥æ‰¾</h3>
<p>é¡ºåºæŸ¥æ‰¾ sequential search çº¿æ€§æŸ¥æ‰¾</p>
<p>ä¼˜åŒ– å“¨å…µé¡ºåºæŸ¥æ‰¾ å°‘äº†ä¸€ä¸ªè¶Šç•Œåˆ¤æ–­</p>
<p>å¸¸ç”¨è®°å½•æ”¾å‰é¢ æé«˜æ•ˆç‡</p>
<h3 id="æœ‰åºè¡¨æŸ¥æ‰¾"><a class="header-anchor" href="#æœ‰åºè¡¨æŸ¥æ‰¾">ğŸŒ³</a>æœ‰åºè¡¨æŸ¥æ‰¾</h3>
<p>æŠ˜åŠæŸ¥æ‰¾ binary search äºŒåˆ†æŸ¥æ‰¾</p>
<p>å¯¹äºé¢‘ç¹æ‰§è¡Œæ’å…¥åˆ é™¤ ç»´æŠ¤æœ‰åºæ’åºå¸¦æ¥ä¸å°å·¥ä½œé‡ ä¸å»ºè®®ä½¿ç”¨</p>
<h4 id="æ’å€¼æŸ¥æ‰¾"><a class="header-anchor" href="#æ’å€¼æŸ¥æ‰¾">ğŸŒ³</a>æ’å€¼æŸ¥æ‰¾</h4>
<p>æ’å€¼å…¬å¼ï¼š <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>i</mi><mi>d</mi><mo>=</mo><mi>l</mi><mi>o</mi><mi>w</mi><mo>+</mo><mfrac><mrow><mi>k</mi><mi>e</mi><mi>y</mi><mo>âˆ’</mo><mi>a</mi><mo stretchy="false">[</mo><mi>l</mi><mi>o</mi><mi>w</mi><mo stretchy="false">]</mo></mrow><mrow><mi>a</mi><mo stretchy="false">[</mo><mi>h</mi><mi>i</mi><mi>g</mi><mi>h</mi><mo stretchy="false">]</mo><mo>âˆ’</mo><mi>a</mi><mo stretchy="false">[</mo><mi>l</mi><mi>o</mi><mi>w</mi><mo stretchy="false">]</mo></mrow></mfrac><mo stretchy="false">(</mo><mi>h</mi><mi>i</mi><mi>g</mi><mi>h</mi><mo>âˆ’</mo><mi>l</mi><mi>o</mi><mi>w</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">mid = low + \frac{key-a[low]}{a[high]-a[low]}(high-low)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">mi</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mopen mtight">[</span><span class="mord mathnormal mtight">hi</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight">h</span><span class="mclose mtight">]</span><span class="mbin mtight">âˆ’</span><span class="mord mathnormal mtight">a</span><span class="mopen mtight">[</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mclose mtight">]</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">ey</span><span class="mbin mtight">âˆ’</span><span class="mord mathnormal mtight">a</span><span class="mopen mtight">[</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mclose mtight">]</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord mathnormal">hi</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">)</span></span></span></span></p>
<p>é€‚åˆå…³é”®å­—åˆ†å¸ƒå‡åŒ€çš„æŸ¥æ‰¾è¡¨</p>
<h4 id="æ–æ³¢æ‹‰å¥‘æŸ¥æ‰¾"><a class="header-anchor" href="#æ–æ³¢æ‹‰å¥‘æŸ¥æ‰¾">ğŸŒ³</a>æ–æ³¢æ‹‰å¥‘æŸ¥æ‰¾</h4>
<p>Fibonacci search é»„é‡‘åˆ†å‰²åŸç†</p>
<p><img src="/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%96%90%E6%B3%A2%E6%8B%89%E5%A5%91%E6%9F%A5%E6%89%BE.png" alt="æ–æ³¢æ‹‰å¥‘æŸ¥æ‰¾"></p>
<p>å¹³å‡æ€§èƒ½ä¼˜äºæŠ˜åŠæŸ¥æ‰¾<br>
æŠ˜åŠæŸ¥æ‰¾ mid è¿ç®— Â±æ³•<br>
æ’å€¼æŸ¥æ‰¾ å››åˆ™è¿ç®—<br>
æ–æ³¢æ‹‰å¥‘æŸ¥æ‰¾ mid è¿ç®— Â±æ³•</p>
<h3 id="çº¿æ€§ç´¢å¼•æŸ¥æ‰¾"><a class="header-anchor" href="#çº¿æ€§ç´¢å¼•æŸ¥æ‰¾">ğŸŒ³</a>çº¿æ€§ç´¢å¼•æŸ¥æ‰¾</h3>
<p>æ•°æ®é›†å¢é•¿éå¸¸å¿« æ•°æ®æŒ‰å…ˆåé¡ºåºå­˜å‚¨</p>
<p>å¤§å‹æ•°æ®åº“ ç£ç›˜æ–‡ä»¶ é‡è¦æŠ€æœ¯</p>
<p>ä¸€ä¸ªç´¢å¼• ç”±è‹¥å¹²ä¸ªç´¢å¼•é¡¹æ„æˆ<br>
æ¯ä¸ªç´¢å¼•é¡¹è‡³å°‘åŒ…å«ï¼š</p>
<ul>
<li>å…³é”®å­—</li>
<li>è®°å½•åœ¨å­˜å‚¨å™¨ä¸­çš„ä½ç½®</li>
</ul>
<p>æŒ‰ç»“æ„åˆ†ä¸ºï¼š çº¿æ€§ç´¢å¼• æ ‘å½¢ç´¢å¼• å¤šçº§ç´¢å¼•</p>
<p>çº¿æ€§ç´¢å¼•ï¼šç´¢å¼•é¡¹é›†åˆç»„ç»‡ ä¸ºçº¿æ€§ç»“æ„ â€”â€” ç´¢å¼•è¡¨</p>
<ul>
<li>ç¨ å¯†ç´¢å¼•</li>
<li>åˆ†å—ç´¢å¼•</li>
<li>å€’æ’ç´¢å¼•</li>
</ul>
<h4 id="ç¨ å¯†ç´¢å¼•"><a class="header-anchor" href="#ç¨ å¯†ç´¢å¼•">ğŸŒ³</a>ç¨ å¯†ç´¢å¼•</h4>
<p>çº¿æ€§ç´¢å¼•ä¸­ å°†æ•°æ®é›†ä¸­çš„æ¯ä¸ªè®°å½•å¯¹åº”ä¸€ä¸ªç´¢å¼•é¡¹</p>
<p><img src="/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E7%A8%A0%E5%AF%86%E7%B4%A2%E5%BC%95.png" alt="ç¨ å¯†ç´¢å¼•"><br>
ç¨ å¯†ç´¢å¼•ç´¢å¼•è¡¨çš„ç´¢å¼•é¡¹ ä¸€å®šæ˜¯æŒ‰ç…§å…³é”®ç æœ‰åºæ’åˆ—</p>
<h4 id="åˆ†å—ç´¢å¼•"><a class="header-anchor" href="#åˆ†å—ç´¢å¼•">ğŸŒ³</a>åˆ†å—ç´¢å¼•</h4>
<ul>
<li>å—å†…æ— åº</li>
<li>å—é—´æœ‰åº</li>
</ul>
<p><img src="/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E5%88%86%E5%9D%97%E7%B4%A2%E5%BC%95%E8%A1%A8.png" alt="åˆ†å—ç´¢å¼•è¡¨"></p>
<h4 id="å€’æ’ç´¢å¼•"><a class="header-anchor" href="#å€’æ’ç´¢å¼•">ğŸŒ³</a>å€’æ’ç´¢å¼•</h4>
<p>ç´¢å¼•é¡¹é€šç”¨ç»“æ„:</p>
<ul>
<li>æ¬¡å…³é”®ç </li>
<li>è®°å½•å·è¡¨</li>
</ul>
<p>å€’æ’ç´¢å¼•:ä¸æ˜¯ç”±è®°å½•æ¥ç¡®å®šå±æ€§å€¼ è€Œæ˜¯ç”±å±æ€§å€¼æ¥ç¡®å®šè®°å½•çš„ä½ç½®</p>
<p><img src="/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E7%B4%A2%E5%BC%95%E9%A1%B9%E9%80%9A%E7%94%A8%E7%BB%93%E6%9E%84.png" alt="ç´¢å¼•é¡¹é€šç”¨ç»“æ„"></p>
<h3 id="äºŒå‰æ’åºæ ‘"><a class="header-anchor" href="#äºŒå‰æ’åºæ ‘">ğŸŒ³</a>äºŒå‰æ’åºæ ‘</h3>
<p>binary sort tree äºŒå‰æŸ¥æ‰¾æ ‘</p>
<p>éçº¿æ€§ç»“æ„</p>
<p>ä¸­åºéå† {62,88,58,47,35,73,51,99,37,93}<br>
=&gt; {35,37,47,51,58,62,73,88,93,99}</p>
<p>æé«˜æŸ¥æ‰¾ æ’å…¥ åˆ é™¤å…³é”®å­— çš„é€Ÿåº¦</p>
<h4 id="äºŒå‰æ’åºæ ‘æŸ¥æ‰¾æ“ä½œ"><a class="header-anchor" href="#äºŒå‰æ’åºæ ‘æŸ¥æ‰¾æ“ä½œ">ğŸŒ³</a>äºŒå‰æ’åºæ ‘æŸ¥æ‰¾æ“ä½œ</h4>
<h4 id="äºŒå‰æ’åºæ ‘æ’å…¥æ“ä½œ"><a class="header-anchor" href="#äºŒå‰æ’åºæ ‘æ’å…¥æ“ä½œ">ğŸŒ³</a>äºŒå‰æ’åºæ ‘æ’å…¥æ“ä½œ</h4>
<h4 id="äºŒå‰æ’åºæ ‘æŸ¥æ‰¾æ“ä½œ"><a class="header-anchor" href="#äºŒå‰æ’åºæ ‘æŸ¥æ‰¾æ“ä½œ">ğŸŒ³</a>äºŒå‰æ’åºæ ‘æŸ¥æ‰¾æ“ä½œ</h4>
<h4 id="äºŒå‰æ’åºæ ‘åˆ é™¤æ“ä½œ"><a class="header-anchor" href="#äºŒå‰æ’åºæ ‘åˆ é™¤æ“ä½œ">ğŸŒ³</a>äºŒå‰æ’åºæ ‘åˆ é™¤æ“ä½œ</h4>
<p><img src="/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E4%BA%8C%E5%8F%89%E6%8E%92%E5%BA%8F%E6%A0%91%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C.png" alt="äºŒå‰æ’åºæ ‘åˆ é™¤æ“ä½œ"></p>
<p>äºŒå‰æ’åºæ ‘ æŸ¥æ‰¾æ€§èƒ½å–å†³äº æ ‘çš„æ·±åº¦<br>
æ‰€ä»¥ æˆ‘ä»¬å¸Œæœ› äºŒå‰æ’åºæ ‘æ˜¯å¹³è¡¡çš„ å¸Œæœ›å…¶æ·±åº¦ä¸å®Œå…¨äºŒå‰æ ‘ç›¸åŒ: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">âŒŠ</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><mo stretchy="false">âŒ‹</mo><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">âŒŠlog_2nâŒ‹ + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">âŒŠ</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose">âŒ‹</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></p>
<h3 id="å¹³è¡¡äºŒå‰æ ‘"><a class="header-anchor" href="#å¹³è¡¡äºŒå‰æ ‘">ğŸŒ³</a>å¹³è¡¡äºŒå‰æ ‘</h3>
<p>ä¿„ç½—æ–¯æ•°å­¦å®¶ G.M.Adelson-Velskii å’Œ E.M.Landis AVLæ ‘<br>
self-balancing binary search tree<br>
height-balanced binary search tree<br>
å¹³è¡¡å› å­ BF balance factor: -1 0 1</p>
<p><img src="/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91.png" alt="å¹³è¡¡äºŒå‰æ ‘"></p>
<p>æœ€å°ä¸å¹³è¡¡å­æ ‘<br>
<img src="/2025/03/17/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%9C%80%E5%B0%8F%E4%B8%8D%E5%B9%B3%E8%A1%A1%E5%AD%90%E6%A0%91.png" alt="æœ€å°ä¸å¹³è¡¡å­æ ‘"></p>
<h2 id="9-æ’åº"><a class="header-anchor" href="#9-æ’åº">ğŸŒ³</a>9. æ’åº</h2>
<hr>
<p>Here is a footnote reference,[^1] and another.[^longnote]</p>
<h2 id="endnotes"><a class="header-anchor" href="#endnotes">ğŸŒ³</a>Endnotes</h2>
<p>[^1]: Here is the footnote.<br>
[^longnote]: Hereâ€™s one with multiple blocks.</p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºç§‘å­¦</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç»“æ„</tag>
      </tags>
  </entry>
  <entry>
    <title>å°è¯´ ã€ŠAä¸åœ¨ç°åœºã€‹çˆ¬è™«</title>
    <url>/2024/05/19/%E5%B0%8F%E8%AF%B4-%E3%80%8AA%E4%B8%8D%E5%9C%A8%E7%8E%B0%E5%9C%BA%E3%80%8B%E7%88%AC%E8%99%AB/</url>
    <content><![CDATA[<h1>scrapy çˆ¬è™«</h1>
<h2 id="çˆ¬å–-å°è¯´æ­£æ–‡-http-st-kanxshuo-com"><a class="header-anchor" href="#çˆ¬å–-å°è¯´æ­£æ–‡-http-st-kanxshuo-com">ğŸŒ³</a>çˆ¬å– å°è¯´æ­£æ–‡ <a href="http://st.kanxshuo.com">http://st.kanxshuo.com</a></h2>
<p>ä¿å­˜ä¸ºmarkdown æ ¼å¼ <a href="kanxshuo-%E4%BB%96%E4%B8%8D%E5%9C%A8%E7%8E%B0%E5%9C%BA-%E8%8B%8F%E6%A0%BC%E6%8B%89%E5%A4%AB%E9%A1%BF-27846.txt">ã€ŠAä¸åœ¨ç°åœºã€‹å‰11ç« </a></p>
<h3 id="ä½¿ç”¨-vim-æ­£åˆ™è¡¨è¾¾å¼-å¤„ç†è¿æ¥ä¿®æ”¹-è§†é¢‘å­—å¹•å°è¯´æ­£æ–‡"><a class="header-anchor" href="#ä½¿ç”¨-vim-æ­£åˆ™è¡¨è¾¾å¼-å¤„ç†è¿æ¥ä¿®æ”¹-è§†é¢‘å­—å¹•å°è¯´æ­£æ–‡">ğŸŒ³</a>ä½¿ç”¨ vim æ­£åˆ™è¡¨è¾¾å¼ å¤„ç†è¿æ¥ä¿®æ”¹ è§†é¢‘å­—å¹•å°è¯´æ­£æ–‡</h3>
<p><a href="%E3%80%8A%E4%B8%8D%E5%9C%A8%E7%8E%B0%E5%9C%BA%E3%80%8B11%E7%AB%A0%E5%88%B0%E6%9C%80%E5%90%8E%E4%B8%80%E7%AB%A0.txt">ã€Šä¸åœ¨ç°åœºã€‹11ç« åˆ°æœ€åä¸€ç« </a></p>
<h3 id="æºç "><a class="header-anchor" href="#æºç ">ğŸŒ³</a>æºç </h3>
<ul>
<li><a href="spider-kanxshuo.py">spider-kanxshuo.py</a></li>
<li><a href="./utils/mylog.py">mylog.py</a></li>
<li>ä¾èµ–
<ul>
<li><a href="https://docs.scrapy.org/en/latest/">scrapy</a></li>
<li><a href="https://scrapy-16.readthedocs.io/zh-cn/">ä¸­æ–‡ç‰ˆ</a></li>
</ul>
</li>
</ul>
<h4 id="spider-kanxshuo-py"><a class="header-anchor" href="#spider-kanxshuo-py">ğŸŒ³</a><a href="http://spider-kanxshuo.py">spider-kanxshuo.py</a></h4>
<blockquote>
<p>å…¶ä¸­ <code>./utils</code> æ–‡ä»¶å¤¹ ä¸ <code>spider-kanxshuo.py</code> åŒçº§</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> scrapy.selector <span class="keyword">import</span> Selector</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> utils <span class="keyword">import</span> mylog</span><br><span class="line">logger = mylog.mylogger(__name__)</span><br><span class="line"></span><br><span class="line">outDict = []</span><br><span class="line">bookCode = <span class="string">&#x27;27846&#x27;</span></span><br><span class="line">website = <span class="string">&#x27;st.kanxshuo.com/&#x27;</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">kanxshuoSpider</span>(scrapy.Spider):</span><br><span class="line">    name = <span class="string">&#x27;kanxshuo-&#x27;</span>+<span class="built_in">str</span>(bookCode)</span><br><span class="line">    start_urls = [<span class="string">f&#x27;http://<span class="subst">&#123;website&#125;</span>/book-<span class="subst">&#123;bookCode&#125;</span>-1.html&#x27;</span>,]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, response</span>):</span><br><span class="line">        <span class="keyword">global</span> outDict</span><br><span class="line"></span><br><span class="line">        urltitle = response.css(<span class="string">&#x27;div.bm_h::text&#x27;</span>).get()       </span><br><span class="line">        </span><br><span class="line">       <span class="comment">#windows æ–‡ä»¶åä¸èƒ½æŠŠåŒ…å«ä»¥ä¸‹å­—ç¬¦</span></span><br><span class="line">        urltitle = urltitle.replace(<span class="string">&#x27;\\&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;/&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;:&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;*&#x27;</span>, <span class="string">&#x27;&#x27;</span>)\</span><br><span class="line">        .replace(<span class="string">&#x27;?&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;&quot;&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;&lt;&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;&gt;&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;|&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;&lt;br&gt;&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">        body = response.css(<span class="string">&#x27;div.bookContent&#x27;</span>).get()</span><br><span class="line">        body = body.replace(<span class="string">&#x27;&lt;/div&gt;&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;&lt;br&gt;&#x27;</span>, <span class="string">&#x27;\n&#x27;</span>)\</span><br><span class="line">            .replace(<span class="string">&#x27;&lt;div class=&quot;bookContent&quot; id=&quot;fontzoom&quot;&gt;&#x27;</span>, <span class="string">&#x27;&#x27;</span>)\</span><br><span class="line">            .replace(<span class="string">&#x27;&lt;div id=&quot;a_d_4&quot;&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;/skin/a_728.js&quot;&gt;&lt;/script&gt;&#x27;</span>,<span class="string">&#x27;&#x27;</span>)\</span><br><span class="line">            .replace(<span class="string">&#x27;&lt;span id=&quot;a_d_1&quot;&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;/skin/a_336.js&quot;&gt;&lt;/script&gt; &lt;/span&gt;&#x27;</span>, <span class="string">&#x27;&#x27;</span>)\</span><br><span class="line">            .replace(<span class="string">&#x27;&lt;span id=&quot;a_d_2&quot;&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;/skin/a_728.js&quot;&gt;&lt;/script&gt; &lt;/span&gt;&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        logger.info(<span class="string">&#x27;å½“å‰é¡µ: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(urltitle))</span><br><span class="line">        logger.debug(<span class="string">&#x27;æ­£æ–‡: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(body))</span><br><span class="line">        outDict.append(&#123;</span><br><span class="line">            <span class="string">&#x27;å½“å‰é¡µ&#x27;</span>: urltitle,</span><br><span class="line">            <span class="string">&#x27;æ­£æ–‡&#x27;</span>: body,</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">yield</span> &#123;</span><br><span class="line">            <span class="string">&#x27;å½“å‰é¡µ&#x27;</span>: urltitle,</span><br><span class="line">            <span class="string">&#x27;æ­£æ–‡&#x27;</span>: body,</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        next_page = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">for</span> nextpage <span class="keyword">in</span> response.css(<span class="string">&#x27;div.bpages&#x27;</span>).css(<span class="string">&#x27;a&#x27;</span>):</span><br><span class="line">            pagename = nextpage.css(<span class="string">&#x27;a.pn::text&#x27;</span>).get()</span><br><span class="line">            <span class="comment">#logger.debug(&#x27;&#123;&#125; &#x27;.format(pagename))</span></span><br><span class="line">            <span class="keyword">if</span> pagename == <span class="string">&#x27;ä¸‹â”€é¡µ&#x27;</span>:</span><br><span class="line">                next_page = nextpage.css(<span class="string">&#x27;a::attr(&quot;href&quot;)&#x27;</span>).get()</span><br><span class="line">                logger.debug(next_page)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="comment">#elif pagename != &#x27;å°¾é¡µ&#x27; and pagename != &#x27;é¦–é¡µ&#x27; and pagename != &#x27;ä¸Šä¸€é¡µ&#x27; \</span></span><br><span class="line">            <span class="comment">#and int(pagename) and int(pagename) &gt; 5000000:</span></span><br><span class="line">            <span class="comment">#    break</span></span><br><span class="line">        <span class="keyword">if</span> next_page <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">yield</span> response.follow(next_page, <span class="variable language_">self</span>.parse)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            outjsonName = <span class="string">&quot;./txt-jsons/kanxshuo-%s-%s.json&quot;</span> % (urltitle, bookCode)</span><br><span class="line">            <span class="comment">#logger.debug(&quot;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++&quot;)</span></span><br><span class="line">            logger.debug(outDict)</span><br><span class="line">            outMDName = <span class="string">&quot;./txt-markdown/kanxshuo-%s-%s.md&quot;</span> % (urltitle, bookCode)</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(outMDName, <span class="string">&#x27;w+&#x27;</span>, newline=<span class="string">&#x27;&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> ff:</span><br><span class="line">                <span class="keyword">for</span> item <span class="keyword">in</span> outDict:</span><br><span class="line">                    title =  item[<span class="string">&#x27;å½“å‰é¡µ&#x27;</span>]</span><br><span class="line">                    body = item[<span class="string">&#x27;æ­£æ–‡&#x27;</span>]</span><br><span class="line">                    md_item = <span class="string">f&#x27;##### <span class="subst">&#123;title&#125;</span>&#x27;</span> + <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">                    md_item += <span class="string">f&#x27;<span class="subst">&#123;body&#125;</span>&#x27;</span> + <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">                    md_item += <span class="string">&#x27;\n---\n\n&#x27;</span></span><br><span class="line">                    logger.info(md_item)</span><br><span class="line">                    ff.writelines(md_item)</span><br><span class="line">            <span class="comment">#with open(outjsonName, &quot;w+&quot;, encoding=&#x27;utf-8&#x27;) as f:</span></span><br><span class="line">            <span class="comment">#    # json.dump(dict_, f)  # å†™ä¸ºä¸€è¡Œ</span></span><br><span class="line">            <span class="comment">#    json.dump(outDict, f, indent=2, sort_keys=False, ensure_ascii=False)  # å†™ä¸ºå¤šè¡Œ</span></span><br></pre></td></tr></table></figure>
<h4 id="utils-mylog-py"><a class="header-anchor" href="#utils-mylog-py">ğŸŒ³</a>./utils/mylog.py</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> logging, coloredlogs</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mylogger</span>(<span class="params">name</span>):</span><br><span class="line">    logger = logging.getLogger(name)</span><br><span class="line"></span><br><span class="line">    level_styles = coloredlogs.DEFAULT_LEVEL_STYLES.copy()</span><br><span class="line">    level_styles[<span class="string">&#x27;debug&#x27;</span>] = &#123;<span class="string">&#x27;color&#x27;</span>: <span class="string">&#x27;magenta&#x27;</span>&#125;</span><br><span class="line">    level_styles[<span class="string">&#x27;info&#x27;</span>] = &#123;<span class="string">&#x27;color&#x27;</span>: <span class="string">&#x27;yellow&#x27;</span>&#125;</span><br><span class="line">    level_styles[<span class="string">&#x27;error&#x27;</span>] = &#123;<span class="string">&#x27;color&#x27;</span>: <span class="string">&#x27;red&#x27;</span>&#125;</span><br><span class="line">    level_styles[<span class="string">&#x27;warning&#x27;</span>] = &#123;<span class="string">&#x27;color&#x27;</span>: <span class="string">&#x27;blue&#x27;</span>&#125;</span><br><span class="line">    coloredlogs.install(</span><br><span class="line">        level=<span class="string">&quot;DEBUG&quot;</span>,  <span class="comment"># show only debug and above</span></span><br><span class="line">        <span class="comment">#fmt=&quot;%(asctime)s - %(hostname)s - %(name)s[%(process)d] -\</span></span><br><span class="line">        <span class="comment">#  %(pathname)s -%(filename)s - %(funcName)s - %(lineno)d - %(module)s - %(levelname)s - %(message)s&quot;,</span></span><br><span class="line">        fmt=<span class="string">&quot;%(asctime)s - %(hostname)s - %(name)s[%(process)d] - %(filename)s::%(funcName)s::%(lineno)d - %(levelname)s - %(message)s&quot;</span>,</span><br><span class="line"> </span><br><span class="line">        logger=logger,</span><br><span class="line">        level_styles=level_styles,</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> logger</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        logger.debug(&#x27;Print log levelï¼šdebug&#x27;)</span></span><br><span class="line"><span class="string">        logger.info(&#x27;Print log levelï¼šinfo&#x27;)</span></span><br><span class="line"><span class="string">        logger.warning(&#x27;Print log levelï¼šwarning&#x27;)</span></span><br><span class="line"><span class="string">        logger.error(&#x27;Print log levelï¼šerror&#x27;)</span></span><br><span class="line"><span class="string">        logger.critical(&#x27;Print log levelï¼šcritical&#x27;)</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="python-æ‰§è¡Œè„šæœ¬"><a class="header-anchor" href="#python-æ‰§è¡Œè„šæœ¬">ğŸŒ³</a>python æ‰§è¡Œè„šæœ¬</h3>
<p><code>scrapy runspider spider-kanxshuo.py -o spider-kanxshuo.json -s FEED_EXPORT_ENCODING=UTF-8 -s LOG_FILE=spider-kanxshuo.log</code></p>
<h2 id="çˆ¬å–-bç«™-åº†ä½™å¹´-æœ‰å£°å°è¯´è§†é¢‘-è§†é¢‘-å°è¯´-ä¼´è¯»ä¹¦éƒ"><a class="header-anchor" href="#çˆ¬å–-bç«™-åº†ä½™å¹´-æœ‰å£°å°è¯´è§†é¢‘-è§†é¢‘-å°è¯´-ä¼´è¯»ä¹¦éƒ">ğŸŒ³</a>çˆ¬å– Bç«™ ã€Šåº†ä½™å¹´ã€‹ æœ‰å£°å°è¯´è§†é¢‘ (è§†é¢‘+å°è¯´=ä¼´è¯»ä¹¦éƒ)</h2>
<ul>
<li>ä¸‹è½½Bç«™ æœ‰å£°å°è¯´è§†é¢‘ ä½¿ç”¨å‰ªæ˜  è¯†åˆ«è§†é¢‘å­—å¹• ä¿å­˜ä¸ºå°è¯´æ­£æ–‡</li>
<li>ä½¿ç”¨ vim æ­£åˆ™è¡¨è¾¾å¼ å¤„ç† çˆ¬å–å°è¯´æ­£æ–‡</li>
<li><a href="%E3%80%8A%E5%BA%86%E4%BD%99%E5%B9%B4%E3%80%8B_qinkan.net.txt">ã€Šåº†ä½™å¹´ã€‹å°è¯´æ­£æ–‡</a></li>
</ul>
<h2 id="çˆ¬è™«æœ¬åœ°æ•°æ®åº“-nosqlæ•°æ®åº“"><a class="header-anchor" href="#çˆ¬è™«æœ¬åœ°æ•°æ®åº“-nosqlæ•°æ®åº“">ğŸŒ³</a>çˆ¬è™«æœ¬åœ°æ•°æ®åº“ NoSQLæ•°æ®åº“</h2>
<ul>
<li>
<p>LiteDB</p>
<ul>
<li><a href="https://dev.listera.top/docs/litedb/">litedb_doc</a></li>
<li><a href="https://github.com/lidanger/LiteDB.wiki_Translation_zh-cn?tab=readme-ov-file">LiteDB</a></li>
</ul>
</li>
<li>
<p><a href="https://github.com/FileXdb/FileXdb.py">FileXdb.py</a></p>
</li>
<li>
<p>TinyDB</p>
<ul>
<li><a href="https://blog.csdn.net/cui_yonghua/article/details/120060474">å’ŒSQLiteæ•°æ®åº“å¯¹åº”çš„NoSQLæ•°æ®åº“ï¼šTinyDBçš„è¯¦ç»†ä½¿ç”¨ï¼ˆpython3ç»å…¸ç¼–ç¨‹æ¡ˆä¾‹</a></li>
<li><a href="https://blog.csdn.net/GitHub_miao/article/details/139188174">Python TinyDBåº“ï¼šè½»é‡çº§NoSQLæ•°æ®åº“çš„ç»ˆææŒ‡å—</a></li>
<li><a href="https://tinydb.readthedocs.io/en/latest/index.html">tinydb_doc</a></li>
</ul>
</li>
</ul>
<h3 id="tinydb"><a class="header-anchor" href="#tinydb">ğŸŒ³</a>TinyDB</h3>
<h4 id="æ›´å¿«çš„jsonè¯»å†™æ’ä»¶-betterjsonstorage"><a class="header-anchor" href="#æ›´å¿«çš„jsonè¯»å†™æ’ä»¶-betterjsonstorage">ğŸŒ³</a>æ›´å¿«çš„jsonè¯»å†™æ’ä»¶ <a href="https://github.com/MrPigss/BetterJSONStorage">BetterJSONStorage</a></h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> BetterJSONStorage <span class="keyword">import</span> BetterJSONStorage</span><br><span class="line"><span class="keyword">from</span> tinydb <span class="keyword">import</span> TinyDB, Query</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"></span><br><span class="line">path = Path(<span class="string">&#x27;./output/moviedb4.json&#x27;</span>)</span><br><span class="line">moviedb = TinyDB(path, access_mode=<span class="string">&quot;r+&quot;</span>, storage=BetterJSONStorage)</span><br><span class="line"></span><br><span class="line">moviedb.default_table_name = <span class="string">&#x27;movietable&#x27;</span></span><br><span class="line">movietable = moviedb.table(<span class="string">&#x27;movietable&#x27;</span>)</span><br><span class="line"></span><br><span class="line">query = Query()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ’å…¥æˆ–è€…æ›´æ–°DB</span></span><br><span class="line">ret = movietable.upsert(movieJson, query.name == name)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥è¯¢DB</span></span><br><span class="line"><span class="keyword">if</span> movietable.get(query.name == name) <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">doc_id = movietable.get(query.name == name).doc_id</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°DB</span></span><br><span class="line">movietable.update(&#123;<span class="string">&#x27;url&#x27;</span>:url&#125;, doc_ids = [doc_id])</span><br><span class="line">movietable.update(&#123;<span class="string">&#x27;screenshots&#x27;</span>:jsonResult[<span class="string">&#x27;screenshots&#x27;</span>]&#125;, doc_ids = [doc_id])</span><br><span class="line">movietable.update(&#123;<span class="string">&#x27;cover&#x27;</span>:cover_url&#125;, doc_ids = [doc_id])</span><br><span class="line">logger.debug(movietable.get(doc_id=doc_id))</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å°DB</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">print_db</span>():</span><br><span class="line">    outMDName = <span class="string">&quot;./db/actorDB.md&quot;</span></span><br><span class="line">    logger.info(<span class="string">&#x27;outMDName total: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(outMDName))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å–æ•°æ®å†™ markdown</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(outMDName, <span class="string">&#x27;w+&#x27;</span>, newline=<span class="string">&#x27;&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> ff:</span><br><span class="line">        logger.info(<span class="string">&#x27;outMDName: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(outMDName))</span><br><span class="line">        <span class="keyword">with</span> TinyDB(path, access_mode=<span class="string">&quot;r+&quot;</span>, storage=BetterJSONStorage) <span class="keyword">as</span> actorDB:</span><br><span class="line">            logger.info(<span class="string">&#x27;DB total: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(actorDB))</span><br><span class="line">            actorTable = actorDB.table(<span class="string">&#x27;actorTable&#x27;</span>)</span><br><span class="line">            logger.info(<span class="string">&#x27;DB table: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(actorTable))</span><br><span class="line"></span><br><span class="line">            i = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> item <span class="keyword">in</span> actorTable.<span class="built_in">all</span>():</span><br><span class="line">                logger.info(item)</span><br><span class="line"></span><br><span class="line">                md_item = print_item(item)</span><br><span class="line">                i+=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">                ff.writelines(md_item)</span><br><span class="line">                ff.flush()</span><br><span class="line">                logger.info(md_item)</span><br><span class="line">                logger.info(i)</span><br><span class="line">            actorDB.close()</span><br><span class="line">        ff.close()</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å†™å…¥DB</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">flush_db</span>():</span><br><span class="line">    outDict = []</span><br><span class="line">    ...</span><br><span class="line">    outDict.append(user_dict)</span><br><span class="line">    ...</span><br><span class="line">    path = Path(<span class="string">f&#x27;./db/actorDB.json&#x27;</span>)</span><br><span class="line">    <span class="keyword">with</span> TinyDB(path, access_mode=<span class="string">&quot;r+&quot;</span>, storage=BetterJSONStorage) <span class="keyword">as</span> actorDB:</span><br><span class="line">        actorDB.default_table_name = <span class="string">&#x27;actorTable&#x27;</span></span><br><span class="line">        actorTable = actorDB.table(<span class="string">&#x27;actorTable&#x27;</span>)</span><br><span class="line">        query = Query()</span><br><span class="line">        <span class="keyword">for</span> actor <span class="keyword">in</span> outDict:</span><br><span class="line">            logger.info(<span class="string">&#x27;actor:::::::::::&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(actor))</span><br><span class="line">            actorTable.upsert(actor, query.name == actor.name<span class="string">&#x27;])</span></span><br><span class="line"><span class="string">        logger.info(&#x27;</span>DB total: &#123;&#125;<span class="string">&#x27;.format(actorDB))</span></span><br><span class="line"><span class="string">        actorDB.close()</span></span><br></pre></td></tr></table></figure>
<p>Here is a footnote reference,[^1] and another.[^longnote]</p>
<h2 id="endnotes"><a class="header-anchor" href="#endnotes">ğŸŒ³</a>Endnotes</h2>
<p>[^1]: Here is the footnote.<br>
[^longnote]: Hereâ€™s one with multiple blocks.</p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºç§‘å­¦</category>
      </categories>
      <tags>
        <tag>çˆ¬è™«</tag>
        <tag>scrapy</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‰¹å¤„ç†</title>
    <url>/2024/07/06/%E6%89%B9%E5%A4%84%E7%90%86/</url>
    <content><![CDATA[<h1>æ‰¹å¤„ç†</h1>
<h2 id="example"><a class="header-anchor" href="#example">ğŸŒ³</a>Example</h2>
<h3 id="æ— é™å¾ªç¯-å®šæ—¶-å›ºå®šæ—¶é—´é—´éš”"><a class="header-anchor" href="#æ— é™å¾ªç¯-å®šæ—¶-å›ºå®šæ—¶é—´é—´éš”">ğŸŒ³</a>æ— é™å¾ªç¯ï¼Œå®šæ—¶ï¼Œå›ºå®šæ—¶é—´é—´éš”</h3>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"></span><br><span class="line">:<span class="built_in">start</span></span><br><span class="line"><span class="built_in">echo</span> jajaja</span><br><span class="line">choice /t <span class="number">5</span> /d y /n &gt;nul</span><br><span class="line"></span><br><span class="line">goto <span class="built_in">start</span></span><br></pre></td></tr></table></figure>
<h2 id="æœç´¢ç›®å½•"><a class="header-anchor" href="#æœç´¢ç›®å½•">ğŸŒ³</a>æœç´¢ç›®å½•</h2>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line">::æœç´¢å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶</span><br><span class="line"><span class="keyword">for</span> %%i <span class="keyword">in</span> (*.*) <span class="keyword">do</span> <span class="built_in">echo</span> <span class="string">&quot;%%i&quot;</span></span><br><span class="line">:: æˆ–è€…</span><br><span class="line"><span class="keyword">for</span> /<span class="built_in">r</span> <span class="string">&quot;ç›®å½•è·¯å¾„&quot;</span> %%a <span class="keyword">in</span> (åŒ¹é…è§„åˆ™ï¼Œä¾‹å¦‚*.txt) <span class="keyword">do</span> æ‰§è¡Œæ“ä½œ</span><br><span class="line">pause</span><br></pre></td></tr></table></figure>
<h2 id="for"><a class="header-anchor" href="#for">ğŸŒ³</a>for</h2>
<blockquote>
<p>reference</p>
</blockquote>
<p><a href="https://blog.csdn.net/m0_56208280/article/details/129074215">Windows æ‰¹å¤„ç†(bat) forå¾ªç¯è¯­å¥ä½¿ç”¨æ•™ç¨‹</a></p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> %%a <span class="keyword">in</span> (ele1 ele2 ele3) <span class="keyword">do</span> (</span><br><span class="line">	<span class="built_in">echo</span> %%a</span><br><span class="line">)</span><br><span class="line"><span class="keyword">for</span> %%a <span class="keyword">in</span> (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>) <span class="keyword">do</span> (</span><br><span class="line">	<span class="built_in">echo</span> %%a</span><br><span class="line">)</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> /d %%i <span class="keyword">in</span> (./docs/) <span class="keyword">do</span> (<span class="built_in">echo</span> %%i)</span><br><span class="line"></span><br><span class="line">:: <span class="keyword">for</span> /l %%i  <span class="keyword">in</span> (<span class="built_in">start</span>,step,<span class="keyword">end</span>) <span class="keyword">do</span> command</span><br><span class="line"><span class="keyword">for</span> /l %%i <span class="keyword">in</span> (<span class="number">1</span>,<span class="number">3</span>,<span class="number">20</span>) <span class="keyword">do</span> (<span class="built_in">echo</span> %%i)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> /f %%i <span class="keyword">in</span> (.\test.txt) <span class="keyword">do</span> (<span class="built_in">echo</span> %%i)</span><br><span class="line"></span><br><span class="line">:: delimsè¿™ä¸ªå‚æ•°ï¼Œ=åé¢æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œæ„æ€æ˜¯å†å°†æ¯ä¸€ä¸ªå…ƒç´ ä»¥ç©ºæ ¼åˆ†å‰²ï¼Œé»˜è®¤æ˜¯åªå–åˆ†å‰²ä»¥åçš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</span><br><span class="line"><span class="keyword">for</span> /f <span class="string">&quot;delims= &quot;</span> %%i <span class="keyword">in</span> (.\test.txt) <span class="keyword">do</span> <span class="built_in">echo</span> %%i</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="if-å‘½ä»¤-æœ‰ä¸‰ç§æ ¼å¼"><a class="header-anchor" href="#if-å‘½ä»¤-æœ‰ä¸‰ç§æ ¼å¼">ğŸŒ³</a>If å‘½ä»¤ æœ‰ä¸‰ç§æ ¼å¼:</h2>
<h3 id="1-if-å‚æ•°-å­—ç¬¦ä¸²-å¾…æ‰§è¡Œçš„å‘½ä»¤"><a class="header-anchor" href="#1-if-å‚æ•°-å­—ç¬¦ä¸²-å¾…æ‰§è¡Œçš„å‘½ä»¤">ğŸŒ³</a>1. if â€œå‚æ•°â€ == â€œå­—ç¬¦ä¸²â€ ã€€å¾…æ‰§è¡Œçš„å‘½ä»¤</h3>
<p>å‚æ•°å¦‚æœç­‰äºæŒ‡å®šçš„å­—ç¬¦ä¸²ï¼Œåˆ™æ¡ä»¶æˆç«‹ï¼Œè¿è¡Œå‘½ä»¤ï¼Œå¦åˆ™è¿è¡Œä¸‹ä¸€å¥ã€‚(æ³¨æ„æ˜¯ä¸¤ä¸ªç­‰å·ï¼‰å¦‚</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="string">&quot;%1&quot;</span>==<span class="string">&quot;a&quot;</span> format a:</span><br><span class="line"><span class="keyword">if</span> &#123; %<span class="number">1</span> &#125;==&#123; &#125; goto noparms</span><br><span class="line"><span class="keyword">if</span> &#123; %<span class="number">2</span> &#125;==&#123; &#125; goto noparms</span><br></pre></td></tr></table></figure>
<h3 id="2-if-exist-æ–‡ä»¶å-å¾…æ‰§è¡Œçš„å‘½ä»¤"><a class="header-anchor" href="#2-if-exist-æ–‡ä»¶å-å¾…æ‰§è¡Œçš„å‘½ä»¤">ğŸŒ³</a>2. if exist æ–‡ä»¶åã€€ å¾…æ‰§è¡Œçš„å‘½ä»¤</h3>
<p>å¦‚æœæœ‰æŒ‡å®šçš„æ–‡ä»¶ï¼Œåˆ™æ¡ä»¶æˆç«‹ï¼Œè¿è¡Œå‘½ä»¤ï¼Œå¦åˆ™è¿è¡Œä¸‹ä¸€å¥ å¦‚</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> exist config.sys edit config.sys</span><br></pre></td></tr></table></figure>
<h3 id="3-if-errorlevel-if-not-errorlevel-æ•°å­—-å¾…æ‰§è¡Œçš„å‘½ä»¤"><a class="header-anchor" href="#3-if-errorlevel-if-not-errorlevel-æ•°å­—-å¾…æ‰§è¡Œçš„å‘½ä»¤">ğŸŒ³</a>3. if errorlevel / if not errorlevel æ•°å­—ã€€ å¾…æ‰§è¡Œçš„å‘½ä»¤</h3>
<p>å¦‚æœè¿”å›ç ç­‰äºæŒ‡å®šçš„æ•°å­—ï¼Œåˆ™æ¡ä»¶æˆç«‹ï¼Œè¿è¡Œå‘½ä»¤ï¼Œå¦åˆ™è¿è¡Œä¸‹ä¸€å¥ã€‚<br>
å¦‚</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> errorlevel <span class="number">2</span> goto x2 ã€€</span><br></pre></td></tr></table></figure>
<p>DOS ç¨‹åºè¿è¡Œæ—¶éƒ½ä¼šè¿”å›ä¸€ä¸ªæ•°å­—ç»™ DOSï¼Œç§°ä¸ºé”™è¯¯ç  errorlevel æˆ–ç§°è¿”å›ç ï¼Œå¸¸è§çš„è¿”å›ç ä¸º 0ã€1ã€‚</p>
<h2 id="æ³¨é‡Šæ–¹å¼"><a class="header-anchor" href="#æ³¨é‡Šæ–¹å¼">ğŸŒ³</a>æ³¨é‡Šæ–¹å¼</h2>
<p>1ã€:: æ³¨é‡Šå†…å®¹ï¼ˆç¬¬ä¸€ä¸ªå†’å·åä¹Ÿå¯ä»¥è·Ÿä»»ä½•ä¸€ä¸ªéå­—æ¯æ•°å­—çš„å­—ç¬¦ï¼‰<br>
2ã€rem æ³¨é‡Šå†…å®¹ï¼ˆä¸èƒ½å‡ºç°é‡å®šå‘ç¬¦å·å’Œç®¡é“ç¬¦å·ï¼‰<br>
3ã€echo æ³¨é‡Šå†…å®¹ï¼ˆä¸èƒ½å‡ºç°é‡å®šå‘ç¬¦å·å’Œç®¡é“ç¬¦å·ï¼‰ã€‰nul<br>
4ã€if not exist nul æ³¨é‡Šå†…å®¹ï¼ˆä¸èƒ½å‡ºç°é‡å®šå‘ç¬¦å·å’Œç®¡é“ç¬¦å·ï¼‰<br>
5ã€:æ³¨é‡Šå†…å®¹ï¼ˆæ³¨é‡Šæ–‡æœ¬ä¸èƒ½ä¸å·²æœ‰æ ‡ç­¾é‡åï¼‰<br>
6ã€%æ³¨é‡Šå†…å®¹%ï¼ˆå¯ä»¥ç”¨ä½œè¡Œé—´æ³¨é‡Šï¼Œä¸èƒ½å‡ºç°é‡å®šå‘ç¬¦å·å’Œç®¡é“ç¬¦å·ï¼‰<br>
7ã€goto æ ‡ç­¾ æ³¨é‡Šå†…å®¹ï¼ˆå¯ä»¥ç”¨ä½œè¯´æ˜ goto çš„æ¡ä»¶å’Œæ‰§è¡Œå†…å®¹ï¼‰<br>
8ã€:æ ‡ç­¾ æ³¨é‡Šå†…å®¹ï¼ˆå¯ä»¥ç”¨ä½œæ ‡ç­¾ä¸‹æ–¹æ®µçš„æ‰§è¡Œå†…å®¹ï¼‰</p>
<p>@echo off è¡¨ç¤ºæ‰§è¡Œäº†è¿™æ¡å‘½ä»¤åå…³é—­æ‰€æœ‰å‘½ä»¤(åŒ…æ‹¬æœ¬èº«è¿™æ¡å‘½ä»¤)çš„å›æ˜¾ã€‚<br>
è€Œ echo off å‘½ä»¤åˆ™è¡¨ç¤ºå…³é—­å…¶ä»–æ‰€æœ‰å‘½ä»¤(ä¸åŒ…æ‹¬æœ¬èº«è¿™æ¡å‘½ä»¤)çš„å›æ˜¾ï¼Œ<br>
@çš„ä½œç”¨å°±æ˜¯å…³é—­ç´§è·Ÿå…¶åçš„ä¸€æ¡å‘½ä»¤çš„å›æ˜¾ï¼Œ</p>
<h2 id="åˆ¤æ–­è¯­å¥"><a class="header-anchor" href="#åˆ¤æ–­è¯­å¥">ğŸŒ³</a>åˆ¤æ–­è¯­å¥</h2>
<h3 id="1-åˆ¤æ–­å­—ç¬¦ä¸²ç›¸ç­‰"><a class="header-anchor" href="#1-åˆ¤æ–­å­—ç¬¦ä¸²ç›¸ç­‰">ğŸŒ³</a>1. åˆ¤æ–­å­—ç¬¦ä¸²ç›¸ç­‰ã€‚</h3>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼šæ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå‘½åä¸º ifstringï¼Œä¿®æ”¹æ–‡ä»¶ç±»å‹ä¸º batï¼Œï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> <span class="string">&quot;var=this is an apple&quot;</span></span><br><span class="line">rem æ¯”è¾ƒ%var%æ˜¯å¦ç­‰äºapple,å¦‚æœç›¸ç­‰,è¿”å›OK,å¦åˆ™è¿”å›NO.</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;%var%&quot;</span>==<span class="string">&quot;apple&quot;</span> (<span class="built_in">echo</span> OK) <span class="keyword">else</span> <span class="built_in">echo</span> NO</span><br><span class="line"></span><br><span class="line">pause&gt;nul</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šif åˆ¤æ–­å­—ç¬¦ä¸²ç›¸ç­‰æ—¶å€™ï¼Œåé¢ç”¨çš„æ˜¯â€œ==â€ï¼Œè€Œä¸æ˜¯â€œ=â€ã€‚</p>
<h3 id="2-åˆ¤æ–­æ•°å€¼ç›¸ç­‰"><a class="header-anchor" href="#2-åˆ¤æ–­æ•°å€¼ç›¸ç­‰">ğŸŒ³</a>2. åˆ¤æ–­æ•°å€¼ç›¸ç­‰ã€‚</h3>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼šæ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå‘½åä¸º ifnumberï¼Œä¿®æ”¹æ–‡ä»¶ç±»å‹ä¸º batï¼Œï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">set</span> /a num1=<span class="number">100</span></span><br><span class="line"><span class="built_in">set</span> /a num2=<span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> %num1% gtr %num2% <span class="built_in">echo</span> %num1%å¤§äº%num2%</span><br><span class="line"><span class="keyword">if</span> %num1% EQU %num2% <span class="built_in">echo</span> %num1%ç­‰äº%num2%</span><br><span class="line"><span class="keyword">if</span> %num1% LSS %num2% <span class="built_in">echo</span> %num1%å°äº%num2%</span><br><span class="line"></span><br><span class="line">pause&gt;nul</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šæ¯”è¾ƒè¿ç®—ç¬¦åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š</p>
<p>EQU - ç­‰äº<br>
ã€€ã€€ NEQ - ä¸ç­‰äº<br>
ã€€ã€€ LSS - å°äº<br>
ã€€ã€€ LEQ - å°äºæˆ–ç­‰äº<br>
ã€€ã€€ GTR - å¤§äº<br>
ã€€ã€€ GEQ - å¤§äºæˆ–ç­‰äº</p>
<h3 id="3-ç»“åˆ-errorlevel-ä½¿ç”¨"><a class="header-anchor" href="#3-ç»“åˆ-errorlevel-ä½¿ç”¨">ğŸŒ³</a>3. ç»“åˆ errorlevel ä½¿ç”¨</h3>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼šæ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå‘½åä¸º iferrorlevelï¼Œä¿®æ”¹æ–‡ä»¶ç±»å‹ä¸º batï¼Œï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">ECHO</span> off</span><br><span class="line"></span><br><span class="line">XCOPY F:\studybat\if\iferrorlevel.bat D:\</span><br><span class="line"><span class="keyword">IF</span> ERRORLEVEL <span class="number">1</span> <span class="built_in">ECHO</span> æ–‡ä»¶æ‹·è´å¤±è´¥</span><br><span class="line"><span class="keyword">IF</span> ERRORLEVEL <span class="number">0</span> <span class="built_in">ECHO</span> æˆåŠŸæ‹·è´æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">pause&gt;nul</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šç¯å¢ƒå˜é‡ errorlevel çš„åˆå§‹å€¼ä¸º 0ï¼Œå½“ä¸€äº›å‘½ä»¤æ‰§è¡Œä¸æˆåŠŸï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªæ•°å€¼ï¼Œå¦‚ï¼š1 ï¼Œ2 ç­‰</p>
<h3 id="4-åˆ¤æ–­å˜é‡å®šä¹‰ä¸å¦"><a class="header-anchor" href="#4-åˆ¤æ–­å˜é‡å®šä¹‰ä¸å¦">ğŸŒ³</a>4. åˆ¤æ–­å˜é‡å®šä¹‰ä¸å¦ã€‚</h3>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼šæ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå‘½åä¸º ifdefinedï¼Œä¿®æ”¹æ–‡ä»¶ç±»å‹ä¸º batï¼Œï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">set</span> <span class="string">&quot;str1=ok&quot;</span></span><br><span class="line"><span class="built_in">set</span> <span class="string">&quot;str2=no&quot;</span></span><br><span class="line"><span class="keyword">if</span> defined str1 <span class="built_in">echo</span> str1å·²ç»è¢«å®šä¹‰</span><br><span class="line"><span class="keyword">if</span> defined str2 <span class="built_in">echo</span> str2å·²ç»è¢«å®šä¹‰</span><br><span class="line"><span class="keyword">if</span> defined str3 (<span class="built_in">echo</span> str3å·²ç»è¢«å®šä¹‰) <span class="keyword">else</span> <span class="built_in">echo</span> str3 æ²¡æœ‰è¢«å®šä¹‰</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line">chcp <span class="number">65001</span> &gt;nul</span><br><span class="line">setlocal enabledelayedexpansion</span><br><span class="line"></span><br><span class="line">REM è®¾ç½® gawk çš„è¯­è¨€ç¯å¢ƒä¸º UTF<span class="literal">-8</span></span><br><span class="line"><span class="built_in">set</span> LC_ALL=en_US.UTF<span class="literal">-8</span></span><br><span class="line"><span class="built_in">set</span> LANG=en_US.UTF<span class="literal">-8</span></span><br><span class="line"></span><br><span class="line">REM ä½¿ç”¨ <span class="keyword">for</span> /f æ•è· awk çš„è¾“å‡º</span><br><span class="line"><span class="keyword">for</span> /f <span class="string">&quot;delims=&quot;</span> %%A <span class="keyword">in</span> (<span class="string">&#x27;awk &quot;NR == 24 &#123;print $3&#125;&quot; spider-avdanyuwiki.py&#x27;</span>) <span class="keyword">do</span> (</span><br><span class="line">    <span class="built_in">set</span> <span class="string">&quot;result=%%A&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">REM æ‰“å°ä¿å­˜çš„å˜é‡</span><br><span class="line"><span class="built_in">echo</span> %result%</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> str1=%result:~<span class="number">1</span>,<span class="literal">-1</span>%</span><br><span class="line"><span class="built_in">echo</span> str1=%str1%</span><br><span class="line"><span class="built_in">SET</span> a=spider<span class="literal">-avdanyuwiki</span></span><br><span class="line"><span class="built_in">SET</span> b=%a%-%str1%.json</span><br><span class="line"><span class="built_in">SET</span> d=%a%-%str1%.log</span><br><span class="line"></span><br><span class="line">pause&gt;nul</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Here is a footnote reference,[^1] and another.[^longnote]</p>
<h2 id="endnotes"><a class="header-anchor" href="#endnotes">ğŸŒ³</a>Endnotes</h2>
<p>[^1]: Here is the footnote.<br>
[^longnote]: Hereâ€™s one with multiple blocks.</p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºç§‘å­¦</category>
      </categories>
      <tags>
        <tag>windows</tag>
        <tag>æ‰¹å¤„ç†</tag>
      </tags>
  </entry>
  <entry>
    <title>æ­£åˆ™è¡¨è¾¾å¼</title>
    <url>/2024/07/07/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
    <content><![CDATA[<h1>æ­£åˆ™è¡¨è¾¾å¼</h1>
<h2 id="basic"><a class="header-anchor" href="#basic">ğŸŒ³</a>basic</h2>
<figure class="highlight re"><table><tr><td class="code"><pre><span class="line">/a.c/ -&gt; aacã€abcã€accã€adc</span><br><span class="line">/a*b/ -&gt; <span class="string">&quot;b&quot;</span>ã€<span class="string">&quot;ab&quot;</span>ã€<span class="string">&quot;aab&quot;</span>ã€<span class="string">&quot;aaab&quot;</span> </span><br><span class="line">/a+b/ -&gt; <span class="string">&quot;ab&quot;</span>ã€<span class="string">&quot;aab&quot;</span>ã€<span class="string">&quot;aaab&quot;</span> </span><br><span class="line">/colou?r/ -&gt; <span class="string">&quot;color&quot;</span> æˆ– <span class="string">&quot;colour&quot;</span></span><br><span class="line"></span><br><span class="line">ç”¨æˆ·åç”±è‹¥å¹²ä¸ªå­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿å’Œä¸­åˆ’çº¿ç»„æˆï¼Œæ‰€ä»¥éœ€è¦ç”¨åˆ°<span class="operator"> + </span>è¡¨ç¤º <span class="number">1</span> æ¬¡æˆ–å¤šæ¬¡å‡ºç°</span><br><span class="line">[a-zA-<span class="type">Z0</span>-<span class="number">9_</span>-]+</span><br><span class="line"></span><br><span class="line">åŒ¹é… iframe æ ‡ç­¾</span><br><span class="line">/&lt;iframe(([\s\<span class="type">S</span>])*?)&lt;\/iframe&gt;/</span><br><span class="line"></span><br><span class="line">åŒ¹é…æ‰€æœ‰ img æ ‡ç­¾</span><br><span class="line">/&lt;img.*?src=<span class="string">&quot;(.*?)&quot;</span>.*?\/?&gt;/gi</span><br><span class="line"></span><br><span class="line">ä¸­æ‹¬å·è¡¨è¾¾å¼ åŒ¹é…å­—ç¬¦ç»„çš„ä¸€ä¸ªåˆ—è¡¨</span><br><span class="line">/<span class="type">Chapter</span> [<span class="number">1</span>-<span class="number">5</span>]/</span><br><span class="line">/<span class="type">Chapter</span> [<span class="number">12345</span>]/ -&gt; <span class="type">Chapter</span> <span class="number">1</span>ã€<span class="type">Chapter</span> <span class="number">2</span>ã€<span class="type">Chapter</span> <span class="number">3</span>ã€<span class="type">Chapter</span> <span class="number">4</span> å’Œ <span class="type">Chapter</span> <span class="number">5</span></span><br><span class="line"></span><br><span class="line">[!--]</span><br><span class="line">[!-~]</span><br><span class="line">/<span class="type">Chapter</span> [^<span class="number">1</span>-<span class="number">5</span>]/</span><br><span class="line">/[<span class="type">A</span>-<span class="type">Za</span>-z0-<span class="number">9</span>]/</span><br><span class="line"></span><br><span class="line">/^(<span class="type">Chapter</span>|<span class="type">Section</span>) [<span class="number">1</span>-<span class="number">9</span>][<span class="number">0</span>-<span class="number">9</span>]&#123;<span class="number">0</span>,<span class="number">1</span>&#125;$/</span><br><span class="line"></span><br><span class="line">\b	åŒ¹é…ä¸€ä¸ªå•è¯è¾¹ç•Œï¼Œä¹Ÿå°±æ˜¯æŒ‡å•è¯å’Œç©ºæ ¼é—´çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼Œâ€œer\b<span class="string">&quot;å¯ä»¥åŒ¹é…&quot;</span>never<span class="string">&quot;ä¸­çš„&quot;</span>er<span class="string">&quot;ï¼Œä½†ä¸èƒ½åŒ¹é…&quot;</span>verb<span class="string">&quot;ä¸­çš„&quot;</span>er<span class="string">&quot;ã€‚</span></span><br><span class="line"><span class="string">\B	åŒ¹é…éå•è¯è¾¹ç•Œã€‚â€œer\B&quot;</span>èƒ½åŒ¹é…<span class="string">&quot;verb&quot;</span>ä¸­çš„<span class="string">&quot;er&quot;</span>ï¼Œä½†ä¸èƒ½åŒ¹é…<span class="string">&quot;never&quot;</span>ä¸­çš„<span class="string">&quot;er&quot;</span>ã€‚</span><br><span class="line"></span><br><span class="line">\n	åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚ç­‰ä»·äº\x0aå’Œ\cJã€‚</span><br><span class="line">\r	åŒ¹é…ä¸€ä¸ªå›è½¦ç¬¦ã€‚ç­‰ä»·äº\x0då’Œ\cMã€‚</span><br><span class="line"></span><br><span class="line">\s	åŒ¹é…ä»»ä½•ç©ºç™½å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ç­‰ã€‚ç­‰ä»·äº[ \f\n\r\t\v]ã€‚</span><br><span class="line">\<span class="type">S</span>	åŒ¹é…ä»»ä½•éç©ºç™½å­—ç¬¦ã€‚ç­‰ä»·äº[^ \f\n\r\t\v]</span><br><span class="line"></span><br><span class="line">\w	åŒ¹é…åŒ…æ‹¬ä¸‹åˆ’çº¿çš„ä»»ä½•å•è¯å­—ç¬¦ã€‚ç­‰ä»·äºâ€œ[<span class="type">A</span>-<span class="type">Za</span>-z0-<span class="number">9_</span>]<span class="string">&quot;ã€‚</span></span><br><span class="line"><span class="string">\W	åŒ¹é…ä»»ä½•éå•è¯å­—ç¬¦ã€‚ç­‰ä»·äºâ€œ[^A-Za-z0-9_]&quot;</span>ã€‚</span><br></pre></td></tr></table></figure>
<h2 id="å¸¸ç”¨"><a class="header-anchor" href="#å¸¸ç”¨">ğŸŒ³</a>å¸¸ç”¨</h2>
<blockquote>
<p>reference</p>
</blockquote>
<p><a href="https://stackoverflow.org.cn/regexsucha/">regexsucha</a><br>
<a href="https://stackoverflow.org.cn/regex/">åœ¨çº¿æµ‹è¯•reg</a></p>
<figure class="highlight re"><table><tr><td class="code"><pre><span class="line">æ±‰å­—(å­—ç¬¦)	[\u4e00-\u9fa5]</span><br><span class="line">åŒ¹é…åŒå­—èŠ‚å­—ç¬¦(åŒ…æ‹¬æ±‰å­—åœ¨å†…)	[^\x00-\xff]</span><br><span class="line">ç©ºç™½è¡Œ	\n\s*\r  </span><br><span class="line">        \n\n(editplus) </span><br><span class="line">        ^[\s\<span class="type">S</span> ]*\n</span><br><span class="line">ç”¨æˆ·å	/^[a-z0-<span class="number">9_</span>-]&#123;<span class="number">3</span>,<span class="number">16</span>&#125;$/</span><br><span class="line">å¯†ç 	/^[a-z0-<span class="number">9_</span>-]&#123;<span class="number">6</span>,<span class="number">18</span>&#125;$/</span><br><span class="line">å¯†ç <span class="number">2</span>	(?=^.&#123;<span class="number">8</span>,&#125;$)(?=.*\d)(?=.*\<span class="type">W</span>+)(?=.*[<span class="type">A</span>-<span class="type">Z</span>])(?=.*[a-z])(?!.*\n).*$ (ç”±æ•°å­—/å¤§å†™å­—æ¯/å°å†™å­—æ¯/æ ‡ç‚¹ç¬¦å·ç»„æˆï¼Œå››ç§éƒ½å¿…æœ‰ï¼Œ<span class="number">8</span>ä½ä»¥ä¸Š)</span><br><span class="line"><span class="type">URL</span>	/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]&#123;<span class="number">2</span>,<span class="number">6</span>&#125;)([\/\w \.-]*)*\/?$/ æˆ– [a-zA-z]+:<span class="comment">//[^\s]*</span></span><br><span class="line"><span class="type">IP</span> åœ°å€	/((<span class="number">2</span>[<span class="number">0</span>-<span class="number">4</span>]\d|<span class="number">25</span>[<span class="number">0</span>-<span class="number">5</span>]|[<span class="number">01</span>]?\d\d?)\.)&#123;<span class="number">3</span>&#125;(<span class="number">2</span>[<span class="number">0</span>-<span class="number">4</span>]\d|<span class="number">25</span>[<span class="number">0</span>-<span class="number">5</span>]|[<span class="number">01</span>]?\d\d?)/</span><br><span class="line">/^(?:(?:<span class="number">25</span>[<span class="number">0</span>-<span class="number">5</span>]|<span class="number">2</span>[<span class="number">0</span>-<span class="number">4</span>][<span class="number">0</span>-<span class="number">9</span>]|[<span class="number">01</span>]?[<span class="number">0</span>-<span class="number">9</span>][<span class="number">0</span>-<span class="number">9</span>]?)\.)&#123;<span class="number">3</span>&#125;(?:<span class="number">25</span>[<span class="number">0</span>-<span class="number">5</span>]|<span class="number">2</span>[<span class="number">0</span>-<span class="number">4</span>][<span class="number">0</span>-<span class="number">9</span>]|[<span class="number">01</span>]?[<span class="number">0</span>-<span class="number">9</span>][<span class="number">0</span>-<span class="number">9</span>]?)$/ æˆ– ((<span class="number">2</span>[<span class="number">0</span>-<span class="number">4</span>]\d|<span class="number">25</span>[<span class="number">0</span>-<span class="number">5</span>]|[<span class="number">01</span>]?\d\d?)\.)&#123;<span class="number">3</span>&#125;(<span class="number">2</span>[<span class="number">0</span>-<span class="number">4</span>]\d|<span class="number">25</span>[<span class="number">0</span>-<span class="number">5</span>]|[<span class="number">01</span>]?\d\d?)</span><br></pre></td></tr></table></figure>
<h2 id="pattern"><a class="header-anchor" href="#pattern">ğŸŒ³</a>(pattern)</h2>
<blockquote>
<p>åŒ¹é…patternå¹¶è·å–è¿™ä¸€åŒ¹é…ã€‚æ‰€è·å–çš„åŒ¹é…å¯ä»¥</p>
</blockquote>
<ul>
<li>ä»äº§ç”Ÿçš„Matchesé›†åˆå¾—åˆ°ï¼Œ</li>
<li>åœ¨VBScriptä¸­ä½¿ç”¨SubMatchesé›†åˆï¼Œ</li>
<li>åœ¨JScriptä¸­åˆ™ä½¿ç”¨$0â€¦$9å±æ€§ã€‚</li>
</ul>
<blockquote>
<p>è¦åŒ¹é…åœ†æ‹¬å·å­—ç¬¦ï¼Œè¯·ä½¿ç”¨â€œ(â€œæˆ–â€)&quot;ã€‚</p>
</blockquote>
<h2 id="æ­£å‘åå‘åŒ¹é…"><a class="header-anchor" href="#æ­£å‘åå‘åŒ¹é…">ğŸŒ³</a>æ­£å‘åå‘åŒ¹é…</h2>
<blockquote>
<p>Windows ï¼šWindows 3.1ã€Windows 95 ã€Windows 98 å’Œ Windows NT</p>
</blockquote>
<h3 id="pattern"><a class="header-anchor" href="#pattern">ğŸŒ³</a>(?:pattern)</h3>
<blockquote>
<p>åŒ¹é…patternä½†ä¸è·å–åŒ¹é…ç»“æœï¼Œä¹Ÿå°±æ˜¯è¯´è¿™æ˜¯ä¸€ä¸ªéè·å–åŒ¹é…ï¼Œä¸è¿›è¡Œå­˜å‚¨ä¾›ä»¥åä½¿ç”¨ã€‚è¿™åœ¨ä½¿ç”¨æˆ–å­—ç¬¦â€œ(|)&quot;æ¥ç»„åˆä¸€ä¸ªæ¨¡å¼çš„å„ä¸ªéƒ¨åˆ†æ˜¯å¾ˆæœ‰ç”¨ã€‚<br>
ä¾‹å¦‚&quot;industr(?:y|ies)&quot;å°±æ˜¯ä¸€ä¸ªæ¯”&quot;industry|industries&quot;æ›´ç®€ç•¥çš„è¡¨è¾¾å¼ã€‚</p>
</blockquote>
<figure class="highlight re"><table><tr><td class="code"><pre><span class="line"><span class="type">Windows</span> (?:<span class="number">95</span> |<span class="number">98</span> |<span class="type">NT</span> ) -&gt; <span class="type">Windows</span> <span class="number">95</span> <span class="type">Windows</span> <span class="number">98</span> <span class="type">Windows</span> <span class="type">NT</span> </span><br></pre></td></tr></table></figure>
<h3 id="pattern"><a class="header-anchor" href="#pattern">ğŸŒ³</a>(?=pattern)</h3>
<blockquote>
<p>æ­£å‘è‚¯å®šé¢„æŸ¥ï¼Œåœ¨ä»»ä½•åŒ¹é…patternçš„å­—ç¬¦ä¸²å¼€å§‹å¤„åŒ¹é…æŸ¥æ‰¾å­—ç¬¦ä¸²ã€‚è¿™æ˜¯ä¸€ä¸ªéè·å–åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥åŒ¹é…ä¸éœ€è¦è·å–ä¾›ä»¥åä½¿ç”¨ã€‚<br>
ä¾‹å¦‚ï¼Œâ€œWindows(?=95|98|NT|2000)â€œèƒ½åŒ¹é…&quot;Windows2000&quot;ä¸­çš„&quot;Windowsâ€ï¼Œä½†ä¸èƒ½åŒ¹é…&quot;Windows3.1&quot;ä¸­çš„&quot;Windows&quot;ã€‚<br>
é¢„æŸ¥ä¸æ¶ˆè€—å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªåŒ¹é…å‘ç”Ÿåï¼Œåœ¨æœ€åä¸€æ¬¡åŒ¹é…ä¹‹åç«‹å³å¼€å§‹ä¸‹ä¸€æ¬¡åŒ¹é…çš„æœç´¢ï¼Œè€Œä¸æ˜¯ä»åŒ…å«é¢„æŸ¥çš„å­—ç¬¦ä¹‹åå¼€å§‹ã€‚</p>
</blockquote>
<blockquote>
<p>Windows (?=95 |98 |NT ) -&gt; <strong>Windows</strong> 95 <strong>Windows</strong> 98 <strong>Windows</strong> NT</p>
</blockquote>
<h3 id="pattern"><a class="header-anchor" href="#pattern">ğŸŒ³</a>(?!pattern)</h3>
<blockquote>
<p>æ­£å‘å¦å®šé¢„æŸ¥ï¼Œåœ¨ä»»ä½•ä¸åŒ¹é…patternçš„å­—ç¬¦ä¸²å¼€å§‹å¤„åŒ¹é…æŸ¥æ‰¾å­—ç¬¦ä¸²ã€‚è¿™æ˜¯ä¸€ä¸ªéè·å–åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥åŒ¹é…ä¸éœ€è¦è·å–ä¾›ä»¥åä½¿ç”¨ã€‚<br>
ä¾‹å¦‚â€œWindows(?!95|98|NT|2000)â€œèƒ½åŒ¹é…&quot;Windows3.1&quot;ä¸­çš„&quot;Windowsâ€ï¼Œä½†ä¸èƒ½åŒ¹é…&quot;Windows2000&quot;ä¸­çš„&quot;Windows&quot;ã€‚<br>
é¢„æŸ¥ä¸æ¶ˆè€—å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªåŒ¹é…å‘ç”Ÿåï¼Œåœ¨æœ€åä¸€æ¬¡åŒ¹é…ä¹‹åç«‹å³å¼€å§‹ä¸‹ä¸€æ¬¡åŒ¹é…çš„æœç´¢ï¼Œè€Œä¸æ˜¯ä»åŒ…å«é¢„æŸ¥çš„å­—ç¬¦ä¹‹åå¼€å§‹</p>
</blockquote>
<blockquote>
<p>Windows (?!95 |98 |NT ) -&gt; <strong>Windows</strong> ï¼š<strong>Windows</strong> 3.1</p>
</blockquote>
<h3 id="pattern"><a class="header-anchor" href="#pattern">ğŸŒ³</a>(?&lt;=pattern)</h3>
<blockquote>
<p>åå‘è‚¯å®šé¢„æŸ¥ï¼Œä¸æ­£å‘è‚¯å®šé¢„æŸ¥ç±»æ‹Ÿï¼Œåªæ˜¯æ–¹å‘ç›¸åã€‚<br>
ä¾‹å¦‚ï¼Œâ€œ(?&lt;=95|98|NT|2000)Windows&quot;èƒ½åŒ¹é…&quot;2000Windows&quot;ä¸­çš„&quot;Windows&quot;ï¼Œä½†ä¸èƒ½åŒ¹é…&quot;3.1Windows&quot;ä¸­çš„&quot;Windows&quot;ã€‚</p>
</blockquote>
<h3 id="pattern"><a class="header-anchor" href="#pattern">ğŸŒ³</a>(?&lt;!pattern)</h3>
<blockquote>
<p>åå‘å¦å®šé¢„æŸ¥ï¼Œä¸æ­£å‘å¦å®šé¢„æŸ¥ç±»æ‹Ÿï¼Œåªæ˜¯æ–¹å‘ç›¸åã€‚<br>
ä¾‹å¦‚â€œ(?&lt;!95|98|NT|2000)Windows&quot;èƒ½åŒ¹é…&quot;3.1Windows&quot;ä¸­çš„&quot;Windows&quot;ï¼Œä½†ä¸èƒ½åŒ¹é…&quot;2000Windows&quot;ä¸­çš„&quot;Windows&quot;ã€‚</p>
</blockquote>
<p>Here is a footnote reference,[^1] and another.[^longnote]</p>
<h2 id="vim-ç›¸å…³"><a class="header-anchor" href="#vim-ç›¸å…³">ğŸŒ³</a>vim ç›¸å…³</h2>
<blockquote>
<p>reference</p>
</blockquote>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/346058975">ç¥çº§ç¼–è¾‘å™¨ Vim ä½¿ç”¨-æ­£åˆ™æ›¿æ¢ç¯‡</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/670012180">Vimä½¿ç”¨æŠ€å·§</a></li>
</ul>
<blockquote>
<p>Examples</p>
</blockquote>
<h3 id="vim-æ¯-5è¡Œ-åˆå¹¶ä¸ºä¸€è¡Œ"><a class="header-anchor" href="#vim-æ¯-5è¡Œ-åˆå¹¶ä¸ºä¸€è¡Œ">ğŸŒ³</a>vim æ¯ 5è¡Œ åˆå¹¶ä¸ºä¸€è¡Œ</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nomarl æ¨¡å¼</span><br><span class="line"></span><br><span class="line">è¾“å…¥ qa è¿›å…¥å½•åˆ¶æ¨¡å¼</span><br><span class="line"></span><br><span class="line">æŒ‰5æ¬¡ J åˆå¹¶ 5è¡Œ</span><br><span class="line"></span><br><span class="line">æŒ‰j è·³ä¸‹ä¸€è¡Œ </span><br><span class="line"></span><br><span class="line">è¾“å…¥ q é€€å‡ºå½•åˆ¶æ¨¡å¼</span><br><span class="line"></span><br><span class="line">è¾“å…¥ 3000@a è¡¨ç¤º é‡å¤æ‰§è¡Œ3000æ¬¡å½•åˆ¶æ“ä½œ</span><br></pre></td></tr></table></figure>
<h3 id="vim-åŒ¹é…-æ•°å­—æ•°å­—-å¹¶å‰åæ’å…¥æ¢è¡Œç¬¦"><a class="header-anchor" href="#vim-åŒ¹é…-æ•°å­—æ•°å­—-å¹¶å‰åæ’å…¥æ¢è¡Œç¬¦">ğŸŒ³</a>vim åŒ¹é… <code>####</code> æ•°å­—æ•°å­—. å¹¶å‰åæ’å…¥æ¢è¡Œç¬¦</h3>
<p><a href="https://zhuanlan.zhihu.com/p/346058975">&amp; è¡¨ç¤ºä½¿ç”¨åŒ¹é…ä¸²</a></p>
<p><code>:%s/#### \d\d. /\r\r&amp;\r\r\/</code></p>
<h3 id="vim-æ¯10è¡Œæ’å…¥-3è¡Œç©ºè¡Œ"><a class="header-anchor" href="#vim-æ¯10è¡Œæ’å…¥-3è¡Œç©ºè¡Œ">ğŸŒ³</a>vim æ¯10è¡Œæ’å…¥ 3è¡Œç©ºè¡Œ</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">normal æ¨¡å¼ä¸‹ yyè¾…åŠ©ä¸€è¡Œç©ºè¡Œ</span><br><span class="line"></span><br><span class="line">è¾“å…¥ qa è¿›å…¥å½•åˆ¶æ¨¡å¼</span><br><span class="line"></span><br><span class="line">æŒ‰10æ¬¡ j è·³è¿‡10è¡Œ</span><br><span class="line"></span><br><span class="line">æŒ‰3æ¬¡ P æ’å…¥æ‹·è´ç©ºè¡Œ</span><br><span class="line"></span><br><span class="line">è¾“å…¥q é€€å‡ºå½•åˆ¶æ¨¡å¼</span><br><span class="line"></span><br><span class="line">è¾“å…¥ 150@a è¡¨ç¤ºé‡å¤æ‰§è¡Œ 150æ¬¡å½•åˆ¶æ“ä½œ</span><br></pre></td></tr></table></figure>
<h2 id="endnotes"><a class="header-anchor" href="#endnotes">ğŸŒ³</a>Endnotes</h2>
<p>[^1]: Here is the footnote.<br>
[^longnote]: Hereâ€™s one with multiple blocks.</p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºç§‘å­¦</category>
      </categories>
      <tags>
        <tag>æ­£åˆ™è¡¨è¾¾å¼</tag>
        <tag>vim</tag>
        <tag>re</tag>
      </tags>
  </entry>
  <entry>
    <title>ç®—æ³•ç¬”è®°</title>
    <url>/2024/07/07/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h1>ç®—æ³•ç¬”è®°</h1>
<h2 id="æ¸¸æˆæ’åç®—æ³•"><a class="header-anchor" href="#æ¸¸æˆæ’åç®—æ³•">ğŸŒ³</a>æ¸¸æˆæ’åç®—æ³•</h2>
<ul>
<li><a href="https://itindex.net/detail/61665-%E6%B8%B8%E6%88%8F%E6%8E%92%E5%90%8D-%E7%AE%97%E6%B3%95-elo" title="æ¸¸æˆæ’åç®—æ³•ï¼šEloã€Glickoã€TrueSkill">Elo</a></li>
</ul>
<p>Here is a footnote reference,[^1] and another.[^longnote]</p>
<h2 id="ç»å…¸ç®—æ³•"><a class="header-anchor" href="#ç»å…¸ç®—æ³•">ğŸŒ³</a>ç»å…¸ç®—æ³•</h2>
<ul>
<li><a href="https://itindex.net/detail/9511-bfprt-%E7%AE%97%E6%B3%95">bfprt</a></li>
<li><a href="https://itindex.net/detail/11732-%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95">è´ªå¿ƒç®—æ³•</a></li>
<li><a href="https://itindex.net/detail/46419-%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95">æ’åºç®—æ³•</a></li>
<li><a href="https://visualgo.net/zh">ç®—æ³•å¯è§†åŒ–ç½‘ç«™</a></li>
<li><a href="https://xie.infoq.cn/article/a6612973e6e6a80134f166eba">ç®—æ³•å¯è§†åŒ–ç½‘ç«™s</a></li>
</ul>
<h3 id="kmpç®—æ³•-knuth-morris-pratt"><a class="header-anchor" href="#kmpç®—æ³•-knuth-morris-pratt">ğŸŒ³</a>KMPç®—æ³• Knuth-Morris-Pratt</h3>
<h4 id="å¼•ç”¨èµ„æ–™"><a class="header-anchor" href="#å¼•ç”¨èµ„æ–™">ğŸŒ³</a>å¼•ç”¨èµ„æ–™</h4>
<ul>
<li><a href="https://www.bilibili.com/video/BV18k4y1m7Ar/?spm_id_from=333.337.search-card.all.click&amp;vd_source=b48342a630f5cc1a5c86649a37c0db89">bilibiliæ¬è¿ã€‘æ²¹ç®¡é˜¿ä¸‰å“¥è®²KMPæŸ¥æ‰¾ç®—æ³•ï¼Œä¸­è‹±æ–‡å­—å¹•ï¼Œäººå·¥ç¿»è¯‘ï¼Œç®€å•æ˜“æ‡‚</a></li>
<li><a href="https://github.com/mission-peace/interview/blob/master/src/com/interview/string/SubstringSearch.java">è§†é¢‘githubæºç åœ°å€</a></li>
<li><a href="%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0/SubstringSearch.java">å·²ä¸‹è½½æºç æ–‡ä»¶ SubstringSearch</a></li>
<li><a href="https://www.bilibili.com/video/BV1AY4y157yL/?share_source=copy_web&amp;vd_source=8481a329c330537a5873f8525ac82207">æœ€æµ…æ˜¾æ˜“æ‡‚çš„ KMP ç®—æ³•è®²è§£</a></li>
<li><a href="https://www.cnblogs.com/fswly/p/17959786">ç»å¯¹èƒ½çœ‹æ‡‚çš„kmpç®—æ³•ï¼Œè¶…æ¸…æ™°å¤šå›¾ï¼Œä¸€æ­¥æ­¥è¯¦è§£ï¼</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/28815377037">next-&gt;nextvalï¼Œkmpç®—æ³•çš„æ”¹è‰¯ç†è§£</a></li>
<li><a href="https://www.cnblogs.com/aninock/p/13796006.html">çœŸæ­£æŠŠkmpç®—æ³•ä¸­çš„nextæ•°ç»„å«ä¹‰å’Œæ±‚æ³•è®²æ˜ç™½</a></li>
</ul>
<p><img src="/2024/07/07/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0/LPS%E6%95%B0%E7%BB%84%E5%92%8CNext%E6%95%B0%E7%BB%84.png" alt="LPSæ•°ç»„å’ŒNextæ•°ç»„"></p>
<h4 id="kmpç®—æ³•ä¸­çš„å‰ç¼€å’Œåç¼€"><a class="header-anchor" href="#kmpç®—æ³•ä¸­çš„å‰ç¼€å’Œåç¼€">ğŸŒ³</a>KMPç®—æ³•ä¸­çš„å‰ç¼€å’Œåç¼€</h4>
<ul>
<li>å‰ç¼€æ˜¯æŒ‡ä»¥ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å¤´ä¸”ä¸åŒ…å«æœ€åä¸€ä¸ªå…ƒç´ çš„è¿ç»­çš„å­ä¸²</li>
<li>åç¼€æ˜¯æŒ‡ä»¥ä¸²æœ€åä¸€ä¸ªå­—ç¬¦ç»“å°¾ä¸”ä¸åŒ…å«ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿ç»­çš„å­ä¸²</li>
</ul>
<p>åœ¨KMPç®—æ³•ä¸­ï¼Œå‰ç¼€å’Œåç¼€çš„æ¦‚å¿µè¢«ç”¨æ¥æ„å»ºéƒ¨åˆ†åŒ¹é…è¡¨ï¼ˆPartial Match Tableï¼‰ï¼Œä»¥æé«˜å­—ç¬¦ä¸²åŒ¹é…çš„æ•ˆç‡</p>
<h5 id="éƒ¨åˆ†åŒ¹é…è¡¨çš„æ„å»º-lpsæ•°ç»„"><a class="header-anchor" href="#éƒ¨åˆ†åŒ¹é…è¡¨çš„æ„å»º-lpsæ•°ç»„">ğŸŒ³</a>éƒ¨åˆ†åŒ¹é…è¡¨çš„æ„å»º lpsæ•°ç»„</h5>
<p>éƒ¨åˆ†åŒ¹é…è¡¨çš„æ ¸å¿ƒæ˜¯è®¡ç®—æ¯ä¸ªä½ç½®çš„å‰ç¼€å’Œåç¼€çš„æœ€é•¿å…±æœ‰å…ƒç´ çš„é•¿åº¦ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<p>å¯¹äºå­—ç¬¦ä¸² â€œABCDABDâ€ï¼š</p>
<ul>
<li>
<p>lpsæ•°ç»„ç©·ä¸¾<br>
â€œAâ€ çš„å‰ç¼€å’Œåç¼€éƒ½ä¸ºç©ºé›†ï¼Œå…±æœ‰å…ƒç´ çš„é•¿åº¦ä¸º0ï¼›<br>
â€œABâ€ çš„å‰ç¼€ä¸º [A]ï¼Œåç¼€ä¸º [B]ï¼Œå…±æœ‰å…ƒç´ çš„é•¿åº¦ä¸º0ï¼›<br>
â€œABCâ€ çš„å‰ç¼€ä¸º [A, AB]ï¼Œåç¼€ä¸º [BC, C]ï¼Œå…±æœ‰å…ƒç´ çš„é•¿åº¦ä¸º0ï¼›<br>
â€œABCDâ€ çš„å‰ç¼€ä¸º [A, AB, ABC]ï¼Œåç¼€ä¸º [BCD, CD, D]ï¼Œå…±æœ‰å…ƒç´ çš„é•¿åº¦ä¸º0ï¼›<br>
â€œABCDAâ€ çš„å‰ç¼€ä¸º [A, AB, ABC, ABCD]ï¼Œåç¼€ä¸º [BCDA, CDA, DA, A]ï¼Œå…±æœ‰å…ƒç´ ä¸º â€œAâ€ï¼Œé•¿åº¦ä¸º1ï¼›<br>
â€œABCDABâ€ çš„å‰ç¼€ä¸º [A, AB, ABC, ABCD, ABCDA]ï¼Œåç¼€ä¸º [BCDAB, CDAB, DAB, AB, B]ï¼Œå…±æœ‰å…ƒç´ ä¸º â€œABâ€ï¼Œé•¿åº¦ä¸º2ï¼›<br>
â€œABCDABDâ€ çš„å‰ç¼€ä¸º [A, AB, ABC, ABCD, ABCDA, ABCDAB]ï¼Œåç¼€ä¸º [BCDABD, CDABD, DABD, ABD, BD, D]ï¼Œå…±æœ‰å…ƒç´ çš„é•¿åº¦ä¸º0ã€‚</p>
</li>
<li>
<p>nextæ•°ç»„ç©·ä¸¾ <a href="https://www.cnblogs.com/aninock/p/13796006.html">çœŸæ­£æŠŠkmpç®—æ³•ä¸­çš„nextæ•°ç»„å«ä¹‰å’Œæ±‚æ³•è®²æ˜ç™½</a><br>
<code>nextæ•°ç»„æˆ‘æ˜¯è¿™æ ·å®šä¹‰çš„ï¼šè¯¥ä½ç½®å‰é¢å­—ç¬¦ä¸²çš„æœ€é•¿ç›¸åŒçš„çœŸå‰ç¼€å’ŒçœŸåç¼€é•¿åº¦ã€‚</code><br>
â€œAâ€ å‰é¢æ²¡å­—ç¬¦ï¼Œå‰ç¼€å’Œåç¼€éƒ½ä¸ºç©ºé›†ï¼Œå…±æœ‰å…ƒç´ çš„é•¿åº¦ä¸º0ï¼›<br>
â€œABâ€ çš„å‰é¢æ˜¯å­—ç¬¦ä¸²Aï¼Œå‰ç¼€å’Œåç¼€éƒ½ä¸ºç©ºé›†ï¼Œå…±æœ‰å…ƒç´ çš„é•¿åº¦ä¸º0ï¼›<br>
â€œABCâ€ çš„å‰é¢æ˜¯å­—ç¬¦ä¸²ABï¼Œå‰ç¼€ä¸º [A]ï¼Œåç¼€ä¸º [B]ï¼Œå…±æœ‰å…ƒç´ çš„é•¿åº¦ä¸º0ï¼›<br>
â€œABCDâ€ çš„å‰é¢æ˜¯å­—ç¬¦ä¸²ABCï¼Œå‰ç¼€ä¸º [A, AB]ï¼Œåç¼€ä¸º [BC, C]ï¼Œå…±æœ‰å…ƒç´ çš„é•¿åº¦ä¸º0ï¼›<br>
â€œABCDAâ€ çš„å‰é¢æ˜¯å­—ç¬¦ä¸²ABCDï¼Œå‰ç¼€ä¸º [A, AB, ABC]ï¼Œåç¼€ä¸º [BCD, CD, D]ï¼Œå…±æœ‰å…ƒç´ çš„é•¿åº¦ä¸º0ï¼›<br>
â€œABCDABâ€ çš„å‰é¢æ˜¯å­—ç¬¦ä¸²ABCDAï¼Œå‰ç¼€ä¸º [A, AB, ABC, ABCD]ï¼Œåç¼€ä¸º [BCDA, CDA, DA, A]ï¼Œå…±æœ‰å…ƒç´ ä¸º â€œAâ€ï¼Œé•¿åº¦ä¸º1ï¼›<br>
â€œABCDABDâ€ çš„å‰é¢æ˜¯å­—ç¬¦ä¸²ABCDABï¼Œå‰ç¼€ä¸º [A, AB, ABC, ABCD, ABCDA]ï¼Œåç¼€ä¸º [BCDAB, CDAB, DAB, AB, B]ï¼Œå…±æœ‰å…ƒç´ ä¸º â€œABâ€ï¼Œé•¿åº¦ä¸º2ï¼›</p>
</li>
</ul>
<blockquote>
<p>next[0]=0ï¼Œç»§ç»­åµŒå¥—è¿˜æ˜¯next[0],æ‰€ä»¥å°†next[0]=-1ï¼›</p>
</blockquote>
<p>lpsæ•°ç»„ä¸ºï¼š[0,0,0,1,2,0]<br>
nextæ•°ç»„ä¸º: [-1,0,0,0,1,2]<br>
lpsæ•°ç»„ -&gt; nextæ•°ç»„: LPSæ•°ç»„æ•´ä½“å³ç§»ä¸€ä½, lps[0] = -1å³å¯</p>
<blockquote>
<p>æ³¨ï¼šæœ¬èŠ‚æ„å»ºæ•°ç»„çš„æ–¹æ³•æ˜¯åŸºäºä»£ç ç¬¬ä¸€ä¸ªå…ƒç´ ä¸‹æ ‡ä»0å¼€å§‹çš„ è€ƒè¯•è§£é¢˜ä»1å¼€å§‹çš„ä¸² æ•°ç»„æ¯ä¸ªå…ƒç´ +1å³å¯</p>
</blockquote>
<h4 id="nextvalæ•°ç»„-æ”¹è¿›åŸç†-next-nextval-kmpç®—æ³•çš„æ”¹è‰¯ç†è§£"><a class="header-anchor" href="#nextvalæ•°ç»„-æ”¹è¿›åŸç†-next-nextval-kmpç®—æ³•çš„æ”¹è‰¯ç†è§£">ğŸŒ³</a>nextvalæ•°ç»„ æ”¹è¿›åŸç† <a href="https://zhuanlan.zhihu.com/p/28815377037">next-&gt;nextvalï¼Œkmpç®—æ³•çš„æ”¹è‰¯ç†è§£</a></h4>
<blockquote>
<p>æ ¸å¿ƒæ€æƒ³ï¼šè‹¥è·³è½¬åçš„å­—ç¬¦ä¸åŸå­—ç¬¦ç›¸åŒï¼Œåˆ™ç»§ç»­å‘å‰è·³è½¬</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> pattern[i] == pattern[next[i]]:</span><br><span class="line">     nextval[i] = nextval[next[i]]  # é€’å½’å‘å‰æŸ¥æ‰¾ </span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">     nextval[i] = next[i]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:center">ç´¢å¼•</th>
<th style="text-align:center">å­—ç¬¦</th>
<th style="text-align:center">nextæ•°ç»„ï¼ˆæ–¹æ³•1ï¼‰</th>
<th style="text-align:center">nextvalè®¡ç®—é€»è¾‘</th>
<th style="text-align:center">nextvalå€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">A</td>
<td style="text-align:center">-1</td>
<td style="text-align:center">åˆå§‹å€¼</td>
<td style="text-align:center">-1</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">B</td>
<td style="text-align:center">0</td>
<td style="text-align:center">B â‰  A â†’ ä¿ç•™nextå€¼</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">A</td>
<td style="text-align:center">0</td>
<td style="text-align:center">A == A â†’ å–nextval[0]</td>
<td style="text-align:center">-1</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">B</td>
<td style="text-align:center">1</td>
<td style="text-align:center">B == B â†’ å–nextval[1]</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
<p>æœ€ç»ˆnextvalæ•°ç»„ï¼š[-1,0,-1,0]</p>
<h5 id="ä¼˜åŒ–æ•ˆæœå¯¹æ¯”"><a class="header-anchor" href="#ä¼˜åŒ–æ•ˆæœå¯¹æ¯”">ğŸŒ³</a>ä¼˜åŒ–æ•ˆæœå¯¹æ¯”</h5>
<ul>
<li>åŸnextè·³è½¬è·¯å¾„ï¼š3 â†’ 1 â†’ 0 â†’ -1ï¼ˆéœ€è¦3æ¬¡è·³è½¬ï¼‰</li>
<li>nextvalè·³è½¬è·¯å¾„ï¼š3 â†’ 0 â†’ -1ï¼ˆä»…éœ€2æ¬¡è·³è½¬ï¼‰</li>
</ul>
<h4 id="lpsæ•°ç»„kmpå‡½æ•°-vs-nextæ•°ç»„kmpå‡½æ•°-whileå¾ªç¯çš„åŒºåˆ«"><a class="header-anchor" href="#lpsæ•°ç»„kmpå‡½æ•°-vs-nextæ•°ç»„kmpå‡½æ•°-whileå¾ªç¯çš„åŒºåˆ«">ğŸŒ³</a>lpsæ•°ç»„kmpå‡½æ•° vs nextæ•°ç»„KMPå‡½æ•° whileå¾ªç¯çš„åŒºåˆ«</h4>
<ul>
<li><a href="%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0/SubstringSearch.java">lpsæ•°ç»„kmpå‡½æ•°whileå¾ªç¯</a></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span>(i &lt; text.length &amp;&amp; j &lt; pattern.length)&#123;</span><br><span class="line">    <span class="keyword">if</span>(text[i] == pattern[j])&#123;</span><br><span class="line">        i++;</span><br><span class="line">        j++;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(j!=<span class="number">0</span>)&#123;</span><br><span class="line">            j = lps[j-<span class="number">1</span>];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0/KMP.cs">nextæ•°ç»„KMPå‡½æ•°whileå¾ªç¯</a></li>
</ul>
<figure class="highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span>(i &lt; s.Length &amp;&amp; j &lt; p.Length)&#123;</span><br><span class="line">    <span class="keyword">if</span>(j == <span class="number">-1</span> || s[i] == p[j])&#123;</span><br><span class="line">        i ++;</span><br><span class="line">        j ++;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        j = next[j];  <span class="comment">// æ ¹æ®nextæ•°ç»„çš„æŒ‡å¼•å¯¹pè¿›è¡Œå›æº¯</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="todo"><a class="header-anchor" href="#todo">ğŸŒ³</a>todo</h4>
<ul>
<li>ACM kmp æ±‚borderæ•°ç»„ ã€Šæ­Œå”±ç‹å›½ã€‹</li>
<li>sundayå’Œbm</li>
<li>Ahoâ€“Corasick è‡ªåŠ¨æœºæ˜¯æŒ‡ä¸€ç§å¤šæ¨¡å¼å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼Œå®ƒç»“åˆäº†Trieæ ‘çš„å‰ç¼€åŒ¹é…èƒ½åŠ›å’ŒKMPç®—æ³•çš„å¤±è´¥è·³è½¬æ€æƒ³ï¼Œèƒ½å¤Ÿåœ¨å•æ¬¡æ–‡æœ¬æ‰«æä¸­é«˜æ•ˆåŒ¹é…å¤šä¸ªæ¨¡å¼ä¸²</li>
<li>åˆ˜æ±ä½³çš„ã€Šç®—æ³•ç«èµ›å…¥é—¨ç»å…¸ï¼ˆè®­ç»ƒæŒ‡å—ï¼‰ã€‹</li>
</ul>
<h2 id="å®ç”¨ç®—æ³•"><a class="header-anchor" href="#å®ç”¨ç®—æ³•">ğŸŒ³</a>å®ç”¨ç®—æ³•</h2>
<ul>
<li><a href="https://itindex.net/detail/7746-%E7%BC%93%E5%AD%98-%E7%AE%97%E6%B3%95">ç¼“å­˜ç®—æ³•</a></li>
<li><a href="https://feihu.me/blog/2014/sgi-std-sort/">çŸ¥æ— æ¶¯ä¹‹std::sortæºç å‰–æ</a></li>
<li><a href="https://dirtysalt.github.io/html/programming-pearls.html">ç¼–ç¨‹ç ç‘(The Programming Pearls)</a></li>
</ul>
<h2 id="endnotes"><a class="header-anchor" href="#endnotes">ğŸŒ³</a>Endnotes</h2>
<p>[^1]: Here is the footnote.<br>
[^longnote]: Hereâ€™s one with multiple blocks.</p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºç§‘å­¦</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>æ²¹çŒ´è„šæœ¬</title>
    <url>/2024/06/20/%E6%B2%B9%E7%8C%B4%E8%84%9A%E6%9C%AC/</url>
    <content><![CDATA[<h1>æ–—é±¼å¼€æ’­æé†’</h1>
<h2 id="ğŸŒä½¿ç”¨æ–¹æ³•"><a class="header-anchor" href="#ğŸŒä½¿ç”¨æ–¹æ³•">ğŸŒ³</a>ğŸŒä½¿ç”¨æ–¹æ³•</h2>
<ul>
<li>æ‰“å¼€<a href="https://www.douyu.com/directory/myFollow"><code>æ–—é±¼å…³æ³¨é¡µé¢</code></a>(<a href="https://www.douyu.com/directory/myFollow">https://www.douyu.com/directory/myFollow</a>)</li>
<li>å¹¶æ”¾ç½®åœ¨åå° æœ‰ä¸»æ’­å¼€æ’­/æ›´æ”¹æ ‡é¢˜æ—¶è‡ªåŠ¨å‘é€é€šçŸ¥æé†’</li>
</ul>
<h2 id="ğŸ’¼plusåŠŸèƒ½"><a class="header-anchor" href="#ğŸ’¼plusåŠŸèƒ½">ğŸŒ³</a>ğŸ’¼PlusåŠŸèƒ½</h2>
<ul>
<li>[x] ä¸‹æ’­æé†’</li>
<li>[x] æ¯æ¬¡æé†’é‡æ–°åˆ·æ–° <code>å…³æ³¨é¡µé¢</code></li>
<li>[x] æœ€è¿‘10æ¡å†å²é€šçŸ¥ å¼¹çª—æŸ¥çœ‹</li>
<li>[x] å½©è™¹æ—‹è½¬è¾¹æ¡†ç¯ç»•å¸¦ç‰Œå­ç›´æ’­é—´<br>
<img src="https://zirpon.github.io/2024/06/20/%E6%B2%B9%E7%8C%B4%E8%84%9A%E6%9C%AC/PixPin_2024-09-03_20-11-26.gif" alt="å½©è™¹æ—‹è½¬è¾¹æ¡†"></li>
<li>[x] <code>è§†é¢‘è½®æ’­</code> å•å…ƒæ ¼çª—å£ ç½®ç° ï¼ˆé¼ æ ‡ç§»è‡³è§†é¢‘è½®æ’­å•å…ƒæ ¼ä»ç„¶å¯ä»¥é¢„è§ˆè§†é¢‘è½®æ’­å†…å®¹ï¼‰<br>
<img src="https://zirpon.github.io/2024/06/20/%E6%B2%B9%E7%8C%B4%E8%84%9A%E6%9C%AC/PixPin_2024-09-03_20-29-31.gif" alt="ç½®ç°è§†é¢‘è½®æ’­"></li>
<li>[x] ç²¤è¯­/å›½è¯­ è¯­éŸ³æ’­æŠ¥ <code>æ”¹æ ‡é¢˜/ä¸‹æ’­/å¼€æ’­</code> æé†’<br>
<img src="https://image-static.segmentfault.com/995/584/9955847-62a9b4b214bea_fix732" alt="è¯­éŸ³åˆ—è¡¨"></li>
</ul>
<h2 id="ğŸš€ç‰ˆæœ¬æ›´æ–°"><a class="header-anchor" href="#ğŸš€ç‰ˆæœ¬æ›´æ–°">ğŸŒ³</a>ğŸš€ç‰ˆæœ¬æ›´æ–°</h2>
<blockquote>
<p>3.4.10</p>
</blockquote>
<ul>
<li>[x] å…³é—­å†å²é€šçŸ¥ ä¸å†å¼¹çª—æç¤ºåˆ·æ–°ç½‘é¡µ</li>
<li>[x] æŠŠ <strong><code>æˆ‘çš„å…³æ³¨</code></strong> é‡Œ <em><strong><code>è§†é¢‘è½®æ’­</code></strong></em> çš„å•å…ƒæ ¼ç½®ç°</li>
<li>[x] å¢åŠ ä¸»é¡µ/æ›´æ–°æŒ‰é’®</li>
<li>[x] å¼€æ’­ä¸‹æ’­å†å²é€šçŸ¥é€†æ—¶æ’åº å…ˆçœ‹æœ€è¿‘çš„</li>
<li>[x] åªä¿ç•™æœ€è¿‘10æ¡å†å²é€šçŸ¥</li>
</ul>
<blockquote>
<p>3.3.6</p>
</blockquote>
<ul>
<li>[x] å…³é—­ç³»ç»Ÿé€šçŸ¥æ—¶ ç”¨é¡µé¢å¸¸é©»å¼¹çª—é€šçŸ¥</li>
</ul>
<blockquote>
<p>3.3.5</p>
</blockquote>
<ul>
<li>[x] 3.3.5 æ²¹çŒ´è„šæœ¬å·¥ç¨‹åŒ–é¡¹ç›® ç‰ˆæœ¬æ›´æ–°</li>
</ul>
<blockquote>
<p>3.3.4</p>
</blockquote>
<ul>
<li>[x] å¢åŠ é€šçŸ¥æé†’å¼€å…³æŒ‰é’®</li>
</ul>
<blockquote>
<p>3.3.3</p>
</blockquote>
<ul>
<li>[x] å¢åŠ è¯­éŸ³æ’­æŠ¥å¼€å…³æŒ‰é’®</li>
</ul>
<blockquote>
<p>3.3.2</p>
</blockquote>
<ul>
<li>[x] å…³é—­è®¾ç½®ç•Œé¢ä¸å†åˆ·æ–° å…³æ³¨é¡µé¢ è€Œæ˜¯è¯­éŸ³æ’­æŠ¥è®¾ç½®ä¿®æ”¹å†…</li>
</ul>
<blockquote>
<p>3.2</p>
</blockquote>
<ul>
<li>[x] å¢åŠ è®¾ç½®ç•Œé¢ æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨</li>
</ul>
<h2 id="ğŸ™è‡´è°¢"><a class="header-anchor" href="#ğŸ™è‡´è°¢">ğŸŒ³</a>ğŸ™è‡´è°¢</h2>
<blockquote>
<p>æ­¤ <a href="https://greasyfork.org/zh-CN/scripts/498616-douyu%E6%96%97%E9%B1%BC-%E4%B8%BB%E6%92%AD%E5%BC%80%E6%92%AD%E4%B8%8B%E6%92%AD%E6%8F%90%E9%86%92-%E7%B2%A4%E8%AF%AD-%E5%9B%BD%E8%AF%AD%E8%AF%AD%E9%9F%B3%E6%92%AD%E6%8A%A5%E9%80%9A%E7%9F%A5">Script</a> ç»§æ‰¿äº† @P- çš„ <a href="https://greasyfork.org/zh-CN/scripts/378317-douyu-%E6%96%97%E9%B1%BC%E5%BC%80%E6%92%AD%E6%8F%90%E9%86%92">åŸè„šæœ¬</a> åœ¨æ­¤æ„Ÿè°¢ <a href="https://greasyfork.org/zh-CN/users/250428-p">@P-</a> çš„å¼€å‘å·¥ä½œã€‚</p>
</blockquote>
<h2 id="ğŸŠæºç "><a class="header-anchor" href="#ğŸŠæºç ">ğŸŒ³</a>ğŸŠæºç </h2>
<p><a href="https://raw.githubusercontent.com/Zirpon/zirpon.github.io/master/source/src/douyu_followpage.js">æºç </a></p>
<figure class="highlight js"><figcaption><span>æ²¹çŒ´è„šæœ¬</span><a href="https://raw.githubusercontent.com/Zirpon/zirpon.github.io/master/source/src/douyu_followpage.js">douyu_followpageæºç </a></figcaption><table><tr><td class="code"><pre><span class="line marked"><span class="keyword">function</span> <span class="title function_">speak</span>(<span class="params"></span></span><br><span class="line"><span class="params">    &#123; text, speechRate, lang, volume, pitch &#125;,</span></span><br><span class="line"><span class="params">    endEvent,</span></span><br><span class="line marked"><span class="params">    startEvent</span></span><br><span class="line marked"><span class="params"></span>) &#123;</span><br><span class="line marked">    <span class="keyword">if</span> (!<span class="variable language_">window</span>.<span class="property">SpeechSynthesisUtterance</span>) &#123;</span><br><span class="line marked">        <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&quot;å½“å‰æµè§ˆå™¨ä¸æ”¯æŒæ–‡å­—è½¬è¯­éŸ³æœåŠ¡&quot;</span>);</span><br><span class="line marked">        <span class="keyword">return</span>;</span><br><span class="line marked">    &#125;</span><br><span class="line marked"></span><br><span class="line marked">    <span class="keyword">if</span> (!text) &#123;</span><br><span class="line marked">        <span class="keyword">return</span>;</span><br><span class="line marked">    &#125;</span><br><span class="line marked">    <span class="keyword">let</span> onoff = <span class="title function_">GM_getValue</span>(<span class="string">&quot;switchVoice&quot;</span>, <span class="literal">true</span>);</span><br><span class="line marked">    <span class="keyword">if</span> (onoff != <span class="literal">true</span>) &#123;</span><br><span class="line marked">        <span class="keyword">return</span>;</span><br><span class="line marked">    &#125;</span><br><span class="line marked"></span><br><span class="line marked">    <span class="keyword">let</span> setlang = <span class="title function_">GM_getValue</span>(<span class="string">&quot;LANG&quot;</span>, <span class="string">&quot;zh-CN&quot;</span>);</span><br><span class="line marked">    <span class="keyword">let</span> setrate = <span class="title function_">GM_getValue</span>(<span class="string">&quot;RATE&quot;</span>, <span class="number">1</span>);</span><br><span class="line marked">    <span class="keyword">const</span> speechUtterance = <span class="keyword">new</span> <span class="title class_">SpeechSynthesisUtterance</span>();</span><br><span class="line marked">    speechUtterance.<span class="property">text</span> = text;</span><br><span class="line marked">    speechUtterance.<span class="property">rate</span> = speechRate || setrate;</span><br><span class="line marked">    speechUtterance.<span class="property">lang</span> = lang || setlang;</span><br><span class="line marked">    speechUtterance.<span class="property">volume</span> = volume || <span class="number">1</span>;</span><br><span class="line marked">    speechUtterance.<span class="property">pitch</span> = pitch || <span class="number">1</span>;</span><br><span class="line marked">    speechUtterance.<span class="property">onend</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line marked">        endEvent &amp;&amp; <span class="title function_">endEvent</span>();</span><br><span class="line marked">    &#125;;</span><br><span class="line marked">    speechUtterance.<span class="property">onstart</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line marked">        startEvent &amp;&amp; <span class="title function_">startEvent</span>();</span><br><span class="line marked">    &#125;;</span><br><span class="line marked">    <span class="keyword">var</span> timeFun = <span class="variable language_">window</span>.<span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line marked">        <span class="variable language_">window</span>.<span class="built_in">clearInterval</span>(timeFun);</span><br><span class="line marked">        speechSynthesis.<span class="title function_">speak</span>(speechUtterance);</span><br><span class="line marked">    &#125;, <span class="number">500</span>);</span><br><span class="line marked"></span><br><span class="line marked">    <span class="keyword">return</span> speechUtterance;</span><br><span class="line marked">&#125;</span><br></pre></td></tr></table></figure>
<p>Here is a footnote reference,[^1] and another.[^longnote]</p>
<h2 id="endnotes"><a class="header-anchor" href="#endnotes">ğŸŒ³</a>Endnotes</h2>
<p>[^1]: Here is the footnote.<br>
[^longnote]: Hereâ€™s one with multiple blocks.</p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºç§‘å­¦</category>
      </categories>
      <tags>
        <tag>æ²¹çŒ´</tag>
        <tag>æ–—é±¼</tag>
        <tag>Tampermonkey</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>æ²¹çŒ´è„šæœ¬å­¦ä¹ ç¬”è®°</title>
    <url>/2024/07/09/%E6%B2%B9%E7%8C%B4%E8%84%9A%E6%9C%AC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h1>æ²¹çŒ´è„šæœ¬å­¦ä¹ ç¬”è®°</h1>
<h2 id="åŸºç¡€èµ„æ–™"><a class="header-anchor" href="#åŸºç¡€èµ„æ–™">ğŸŒ³</a>åŸºç¡€èµ„æ–™</h2>
<p><a href="https://bbs.tampermonkey.net.cn/forum.php?mod=viewthread&amp;tid=1909" title="website title">Tampermonkeyä¸­æ–‡æ–‡æ¡£</a><br>
<a href="https://semver.org/lang/zh-CN/">ä¸–ç•Œé€šç”¨ç‰ˆæœ¬å·è§„åˆ™</a><br>
<a href="https://bbs.tampermonkey.net.cn/forum.php?mod=viewthread&amp;tid=271">Tampermonkeyèœå•</a><br>
<a href="https://iknow.fun/2022/08/03/vscode-webpack-typescript-you-hou-kai-fa-huan-jing-da-jian-ben-di-diao-shi-shi-shi-re-shua-xin-zi-dong-gou-jian-he-fa-bu/" title="æ²¹çŒ´è„šæœ¬å¼€å‘è¿›é˜¶ã€‘VSCode + Webpack + TypeScript æ²¹çŒ´å¼€å‘ç¯å¢ƒæ­å»ºï¼Œæœ¬åœ°è°ƒè¯•ã€å®æ—¶çƒ­åˆ·æ–°ã€è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒ">æ²¹çŒ´è„šæœ¬å¼€å‘è¿›é˜¶ VSCode + Webpack + TypeScript æ²¹çŒ´å¼€å‘ç¯å¢ƒæ­å»ºï¼Œæœ¬åœ°è°ƒè¯•ã€å®æ—¶çƒ­åˆ·æ–°ã€è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒ</a><br>
<a href="https://iknow.fun/2022/08/01/webpack-typescript-kai-fa-you-hou-jiao-ben-dou-yu-zhi-bo-zi-dong-qie-huan-hua-zhi-2-0/">Webpack é…ç½®çš„æ”¹è¿›</a><br>
<a href="https://blog.csdn.net/weixin_45047039/article/details/110262176" title="webpackä½¿ç”¨html-loaderåŠ è½½jsä¸­å¼•å…¥çš„htmlèµ„æº">webpackä½¿ç”¨html-loaderåŠ è½½jsä¸­å¼•å…¥çš„htmlèµ„æº</a></p>
<h2 id="æ²¹çŒ´webpackè„šæ‰‹æ¶æ¡†æ¶ä»‹ç»"><a class="header-anchor" href="#æ²¹çŒ´webpackè„šæ‰‹æ¶æ¡†æ¶ä»‹ç»">ğŸŒ³</a><a href="https://iknow.fun/2022/08/03/vscode-webpack-typescript-you-hou-kai-fa-huan-jing-da-jian-ben-di-diao-shi-shi-shi-re-shua-xin-zi-dong-gou-jian-he-fa-bu/" title="æ²¹çŒ´è„šæœ¬å¼€å‘è¿›é˜¶ã€‘VSCode + Webpack + TypeScript æ²¹çŒ´å¼€å‘ç¯å¢ƒæ­å»ºï¼Œæœ¬åœ°è°ƒè¯•ã€å®æ—¶çƒ­åˆ·æ–°ã€è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒ">æ²¹çŒ´webpackè„šæ‰‹æ¶</a>æ¡†æ¶ä»‹ç»</h2>
<h3 id="é¡¹ç›®ç»“æ„"><a class="header-anchor" href="#é¡¹ç›®ç»“æ„">ğŸŒ³</a>é¡¹ç›®ç»“æ„</h3>
<p><img src="/2024/07/09/%E6%B2%B9%E7%8C%B4%E8%84%9A%E6%9C%AC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/QQ_1720489834153.png" alt></p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">â”‚</span><br><span class="line">â”‚â”€package.json</span><br><span class="line">â”‚   (- yarn start/dev/build è‡ªå®šä¹‰å‘½ä»¤ </span><br><span class="line">â”‚       å»ºè®®å‚ç…§ yarn build è‡ªå®šä¹‰å¢åŠ ç¼–è¯‘ douyu.dev.user.js çš„å‘½ä»¤ å¦‚: yarn builddev </span><br><span class="line">â”‚        æ³¨æ„ï¼šè‡ªå®šä¹‰å‚æ•°ä¸èƒ½æœ‰ç©ºæ ¼</span><br><span class="line">â”‚   - é¡¹ç›®åå­— ç‰ˆæœ¬ æè¿° ä½œè€… ä¸»é¡µ å¼€æºåè®® ä¾èµ– è„šæœ¬</span><br><span class="line">â”‚   )</span><br><span class="line">â”œâ”€config</span><br><span class="line">â”‚      common.meta.json</span><br><span class="line">â”‚        (ç”Ÿäº§ç¯å¢ƒæ²¹çŒ´è„šæœ¬bannerå…ƒæ•°æ® jsonæ–‡ä»¶)</span><br><span class="line">â”‚      dev.meta.json</span><br><span class="line">â”‚        (è°ƒè¯•ç¯å¢ƒæ²¹çŒ´è„šæœ¬bannerå…ƒæ•°æ® jsonæ–‡ä»¶ &quot;require&quot;é”®å¯¹åº”çš„ä¿®æ”¹ä¸ºæœ¬åœ°æ–‡ä»¶ douyu.dev.user.js çš„è·¯å¾„) </span><br><span class="line">â”‚      webpack.config.base.js</span><br><span class="line">â”‚        (webpacké¡¹ç›®åŸºç¡€é…ç½®)   </span><br><span class="line">â”‚      webpack.dev.js</span><br><span class="line">â”‚        (webpacké¡¹ç›®å¼€å‘ç¯å¢ƒ ç”Ÿæˆç›®æ ‡æ–‡ä»¶çš„é…ç½®)</span><br><span class="line">â”‚      webpack.prod.js</span><br><span class="line">â”‚        (webpacké¡¹ç›®ç”Ÿäº§ç¯å¢ƒ ç”Ÿæˆç›®æ ‡æ–‡ä»¶çš„é…ç½®)</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€dist</span><br><span class="line">â”‚      douyu.user.js</span><br><span class="line">â”‚        (yarn build ç”Ÿæˆçš„è„šæœ¬ ç”Ÿäº§ç¯å¢ƒè„šæœ¬)</span><br><span class="line">â”‚      douyu.dev.user.js</span><br><span class="line">â”‚        (yarn start è·Ÿ yarn dev ç”Ÿæˆçš„è„šæœ¬ å¼€å‘ç¯å¢ƒè„šæœ¬)</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€public</span><br><span class="line">â”‚      index.html</span><br><span class="line">â”‚        (æœ¬åœ°è°ƒè¯•ç›®æ ‡é¡µé¢ æ‰§è¡Œ yarn start å¯åŠ¨é¡µé¢)</span><br><span class="line">â”‚</span><br><span class="line">â””â”€src</span><br><span class="line">    â”‚  app.ts</span><br><span class="line">    â”‚    (æ²¹çŒ´è„šæœ¬æºç å…¥å£)</span><br><span class="line">    â”‚  devTools.ts</span><br><span class="line">    â”‚   (æ¡†æ¶è°ƒè¯•å·¥å…·æ¥å£)</span><br><span class="line">    â”‚  global.d.ts</span><br><span class="line">    â”‚  index.ts</span><br><span class="line">    â”‚   (é¡¹ç›®å…¥å£æ–‡ä»¶)</span><br><span class="line">    â”œâ”€lib</span><br><span class="line">    â”‚      ajax.ts</span><br><span class="line">    â”‚      message.ts</span><br><span class="line">    â””â”€mock</span><br><span class="line">            douyu.less</span><br><span class="line">            douyuPlayer.ts</span><br><span class="line">            (æœ¬åœ°è°ƒè¯•ç›®æ ‡é¡µé¢ tséƒ¨åˆ†)</span><br></pre></td></tr></table></figure>
<h3 id="é¡¹ç›®åˆå§‹åŒ–"><a class="header-anchor" href="#é¡¹ç›®åˆå§‹åŒ–">ğŸŒ³</a>é¡¹ç›®åˆå§‹åŒ–</h3>
<ul>
<li>
<p>yarn install å®‰è£…ä¾èµ–</p>
</li>
<li>
<p>æ‰§è¡Œ yarn start æˆ–è€… yarn dev æˆ–è€… (è‡ªå®šä¹‰çš„)yarn builddev ç›®çš„æ˜¯ç¼–è¯‘ç”Ÿæˆ douyu.dev.user.js</p>
</li>
<li>
<p>å¦‚æœè¿è¡Œ yarn start<br>
é¡¹ç›® <code>devTools.ts</code> çš„å‡½æ•° <code>autoInstall</code> æ–‡ä»¶ä¼š å¼¹å‡ºæ²¹çŒ´è„šæœ¬å®‰è£…ç½‘é¡µæç¤ºå®‰è£…è„šæœ¬ å®‰è£…è„šæœ¬æˆåŠŸå<br>
ä¿®æ”¹ è„šæœ¬å†…å®¹ å°±æ˜¯ä½ ç£ç›˜æ–‡ä»¶ <code>douyu.dev.user.js</code> çš„è·¯å¾„<br>
<code>// @require    file://D://xxxxx//dist//douyu.dev.user.js</code></p>
</li>
<li>
<p>å¦‚æœä½ æ²¡å®‰è£…è„šæœ¬ åˆ™æ‰‹åŠ¨ æ‰“å¼€æ²¹çŒ´è„šæœ¬æ§åˆ¶é¢æ¿ æ–°å»ºç©ºç™½è„šæœ¬ ç„¶å æŠŠ ç”Ÿæˆçš„ <code>douyu.dev.user.js</code> çš„ <code>banner</code> æ‹·è´åˆ°æ²¹çŒ´é¢æ¿ç©ºç™½è„šæœ¬å½“ä¸­<br>
ç‰¹åˆ«æ³¨æ„ ä¸è¦æ‹·è´æ•´ä¸ªæ–‡ä»¶å†…å®¹ åªéœ€è¦æ‹·è´ <code>banner</code> éƒ¨åˆ† å¦‚ä¸‹æ ¼å¼ ä¸ç„¶ ä¸‹æ¬¡å†æ¬¡è¿è¡Œ <code>yarn start</code> çš„æ—¶å€™ ä¼šç–¯ç‹‚åˆ·æ–°è°ƒè¯•é¡µé¢</p>
  <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ==UserScript== </span></span><br><span class="line">Â·Â·Â· </span><br><span class="line"><span class="comment">// ==/UserScript==</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä¿®æ”¹ <code>config/dev.meta.json</code> æ–‡ä»¶ requireé”®å¯¹åº”çš„æœ¬åœ°æ–‡ä»¶ douyu.dev.user.js çš„è·¯å¾„</p>
</li>
<li>
<p>è‡³æ­¤ é¡¹ç›®åŸºæœ¬è¿è¡Œè°ƒè¯•æ˜¯æ²¡é—®é¢˜äº† æ¥ä¸‹æ¥å°±æ˜¯ä¿®æ”¹ é¡¹ç›®ä¿¡æ¯</p>
</li>
<li>
<p>å…·ä½“éœ€è¦ç¼–è¾‘çš„ æ–‡ä»¶ å°±æ˜¯ <code>common.meta.json</code> <code>dev.meta.json</code> <code>package.json</code></p>
</li>
</ul>
<h3 id="ç¼–ç æ³¨æ„äº‹é¡¹"><a class="header-anchor" href="#ç¼–ç æ³¨æ„äº‹é¡¹">ğŸŒ³</a>ç¼–ç æ³¨æ„äº‹é¡¹</h3>
<ul>
<li>index.js æ˜¯é¡¹ç›®å…¥å£
<ul>
<li>é¡¹ç›®è°ƒè¯•é¡µé¢ä»£ç  åœ¨äº <code>mock</code> æ–‡ä»¶å¤¹çš„çš„æºæ–‡ä»¶ å¯éšæ„ä¿®æ”¹å®šåˆ¶</li>
<li>é¡¹ç›®æ²¹çŒ´ å…¥å£åœ¨äº <code>app.ts</code></li>
<li><code>index.ts</code> æ˜¯é€šè¿‡ <code>import app</code> <code>app()</code> è¿›å…¥æ²¹çŒ´æºç å…¥å£çš„</li>
<li>æ‰€ä»¥ä¸€åˆ‡çš„é€»è¾‘ä»£ç  éƒ½å¿…é¡»ç¼–è¾‘åœ¨ <code>app.ts</code> çš„ <code>const app = () =&gt; &#123;&#125;;</code> ä¸­</li>
<li>æ¯”å¦‚ <code>GM_registerMenuCommand('test', () =&gt; console.log('test'));</code><br>
<code>GM_registerMenuCommand</code> åªèƒ½åœ¨ <code>const app = () =&gt; &#123;&#125;;</code> ä¸­è§£æè°ƒç”¨<br>
å¦åˆ™ æ— æ³•è¯†åˆ« <code>GM_registerMenuCommand</code> å‡½æ•°</li>
</ul>
</li>
<li>èœå•æ  å°‘é‡HTMLæ ‡ç­¾å…ƒç´  å¯¼å…¥
<ul>
<li>ä¾èµ– <code>core-js</code> <code>html-loader</code>  <figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">npm install <span class="literal">--safe-dev</span> core<span class="literal">-js</span></span><br><span class="line">npm install <span class="literal">--safe-dev</span> html<span class="literal">-loader</span></span><br><span class="line"></span><br><span class="line">æˆ–è€…</span><br><span class="line"></span><br><span class="line">yarn add core<span class="literal">-js</span> <span class="literal">--dev</span></span><br><span class="line">yarn add html<span class="literal">-loader</span> <span class="literal">--dev</span></span><br></pre></td></tr></table></figure>
</li>
<li>é…ç½®æ–‡ä»¶ <code>webpack.config.base.js</code></li>
</ul>
  <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">  &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.html$/i</span>,</span><br><span class="line">      <span class="attr">use</span>: &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&#x27;html-loader&#x27;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">          <span class="attr">sources</span>: &#123;</span><br><span class="line">          <span class="attr">list</span>: [</span><br><span class="line">              <span class="string">&#x27;...&#x27;</span>, <span class="comment">// æ‰€æœ‰é»˜è®¤æ”¯æŒçš„æ ‡ç­¾å’Œå±æ€§ï¼Œè¿™ä¸ªä¸€å®šè¦åŠ ä¸Šï¼Œä¸ç„¶å°±åªä¼šæ£€æµ‹aæ ‡ç­¾äº†</span></span><br><span class="line">              &#123;</span><br><span class="line">              <span class="attr">tag</span>: <span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">              <span class="attr">attribute</span>: <span class="string">&#x27;href&#x27;</span>,</span><br><span class="line">              <span class="attr">tags</span>: <span class="string">&#x27;src&#x27;</span>,</span><br><span class="line">              &#125;,</span><br><span class="line">          ],</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">minimize</span>: <span class="literal">true</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">  &#125;,]&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>é€»è¾‘ä»£ç </li>
</ul>
  <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å…¶ä¸­ import å‡ºæ¥çš„ menu æ˜¯å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">import</span> menu <span class="keyword">from</span> <span class="string">&#x27;./menu.html&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> menuWrapper = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;menuWrapper&#x27;</span>);</span><br><span class="line">menuWrapper.<span class="property">innerHTML</span> = menu;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>Here is a footnote reference,[^1] and another.[^longnote]</p>
<h3 id="è°ƒè¯•ç¼–è¯‘æ‰“åŒ…æŒ‡ä»¤"><a class="header-anchor" href="#è°ƒè¯•ç¼–è¯‘æ‰“åŒ…æŒ‡ä»¤">ğŸŒ³</a>è°ƒè¯•ç¼–è¯‘æ‰“åŒ…æŒ‡ä»¤</h3>
<ul>
<li><code>package.json</code> å¯è‡ªè¡Œå®šä¹‰</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack serve --config ./config/webpack.dev.js --env filename=douyu.dev.user.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack --watch --config ./config/webpack.dev.js --env filename=douyu.dev.user.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn lint:fix &amp;&amp; webpack --config ./config/webpack.prod.js --env filename=douyu.user.js --stats-error-details&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;builddev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn lint:fix &amp;&amp; webpack --config ./config/webpack.dev.js --env filename=douyu.dev.user.js --stats-error-details&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;lint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint \&quot;src/**/*.&#123;ts,tsx&#125;\&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;lint:fix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn lint --fix&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>
<h2 id="endnotes"><a class="header-anchor" href="#endnotes">ğŸŒ³</a>Endnotes</h2>
<p>[^1]: Here is the footnote.<br>
[^longnote]: Hereâ€™s one with multiple blocks.</p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºç§‘å­¦</category>
      </categories>
      <tags>
        <tag>æ²¹çŒ´</tag>
        <tag>Tampermonkey</tag>
        <tag>JavaScript</tag>
        <tag>webpack</tag>
        <tag>è„šæ‰‹æ¶</tag>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>å‰ªæ˜ </title>
    <url>/2023/01/11/%E8%A7%86%E9%A2%91%E5%89%AA%E8%BE%91%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h1>å‰ªæ˜ </h1>
<ol>
<li>ç‰‡å°¾é¢„è®¡æ—¶é—´</li>
<li>è½¬åœºè¿‡æ¸¡çš„ä½¿ç”¨ ä¼šå½±å“ç‰‡å°¾çš„æ’å…¥æ—¶é—´ å…ˆè°ƒè¯•å¥½è§†é¢‘å‰é¢çš„å„ç§<strong>è½¬åœºç‰¹æ•ˆ</strong> <strong>æ‹¼æ¥</strong> æœ€åå†å¤„ç† ç‰‡å°¾</li>
<li>ç‰‡å°¾è·Ÿè§†é¢‘ å£°éŸ³ å¯ä»¥ä¸€èµ·å¤„ç† éƒ½æ˜¯ç•™åœ¨æœ€å å¤„ç†</li>
<li>è·³èˆè§†é¢‘ è’™å¤ªå¥‡å‰ªè¾‘ å…³é”®åŠ¨ä½œ å‡é€Ÿ æ²¡å¿…è¦åŠ¨ä½œåŠ é€Ÿ æˆ–è€…ä¿æŒåŸé€Ÿ</li>
<li>è’™å¤ªå¥‡å‰ªè¾‘å å¯¹åŸè§†é¢‘çš„ éŸ³é¢‘å¤„ç† å‰ªæ‰ æˆ–è€…æ¢å¤ æˆ–è€… etc.</li>
<li>ç‰¹æ•ˆçš„ä½¿ç”¨ å­¦ä¹ ä¸€ä¸‹ ä»€ä¹ˆåœºæ™¯ ä½¿ç”¨ä»€ä¹ˆç‰¹æ•ˆ æœ€ä¼˜æ•ˆæœ</li>
<li>å‰ªè¾‘è¿‡ç¨‹ä¸­å°±å¯ä»¥é€‰å°é¢</li>
</ol>
]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>å‰ªè¾‘</tag>
        <tag>è§†é¢‘</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸–ç•Œæ–‡å­—ç³»ç»Ÿå­¦ä¹ ï¼šè‹±æ–‡ æ—¥æ–‡ é˜¿æ‹‰ä¼¯æ–‡</title>
    <url>/2024/07/06/%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%EF%BC%9A%E8%8B%B1%E8%AF%AD/</url>
    <content><![CDATA[<h1>ä¸–ç•Œæ–‡å­—ç³»ç»Ÿå­¦ä¹ ï¼šè‹±æ–‡ æ—¥æ–‡ é˜¿æ‹‰ä¼¯æ–‡</h1>
<h2 id="è‹±æ–‡å"><a class="header-anchor" href="#è‹±æ–‡å">ğŸŒ³</a>è‹±æ–‡å</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cheung zipung</span><br><span class="line">cheung zepung</span><br><span class="line">cheung zeepung</span><br><span class="line">cheung zeapung</span><br><span class="line">cheung zeapung</span><br><span class="line">ãƒãƒ£ãƒ³ ã‚¼ãƒ—ãƒ³</span><br><span class="line">ØªØ´ÙŠÙˆÙ†Øº Ø²ÙŠØ¨ÙˆÙ†Øº</span><br></pre></td></tr></table></figure>
<h2 id="è‹±è¯­eçš„å‘éŸ³ï¼š"><a class="header-anchor" href="#è‹±è¯­eçš„å‘éŸ³ï¼š">ğŸŒ³</a>è‹±è¯­eçš„å‘éŸ³ï¼š</h2>
<h3 id="reference"><a class="header-anchor" href="#reference">ğŸŒ³</a>reference</h3>
<ul>
<li>[ ] <a href="https://zhidao.baidu.com/question/505929543901517964.html">e çš„å‘éŸ³ 1</a></li>
<li>[ ] <a href="https://m.hujiang.com/en/p1352385/#:~:text=e%E5%9C%A8%E8%8B%B1%E8%AF%AD%E5%8D%95%E8%AF%8D%E4%B8%AD%E6%9C%89%E5%87%A0%E7%A7%8D%E5%8F%91%E9%9F%B3%20%E4%B9%9D%E7%A7%8D%EF%BC%8C%E5%88%86%E5%88%AB%E4%B8%BA%E2%88%B6%E5%9C%A8%E5%BC%80%E9%9F%B3%E8%8A%82%E4%B8%AD%EF%BC%8C%E5%8F%91%E5%AD%97%E6%AF%8D%E9%9F%B3%EF%BC%8C%E8%AF%BB%E4%BD%9C%E2%88%B6%E3%80%90%E2%88%B6%E3%80%91%3B%E5%9C%A8%E9%97%AD%E9%9F%B3%E8%8A%82%E4%B8%AD%EF%BC%8C%E8%AF%BB%E4%BD%9C%E2%88%B6%20%E3%80%90e%E3%80%91%3B%E5%9C%A8ea%E7%BB%84%E5%90%88%E7%9A%84%E4%B8%AD%EF%BC%8C%E8%AF%BB%E4%BD%9C%E2%88%B6,%E3%80%90i%E3%80%91%EF%BC%8C%E8%BF%98%E5%8F%AF%E4%BB%A5%E8%AF%BB%E4%BD%9C%E2%88%B6%20%E3%80%90e%E3%80%91%E6%88%96%E8%80%85%E3%80%90i%E3%80%91%3B%E5%9C%A8ear%E7%BB%84%E5%90%88%EF%BC%8C%E8%AF%BB%E4%BD%9C%E2%88%B6%20%E3%80%90i%E2%91%A7%E3%80%91%E7%AD%89%E3%80%82" title="æ³¸æ±Ÿè‹±è¯­ï¼šeåœ¨è‹±è¯­å•è¯ä¸­æœ‰å‡ ç§å‘éŸ³">e çš„å‘éŸ³ 2</a></li>
</ul>
<h3 id="å‘éŸ³æœ‰6ç§-åˆ—ä¸¾å¦‚ä¸‹"><a class="header-anchor" href="#å‘éŸ³æœ‰6ç§-åˆ—ä¸¾å¦‚ä¸‹">ğŸŒ³</a>å‘éŸ³æœ‰6ç§ï¼Œåˆ—ä¸¾å¦‚ä¸‹</h3>
<ol>
<li>
<p>åœ¨é‡è¯»å¼€éŸ³èŠ‚ä¸­ï¼Œeä¸€èˆ¬è¯»åš/i:/ã€‚å•è¯ä¸¾ä¾‹ï¼šsheã€theseã€‚/</p>
</li>
<li>
<p>åœ¨é‡è¯»é—­éŸ³èŠ‚ä¸­ï¼Œeä¸€èˆ¬è¯»/e/ã€‚å•è¯ä¸¾ä¾‹ï¼šsetã€bedã€‚</p>
</li>
<li>
<p>åœ¨å•å­—æ¯éé‡è¯»éŸ³èŠ‚ä¸­ï¼Œeä¸€èˆ¬è¯»åš/i:/æˆ–/É™/ã€‚åœ¨é‡è¯»éŸ³èŠ‚å‰çš„éé‡è¯»éŸ³èŠ‚é‡Œï¼Œeä¸€èˆ¬è¯»åš/i/, ä½†ä¸å®Œå…¨æ˜¯è¿™æ ·ã€‚å•è¯ä¸¾ä¾‹ï¼šelevenã€excuseã€‚</p>
</li>
<li>
<p>åœ¨å•å­—æ¯éé‡è¯»éŸ³èŠ‚ä¸­ï¼Œeä¸€èˆ¬è¯»åš/i:/æˆ–//ã€‚åœ¨é‡è¯»éŸ³èŠ‚ä¹‹åçš„éé‡è¯»éŸ³èŠ‚é‡Œï¼Œeä¸€èˆ¬è¯»åš//ï¼Œä½†ä¸å®Œå…¨æ˜¯è¿™æ ·ã€‚å•è¯ä¸¾ä¾‹ï¼šenemyã€studentã€‚</p>
</li>
<li>
<p>åœ¨å•å­—æ¯éé‡è¯»éŸ³èŠ‚ä¸­ï¼Œeä¸€èˆ¬è¯»/i:/æˆ–/É™/ã€‚è¯ç¼€ç»“å°¾å‘/i/æˆ–/É™/ï¼Œä¾‹ï¼šbusinessã€ kindnessã€‚</p>
</li>
<li>
<p>ç›¸å¯¹å¼€éŸ³èŠ‚æœ€åä¸€ä¸ªeä¸å‘éŸ³ï¼Œå•è¯ä¸¾ä¾‹ï¼šbikeï¼Œniceã€‚</p>
</li>
</ol>
<h2 id="éŸ³èŠ‚ä¸éŸ³èŠ‚åˆ’åˆ†çŸ¥è¯†"><a class="header-anchor" href="#éŸ³èŠ‚ä¸éŸ³èŠ‚åˆ’åˆ†çŸ¥è¯†">ğŸŒ³</a>éŸ³èŠ‚ä¸éŸ³èŠ‚åˆ’åˆ†çŸ¥è¯†</h2>
<h3 id="1-éŸ³èŠ‚"><a class="header-anchor" href="#1-éŸ³èŠ‚">ğŸŒ³</a>1. éŸ³èŠ‚</h3>
<p>ä»¥å…ƒéŸ³ä¸ºä¸»ä½“æ„æˆçš„å‘éŸ³å•ä½ï¼Œä¸€èˆ¬è¯´æ¥å…ƒéŸ³å‘éŸ³å“äº®ï¼Œå¯ä»¥æ„æˆéŸ³èŠ‚ï¼Œè¾…éŸ³å‘éŸ³ä¸å“äº®ï¼Œä¸èƒ½å•ç‹¬æ„æˆéŸ³èŠ‚([m] [n] [ ] [l]ä¾‹å¤–)ã€‚<br>
ä»å•è¯æ‹¼å†™å½¢å¼ä¸Šçœ‹ï¼Œæœ‰å‡ ä¸ªå…ƒéŸ³å­—æ¯å°±æœ‰å‡ ä¸ªéŸ³èŠ‚ã€‚</p>
<h3 id="2-éŸ³èŠ‚çš„åˆ’åˆ†"><a class="header-anchor" href="#2-éŸ³èŠ‚çš„åˆ’åˆ†">ğŸŒ³</a>2. éŸ³èŠ‚çš„åˆ’åˆ†</h3>
<ul>
<li>åœ¨é‡è¯»éŸ³èŠ‚å’Œéé‡è¯»éŸ³èŠ‚çš„ç›¸é‚»å¤„æœ‰ä¸¤ä¸ªè¾…éŸ³å­—æ¯æ—¶ï¼Œä¸€ä¸ªè¾…éŸ³å­—æ¯ç»„å±äºå‰é¢çš„éŸ³èŠ‚ï¼Œä¸€ä¸ªå±äºåé¢çš„éŸ³èŠ‚ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼šlet-terï¼Œmem-berï¼Œchil-drenï¼Œdaugh-ter</p>
<ul>
<li>åœ¨é‡è¯»å’Œéé‡è¯»éŸ³èŠ‚çš„ç›¸é‚»å¤„åªæœ‰ä¸€ä¸ªè¾…éŸ³å­—æ¯æ—¶ï¼Œå¦‚æœå‰é¢é‡è¯»éŸ³èŠ‚é‡Œçš„å…ƒéŸ³æ˜¯é•¿éŸ³åˆ™è¾…å­—ç»„å±äºåé¢ä¸€ä¸ªéŸ³èŠ‚ï¼Œå¦‚æœé‡è¯»éŸ³èŠ‚é‡Œçš„å…ƒéŸ³æ˜¯çŸ­éŸ³ï¼Œåˆ™è¾…éŸ³å­—æ¯å±äºé‡è¯»éŸ³èŠ‚ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼šé•¿éŸ³ pa-perï¼Œstu-dentï¼Œfa-therï¼Œze-roï¼Œmo-torï¼Œfar-ther</p>
<p>çŸ­éŸ³ sev-enï¼Œstud-yï¼Œmoth-erï¼Œver-yï¼Œmod-le ï¼Œweath-er</p>
<h3 id="3-é‡è¯»éŸ³èŠ‚"><a class="header-anchor" href="#3-é‡è¯»éŸ³èŠ‚">ğŸŒ³</a>3. é‡è¯»éŸ³èŠ‚</h3>
<p>å•è¯ä¸­è¯»éŸ³ç‰¹åˆ«å“äº®çš„éŸ³èŠ‚ã€‚ç”¨éŸ³æ ‡æ ‡è®°åŒéŸ³èŠ‚ã€å¤šéŸ³èŠ‚è¯çš„è¯»éŸ³æ—¶ï¼Œåº”ä½¿ç”¨é‡è¯»ç¬¦å·ã€‚å•éŸ³èŠ‚è¯å¤šæ•°æ˜¯é‡è¯»éŸ³èŠ‚ï¼Œæ ‡è®°è¯»éŸ³æ—¶ä¸éœ€è¦ä½¿ç”¨é‡è¯»ç¬¦å·ã€‚</p>
<h3 id="4-å¼€éŸ³èŠ‚"><a class="header-anchor" href="#4-å¼€éŸ³èŠ‚">ğŸŒ³</a>4. å¼€éŸ³èŠ‚</h3>
<ul>
<li>ç»å¯¹å¼€éŸ³èŠ‚ï¼šå•ä¸ªå…ƒéŸ³å­—æ¯åé¢æ²¡æœ‰è¾…éŸ³å­—æ¯çš„é‡è¯»éŸ³èŠ‚ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼šnoï¼Œblueï¼Œba-byï¼Œstu-dentï¼Œse-cret</p>
<ul>
<li>ç›¸å¯¹å¼€éŸ³èŠ‚ï¼šå•ä¸ªå…ƒéŸ³å­—æ¯åé¢åŠ å•ä¸ªè¾…éŸ³å­—æ¯ï¼Œå†åŠ ä¸€ä¸ªä¸å‘éŸ³å­—æ¯eæ„æˆçš„é‡è¯»éŸ³èŠ‚ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼šnameï¼Œtheseï¼Œbikeï¼Œhomeï¼Œexcuse</p>
<h3 id="5-é—­éŸ³èŠ‚"><a class="header-anchor" href="#5-é—­éŸ³èŠ‚">ğŸŒ³</a>5. é—­éŸ³èŠ‚</h3>
<p>å•ä¸ªå…ƒéŸ³å­—æ¯åé¢æœ‰è¾…éŸ³å­—æ¯(rã€wã€y é™¤å¤–)ä¸”ä»¥è¾…éŸ³å­—æ¯ç»“å°¾çš„é‡è¯»éŸ³èŠ‚ã€‚</p>
<p>ä¾‹å¦‚ï¼šbagï¼Œeggï¼Œfishï¼Œnotï¼Œcup</p>
<h3 id="6-åŒéŸ³èŠ‚è¯é‡è¯»è§„åˆ™"><a class="header-anchor" href="#6-åŒéŸ³èŠ‚è¯é‡è¯»è§„åˆ™">ğŸŒ³</a>6. åŒéŸ³èŠ‚è¯é‡è¯»è§„åˆ™</h3>
<ul>
<li>åŒéŸ³èŠ‚è¯çš„ç¬¬ä¸€ä¸ªéŸ³èŠ‚é€šå¸¸æ˜¯é‡è¯»éŸ³èŠ‚ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼šstu-dentï¼ŒChi-naï¼Œsec-ondï¼Œau-tumn</p>
<ul>
<li>å«æœ‰a- be- de- re- in- ex- ç­‰å‰ç¼€çš„åŒéŸ³èŠ‚è¯å¾€å¾€æ˜¯åœ¨ç¬¬äºŒä¸ªéŸ³èŠ‚ä¸Šé‡è¯»ã€‚åŒéŸ³èŠ‚è¯çš„é‡è¯»ä½ç½®ä¸ä¼šå› å¢åŠ å‰ç¼€æˆ–åç¼€è€Œå‘ç”Ÿæ”¹å˜ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼ša-boutï¼Œbe-foreï¼Œex-cuseï¼Œre-pairï¼Œfor-get-fulï¼Œin-ven-tor</p>
<h3 id="7-å¤šéŸ³èŠ‚è¯é‡è¯»è§„åˆ™"><a class="header-anchor" href="#7-å¤šéŸ³èŠ‚è¯é‡è¯»è§„åˆ™">ğŸŒ³</a>7. å¤šéŸ³èŠ‚è¯é‡è¯»è§„åˆ™</h3>
<p>å¤šéŸ³èŠ‚è¯é€šå¸¸åœ¨å€’æ•°ç¬¬ä¸‰ä¸ªéŸ³èŠ‚é‡è¯»ã€‚</p>
<p>ä¾‹å¦‚ï¼šel-e-phant</p>
<p>è¯å°¾æœ‰-ic æˆ–-tion,-sion çš„è¯ï¼Œåœ¨-icæˆ–-sion,-tionå‰çš„ä¸€ä¸ªéŸ³èŠ‚ä¸Šé‡è¯»ã€‚</p>
<p>ä¾‹å¦‚ï¼šscien-tificï¼Œim-pressionï¼Œna-tion</p>
<h2 id="ä¸–ç•Œæ–‡å­—åˆ†ç±»"><a class="header-anchor" href="#ä¸–ç•Œæ–‡å­—åˆ†ç±»">ğŸŒ³</a>ä¸–ç•Œæ–‡å­—åˆ†ç±»</h2>
<h3 id="reference"><a class="header-anchor" href="#reference">ğŸŒ³</a>reference</h3>
<ul>
<li><a href="https://neography.info/writing-systems/#:~:text=Writing%20Systems%201%201.%20Segmental%20Segmental%20writing%20systems,building%20blocks.%20Syllabary%20...%203%203.%20Segmental-Syllabic%20" title="ä¹¦å†™ç³»ç»Ÿ">write_sys</a></li>
<li><a href="http://languagesindanger.eu/book-of-knowledge/writing/">writing</a></li>
<li><a href="https://www.worldswritingsystems.org/">ä¸–ç•Œæ–‡å­—ç³»ç»Ÿå®˜ç½‘</a></li>
<li><a href="https://space.bilibili.com/1931761492/video">ä¸–ç•Œæ–‡å­—Bç«™upä¸»ç©ºé—´</a></li>
</ul>
<p><img src="https://pic1.zhimg.com/7ae2af104a6e315229ee88527a72c8cd_r.jpg" alt="ä¸–ç•Œæ–‡å­—åˆ†ç±»"><br>
<img src="https://p1.ssl.qhmsg.com/t01eb6714f6b8e761dd.jpg" alt="ä¸­æ–‡ç‰ˆ"><br>
<img src="/2024/07/06/%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%EF%BC%9A%E8%8B%B1%E8%AF%AD/OIP-C.jpg" alt="dd"><br>
<img src="https://www.ielts-adviser.com/wp-content/uploads/2015/07/main-systems-of-writing.png" alt="dd2"><br>
<img src="https://iibawards-prod.s3.amazonaws.com/projects/images/000/002/704/large.png" alt="dd3"><br>
<img src="https://www.applelanguages.com/blog/wp-content/uploads/2019/04/blog-post-writing-system.png" alt="dd"></p>
<blockquote>
<p>å…¨ä¸–ç•Œçš„æ–‡å­—éƒ½å¯ä»¥åˆ†ä¸ºäº”å¤§ç±»/</p>
</blockquote>
<h3 id="1-è¡¨æ„æ–‡å­—morphographic"><a class="header-anchor" href="#1-è¡¨æ„æ–‡å­—morphographic">ğŸŒ³</a>1. è¡¨æ„æ–‡å­—Morphographic</h3>
<p>æ–‡å­—å­—ç¬¦ä¸ç›´æ¥è¡¨ç¤ºæ–‡å­—è¯»éŸ³</p>
<p>ä¾‹ï¼šåŸƒåŠè±¡å½¢æ–‡å­—ã€ä¸­å›½æ±‰å­—</p>
<h3 id="2-è¡¨éŸ³æ–‡å­—phonographic"><a class="header-anchor" href="#2-è¡¨éŸ³æ–‡å­—phonographic">ğŸŒ³</a>2. è¡¨éŸ³æ–‡å­—Phonographic</h3>
<p>å¯ä»¥ä»æ–‡å­—å¾—å‡ºè¯»éŸ³</p>
<h3 id="2-1-è¡¨éŸ³èŠ‚syllabic"><a class="header-anchor" href="#2-1-è¡¨éŸ³èŠ‚syllabic">ğŸŒ³</a>2.1 è¡¨éŸ³èŠ‚Syllabic</h3>
<p>ä¸€ä¸ªå•ç‹¬çš„å­—ç¬¦ä»£è¡¨ä¸€ä¸ªéŸ³èŠ‚ï¼Œä¸èƒ½ä»éŸ³èŠ‚å­—ç¬¦é‡Œæ‹†åˆ†å…ƒéŸ³å­—ç¬¦å’Œè¾…éŸ³å­—ç¬¦</p>
<p>ä¾‹ï¼šæ—¥æ–‡å¹³ã€ç‰‡å‡å</p>
<h3 id="2-2-è¡¨éŸ³ç´ phonemic"><a class="header-anchor" href="#2-2-è¡¨éŸ³ç´ phonemic">ğŸŒ³</a>2.2 è¡¨éŸ³ç´ Phonemic</h3>
<p>éŸ³èŠ‚å¯æ‹†åˆ†æˆå…ƒéŸ³è¾…éŸ³</p>
<h3 id="2-2-1-ä¸å†™å…ƒéŸ³abjad"><a class="header-anchor" href="#2-2-1-ä¸å†™å…ƒéŸ³abjad">ğŸŒ³</a>2.2.1 ä¸å†™å…ƒéŸ³Abjad</h3>
<p>ä¸å†™å…ƒéŸ³ï¼Œè„‘è¡¥å…ƒéŸ³</p>
<p>ä¾‹ï¼šé˜¿æ‹‰ä¼¯æ–‡ã€å¸Œä¼¯æ¥æ–‡</p>
<h3 id="2-2-2-å†™å…ƒéŸ³"><a class="header-anchor" href="#2-2-2-å†™å…ƒéŸ³">ğŸŒ³</a>2.2.2 å†™å…ƒéŸ³</h3>
<h3 id="2-2-2-1-å…ƒéŸ³å­—æ¯ä½œä¸ºé™„åŠ ç¬¦å·abugida"><a class="header-anchor" href="#2-2-2-1-å…ƒéŸ³å­—æ¯ä½œä¸ºé™„åŠ ç¬¦å·abugida">ğŸŒ³</a>2.2.2.1 å…ƒéŸ³å­—æ¯ä½œä¸ºé™„åŠ ç¬¦å·Abugida</h3>
<p>å…ƒéŸ³=å‹¾å‹¾åœˆåœˆç‚¹ç‚¹ã€‚åœ¨åŸºå­—ä¸Šæ·»åŠ ç¬¦å·è¡¨ç¤ºå…ƒéŸ³ï¼ˆçš„éŸ³èŠ‚ï¼‰</p>
<p>ä¾‹ï¼šå°åº¦å¤©æˆä½“ã€ä¸­å›½è—æ–‡</p>
<h3 id="2-2-2-2-å…ƒéŸ³ä½œä¸ºå•ç‹¬ç¬¦å·alphabet"><a class="header-anchor" href="#2-2-2-2-å…ƒéŸ³ä½œä¸ºå•ç‹¬ç¬¦å·alphabet">ğŸŒ³</a>2.2.2.2 å…ƒéŸ³ä½œä¸ºå•ç‹¬ç¬¦å·Alphabet</h3>
<p>ä¾‹ï¼šå¸Œè…Šå­—æ¯ã€æ‹‰ä¸å­—æ¯ã€è¥¿é‡Œå°”å­—æ¯</p>
<blockquote>
<p>æ€»ç»“ï¼š</p>
</blockquote>
<ul>
<li>Alphabetï¼ˆå•ç‹¬å…ƒéŸ³ï¼Œå•ç‹¬è¾…éŸ³ï¼‰</li>
<li>Abgidaï¼ˆé™„ç€å…ƒéŸ³ï¼Œå•ç‹¬è¾…éŸ³ï¼‰</li>
<li>Abjadï¼ˆä¸å†™å…ƒéŸ³ï¼Œåªå†™è¾…éŸ³ï¼‰</li>
<li>Syllabicï¼ˆå•ç‹¬éŸ³èŠ‚ï¼Œå…ƒéŸ³è¾…éŸ³åˆå¹¶ï¼‰</li>
<li>Morphographicï¼ˆè¡¨æ„ï¼‰</li>
</ul>
<h2 id="é˜¿æ‹‰ä¼¯æ–‡-å­—æ¯è¡¨"><a class="header-anchor" href="#é˜¿æ‹‰ä¼¯æ–‡-å­—æ¯è¡¨">ğŸŒ³</a>é˜¿æ‹‰ä¼¯æ–‡ å­—æ¯è¡¨</h2>
<p><a href="https://space.bilibili.com/39020403/channel/seriesdetail?sid=3930706">ç™½é‡è€å¸ˆé˜¿æ‹‰ä¼¯è¯­æ•™å­¦è§†é¢‘</a><br>
<img src="https://ts1.cn.mm.bing.net/th/id/R-C.02947271425f5006882a4280f981f680?rik=nmwlkd0ZZsueCA&amp;riu=http%3a%2f%2fi180.photobucket.com%2falbums%2fx47%2fayoobzhao%2fQr%2fArabic20consonants.gif&amp;ehk=%2fc9OWpS7uB2ocCx8PCwnnH0jlBXypsb4Zq0e6u5r2M0%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0" alt="dd"><br>
<img src="https://gss0.baidu.com/-Po3dSag_xI4khGko9WTAnF6hhy/zhidao/wh%3D600%2C800/sign=b9c2fe85e2fe9925cb596156049872e7/023b5bb5c9ea15ceb5380649b4003af33b87b298.jpg" alt="dd"><br>
<img src="https://appwk.baidu.com/naapi/doc/view?ih=1010&amp;o=jpg_6_0_______&amp;iw=785&amp;ix=0&amp;iy=0&amp;aimw=785&amp;rn=1&amp;doc_id=bce77edea58da0116c1749c8&amp;pn=1&amp;sign=092f630f22a92d43dc202094b56f0ad5&amp;type=1&amp;app_ver=2.9.8.2&amp;ua=bd_800_800_IncredibleS_2.9.8.2_2.3.7&amp;bid=1&amp;app_ua=IncredibleS&amp;uid=&amp;cuid=&amp;fr=3&amp;Bdi_bear=WIFI&amp;from=3_10000&amp;bduss=&amp;pid=1&amp;screen=800_800&amp;" alt="dd"></p>
<p><a href="https://www.bilibili.com/video/BV1oL411y7qW/?spm_id_from=trigger_reload&amp;vd_source=b48342a630f5cc1a5c86649a37c0db89">å¥‡å¦™çš„é—ªè¯­æ„è¯æ³•</a><br>
<a href="https://www.bilibili.com/video/BV1wN4y1j7TJ/?spm_id_from=333.999.0.0&amp;vd_source=b48342a630f5cc1a5c86649a37c0db89">ä»æ±‰è¯­çš„â€œå°–å›¢åˆæµâ€åˆ°å„è¯­è¨€ä¸­çš„â€œè…­åŒ–â€</a></p>
<p>Here is a footnote reference,[^1] and another.[^longnote]</p>
<h2 id="endnotes"><a class="header-anchor" href="#endnotes">ğŸŒ³</a>Endnotes</h2>
<p>[^1]: Here is the footnote.<br>
[^longnote]: Hereâ€™s one with multiple blocks.</p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºç§‘å­¦</category>
      </categories>
      <tags>
        <tag>ä¸–ç•Œæ–‡å­—</tag>
        <tag>é˜¿æ‹‰ä¼¯æ–‡</tag>
        <tag>æ—¥æ–‡</tag>
        <tag>è±¡å½¢æ–‡å­—</tag>
        <tag>å°–å›¢åˆæµ</tag>
        <tag>è…­åŒ–</tag>
        <tag>å…ƒéŸ³è¾…éŸ³</tag>
        <tag>è¡¨æ„æ–‡å­—Morphographic</tag>
        <tag>è¡¨éŸ³æ–‡å­—Phonographic</tag>
        <tag>ä¸–ç•Œä¹¦å†™ç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>é«˜è´¨é‡C++è¯»ä¹¦ç¬”è®°</title>
    <url>/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<p><a href="https://zh.cppreference.com/w/%E9%A6%96%E9%A1%B5">cppreference.com</a></p>
<h1>é«˜è´¨é‡C++è¯»ä¹¦ç¬”è®°</h1>
<h2 id="1-c-c-ç¨‹åº-åŸºæœ¬æ¦‚å¿µ"><a class="header-anchor" href="#1-c-c-ç¨‹åº-åŸºæœ¬æ¦‚å¿µ">ğŸŒ³</a>1. C++/C ç¨‹åº åŸºæœ¬æ¦‚å¿µ</h2>
<p>å†…å­˜é¡µ<br>
ç¼ºé¡µä¸­æ–­ é¡µé¢è°ƒåº¦ é¡µé¢äº¤æ¢</p>
<p>åŠ¨æ€å†…å­˜åˆ†é… è¿è¡Œæ—¶æœç´¢</p>
<p><code>ocrmypdf  --sidecar test4.txt -l chi_sim+eng --deskew --jobs 4 -s é«˜è´¨é‡ç¨‹åºè®¾è®¡æŒ‡å—_C++_Cè¯­è¨€_ç¬¬ä¸‰ç‰ˆ_æ‰«æç‰ˆ.pdf test4.pdf</code></p>
<p>å†…éƒ¨åç§° <code>_main</code></p>
<p>Cçš„è¿æ¥è§„èŒƒ<br>
Cè¯­è¨€ä¸­<br>
ç¼–è¯‘å•å…ƒï¼ˆæ–‡ä»¶ä½œç”¨åŸŸï¼‰ staticå‡½æ•°<br>
extern è¿æ¥ç±»å‹ global ä½œç”¨åŸŸçš„ å…¨å±€å‡½æ•°</p>
<p>C++<br>
ä½œç”¨åŸŸï¼šç¼–è¯‘å•å…ƒ class struct union namespace<br>
åŒä¸€ä¸ªä½œç”¨åŸŸåŒåå‡½æ•° â€”â€” é‡è½½å‡½æ•°</p>
<p>name-manglin</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Sample_1</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> m_name[<span class="number">16</span>];</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">(<span class="type">char</span>* newName)</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">(<span class="type">int</span> age)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Sample_1_foo@pch@<span class="number">1</span> </span><br><span class="line">Sample_1_foo@<span class="type">int</span>@<span class="number">1</span> </span><br><span class="line">Sample <span class="number">2</span>_foo@pch@<span class="number">1</span></span><br><span class="line">Sample_2_foo@<span class="type">int</span>@<span class="number">1</span></span><br><span class="line">Lippmançš„ã€Šinside The C++ object modelã€‹</span><br></pre></td></tr></table></figure>
<p>è¿æ¥è§„èŒƒ linkage specification</p>
<p>å…³ç³»åˆ°ç¼–è¯‘å™¨é‡‡ç”¨ä»€ä¹ˆæ ·çš„name-manglingæ–¹æ¡ˆé‡å‘½åè¿™äº›æ ‡è¯†ç¬¦çš„é—®é¢˜</p>
<p>åŒä¸€ä¸ªæ ‡è¯†ç¬¦åœ¨ä¸åŒçš„ç¼–è¯‘å•å…ƒæˆ–æ¨¡å—ä¸­å…·æœ‰ä¸ä¸€è‡´çš„è¿æ¥è§„èŒƒ å°±ä¼šäº§ç”Ÿä¸ä¸€è‡´çš„å†…éƒ¨åç§° å¯¼è‡´ç¨‹åºè¿æ¥å¤±è´¥</p>
<p>é€šç”¨è¿æ¥è§„èŒƒå± Cè¿æ¥è§„èŒƒ extern â€œCâ€</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç±»å‹ å‡½æ•° å˜é‡ å¸¸é‡ æŒ‡å®šè¿æ¥è§„èŒƒ</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> <span class="function"><span class="type">void</span> <span class="title">WinMainCRTStartup</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> <span class="type">const</span> CLSID CLSID_DataConverter;</span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> <span class="keyword">struct</span> <span class="title class_">Student</span> &#123;......&#125;;</span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> Student g_Student;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»£ç é™å®šè¿æ¥è§„èŒƒ</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> _cplusplus</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> _cplusplus</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜æŒ‡å®šæŸä¸ªæ ‡è¯†ç¬¦ è¿æ¥è§„èŒƒä¸º exter&quot;C&quot; å…¶å¯¹åº”å®šä¹‰ä¹Ÿè¦æŒ‡å®šextern &quot;C&quot;</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> _cplusplus</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> _cdecl <span class="title">memcmp</span><span class="params">(<span class="type">const</span> <span class="type">void</span>*, <span class="type">const</span> <span class="type">void</span>*, <span class="type">sizt_t</span>)</span></span>; <span class="comment">//å£°æ˜</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> _cplusplus</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> _cplusplus</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> _cdecl <span class="title">memcmp</span><span class="params">(<span class="type">const</span> <span class="type">void</span>* p, <span class="type">const</span> <span class="type">void</span>* a , <span class="type">sizt_t</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	....<span class="comment">//åŠŸèƒ½å®ç°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> _cplusplus</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<p>C++/C ä¸­ ï¼Œ å…¨ å±€ å˜é‡ (externæˆ– static çš„ ) å­˜æ”¾ åœ¨ ç¨‹åº çš„ é™æ€æ•°æ® åŒº<br>
å…¨ å±€ å˜é‡ æä¾› åˆ å€¼ ç¼– è¯‘å™¨ä¼š è‡ªåŠ¨ åœ°å°† 0 è½¬æ¢ æ‰€ éœ€è¦ çš„ ç±» å‹ æ¥ åˆå§‹ åŒ– å®ƒä»¬</p>
<p>æ—  æ³• å†³å®š å½“ä¸¤ ä¸ª ç¼–è¯‘ å•å…ƒè¿æ¥ åœ¨ ä¸€ èµ· æ—¶ å“ª ä¸€ ä¸ª çš„ å…¨ å±€ å˜é‡ çš„ åˆå§‹ åŒ– äº å¦ ä¸€ ä¸ª ç¼–è¯‘ å•å…ƒ çš„ å…¨ å±€å˜é‡ çš„ åˆå§‹ åŒ–</p>
<p>å¯åŠ¨ å‡½æ•° ã€IO ç³»ç»Ÿ å‡½ æ•° å­˜å‚¨ ç®¡ç† ã€RTTIã€ åŠ¨æ€å†³è®® åŠ¨ æ€ é“¾æ¥ ã€ˆDLL) ç­‰ éƒ½ ä¼š è°ƒç”¨ C è¿è¡Œ æ—¶ åº“ä¸­ çš„ å‡½æ•°<br>
C è¿è¡Œ æ—¶ æœ‰ å¤š çº¿ç¨‹ å’Œ å•çº¿ ç¨‹</p>
<p>ç¼–è¯‘ é¢„ å¤„ ç† ã€ ç¼–è¯‘ å’Œ è¿æ¥ å™¨ å·¥ä½œ çš„ é˜¶æ®µ åˆ â€œ ç¼– è¯‘ â€ã€‚</p>
<p>é¢„ ç¼–è¯‘ ä¼ª æŒ‡ä»¤ ç±» ã€ˆ å‹ å®šä¹‰ å¤–éƒ¨ å¯¹ è±¡ å£° ã€ å‡½ æ•° åŸå‹ã€ æ ‡è¯†ç¬¦ ã€ å„ ç§ä¿®é¥°ç¬¦å· (constã€static ç­‰ ) åŠ ç±» æˆ å‘˜ çš„è®¿é—®è¯´ æ˜ ç¬¦ (publicã€privateã€protected) å’Œ è¿æ¥ è§„èŒƒ è°ƒ ç”¨ è§„èŒƒ ç­‰ä»…åœ¨ ç¼–è¯‘ å™¨è¿›è¡Œ è¯­æ³•æ£€æŸ¥ ã€ è¯­ ä¹‰ æ£€æŸ¥ å’Œ ç”Ÿæˆ ç›®æ ‡æ–‡ä»¶ ã€ˆ.obj æˆ– .o æ–‡ä»¶ ) åŠ è¿æ¥ çš„ æ—¶ å€™èµ· ä½œç”¨ çš„</p>
<p>å®¹å™¨ è¶Šç•Œï¼Œè®¿é—® è™š å‡½æ•° ï¼ŒåŠ¨æ€ å†³è®® ï¼Œå‡½ æ•° åŠ¨æ€ è¿æ¥ ã€ åŠ¨ å†… å­˜ åˆ† é… å¼‚ å¸¸ å¤„ å’Œ RTTIç­‰åˆ™ æ˜¯åœ¨ è¿è¡Œ æ—¶ æ‰ ä¼š å‡º å’Œ å‘ ä½œç”¨</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> *pInt = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">10</span>];</span><br><span class="line">pint += <span class="number">100</span>;                         <span class="comment">// è¶Šç•Œ ä½† æ˜¯ è¿˜ æ²¡æœ‰ å½¢æˆ è¶Šç•Œ è®¿é—®</span></span><br><span class="line">cout &lt;&lt; *pInt&lt;&lt;endl;          <span class="comment">// è¶Šç•Œ è®¿é—® ! å¯ èƒ½ è¡Œ ä¹Ÿ å¯ èƒ½ ä¸ !</span></span><br><span class="line">*pInt = <span class="number">1000</span>;                      <span class="comment">// è¶Šç•Œè®¿é—® ! å³ä½¿å¶å°” ä¸ å‡ºé—®é¢˜ ä½† ä¸èƒ½ ç¡®ä¿æ°¸è¿œä¸ å‡ºé—®é¢˜ </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Say</span><span class="params">()</span> </span>&#123; cout&lt;&lt; <span class="string">&quot;Base::Say() was invoked!\n&quot;</span>; </span><br><span class="line">&#125;;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">private</span>: / æ”¹å˜ è®¿é—® æƒé™ åˆ æ³•ä½† ä¸ æ˜¯å¥½ é£æ ¼ !</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Say</span><span class="params">()</span></span>&#123; cout &lt;&lt; â€œDerived::<span class="built_in">Say</span>() was invoked!\nâ€;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// æµ‹è¯•</span></span><br><span class="line">Base *p = <span class="keyword">new</span> Derived;</span><br><span class="line">p-&gt;<span class="built_in">Say</span>(); <span class="comment">//è¾“å‡º: Derived::Say() was invoked !</span></span><br><span class="line"><span class="comment">// å‡º ä¹ æ„æ–™ åœ°ç»‘ å®š åˆ° äº† ä¸€ private å‡½æ•° èº«ä¸Š </span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ç‹¬ç«‹ç¼–è¯‘æŠ€æœ¯<br>
æ¯ ä¸€ ä¸ª æºä»£| ç  æ–‡ä»¶ ã€ˆ æº æ–‡ä»¶ åŠ å…¶ é€’å½’ åŒ…å« çš„ æœ‰ å¤´ æ–‡ä»¶ å±•å¼€ ) å°± æ˜¯ ä¸€ ä¸ª æœ€å° çš„ ç¼–è¯‘ å•å…ƒ æ¯ ä¸ª ç¼–è¯‘ å•å…ƒ å¯ ä»¥ç‹¬ç«‹ ç¼–è¯‘ è€Œä¸ éœ€è¦ çŸ¥é“ ä»– ç¼–è¯‘ å•å…ƒ çš„ å­˜åœ¨ åŠ å…¶ ç¼–è¯‘ ç»“æœ ã€‚</p>
<p>32ä½ æ“ä½œ ç³»ç»Ÿ ä¸Š ï¼Œint ç±» å‹ çš„ å˜é‡ å°± æ‹¥æœ‰ 4 å­— èŠ‚ çš„ å†… å­˜å• å…ƒ è€Œ double ç±» å‹ çš„ å˜é‡ å  8 å­— èŠ‚ çš„ å†… å­˜å•</p>
<pre><code>æ ‡å‡† C è¯­è¨€ æ”¯æŒ åŸºæœ¬ ã€ˆ å†… ) æ•°æ® ç±» æœ‰ intã€longã€floatã€doubleã€charã€voidï¼Œ ä»¥ åŠ å®ƒä»¬ å’Œ signedã€unsignedã€*ã€&amp; ç­‰ çš„ ç»„ ã€Š æœ‰äº›ç»„ åˆ æ˜¯ ä¸ æ”¯æŒ çš„ ä¾‹ å¦‚ void&amp; )ã€‚ æ ‡å‡† C++ åœ¨ è¿™ äº› ç±» å‹ çš„ åŸºç¡€ ä¸Š å¢åŠ  äº† bool ç±» å‹ å¹¶ åŒæ—¶ å¢åŠ  äº† ä¸¤ å†… ç½® çš„ ç¬¦å· å¸¸é‡ true All false (Se).
</code></pre>
<p>æ ‡å‡† C ä¸­ ï¼Œint ä¸º é»˜è®¤ ç±» å‹ ä¹Ÿ å°± æ˜¯ è¯´ å¦‚æœ ä½  æ˜ç¡® æŒ‡å®š å‡½æ•° çš„ å½¢ ç±» å‹ æˆ–å‡½æ•°è¿”å›å€¼ç±»å‹ åˆ™å®ƒä»¬çš„ç±»å‹ä¸º int,<br>
æ ‡å‡†C++ä¸æ”¯æŒé»˜è®¤ç±»å‹ï¼Œä½†åœ¨æ¨¡æ¿ä¸­ æœ‰ â€œé»˜è®¤ ç±» å‹ å‚æ•° â€çš„ æ¦‚å¿µ ã€‚</p>
<p>æŸäº› åŸºäº RISCã€Šã€ˆ ç²¾ ç®€ æŒ‡ä»¤ é›†è®¡ ç®— æœº ) çš„ CPU æ¯”å¦‚ SPARCã€PowerPC ç­‰<br>
å¯¹ å†…å­˜ ä¸­ åŸºæœ¬ æ•°æ®ç±» å‹ å˜é‡ é‡‡ç”¨<br>
é«˜ å­— èŠ‚ (BYTE) å’Œ é«˜ (WORD) åœ¨ ä½åœ° å€ å­˜æ”¾ ã€ ä½å­—èŠ‚ å’Œ ä½ å­— åœ¨ åœ° å€ å­˜æ”¾ çš„<br>
Big Endian å­˜å‚¨æ ¼å¼ ã€ˆ å³ é«˜ å­— èŠ‚ ã€ é«˜ å­— åœ¨ å‰ æˆ– åœ° å€ å¤§çš„ å­— èŠ‚ ç»“å°¾ ),<br>
å¹¶ ä¸” æŠŠ æœ€ é«˜ å­—èŠ‚ çš„ åœ° å€ ä½œä¸º å˜é‡ çš„ é¦– åœ°å€</p>
<p>ã€‚åœ¨ è¿™ ç§ è‡ªç„¶ çš„ å­˜å‚¨ æ ¼å¼ ä¸­ ï¼Œ<br>
| è¦æ±‚ å˜ é‡åœ¨ å†… å­˜ ä¸­ çš„ å­˜æ”¾ ä½ å¿…é¡» è‡ªç„¶ å¯¹ ,å¦åˆ™ CPU ä¼š æŠ¥å‘Š å¼‚å¸¸ æ‰€ è°“ è‡ªç„¶ å¯¹é½ ï¼Œ<br>
| å°± åŸºæœ¬æ•°æ® ç±» ã€ˆ ä¸» è¦ shortã€int å’Œdouble) çš„ å˜é‡ ä¸ èƒ½ ç®€å• åœ° å­˜å‚¨ äº å†… å­˜ ä¸­ çš„<br>
ä»»æ„ åœ° å€ å¤„ å®ƒ ä»¬ çš„ èµ· åœ° å€ å¿…é¡» èƒ½ å¤Ÿ è¢« å®ƒä»¬ çš„ å¤§ å° æ•´é™¤</p>
<p>åœ¨ 32 ä½ å¹³å° ä¸‹ ï¼Œint å’Œ æŒ‡é’ˆ ç±» å‹ å˜é‡ çš„ åœ° å€ åº” è¯¥ èƒ½ 4 æ•´é™¤ï¼Œè€Œ short å˜é‡ çš„ åœ° å€ éƒ½åº” è¯¥ æ˜¯ å¶æ•° ï¼Œboolå’Œ char åˆ™ æ²¡æœ‰ ç‰¹åˆ« è¦ æ±‚</p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230531104928.png" alt></p>
<p>Intel ç³»åˆ— CPU é‡‡ç”¨ Little Endian å­˜å‚¨ æ ¼å¼ æ¥ å­˜æ”¾ åŸºæœ¬ ç±» å‹ å˜é‡ å³ ä½ å­—èŠ‚å’Œä½å­— åœ¨ ä½åœ° å€ å­˜æ”¾ ã€ é«˜ å­— èŠ‚ å’Œ é«˜ å­— åœ¨ åœ° å€ å­˜æ”¾ ã€Šã€ˆ å³ ä½ å­— èŠ‚ ã€ ä½ å­— åœ¨ å‰ æˆ–åœ° å€ å° çš„ å­— èŠ‚ ç»“å°¾ )ï¼Œ å¹¶ ä¸” æŠŠ æœ€ä½ å­—èŠ‚ çš„ åœ° å€ ä½œä¸º å˜é‡ çš„ é¦– åœ° å€</p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230531105144.png" alt></p>
<h2 id="éšå¼è½¬æ¢"><a class="header-anchor" href="#éšå¼è½¬æ¢">ğŸŒ³</a>éšå¼è½¬æ¢</h2>
<p>æ˜¾ åœ° ä½¿ ç”¨ å¼ºåˆ¶ ç±» å‹ è½¬æ¢ç”± æ­¤ å¯ èƒ½ é€ æˆ çš„ å®‰å…¨ éšæ‚£ ç”± ç¨‹åº å‘˜ è´Ÿ è´£<br>
è¿™ é‡Œ å®‰å…¨ æ€§ ä¸»è¦åŒ…æ‹¬ ä¸¤ ä¸ª æ–¹é¢ å†… å­˜å• å…ƒè®¿é—® çš„ å®‰å…¨ å’Œ è½¬æ¢ ç»“æœ çš„ å®‰å…¨ æ€§<br>
ä¸»è¦ è¡¨ç°<br>
å†… å­˜ è®¿é—® èŒƒå›´ çš„ æ‰©å¼ <br>
å†… å­˜ çš„ æˆªæ–­<br>
å°¾ æ•° çš„ æˆªæ–­<br>
å€¼ çš„ æ”¹å˜ å’Œ<br>
æº¢å‡º<br>
ä¸€ ä¸ª ä½çº§ æ•°æ® ç±» å‹ å¯¹ è±¡ æ€» æ˜¯ ä¼˜å…ˆ è½¬æ¢ ä¸º èƒ½ å¤Ÿ å®¹çº³ å¾— ä¸‹ å®ƒ çš„ å¤§ å€¼ çš„ã€ å ç”¨ å†… å­˜;æœ€å°‘ çš„ é«˜ çº§ ç±» å‹ å¯¹ è±¡</p>
<p>ç¤ºä¾‹ 4-5 ä¸­ çš„ è½¬æ¢ æ˜¯ å®‰å…¨ çš„ å¹¶ ä¸ éœ€è¦ å¼ºåˆ¶ ç¼– è¯‘ å™¨</p>
<p>é¦–å…ˆ éš å¼ åœ° 100 æå‡: doubleã€Šã€ˆ ä½œ ä¸º å®ƒ çš„ æ•´æ•° éƒ¨ åˆ† çš„ ä¸€ ä¸ª ä¸´æ—¶ å˜é‡<br>
ç„¶ æ‰ å°†è¿™ ä¸ª ä¸´æ—¶ å˜é‡ èµ‹å€¼ dl;<br>
åŒæ · ï¼Œi ä¹Ÿ ä¼š é¦–å…ˆ éš å¼ åœ° æå‡ doubleã€Šã€ˆ å…¶ å€¼ä½œä¸º å®ƒ çš„ æ•´æ•° éƒ¨ ) çš„ ä¸€ ä¸ª ä¸´æ—¶ å˜é‡ ï¼Œ<br>
| ç„¶å æ‰ èµ‹å€¼ d2ã€‚<br>
å½“ ç¼–è¯‘ å™¨ è®¤ä¸º è¿™ äº› ä¸´æ—¶ å˜é‡ ä¸å† éœ€è¦ æ—¶ å°± é€‚æ—¶ åœ° æŠŠ å®ƒä»¬ é”€æ¯</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">ç¤ºä¾‹ <span class="number">4</span>-$</span><br><span class="line"><span class="type">double</span> di = <span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> i= <span class="number">100</span>;</span><br><span class="line"><span class="type">double</span> d2 = i</span><br></pre></td></tr></table></figure>
<p>ç›´æ¥ å°†æ´¾ç”Ÿ ç±»å¯¹ è±¡ è½¬æ¢ åŸº ç±» å¯¹ ï¼Œè¿™ è™½ç„¶ ä¼š ç”Ÿ å†… å­˜ æˆªæ–­ ä½† æ˜¯ æ—  ä» å†… å­˜ è®¿é—® è¿˜ ä» è½¬æ¢ ç»“æœ æ¥è¯´ éƒ½æ˜¯ å®‰å…¨</p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230531114341.png" alt><br>
<img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230531114341.png" alt></p>
<p><a href="#%E6%96%B0%E7%89%B9%E6%80%A7.md">æ–°ç‰¹æ€§</a></p>
<p>C è¯­è¨€ ç¯å¢ƒ ä¸­ æˆ‘ä»¬ å¯ ä»¥ å…ˆ æŠŠ ä¸€ ç§ å…·ä½“ ç±» å‹ æŒ‡é’ˆ<br>
å¦‚ int* è½¬ æ¢ void* ç±» å‹ ç„¶<br>
å† æŠŠvoid* ç±» å‹ è½¬æ¢ double* ç±» å‹<br>
è€Œ ç¼–è¯‘ å™¨ ä¸ è®¤ä¸º è¿™ æ˜¯é”™è¯¯ ã€‚ ç„¶ è¿™æ ·çš„ åš æ³• ç¡®å® å­˜åœ¨ ç€ ä¸ æ˜“ å¯Ÿ å…š çš„ å®‰å…¨ é—®é¢˜<br>
( å†… å­˜ æ‰©å¼  å’Œ æˆªæ–­ )ï¼Œ è¿™ æ˜¯ æ ‡å‡†C è¯­ è¨€ çš„ ä¸€ ä¸ª ç¼ºé™·</p>
<h3 id="å¼ºåˆ¶è½¬æ¢"><a class="header-anchor" href="#å¼ºåˆ¶è½¬æ¢">ğŸŒ³</a>å¼ºåˆ¶è½¬æ¢</h3>
<h3 id="æ•°æ®ç±»å‹è½¬æ¢"><a class="header-anchor" href="#æ•°æ®ç±»å‹è½¬æ¢">ğŸŒ³</a>æ•°æ®ç±»å‹è½¬æ¢</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">double</span> d3 = <span class="number">1.25e+20</span>;</span><br><span class="line"><span class="type">double</span> d4 = <span class="number">10.25</span>;</span><br><span class="line"><span class="type">int</span> i2 = (<span class="type">int</span>)d3;</span><br><span class="line"><span class="type">int</span> i3 = (<span class="type">int</span>)d4;</span><br><span class="line"></span><br><span class="line">æŒ‰ç…§ ä» æµ® ç‚¹ æ•° åˆ° æ•´ å‹ æ•° çš„ è½¬æ¢ è¯­ä¹‰ ç»“ æœ åº” æ˜¯ æˆª å» æµ® ç‚¹ æ•° çš„ å° æ•°éƒ¨åˆ†è€Œ ä¿ç•™å…¶ æ•´æ•° éƒ¨åˆ†</span><br><span class="line">å›  æ­¤ i ä¼šå¾— åˆ° <span class="number">10</span>ï¼Œ</span><br><span class="line"></span><br><span class="line">d3 çš„ æ•´æ•° éƒ¨ åˆ†è¿œè¿œ è¶… äº† ä¸€ ä¸ª<span class="type">int</span> æ‰€ èƒ½ è¡¨ç¤º çš„ èŒƒå›´ </span><br><span class="line">i2 ä¼š æº¢å‡º</span><br></pre></td></tr></table></figure>
<h3 id="æŒ‡é’ˆè½¬æ¢"><a class="header-anchor" href="#æŒ‡é’ˆè½¬æ¢">ğŸŒ³</a>æŒ‡é’ˆè½¬æ¢</h3>
<p>åŸºæœ¬ æ•°æ® ç±» å‹ é—´ çš„ <strong>æŒ‡é’ˆè½¬æ¢</strong> ä¸€ èˆ¬ è¯´ å¿…ç„¶ é€ æˆ å†… å­˜ æˆª æ–­ æˆ– å†… å­˜ è®¿é—® èŒƒå›´æ‰©å¼ <br>
åœ¨ 32 ä½ ç³»ç»Ÿ ï¼Œintã€longã€float éƒ½ å…·æœ‰ 4 å­— èŠ‚ çš„ ç©ºé—´<br>
è™½ ç„¶ ä¸ ä¼š é€ æˆ å†… å­˜ æˆªæ–­ å†… å­˜ æ‰©å¼ <br>
å®ƒä»¬ ä¹‹é—´ çš„ <strong>æŒ‡é’ˆ è½¬æ¢</strong><br>
æ”¹å˜ äº† <strong>ç¼–è¯‘ å™¨</strong>å¯¹ æŒ‡é’ˆ æ‰€æŒ‡å‘ çš„ å†… å­˜å• å…ƒ çš„ <strong>è§£é‡Šæ–¹å¼</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">ç¤ºä¾‹ <span class="number">4</span><span class="number">-8</span></span><br><span class="line"><span class="type">double</span> d5 = <span class="number">1000.25</span>;</span><br><span class="line"><span class="type">int</span> *pInt = (<span class="type">int</span>*)&amp;d5;</span><br><span class="line"><span class="type">int</span> i4 = <span class="number">100</span>;</span><br><span class="line"><span class="type">double</span> *pDbl = (<span class="type">double</span>*)&amp;i4</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ä» å†… å­˜ è®¿é—® è§’åº¦ æ¥ , ä½  é€šè¿‡ pInt è®¿é—® å®ƒ æŒ‡å‘ <span class="type">double</span> ç±» å‹ å˜é‡ d5 æ˜¯ å®‰å…¨ çš„</span><br><span class="line">(åé¢çš„ <span class="number">4</span> å­— èŠ‚ â€œæˆªæ–­ â€äº† ï¼Œ å¯è®¿é—® å†… å­˜ èŒƒå›´ ç¼©å° )ï¼Œä½† æ˜¯ å…¶ å€¼ ç»å¯¹ ä¸ ä¼š d5 çš„ æ•´æ•°éƒ¨åˆ†<span class="number">1000</span>ï¼Œ </span><br><span class="line">è€Œ æ˜¯ ä½ d5 å¼€å¤´ <span class="number">4</span> å­—èŠ‚ ä¸­ çš„ å†… å®¹ å¹¶ è§£é‡Š <span class="type">int</span> ç±» å‹ æ•° </span><br><span class="line">è¿™ ä¸ª æ•° æ˜¯ ä¸å¯é¢„æ–™ çš„ </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">é€šè¿‡ pDbl è®¿é—® <span class="type">int</span> ç±» å‹ å˜é‡ è¿™ ï¼Œ å¾— åˆ° çš„ æ•°æ® ä¸ä¸€ å®š å°± <span class="number">100</span>ï¼Œ å†µ ä¸”é€ æˆ äº† å¯ è®¿é—® å†… å­˜ èŒƒå›´ â€œæ‰©å¼  &gt;ã€‚ </span><br><span class="line">å¦‚ æœ ä½ å¾€ é‡Œ é¢ å†™ æ•°æ® å°± ä¼š äº§ç”Ÿ è¿è¡Œ æ—¶ é”™è¯¯</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230531131558.png" alt></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">Base objB2;</span><br><span class="line">Derived *pD2 = (Derived *)&amp;objB2;</span><br><span class="line"></span><br><span class="line">å­˜åœ¨ çš„é—®é¢˜ : é€šè¿‡ pD2 èƒ½ å¤Ÿ è®¿é—® çš„ å†… å­˜èŒƒå›´ â€œæ‰©å¼  â€äº† <span class="number">4</span> å­—èŠ‚ ,å¦‚æœ è®¿é—® m_cå¯ èƒ½ å¼•å‘ è¿è¡Œ æ—¶ é”™è¯¯ ,å› ä¸º pD2 æŒ‡å‘ çš„ å¯¹ è±¡ æ ¹æœ¬ å°± æ²¡æœ‰ æˆ m_e çš„ ç©ºé—´</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230531131959.png" alt></p>
<p>(1) ä¸ å¯ ä»¥ <strong>åŸº ç±»</strong> å¯¹ è±¡ ç›´æ¥ è½¬æ¢ ä¸º <strong>æ´¾ç”Ÿ ç±»</strong> å¯¹ è±¡ æ—  è®º ç›´æ¥ <strong>èµ‹å€¼</strong> è¿˜ æ˜¯<strong>å¼º<br>
åˆ¶ è½¬æ¢</strong> å›  ä¸º è¿™ ä¸ â€œè‡ªç„¶ çš„ â€;<br>
(2) å¯¹ äº <strong>åŸºæœ¬ ç±» å‹</strong> çš„<strong>å¼ºåˆ¶ è½¬æ¢</strong> ä¸€ å®š è¦ åŒº åˆ† <strong>å€¼çš„æˆªæ–­</strong> ä¸ <strong>å†… å­˜ æˆªæ–­</strong> çš„ ä¸ åŒ;<br>
(3) å¦‚ æœ ä½  åšæŒ è¦ä½¿ ç”¨å¼ºåˆ¶ è½¬æ¢ å¿… é¡» åŒæ—¶ ç¡®ä¿ <strong>å†…å­˜è®¿é—®çš„å®‰å…¨æ€§</strong> å’Œ <strong>è½¬æ¢ç»“æœçš„å®‰å…¨æ€§</strong> ;<br>
(4) å¦‚ æœ ç¡®ä¿¡ éœ€ è¦ æ•°æ® ç±» å‹ è½¬æ¢ è¯· å°½é‡ä½¿ æ˜¾ å¼ ( å³å¼ºåˆ¶ ) æ•°æ® ç±»å‹ è½¬æ¢ è®© äºº ä»¬ çŸ¥é“ å‘ äº† ä»€ä¹ˆ äº‹ é¿ å…è®© ç¼–è¯‘ å™¨ é™ æ‚„æ‚„åœ° è¿›è¡Œ éš å¼ çš„æ•°æ® ç±» å‹ è½¬æ¢ ã€‚</p>
<h3 id="æ ‡è¯†ç¬¦"><a class="header-anchor" href="#æ ‡è¯†ç¬¦">ğŸŒ³</a>æ ‡è¯†ç¬¦</h3>
<p>æ ‡ è¯† ç¬¦ å¯ ä»¥ ä»»æ„ é•¿<br>
ä½† æ˜¯ æ ‡å‡† C è¯­è¨€è§„å®š ç¼– è¯‘å™¨ åª å– å‰ 31 ä¸ªå­—ç¬¦ ä½œä¸º æœ‰ æ•ˆ çš„ æ ‡è¯†ç¬¦<br>
è€Œ æ ‡å‡† C++ åˆ™ å– å‰ 255 ä¸ª å­—ç¬¦ ä½œä¸º æœ‰ æ•ˆ çš„ æ ‡è¯† ã€‚</p>
<p>æ¯ ä¸€ ä¸ª æ ‡è¯† ç¬¦ éƒ½ å…·æœ‰ å¦‚ ä¸‹ çš„ å‡  ä¸ª å±æ€§<br>
å€¼<br>
å€¼ ç±» å‹<br>
å å­— ã€<br>
å­˜ å‚¨ ç±» å‹<br>
ä½œ ç”¨åŸŸèŒƒå›´<br>
è¿ æ¥ ç±» å‹ ï¼ˆå¯ è§ æ€§)ã€<br>
ç”Ÿ å­˜ æœŸ ç­‰</p>
<p>C å‡½æ•° å‡½ æ•° å å…¶ å® å°±æ˜¯<br>
å‡½æ•° ä»£ç <br>
åœ¨ å†… å­˜ ä¸­ çš„ é¦– åœ° å€ åœ¨ ç¼–è¯‘ æ—¶ å°± å¯ ä»¥ ç¡®å®š å…¶ å€¼ å›  æ­¤ æ˜¯ ä¸€ ä¸ª å¸¸é‡ è¿™ æ˜¯ å®ƒ çš„ å€¼<br>
å€¼çš„ ç±» å‹ æ˜¯ å‡½æ•° æŒ‡é’ˆ ç±» å‹<br>
å­˜ å‚¨ ç±» å‹ é»˜è®¤ externï¼Œ é™¤ é å£°æ˜ ä¸º static;ï¼Œ<br>
ä½œ ç”¨ åŸŸ èŒƒå›´ä¸º æ–‡ä»¶ ä½œç”¨åŸŸ ;<br>
è¿æ¥ ç±» å‹ é»˜è®¤ ä¸º å¤– è¿æ¥ , é™¤é å£°æ˜ ä¸º static;<br>
ç”Ÿå­˜ æœŸ ä¸º æ°¸ä¹… ã€ˆ å³ é™æ€ )ã€‚</p>
<h3 id="è½¬ä¹‰åºåˆ—"><a class="header-anchor" href="#è½¬ä¹‰åºåˆ—">ğŸŒ³</a>è½¬ä¹‰åºåˆ—</h3>
<h3 id="è¿ç®—ç¬¦"><a class="header-anchor" href="#è¿ç®—ç¬¦">ğŸŒ³</a>è¿ç®—ç¬¦</h3>
<h4 id="ç®—æœ¯è¿ç®—ç¬¦-å…³ç³»è¿ç®—ç¬¦-é€»è¾‘è¿ç®—ç¬¦"><a class="header-anchor" href="#ç®—æœ¯è¿ç®—ç¬¦-å…³ç³»è¿ç®—ç¬¦-é€»è¾‘è¿ç®—ç¬¦">ğŸŒ³</a>ç®—æœ¯è¿ç®—ç¬¦ å…³ç³»è¿ç®—ç¬¦ é€»è¾‘è¿ç®—ç¬¦</h4>
<h4 id="å‡½æ•°è°ƒç”¨-ç±»å‹è½¬æ¢-æˆå‘˜é€‰æ‹©"><a class="header-anchor" href="#å‡½æ•°è°ƒç”¨-ç±»å‹è½¬æ¢-æˆå‘˜é€‰æ‹©">ğŸŒ³</a>å‡½æ•°è°ƒç”¨ ç±»å‹è½¬æ¢ æˆå‘˜é€‰æ‹©</h4>
<p>ç±»å‹è½¬æ¢è¿ç®—ç¬¦<br>
è¿è¡Œæ—¶ç±»å‹è¯†åˆ«è¿ç®—ç¬¦ï¼ˆtypeidï¼‰<br>
ä½œç”¨åŸŸè§£æ(::)<br>
åŠ¨æ€å†…å­˜åˆ†é… é‡Šæ”¾<br>
ç±»æˆå‘˜æŒ‡é’ˆè¿ç®—ç¬¦</p>
<h4 id="è¿ç®—ç¬¦åŸºæœ¬ç‰¹æ€§å°±æ˜¯ä¼˜å…ˆçº§å’Œç»“åˆå¾‹"><a class="header-anchor" href="#è¿ç®—ç¬¦åŸºæœ¬ç‰¹æ€§å°±æ˜¯ä¼˜å…ˆçº§å’Œç»“åˆå¾‹">ğŸŒ³</a>è¿ç®—ç¬¦åŸºæœ¬ç‰¹æ€§å°±æ˜¯ä¼˜å…ˆçº§å’Œç»“åˆå¾‹</h4>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230531133944.png" alt></p>
<h3 id="è¡¨è¾¾å¼"><a class="header-anchor" href="#è¡¨è¾¾å¼">ğŸŒ³</a>è¡¨è¾¾å¼</h3>
<h3 id="å¸¸é‡è¡¨è¾¾å¼-ç®—æœ¯è¡¨è¾¾å¼-å…³ç³»è¡¨è¾¾å¼-é€»è¾‘è¡¨è¾¾å¼-å¤åˆè¡¨è¾¾å¼-é€—å·è¡¨è¾¾å¼-æ¡ä»¶è¿ç®—ç¬¦è¡¨è¾¾å¼-ä½è¿ç®—è¡¨è¾¾å¼"><a class="header-anchor" href="#å¸¸é‡è¡¨è¾¾å¼-ç®—æœ¯è¡¨è¾¾å¼-å…³ç³»è¡¨è¾¾å¼-é€»è¾‘è¡¨è¾¾å¼-å¤åˆè¡¨è¾¾å¼-é€—å·è¡¨è¾¾å¼-æ¡ä»¶è¿ç®—ç¬¦è¡¨è¾¾å¼-ä½è¿ç®—è¡¨è¾¾å¼">ğŸŒ³</a>å¸¸é‡è¡¨è¾¾å¼ ç®—æœ¯è¡¨è¾¾å¼ å…³ç³»è¡¨è¾¾å¼ é€»è¾‘è¡¨è¾¾å¼ å¤åˆè¡¨è¾¾å¼ é€—å·è¡¨è¾¾å¼ æ¡ä»¶è¿ç®—ç¬¦è¡¨è¾¾å¼ ä½è¿ç®—è¡¨è¾¾å¼</h3>
<p>å¸¸é‡è¡¨è¾¾å¼åœ¨ç¼–è¯‘æ—¶å°±å¯æ±‚å€¼</p>
<p>èƒ½ å¤Ÿ åœ¨ ç¼–è¯‘ æ—¶ æ±‚ çš„ ç¨‹åº å…ƒ ç´  æ˜¯ å¦éœ€è¦ åˆ† é… è¿è¡Œ æ—¶ çš„ å­˜å‚¨ ç©ºé—´ å‘¢ ?</p>
<ol>
<li>
<p>åŸºæœ¬ æ•°æ® ç±» å‹ çš„ å­—é¢å¸¸é‡ æšä¸¾å¸¸é‡ ã€sizeof()ã€ å¸¸ é‡ è¡¨è¾¾ å¼ ç­‰ å°± ä¸éœ€è¦åˆ†é…å­˜å‚¨ ç©ºé—´ ï¼Œ å›  æ­¤ ä¹Ÿ æ²¡æœ‰ å­˜å‚¨ ç±»å‹</p>
</li>
<li>
<p>å­—ç¬¦ ä¸² å¸¸ é‡ ã€const å¸¸é‡ (å°¤å…¶ ADTUDT çš„ const å¯¹ ) éƒ½ è¦ åˆ†é… è¿è¡Œ æ—¶ çš„ å­˜å‚¨ ç©ºé—´ å³ æœ‰ ç‰¹å®š çš„ å­˜å‚¨ ç±» å‹</p>
</li>
</ol>
<p>åœ¨ ç”¨ è¿ç®— â€œ&amp;&amp;â€ çš„ è¡¨è¾¾ å¼ ï¼Œ è¦ å°½é‡ æŠŠ æœ‰ å¯ èƒ½ FALSE çš„ è¡¨è¾¾ å¼ æ”¾åœ¨ â€œ&amp;&amp;â€ çš„ å·¦è¾¹<br>
åœ¨ ç”¨ è¿ç®— â€œ||â€ çš„ è¡¨è¾¾ å¼ ä¸­ è¦ å°½é‡æŠŠ æœ‰å¯ èƒ½ TRUE å­è¡¨è¾¾å¼ â€œ||â€ å·¦è¾¹.</p>
<h3 id="åŸºæœ¬æ§åˆ¶ç»“æ„"><a class="header-anchor" href="#åŸºæœ¬æ§åˆ¶ç»“æ„">ğŸŒ³</a>åŸºæœ¬æ§åˆ¶ç»“æ„</h3>
<h3 id="é€‰æ‹©åˆ¤æ–­ç»“æ„"><a class="header-anchor" href="#é€‰æ‹©åˆ¤æ–­ç»“æ„">ğŸŒ³</a>é€‰æ‹©åˆ¤æ–­ç»“æ„</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">å‡è®¾ æœ‰ ä¸¤ ä¸ªæµ® ç‚¹ å˜é‡ x å’Œ yï¼Œ ç²¾ åº¦ å®šä¹‰ EPSILON = le<span class="number">-6</span>ï¼Œ åˆ™ é”™è¯¯ çš„ æ¯”è¾ƒ æ–¹å¼</span><br><span class="line">å¦‚ä¸‹:</span><br><span class="line">	<span class="keyword">if</span>(x = y) / éš å« é”™è¯¯ çš„ æ¯”è¾ƒ</span><br><span class="line">	<span class="keyword">if</span>(x != y) / éš å« é”™è¯¯ çš„ æ¯”è¾ƒ</span><br><span class="line">åº” è¯¥ è½¬åŒ– ä¸º æ­£ç¡® çš„ æ¯”è¾ƒ æ–¹å¼ :</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">abs</span>(x - y) &lt;= EPSILON) Ux Fy</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">abs</span>(x - y) &gt; EPSILON) Ux BEF y</span><br><span class="line">åŒ ç† ï¼Œx ä¸ é›¶ å€¼æ¯”è¾ƒ çš„ æ­£ç¡® æ–¹å¼ :</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">abs</span> (x) &lt;= EPSILON) /x ç­‰ <span class="number">0</span></span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">abs</span> (x) &gt; EPSILON) Ix REF <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>if (NULL == p)</p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230531135348.png" alt></p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230531135436.png" alt></p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230531135630.png" alt></p>
<p>æ•°ç»„ å…ƒ ç´  çš„ è®¿é—® æ˜¯ çœŸæ­£ çš„ éšæœº è®¿é—® ã€ˆ ç›´ æ¥åœ° å€ è®¡ç®— )ã€‚ å¦‚ æœ æ•´ä¸ª æ•°ç»„ èƒ½ åœ¨ ä¸€<br>
å†… å­˜ é¡µ ä¸­ å®¹çº³ ï¼Œ é‚£ ä¹ˆ åœ¨ å¯¹ æ•´ä¸ª æ•°ç»„ è¿›è¡Œæ“ä½œ çš„ è¿‡ ä¸­ è‡³å°‘ä¸ ä¼š äº† è®¿é—® æ•°ç»„ å…ƒ ç´ <br>
è€Œ å‡º ç° ç¼º é¡µ ä¸­ æ–­ é¡µ é¢ è°ƒåº¦ å’Œ é¡µ äº¤æ¢ ç­‰ æƒ…å†µ åª éœ€è¦ ä¸€æ¬¡ å¤– å­˜ è¯»å– æ“ä½œ å°± å¯ ä»¥<br>
æ•°ç»„ æ‰€ åœ¨ çš„ æ•´ä¸ª é¡µ é¢ å…¥ å†… å­˜ ç„¶ å ç›´æ¥ è®¿é—® å†… å­˜ å¯ äº†</p>
<p>åœ¨ ç¤ºä¾‹ 4-14 ä¸­ ï¼Œ å·¦ è¾¹ çš„ å†™æ³• æ¯” å³è¾¹ çš„ å†™æ³• å¤š æ‰§è¡Œ Nr] æ¬¡ é€»è¾‘ åˆ¤æ–­ å¹¶ ä¸”å‰ è€…<br>
çš„ è¿˜ è¾‘ åˆ¤æ–­ æ‰“ äº† å¾ªç¯ â€œæµæ°´ çº¿ â€ ä½œ ï¼Œ ä½¿ å¾— ç¼–è¯‘ å™¨ ä¸ èƒ½ å¯¹ å¾ªç¯ è¿›è¡Œ ä¼˜åŒ– å¤„ ï¼Œ<br>
é™ä½ äº† æ•ˆç‡ å¦‚ æœ å’Œ éå¸¸ å¤§ æœ€å¥½ é‡‡ç”¨ å³è¾¹ çš„ å†™æ³• å¯ ä»¥ æé«˜ æ•ˆç‡ å¦‚ æœ N éå¸¸ å° ï¼Œ<br>
ä¸¤ è€… æ•ˆç‡ å·®åˆ« å¹¶ä¸ æ˜æ˜¾ é‡‡ ç”¨ å·¦è¾¹ çš„ å†™æ³•æ¯”è¾ƒ ï¼Œ å›  ä¸º ç¨‹åº æ›´ åŠ  ç®€æ´ ã€‚</p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230531140922.png" alt></p>
<h2 id="2-ç¬¬äº”ç« -å¸¸é‡"><a class="header-anchor" href="#2-ç¬¬äº”ç« -å¸¸é‡">ğŸŒ³</a>2. ç¬¬äº”ç«  å¸¸é‡</h2>
<h3 id="å­—é¢å¸¸é‡"><a class="header-anchor" href="#å­—é¢å¸¸é‡">ğŸŒ³</a>å­—é¢å¸¸é‡</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">x = <span class="number">-100.25f</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> OPEN SUCCESS 0x00000001</span></span><br><span class="line"><span class="type">char</span> c = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="type">char</span> *pChar = <span class="string">&quot;abcdef&quot;</span>; / å– å­— ç¬¦ ä¸²å¸¸é‡çš„åœ°å€</span><br><span class="line">intt *pint = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">ä¿å­˜åœ¨ç¬¦å·è¡¨é‡Œ æ— æ³•å–åœ°å€</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘é“¾æ¥ç¯å¢ƒæ”¯æŒå¸¸é‡åˆå¹¶çš„ è¯·æ‰“å¼€</p>
<h3 id="ç¬¦å·å¸¸é‡"><a class="header-anchor" href="#ç¬¦å·å¸¸é‡">ğŸŒ³</a>ç¬¦å·å¸¸é‡</h3>
<p><code>#define</code> é¢„ç¼–è¯‘ä¼ªæŒ‡ä»¤ å­—é¢å¸¸é‡<br>
const åˆ†é…å­˜å‚¨ç©ºé—´ å¤–è¿æ¥</p>
<h3 id="c-ä¸­-constå®šä¹‰-çš„-å¸¸é‡-è¦-å…·ä½“æƒ…å†µ-å…·ä½“-å¯¹-å¾…"><a class="header-anchor" href="#c-ä¸­-constå®šä¹‰-çš„-å¸¸é‡-è¦-å…·ä½“æƒ…å†µ-å…·ä½“-å¯¹-å¾…">ğŸŒ³</a>C++ ä¸­ ï¼Œconstå®šä¹‰ çš„ å¸¸é‡ è¦ å…·ä½“æƒ…å†µ å…·ä½“ å¯¹ å¾…</h3>
<p>å¯¹ äº <strong>åŸºæœ¬æ•°æ® ç±» å‹ çš„ å¸¸é‡</strong> ç¼– è¯‘ å™¨ æŠŠ å®ƒ æ”¾ åˆ° ç¬¦å· è¡¨ ä¸­ è€Œä¸ åˆ† é… å­˜ å‚¨ç©ºé—´ ,<br>
è€Œ ADITVUDT çš„ <strong>const å¯¹ è±¡</strong> åˆ™ éœ€è¦ åˆ†é… å­˜å‚¨ ç©ºé—´ (å¤§å¯¹è±¡)ã€‚<br>
è¿˜ æœ‰ ä¸€ äº›æƒ…å†µ ä¸‹ä¹Ÿ éœ€è¦ åˆ† é… å­˜å‚¨ç©ºé—´ ï¼Œ<br>
ä¾‹å¦‚ å¼ºåˆ¶ å£°æ˜ ä¸º extern çš„ ç¬¦å·å¸¸é‡<br>
æˆ–è€… å– ç¬¦å·å¸¸é‡çš„åœ°å€ ç­‰ æ“ä½œ ï¼Œ<br>
éƒ½ å°†å¼ºè¿« ç¼–è¯‘ å™¨ ä¸º è¿™ äº› å¸¸é‡ åˆ† é… å­˜å‚¨ ç©ºé—´ ä»¥ æ»¡è¶³ ç”¨ æˆ· çš„ è¦ æ±‚</p>
<p>å¯¹äº <strong>åŸºæœ¬ æ•°æ® ç±» å‹ const å¸¸é‡</strong> ç¼– è¯‘å™¨ é‡æ–° åœ¨ å†… å­˜ ä¸­ åˆ›å»º å®ƒ çš„ ä¸€ ä¸ª <strong>æ‹·è´</strong><br>
ä½  é€šè¿‡ å…¶ åœ° å€ è®¿é—® åˆ° çš„ å°± è¿™ ä¸ª æ‹·è´ è€Œ é åŸå§‹çš„ ç¬¦å· å¸¸é‡</p>
<p>å¯¹ äº æ„é€  ç±» å‹ const å¸¸é‡ å® ä¸Š å®ƒ æ˜¯ ç¼–è¯‘ æ—¶ä¸ å…è®¸ä¿®æ”¹ çš„ å˜é‡ ï¼Œ<br>
å› æ­¤ å¦‚ æœ ä½  èƒ½ ç»• è¿‡ <strong>ç¼–è¯‘ å™¨ çš„ é™æ€ ç±» å‹ å®‰å…¨ æ£€æŸ¥æœº åˆ¶</strong> å°± å¯ ä»¥ åœ¨ è¿è¡Œ æ—¶ ä¿®æ”¹ å†… å­˜å• å…ƒï¼Œ</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">long</span> Ing = <span class="number">10</span>;</span><br><span class="line"><span class="type">long</span> *pl = (<span class="type">long</span>*)&amp;lng; / å– å¸¸ é‡ çš„ åœ° å€</span><br><span class="line">*pl = <span class="number">1000</span>; <span class="comment">//è¿‚å›ä¿®æ”¹</span></span><br><span class="line">cout &lt;&lt; *pl &lt;&lt; endl; / <span class="number">1000</span>ï¼Œ ä¿® æ”¹ çš„ æ˜¯ æ‹·è´ å†… å®¹ !</span><br><span class="line">cout &lt;&lt; Ing &lt;&lt; end]; / <span class="number">10</span>ï¼Œ åŸ å§‹ å¸¸é‡ å¹¶ æ²¡æœ‰ å˜ !</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Integer</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Integer</span>() : <span class="built_in">m_Ing</span>(<span class="number">100</span>) &#123; &#125;</span><br><span class="line">	<span class="type">long</span> m_Ing;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">const</span> Integer int_1;</span><br><span class="line">Integer *pInt = (Integer*)&amp;<span class="type">int</span> <span class="number">1</span>; <span class="comment">// å»é™¤å¸¸æ•°å±æ€§</span></span><br><span class="line">pint-&gt;m_Ing = <span class="number">1000</span>;</span><br><span class="line">cout &lt;&lt; pInt-&gt;m_Ing &lt;&lt; endl; <span class="comment">// 1000, ä¿®æ”¹const å¯¹è±¡</span></span><br><span class="line">cout &lt;&lt; int_].m_Ing &lt;&lt; endl; <span class="comment">// 1000, è¿‚å›ä¿®æ”¹æˆåŠŸ</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol>
<li>
<p>åœ¨ æ ‡å‡† C è¯­è¨€ ä¸­ ï¼Œconst ç¬¦å· å¸¸é‡ é»˜è®¤ æ˜¯ å¤– è¿ æ¥¼ ã€” åˆ† é… å­˜å‚¨ )ï¼Œ<br>
ä¹Ÿ å°±æ˜¯è¯´ä½ ä¸èƒ½åœ¨ä¸¤ä¸ªæˆ–ä»¥ä¸Šç¼–è¯‘å•å…ƒä¸­åŒæ—¶å®šä¹‰ä¸€ä¸ªåŒåçš„constç¬¦å·å¸¸é‡<br>
ä¹Ÿä¸èƒ½ æŠŠ ä¸€ ä¸ªconst ç¬¦å· å¸¸é‡ å®šä¹‰ æ”¾ åœ¨ ä¸€ ä¸ªå¤´æ–‡ä»¶ ä¸­ è€Œ åœ¨ å¤š ä¸ª ç¼–è¯‘ å•å…ƒ ä¸­ åŒæ—¶ åŒ…å« å¤´ æ–‡ä»¶</p>
</li>
<li>
<p>ä½† æ˜¯ åœ¨ æ ‡å‡† C++ constç¬¦å· å¸¸é‡é»˜è®¤ æ˜¯ å†… è¿æ¥ çš„ å›  æ­¤ å¯ ä»¥ å®šä¹‰ åœ¨ å¤´ æ–‡ä»¶ ã€‚<br>
å½“ åœ¨ ä¸ åŒ çš„ ç¼–è¯‘å•å…ƒ ä¸­ åŒæ—¶ åŒ…å« å¤´ æ–‡ä»¶ æ—¶ ç¼– è¯‘ å™¨ è®¤ä¸º å®ƒä»¬ æ˜¯ ä¸ åŒ çš„ ç¬¦å· å¸¸é‡<br>
å›  æ­¤æ¯ ä¸ª ç¼–è¯‘ å•å…ƒç‹¬ç«‹ ç¼–è¯‘ æ—¶ ä¼š åˆ† åˆ« ä¸º å®ƒä»¬ åˆ†é… å­˜ å‚¨ ç©ºé—´ ï¼Œ<br>
è€Œ åœ¨ è¿æ¥ æ—¶ è¿›è¡Œå¸¸é‡ åˆå¹¶</p>
</li>
</ol>
<h3 id="å¥‘çº¦æ€§å¸¸é‡"><a class="header-anchor" href="#å¥‘çº¦æ€§å¸¸é‡">ğŸŒ³</a>å¥‘çº¦æ€§å¸¸é‡</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">ç¤ºä¾‹ <span class="number">5</span><span class="number">-3</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ReadValue</span><span class="params">(<span class="type">const</span> <span class="type">int</span>&amp; num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; num;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> n= <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">ReadValue</span>(n); <span class="comment">// å¥‘çº¦æ€§ const, n è¢« çœ‹ åš const</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æšä¸¾å¸¸é‡"><a class="header-anchor" href="#æšä¸¾å¸¸é‡">ğŸŒ³</a>æšä¸¾å¸¸é‡</h3>
<p>æ ‡ C++è§„å®š æš ä¸¾ å¸¸é‡ çš„ å€¼ å¯ ä»¥ æ‰©å±• çš„ å¹¶ é å— é™ äº ä¸€ èˆ¬ çš„ æ•´ æ•° çš„ èŒƒå›´</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Gigantic</span></span><br><span class="line">&#123;</span><br><span class="line">	SMALL = <span class="number">10</span>,</span><br><span class="line">	GIGANTIC = <span class="number">300000000000</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è‡³äº åº•å±‚ å¦‚ ä½• å®ç° åˆ™ ä¾èµ– äº å…·ä½“ çš„ ç¯å¢ƒ å’Œ ç¼–è¯‘ å™¨ å‚å•† å¯ èƒ½ ä¼š ä¸ åŒ çš„ è¯­ä¹‰ ï¼Œ<br>
è¯· æŸ¥çœ‹ ç¼–è¯‘ å™¨ æ–‡æ¡£</p>
<p>ä»¥ C++ ç¨‹åº ä¸­ åº” å°½é‡ ä½¿ const æ¥ å®šä¹‰ ç¬¦å· å¸¸é‡ åŒ… æ‹¬ å­—ç¬¦ ä¸² å¸¸é‡ ã€‚</p>
<p>é é™æ€ const æ•°æ® æˆ å‘˜ æ˜¯ å±äº æ¯ ä¸€å¯¹ è±¡ çš„ æˆ å‘˜ <strong>åªåœ¨æŸä¸ªå¯¹è±¡ç”Ÿå­˜æœŸå†…æ˜¯å¸¸é‡</strong><br>
è€Œ å¯¹ äº æ•´ä¸ª ç±» æ¥ è¯´ å®ƒ æ˜¯ å¯ å˜ ï¼Œ<br>
é™¤é static constã€‚</p>
<p>å›  ä¸º ç±» å¯ ä»¥ åˆ›å»º å¤š ä¸ª å¯¹ è±¡ ä¸ åŒ çš„ å¯¹ è±¡ const æ•°æ® æˆå‘˜ çš„ å¯ä»¥ ä¸ åŒ</p>
<p>ä¸ èƒ½ åœ¨ç±»å£°æ˜ ä¸­åˆå§‹ åŒ– é é™æ€ const æ•°æ®</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">const</span> <span class="type">int</span> SIZE = <span class="number">100</span>;   / é”™è¯¯ ä¼ å›¾ åœ¨ ç±» å£°æ˜ ä¸­åˆå§‹ <span class="type">const</span> æ•°æ® å‘˜</span><br><span class="line">	<span class="type">int</span> array[SIZE];           / /é”™è¯¯ æœª çŸ¥ SIZE</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>é é™ const æ•°æ® å‘˜ çš„åˆå§‹åŒ– åª èƒ½ åœ¨ ç±» çš„ æ„é€  å‡½æ•° çš„åˆå§‹ åŒ– åˆ—è¡¨ ä¸­ è¿›è¡Œ</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line">	...</span><br><span class="line">	<span class="built_in">A</span>(<span class="type">int</span> size); / æ„é€  å‡½æ•°</span><br><span class="line">	<span class="type">const</span> <span class="type">int</span> SIZE ;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">A::<span class="built_in">A</span>(<span class="type">int</span> size) : <span class="built_in">SIZE</span>(size) / æ„é€  å‡½æ•° çš„åˆå§‹ åŒ– åˆ—è¡¨</span><br><span class="line">&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line">A all00);   <span class="comment">// HR a HK SIZE (AA 100</span></span><br><span class="line"><span class="function">A <span class="title">b</span><span class="params">(<span class="number">200</span>)</span>   <span class="comment">// AR b HY SIZE &#123;4% 200</span></span></span><br></pre></td></tr></table></figure>
<p>æ€æ ·æ‰èƒ½ å»ºç«‹ åœ¨ æ•´ä¸ª ç±» ä¸­ éƒ½ æ’å®š çš„ å¸¸é‡ ? åˆ« æŒ‡æœ› const æ•°æ® æˆå‘˜ äº† ï¼Œ<br>
åº”è¯¥ ç”¨ ç±» ä¸­ çš„ æš ä¸¾ å¸¸ é‡ æ¥ å®ç°<br>
æšä¸¾ å¸¸ é‡ ä¸ä¼š å ç”¨ å¯¹ è±¡ çš„ å­˜å‚¨ ç©ºé—´ å®ƒ ä»¬ åœ¨ ç¼–è¯‘ æ—¶ è¢« å…¨ éƒ¨ æ±‚ å€¼<br>
æ›´ ä½•å†µ å®ƒ å®šä¹‰çš„ æ˜¯ ä¸€ ä¸ª åŒ¿å æš ä¸¾ ç±» å‹<br>
æš ä¸¾ å¸¸ é‡ çš„ ç¼ºç‚¹ æ˜¯ ä¸ èƒ½ è¡¨ç¤º æµ® ç‚¹æ•° ã€ˆ å¦‚ PI-=3.14159) å’Œ å­—ç¬¦ä¸²</p>
<p>å¯ ä»¥ ç”¨ å¦ ä¸€ ç§ æ–¹æ³• æ¥ å®šä¹‰ ç±» çš„ æœ‰ å¯¹ è±¡ å…±äº« çš„ å¸¸é‡ ï¼Œå³ static constï¼Œ</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">ç¤ºä¾‹ <span class="number">5</span><span class="number">-8</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">public</span>: <span class="comment">// æœ‰ äº›è¯­è¨€ å®ç° å¯ èƒ½ ä¸ æ”¯æŒ è¿™æ · çš„åˆå§‹ åŒ– å¦‚ Visual C++</span></span><br><span class="line">	<span class="type">static</span> <span class="type">const</span> <span class="type">int</span> SIZE1 = <span class="number">100</span>; / é™æ€å¸¸é‡ å‘˜</span><br><span class="line">	<span class="type">static</span> <span class="type">const</span> <span class="type">int</span> SIZE2 = <span class="number">200</span>; / é™æ€ å¸¸é‡ å‘˜</span><br><span class="line">	<span class="keyword">private</span>:</span><br><span class="line">	<span class="type">int</span> array <span class="number">1</span>[SIZE1]; <span class="comment">// æ™®é€š å‘˜</span></span><br><span class="line">	<span class="type">int</span> array2[SIZE2]; <span class="comment">// æ™®é€š å‘˜</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="å®é™…-ç”¨-ä¸­-å¦‚-ä½•-å®š-ä¹‰-å¸¸é‡"><a class="header-anchor" href="#å®é™…-ç”¨-ä¸­-å¦‚-ä½•-å®š-ä¹‰-å¸¸é‡">ğŸŒ³</a>å®é™… ç”¨ ä¸­ å¦‚ ä½• å®š ä¹‰ å¸¸é‡</h3>
<h4 id="1-cç¨‹åº"><a class="header-anchor" href="#1-cç¨‹åº">ğŸŒ³</a>1. Cç¨‹åº</h4>
<h5 id="1-1-å¤šä¸ªç¼–è¯‘å•å…ƒæˆ–æ¨¡å—å…¬ç”¨"><a class="header-anchor" href="#1-1-å¤šä¸ªç¼–è¯‘å•å…ƒæˆ–æ¨¡å—å…¬ç”¨">ğŸŒ³</a>1.1 å¤šä¸ªç¼–è¯‘å•å…ƒæˆ–æ¨¡å—å…¬ç”¨</h5>
<p>1.1.1 åœ¨æŸä¸ªå…¬ç”¨å¤´æ–‡ä»¶ä¸­å°†ç¬¦å·å¸¸é‡<strong>å®šä¹‰ä¸ºstaticå¹¶åˆå§‹åŒ–</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// CommonDef.h </span></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">int</span> MAX+LENGTH =<span class="number">1024</span>;</span><br></pre></td></tr></table></figure>
<p>ç„¶åæ¯ä¸€ä¸ªä½¿ç”¨å®ƒçš„ç¼–è¯‘å•å…ƒ <code>#include</code> è¯¥å¤´æ–‡ä»¶å³å¯ï¼›<br>
1.1.2 åœ¨å¤´æ–‡ä»¶ä¸­ä½¿ç”¨ <strong>å®å®šä¹‰</strong><br>
1.1.3 åœ¨ æŸä¸ªå…¬ç”¨çš„å¤´æ–‡ä»¶ä¸­å°†ç¬¦å·å¸¸é‡å£°æ˜ä¸º<strong>extern</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// CommonDef.h</span></span><br><span class="line"><span class="keyword">extern</span> <span class="type">const</span> <span class="type">int</span> MAX_LENGTH;</span><br></pre></td></tr></table></figure>
<p>å¹¶ä¸”åœ¨æŸä¸ªæºæ–‡ä»¶ä¸­<strong>å®šä¹‰ä¸€æ¬¡</strong>;</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> MAX_LENGTH = <span class="number">1024</span>;</span><br></pre></td></tr></table></figure>
<p>ç„¶åæ¯ä¸ªä½¿ç”¨å®ƒçš„ç¼–è¯‘å•å…ƒ<code>#include</code> ä¸Šè¿°å¤´æ–‡ä»¶å³å¯<br>
1.1.4 æ•´å½¢å¸¸é‡ åœ¨æŸä¸ªå…¬ç”¨<strong>å¤´æ–‡ä»¶</strong>å®šä¹‰<strong>enum</strong>ç±»å‹ ç„¶ å æ¯ ä¸€ ä¸ªä½¿ ç”¨ å®ƒ çš„ ç¼– è¯¦å• <code>#include</code> è¯¥å¤´ æ–‡ä»¶ å³ å¯</p>
<h5 id="1-2-åªä¸ºä¸€ä¸ªç¼–è¯‘å•å…ƒä½¿ç”¨"><a class="header-anchor" href="#1-2-åªä¸ºä¸€ä¸ªç¼–è¯‘å•å…ƒä½¿ç”¨">ğŸŒ³</a>1.2 åªä¸ºä¸€ä¸ªç¼–è¯‘å•å…ƒä½¿ç”¨</h5>
<p>1.2.1 ç›´æ¥äºç¼–è¯‘å•å…ƒå¼€å¤´ä½ç½®å°†ç¬¦å·å¸¸é‡å®šä¹‰ä¸ºstatic å¹¶åˆå§‹åŒ–</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">foo.c</span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">int</span> MAX_LENGTH = <span class="number">1024</span>;</span><br></pre></td></tr></table></figure>
<p>1.2.2 åŒ1.1.1<br>
1.2.3 åŒ1.1.3 æˆ–åœ¨ç¼–è¯‘å•å…ƒå¼€å¤´å®šä¹‰enumç±»å‹</p>
<h4 id="2-c-ç¨‹åº"><a class="header-anchor" href="#2-c-ç¨‹åº">ğŸŒ³</a>2. C++ç¨‹åº</h4>
<h5 id="2-1-å¤šä¸ªç¼–è¯‘å•å…ƒæˆ–æ¨¡å—å…¬ç”¨"><a class="header-anchor" href="#2-1-å¤šä¸ªç¼–è¯‘å•å…ƒæˆ–æ¨¡å—å…¬ç”¨">ğŸŒ³</a>2.1 å¤šä¸ªç¼–è¯‘å•å…ƒæˆ–æ¨¡å—å…¬ç”¨</h5>
<p>2.1.1 åœ¨æŸ ä¸ª å…¬ç”¨ çš„ å¤´ æ–‡ä»¶ ä¸­ ç›´æ¥ åœ¨ æŸ å å­— ç©ºé—´ ä¸­ æˆ–è€… å…¨ å±€ å å­— ç©ºé—´ ä¸­ å®šä¹‰ ç¬¦å·å¸¸é‡ å¹¶ åˆå§‹ åŒ– æœ‰ æ— staticæ—  æ‰€ è°“ )ï¼Œ ä¾‹ :</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// CommonDef.h</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAXLENGTH = <span class="number">1024</span>;</span><br></pre></td></tr></table></figure>
<p>æ¯ä¸€ä¸ªä½¿ç”¨å®ƒçš„ç¼–è¯‘å•å…ƒ <code>#include</code> è¯¥ å¤´ æ–‡ä»¶ å³ å¯<br>
2.1.2 åœ¨ æŸ å…¬ç”¨ å¤´ æ–‡ä»¶ ä¸­ å¹¶ ä¸” åœ¨ æŸ å å­— ç©º é—´ ä¸­ æˆ–å…¨ å±€ å å­— ç©º é—´ ä¸­ å°† ç¬¦å· å¸¸é‡ å£°æ˜ä¸º extem çš„ ä¾‹ :</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// CommonDef.h</span></span><br><span class="line"><span class="keyword">extern</span> <span class="type">const</span> <span class="type">int</span> MAX LENGTH;</span><br></pre></td></tr></table></figure>
<p>å¹¶ ä¸”åœ¨ æŸ ä¸ª æº æ–‡ä»¶ ä¸­ å®šä¹‰ ä¸€æ¬¡ å¹¶ åˆå§‹ :</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> MAX_LENGTH = <span class="number">1024</span>;</span><br></pre></td></tr></table></figure>
<p>ç„¶å æ¯ ä¸€ ä¸ªä½¿ ç”¨ å®ƒ çš„ ç¼– è¯¦ å•å…ƒ æœº nclude ä¸Š è¿° å¤´ æ–‡ä»¶å³å¯<br>
2.1.3 åŒ1.1.3<br>
2.1.4  å®šä¹‰ ä¸º æŸ ä¸€ ä¸ª å…¬ç”¨ ç±»çš„ static const æ•°æ®æˆ å‘˜ å¹¶ åˆå§‹<br>
æˆ– è€…å®šä¹‰ä¸º ç±» å†… çš„ æš ä¸¾ ç±» å‹ ä¾‹ å¦‚ :</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Utility.h</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Utility</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">int</span> MAX LENGTH;</span><br><span class="line"><span class="keyword">enum</span> &#123;</span><br><span class="line">TIME_OUT= <span class="number">10</span></span><br><span class="line">hs</span><br><span class="line"><span class="comment">// Utility.cpp</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> Utility:: MAX LENGTH = <span class="number">1024</span>;</span><br></pre></td></tr></table></figure>
<p>ç„¶å æ¯ ä¸€ ä¸ªä½¿ ç”¨ å®ƒ çš„ ç¼– è¯¦ å•å…ƒ æœº nclude ä¸Š è¿° å¤´ æ–‡ä»¶å³å¯</p>
<h5 id="2-2-åªä¸ºä¸€ä¸ªç¼–è¯‘å•å…ƒä½¿ç”¨"><a class="header-anchor" href="#2-2-åªä¸ºä¸€ä¸ªç¼–è¯‘å•å…ƒä½¿ç”¨">ğŸŒ³</a>2.2 åªä¸ºä¸€ä¸ªç¼–è¯‘å•å…ƒä½¿ç”¨</h5>
<p>2.2.1 åŒ2.1.1<br>
2.2.2 ç›´æ¥ äº è¯¥ ç¼–è¯‘ å•å…ƒ ã€ˆ æº æ–‡ä»¶ å¼€å¤´ å®šä¹‰ ç¬¦å·<br>
é‡ å¹¶ åˆå§‹ ã€ˆ æœ‰ æ—  static æ— æ‰€ è°“ )ï¼Œ ä¾‹ å¦‚ :</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// foo.C</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAXLENGTH = <span class="number">1024</span>;</span><br></pre></td></tr></table></figure>
<p>2.2.3 åŒ1.2.3</p>
<h3 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“">ğŸŒ³</a>æ€»ç»“</h3>
<p>åœ¨ C ç¨‹åº ä¸­ ï¼Œconst ç¬¦å· å¸¸é‡ å®šä¹‰ çš„é»˜è®¤ è¿æ¥ ç±» (Linkage) æ˜¯ extern çš„ å³ å¤–è¿æ¥ (external linkage)ï¼Œ å°± å…¨ å±€ å˜é‡ ä¸€ æ ·<br>
å›  æ­¤ ï¼Œ å¦‚ æœ è¦ åœ¨ å¤´ æ–‡ä»¶ ä¸­ å®šä¹‰ å¿… é¡»ä½¿ç”¨ static å…³é”®å­— ï¼Œ<br>
è¿™ æ · æ¯ ä¸€ åŒ…å« å¤´ æ–‡ä»¶ çš„ ç¼–è¯‘ å•å…ƒ å°±ä¼š åˆ† åˆ« æœ‰ è¯¥ å¸¸é‡ çš„ ä¸€ä»½ç‹¬ç«‹å®š ä¹‰ å®ä½“ ã€ˆ å¦‚ åŒ ç›´æ¥ åœ¨ æ¯ ä¸€ ä¸ªæº æ–‡ä»¶ ä¸­ åˆ† åˆ« å®šä¹‰ ä¸€ )ï¼Œ<br>
å¦åˆ™ä¼š å¯¼è‡´ â€œredefinitionâ€çš„ ç¼–è¯‘ å™¨è¯Šæ–­ ä¿¡æ¯ ;<br>
å¦‚æœ åœ¨æº æ–‡ä»¶ ä¸­ å®šä¹‰ é™¤ é æ˜ç¡® æ”¹å˜ å®ƒ çš„ è¿æ¥ ç±» å‹ static ã€ˆ å®é™… ä¸Š æ˜¯ å­˜å‚¨ ç±» å‹ static, è¿æ¥ ç±» å‹ å†… è¿æ¥ ) çš„ ,<br>
å¦åˆ™ å…¶ä»– ç¼–è¯‘ å•å…ƒ å¯ ä»¥é€šè¿‡ externå£°æ˜ æ¥è®¿é—®</p>
<p>C++ ç¨‹åº ï¼Œconst ç¬¦å· å¸¸é‡å®šä¹‰ çš„ é»˜è®¤ è¿æ¥ ç±» å‹ å´ static çš„ å³ å†… è¿(Cinternal linkage)ï¼Œ<br>
å°± class çš„ å®šä¹‰ ä¸€ æ · è¿™å°±æ˜¯åœ¨ å¤´ æ–‡ä»¶ ä¸­ å®šä¹‰ è€Œ ä¸ éœ€è¦ staticå…³é”® å­— çš„ åŸå› </p>
<p>å­—ç¬¦ ä¸² å¸¸é‡ çš„ å®šä¹‰ å’Œ æ•´ å‹ å¸¸é‡ çš„ å®šä¹‰ å·®ä¸å¤š ï¼Œ ä½† æ˜¯å…¶ç±» å‹ <code>const char *</code>ï¼Œ å›  æ­¤<br>
ä»¬ å¸¸å¸¸ è¿™æ · å®šä¹‰ å®ƒä»¬ ;</p>
<p>const char* const ERR_DESP NO_MEMORY = â€œThere is no enough memory!â€;</p>
<p>å¯ ä»¥ åœ¨å¤´ æ–‡ä»¶ ä¸­ å®šä¹‰ å¹¶åˆå§‹ ï¼Œ ä¹Ÿ å¯ ä»¥ åœ¨ æº æ–‡ä»¶ ä¸­ å®šä¹‰ å¹¶ åˆå§‹ åŒ– ä½† æ˜¯ äºŒ è€… å·®åˆ« å¤§ :</p>
<ol>
<li>
<p>å¦‚ æœ åœ¨ å¤´ æ–‡ ä»¶ ä¸­ å®šä¹‰ å¹¶ åˆå§‹ åŒ– é‚£ åŒ…å« äº† è¯¥ å¤´ æ–‡ä»¶ çš„ æ¯ ä¸€ ä¸ª ç¼–è¯‘ å•å…ƒ<br>
ä¸ä»… ä¼š ä¸º ä¸€ä¸ª å¸¸é‡ æŒ‡é’ˆ å¸¸é‡ (const char * const) åˆ›å»º ä¸€ ä¸ªç‹¬ç«‹ çš„ æ‹·è´é¡¹ ï¼Œ<br>
è€Œ ä¸” ä¹Ÿ ä¼š ä¸º é‚£ä¸ª é•¿é•¿ çš„ å­—ç¬¦ ä¸² å­— é¢ é‡ åˆ›å»º ä¸€ ä¸ªç‹¬ç«‹ çš„ æ‹·è´ é¡¹<br>
å°± ç›¸å½“ äºåœ¨ æ¯ ä¸€ ä¸ª ç¼–è¯‘å•å…ƒ å†… åˆ† åˆ« å®š å’Œ åˆ å§‹åŒ–æ¯ ä¸€ ä¸ª å¸¸é‡ ï¼Œ ä¸€æ¬¡ ä¸€ ä¸ª æ ·<br>
è¿™æ˜¯ä¸ æ•´ å‹ æˆ–æµ®ç‚¹ å‹ å¸¸é‡ çš„ å®šä¹‰ ä¸ åŒ ã€ˆ å®ƒ ä»¬ åœ¨åˆå§‹åŒ– å®Œ å ä¸ å† éœ€è¦ é‚£ä¸ª å­—é¢<br>
è¥ )ã€‚<br>
å›  æ­¤ ï¼Œ æ¯ ä¸€ ä¸ª ç¼–è¯‘å•å…ƒ å†… è®¿é—®çš„ å­—ç¬¦ ä¸² å¸¸é‡ éƒ½ æ˜¯å®ƒ è‡ªå·± å•ç‹¬ åˆ›å»º :<br>
æ‹·è´ è¡¬é—´ çš„ å¼€é”€ å°± ä½“ç° åœ¨æ¯ ä¸€ å­—ç¬¦ ä¸² å­— é¢ é‡ çš„ç‹¬ç«‹æ‹·è´ ä¸Š ;</p>
</li>
<li>
<p>å¦‚ æœ é‡‡ ç”¨ æ–¹æ³• ï¼Œ åœ¨ å¤´ æ–‡ä»¶ ä¸­ å£°æ˜ æ‰€æœ‰ å¸¸é‡ æŒ‡é’ˆ å¸¸é‡ è€Œåœ¨ æº æ–‡ ä¸­ å®šä¹‰å¹¶åˆå§‹åŒ– å®ƒä»¬ ï¼Œ<br>
åˆ™ æ¯ ä¸€ åŒ…å« å¤´ æ–‡ä»¶ çš„ ç¼–è¯‘ å•å…ƒ è®¿é—® çš„ ä¸ ä»… æ˜¯ å¸¸é‡ æŒ‡é’ˆå¸¸é‡ çš„ å”¯ä¸€ å®ä½“<br>
è€Œ ä¸” å­— ç¬¦ ä¸² å­—é¢ å¸¸é‡ ä¹Ÿ æ˜¯ å”¯ä¸€ çš„å®ä½“<br>
è¿™å°± å¤§ èŠ‚çº¦ äº†å†… å­˜ è€Œå« ä¸ å¤±æ•ˆ ç‡ã€‚<br>
å½“ç„¶ æˆ‘ ä»¬ å®Œå…¨ å¯ ä»¥ æŠŠ å¸¸é‡ åˆå¹¶ çš„ ä¼˜åŒ– äº¤ ç»™ ç¼–è¯‘ å’Œ è¿æ¥ å™¨ æ¥ å®Œæˆ ä½† æ˜¯ æˆ‘ ä»¬</p>
</li>
</ol>
<p>è¿˜ æ˜¯ æå€¡ ç”± è‡ªå·± æ¥ ä¼˜åŒ– å¸¸é‡ çš„ å®šä¹‰ ã€‚</p>
<h2 id="3-å‡½æ•°"><a class="header-anchor" href="#3-å‡½æ•°">ğŸŒ³</a>3. å‡½æ•°</h2>
<p>å¯¹ äº** é™æ€ é“¾æ¥ åº“** çš„ å‡½æ•° åº“ æˆ– ç±» åº“ å¦‚ æœ ä½  è°ƒç”¨ äº† å…¶ ä¸­ çš„ å‡½æ•° ã€Šæ—  è®º æ˜¯ ç›´æ¥ è°ƒç”¨<br>
è¿˜ æ˜¯ é—´æ¥ è°ƒç”¨ )ï¼Œ<br>
é‚£ ä¹ˆ è¿æ¥ å™¨ ä» ç›¸åº” çš„ ä¸­ æå– è¿™ äº› å‡½æ•° çš„ å®ç° ä»£ç  å¹¶ æŠŠå®ƒä»¬ è¿æ¥åˆ° ä½  çš„ ç”¨ ç¨‹åº ;<br>
å¦‚ æœ ä½  æ²¡æœ‰ è°ƒç”¨ åº“ ä¸­ çš„ æŸ äº› å‡½æ•° åˆ™ è¿æ¥ å™¨ æ˜¯ä¸ ä¼šæŠŠ å®ƒä»¬ çš„ å®ç°ä»£ ç  è¿æ¥ è¿›æ¥ çš„ å³ ä½¿ è¯¥ åŒ…å« äº† æˆ ä¸Š ä¸‡ ä¸ª å‡½æ•°</p>
<p>å¦‚ æœ ä½  ç”¨ çš„ æ˜¯ åŠ¨æ€ é“¾æ¥(DLL)ï¼Œ åˆ™ è¿è¡Œ æ—¶ å¿…é¡» å°† æœ‰ DLL éƒ½ æ‰¾ åˆ° è¿è¡Œ ç¯å¢ƒ çš„ ç›¸åº” ç›®å½• ä¸‹</p>
<p>å¦‚ æœ ç¨‹ ä¸­ ä»»ä½• åœ° æ–¹ éƒ½ æ²¡æœ‰ è°ƒç”¨ ä½  è‡ªå·± ç¼–å†™ çš„ æŸ ä¸ª å‡½æ•° çš„ è¯<br>
ç¼–è¯‘å™¨ä¹Ÿä¸ ä¼š ä¸º å‡½æ•° ç”Ÿæˆ å¯ æ‰§è¡Œ ä»£ç </p>
<h3 id="å‡½æ•°åŸå‹-å®šä¹‰"><a class="header-anchor" href="#å‡½æ•°åŸå‹-å®šä¹‰">ğŸŒ³</a>å‡½æ•°åŸå‹ å®šä¹‰</h3>
<p>æ—©å…ˆ C è¯­è¨€ å­˜åœ¨ å‡½æ•° <strong>å‰ ç½® å£°æ˜</strong> çš„ æ¦‚å¿µ<br>
å›  ä¸º C è¯­è¨€ ç¯å¢ƒ ä¸­ åŒ ä¸€ ä½œç”¨ åŸŸä¸­ ä¸ èƒ½ å‡º ç° åŒå çš„ å…¨ å±€ å‡½æ•°</p>
<p>æœ‰ äº† å‡½æ•° å‰ å£°æ˜ ï¼Œ å³ æŠŠ å‡½æ•° çš„ å®šä¹‰ ä½“ æ”¾ åœ¨ å‡½æ•° è°ƒç”¨ å é¢ çš„ ä»»ä½• åœ° æ–¹ ä¹Ÿ æ—  ï¼Œè¿æ¥ å™¨åœ¨ è¿æ¥ æ—¶ èƒ½ å¤Ÿ æ‰¾åˆ° ã€‚</p>
<p>æ˜¯ å‡½æ•° å‰ ç½® å£°æ˜ å¹¶ æ²¡æœ‰ ç»™ å‡º å‡½æ•° å¯ æ¥å— çš„ å‚æ•° ç±» å‹å’Œ ä¸ª æ•°<br>
äº æ˜¯ ç¼–è¯‘ å™¨ æ—  æ³•å¯¹ å‡½æ•° è°ƒç”¨ è¯­å¥ æ‰§è¡Œé™æ€ ç±» å‹ å®‰å…¨ æ£€æŸ¥<br>
ã€ˆ å³ æ£€æŸ¥ å® å‚ä¸å‚ çš„ ä¸ª æ•° ç±» å‹ åŠ é¡ºåº ç­‰ æ˜¯ å‘ˆ é… )ã€‚</p>
<p>å¯¼è‡´ æ­£ç¡® çš„ å‚æ•° ä¼ é€’ ä» è€Œ å‡º ç° è¿è¡Œæ—¶ é”™è¯¯ ç”šè‡³ ç ´å å †æ ˆ</p>
<p>è§£å†³ è¿™ ä¸€é—®é¢˜ çš„ æ–¹æ³• å°± æ˜¯ä½¿ ç”¨ å‡½æ•° åŸå‹ (ANSIISO C ä» C++ å€Ÿé‰´ äº† å‡½æ•° åŸå‹ )ã€‚</p>
<p>{ ä½œ ç”¨ åŸŸ [å‡½æ•° çš„ è¿æ¥è§„èŒƒ ] è¿”å› ç±» [å‡½æ•° çš„ è°ƒç”¨ è§„èŒƒ ] å‡½æ•° (ç±» 1 [ å½¢ å‚ 1]ï¼Œç±»å‹ 2 [å½¢å‚ 2], â€¦);</p>
<p>å‡½æ•°è°ƒç”¨ ä¸­ å‚æ•° ä¼ é€’ æœ¬ è´¨ å°± ç”¨ å®å‚ æ¥ <strong>åˆå§‹ åŒ– å½¢ å‚</strong> è€Œ ä¸ æ˜¯ æ›¿æ¢ å½¢å‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(<span class="type">int</span> n, <span class="type">char</span> *p)</span></span>; dni p æ˜¯ å½¢å‚</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;<span class="keyword">class</span> <span class="title class_">C</span>&#123;...&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">char</span> *q = â€œabcdâ€;</span><br><span class="line">	<span class="built_in">f</span>(<span class="number">5</span>, q); /<span class="number">5</span> å’Œ q æ˜¯ å®å‚</span><br><span class="line">	C&lt;<span class="type">int</span>&gt; a; /<span class="type">int</span> æ˜¯å® å‚</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å‡½æ•°å †æ ˆ"><a class="header-anchor" href="#å‡½æ•°å †æ ˆ">ğŸŒ³</a>å‡½æ•°å †æ ˆ</h3>
<p>å‡½æ•° å †æ ˆ å®é™… ä¸Š ä½¿ ç”¨ çš„ æ˜¯ ç¨‹åº çš„ å †æ ˆ å†… å­˜ ç©ºé—´ ï¼Œ è™½ ç„¶ ç¨‹åº çš„ å †æ ˆ æ®µ æ˜¯ ç³»ç»Ÿç¨‹åº åˆ† é… çš„ ä¸€ ç§ é™æ€ æ•°æ® ï¼Œ ä½† æ˜¯ å‡½æ•° å †æ ˆ å´ æ˜¯ åœ¨ è°ƒç”¨ åˆ° å®ƒ çš„ æ—¶ å€™ æ‰ åŠ¨ æ€ åˆ† é…</p>
<p>å‡½æ•° å †æ ˆ å´ æ˜¯ åœ¨ è°ƒç”¨ åˆ° å®ƒ çš„ æ—¶ å€™ æ‰ åŠ¨ æ€ åˆ† é…</p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/desktop/%E7%AC%AC5%E7%AF%87_C_C_%20%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80%E4%B8%8E%E7%A8%8B%E5%BA%8F%E6%A0%88%20-%20%E7%9F%A5%E4%B9%8E%20(2023_6_1%2002_50_50).html" alt></p>
<p><a href="https://www.zhihu.com/column/c_1277937360727257088">C/C++ ä¿®é“é™¢ - çŸ¥ä¹ (zhihu.com)</a></p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/desktop/%E6%B5%85%E8%B0%88%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80%20(2023_6_1%2002_57_45).html" alt></p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230601024956.png" alt></p>
<p><strong>æ ˆæ®µï¼š</strong></p>
<p>1. ä¸ºå‡½æ•°å†…éƒ¨çš„å±€éƒ¨å˜é‡æä¾›å­˜å‚¨ç©ºé—´ã€‚<br>
ã€€ã€€2. è¿›è¡Œå‡½æ•°è°ƒç”¨æ—¶ï¼Œå­˜å‚¨â€œè¿‡ç¨‹æ´»åŠ¨è®°å½•â€ã€‚<br>
ã€€ã€€3. ç”¨ä½œæš‚æ—¶å­˜å‚¨åŒºã€‚å¦‚è®¡ç®—ä¸€ä¸ªå¾ˆé•¿çš„ç®—æœ¯è¡¨è¾¾å¼æ—¶ï¼Œå¯ä»¥å°†éƒ¨åˆ†è®¡ç®—ç»“æœå‹å…¥å †æ ˆã€‚</p>
<p><strong>å †ï¼š</strong></p>
<p>å †èƒ½å¤Ÿæ ¹æ®éœ€è¦è‡ªåŠ¨å¢é•¿ã€‚å †åŒºåŸŸæ˜¯ç”¨æ¥åŠ¨æ€åˆ†é…çš„å†…å­˜ç©ºé—´ï¼Œç”¨ malloc å‡½æ•°ç”³è¯·çš„ï¼Œç”¨freeå‡½æ•°é‡Šæ”¾ã€‚callocã€reallocå’Œmallocç±»ä¼¼ï¼šå‰è€…è¿”å›æŒ‡é’ˆçš„ä¹‹å‰æŠŠåˆ†é…å¥½çš„å†…å­˜å†…å®¹éƒ½æ¸…ç©ºä¸ºé›¶ï¼›åè€…æ”¹å˜ä¸€ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å†…å­˜å—çš„å¤§å°ï¼Œå¯ä»¥æ‰©å¤§å’Œç¼©å°ï¼Œå®ƒç»å¸¸æŠŠå†…å­˜æ‹·è´åˆ°åˆ«çš„åœ°æ–¹ç„¶åå°†æ–°åœ°å€è¿”å›ã€‚</p>
<p><strong>æ•°æ®æ®µï¼ˆé™æ€å­˜å‚¨åŒºï¼‰ï¼š</strong></p>
<p>åŒ…æ‹¬BSSæ®µï¼ˆBlock Started by Symbolï¼‰çš„æ•°æ®æ®µã€‚BSSæ®µå­˜å‚¨æœªåˆå§‹åŒ–æˆ–åˆå§‹åŒ–ä¸º0çš„å…¨å±€å˜é‡ã€é™æ€å˜é‡ï¼Œå…·ä½“ä½“ç°ä¸ºä¸€ä¸ªå ä½ç¬¦ï¼Œå¹¶ä¸ç»™è¯¥æ®µçš„æ•°æ®åˆ†é…ç©ºé—´ï¼Œåªæ˜¯è®°å½•æ•°æ®æ‰€éœ€ç©ºé—´çš„å¤§å°ã€‚æ•°æ®æ®µå­˜å‚¨ç»è¿‡åˆå§‹åŒ–çš„å…¨å±€å’Œé™æ€å˜é‡ã€‚</p>
<p><strong>ä»£ç æ®µï¼š</strong></p>
<p>åˆç§°ä¸ºæ–‡æœ¬æ®µã€‚å­˜å‚¨å¯æ‰§è¡Œæ–‡ä»¶çš„æŒ‡ä»¤ï¼›ä¹Ÿæœ‰å¯èƒ½åŒ…å«ä¸€äº›åªè¯»çš„å¸¸æ•°å˜é‡ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²å¸¸é‡ç­‰ã€‚</p>
<p>.**rodataæ®µï¼š**å­˜æ”¾åªè¯»æ•°æ®ï¼Œæ¯”å¦‚printfè¯­å¥ä¸­çš„æ ¼å¼å­—ç¬¦ä¸²å’Œå¼€å…³è¯­å¥çš„è·³è½¬è¡¨ã€‚ä¹Ÿå°±æ˜¯ä½ æ‰€è¯´çš„å¸¸é‡åŒºã€‚ä¾‹å¦‚ï¼Œå…¨å±€ä½œç”¨åŸŸä¸­çš„ const int ival = 10ï¼Œivalå­˜æ”¾åœ¨.rodataæ®µï¼›å†å¦‚ï¼Œå‡½æ•°å±€éƒ¨ä½œç”¨åŸŸä¸­çš„printf(â€œHello world %d\nâ€, c);è¯­å¥ä¸­çš„æ ¼å¼å­—ç¬¦ä¸²&quot;Hello world %d\n&quot;ï¼Œä¹Ÿå­˜æ”¾åœ¨.rodataæ®µã€‚</p>
<p>ä½†æ˜¯æ³¨æ„å¹¶ä¸æ˜¯æ‰€æœ‰çš„å¸¸é‡éƒ½æ˜¯æ”¾åœ¨å¸¸é‡æ•°æ®æ®µçš„ï¼Œå…¶ç‰¹æ®Šæƒ…å†µå¦‚ä¸‹ï¼š</p>
<p>1ï¼‰æœ‰äº›ç«‹å³æ•°ä¸æŒ‡ä»¤ç¼–è¯‘åœ¨ä¸€èµ·ç›´æ¥æ”¾åœ¨ä»£ç æ®µã€‚</p>
<p>2ï¼‰å¯¹äºå­—ç¬¦ä¸²å¸¸é‡ï¼Œç¼–è¯‘å™¨ä¼šå»æ‰é‡å¤çš„å¸¸é‡ï¼Œè®©ç¨‹åºçš„æ¯ä¸ªå­—ç¬¦ä¸²å¸¸é‡åªæœ‰ä¸€ä»½ã€‚</p>
<p>3ï¼‰ç”¨æ•°ç»„åˆå§‹åŒ–çš„å­—ç¬¦ä¸²å¸¸é‡æ˜¯æ²¡æœ‰æ”¾å…¥å¸¸é‡åŒºçš„ã€‚</p>
<p>4ï¼‰ç”¨constä¿®é¥°çš„å…¨å±€å˜é‡æ˜¯æ”¾å…¥å¸¸é‡åŒºçš„ï¼Œä½†æ˜¯ä½¿ç”¨constä¿®é¥°çš„å±€éƒ¨å˜é‡åªæ˜¯è®¾ç½®ä¸ºåªè¯»èµ·åˆ°é˜²æ­¢ä¿®æ”¹çš„æ•ˆæœï¼Œæ²¡æœ‰æ”¾å…¥å¸¸é‡åŒºã€‚<br>
ã€€ã€€5ï¼‰æœ‰äº›ç³»ç»Ÿä¸­rodataæ®µæ˜¯å¤šä¸ªè¿›ç¨‹å…±äº«çš„ï¼Œç›®çš„æ˜¯ä¸ºäº†æé«˜ç©ºé—´çš„åˆ©ç”¨ç‡ã€‚</p>
<p>æ³¨æ„ï¼šç¨‹åºåŠ è½½è¿è¡Œæ—¶ï¼Œ.rodataæ®µå’Œ.textæ®µé€šå¸¸åˆå¹¶åˆ°ä¸€ä¸ªSegmentï¼ˆText Segmentï¼‰ä¸­ï¼Œæ“ä½œç³»ç»Ÿå°†è¿™ä¸ªSegmentçš„é¡µé¢åªè¯»ä¿æŠ¤èµ·æ¥ï¼Œé˜²æ­¢æ„å¤–çš„æ”¹å†™</p>
<h3 id="å‡½æ•°è°ƒç”¨è§„èŒƒ-è°ƒç”¨çº¦å®š-callingconvention"><a class="header-anchor" href="#å‡½æ•°è°ƒç”¨è§„èŒƒ-è°ƒç”¨çº¦å®š-callingconvention">ğŸŒ³</a>å‡½æ•°è°ƒç”¨è§„èŒƒ  è°ƒç”¨çº¦å®š ã€ˆCallingConvention)ã€‚</h3>
<p>å‡½ æ•° è°ƒç”¨ è§„èŒƒ å†³å®š äº† å‡½æ•° è°ƒç”¨ çš„ **å® å‚ å‹ æ ˆ é€€ æ ˆ åŠ å †æ ˆ é‡Šæ”¾ çš„ æ–¹å¼ **</p>
<p>Windows ç¯å¢ƒ ä¸‹ å¸¸ç”¨ çš„ è°ƒç”¨ è§„èŒƒ :<br>
(1) <code>_cdecl</code>: è¿™ æ˜¯ CHHC å‡½æ•° çš„ é»˜è®¤ è°ƒç”¨ è§„èŒƒ ,å‚æ•° ä»å³ å‘ å·¦ ä¾æ¬¡ ä¼ é€’ å¹¶ å‹ å…¥<br>
å †æ ˆ ç”± è°ƒç”¨ å‡½æ•° è´Ÿè´£ å †æ ˆ çš„ æ¸… é€€</p>
<p>(2) <code>_stdcall</code>ï¼Œ è¿™ æ˜¯ Win API å‡½æ•°ä½¿ ç”¨ çš„ è°ƒç”¨ è§„èŒƒ ã€‚ å‚ æ•° ä»å³ å‘ å·¦ ä¾æ¬¡ä¼ é€’ å¹¶ å‹ å…¥ å †æ ˆ å¤– è¢« è°ƒç”¨ å‡½æ•° è´Ÿè´£ æ‘Šæ ˆ çš„ æ¸… é€€<br>
è¯¥ è§„èŒƒ ç”Ÿæˆ çš„ å‡½æ•° ä»£ç â€œcdecl æ›´ å°ï¼Œ ä½† å½“ å‡½ æœ‰ å¯ å˜ä¸ª æ•° çš„ å‚æ•° æ—¶ ä¼š è½¬ ä¸º <code>_cdecl</code> è§„èŒƒ<br>
(3) <code>_thiscall</code>: æ˜¯ C++ é é™æ€ å‘˜ å‡½ æ•° çš„ é»˜è®¤ è°ƒç”¨ è§„èŒƒ ä¸ èƒ½ ç”¨ ä¸ª æ•°å¯ å˜ å‚æ•°<br>
(4) <code>_ fastcall</code>: è¯¥è§„èŒƒ æ‰€ ä¿®é¥° çš„ å‡½æ•° çš„ å® å‚ å°† ç›´æ¥ ä¼ é€’ åˆ° CPU å¯„å­˜ å™¨ ä¸­ è€Œ ä¸<br>
æ˜¯ å†… å­˜ å †æ ˆ ä¸èƒ½ ç”¨ äº æˆ å‘˜ å‡½ æ•°</p>
<p>å‡¡æ˜¯ æ¥å£ å‡½æ•° å¿…é¡» æ˜¾ å¼ åœ° æŒ‡å®š å…¶ è°ƒç”¨ è§„èŒƒ é™¤ æ¥å£ å‡½æ•° ç±» çš„ éæ€ å‘˜ å‡½ non-static member function)ã€‚</p>
<h3 id="å‡½æ•°çš„è¿æ¥è§„èŒƒ"><a class="header-anchor" href="#å‡½æ•°çš„è¿æ¥è§„èŒƒ">ğŸŒ³</a>å‡½æ•°çš„è¿æ¥è§„èŒƒ</h3>
<p>åª è¦ å®ƒä»¬ä½¿ ç”¨ ä¸€ çš„ å‘˜ å¯¹ é½ æ–¹å¼ å’Œ å¸ƒå±€ æ–¹æ¡ˆ ã€ ä¸€ çš„ å‡½æ•° è°ƒç”¨ è§„èŒƒ ã€ ä¸€ è‡´ virtual function å®ç° æ–¹å¼ æ€» ä¹‹å°± æ˜¯ ä¸€ è‡´ C++ å¯¹ è±¡ æ¨¡å‹</p>
<h3 id="å‚æ•°ä¼ é€’è§„åˆ™"><a class="header-anchor" href="#å‚æ•°ä¼ é€’è§„åˆ™">ğŸŒ³</a>å‚æ•°ä¼ é€’è§„åˆ™</h3>
<p>C è¯­è¨€ , å‡½æ•° çš„ å‚æ•° å’Œ è¿”å› çš„ä¼ é€’å¼ æœ‰ ä¸¤ : å€¼ä¼ é€’ (pass by value) å’Œ åœ° å€ä¼ é€’ ã€ˆ å³ æŒ‡é’ˆ ä¼ é€’ ï¼Œpass by pointer)</p>
<p>C++è¯­è¨€ ä¸­ å¢åŠ  äº† å¼•ç”¨ ä¼ é€’ ã€ˆpass by reference)ã€‚</p>
<p>å¦‚ æœ å‡½ æ•° æœ‰ å‚æ•° é‚£ä½¿ void è€Œ ä¸ è¦ ç©º ç€<br>
è¿™ æ˜¯ å› ä¸º æ ‡å‡† C æŠŠ çš„ å‚æ•° åˆ—è¡¨ è§£é‡Š ä¸º å¯ ä»¥ æ¥å—ä»»ä½• ç±» å’Œ ä¸ª æ•° çš„ å‚æ•°<br>
è€Œ æ ‡å‡† C++ åˆ™ æŠŠ ç©º çš„ å‚æ•° åˆ—è¡¨ è§£é‡Š ä¸º å¯ ä»¥ æ¥å—ä»»ä½• å‚æ•°<br>
åœ¨ ç§»æ¤ C+HC ç¨‹åº æ—¶ å°¤å…¶ è¦ æ³¨æ„ è¿™ æ–¹é¢ çš„ ä¸ åŒ</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">SetValue</span><span class="params">(<span class="type">int</span> width, <span class="type">int</span> height)</span></span>; / è‰¯å¥½ çš„ é£æ ¼</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SetValue</span><span class="params">(<span class="type">int</span>, <span class="type">int</span>)</span></span>; / ä¸ è‰¯ é£æ ¼</span><br><span class="line"><span class="function"><span class="type">float</span> <span class="title">GetValue</span><span class="params">(<span class="type">void</span>)</span></span>; / è‰¯å¥½ çš„ é£æ ¼</span><br><span class="line"><span class="function"><span class="type">float</span> <span class="title">GetValue</span><span class="params">()</span></span>; / ä¸ è‰¯ çš„ é£æ ¼</span><br></pre></td></tr></table></figure>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230601050908.png" alt></p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230601051429.png" alt></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">String <span class="keyword">operator</span> + (<span class="type">const</span> String &amp;lh, <span class="type">const</span> String &amp;rh)</span><br><span class="line">| &#123;</span><br><span class="line">	| String temp;</span><br><span class="line">	temp.m_data = <span class="keyword">new</span> <span class="type">char</span>[<span class="built_in">strljen</span>(s<span class="number">1.</span>m_data) + <span class="built_in">strlen</span>(s<span class="number">2.</span>m_data) + <span class="number">1</span>]];</span><br><span class="line">	<span class="built_in">strcpy</span>(temp.m_data, s<span class="number">1.</span>m_data);</span><br><span class="line">	<span class="built_in">strcat</span>(temp.m_data, s<span class="number">2.</span>m_data);</span><br><span class="line">	retumtemp; /æ‰§è¡Œ string å¯¹ è±¡ åŠ å…¶ å­—ç¬¦ ä¸² å†… å®¹ çš„ æ‹·è´</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹ äºç›¸ åŠ  å‡½æ•° åº” å½“ ç”¨ â€œè¿”å› å¯¹ è±¡ å€¼ çš„ æ–¹å¼ è¿”å› String å¯¹ è±¡ è¿™ å°†æŠŠ å±€ éƒ¨ å¯¹ temp åŠ å…¶ çœŸæ­£ çš„ å­—ç¬¦ ä¸² å€¼ æ‹·è´ ä¸€ ç»™ è°ƒç”¨ ç¯å¢ƒ çš„ æ¥æ”¶ è€… å¦‚ æœ æ”¹ â€œè¿”å› å¼•ç”¨ â€ é‚£ ä¹ˆ å‡½æ•° è¿”å›å€¼ æ˜¯ä¸€ ä¸ªæŒ‡å‘ å±€ éƒ¨ å¯¹ ttmp çš„ â€œå¼•ç”¨ â€( å³ åœ° å€ )ï¼Œ è€Œ temp åœ¨å‡½æ•° ç»“æŸ æ—¶ è¢« è‡ªåŠ¨ é”€æ¯ å°† å¯¼è‡´ è¿”å› â€œå¼•ç”¨ â€æ— æ•ˆ</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">char</span> * <span class="title">Func</span><span class="params">(<span class="type">void</span>)</span> &quot; </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">char</span> str[] = <span class="string">&quot;hello world&quot;</span>; /str æ•°ç»„ åˆ›å»º åœ¨ å‡½æ•° å †æ ˆ ä¸Š ï¼Œ å¹¶ ç”¨ å­—ç¬¦ ä¸² / å¸¸é‡ æ¥ åˆå§‹ åŒ– åœ¨ æœ«å°¾ è‡ªåŠ¨ æ·»åŠ  ^<span class="number">0</span>â€ </span><br><span class="line">	cout &lt;&lt; <span class="built_in">sizeof</span>(str) &lt;&lt; endl; </span><br><span class="line">	HA2 cout &lt;&lt; <span class="built_in">strlen</span>(str) &lt;&lt; end]; </span><br><span class="line">	#<span class="number">11</span> <span class="keyword">return</span> str; / è¯¥ è¯­å¥ å­˜åœ¨ éšæ‚£ ï¼Œstr æŒ‡å‘ çš„ å†… å­˜å• å…ƒ å°† è¢« é‡Šæ”¾ &#125; ä½† ä¸‹ ç¨‹åº åˆ™ æ˜¯ æ­£ç¡® </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">const</span> <span class="type">char</span> * <span class="title">Func</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">const</span> <span class="type">char</span> *p = <span class="string">&quot;hello world&quot;</span>; / å­—ç¬¦ ä¸² å¸¸é‡ å­˜æ”¾ åœ¨ ç¨‹åº çš„ é™æ€ æ•°æ® åŒº</span><br><span class="line">	/ æ¥ å°¾ è‡ªåŠ¨ æ·»åŠ  \<span class="number">0</span>&#x27;</span><br><span class="line">	cout &lt;&lt; <span class="built_in">sizeof</span>(p) &lt;&lt; endl; HA</span><br><span class="line">	cout &lt;&lt; <span class="built_in">strlen</span>(p) &lt;&lt; endl; HWA</span><br><span class="line">	<span class="keyword">return</span> p; / è¿”å› å­—ç¬¦ ä¸²å¸¸é‡ çš„ åœ° å€</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230601053851.png" alt><br>
â€œåˆ›å»º ä¸€ä¸ª ä¸´æ—¶ å¯¹ å¹¶ è¿”å› å®ƒ â€ çš„ è¿‡ç¨‹ æ˜¯ ä¸ åŒ çš„ï¼Œ<strong>ç¼– è¯‘ å™¨</strong>å¯ ä»¥ ç›´æ¥ æŠŠ ä¸´æ—¶ å¯¹ è±¡ åˆ› å»º å¹¶åˆå§‹ åŒ– <strong>å¤– éƒ¨ å­˜å‚¨ å•å…ƒ</strong> ä¸­ çœ äº† æ‹·è´ å’Œ æ æ„ å¼€é”€ æ é«˜ äº† æ•ˆç‡</p>
<h3 id="å­˜å‚¨ç±»å‹ä»¥åŠä½œç”¨åŸŸè§„åˆ™"><a class="header-anchor" href="#å­˜å‚¨ç±»å‹ä»¥åŠä½œç”¨åŸŸè§„åˆ™">ğŸŒ³</a>å­˜å‚¨ç±»å‹ä»¥åŠä½œç”¨åŸŸè§„åˆ™</h3>
<h3 id="å­˜å‚¨ç±»å‹"><a class="header-anchor" href="#å­˜å‚¨ç±»å‹">ğŸŒ³</a>å­˜å‚¨ç±»å‹</h3>
<p>extern ã€auto ã€staticã€registerï¼Œ</p>
<p>extern å’Œ static ç”¨ æ¥æ ‡è¯†æ°¸ä¹… ç”Ÿå­˜ æœŸ é™ çš„ å˜é‡ å’Œ å‡½æ•°<br>
è€Œ auto å’Œ register åˆ™ ç”¨ æ¥ æ ‡è¯† ä¸´æ—¶ ç”Ÿå­˜ æœŸ é™ çš„ å˜é‡</p>
<p>å…¨ å±€ å˜é‡ å’Œ å…¨ å±€ å‡½æ•° çš„ å­˜å‚¨ ç±» å‹ extern èƒ½ å¤Ÿ å®šä¹‰ åœ¨ å®ƒä»¬ä¹‹ å çš„ åŒä¸€ä¸ª ç¼–è¯‘ å•å…ƒ å†… çš„ å‡½æ•° æ‰€ è°ƒç”¨<br>
å˜ é‡å’Œ å‡½æ•° æ˜¾ å¼ åœ° åŠ  ä¸Š exterm å£°æ˜ ï¼Œé‚£ä¹ˆ å…¶ä»– ç¼–è¯‘ å•å…ƒ ä¸­ çš„ å‡½æ•° ä¹Ÿ èƒ½ è°ƒç”¨ å®ƒä»¬</p>
<p>æ˜¾å¼ç”Ÿå‘½ä¸ºstaticçš„å…¨å±€å˜é‡å’Œå…¨å±€å‡½æ•°å…·æœ‰staticå­˜å‚¨ç±»å‹ åªèƒ½è¢«åŒä¸€ä¸ªç¼–è¯‘å•å…ƒå†…çš„å‡½æ•°è°ƒç”¨</p>
<p>å±€ éƒ¨ å˜é‡ é»˜è®¤ å…·æœ‰ auto å­˜å‚¨ ç±» å‹ é™¤ é static æˆ– register æ¥ å®šä¹‰<br>
å®ƒä»¬ çš„ä½œç”¨ åŸŸ æ˜¯ç¨‹åº å—ä½œç”¨ åŸŸ è¿ æ¥ ç±» å‹ éƒ½ å†… è¿æ¥ åœ¨ è¿›å…¥ å‡½æ•° çš„ æ—¶å€™ åˆ›å»º ï¼Œåœ¨ å‡½æ•°é€€å‡º çš„æ—¶ å€™ é”€æ¯<br>
register å’Œ auto åª èƒ½ ç”¨ äº å£°æ˜ å±€ éƒ¨ å˜é‡ å’Œ å±€ éƒ¨ å¸¸é‡</p>
<p>å…¨å±€å¸¸é‡é»˜è®¤ å­˜å‚¨ç±»å‹ static<br>
é™¤éåœ¨å®šä¹‰äº†å®ƒçš„ç¼–è¯‘å•å…ƒä¹‹å¤–çš„å…¶ä»–ç¼–è¯‘å•å…ƒä¸­ æ˜¾å¼çš„ç”¨externå£°æ˜ å¦åˆ™ä¸èƒ½è¢«è®¿é—®<br>
ï¼ˆå°±æ˜¯æ‹¿è¿‡æ¥ç”¨çš„æ—¶å€™ åŠ ä¸ªextern å£°æ˜ä¸€ä¸‹ï¼‰</p>
<p>å±€ éƒ¨ ç¬¦å· å¸¸é‡ (æ³¨æ„ ä¸æ˜¯ å‡½æ•° å†… å‡º ç° çš„ å­—é¢ å¸¸é‡ ) çš„ é»˜è®¤ å­˜å‚¨ ç±» å‹ autoï¼Œ<br>
é™¤é æ˜¾å¼ åœ° å®šä¹‰ static æˆ– register.</p>
<p>æŠŠ é‚£äº› ç» å¸¸ ç”¨ çš„ å˜é‡ ä¾‹å¦‚ å¾ªç¯ è®¡æ•° å™¨ ç›´æ¥ æ”¾ åˆ° CPU å¯„å­˜ å™¨ ï¼Œ å¯ ä»¥é¿å… åœ¨ å¯„å­˜ å’Œ å†… å­˜ ä¹‹ é—´ é¢‘ åœ° äº¤æ¢ æ•°æ® å›  æ­¤ èƒ½ æé«˜ ç¨‹åº çš„ è¿è¡Œ æ•ˆç‡</p>
<h3 id="ä½œç”¨åŸŸè§„åˆ™"><a class="header-anchor" href="#ä½œç”¨åŸŸè§„åˆ™">ğŸŒ³</a>ä½œç”¨åŸŸè§„åˆ™</h3>
<p>åœ¨ æ ‡å‡† C è¯­è¨€ ï¼Œ è¿™ äº› èŒƒå›´åŒ…æ‹¬ æ–‡ä»¶ å‡½ æ•° ç¨‹ åº å’Œ å‡½æ•° åŸå‹</p>
<p>æ ‡å‡† C++ä¸­ é™¤äº† è¿™ 4 ç§ å¤– æœ‰ ä¸¤ ä½œç”¨ åŸŸ ç±» å‹ ç±» å’Œ å å­— ç©º é—´ å…¶ ä¸­ å å­— ç©º é—´ æ˜¯ å¯ ä»¥ è·¨ æ–‡ ä»¶ +</p>
<p>S (label) æ˜¯ å…·æœ‰ å‡½æ•° ä½œç”¨ åŸŸ çš„ æƒŸä¸€ ä¸€ ç§ æ ‡è¯† ç¬¦ è¿™ å°± æ˜¯ è¯´ ä¸ è®º ä½  çš„ æ ‡å·å®šä¹‰ åœ¨ å‡½æ•° ä¸­ çš„ å“ª ä¸€è¡Œ ï¼Œ ä¹Ÿ ä¸ è®º å®šä¹‰ åœ¨ å‡½æ•° å†… æ’•å¥—å¾— å¤š ä¹ˆ æ·± çš„ ç¨‹åº å— å†… å®ƒ éƒ½èƒ½å¤Ÿåœ¨ å‡½æ•° ä½“å†… ä»»ä½• ä¸€ ä¸ªåœ° æ–¹ è®¿é—® , å› æ­¤ ä¹Ÿ å«åš å‡½æ•° çº§ çš„ æ ‡è¯† ã€‚ æ ‡å· ä¸€ èˆ¬ ç”¨ åœ¨ goto| è¯­å¥ ï¼Œ å¦‚ æœ goto è¯­å¥ æ²¡æœ‰ ä½¿ ç”¨ åˆ° è¯¥ æ ‡å· é‚£ ä¹ˆ è¯¥ æ ‡å· å°† å¿½ç•¥</p>
<p>å³ ä½¿éƒ¨ å˜é‡ çš„ å­˜å‚¨ ç±» å‹ å£°æ˜ staticï¼Œ å®ƒ ä»ç„¶ å…·æœ‰ ç¨‹åº ä½œ ç”¨</p>
<p>åœ¨ å‡½æ•° ä¸­ æ¯å¥— çš„ ç¨‹åº å— å¯ ä»¥ å®šä¹‰ç›¸åŒ å å­— çš„ å˜é‡ åœ¨ å†… å±‚ çš„ å˜é‡ ç« è”½å¤– å±‚ çš„ åŒå å˜é‡<br>
å½“å±€ éƒ¨ å˜é‡ ä¸ æŸä¸€ ä¸ªå…¨ å±€ å˜é‡ åŒå ï¼Œ åœ¨ å‡½æ•° å†… éƒ¨å°†å² è”½ å…¨ å±€ å˜é‡<br>
å¦‚ æœ æŸ ä¸€ ä¸ª å‘˜ å‡½ æ•° å†… å®šä¹‰ äº† ä¸ ç±» çš„ æŸ ä¸€ ä¸ª æ•°æ®å‘˜ åŒ å çš„ å±€éƒ¨ å˜é‡ ï¼Œ é‚£ä¹ˆ è¿™ä¸ª å±€ éƒ¨ å˜é‡ å°† é®è”½ è¯¥ åŒå æ•°æ® æˆ ã€‚</p>
<p>å¦‚æœ ä¸€ ä¸ª æ ‡è¯† ç¬¦ èƒ½ å¤Ÿ åœ¨ å…¶ä»– ç¼–è¯‘ å•å…ƒ ä¸­ æˆ– è€… åœ¨ å®šä¹‰ å®ƒ çš„ ç¼–è¯‘å•å…ƒ ä¸­ çš„ å…¶ ä»– èŒƒå›´å†… è¢« è°ƒç”¨ ï¼Œ é‚£ ä¹ˆ å®ƒ å°± å¤– è¿æ¥ çš„ å¤– è¿æ¥ çš„ æ ‡è¯† ç¬¦ éœ€è¦ åˆ† é… è¿è¡Œ æ—¶ çš„ å­˜å‚¨ ç©ºé—´</p>
<p>å¦‚ æœ ä¸€ ä¸ªæ ‡è¯†ç¬¦ èƒ½ åœ¨ å®šä¹‰ å®ƒ çš„ ç¼–è¯‘å•å…ƒ ä¸­ çš„ å…¶ä»– èŒƒå›´ å†… è¢« è°ƒç”¨ ä½† æ˜¯ ä¸ èƒ½ åœ¨ä»– ç¼–è¯‘ å•å…ƒ ä¸­ è¢« è°ƒç”¨ é‚£ ä¹ˆ å®ƒ å°± å†… è¿æ¥</p>
<p>ä¸€ä¸ªä»… èƒ½ å¤Ÿ åœ¨ å£°æ˜ å®ƒ çš„ èŒƒå›´ å†… è¢« è°ƒç”¨ çš„å å­— æ˜¯ æ—  è¿æ¥</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> f0</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> a; /a æ˜¯ è¿æ¥ çš„</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>&#123; ... &#125;; / å±€ éƒ¨ ç±» æ˜¯ è¿æ¥ çš„ å…· æœ‰ ç¨‹åº ä½œç”¨ åŸŸ</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230601062801.png" alt></p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230601062725.png" alt></p>
<p>å¯¹ ADT/UDT çš„ è¾“å…¥ å‚æ•° åº”è¯¥ â€œ å€¼ ä¼ é€’ æ”¹ â€œconst å…¬ ä¼  é€’ &quot;ï¼Œ ç›®çš„ æé«˜ æ•ˆç‡ ä¾‹ å¦‚ ï¼Œ å°† void Func(Aa) 7H void Func(const A &amp;a).<br>
å¯¹ äº åŸºæœ¬ æ•°æ® ç±» å‹ çš„ è¾“å…¥ å‚æ•° ä¸ è¦ â€œ å€¼ ä¼ é€’ â€çš„ æ–¹å¼ æ”¹ â€œconst ä¿¡ä¼ é€’ &quot;ï¼Œ å¦ åˆ™ æ—¢ è¾¾ ä¸ åˆ° æé«˜ æ•ˆç‡ çš„ ç›®çš„ åˆè®© äºº è´¹è§£<br>
ä¾‹å¦‚ï¼Œ ä¸ è¦<br>
void Func(const int x) æ”¹ void Func(const int äºº x)ã€‚</p>
<h3 id="const"><a class="header-anchor" href="#const">ğŸŒ³</a>const</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Func</span><span class="params">(constA &amp;a)</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">OutputString</span><span class="params">(<span class="type">const</span> <span class="type">char</span> * <span class="type">const</span> pStr)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">StringCopy</span><span class="params">(<span class="type">char</span> *strDest, <span class="type">const</span> <span class="type">char</span> *strSrc)</span></span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span> *str = <span class="built_in">GetString</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="4-æŒ‡é’ˆ-æ•°ç»„-å­—ç¬¦ä¸²"><a class="header-anchor" href="#4-æŒ‡é’ˆ-æ•°ç»„-å­—ç¬¦ä¸²">ğŸŒ³</a>4. æŒ‡é’ˆ æ•°ç»„ å­—ç¬¦ä¸²</h2>
<p>int* a,b,c; ã€Š=ã€‹int <code>*a</code>, b,c;</p>
<p>å– åœ° å€ ã€ˆ&amp;) å’Œ å å¼• ç”¨ ã€ˆ(<code>*</code>)ã€‚</p>
<p>å‡†ç¡®çš„è¯´ï¼Œä¸ ç¼–è¯‘å™¨çš„ç›®æ ‡å¹³å° æœ‰å…³ã€‚<br>
å¦‚æœç›®æ ‡å¹³å°æ˜¯32ä½çš„ï¼Œé‚£ä¹ˆsizeof (void*)å°±æ˜¯<strong>4</strong>ï¼Œ<br>
å¦‚æœæ˜¯64ä½çš„ï¼Œé‚£ä¹ˆsizeofå°±æ˜¯8ï¼Œ<br>
å¦‚æœæ˜¯16ä½çš„ï¼Œå°±æ˜¯2ã€‚ sizeof (void*)çš„å«ä¹‰å°±æ˜¯è·å–ä¸€ä¸ªæŒ‡é’ˆçš„å¤§å°ã€‚<br>
æŒ‡é’ˆçš„æœ¬è´¨å°±æ˜¯å†…å­˜åœ°å€ï¼Œå› æ­¤æŒ‡é’ˆçš„å¤§å°å’Œå†…å­˜ç©ºé—´æœ‰å…³ã€‚<br>
32ä½çš„æœºå™¨å†…å­˜ç©ºé—´æ˜¯2Gï¼ˆwindowsç³»ç»Ÿï¼‰ï¼Œ<br>
å› æ­¤æŒ‡é’ˆçš„å¤§å°å¿…é¡»æ˜¯ log_2 (2times 1024^3) = 31 ï¼Œå‡‘ä¸ªæ•´æ•°é‚£å°±æ˜¯32bitã€‚</p>
<h3 id="æ•°ç»„"><a class="header-anchor" href="#æ•°ç»„">ğŸŒ³</a>æ•°ç»„</h3>
<p>åœ¨ è¯­ä¹‰ ä¸Š ï¼Œ ä¸‹ æ ‡ æ“ä½œ ç¬¦è¿” å› çš„ æ˜¯ä¸€ ä¸ª å…ƒ ç´  çš„ å¼•ç”¨ ã€‚a[3] = 100;<br>
ç¼–è¯‘å™¨ è®¡ç®—åœ° å€ a + 3 * sizeof (inbï¼Œ å¾— åˆ° 0x004284FCï¼Œ å¹¶ è¿”å› åœ° å€ æ‰€ æŒ‡ å¯¹çš„ å¼•ç”¨ è€Œä¸æ˜¯ è¿”å› â€œ45â€ è¿™ ä¸ª<br>
a[3] = 100; / è½¬æ¢ ä¸º *a+ 3) = 100;<br>
cout &lt;&lt; a[3] &lt;&lt; endlï¼Œ / è½¬æ¢ cout &lt;&lt; *(a + 3) &lt;&lt; endj;</p>
<p>ç»„ å å­—æœ¬ èº« æ˜¯ ä¸€ ä¸ª æŒ‡é’ˆ ï¼Œ æ˜¯ ä¸€ ä¸ª æŒ‡é’ˆ å¸¸é‡ å³ a ç­‰ä»· int * const aï¼Œ<br>
å›  æ­¤ä½  ä¸ èƒ½ è¯•å›¾ ä¿®æ”¹ æ•°ç»„ å çš„ å€¼</p>
<p>a == &amp;a[0]</p>
<p>int a[10] = {0};<br>
int b[10] ={1, 2, 3, 4, 5, 6, 7, 8, 9, 10};<br>
a=b; /ä¸ä»…è¯­ä¹‰ ä¸ å¯¹ ä½• a ä¹Ÿ ä¸ èƒ½ è¢«ä¿®æ”¹</p>
<p>int b[100]; / sizeoftb) = 400 bytesï¼Œ æœªåˆå§‹<br>
int c[ ]= {1, 2,3, 4,5}; I FBP RA S, sizeofÂ© =20 bytes, åˆ å§‹<br>
int d[5] = {1, 2, 3, 4,5, 6, 7}; / é”™è¯¯ ! åˆå§‹ å€¼ è¶Šç•Œ<br>
int e[10] = {5, 6, 7, 8, 9}; / å…ƒ ç´  ä¸ª æ•° 10ï¼Œ æŒ‡ äº† å‰ 5 ä¸ª å…ƒ ç´  çš„åˆå§‹ å€¼ å‰©<br>
VW ä¸‹ çš„ å…ƒ ç´ å…¨ éƒ¨ è‡ªåŠ¨ åˆå§‹ åŒ– 0<br>
int [10] = {5, 12,2}; / é”™è¯¯ ! ä¸ èƒ½ è·³ è¿‡ ä¸­ é—´ çš„ æŸäº› å…ƒ ç´ </p>
<p>C++/C å¯ ä»¥ åœ¨ è¿è¡Œ æ—¶ è¿›è¡Œ æ•°ç»„ çš„ è¶Šç•Œ è®¿é—® æ£€æŸ¥<br>
è¿™ æ˜¯ å› ä¸º æ•°ç»„ å¤§å° çš„ ä¿¡æ¯ ä¿å­˜ åœ¨ç¨‹åº ä¸­ çš„ æŸ åœ° æ–¹ ä¸€ èˆ¬<br>
å°± æ˜¯ æ”¾ åœ¨ æ•°ç»„ ç¬¬ ä¸€ ä¸ªå…ƒ ç´  ä½ ç½® çš„ <strong>å‰ é¢</strong> å ç”¨ ä¸€ int å˜é‡ çš„ å­—èŠ‚æ•° ,<br>
å®ƒ åœ° å€ a-sizeof(int)</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a[<span class="number">10</span>] &lt;&gt; <span class="type">int</span>* <span class="type">const</span> a;</span><br><span class="line"><span class="type">int</span> b[<span class="number">3</span>][<span class="number">4</span>] &lt;&gt; <span class="built_in">int</span> (* <span class="type">const</span> b)[<span class="number">4</span>];</span><br><span class="line"><span class="type">int</span> c[<span class="number">3</span>][<span class="number">4</span>][<span class="number">5</span>] &lt;&gt; <span class="built_in">int</span> (* <span class="type">const</span> c)[<span class="number">4</span>][<span class="number">5</span>]:</span><br></pre></td></tr></table></figure>
<p>æ•°ç»„ æ˜¯ ä¸ èƒ½ ä» å‡½æ•° return è¯­å¥ è¿”å›<br>
æ•°ç»„ å¯ ä»¥ä½œä¸º å‡½æ•° çš„ å‚æ•°</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">output</span><span class="params">(<span class="type">const</span> <span class="type">int</span> a[ ], <span class="type">int</span> Size)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="built_in">sizeof</span>(a)&lt;&lt;endl; <span class="comment">// æ˜¯ 4 è€Œ ä¸ 400</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">	cout &lt;&lt; a[i] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// main</span></span><br><span class="line"><span class="type">int</span> x[<span class="number">100</span>] = &#123; <span class="number">0</span>&#125;;</span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(x) &lt;&lt; endl; <span class="comment">// 400</span></span><br><span class="line"><span class="built_in">output</span>( x, <span class="number">100</span> );</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">output</span><span class="params">(<span class="type">const</span> <span class="type">int</span> a[ ][<span class="number">20</span>], <span class="type">int</span> line)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="built_in">sizeof</span>(a) &lt;&lt; endl; <span class="number">4</span></span><br><span class="line">	<span class="keyword">for</span>( <span class="type">int</span> i = <span class="number">0</span>; i &lt; line; i++ ) &#123;</span><br><span class="line">		<span class="keyword">for</span>( <span class="type">int</span> j = <span class="number">0</span>; | &lt; <span class="number">20</span>; j++) &#123;</span><br><span class="line">			cout &lt;&lt; a[i][j] &lt;&lt; endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// main</span></span><br><span class="line"><span class="type">int</span> x[<span class="number">10</span>][<span class="number">20</span>] = &#123; &#123; <span class="number">100</span> &#125; &#125;;</span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(x) &lt;&lt; endl; <span class="comment">// 800</span></span><br><span class="line"><span class="built_in">output</span>( x, <span class="number">10</span> );</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">output</span><span class="params">(<span class="type">const</span> <span class="type">int</span> a[ ][<span class="number">20</span>], <span class="type">int</span> line)</span></span></span><br><span class="line"><span class="function">cout &lt;&lt; <span class="title">sizeof</span><span class="params">(a)</span> &lt;&lt; endl</span>; <span class="number">4</span></span><br><span class="line">	<span class="keyword">for</span>( <span class="type">int</span> i = <span class="number">0</span>; i &lt; line; i++ ) &#123;</span><br><span class="line">		<span class="keyword">for</span>( <span class="type">int</span> j = <span class="number">0</span>; | &lt; <span class="number">20</span>; j++) &#123;</span><br><span class="line">			cout &lt;&lt; a[i][j] &lt;&lt; endl; <span class="comment">// a æ˜¯ ä¸€ ä¸ª æŒ‡å‘ ä¸€ ç»´ æ•°ç»„ çš„ æŒ‡é’ˆa+l å°± æ˜¯ æŒ‡å‘ äºŒ è¡Œ çš„ æŒ‡é’ˆ</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// main</span></span><br><span class="line"><span class="type">int</span> x[<span class="number">10</span>][<span class="number">20</span>] = &#123; &#123; <span class="number">100</span> &#125; &#125;;</span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(x) &lt;&lt; endl; <span class="comment">// 800</span></span><br><span class="line"><span class="built_in">output</span>( x, <span class="number">10</span> );</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">output</span><span class="params">(<span class="type">const</span> <span class="type">int</span> (*a)j[<span class="number">20</span>], <span class="type">int</span> line)</span> </span></span><br><span class="line"><span class="function"> a[i][j] è®¿é—®è½¬æ¢ä¸º *<span class="params">(a + (i * <span class="number">20</span> + j) * <span class="keyword">sizeof</span>(<span class="type">int</span>))</span>.</span></span><br><span class="line"><span class="function"></span></span><br></pre></td></tr></table></figure>
<p>char *p = new char[1025]; / åˆ† é… ç©ºé—´<br>
delete []p; / åˆ é™¤ æ•°ç»„ ç©ºé—´</p>
<p>å®ƒ ä¸ ä¼šåˆ é™¤ ä¸ å±äº å®ƒ å†… å­˜å• å…ƒ ä¹Ÿä¸ ä¼š æ³„æ¼ å“ªæ€• æ˜¯ ä¸€ å­— èŠ‚ çš„ å†… å­˜å• å…ƒ<br>
å› ä¸ºä½  æ˜ç™½ åœ° å‘Šè¯‰ äº† ç¼–è¯‘ : è¿™ æ˜¯ åœ¨ é‡Šæ”¾ ä¸€ ä¸ª å­—ç¬¦ æ•°ç»„ ,<br>
â€œ è¯· â€ å®ƒ å» p æŒ‡å‘ çš„ å­—ç¬¦ æ•°ç»„ å¤§å° ä¿¡æ¯ ã€Šæ•°ç»„ çš„ å…ƒ ç´  ä¸ª æ•° å®ƒ è¢« ç¼–è¯‘ å™¨ ä¿å­˜ åœ¨ ç¨‹åº çš„ æŸ ä¸ª åœ° æ–¹ )ï¼Œ<br>
ç„¶ å æŒ‰ç…§ è¿™ ä¸ª å¤§ å° æ¥ é‡Šæ”¾ åŠ¨æ€ å†… å­˜ è¿™ å°± æ˜¯ æ•°ç»„ çš„ é‡Šæ”¾ (delete[]) çš„è¯­ä¹‰</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">char</span> (*p3)[<span class="number">4</span>] = <span class="keyword">new</span> <span class="type">char</span>[<span class="number">5</span>][<span class="number">4</span>]; /OK! é€€åŒ– ç¬¬ ä¸€ ç»´ è¯­ ä¹‰ ç­‰</span><br><span class="line"><span class="built_in">int</span> (*p4)[<span class="number">5</span>] = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">3</span>][<span class="number">5</span>]; /OK! é€€åŒ– ç¬¬ ä¸€ ç»´ è¯­ ä¹‰ ç­‰</span><br><span class="line"><span class="built_in">char</span> (*p5)[<span class="number">5</span>][<span class="number">7</span>] = <span class="keyword">new</span> <span class="type">char</span>[<span class="number">20</span>][<span class="number">5</span>][<span class="number">7</span>]; OK! é€€åŒ– ç¬¬ ä¸€ ç»´ è¯­ ä¹‰ ç­‰ ä»·</span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> [jp3; <span class="comment">// åˆ é™¤ p3</span></span><br><span class="line"><span class="keyword">delete</span> []p4; <span class="comment">// åˆ é™¤ p4</span></span><br><span class="line"><span class="keyword">delete</span> []p5; <span class="comment">// åˆ é™¤ p5</span></span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">char</span> arrChar_1[ ] = &#123;<span class="string">&#x27;aâ€™,â€™b&#x27;</span>,\<span class="number">0</span><span class="string">&#x27;,&#x27;</span>d<span class="string">&#x27;,â€™e&quot;&#125;;</span></span><br><span class="line"><span class="string">char arrChar_2[ ] = &quot;hello&quot;;</span></span><br><span class="line"><span class="string">char *p = â€œhelloâ€;</span></span><br><span class="line"><span class="string">cout &lt;&lt; sizeof(arrChar_1) &lt;&lt; endl; /S$ï¼Œ è¡¨ ç¤ºè¯¥ æ•°ç»„ $ å­— èŠ‚</span></span><br><span class="line"><span class="string">cout &lt;&lt; strlen(arrChar 1) &lt;&lt; endl; 2ï¼Œ è¡¨ç¤º å­—ç¬¦ ä¸² é•¿ åº¦ 2</span></span><br><span class="line"><span class="string">cout &lt;&lt; sizeof(arrChar_2) &lt;&lt; endl; /6ï¼Œ è¡¨ ç¤º æ•° ç»„ 6 å­—èŠ‚</span></span><br><span class="line"><span class="string">cout &lt;&lt; strlen(arrChar_2) &lt;&lt; endl; WS, RARER BREA 5</span></span><br><span class="line"><span class="string">cout &lt;&lt; sizeof(p) &lt;&lt; endl; / 4ï¼Œ è¡¨ç¤º æŒ‡é’ˆ p å  4 å­— èŠ‚</span></span><br><span class="line"><span class="string">cout &lt;&lt; strlen(p) &lt;&lt; endl; /5ï¼Œ è¡¨ ç¤ºå­—ç¬¦ ä¸² é•¿ åº¦ $</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">é»˜è®¤ char * è¡¨ ç¤º å­— ç¬¦ ã€‚ ä¾‹ å¦‚ :</span></span><br><span class="line"><span class="string">char ch =&#x27;</span>aâ€™; / ç”¨ å­—ç¬¦ <span class="string">&#x27;aæ¥ åˆå§‹ åŒ– å­—ç¬¦å˜é‡ ch</span></span><br><span class="line"><span class="string">char *pChar = &amp;ch; / å­—ç¬¦ æŒ‡é’ˆ æŒ‡å‘ å­—ç¬¦å˜é‡</span></span><br><span class="line"><span class="string">cout &lt;&lt; pChar &lt;&lt; endi; / é”™ æŠŠ å­—ç¬¦ æŒ‡é’ˆ å½“åš å­—ç¬¦ ä¸²</span></span><br><span class="line"><span class="string">æ­£ç¡® ç”¨ æ³• :</span></span><br><span class="line"><span class="string">cout &lt;&lt; *pChar &lt;&lt; endl; / å– ä¸€ ä¸ª å­—ç¬¦</span></span><br></pre></td></tr></table></figure>
<p>æŸ äº› å­—ç¬¦ ä¸² å‡½ æ•° å¹¶ ä¸ ä¼š è‡ªåŠ¨ ç›®æ ‡ å­—ç¬¦ ä¸² ç»“ å°¾ è¿½ åŠ  â€˜\0â€™ï¼Œ<br>
ä¾‹ å¦‚ strncpyå’Œ strncatï¼Œ é™¤ éä½ æŒ‡å®š äº å€¼ æ¯” æº ä¸² çš„ é•¿ åº¦ å¤§1<br>
strcpy å’Œ strcat ä¼š æŠŠ æºä¸² çš„ ç»“æŸ ç¬¦ ä¸€ å¹¶ æ‹·è´ åˆ° ç›®æ ‡ä¸² ä¸­</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> _cdecl (* FuncPtr)( <span class="type">const</span> <span class="type">char</span>*); / å®šä¹‰ ä¸€ ç§ å‡½æ•° æŒ‡é’ˆ ç±»</span><br><span class="line">FuncPtr fp_1= strlen ;</span><br><span class="line">FuncPtr fp_2 = puts ;</span><br><span class="line"><span class="type">double</span> _cdecl (*fp_3)( <span class="type">double</span> ) = sqrt ;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> len = <span class="built_in">fp_1</span>(â€˜I am a software engineer.â€) ;</span><br><span class="line"><span class="type">double</span> d = ( *fp_3 )( <span class="number">10.25</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">double</span> _cdecl (* fp[<span class="number">5</span>])( <span class="type">double</span> ) = &#123; sqrt, fabs, cos, sin, exp &#125;;</span><br><span class="line"><span class="keyword">for</span> (intk = <span class="number">0</span>;k &lt;<span class="number">5</span>; k++)</span><br><span class="line">&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Result :&quot;</span> &lt;&lt; fp[k]( <span class="number">10.25</span> )&lt;&lt; endl ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ä¸€èˆ¬ çš„ å‡½æ•° è°ƒç”¨ è¯­å¥ å¯ ä»¥ åœ¨ ç¼–è¯‘ æ—¶ å°± å®Œæˆ è¿™ ä¸ª ç»‘ å®šã€Šå«åš é™æ€ å†³è®® æˆ– é™æ€ è¿æ¥ )<br>
è¿è¡Œ æ—¶ è¿æ¥</p>
<p>ç±» çš„ å‘˜ å‡½ æœ‰ 4 ç§ ç±» å‹ inlineã€virtualã€staticã€normalã€‚</p>
<p>inline å‡½æ•° åœ¨ è¿è¡Œ æ—¶ä¼š å±•å¼€ ï¼Œ è™½ ç„¶ è¯­ è¨€ å…è®¸ å– å…¶ åœ° å€ ä½† æ˜¯ æ²¡æœ‰ å¤ª å¤§ æ„ä¹‰ ã€‚virtual æˆ å‘˜ å‡½ æ•° çš„ åœ° å€ æŒ‡ çš„å…¶ vtable ä¸­ çš„ ä½ ç½® ï¼Œ<br>
staticæˆå‘˜ å‡½ æ•° çš„ åœ° å’Œ æ™®é€š å…¨ å±€ å‡½æ•° çš„ åœ° å€ æ²¡æœ‰ ä»»ä½• åŒº åˆ« ;<br>
æ™®é€š æˆ å‘˜ å‡½ æ•° çš„ åœ° å’Œ ä¸€ èˆ¬ å‡½ æ•° çš„ åœ° å€ ä¹Ÿ æ²¡æœ‰ åŒº åˆ«<br>
å°± æ˜¯ å‡½æ•° ä»£ç  åœ¨ å†… å­˜ ä¸­ çš„ çœŸå®åœ°å€ï¼Œ<br>
ä½† æ˜¯ ç”± äºå®ƒ çš„ è°ƒç”¨ è¦ç»‘ å®šåˆ° ä¸€ä¸ª å® å®åœ¨ åœ¨ çš„ å¯¹ è±¡ ï¼Œ<br>
å›  æ­¤æ—  è®º æ˜¯å…¶ å‡½æ•° æŒ‡é’ˆçš„ å£°æ˜ æ–¹å¼ è¿˜ æ˜¯ å…¶ åœ° å€ çš„ è·å– æ–¹æ³• éƒ½ æ¯”è¾ƒ ç‰¹åˆ«</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">ç¤ºä¾‹ <span class="number">7</span><span class="number">-14</span>ã€‚</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">( <span class="type">void</span> )</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;CTest::f0&quot;</span> &lt;&lt; endl; &#125; / æ™®é€š å‘˜ å‡½</span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">g</span><span class="params">( <span class="type">void</span> )</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;CTest::2()&quot;</span> &lt;&lt; endl; &#125; <span class="comment">// HAR RA</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">h</span><span class="params">( <span class="type">void</span> )</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;CTest::hQ)&quot;</span> &lt;&lt; endl; &#125; /W è™šæ‹Ÿ å‘˜ å‡½</span><br><span class="line">	<span class="comment">//...</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="comment">///...</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">typedef</span> <span class="title">void</span> <span class="params">(*GFPtr)</span><span class="params">( <span class="type">void</span> )</span></span>; / å®šä¹‰ ä¸€ ä¸ªå…¨å±€ å‡½æ•° æŒ‡é’ˆ ç±»</span><br><span class="line">	GFPtr fp = CTest::g ; </span><br><span class="line">										</span><br><span class="line">	<span class="built_in">fp</span>();                </span><br><span class="line">	<span class="function"><span class="keyword">typedef</span> <span class="title">void</span> <span class="params">(CTest::*MemFuncPtr)</span><span class="params">( <span class="type">void</span>)</span></span>; <span class="comment">// å£°æ˜ ç±» æˆ å‘˜ å‡½ æ•° æŒ‡é’ˆ ç±»</span></span><br><span class="line">	MemFuncPtr mfp_] = &amp;CTest::f; <span class="comment">// å£°æ˜ æˆ å‘˜ å‡½ æ•° æŒ‡ é’ˆ å˜ å¹¶ åˆå§‹</span></span><br><span class="line">	MemFuncPtr mfp2 = &amp;CTest::h; / /æ³¨æ„ è·å– æˆ å‘˜ å‡½ æ•° åœ° å€ çš„ æ–¹æ³•</span><br><span class="line">	CTest theObj ;</span><br><span class="line">	(theObj .*mfp_1)() ; / ä½¿ ç”¨ å¯¹ å’Œ æˆ å‘˜ å‡½ æ•° æŒ‡ é’ˆ è°ƒ ç”¨ æˆ å‘˜ å‡½</span><br><span class="line">	(theObj .*mfp_2)() ;</span><br><span class="line">	CTest *pTest = &amp;theObj ;</span><br><span class="line">	(pTest-&gt;*mfp_1)(); / ä½¿ ç”¨ å¯¹è±¡ æŒ‡é’ˆ å’Œ æˆ å‘˜ å‡½ æ•° æŒ‡é’ˆ è°ƒç”¨ æˆ å‘˜ å‡½</span><br><span class="line">	(pTest-&gt;*mfp_2)() ;</span><br><span class="line">&#125;</span><br><span class="line">è¾“å‡º ç»“æœ </span><br><span class="line">CTest::<span class="built_in">g</span>()</span><br><span class="line"><span class="function">CTest::f0</span></span><br><span class="line"><span class="function">CTest::hO</span></span><br><span class="line"><span class="function">CTest::f0</span></span><br><span class="line"><span class="function"><span class="title">CTest::h</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
<p>ä¸º äº† ä¸ é™æ€ å‘˜ å‡½æ•° åŒº åˆ«<br>
å– virtual å‡½æ•° å’Œ æ™®é€š å‘˜ å‡½ æ•° çš„ åœ° å€ éœ€è¦ ä½¿ç”¨ â€œ&amp;â€ è¿ ç®—<br>
ã€ˆ å– é™æ€ æˆ å‘˜ å‡½ æ•° åœ°å€ ä¹Ÿ å¯ ä»¥ ä½¿ ç”¨ å®ƒ ä½† æ˜¯ æ²¡æœ‰ å¿…è¦ )ã€‚</p>
<p>ç”± äº çº¯ è™š å‡½æ•° æ²¡æœ‰ å®ç° ä½“ è€Œ éçº¯ è™š å‡½ æœ‰ å®ç° ä½“<br>
ä¸” è™š å‡½æ•° éƒ½æ˜¯ é€šè¿‡ vptr å’Œ vtable æ¥ é—´æ¥ è°ƒç”¨ çš„<br>
å›  æ­¤ å– è™š å‡½æ•° çš„ åœ° å€ å°† å¾— åˆ°è¯¥è™š å‡½ æ•° å®ç°ä½“ vtable ä¸­ çš„ ç´¢å¼•å·<br>
è¦ æƒ³å¾—åˆ° è™š å‡½ æ•° å®ç° ä½“ çš„ çœŸå® åœ° å€ ,è¿˜éœ€è¦ é¦–å…ˆ ä» å¯¹ è±¡å…¥æ‰‹ ï¼Œ<br>
æ‰¾åˆ° vptr çš„ ä½ ç½® è¿› è€Œ æ‰¾åˆ° vtable çš„ æ‰€ åœ¨<br>
ç„¶ å æ ¹æ® å‡½æ•° æŒ‡é’ˆ çš„ å¤§ å’Œè™š å‡½ æ•° çš„ç´¢å¼• ï¼Œ å– å‡º è™š å‡½ æ•° çš„ çœŸå® åœ° å€</p>
<h3 id="å¼•ç”¨ä¸æŒ‡é’ˆ"><a class="header-anchor" href="#å¼•ç”¨ä¸æŒ‡é’ˆ">ğŸŒ³</a>å¼•ç”¨ä¸æŒ‡é’ˆ</h3>
<p>int m;<br>
int&amp; n=m;<br>
n æ—¢ ä¸ æ˜¯m çš„ æ‹·è´ ä¹Ÿ ä¸ æ˜¯æŒ‡å‘ m çš„æŒ‡é’ˆ ï¼Œ å…¶å®n å°± m è‡ªå·±</p>
<p>å¼•ç”¨ åœ¨ åˆ›å»º çš„ åŒæ—¶ å¿…é¡»åˆå§‹ åŒ– å³ å¼•ç”¨ åˆ° ä¸€ä¸ª æœ‰ æ•ˆ å¯¹è±¡</p>
<p>const int&amp; rint = 0;</p>
<p>åˆ›å»º ä¸€ ä¸ª ä¸´æ—¶ çš„ int å¯¹è±¡ ç”¨ 0 æ¥ åˆå§‹å®ƒ ç„¶ å å† ç”¨ å®ƒ æ¥ åˆå§‹ åŒ– å¼•ç”¨ rintï¼Œ<br>
è€Œ è¯¥ ä¸´æ—¶ å¯¹ è±¡ å°† ä¸€ ç›´ ä¿ åˆ° rint é”€æ¯ çš„ æ—¶ å€™ æ‰ ä¼š é”€æ¯ã€‚<br>
æ‰€ä»¥ï¼Œä¸ è¦ ç”¨ å­—é¢ å¸¸é‡ æ¥ åˆå§‹åŒ–å¼•ç”¨</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">ç»™ å¼•ç”¨ èµ‹å€¼ å¹¶ ä¸ æ˜¯ æ”¹å˜ å’Œ åŸå§‹ å¯¹ è±¡ çš„ ç»‘ å®š å…³ç³»</span><br><span class="line"><span class="type">int</span> a=<span class="number">10</span>,b= <span class="number">1000</span>;</span><br><span class="line"><span class="type">int</span>&amp; rInt =a; /rint å¼•ç”¨ åˆ° aï¼ŒrInt ç­‰ <span class="number">10</span></span><br><span class="line">rInt = b; <span class="comment">// rInt Al a éƒ½ å˜ æˆ 1000</span></span><br></pre></td></tr></table></figure>
<p>å¼•ç”¨ çš„ åˆ›å»º å’Œ é”€æ¯ å¹¶ ä¸ ä¼š è°ƒç”¨ ç±» çš„ æ‹·è´ æ„é€  å‡½æ•° å’Œ ææ„ å‡½ æ•°<br>
åœ¨ è¯­è¨€ å±‚é¢ å¼• ç”¨ çš„ ç”¨ å’Œå¯¹ è±¡ ä¸€ æ ·<br>
åœ¨ äºŒ è¿› åˆ¶ å±‚é¢ å¼• ç”¨ ä¸€ èˆ¬ éƒ½ æ˜¯ é€šè¿‡æŒ‡é’ˆ æ¥ å®ç° çš„ åª ä¸è¿‡ ç¼–è¯‘ å¸® æˆ‘ ä»¬ å®Œæˆ äº† è½¬æ¢</p>
<p>å¼• ç”¨ çš„ ä¸»è¦ ç”¨ é€”ä¿®é¥° å‡½æ•° çš„ å½¢å‚ å’Œ è¿”å› å€¼</p>
<h2 id="5-ç¬¬å…«ç« -c-cé«˜çº§æ•°æ®ç±»å‹"><a class="header-anchor" href="#5-ç¬¬å…«ç« -c-cé«˜çº§æ•°æ®ç±»å‹">ğŸŒ³</a>5. ç¬¬å…«ç«  C++/cé«˜çº§æ•°æ®ç±»å‹</h2>
<p>C è¯­è¨€ stuctï¼Œ æœ‰ æ—¶ ä¹Ÿ ç§° ç”¨æˆ· è‡ª å®šä¹‰ æ•°æ® ç±» (User defined Type, UDT)ã€‚<br>
æŠ½è±¡ æ•°æ® ç±» å‹ (Abstract Data Type, ADT)ï¼Œ<br>
åœ¨ C++ ç¯å¢ƒ ï¼Œ æˆ‘ ä»¬ æŠŠ C é£æ ¼ struct å«åš POD (Plain Old Data) å¯¹è±¡</p>
<p>structyclass å½“åš å‚æ•° ä¼ é€’ ç»™ å‡½æ•° ï¼Œ é»˜ è®¤ä¸º å€¼ ä¼  é€’ å…¶ ä¸­çš„ æ•°ç»„ å°† å…¨ éƒ¨ æ‹·è´ åˆ° å‡½æ•° å †æ ˆ<br>
å½“ ä½  UDTADT ä¸­ åŒ…å« æ•°ç»„ å‘˜ çš„ æ—¶ å€™ æœ€ å¥½ä½¿ æŒ‡é’ˆ æˆ– å¼•ç”¨ä¼ é€’è¯¥ ç±» å‹ å¯¹ è±¡<br>
å¹¶ ä¸” ä¸€ å®š è¦ é˜² è®© æ•°ç»„ å…ƒ ç´  è¶Šç•Œ å¦ åˆ™ å®ƒ è¦†ç›– åçš„ ç»“æ„æˆ å‘˜</p>
<p>memset (&amp;s, 0x00, sizeof (Student))<br>
// å¯ ä»¥ ä»…æŒ‡ å®š ç¬¬ ä¸€æˆ å‘˜ çš„åˆ å€¼ æ¥åˆå§‹ POD å¯¹ è±¡ åé¢ çš„ å‘˜ å°† å…¨ éƒ¨ è‡ªåŠ¨åˆå§‹ åŒ– ä¸º0ï¼Œ å°± æ•°ç»„ çš„å§‹ åŒ– ä¸€æ ·<br>
Student s = {0};</p>
<p>ä¸€</p>
<p>å¯¹ è±¡ é—´ çš„ åŒ…å« æŒ‡ ä¸€ ç±» å‹ å¯¹ è±¡ å……å½“ äº† å¦ ä¸€ ä¸ª ç±» å‹ å®šä¹‰ çš„ æ•°æ® æˆ ï¼Œ:ä» è€Œ ä¹Ÿ å°± å……å½“ äº† å®ƒ çš„ å¯¹ è±¡ çš„ æˆ ï¼Œ å³ ä¸¤ å¯¹ è±¡ é—´ å­˜ has-a å…³ç³»<br>
è™½ç„¶ å¯¹ è±¡ ä¸ èƒ½ è‡ª åŒ…å« ä½† å¯ ä»¥ è‡ª å¼•ç”¨ ï¼Œ è€Œ ä¸” ä¸¤ ä¸ª ç±» å‹ å¯ ä»¥ äº¤å‰ å¼•ç”¨ ï¼Œ è¿™ç§ å…³ç³»ç§° holds-a å…³ç³»<br>
| ä¸ª å¯¹ è±¡ ä¸èƒ½ è‡ª åŒ…å« æ—  è®º æ˜¯ ç›´æ¥ çš„ è¿˜ é—´æ¥ çš„ å›  ä¸º ç¼–è¯‘ å™¨ æ— æ³• ä¸º è®¡ç®— sizeof å€¼ ï¼Œ ä¹Ÿ å°± ä¸ çŸ¥é“ ç»™è¿™ æ · å¯¹ è±¡ åˆ† é… å¤š å°‘ å­˜å‚¨ ç©ºé—´<br>
<img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230601161745.png" alt></p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230601161855.png" alt></p>
<p>è€Œ äºå¯¹ é½ ã€ˆ å°† å¤§ å° è°ƒæ•´ åˆ° æœºå™¨ å­— çš„ æ•´æ•°<br>
) çš„ è€ƒè™‘ æ¯ å¯¹ è±¡ çš„ å­˜å‚¨ ç©ºé—´ ä¸­ å¯ èƒ½ ä¼š å­˜åœ¨ å¡«è¡¥ å­— èŠ‚ ï¼Œ è¿™ äº› å­— èŠ‚ å•å…ƒ ä¸ ä¼š åˆå§‹<br>
åŒ– è€Œ å…·æœ‰ ä¸Š æ¬¡ ç”¨ ç•™ ä¸‹ â€œ è„ å€¼ â€( éš æœº å€¼ )ã€‚ æ˜¾ ç„¶ æ¯ å¯¹ è±¡å¡«è¡¥ å­—èŠ‚ çš„ å†… å®¹ æ˜¯<br>
,ä¼š ç›¸åŒ çš„ è¿™å°±æ˜¯ è¯´ å¦‚ æœç¼–è¯‘ å™¨ æ”¯æŒä½¿ç”¨ é€ ä½ æ¯”è¾ƒ çš„é»˜è®¤ æ–¹æ³• æ¥ æ¯”è¾ƒåŒç±»å‹ å¯¹è±¡<br>
ç»“æœ è‚¯ å®š æ˜¯ ä¸ å¯¹</p>
<h3 id="ä½åŸŸ"><a class="header-anchor" href="#ä½åŸŸ">ğŸŒ³</a>ä½åŸŸ</h3>
<p>C è¯­è¨€ ä½ å„æˆ å‘˜ çš„ ç±» å‹ å¿…é¡» intã€unsigned intã€signed int ç­‰ ç±» å‹ ï¼ŒC++ è¿˜ å… è®¸ ä½¿ charã€long ç­‰ ç±» å‹<br>
ä¸ å…è®¸ ç”¨ æŒ‡é’ˆ ç±» å‹ æˆ– æµ® ç‚¹ ç±» å‹ ä½œä¸º ä½ åŸŸ çš„ æˆ å‘˜ ç±» ï¼Œ| å› ä¸º å®ƒä»¬ å¯ èƒ½ å¯¼è‡´ æ— æ•ˆ çš„ å€¼</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">DateTime</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> year ;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> month :<span class="number">4</span>;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> day  :<span class="number">5</span>;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> hour  :<span class="number">5</span>;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> minute : <span class="number">6</span>;</span><br><span class="line"><span class="number">6u</span>nsigned <span class="type">int</span> second : <span class="number">6</span>;</span><br><span class="line">&#125;;</span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span> (DateTime) &lt;&lt; endl; <span class="comment">//8</span></span><br></pre></td></tr></table></figure>
<p>å¯ ä»¥ å®šä¹‰ é å…· å çš„ ä½ åŸŸ æˆ ï¼Œ å…¶ ä½œç”¨ æ˜¯ ç›¸å½“ äº å  ä½ ç¬¦ å¯ ç”¨ æ¥ éš”ç¦» ä¸¤ ç›¸ é‚» çš„<br>
ä½ åŸŸ æˆ ã€‚ å¦‚ ç¤ºä¾‹ 8-7ï¼Œ ç”± äº ç¬¬ äºŒ ä¸ª ä½ åŸŸ å‘˜ æ²¡æœ‰ å å­— ï¼Œ å›  æ­¤ ä¸ èƒ½ ç›´æ¥è®¿é—® å®ƒ æ‰€ åœ¨ çš„ä½</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">struct DateTime</span><br><span class="line">&#123;</span><br><span class="line">	//...</span><br><span class="line">	unsigned int day :5;</span><br><span class="line">	unsigned int :2</span><br><span class="line">	unsigned int hour :5;</span><br><span class="line">	//...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>å¯ ä»¥ å®šä¹‰ é•¿ åº¦ 0 çš„ ä½ åŸŸ æˆ ï¼Œ å…¶ä½œç”¨æ˜¯ è¿«ä½¿ ä¸‹ä¸€ ä¸ª å‘˜ ä» ä¸‹ ä¸€ ä¸ª å®Œæ•´ æœº å™¨ å­— ã€ˆWord) å¼€å§‹ åˆ† é… ç©ºé—´</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">DateTime</span></span><br><span class="line">&#123; </span><br><span class="line">	<span class="comment">//...</span></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span> day <span class="number">25</span>;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span> :<span class="number">0</span>;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span> hour <span class="number">255</span></span><br><span class="line">	<span class="comment">//...</span></span><br><span class="line">&#125;;</span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(DateTime) &lt;&lt; endl; <span class="comment">// 12</span></span><br></pre></td></tr></table></figure>
<p>å³ä½¿ä½ åŸŸ æœ‰ æˆ å‘˜ çš„ä½ æ•°æ€» å’Œ è¾¾ ä¸ åˆ° æ•´ å­— èŠ‚ çš„å€æ•° ä½ å¯¹ è±¡ ä¹Ÿä¼š å¯¹ é½ åˆ° æœº å™¨ å­— é•¿<br>
ä¸ èƒ½ä½¿ ç”¨ è®¿é—® æ•°ç»„ å…ƒ ç´  çš„ æ–¹æ³•(<code>[]</code>) æ¥è®¿é—®ä½ åŸŸ å‘˜ çš„ å•ä¸ª ä½<br>
å¦‚ æœ æœ‰ è¿™ ç§ éœ€è¦ ï¼Œ è¯·ä½¿ ç”¨ ä½è¿ç®— (~ã€åŒº ã€|ã€&gt;&gt;ã€&lt;&lt;ã€^ åŠ å…¶ = çš„ç»„ åˆ è¿ç®— ) æˆ– è€…ä½¿ <code>std::bitset&lt;N&gt;ã€‚</code></p>
<h3 id="æˆå‘˜å¯¹é½"><a class="header-anchor" href="#æˆå‘˜å¯¹é½">ğŸŒ³</a>æˆå‘˜å¯¹é½</h3>
<p>å¯¹ äº å¤åˆ ç±» ã€ˆ ä¸€ èˆ¬ æŒ‡ ç»“æ„ å’Œ ç±» ) çš„ å¯¹ è±¡ å¦‚ æœ å®ƒ çš„ èµ· å§‹ åœ° å€ èƒ½ å¤Ÿ æ»¡è¶³ å…¶ ä¸­ è¦æ±‚ æœ€ ä¸¥æ ¼ ã€ˆ æˆ– æœ€ é«˜ çš„ é‚£ä¸ª æ•°æ® å‘˜ çš„ è‡ªç„¶ å¯¹é½ è¦ æ±‚ é‚£ ä¹ˆ å®ƒ å°± æ˜¯ è‡ªç„¶ å¯¹ é½ çš„<br>
å¦‚æœ é‚£ ä¸ª æ•°æ® å‘˜ åˆ æ˜¯ä¸€ ä¸ª å¤åˆ ç±» å‹ å¯¹ è±¡ åˆ™ ä¾æ¬¡ ç±» æ¨ ç›´ åˆ° æœ€ å éƒ½ åŸºæœ¬ ç±» å‹æ•°æ® æˆ å‘˜</p>
<p>åœ¨ C++/C çš„ åŸºæœ¬æ•°æ® ç±» å‹ ä¸­ å¦‚ æœ ä¸ è€ƒè™‘ enum å¯ èƒ½ çš„ å¤§ å€¼ æ‰€ éœ€ çš„ å†… å­˜ å­—èŠ‚ æ•° ï¼Œdouble å°± å¯¹ é½ è¦ æ±‚æœ€ ä¸¥æ ¼ çš„ ç±» å‹ ï¼Œ å…¶ æ¬¡ int å’Œ floatï¼Œ ç„¶ å shortã€bool å’Œ charã€‚</p>
<p>ç›´æ¥ ä¾ç…§ å£°æ˜ é¡ºåº æ¥ å­˜æ”¾ ï¼Œ å³ å¤åˆ ç±» å‹ ä¸­ å­˜åœ¨ å¤š ä¸ª è®¿é—® ã€ˆ å³ C++ ç±» ä¸­ çš„ æ¯public. private å’Œ protected è®¿é—® é™å®š )ï¼Œ è‡³ å°‘ ä¹Ÿ ä¼š ä¿è¯ æ¯ ä¸ª å†… çš„ æœ‰ æ•°æ® å‘˜ æ˜¯| æŒ‰ç…§ å£°æ˜ é¡ºåº æ¥ å­˜æ”¾</p>
<p>è‡³ äº å…ˆ å£°æ˜ çš„ å‘˜ ä¼š æ”¾ åœ¨ åœ° å€ è¿˜ æ˜¯ ä½åœ° å€ å¤„ å®Œ å…¨ æ˜¯ç”± ç¼–è¯‘ å™¨ å®ç° æ¥ å†³å®š çš„ è€Œä¸” â€“ èˆ¬ éƒ½ é‡‡ç”¨ â€œæŒ‰ç…§ å£°æ˜ çš„ å…ˆå é¡ºåº ä» ä½åœ° å€ åˆ° é«˜ åœ°å€ ä¾æ¬¡ æ”¾ å„ ä¸ª æˆ â€ çš„ æ–¹æ¡ˆ</p>
<p>ä¸ºäº†å¯¹è±¡æ•°ç»„ è¦å®ç°è‡ªç„¶å¯¹é½</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">char</span> BYTE;</span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Color</span>&#123; RED = <span class="number">0x01</span>, BLUE, GREEN, YELLOW, BLACK&#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Sedan</span> <span class="comment">// ç§å®¶ è½¦</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">bool</span> m_hasSkylight; RRARS</span><br><span class="line">	Color m_color; / é¢œè‰²</span><br><span class="line">	beol m_isAutoShift; / æ˜¯ å¦ æ˜¯ è‡ªåŠ¨ æ¡£</span><br><span class="line">	<span class="type">double</span> m_price; / ä»·æ ¼ ã€ˆ å…ƒ )</span><br><span class="line">	BYTE m_seatNumï¼Œ / åº§ä½æ•°é‡</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230601165034.png" alt></p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230601165745.png" alt></p>
<p>ä½¿ offsetof å® è¿™ ä¸ª å® ä¸“ é—¨ ç”¨ æ¥è®¡ç®— æ•°æ® å‘˜ ç›¸ å¯¹ äº å¯¹ è±¡ èµ·å§‹åœ°å€ çš„ çœŸå® å« ç§» é‡ å®ƒ ä¼š æŠŠ æœ‰ éš å« å‘˜ ä¹Ÿ è®¡ç®— è¿›å» æ¯” å¦‚åº¶ å‡½ è¡¨ æŒ‡é’ˆvptrã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">std::cout &lt;&lt; â€œ<span class="built_in">offsetof</span>(Sedan, m_hasSkylight) =â€ &lt;&lt; <span class="built_in">offsetof</span>(Sedan, m_hasSkylight) ;</span><br><span class="line">std::cout &lt;&lt; â€œ<span class="built_in">offsetof</span>(Sedan, m_color) = â€ &lt;&lt; <span class="built_in">offsetof</span>(Sedan, m_color) ;</span><br><span class="line">std::cout &lt;&lt; â€œ<span class="built_in">offsetof</span>(Sedan, m_isAutoShift) = â€ &lt;&lt; <span class="built_in">offsetof</span>(Sedan, m_isAutoShift) ;</span><br><span class="line">std::cout &lt;&lt; â€œ<span class="built_in">offsetof</span>(Sedan, m_price) =â€ &lt;&lt;&lt; <span class="built_in">offsetof</span>(Sedan, m_price) ;</span><br><span class="line">std::cout &lt;&lt; â€œ<span class="built_in">offsetof</span>(Sedan, m_seatNum) = â€ &lt;&lt; <span class="built_in">offsetof</span>(Sedan, m_seatNum) ;</span><br></pre></td></tr></table></figure>
<p>ç¼– è¯‘å™¨ ä¸ ä¼š éšä¾¿ åœ° åœ¨ ä»»æ„ ä¸€ ä¸ª é€»è¾‘ å†… å­˜ åœ°å€ ä¸Šæ¥ åˆ›å»º C++/Cçš„ å˜é‡ å’Œ å¯¹ è±¡<br>
å®ƒä»¬ åœ¨å†… å­˜ ä¸­ çš„ èµ· åœ° å€ éœ€è¦ æ»¡è¶³ ä¸€ å®š çš„ æ¡ ä»¶ æ•° æ® æˆ å‘˜ ä¹Ÿ å¹¶ ä¸€ å®š æ˜¯ æŒ¨ åœ¨ä¸€èµ· çš„<br>
è€Œä¸”æ¯ä¸ª æ•°æ® å‘˜ çš„ åœ° å€ ä¹Ÿ ä¸æ˜¯ éšä¾¿ å®‰æ’ çš„ éƒ½ éœ€è¦ ç» è¿‡ ç¼–è¯‘å™¨çš„ ç²¾å¿ƒ è§„åˆ’ å’Œ è®¡ç®—<br>
è¿™ æ‰èƒ½æé«˜ å¯¹ åŠ å…¶ å‘˜ çš„ è®¿é—® æ•ˆç‡</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">Sedan s;</span><br><span class="line">std::cout &lt;&lt; â€œAddress of s =â€ &lt;&lt; (<span class="type">void</span>* )&amp;s ;</span><br><span class="line">std::cout &lt;&lt; â€œoffset of m_hasSkylight =â€ &lt;&lt; ((<span class="type">char</span>*)&amp;s.m_hasSkylight â€” (<span class="type">char</span>*)&amp;s) ;</span><br><span class="line">std::cout &lt;&lt; â€œoffset of m_color = â€ &lt;&lt; ((<span class="type">char</span>*)&amp;s.m_color â€” (<span class="type">char</span>*)&amp;s) ;</span><br><span class="line">std::cout &lt;&lt; â€œoffset of m_isAutoShift =â€ &lt;&lt; ((<span class="type">char</span>*)&amp;s.m_isAutoShift â€” (<span class="type">char</span>*)&amp;s) ;</span><br><span class="line">std::cout &lt;&lt; â€œoffset of m_price =â€ &lt;&lt; ((<span class="type">char</span>*)&amp;s.m_price â€” (<span class="type">char</span>*)&amp;s);</span><br><span class="line">std::cout &lt;&lt; â€œoffset of m_seatNum = â€ &lt;&lt; ((<span class="type">char</span>*)&amp;s.m_seatNum â€” (<span class="type">char</span>*)&amp;s);</span><br></pre></td></tr></table></figure>
<p>ç»¼ä¸Š æ‰€ è¿° ç±» çš„ æ•°æ® æˆ å‘˜ ç±» å‹ çš„ é€‰æ‹© å£° æ˜ é¡º åº å³ æ’åˆ— é‡‡ ç”¨ çš„ å‘˜ å¯¹ é½ æ–¹å¼<br>
éƒ½ å°†å½±å“å¯¹ è±¡ çš„ å®é™… å¤§å° å’Œ è®¿é—® æ•ˆç‡</p>
<h3 id="è”åˆ-union"><a class="header-anchor" href="#è”åˆ-union">ğŸŒ³</a>è”åˆ union</h3>
<p>è”åˆ çš„ å¦ ä¸€ ä¸ª å¦™ç”¨ å°± ç”¨ æ¥ è§£æ ä¸€ ä¸ª å¯„å­˜ å™¨ æˆ– å¤š å­— èŠ‚ å†… å­˜ å˜é‡ çš„ é«˜ å­— èŠ‚ çš„ å€¼<br>
è€Œ ä¸ éœ€è¦ æˆ‘ ä»¬ æ‰‹å·¥ ç”¨ ä½ è¿ç®— ç¬¦ æ¥ è§£æ å®ƒä»¬ ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">union</span> <span class="title class_">KeyCode</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">short</span> keyNum ;</span><br><span class="line">	<span class="type">char</span> byteArr[<span class="number">2</span>] ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æšä¸¾"><a class="header-anchor" href="#æšä¸¾">ğŸŒ³</a>æšä¸¾</h3>
<p>æš ä¸¾ ç±» å‹è¿˜ å¯ ä»¥ æ˜¯ åŒ¿å</p>
<h3 id="æ–‡ä»¶"><a class="header-anchor" href="#æ–‡ä»¶">ğŸŒ³</a>æ–‡ä»¶</h3>
<p>æ–‡ä»¶ æ§åˆ¶ å— (FCB) çš„ æ•°ç»„</p>
<h2 id="6-ç¬¬ä¹ç« -ç¼–è¯‘é¢„å¤„ç†"><a class="header-anchor" href="#6-ç¬¬ä¹ç« -ç¼–è¯‘é¢„å¤„ç†">ğŸŒ³</a>6. ç¬¬ä¹ç«  ç¼–è¯‘é¢„å¤„ç†</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(1) #include &lt; &gt;</span><br><span class="line">(2) #Hinclude &quot; &quot;</span><br></pre></td></tr></table></figure>
<p>ç¬¬ ä¸€ ç§ å½¢å¼ ä¸€ èˆ¬ ç”¨ æ¥ åŒ…å« å¼€å‘ ç¯å¢ƒ æä¾› çš„ åº“ å¤´ æ–‡ä»¶ å®ƒ æŒ‡ç¤º ç¼–è¯‘ é¢„ å¤„ ç† å™¨ å¼€å‘ ç¯å¢ƒ è®¾ å®š çš„ æœç´¢ è·¯ ä¸­ æŸ¥æ‰¾ æ‰€ éœ€ çš„ å¤´ æ–‡ä»¶<br>
ç¬¬ äºŒ ç§ å½¢å¼ ä¸€ èˆ¬ ç”¨ æ¥ åŒ…å« è‡ªå·± ç¼–å†™ çš„å¤´ æ–‡ä»¶ å®ƒ æŒ‡ç¤º ç¼–è¯‘ é¢„å¤„ ç† å™¨ é¦–å…ˆ åœ¨ å½“å‰ å·¥ä½œ ç›®å½• ä¸‹ æœç´¢ å¤´ æ–‡ä»¶ å¦‚ æœ æ‰¾ ä¸ åˆ° çš„ è¯å† åˆ° å¼€å‘ ç¯å¢ƒ è®¾ å®š çš„ è·¯ å¾„ ä¸­ å» æŸ¥æ‰¾ ã€‚</p>
<p>å†… éƒ¨ åŒ…å«  å« å“¨<br>
ä¸ºäº† é¿å… åŒä¸€ ä¸ª ç¼–è¯‘ å•å…ƒ åŒ…å« åŒä¸€ ä¸ª å¤´ æ–‡ä»¶ å†… å®¹ è¶… è¿‡ ä¸€æ¬¡</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// stddef.h</span></span><br><span class="line">#ifndef_STDDEF H INCLUDED_</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STDDEF_H INCLUDED _</span></span><br><span class="line">					/ / å¤´ æ–‡ä»¶ å†… å®¹</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span>    /!STDDEF H_INCLUDED</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// XXX.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> â€œstddef.hâ€</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> â€œstddef.hâ€ /! No problem!</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å¤– éƒ¨ åŒ…å« å«  å“¨</p>
<p>å½“ ä¸€ ä¸ª å¤´ æ–‡ä»¶ è¢« ä¸€ ä¸ªæº æ–‡ä»¶ å å¤ åŒ… å« å¤š æ¬¡ é¿å… å¤š æ¬¡ æŸ¥æ‰¾ å’Œ æ‰“å¼€ å¤´ æ–‡ä»¶ çš„ æ“ä½œ</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">if</span> !defined ( INCLUDED_STDDEF_H_)</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stddef.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _INCLUDED_STDDEF_H_</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">//!_ INCLUDED _STDDEF_H_</span></span></span><br></pre></td></tr></table></figure>
<p>åœ¨ å¤´ æ–‡ä»¶ ä¸­ :<br>
(1) åŒ…å« å½“å‰ å·¥ç¨‹ ä¸­ æ‰€ éœ€è¦ çš„ è‡ª å®šä¹‰ å¤´ æ–‡ä»¶ ã€ˆ é¡º åº è‡ª );<br>
(2) åŒ…å« ç¬¬ ä¸‰ æ–¹ç¨‹ åºåº“ çš„ å¤´ æ–‡ä»¶ ;<br>
(3) åŒ…å«æ ‡å‡† å¤´ æ–‡ä»¶ ã€‚<br>
åœ¨ æº æ–‡ ä¸­ :<br>
(1) åŒ…å« æº æ–‡ä»¶ å¯¹ åº” çš„ å¤´ æ–‡ä»¶ ã€Šå¦‚ æœ å­˜ );<br>
(2) åŒ…å« å½“å‰ å·¥ç¨‹ ä¸­ æ‰€ éœ€è¦ çš„ è‡ª å®šä¹‰ å¤´ æ–‡ä»¶ ;<br>
(3) åŒ…å« ç¬¬ ä¸‰ æ–¹ç¨‹ åº åº“ çš„ å¤´ æ–‡ä»¶ ;<br>
(4) åŒ…å« æ ‡å‡† å¤´ æ–‡ä»¶</p>
<p>å® å®šä¹‰ å…·æœ‰ æ–‡ä»¶ä½œç”¨</p>
<p>å®å®šä¹‰ <code>#define</code> å…³é”® å­— å å‡ºç° çš„ ç¬¬ä¸€ ä¸ª è¿ç»­å­—ç¬¦ åºåˆ— ä½œä¸º å® å<br>
å‰© ä¸‹ çš„ éƒ¨ ä½œä¸º å®ä½“</p>
<p>å® ä¸ ä¼š è¿›å…¥ ç¬¦å·<br>
å³ å®æ›¿æ¢ å å‡º äº† è¯­æ³• é”™è¯¯ ç¼– è¯‘ å™¨ ä¹Ÿ ä¼š å°† é”™è¯¯<br>
å®šä½ åˆ° æº ç¨‹åºä¸­<br>
è€Œ ä¸ æ˜¯ å®šä½ åˆ° å…·ä½“çš„ æŸä¸ª å® å®šä¹‰</p>
<p>å®šä¹‰ å¸¦ å‚æ•° çš„ å® ï¼Œ å® å’Œ å·¦ æ‹¬å· ä¹‹ é—´ ä¸ èƒ½ å‡º ç° ç©ºæ ¼ å¦ åˆ™ ä½¿ ç”¨ æ—¶ ä¼š å‡ºé—®é¢˜<br>
ä½† æ˜¯ ç¼–è¯‘ å™¨ ä¸ æ£€æŸ¥ å‡º è¿™ ç§ é”™è¯¯</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">define <span class="title">OUTPUT</span><span class="params">(word)</span> cout &lt;&lt; <span class="meta">#word &lt;&lt; endl</span></span></span><br><span class="line"><span class="function"><span class="title">OUTPUTI</span><span class="params">( like swimming very much.)</span></span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;I like swimming very much.&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> TEXT (str)#str</span></span><br><span class="line">cout &lt;&lt; <span class="built_in">TEXT</span>(Hello World);</span><br><span class="line">(str)<span class="meta">#str(Hello World);</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PI 3.14</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PL 2 (2 * PI)</span></span><br><span class="line"></span><br><span class="line">å¸¦ å‚æ•° çš„ å® ä½“ å’Œ å„ä¸ªå½¢ å‚ åº” è¯¥ åˆ† åˆ« ç”¨ æ‹¬å· æ‹¬ èµ· æ¥</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SQUARE(x)((x) * (x))</span></span><br><span class="line"></span><br><span class="line">ä¸ è¦ åœ¨ å¼•ç”¨ å® å®šä¹‰ çš„ å‚æ•° åˆ—è¡¨ ä¸­ ä½¿ ç”¨ å¢ å’Œ å‡ é‡ è¿ç®— ç¬¦ å¦åˆ™ å°† å¯¼è‡´ å˜é‡çš„ å¤š æ¬¡ æ±‚å€¼</span><br><span class="line"><span class="type">int</span> n=<span class="number">5</span>;</span><br><span class="line"><span class="type">int</span> x = <span class="built_in">SQUARE</span>(n++&#125;;</span><br><span class="line"><span class="type">int</span> x = ((n++) * (n++));</span><br><span class="line"></span><br><span class="line">å…¶ç»“æœ å°† <span class="number">30</span> è€Œ ä¸ æ˜¯ æœŸ æœ› <span class="number">25</span></span><br></pre></td></tr></table></figure>
<p>ç”¨ å® æ¥ æ„é€  ä¸€ äº› é‡å¤ ã€ æ•°æ® å’Œ å‡½æ•° æ··åˆ çš„ åŠŸ èƒ½ è¾ƒ ç‰¹ æ®Š çš„ä»£ç  æ®µ æ—¶å€™ å…¶ ä¼˜ç‚¹å°±æ˜¾ç¤º å‡º æ¥ ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> DECLARE DYNAMIC(class_name) \</span></span><br><span class="line"><span class="meta">protected: \</span></span><br><span class="line"><span class="meta">static CRuntimeClass* PASCAL _GetBaseClass(); \</span></span><br><span class="line"><span class="meta">public: \</span></span><br><span class="line"><span class="meta">static const AFX_DATA CRuntimeClass class##class_name; \</span></span><br><span class="line"><span class="meta">virtual CRuntimeClass* GetRuntimeClass() const;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DECLARE _DYNCREATE(class_name) \</span></span><br><span class="line"><span class="meta">DECLARE_DYNAMIC(class_name) \</span></span><br><span class="line"><span class="meta">static CObject* PASCAL CreateObject();</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">undef</span> TEXT</span></span><br></pre></td></tr></table></figure>
<p>ä¸ è¦ ä½¿ ç”¨ å® æ¥ å®šä¹‰ æ–° ç±» å‹ å åº” è¯¥ ä½¿ typedefï¼Œ å¦åˆ™ å®¹æ˜“ é€ æˆé”™è¯¯<br>
ç»™ å® åŠ  æ³¨é‡Š æ—¶ è¯· ä½¿ å— æ³¨é‡Š ã€ˆ<code>/* */</code>)ï¼Œ è€Œ è¦ ä½¿ ç”¨ è¡Œ æ³¨é‡Š</p>
<p>å¯¹ äº è¾ƒ é•¿ çš„ ç”¨ é¢‘ç‡ è¾ƒé«˜ çš„ é‡å¤ ä»£ç  ç‰‡æ®µ å»º è®® ç”¨ å‡½æ•° æˆ– æ¨¡æ¿<br>
å¯¹ äº è¾ƒ çŸ­ çš„ é‡å¤ä»£ç  ç‰‡æ®µ å¯ ä»¥ ç”¨ å¸¦ å‚æ•° çš„ å® å®šä¹‰</p>
<h3 id="æ¡ä»¶ç¼–è¯‘"><a class="header-anchor" href="#æ¡ä»¶ç¼–è¯‘">ğŸŒ³</a>æ¡ä»¶ç¼–è¯‘</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#if 0</span><br><span class="line">	â€¦ / å¸Œæœ› ç¦æ­¢ ç¼–è¯‘ çš„ä»£ç </span><br><span class="line">	... / å¸Œæœ› ç¦æ­¢ ç¼–è¯‘ çš„ ä»£ç </span><br><span class="line">#endif</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘ ä¼ª æŒ‡ <code>#error</code> ç”¨ äº è¾“å‡º ä¸ å¹³å° ã€ ç¯ å¢ƒ æœ‰ å…³ çš„ ä¿¡æ¯</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">if</span> !defined(WIN32)</span></span><br><span class="line"><span class="meta">#<span class="keyword">error</span> ERROR: Only Win32 platform supported!</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> cplusplus</span></span><br><span class="line"><span class="meta">#<span class="keyword">error</span> MFC requires C++ compilation (use a .cpp suffix)</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘ä¼ªæŒ‡ä»¤#pragma ç”¨äºæ‰§è¡Œè¯­è¨€å®ç°æ‰€å®šä¹‰çš„åŠ¨ä½œ</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">pragma <span class="title">pack</span><span class="params">(push, <span class="number">8</span>)</span> <span class="comment">/* å¯¹ è±¡ å‘˜ å¯¹ é½ å­— èŠ‚æ•° æ‰€</span></span></span><br><span class="line"><span class="comment"><span class="function">#pragma pack(pop)</span></span></span><br><span class="line"><span class="comment"><span class="function">#pragma warning(disable:4069)  /*ä¸è¦äº§ç”ŸC4069è­¦å‘Š */</span></span></span><br><span class="line"><span class="function"><span class="meta">#<span class="keyword">pragma</span> comment(lib, <span class="string">&quot;kernel32.lib&quot;</span>)</span></span></span><br><span class="line"><span class="function"><span class="meta">#<span class="keyword">pragma</span> comment(lib, <span class="string">&quot;user32.lib&quot;</span>)</span></span></span><br><span class="line"><span class="function"><span class="meta">#<span class="keyword">pragma</span> comment(lib, <span class="string">&quot;gdi32.lib&quot;</span>)</span></span></span><br></pre></td></tr></table></figure>
<p>æ„ ä¸² æ“ä½œç¬¦ # åª èƒ½ä¿®é¥° å¸¦ å‚æ•° çš„ å® çš„ å½¢ å‚ å®ƒ å°† å® å‚ çš„ å­—ç¬¦ åºåˆ—<br>
è½¬æ¢ å­—ç¬¦ ä¸² å¸¸é‡<br>
è€Œ ä¸ æ˜¯ å® å‚ä»£è¡¨ çš„å€¼</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> STRING(x) #x #x #x</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> TEXT(x) <span class="string">&quot;class&quot;</span> #x <span class="string">&quot;Info&quot;</span></span></span><br></pre></td></tr></table></figure>
<p>åˆå¹¶ æ“ä½œç¬¦ ## å°† å‡ºç°åœ¨ å…¶ å·¦å³ çš„ å­—ç¬¦ åºåˆ— åˆå¹¶ æˆ ä¸ªæ–° çš„æ ‡è¯†</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> CLASS NAME(name) class##name</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MERGE(x, y) x##y#x</span></span><br><span class="line"></span><br><span class="line">classSysTimer</span><br><span class="line">meTome</span><br></pre></td></tr></table></figure>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230602074658.png" alt></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">double</span> * <span class="type">const</span> pDouble = <span class="built_in">new</span>(nothrow) <span class="type">double</span>[ <span class="number">10000000</span>&#125;;</span><br><span class="line"><span class="keyword">if</span>( pDouble == <span class="literal">NULL</span> ) &#123;</span><br><span class="line">cerr &lt;&lt; <span class="string">&quot;allocate memory failed on line&quot;</span>&lt;&lt;(_ LINE <span class="number">-2</span>)</span><br><span class="line">&lt;&lt; <span class="string">&quot;in file&quot;</span> &lt;&lt; FILE &lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="c-æ–‡ä»¶ç»“æ„-ç¨‹åºæ¿å¼"><a class="header-anchor" href="#c-æ–‡ä»¶ç»“æ„-ç¨‹åºæ¿å¼">ğŸŒ³</a>C++æ–‡ä»¶ç»“æ„ ç¨‹åºæ¿å¼</h3>
<p>å¤´ æ–‡ä»¶ çš„ æœ‰ å†… å®¹ æœ€ ç»ˆéƒ½ ä¼š è¢« åˆå¹¶ åˆ° æŸ ä¸€ ä¸ª æˆ– å‡  ä¸ª æº æ–‡ä»¶ ï¼Œ<br>
å¦‚ æ­¤ å°† ä¸€ ä¸ª åŒ…å« çš„ å¤´ æ–‡ä»¶ é€’å½’ åœ° å±•å¼€ å å½¢æˆ çš„ æº æ–‡ä»¶ å« ç¼–è¯‘å•å…ƒ</p>
 <figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"> <span class="type">char</span> *name;</span><br><span class="line"><span class="type">int</span> *xï¼Œy; / æ­¤ y ä¸ ä¼š è¯¯è§£ ä¸º æŒ‡é’ˆ</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span>* PINT;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span>&amp; RINT;</span><br><span class="line">PINT pl, p2; / ä¸¤ ä¸ª æŒ‡é’ˆ</span><br><span class="line">RINT ril=i r2=j; /ä¸¤ å¼•ç”¨</span><br></pre></td></tr></table></figure>
<h3 id="c-å‘½åè§„åˆ™"><a class="header-anchor" href="#c-å‘½åè§„åˆ™">ğŸŒ³</a>C++å‘½åè§„åˆ™</h3>
<h2 id="7-c-é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡æ–¹æ³•"><a class="header-anchor" href="#7-c-é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡æ–¹æ³•">ğŸŒ³</a>7. C++é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡æ–¹æ³•</h2>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">ç»§æ‰¿</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Funcl</span><span class="params">(<span class="type">void</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Func2</span><span class="params">(<span class="type">void</span>)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span> A &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Func3</span><span class="params">(<span class="type">void</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Func4</span><span class="params">(<span class="type">void</span>)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">main</span>()</span><br><span class="line">&#123;</span><br><span class="line">B b;</span><br><span class="line">b.<span class="built_in">Funcl</span>(); </span><br><span class="line">b.<span class="built_in">Func2</span>();</span><br><span class="line">b.<span class="built_in">Func3</span>();</span><br><span class="line">b.<span class="built_in">Func4</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>C++ è™šå‡½æ•°ï¼ŒæŠ½è±¡åŸºç±»ï¼Œ åŠ¨æ€ç»‘å®š (Dynamic binding) å¤šæ€ (Polymorphism)<br>
æ„æˆ äº† å‡º è‰² çš„ åŠ¨æ€ ç‰¹æ€§</p>
<p>ä¸º äº† ä½¿ è¿™ ç§ è¡Œä¸º å¯ è¡Œ æˆ‘ ä»¬ æŠŠåŸºç±» Shape ä¸­ çš„ å‡½æ•° Draw0O å£° æ˜ ä¸º è™š å‡½ æ•°<br>
ç„¶ ååœ¨ æ´¾ç”Ÿ ç±» ä¸­ é‡æ–°å®šä¹‰ Draw()<br>
ä½¿ ä¹‹ç»˜åˆ¶ æ­£ç¡® çš„ å½¢çŠ¶ è¿™ ç§ æ–¹æ³•å«è¦†ç›– ã€ˆOverride)ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Draw</span><span class="params">(<span class="type">void</span>)</span></span>; <span class="comment">// Draw() </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> : <span class="keyword">public</span> Shape &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Draw</span><span class="params">(<span class="type">void</span>)</span></span>; / /Draw0O ä¸º è™š å‡½æ•° ä¸å†™<span class="keyword">virtual</span> ä¹Ÿä¼šå˜æˆè™šå‡½æ•°</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŠ½ è±¡ ç±» çš„å”¯ â€“ ç›® çš„ æ˜¯ è®© å…¶æ´¾ç”Ÿ ç±» ç»§æ‰¿ å¹¶ å®ç° å®ƒ çš„ æ¥å£ æ–¹æ³• (Method)ï¼Œ<br>
å›  æ­¤ å®ƒ é€š ä¹Ÿ è¢« ç§° ä¸ºæŠ½è±¡ åŸº ç±» ã€ˆAbstract Base Class)</p>
<p>å¦‚ æœ å°† åŸº ç±» çš„ è™š å‡½ æ•° å£°æ˜ ä¸º çº¯è™š å‡½æ•° é‚£ ä¹ˆ ç±» å°± å®šä¹‰ äº† æŠ½è±¡ åŸºç±» ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Shape</span> &#123; <span class="comment">// Shape æ˜¯ æŠ½è±¡ åŸºç±»</span></span><br><span class="line">ublic:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Draw</span><span class="params">(<span class="type">void</span>)</span> </span>= <span class="number">0</span>; / <span class="built_in">Draw</span>(<span class="number">0</span> ä¸º çº¯ è™š å‡½æ•°</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°†ä¸€ ä¸ª å‡½æ•°åˆå§‹ åŒ– 0 æ„å‘³ ç€ å‡½æ•° åœ° å€ å°†ä¸º 0ï¼Œ<br>
è¿™å°±æ˜¯ åœ¨ å‘Šè¯‰ ç¼–è¯‘ å™¨ ä¸ è¦ ä¸º å‡½æ•° ç¼– å€ ä» è€Œé˜»æ­¢ ç±» çš„ å®ä¾‹ åŒ–è¡Œä¸º<br>
C++ ä¸­ åª æœ‰è™š å‡½ æ•° æ‰å¯ ä»¥ è¢« åˆå§‹ åŒ– 0</p>
<p>ä¸€èˆ¬ çš„ ä¿¡æ¯ éšè— æ˜¯ æŠŠç±» çš„ æœ‰ æ•°æ® å‘˜ å£° æ˜ private æˆ– protected çš„<br>
å¹¶ æä¾› ç›¸åº” get set å‡½æ•° æ¥ è®¿é—® å¯¹è±¡ çš„ æ•°æ®</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> [Rectangle &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="keyword">virtual</span> ~<span class="built_in">IRectangle</span>() &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">float</span> <span class="title">GetLength</span><span class="params">()</span> <span class="type">const</span> </span>= <span class="number">0</span> </span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">SetLength</span><span class="params">( <span class="type">float</span> newLength)</span> </span>= <span class="number">0</span> ;</span><br><span class="line"><span class="keyword">virtual</span> <span class="type">float</span> GetWidthQ <span class="type">const</span> = <span class="number">0</span> ;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">SetWidth</span><span class="params">(<span class="type">float</span> <span class="keyword">new</span> Width)</span> </span>= <span class="number">0</span> ;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> RGB <span class="title">GetColor</span><span class="params">()</span> <span class="type">const</span> </span>= <span class="number">0</span> ; <span class="comment">// RGB : unsigned long</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">SetColor</span><span class="params">(RGB newColor)</span> </span>= <span class="number">0</span> ;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">float</span> <span class="title">CalculateArea</span><span class="params">()</span> <span class="type">const</span> </span>= <span class="number">0</span> ;</span><br><span class="line"><span class="keyword">virtual</span> <span class="type">void</span> DrawQ) = <span class="number">0</span>;</span><br><span class="line"><span class="type">static</span> IRectangle* _stdcall CreateRectangleQ; /å…¥ å£ å‡½æ•°</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Destroy</span><span class="params">()</span></span>&#123; <span class="keyword">delete</span> <span class="keyword">this</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RectangleImpl</span> : <span class="keyword">public</span> [Rectangle &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">RectangleImplQ : <span class="built_in">m_length</span>(<span class="number">1</span>), <span class="built_in">m_width</span>(<span class="number">1</span>), <span class="built_in">m_color</span>(OxOOFFEC4D)&#123;&#125;</span><br><span class="line"><span class="keyword">virtual</span> ~<span class="built_in">RectangleImpl</span>() &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">float</span> <span class="title">GetLength</span><span class="params">( <span class="type">const</span> &#123; <span class="keyword">return</span> m_length; &#125;</span></span></span><br><span class="line"><span class="params"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> SetLength(<span class="type">float</span> newLength) &#123; m_length = newLength; &#125;</span></span></span><br><span class="line"><span class="params"><span class="function"><span class="keyword">virtual</span> <span class="type">float</span> GetWidth() <span class="type">const</span> &#123; <span class="keyword">return</span> m_width; &#125;</span></span></span><br><span class="line"><span class="params"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> SetWidth(<span class="type">float</span> newWidth) &#123; m_width = newWidth; &#125;</span></span></span><br><span class="line"><span class="params"><span class="function"><span class="keyword">virtual</span> RGB GetColor() <span class="type">const</span> &#123; <span class="keyword">return</span> m_color; &#125;</span></span></span><br><span class="line"><span class="params"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> SetColor(RGB newColor) &#123; m_color = newColor; &#125;</span></span></span><br><span class="line"><span class="params"><span class="function"><span class="keyword">virtual</span> <span class="type">float</span> CalculateArea() <span class="type">const</span> &#123; <span class="keyword">return</span> m_length * m_width; &#125;</span></span></span><br><span class="line"><span class="params"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> +Draw() &#123; cout &lt;&lt; <span class="string">&quot;RectangleImpl::Draw(Q)&quot;</span> &lt;&lt; endl; &#125;</span></span></span><br><span class="line"><span class="params"><span class="function"><span class="keyword">private</span>:</span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="type">float</span> m_length;</span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="type">float</span> m_width;</span></span></span><br><span class="line"><span class="params"><span class="function">	RGB mcolor;</span></span></span><br><span class="line"><span class="params"><span class="function">&#125;;</span></span></span><br><span class="line"><span class="params"><span class="function">	IRectangle* stdcall IRectangle::CreateRectangleO</span></span></span><br><span class="line"><span class="params"><span class="function">	&#123;Return <span class="keyword">new</span>(nothrow) RectangleImpl;&#125;</span></span></span><br></pre></td></tr></table></figure>
<p>æ¯ ä¸€ ä¸ª å…·æœ‰ è™š å‡½ æ•° çš„ ç±» éƒ½ å«åš å¤š æ€ ç±»ï¼Œ<br>
è¿™ ä¸ª è™š å‡½ æ•° æˆ–è€…æ˜¯ ä»åŸº ç±» ç»§æ‰¿ æ¥ æˆ–è€…æ˜¯ è‡ªå·± æ–° å¢åŠ <br>
C++ ç¼–è¯‘ å™¨ å¿…é¡» ä¸º æ¯ ä¸€ å¤š æ€ ç±» è‡³ å°‘ åˆ›å»º ä¸€ ä¸ª è™š å‡½ æ•° è¡¨ (vtable )ï¼Œ<br>
å®ƒ å® å°± æ˜¯ä¸€ ä¸ª å‡½æ•° æŒ‡é’ˆ æ•°ç»„<br>
å…¶ ä¸­ å­˜æ”¾ ç€è¿™ ä¸ªç±» æ‰€ æœ‰ çš„ è™š å‡½ æ•° çš„ åœ° å€ åŠ è¯¥ ç±» çš„ ç±»ã€å‹ä¿¡æ¯<br>
å…¶ ä¸­ ä¹Ÿ åŒ…æ‹¬ é‚£äº› ç»§æ‰¿ä½† æœª æ”¹å†™ ã€ŠOverrides) çš„ è™š å‡½ æ•°</p>
<p>æ¯ä¸€ ä¸ª å¤š æ€ å¯¹æœ‰ ä¸€ ä¸ª éš å« çš„ æŒ‡é’ˆ æˆ ï¼Œ å®ƒ æŒ‡å‘ æ‰€ å± ç±» å‹ vtableï¼Œ è¿™å°± vptrã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">(*(p-&gt;_vptr[slotNum]))(p, arg-list); <span class="comment">// æŒ‡é’ˆ å½“ ä½œ æ•°ç»„ æ¥ ç”¨ æœ€ å æ”¹å†™ ä¸º æŒ‡é’ˆ è¿ç®—</span></span><br></pre></td></tr></table></figure>
<p>æ´¾ç”Ÿ ç±» å®šä¹‰ ä¸­ çš„ å å­— ã€ˆ å¯¹ è±¡ å‡½æ•° ) å°† ä¹‰æ— åé¡¾ åœ° é® é¡¹ ã€ˆ( å³ éšè— )æ‰ ã€<br>
åŸº ç±» ä¸­ ä»»ä½• åŒå çš„ å¯¹ è±¡ å‡½æ•°</p>
<p>åŸº äº è¿™ æ · çš„ è§„åˆ™ ï¼Œ å¦‚ æœ æ´¾ç”Ÿ ç±» å®šä¹‰ äº† ä¸€ ä¸ª ä¸ åŸºç±» çš„ è™š å‡½ æ•° åŒå çš„ è™š å‡½ æ•°<br>
ä½† æ˜¯ <strong>å‚æ•° åˆ—è¡¨ æœ‰ æ‰€ ä¸ åŒ</strong><br>
é‚£ è¿™å°± ä¸ ä¼š ç¼–è¯‘ å™¨ è®¤ä¸º æ˜¯å¯¹ åŸº ç±» è™š å‡½ æ•° çš„ æ”¹å†™ (Overrides)ï¼Œ è€Œ æ˜¯ <strong>éšè—</strong><br>
æ‰€ ä»¥ ä¹Ÿ ä¸ å¯ èƒ½ ç”Ÿ è¿è¡Œ æ—¶ ç»‘ å®š</p>
<p>è¦ æƒ³ è¾¾æˆ è¿è¡Œ æ—¶ <strong>ç»‘ å®š</strong> çš„ æ•ˆæœ ï¼Œ<br>
æ´¾ ç”Ÿ ç±» å’Œ åŸº ç±» ä¸­ åŒå çš„ è™š å‡½ æ•° å¿…é¡» å…·æœ‰ ç›¸åŒ çš„ åŸå‹ ï¼Œ<br>
ä¹Ÿ å³ ç›¸åŒ Signatureã€ˆ è¿” å› ç±» å‹å¯ ä»¥ ä¸ åŒ è¿™æ˜¯ C++ çš„ ä¸€ ä¸ª ç‰¹å¾ ä¸€ å å˜)ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">IRectangle</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="keyword">virtual</span> ~<span class="built_in">IRectangle</span>() &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Draw</span><span class="params">()</span> </span>= <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RectangleImpl</span> : <span class="keyword">public</span> [Rectangle &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">RectangleImplQ) : <span class="built_in">m_length</span>(<span class="number">1</span>), <span class="built_in">m_width</span>(<span class="number">1</span>), <span class="built_in">m_color</span>(Ox0OFFEC4D) &#123;&#125;</span><br><span class="line"><span class="keyword">virtual</span> ~<span class="built_in">RectangleImpl</span>() &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Draw</span><span class="params">(<span class="type">int</span> scale)</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;RectangleImpl::Draw(int)&quot;</span> &lt;&lt; endl; &#125; <span class="comment">// (1)</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Draw</span><span class="params">()</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;RectangleImpl::Draw()&quot;</span> &lt;&lt; endl; &#125; (<span class="number">2</span>)</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">float</span> m_length;</span><br><span class="line"><span class="type">float</span> m_width;</span><br><span class="line">RGB mcolor;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">IRectangle *pRect = [Rectangle::<span class="built_in">CreateRectangle</span>();</span><br><span class="line"><span class="keyword">if</span> (pRect == <span class="literal">NULL</span>) <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">pRect-&gt;<span class="built_in">Draw</span>(); <span class="comment">// FA-F pRect MatAS2R HW TRectangle*, ATLAH IRectangle::</span></span><br><span class="line">/Draw0 æ‰§è¡Œ é™æ€ ç±» å‹ æ£€æŸ¥ ä½† ç”± pRect æŒ‡å‘ çš„ å¯¹ è±¡å®é™… æ˜¯</span><br><span class="line">/&#123; Rectanglelmpl <span class="number">9</span>, <span class="function">FAM hse Fl <span class="title">Rectanglelmpl::Draw</span><span class="params">()</span>!</span></span><br><span class="line"><span class="function">pRect-&gt;<span class="title">Draw</span><span class="params">(<span class="number">200</span>)</span></span>; /W åŒ ç† ç”± äº ä¸‹ ectangie ç±» å¹¶ æ²¡æœ‰ æ­¤ ç±» åŸå‹ çš„ å‡½æ•° å›  æ­¤ æ‹’ç»</span><br><span class="line">/ ç¼–è¯‘ é™¤ pRect çš„ ç±» å‹ RectangleImpl* ã€‚ æ­¤ <span class="built_in">Draw</span>(<span class="number">0</span>) é å½¼</span><br><span class="line">/DrawgO</span><br><span class="line">pRect-&gt;<span class="built_in">Destroy</span>();</span><br><span class="line">pRect = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å¦‚ æœ RectangleImpl ä¸ é‡ å®šä¹‰ Draw0O å‡½ æ•° é‚£ ä¸‹ é¢<br>
ä»£ç  ï¼Œ</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">RectangleImpl *pRectImpl = <span class="keyword">new</span> RectangleImpli</span><br><span class="line">pRectImpl-&gt;DrawQ); /<span class="built_in">f</span> (<span class="number">3</span>)</span><br><span class="line">pRectImpl-&gt;<span class="built_in">Draw</span>(<span class="number">200</span>); <span class="comment">// OK!</span></span><br></pre></td></tr></table></figure>
<p>å°† æ— æ³• ç¼–è¯‘ å›  ä¸º (3) å¤„ è°ƒç”¨ çš„ Draw0 æ˜¯ åŸº ç±» çš„ å‡½æ•° å®ƒ RectangleImpl ä¸­ çš„ åŒå<br>
| BR Drawn eT, BRT!</p>
<h3 id="è¿è¡Œæ—¶å¤šæ€"><a class="header-anchor" href="#è¿è¡Œæ—¶å¤šæ€">ğŸŒ³</a>è¿è¡Œæ—¶å¤šæ€</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Draw</span><span class="params">(Shape *pShape)</span> <span class="comment">// SAHA</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pShape-&gt;<span class="built_in">Draw</span>(); / æˆ– : (*pShapej.<span class="built_in">Draw</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">main</span>()</span><br><span class="line">&#123;</span><br><span class="line">Circle aCircle;</span><br><span class="line">Cube aCube;</span><br><span class="line">Sphere aSphere;</span><br><span class="line">:<span class="built_in">Draw</span>(&amp;aCircle); <span class="comment">// ç»˜åˆ¶ ä¸€ circle</span></span><br><span class="line">:<span class="built_in">Draw</span>(&amp;aCube); /W ç»˜åˆ¶ ä¸€ cube</span><br><span class="line">:<span class="built_in">Draw</span>(&amp;aSphere); / ç»˜åˆ¶ ä¸€ Sphere</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>RTTIä¹Ÿæ˜¯ä¸€ç§è¿è¡Œæ—¶å¤šæ€ dynamic_cast&lt;&gt; å’Œ typeid è¿ç®— ç¬¦<br>
ä¾èµ– RTTI ä¼š å¯¼ è‡´ ä¸¥é‡ çš„ æ•ˆç‡ ä½ä¸‹</p>
<p>å¦‚ æœ ç¡® å® éœ€è¦ä½¿ ç”¨ å¤š æ€ æ•° ç»„ è¯·ä½¿ STL å®¹å™¨ é…åˆ æ™®é€š æŒ‡é’ˆ æˆ–è€… æ™ºèƒ½ æŒ‡é’ˆ</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> SmartPtr&lt;Shape&gt; ShapeSmartPtr;</span><br><span class="line">ShapeSmartPtr shapes[<span class="number">3</span>];</span><br><span class="line"><span class="function">ShapeSmartPtr <span class="title">p</span><span class="params">(<span class="keyword">new</span> Shape(Point(<span class="number">1</span>, <span class="number">1</span>)))</span></span>;</span><br><span class="line"><span class="function">ShapeSmartPtr <span class="title">q</span><span class="params">(<span class="keyword">new</span> Circle(Point(<span class="number">2</span>, <span class="number">2</span>), <span class="number">5</span>))</span></span>;</span><br><span class="line"><span class="function">ShapeSmartPtr <span class="title">r</span><span class="params">(<span class="keyword">new</span> Rectangle(Point(<span class="number">3</span>, <span class="number">3</span>), Point(<span class="number">4</span>, <span class="number">4</span>)))</span></span>;</span><br><span class="line">shapes[<span class="number">0</span>] = p;</span><br><span class="line">shapes[<span class="number">1</span>] = q;</span><br><span class="line">shapes[<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; <span class="number">1</span> &lt; <span class="number">3</span>; ++i)</span><br><span class="line">shapes[i]-&gt;<span class="built_in">Draw</span>();</span><br></pre></td></tr></table></figure>
<h3 id="c-å¯¹è±¡æ¨¡å‹"><a class="header-anchor" href="#c-å¯¹è±¡æ¨¡å‹">ğŸŒ³</a>C++å¯¹è±¡æ¨¡å‹</h3>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230602093920.png" alt></p>
<p>å¦‚ æœ åŸº ç±» å·² ç» æ’å…¥ äº† vptrï¼Œ åˆ™ æ´¾ç”Ÿ ç±» å°† ç»§æ‰¿ å’Œ é‡ç”¨ vptr;</p>
<p>å¦‚ æœ æ´¾ ç”Ÿ ç±» æ˜¯ ä» å¤š ä¸ª åŸº ç±» ç»§æ‰¿ æˆ– æœ‰ å¤š ä¸ª ç»§æ‰¿ åˆ† ã€Šä» æ‰€ æœ‰æ ¹ç±» å¼€å§‹ ç®—èµ· )ï¼Œ<br>
è€Œ ä¸­ è‹¥å¹² ä¸ª ç»§æ‰¿ åˆ† ä¸Š å‡º äº† å¤š æ€ ï¼Œ<br>
åˆ™ æ´¾ç”Ÿ ç±» å°† ä» è¿™äº› åˆ† ä¸­ çš„æ¯ ä¸ª åˆ† ä¸Š ç»§æ‰¿ ä¸€ ä¸ªvptrï¼Œ<br>
ç¼– è¯‘ å™¨ ä¹Ÿ å°† ä¸º å®ƒ ç”Ÿ æˆ å¤š ä¸ª vtableï¼Œ<br>
æœ‰ å‡  vptr å°±ç”Ÿæˆ å‡  ä¸ª vtable (æ¯ vptr åˆ† åˆ« æŒ‡å‘ ä¸­ ä¸€ )ï¼Œ<br>
åˆ† åˆ« ä¸å®ƒ çš„ å¤š æ€ åŸº ç±» å¯¹ åº” ;</p>
<p>vptr åœ¨ æ´¾ç”Ÿ ç±» å¯¹ è±¡ ä¸­ çš„ ç›¸å¯¹ ä½ ç½® ä¸ ä¼š éš ç€ ç»§æ‰¿å±‚æ¬¡ çš„ é€æ¸ åŠ  æ·± è€Œ æ”¹å˜<br>
å¹¶ä¸”ç°åœ¨ çš„ ç¼–è¯‘ å™¨ ä¸€ èˆ¬ éƒ½ vptr æ”¾ åœ¨ æœ‰ æ•°æ® å‘˜ çš„ æœ€ å‰</p>
<p>ä¸º äº† æ”¯æŒ RTTIï¼Œ ä¸º ä¸€ å¤š æ€ ç±» åˆ›å»º ä¸€ type_info å¯¹ è±¡<br>
å¹¶ æŠŠ åœ° å€ ä¿å­˜åœ¨ vtable ä¸­ çš„ å›ºå®š ä½</p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230602094557.png" alt></p>
<p>vtable ä¹Ÿ æ˜¯ä¸€ ä¸ª å‡½æ•° æŒ‡é’ˆ æ•°ç»„ æŒ‰ ç† è¯´ ä¹Ÿ åª èƒ½ å­˜æ”¾ ç±» å‹ ç›¸åŒ çš„ å‡½æ•° æŒ‡é’ˆ ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">void</span> <span class="params">(__cdecl *PVFN)</span><span class="params">(<span class="type">void</span>)</span></span>; / é€šç”¨ çš„ è™š å‡½ æ•° æŒ‡é’ˆ ç±»</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">	type_info *_pTypelnfo;</span><br><span class="line">	PVFN _arrayOfPvfn&#123;]; / è™š å‡½ æ•° ä¸ª æ•° ç”±åˆå§‹ åŒ– è¯­å¥ ç¡®å®š</span><br><span class="line">&#125; VIABLE;</span><br></pre></td></tr></table></figure>
<p>å¦‚ æœæ´¾ ç”Ÿ ç±» æ”¹å†™ äº† åŸº ç±» çš„ è™š å‡½ æ•°<br>
åˆ™ è¿™ ä¸ª å‡½æ•° çš„ åœ°å€ åœ¨æ´¾ç”Ÿ ç±» vtable ä¸­ çš„ä½ ç½® å®ƒ åœ¨å…¶ åŸºç±» vtable ä¸­ çš„ ä½ ç½® ä¸€è‡´<br>
(è¦†ç›–)</p>
<p>è™š å‡½ æ•° ç¬¬ä¸€ æ¬¡ å‡ºç°æ—¶ å®ƒ vtable ä¸­ çš„ ä½ ç½® æ—¦ ç¡®å®š å°± ä¸éš æ´¾ç”Ÿ å±‚æ¬¡ çš„ å¢åŠ  è€Œ æ”¹å˜<br>
é™¤ é æ”¹ äº† å®ƒ å’Œ å…¶ ä»– è™š å‡½ æ•° class ä¸­ ç¬¬ ä¸€ æ¬¡å£°æ˜ çš„ é¡ºåº</p>
<p>æ´¾ç”Ÿ ç±» æ²¡æœ‰ æ”¹å†™ åŸº ç±» è™š å‡½ æ•° è¢« ç»§æ‰¿ ä¸‹æ¥å¹¶ æ’å…¥æ´¾ç”Ÿ ç±» vtable ä¸­<br>
(ä¸ è¯¥å‡½æ•° æ‰€ åœ¨ åŸº ç±»å¯¹ åº” ä¸‹ æ¥ çš„ é‚£ä¸ª vtable)ï¼Œ<br>
ä¸” åœ¨ æ´¾ç”Ÿ ç±» vtable ä¸­ çš„ ä½ ç½® å…¶åŸº ç±» vtable ä¸­ çš„ ä½ ç›¸ åŒ</p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230602102846.png" alt></p>
<p>ç±»çš„ é™æ€ æ•°æ® å‘˜ å¯ ä»¥ class çš„ å®šä¹‰ ä¸­ ç›´æ¥ åˆå§‹ åŒ–<br>
ä½† æ˜¯è¦ æ¸…æ¥š : è¿™ åª æ˜¯å£°æ˜å¹¶ ç»™ å®ƒ æä¾› äº† ä¸€ ä¸ª åˆ å€¼ è€Œ å·²<br>
è¿˜ å¿…é¡» åœ¨ æŸ ä¸€ ä¸ª ç¼–è¯‘ å•å…ƒ ä¸­ æŠŠ å®ƒ å®šä¹‰ ä¸€ æ¬¡ã€ˆ å³ åˆ† é… å†…å­˜)ã€‚</p>
<h2 id="8-å¯¹è±¡çš„åˆå§‹åŒ–-æ‹·è´-ææ„"><a class="header-anchor" href="#8-å¯¹è±¡çš„åˆå§‹åŒ–-æ‹·è´-ææ„">ğŸŒ³</a>8. å¯¹è±¡çš„åˆå§‹åŒ– æ‹·è´ ææ„</h2>
<p>â€åˆå§‹ åŒ– æ˜¯ åœ¨ å¯¹ è±¡ åˆ›å»º çš„ åŒæ—¶ ä½¿ åˆ ç›´æ¥ å¡«å…… å¯¹ è±¡ çš„ å†… å­˜å• å…ƒ å›  æ­¤<br>
ä¸ æœ‰ æ•°æ® ç±» å‹ è½¬æ¢ ä¸­ é—´ è¿‡ ç¨‹ ä¹Ÿ å°± ä¸ ä¼š äº§ç”Ÿ ä¸´æ—¶ å¯¹ è±¡</p>
<p>èµ‹å€¼ åˆ™ æ˜¯åœ¨ å¯¹ è±¡ åˆ›å»º å¥½ å ä»»ä½• æ—¶ å€™ å¯ ä»¥ è°ƒç”¨ çš„ è€Œ ä¸” å¯ ä»¥ å¤š æ¬¡ è°ƒç”¨ çš„ å‡½æ•°<br>
ç”± äºå®ƒ è°ƒç”¨ çš„ â€œ=â€ è¿ ç®— ç¬¦<br>
å›  æ­¤ å¯ èƒ½ éœ€è¦ è¿›è¡Œ ç±» å‹ è½¬æ¢ å³ ä¼š äº§ç”Ÿ ä¸´æ—¶ å¯¹è±¡</p>
<p>å¦‚æœç¨‹åºå‘˜æ²¡æœ‰ä¸ºä¸€ä¸ªå¤šæ€ç±»æ˜¾å¼åœ°å®šä¹‰ é»˜è®¤æ„é€ å‡½æ•° æ‹·è´æ„é€ å‡½æ•° ææ„å‡½æ•°æˆ–æ‹·è´èµ‹å€¼å‡½æ•°<br>
é‚£ä¹ˆ ç¼–è¯‘ å™¨ä¼š è‡ªåŠ¨ åœ° ç”Ÿæˆ ç›¸åº” çš„ å‡½æ•° å®ƒ ä»¬ éƒ½public inlineçš„ ,<br>
å¹¶ åœ¨ å…¶ä¸­ æ’å…¥ æ­£ç¡® åˆå§‹ åŒ– æˆ– ä¿®æ”¹ vptr æ•° æ® å‘˜ å€¼ ä»£ç  ï¼Œ<br>
ä» è€Œ ç¡®ä¿åŸº ç±» å¯¹ å’Œ æ´¾ç”Ÿ ç±» å¯¹ è±¡ æ„é€  æ—¶ åŠ åœ¨ å®ƒä»¬ ä¹‹ é—´ æ‹·è´æ—¶<br>
vptr èƒ½ å¤Ÿå‘ é‡æ–° æŒ‡å‘ æ°å½“ çš„ vtable.<br>
è¿™æ · å›› ä¸ª å‡½æ•° å°± åˆ† åˆ« å« åš<br>
é å¹³å‡¡ é»˜è®¤ æ„é€ å‡½æ•°<br>
é å¹³å‡¡ æ‹·è´ æ„é€  å‡½æ•°<br>
é å¹³å‡¡ æ æ„ å‡½æ•° å’Œ<br>
é å¹³å‡¡ æ‹·è´ èµ‹å€¼ å‡½æ•°</p>
<p>åœ¨ æ„é€  å‡½æ•° ä½“å†… æ¥ åˆå§‹ åŒ– æ•°æ® ä¸ æ˜¯ çœŸæ­£ æ„ä¹‰ ä¸Š çš„åˆå§‹åŒ– è€Œ æ˜¯ èµ‹å€¼</p>
<p>ç”± äº æ„é€  å‡½æ•° æ˜¯ åˆ›å»º ä¸€ å¯¹è±¡ æ—¶ è‡ªåŠ¨ è°ƒç”¨ çš„ ç¬¬ ä¸€ ä¸ª æˆå‘˜ å‡½æ•°<br>
å›  æ­¤ æˆ‘ ä»¬ä¹Ÿ æ„¿æ„ æŠŠ æ„é€  å‡½æ•° ä½“å†… çš„ èµ‹å€¼ è¯­å¥ å½“æˆ åˆå§‹ åŒ– æ¥ çœ‹</p>
<p>çœŸæ­£ çš„ åˆå§‹ åŒ– æ˜¯ ç”¨ æ‰€ è°“ â€œåˆå§‹ åŒ–è¡¨è¾¾å¼è¡¨â€( ç®€ç§° åˆå§‹ åŒ– åˆ—è¡¨ ) è¿›è¡Œ<br>
åˆå§‹ åŒ– åˆ—è¡¨ ä½ äº æ„é€  å‡½æ•° å‚æ•° è¡¨ ä¹‹ å åœ¨ å‡½æ•° {} ä¹‹ å‰</p>
<p>å¦‚ æœ ç±» å­˜åœ¨ ç»§æ‰¿ å…³ç³» æ´¾ ç”Ÿç±»å¯ ä»¥ ç›´æ¥ åœ¨å…¶ åˆå§‹ åŒ– åˆ—è¡¨ é‡Œ<br>
è°ƒç”¨ åŸº ç±» çš„ ç‰¹å®šæ„é€  å‡½æ•° ä»¥ å‘ å®ƒ ä¼ é€’ å‚æ•°<br>
å›  ä¸º æˆ‘ä»¬ ä¸ èƒ½ åœ¨ åˆå§‹ åŒ– å¯¹ è±¡ æ—¶ è®¿é—® åŸº ç±» çš„ æ•°æ® æˆ å‘˜</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">A</span>(<span class="type">int</span> x); /A çš„ æ„é€  å‡½æ•°</span><br><span class="line">vas B : <span class="keyword">public</span> A &#123;</span><br><span class="line"><span class="built_in">B</span>(<span class="type">int</span> x, <span class="type">int</span> y); /B çš„ æ„é€ å‡½æ•°</span><br><span class="line">Buin x, <span class="type">int</span> y) : <span class="built_in">A</span>(x) / åœ¨ åˆå§‹ åŒ– åˆ—è¡¨ é‡Œ è°ƒç”¨ A çš„ æ„é€  å‡½æ•°</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç±» çš„ é é™ const æ•°æ® æˆ å’Œ å¼•ç”¨ æˆ å‘˜ åª èƒ½ åœ¨ åˆå§‹ åŒ– åˆ—è¡¨ é‡Œ åˆå§‹ åŒ–<br>
å›  ä¸ºå®ƒä»¬ åª å­˜åœ¨ åˆå§‹ åŒ– è¯­ä¹‰ è€Œ ä¸ å­˜åœ¨ èµ‹å€¼ è¯­ä¹‰</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int m;</span><br><span class="line">int &amp;n=m;</span><br><span class="line"></span><br><span class="line">class A &#123;</span><br><span class="line">A(void); BRA</span><br><span class="line">A(const A&amp; other); / æ‹·è´ æ„é€  å‡½æ•°</span><br><span class="line">A&amp; operator =( const A&amp; other); / èµ‹å€¼ å‡½æ•°</span><br><span class="line">&#125;;</span><br><span class="line">class B &#123;</span><br><span class="line">public:</span><br><span class="line">B(const A&amp; a); /B çš„ æ„é€  å‡½æ•°</span><br><span class="line">Private:</span><br><span class="line">A ma; / æˆ å‘˜ å¯¹</span><br><span class="line">&#125;;</span><br><span class="line">/ (1) é‡‡ç”¨ åˆå§‹ åŒ– åˆ—è¡¨ çš„ æ–¹å¼åˆå§‹</span><br><span class="line">B::B(const A&amp; a) : m_a(a)</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line">(2) é‡‡ç”¨ å‡½æ•° ä½“å†… èµ‹å€¼ çš„ æ–¹å¼ åˆå§‹</span><br><span class="line">B::B(const A&amp; a)</span><br><span class="line">&#123;</span><br><span class="line">m_a=a; // ã€ˆ è°ƒ äº† A çš„ é»˜è®¤ æ„é€  å‡½æ•° )ï¼Œ å† è°ƒç”¨ç±» A çš„ èµ‹å€¼ å‡½æ•° æ‰ å°† å‚æ•° aèµ‹ m_aã€‚</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹äº å†… éƒ¨ æ•°æ® ç±» å‹ çš„ æ•°æ® å‘˜ è€Œ è¨€ ä¸¤ ç§ åˆå§‹ åŒ– æ–¹å¼ çš„ æ•ˆç‡ å‡ ä¹ æ²¡æœ‰ åŒºåˆ«</p>
 <figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">class</span> <span class="title class_">F</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">F</span>(<span class="type">int</span> x, <span class="type">int</span> y); / æ„é€  å‡½æ•°</span><br><span class="line">Private:</span><br><span class="line"><span class="type">int</span> m_x;</span><br><span class="line"><span class="type">int</span> m_y;</span><br><span class="line">&#125;</span><br><span class="line">CL) é‡‡ç”¨åˆå§‹ åŒ– åˆ—è¡¨ çš„ æ–¹å¼åˆå§‹</span><br><span class="line">F::<span class="built_in">F</span>(<span class="type">int</span> x, <span class="type">int</span> y) : <span class="built_in">m_x</span>(x), <span class="built_in">m_y</span>(y)</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line">(<span class="number">2</span>) é‡‡ç”¨ å‡½æ•° ä½“å†… èµ‹å€¼ çš„ æ–¹å¼åˆå§‹</span><br><span class="line">F::<span class="built_in">F</span>(<span class="type">int</span> x, <span class="type">int</span> y)</span><br><span class="line">&#123;</span><br><span class="line">m_x=x;</span><br><span class="line">my=y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆå§‹åŒ–é¡ºåºåº å¹¶ä¸ ä¸€ å®š ä¸ ä½ åœ¨ åˆå§‹ åŒ– åˆ—è¡¨ ä¸­ ä¸º å®ƒä»¬ å®‰æ’ çš„ é¡ºåº ä¸€ è‡´<br>
ç¼– è¯‘ å™¨ æ€» æ˜¯æŒ‰ç…§ å®ƒä»¬ åœ¨ ç±» ä¸­ <strong>å£°æ˜ çš„ æ¬¡åº</strong> æ¥ åˆå§‹ åŒ– çš„<br>
æ‰€ä»¥æœ€ å¥½ æ˜¯ æŒ‰ç…§ å®ƒä»¬ çš„ å£°æ˜ é¡ºåº ä¹¦å†™ å‘˜ åˆ å§‹ åŒ– åˆ—è¡¨</p>
<p>å¦‚ æœ å„ ä¸ª å‘˜ çš„ åˆå§‹ åŒ– å­˜åœ¨ä¾èµ– å…³ç³»<br>
è¦ æ³¨æ„ é¡ºåº é—®é¢˜<br>
å¯ ä»¥ è°ƒæ•´ ä¸‹ æ•°æ®å‘˜ çš„ <strong>å£°æ˜ é¡ºåº</strong> é¿å… è¿™ ä¸ª é—®é¢˜</p>
<p>æ„é€  å‡½æ•°é¦–å…ˆ è°ƒç”¨æ¯ ä¸€ ä¸ªåŸºç±» çš„ æ„é€  å‡½æ•°<br>
ç„¶ å è°ƒç”¨æˆ å‘˜ å¯¹ è±¡ çš„ æ„é€  å‡½æ•°<br>
è€Œ æ¯ ä¸€ åŸºç±» çš„æ„é€  å‡½æ•° åˆ å°† é¦–å…ˆ è°ƒç”¨ å®ƒä»¬ å„ è‡ª åŸºç±» çš„ æ„é€  å‡½æ•° ç›´ åˆ° æœ€ æ ¹ ã€‚</p>
<p>æ æ„ ä¼š ä¸¥æ ¼ æŒ‰ç…§ å¯¹ è±¡ æ„é€  ç›¸å çš„ æ¬¡ åº æ‰§è¡Œ è¯¥ æ¬¡ åº æ˜¯ å”¯ä¸€ çš„ å¦ åˆ™ ç¼–è¯‘ å™¨ å°† æ—  æ³• è‡ªåŠ¨ æ‰§è¡Œ æ æ„ è¿‡ ;</p>
<p>æ•°æ® å‘˜ çš„ åˆå§‹ åŒ– æ¬¡ åº å®Œå…¨ ä¸ å— å®ƒä»¬ åœ¨ åˆå§‹ åŒ– åˆ—è¡¨ ä¸­ å‡º ç° æ¬¡ åº çš„ å½±å“<br>
åªç”± å®ƒä»¬ åœ¨ ç±» ä¸­ å£°æ˜ çš„ æ¬¡ åº å†³ å®š å›  ä¸º è¿™ ä¸ª é¡ºåº æ˜¯ å”¯ä¸€ çš„</p>
<p>å¦‚ æœ æ•° æ® å‘˜ æŒ‰ç…§ åˆå§‹ åŒ– åˆ—è¡¨ çš„æ¬¡åº è¿› è¡Œ æ„é€  å°† å¯¼è‡´ æ æ„ å‡½æ•° æ— æ³•å¾—åˆ°å”¯ä¸€çš„é€†åºã€‚</p>
<p>æ‹·è´ æ„é€  å‡½æ•° çš„ å‚æ•° å¿…é¡» æ˜¯ åŒç±» å¯¹ è±¡ çš„ å¼•ç”¨ ï¼Œ è€Œ ä¸ èƒ½ æ˜¯ å¯¹ è±¡ å€¼</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line"> æ‹·è´æ„é€  å‡½æ•°</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">A</span>(A copy)&#123;...&#125; â€œ#Q)é™·å…¥ ä¸ åœ° åˆ† é… å †æ ˆ çš„ æ—  é™ é€’å½’</span><br><span class="line"><span class="built_in">A</span>(<span class="type">const</span> A&amp; other) &#123;...&#125; (<span class="number">2</span>)</span><br><span class="line">MN...</span><br><span class="line">ä¸Š</span><br><span class="line">Aa;</span><br><span class="line">Ab=a;</span><br></pre></td></tr></table></figure>
<p>ä¸ ä¸» åŠ¨ ç¼–å†™ æ‹·è´ æ„é€  å‡½æ•° å’Œ æ‹·è´ èµ‹å€¼ å‡½æ•° ç¼– è¯‘ å™¨<br>
å°† â€œ æŒ‰ å‘˜ æ‹·è´ â€çš„ æ–¹å¼ è‡ªåŠ¨ ç”Ÿæˆ ç›¸åº” çš„é»˜è®¤ å‡½æ•°<br>
å€˜ ç±» ä¸­ å«æœ‰ æŒ‡é’ˆ å‘˜ æˆ– å¼•ç”¨ æˆå‘˜ ï¼Œ é‚£ è¿™ ä¸¤ ä¸ªé»˜è®¤ çš„ å‡½æ•° å¯ èƒ½ éš å«é”™è¯¯</p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230602112452.png" alt></p>
<p>æ‹·è´ æ„é€  å‡½æ•° æ˜¯åœ¨å¯¹ è±¡ è¢« åˆ›å»º å¹¶ ç”¨ å¦ ä¸€ ä¸ª å·² ç» å­˜åœ¨ çš„ å¯¹ è±¡ æ¥ åˆå§‹ åŒ– å®ƒ æ—¶ è°ƒç”¨<br>
èµ‹å€¼å‡½æ•°åªèƒ½æŠŠä¸€ä¸ªå¯¹è±¡ èµ‹å€¼ ç»™ å¦ ä¸€ ä¸ª å·² ç» å­˜åœ¨ çš„ å¯¹ è±¡<br>
ä½¿ å¾— ç» å­˜åœ¨ çš„ å¯¹ è±¡ æœ‰ å’Œ æº å¯¹ è±¡ ç›¸åŒ çš„ çŠ¶æ€ ã€‚</p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230602112740.png" alt></p>
<p>åª éœ€ å°† æ‹·è´ æ„é€  å‡½æ•° å’Œ æ‹·è´ èµ‹å€¼ å‡½æ•° å£°æ˜ privateï¼Œ å¹¶ ä¸” ä¸ å®ç° å®ƒä»¬<br>
æ˜¾ å¼ å£°æ˜ çš„ è¿™ä¸¤ ä¸ªå‡½æ•° ä¼š é˜»æ­¢ ç¼–è¯‘ å™¨ è‡ªåŠ¨ ç”Ÿæˆ ç›¸åº” çš„ é»˜è®¤ å‡½æ•°</p>
<p>ç”šè‡³ å¯ ä»¥ æŠŠ ç±» çš„ æœ‰ æ„é€  å‡½æ•° å’Œ èµ‹å€¼å‡½æ•° éƒ½ å£°æ˜ ä¸º privateï¼Œ<br>
è¿™ æ · å°± å½»åº• é˜»æ­¢ äº†ç±» çš„ å®ä¾‹ åŒ–</p>
<p>æˆ– è€… æŠŠ é»˜è®¤ æ„é€  å‡½æ•° å£°æ˜ä¸º privateï¼Œ<br>
è€Œ æŠŠ å…¶ ä»– å¸¦ å‚ æ•° çš„ æ„é€  å‡½æ•°æ˜ publicï¼Œ<br>
è¿™ æ · å¼º ç”¨ æˆ· ä½¿ ç”¨ å¸¦ å‚æ•° çš„ æ„é€  å‡½æ•° æ¥ å£°æ˜ å’Œ å®šä¹‰ å¯¹è±¡</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">fe.</span><br><span class="line"><span class="function"><span class="type">const</span> <span class="type">char</span> * <span class="title">GetType</span><span class="params">()</span></span>; / æœª å®ç°</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="built_in">A</span>(<span class="type">const</span> A&amp; a); / ç§æœ‰ çš„ æ‹·è´ æ„é€  å‡½æ•°</span><br><span class="line">A&amp; <span class="keyword">operator</span>=(<span class="type">const</span> A&amp; a); / ç§æœ‰ çš„ æ‹·è´ èµ‹å€¼ å‡½æ•°</span><br><span class="line">is</span><br><span class="line">å¦‚ æœ æœ‰ äºº è¯•å›¾ ç¼–å†™ å¦‚ä¸‹ ç¨‹åº :</span><br><span class="line">A ba); UBF T AAA See DFE</span><br><span class="line">b=a; / è°ƒç”¨ äº† ç§æœ‰ çš„ èµ‹å€¼ å‡½æ•°</span><br></pre></td></tr></table></figure>
<p>æ´¾ç”Ÿ ç±» çš„ æ„é€ å‡½æ•° åº” åœ¨å…¶ åˆå§‹ åŒ– åˆ—è¡¨ é‡Œæ˜¾å¼ åœ° è°ƒç”¨ åŸº ç±» çš„ æ„é€  å‡½æ•°</p>
<p>å¦‚ æœ åŸº ç±» æ˜¯ å¤š æ€ ï¼Œ é‚£ ä¹ˆ å¿…é¡» æŠŠ åŸº ç±» çš„ æ æ„ å‡½æ•° å®šä¹‰ ä¸º è™š å‡½ æ•°<br>
è¿™ æ · å¯ä»¥ å…¶ ä»–è™š å‡½ æ•° ä¸€ å®ç° åŠ¨æ€ ç»‘ å®š å¦åˆ™ æœ‰å¯ èƒ½ é€ æˆ å†… å­˜ æ³„æ¼<br>
delete åŸºç±»æŒ‡é’ˆ ä¸ä¼šé‡Šæ”¾æ´¾ç”Ÿç±»</p>
<p>åŸºå…³ çš„ æ„é€ å‡½æ•° ã€ æ æ„ å‡½ æ•° èµ‹ä¿¡å‡½ æ•°éƒ½ ä¸ èƒ½è¢« æ´¾ç”Ÿ ç±» ç»§æ‰¿<br>
<img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230602114921.png" alt></p>
<h2 id="9-c-å‡½æ•°-é«˜çº§ç‰¹æ€§"><a class="header-anchor" href="#9-c-å‡½æ•°-é«˜çº§ç‰¹æ€§">ğŸŒ³</a>9. C++å‡½æ•° é«˜çº§ç‰¹æ€§</h2>
<h3 id="é‡è½½"><a class="header-anchor" href="#é‡è½½">ğŸŒ³</a>é‡è½½</h3>
<p>ç¼–è¯‘ å™¨ æ ¹æ® å‚æ•°åˆ—è¡¨ ä¸º ä¸ª é‡ è½½ å‡½ æ•° äº§ç”Ÿ ä¸ åŒçš„ å†… éƒ¨ æ ‡è¯† ç¬¦</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> _cdeci <span class="title">foo</span><span class="params">(intx, inty)</span></span>;</span><br></pre></td></tr></table></figure>
<p>è¯¥ å‡½æ•° è¢« C ç¼–è¯‘ å™¨ ç¼–è¯‘ å åœ¨ åº“ ä¸­ çš„ å å­— ä¸º fooï¼Œ<br>
è€Œ C++ ç¼–è¯‘ å™¨ åˆ™ ä¼š äº§ç”Ÿ åƒ | <code>_foo_int_int</code> ä¹‹ ç±» çš„ å†… éƒ¨ å å­— ç”¨ æ¥ æ”¯æŒ å‡½æ•° é‡ è½½<br>
ç”± äº ç¼–è¯‘ å çš„ å å­— ä¸ åŒ ï¼ŒC++ ç¨‹ åº | ä¸èƒ½ ç›´æ¥ è°ƒç”¨ ç¼–è¯‘ å C å‡½æ•° ã€‚<br>
C++ æ ä¾› äº† ä¸€ C è¿æ¥äº¤æ¢ æŒ‡ç¤º ç¬¦ extern â€œCâ€ æ¥ è§£å†³ è¿™ ä¸ª é—®é¢˜</p>
<p>è¿™å°± æ˜¯è¿æ¥ è§„èŒƒ çš„ æ¦‚å¿µ</p>
<p>ä¸Š è¿°ä»£ç  æ˜¯ åœ¨ å‘Šè¯‰ C++ ç¼–è¯‘ å™¨ å‡½ foo æ˜¯ C è¿æ¥<br>
å‡½æ•° åº” è¯¥ ä¸º ç”Ÿæˆ å å­— <code>_foo</code> è€Œ ä¸ <code>_foo_int_int</code>ï¼Œ<br>
å¹¶ æŒ‡ç¤ºè¿æ¥ å™¨ åˆ° C ç¨‹åº åº“ ä¸­ å» æ‰¾è¯¥å‡½æ•° çš„ å®šä¹‰</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">output</span><span class="params">( intx )</span></span>; / å‡½æ•° å£°æ˜</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">output</span><span class="params">( <span class="type">float</span> x )</span></span>; / å‡½æ•° å£°æ˜</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">output</span><span class="params">( <span class="type">int</span> x )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt;<span class="string">&quot; output int &quot;</span>&lt;&lt; x &lt;&lt; endl ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">output</span><span class="params">( <span class="type">float</span> x )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt;<span class="string">&quot; output float &quot;</span> &lt;&lt; x &lt;&lt; endl ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> x=<span class="number">1</span>;</span><br><span class="line"><span class="type">float</span> y = <span class="number">1.0</span>;</span><br><span class="line"><span class="built_in">output</span>(x); <span class="comment">// output int1</span></span><br><span class="line"><span class="built_in">output</span>(y); <span class="comment">// output float 1</span></span><br><span class="line"><span class="built_in">output</span>(<span class="number">1</span>); <span class="comment">// output int 1</span></span><br><span class="line"><span class="built_in">output</span>(<span class="number">0.5</span>); / é”™è¯¯ ! ä¸ æ˜ç¡® çš„ è°ƒç”¨ ï¼Œ å›  ä¸º è‡ªåŠ¨ ç±» å‹ è½¬æ¢</span><br><span class="line"><span class="built_in">output</span>(<span class="built_in">int</span>(<span class="number">0.5</span>)); <span class="comment">// output int 0</span></span><br><span class="line"><span class="built_in">output</span>(<span class="built_in">float</span>(<span class="number">0.5</span>)); /f output <span class="type">float</span> <span class="number">0.5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æˆå‘˜å‡½æ•°çš„é‡è½½-è¦†ç›–ä¸éšè—"><a class="header-anchor" href="#æˆå‘˜å‡½æ•°çš„é‡è½½-è¦†ç›–ä¸éšè—">ğŸŒ³</a>æˆå‘˜å‡½æ•°çš„é‡è½½ è¦†ç›–ä¸éšè—</h3>
<p>æˆ å‘˜ å‡½ æ•°è¢«<strong>é‡è½½</strong> çš„ ç‰¹å¾ ï¼š<br>
å…· æœ‰ ç›¸åŒ ä½œç”¨åŸŸ ã€ˆ å³ åŒä¸€ ä¸ª ç±» å®šä¹‰ );<br>
å‡½æ•°åå­—ç›¸åŒ<br>
å‚æ•° ç±» å‹ é¡ºåº æˆ–æ•°ç›® ä¸ åŒã€ˆ åŒ… const å‚æ•° å’Œ é const å‚æ•° );<br>
virtual å…³é”®å­— å¯æœ‰å¯æ— </p>
<p><strong>å±¥ ç›–</strong> æ˜¯ æŒ‡æ´¾ ç”Ÿ ç±» é‡æ–° å®ç° ã€ˆ æˆ– è€… æ”¹å†™ äº† åŸº ç±» çš„ å‘˜ å‡½ æ•° å…¶ ç‰¹å¾ :<br>
ä¸ åŒ çš„ä½œç”¨åŸŸ ã€ˆ åˆ† åˆ« äºæ´¾ç”Ÿ ç±» å’Œ åŸº ç±» ä¸­ );<br>
å‡½æ•°åç§°ç›¸åŒ<br>
å‚ æ•°åˆ— è¡¨å®Œ å…¨ ç›¸åŒ ;<br>
åŸº ç±» å‡½æ•° å¿…é¡» æ˜¯ è™š å‡½ æ•° <strong>åªèƒ½è¦†ç›– åŒååŒå‚ è™šå‡½æ•°</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream.h&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(<span class="type">int</span> x)</span></span>&#123; cout &lt;&lt; <span class="string">&quot;Base::f(int) &quot;</span>&lt;&lt; x &lt;&lt; endl; &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(<span class="type">float</span> x)</span></span>&#123; cout &lt;&lt; <span class="string">&quot;Base::f(float) &quot;</span>&lt;&lt; x &lt;&lt; endl; &#125;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">g</span><span class="params">(<span class="type">void</span>)</span></span>&#123; cout &lt;&lt; <span class="string">&quot;Base::g(void)&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">b</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">g</span><span class="params">(<span class="type">void</span>)</span></span>&#123; cout &lt;&lt; â€œDerived::<span class="built_in">g</span>(<span class="type">void</span>)<span class="string">&quot; &lt;&lt; endl; &#125;</span></span><br><span class="line"><span class="string">ä¸Š</span></span><br><span class="line"><span class="string">void main(void)</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">Derived d;</span></span><br><span class="line"><span class="string">Base *pb = &amp;d;</span></span><br><span class="line"><span class="string">| pbâ€”&gt;f(42); // Base::f(int) 42</span></span><br><span class="line"><span class="string">pb ä¸€ &gt;f3.140; â€”â€”_â€˜// Base::f(float) 3.14</span></span><br><span class="line"><span class="string">pb ä¸€ &gt;gO; / Derived::g(void)</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<p>å‡½æ•° Base::fint) Base::f(float)æ„æˆé‡è½½<br>
Base::g(void) è¢« Derived::g(void) è¦†ç›–</p>
<p>è™š å‡½ æ•° çš„ è¦†ç›– æœ‰ ä¸¤ ç§ æ–¹å¼ : å®Œå…¨ é‡ å’Œ æ‰©å±• ã€‚<br>
æ‰©å±• æ˜¯ æŒ‡æ´¾ ç”Ÿ ç±» è¯¬ æ•° é¦–å…ˆ è°ƒç”¨ åŸº ç±»çš„ è™š å‡½ æ•° ç„¶ å å† å¢åŠ  æ–° çš„ åŠŸèƒ½ ã€‚</p>
<p>â€œéšè— â€æ˜¯ æŒ‡æ´¾ ç”Ÿ ç±» çš„ å‘˜ å‡½ æ•° é® äº† ä¸ å…¶ åŒå çš„ åŸº ç±» æˆ å‘˜ å‡½ æ•°ï¼š</p>
<ol>
<li>æ´¾ ç”Ÿ ç±» çš„ å‡½æ•° åŸºç±» çš„ å‡½æ•° åŒå ï¼Œ ä½† æ˜¯ <strong>å‚æ•° åˆ—è¡¨ æœ‰æ‰€ å·®å¼‚</strong><br>
ä¸è½® æœ‰æ—  virtual å…³é”® ï¼Œ åŸº ç±» çš„ å‡½æ•° åœ¨ æ´¾ç”Ÿ ç±» ä¸­ å°† éšè—</li>
<li>æ´¾ç”Ÿç±»çš„å‡½æ•°ä¸åŸºç±»çš„å‡½æ•°åŒåï¼Œ<strong>å‚ æ•°åˆ—è¡¨ä¹Ÿç›¸åŒ</strong> ä½† åŸºç±»å‡½æ•° æ²¡æœ‰virtual å…³é”®å­—ã€‚<br>
æ­¤ æ—¶ , åŸºç±»çš„å‡½æ•°åœ¨æ´¾ç”Ÿç±»ä¸­å°†éšè— (æ³¨æ„ åˆ« ä¸ è¦†ç›– æ··æ·† )ã€‚</li>
</ol>
<p>è§£é‡Šï¼š<br>
å¯¹äºç¬¬ä¸€ç‚¹ åŒåä¸åŒå‚ åŒä½œç”¨åŸŸä¸ºé‡è½½ ä¸åŒä½œç”¨åŸŸä¸ºéšè—<br>
å¯¹äºç¬¬äºŒç‚¹ åŒååŒå‚ æ˜¯è™šå‡½æ•° åˆ™è¦†ç›– ä¸æ˜¯è™šå‡½æ•°åˆ™éšè—</p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230602133459.png" alt></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(<span class="type">int</span> x)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(<span class="type">char</span> *str)</span></span>;</span><br><span class="line">ä¸Š</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Test</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Derived *pd = <span class="keyword">new</span> Derived;</span><br><span class="line">pdâ€”&gt;<span class="built_in">f</span>(<span class="number">10</span>);â€”_<span class="comment">// error!</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(<span class="type">char</span> *str)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123; Base::<span class="built_in">f</span>(x); &#125; / è°ƒç”¨ä¼ é€’</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>void Foo(int x = 0, int y = 0); / æ­£ç¡® é»˜ è®¤å€¼ å‡ºç°åœ¨ å‡½æ•° çš„ å£°æ˜ ä¸­<br>
å¦‚ æœ å‡½ æœ‰ å¤š ä¸ª å‚æ•° å‚ æ•° åª èƒ½ ä» å å‘ å‰ ä¾æ¬¡ é»˜è®¤</p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230602134849.png" alt></p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230602135659.png" alt></p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230602135956.png" alt></p>
<p>C++ æ ‡å‡† è§„å®š å½“ ä¸º ä¸€ ç±» å‹ é‡ â€œ++â€/â€œâ€“â€ çš„ å‰ ç½® æœ¬ æ—¶ ä¸éœ€è¦ å‚æ•°<br>
å½“ ä¸º ä¸€ ä¸ª ç±» å‹ é‡ â€œ++â€/â€œâ€“â€ çš„ å ç½® æœ¬ æ—¶ ï¼Œ éœ€ è¦ ä¸€ int ç±» å‹ çš„ å‚æ•° ä½œä¸ºæ ‡å¿— ã€ˆ å³ å“‘ å…ƒ é å…·å å‚æ•°</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Integer</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Integer</span>(<span class="type">long</span> data) : <span class="built_in">m_data</span>(data)&#123; &#125;</span><br><span class="line">Integer&amp; <span class="keyword">operator</span>++() &#123; /W å‰ ç½® ç‰ˆ : è¿”å› å¼•ç”¨</span><br><span class="line">cout&lt;&lt; â€œInteger::<span class="keyword">operator</span>++() called!â€ &lt;&lt; end];</span><br><span class="line">m_datat++ ;</span><br><span class="line"><span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line">Integer <span class="keyword">operator</span>++(<span class="type">int</span>) &#123; <span class="comment">// å ç½® ç‰ˆ : è¿”å› å¯¹ è±¡ çš„</span></span><br><span class="line">cout&lt;&lt; <span class="string">&quot;Integer::operator++(int) called!&quot;</span> &lt;&lt; end];</span><br><span class="line">Integer temp = *<span class="keyword">this</span> ;</span><br><span class="line">m_data++ ; <span class="comment">// BR: ++(*this) ;</span></span><br><span class="line"><span class="keyword">return</span> temp; / è¿”å› <span class="keyword">this</span> å¯¹ è±¡ çš„ æ—§ å€¼</span><br><span class="line">&#125;</span><br><span class="line">/ å…¶ ä»– æˆ å‘˜</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">long</span> m_data; / å¯¹ <span class="type">long</span> çš„ å°è£…</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Integer x = <span class="number">1</span>; <span class="comment">// call Integer(long)</span></span><br><span class="line"><span class="number">+4</span>x ; <span class="comment">// call operator++Q)</span></span><br><span class="line">xtt+ <span class="number">3</span> <span class="comment">// call operator++(int)</span></span><br><span class="line">&#125;</span><br><span class="line">è¾“å‡º ç»“æœ :</span><br><span class="line">Integer::<span class="keyword">operator</span>++() called!</span><br><span class="line">Integer::operatort++(<span class="type">int</span>) called!</span><br></pre></td></tr></table></figure>
<h3 id="å†…è”"><a class="header-anchor" href="#å†…è”">ğŸŒ³</a>å†…è”</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Foo</span><span class="params">(intx, <span class="type">int</span> y)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Foo</span><span class="params">(intx, <span class="type">int</span> y)</span> <span class="comment">// inline ä¸ å‡½æ•° å®šä¹‰ ä½“ æ”¾ åœ¨ ä¸€</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">å®šä¹‰ åœ¨ç±» å£°æ˜ ä¹‹ ä¸­ çš„ å‘˜ å‡½ æ•° å°† è‡ªåŠ¨åœ° æˆ å†… è” å‡½æ•°</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Foo</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123; ... &#125; / è‡ªåŠ¨ åœ° æˆ å†… è” å‡½æ•°</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç±»å‹è½¬æ¢å‡½æ•°"><a class="header-anchor" href="#ç±»å‹è½¬æ¢å‡½æ•°">ğŸŒ³</a>ç±»å‹è½¬æ¢å‡½æ•°</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyString</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">MyString</span>(<span class="type">size_t</span> size, <span class="type">char</span> c =</span><br><span class="line">fhe.</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">char</span> *m_data;</span><br><span class="line">Point pl = <span class="number">10.5</span>;</span><br><span class="line">pi = <span class="number">20.5</span>;</span><br><span class="line">\<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyString strName = <span class="number">20</span>;</span><br><span class="line">strName = <span class="number">40</span>; / è«å å…¶å¦™ </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(MyString str)</span></span>;</span><br><span class="line"><span class="built_in">f</span>(<span class="number">100</span>);</span><br><span class="line">å¦‚æœ å½“ å‰ç¨‹åº ä¸­ æ²¡æœ‰ å…¶ ä»– é‡ è½½ æ• å‡½æ•°ï¼Œ ç¼–è¯‘ å™¨ å°± å°† å®ƒæš— ä¸­ è½¬æ¢ :</span><br><span class="line"><span class="built_in">f</span>(<span class="built_in">MyString</span>(<span class="number">100</span>));</span><br></pre></td></tr></table></figure>
<p>å½“ä½ çš„ç±»å®šä¹‰ä¸­å‡ºç°ç±»ä¼¼çš„æƒ…å†µæ—¶ï¼Œå¯ä»¥åœ¨æ„é€ å‡½æ•°å‰é¢æ·»åŠ å…³é”®å­— explicit<br>
å°†å…¶ å£°æ˜ ä¸º æ˜¾ å¼ çš„ æ„ ä¸ºè¦ æ±‚ ç”¨ æˆ· å¿…é¡» æ˜¾ å¼ åœ° è°ƒç”¨ è¯¥ æ„é€  å‡½æ•° æ¥ åˆå§‹ å¯¹ è±¡<br>
ä»¥ æ˜ç¡® è¡¨æ˜ ä»– çš„ æ„å›¾</p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230602141650.png" alt></p>
<ol>
<li>
<p><code>static_cast&lt;desttype&gt;(src_obj)</code>ï¼Œ ä½œ ç”¨ ç›¸å½“ äº C é£æ ¼ çš„å¼ºåˆ¶ è½¬æ¢ ,<br>
ä½† æ˜¯ åœ¨ å¤š é‡ç»§æ‰¿ çš„æƒ…å†µ ï¼Œ å®ƒ ä¼š æ­£ç¡® åœ° è°ƒæ•´ æŒ‡é’ˆ çš„ å€¼<br>
è€Œ C é£æ ¼ çš„å¼ºåˆ¶ è½¬æ¢ åˆ™ ä¸ ä¼šè°ƒæ•´<br>
å®ƒ å¯ ä»¥ éå†ç»§æ‰¿ æ ‘ æ¥ ç¡®å®š src_obj ä¸ dest_type çš„ å…³ç³» ,<br>
ä½† æ˜¯ åª åœ¨ ç¼–è¯‘ æ—¶è¿›è¡Œ ã€ˆ æ­¤ æ‰€ è°“ é™ )ï¼Œ<br>
å¦‚ æœä½¿ ç”¨ å®ƒ æ¥ downcast æ“ä½œ ï¼Œ åˆ™ ä¼š å­˜åœ¨ éšæ‚£ ã€‚</p>
</li>
<li>
<p><code>const_cast&lt;dest_type&gt;(src_obj)</code>ï¼Œ ç”¨ äºå»é™¤ ä¸€ ä¸ªå¯¹ è±¡ const/volatile å±æ€§</p>
</li>
<li>
<p><code>reinterpret_cast&lt;desttype&gt;(src_obj)</code>, æˆ‘ ä»¬ å¯ ä»¥å€ŸåŠ© å®ƒ æŠŠ ä¸€ ä¸ª æ•´æ•° è½¬æ¢ æˆ ä¸€åœ° å€ æˆ– è€… åœ¨ä»»ä½• ä¸¤ ç§ ç±» å‹ çš„ æŒ‡é’ˆ ä¹‹é—» è½¬ ã€‚ ä½¿ ç”¨ è¯¥ è¿ç®— ç¬¦ çš„ ç»“æœ å¾ˆ å±é™© ï¼Œè¯·ä½  è¦ è½»æ˜“ä½¿</p>
</li>
<li>
<p><code>dynamic_cast&lt;dest_type&gt;(src_obj)</code>ï¼Œ åœ¨ è¿è¡Œ æ—¶ å°å† ç»§æ‰¿ ã€ˆ ç±» å±‚æ¬¡ ç»“æ„ ) æ¥ç¡®å®š src_obj ä¸ desttype çš„ å…³ç³»</p>
</li>
</ol>
<p>åœ¨ C++ ç¨‹åº ä¸­ å°½é‡ ä¸ è¦ å† ä½¿ C é£æ ¼ çš„ ç±» å‹ è½¬æ¢<br>
é™¤ é æº å¯¹ å’Œ ç›®æ ‡ ç±»å‹ éƒ½ <strong>åŸºæœ¬ ç±» å‹</strong> çš„å¯¹ è±¡ æŒ‡é’ˆ ï¼Œ å¦ åˆ™ å¾ˆ ä¸ å®‰å…¨ ã€‚<br>
C++ çš„ ç±» å‹ è½¬æ¢ è¿ç®— ç¬¦åœ¨ éœ€è¦ çš„ æ—¶ å€™ ä¼š è¿›è¡Œ<strong>æŒ‡é’ˆ è°ƒæ•´</strong> å›  æ­¤ ç»“æœ æ¯”è¾ƒ å®‰å…¨ ã€‚</p>
<h3 id="constæˆå‘˜å‡½æ•°"><a class="header-anchor" href="#constæˆå‘˜å‡½æ•°">ğŸŒ³</a>constæˆå‘˜å‡½æ•°</h3>
<p>ä»»ä½• ä¸ ä¼šä¿®æ”¹ æ•°æ® å‘˜ çš„ å‘˜ å‡½ æ•° éƒ½åº” è¯¥ å£°æ˜ ä¸º const ç±»</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Stack</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Push</span><span class="params">(<span class="type">int</span> elem)</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Pop</span><span class="params">(<span class="type">void</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">GetCount</span><span class="params">(<span class="type">void</span>)</span> <span class="type">const</span></span>; <span class="comment">// const A AB</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_num;</span><br><span class="line"><span class="type">int</span> m_data[ <span class="number">100</span>&#125;;</span><br><span class="line"><span class="function">I</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Stack::GetCount</span><span class="params">(<span class="type">void</span>)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">t</span></span><br><span class="line"><span class="function">++m_num</span>; / ç¼–è¯‘ é”™è¯¯ ä¼ å›¾ä¿®æ”¹ æ•°æ® æˆ <span class="function">m_num</span></span><br><span class="line"><span class="function"><span class="title">Pop</span><span class="params">()</span></span>; / ç¼–è¯‘ é”™è¯¯ ä¼ å›¾ è°ƒç”¨é <span class="type">const</span> æˆ å‘˜ å‡½</span><br><span class="line"><span class="keyword">return</span> m_num;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Static KA BRA RANA const çš„ è¿™ æ˜¯ å› ä¸º static æˆ å‘˜ å‡½ æ•° åª æ˜¯ å…¨ å±€ å‡½ æ•° çš„ ä¸€ ä¸ª å½¢å¼ ä¸Š çš„ å°è£… è€Œ å…¨ å±€ å‡½æ•° ä¸ å­˜åœ¨ const ä¸€ ; ä½•å†µ static æˆ å‘˜ å‡½æ•° ä¸ èƒ½ è®¿é—® ç±» çš„ é é™æ€ æˆ (æ²¡æœ‰ this æŒ‡é’ˆ )ï¼Œ ä¿® æ”¹ é é™æ€ æ•°æ® å‘˜ åˆ ä» ä½•è¯´ èµ· ?</p>
<h2 id="10-c-å¼‚å¸¸å¤„ç†-å’Œ-rtti"><a class="header-anchor" href="#10-c-å¼‚å¸¸å¤„ç†-å’Œ-rtti">ğŸŒ³</a>10. C++å¼‚å¸¸å¤„ç† å’Œ RTTI</h2>
<p>ä½• ä¸€ ç§ ç±» å‹ å¯ ä»¥ å½“åš å¼‚å¸¸ ç±» å‹ å›  æ­¤ ä»»ä½• ä¸ª å¯¹ è±¡ å¯ ä»¥ å½“åšå¼‚å¸¸ å¯¹ ï¼Œ<br>
åŒ…æ‹¬ åŸºæœ¬ æ•°æ® ç±» å‹ çš„ å˜é‡ å¸¸é‡ã€ ä»»ä½• ç±» å‹ çš„ æŒ‡é’ˆ ã€ å¼• ç”¨ ã€ ç»“ æ„ ç­‰ ç”š è‡³ ç©º ç»“æ„ç±» çš„ å¯¹è±¡<br>
è¿™ æ˜¯ å› ä¸º å¼‚å¸¸ ä»…ä»…é€šè¿‡ ç±» å‹ è€Œä¸æ˜¯ é€šè¿‡ å€¼ æ¥ åŒ¹é… çš„ å¦ åˆ™ å°± åˆ é€€å› åˆ°<br>
äº† ä¼ ç»Ÿ çš„ é”™è¯¯ å¤„ ç† æŠ€æœ¯ ä¸Š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">(<span class="type">int</span> index)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">double</span> x = <span class="number">100</span>, y = <span class="number">20.5</span>;</span><br><span class="line"><span class="type">int</span> x[<span class="number">20</span>] = &#123; <span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="built_in">Devide</span>(x, y) &lt;&lt; endl; / å¯ èƒ½ æŠ› å‡º å¼‚å¸¸ <span class="function">DevidedByZero</span></span><br><span class="line"><span class="function"><span class="title">if</span><span class="params">(index &gt;= <span class="number">20</span>)</span> <span class="keyword">throw</span> <span class="title">OverFlow</span><span class="params">()</span></span>; <span class="number">1</span>) iE EGLF <span class="number">4</span> <span class="function">Bil <span class="keyword">try</span> RA</span></span><br><span class="line"><span class="function"><span class="title">if</span><span class="params">(index &lt; <span class="number">0</span>)</span> <span class="keyword">throw</span> <span class="title">UnderFlow</span><span class="params">()</span></span>; / æŠ› å‡º ç‚¹ ä½ äº å½“å‰ <span class="keyword">try</span> å— å†…</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span>(<span class="type">const</span> DevidedByZero&amp; ex) &#123;</span><br><span class="line">cerr &lt;&lt; ex.<span class="built_in">description</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span>(<span class="type">const</span> OverFlow&amp;) &#123; / çœ ç•¥ å‚æ•° å ç§°</span><br><span class="line">cerr &lt;&lt; <span class="string">&quot;Overflow occurred!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span>(<span class="type">const</span> UnderFlow&amp;) &#123;</span><br><span class="line">cerr &lt;&lt; <span class="string">&quot;Underflow occurred!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span>(...) &#123; / æ•è· ä»–æ‰€ æœ‰ å¯ èƒ½ çš„ å¼‚å¸¸</span><br><span class="line">cerr &lt;&lt; <span class="string">&quot;Unexpected exception occurred!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç”± äº å¼‚å¸¸ å¤„ç† æœº åˆ¶ é‡‡ç”¨ ç±» å‹ åŒ¹é… è€Œ ä¸ æ˜¯ å€¼ åˆ¤ æ–­ å›  æ­¤ catch å— å‚æ•°<br>
å¯ ä»¥ æ²¡æœ‰ å‚æ•° å ç§° åª éœ€è¦ å‚æ•° ç±» å‹ é™¤ é ç¡®å® è¦ ä½¿ ç”¨ é‚£ä¸ª å¼‚å¸¸ å¯¹</p>
<p>è™½ç„¶ å¼‚å¸¸ å¯¹ è±¡ ä¸Š å» å±€ éƒ¨ å¯¹ è±¡ ä½† æ˜¯ å¹¶ é åˆ›å»º åœ¨ å‡½æ•° å †æ ˆ ä¸Š ï¼Œ<br>
è€Œ æ˜¯åˆ›å»º åœ¨ ä¸“ç”¨ çš„ <strong>å¼‚å¸¸ å †æ ˆ</strong> ä¸Š ï¼Œ å›  æ­¤ å®ƒ æ‰ å¯ ä»¥ è·¨æ¥ å¤š ä¸ª å‡½æ•° è€Œ ä¼ é€’ ä¸Š å±‚ ï¼Œ<br>
å¦åˆ™ åœ¨ å †æ ˆ æ¸… é€€ çš„ è¿‡ ç¨‹ ä¸­ å°± ä¼š é”€æ¯ .<br>
<strong>ä¸ è¦</strong> ä¼å›¾ æŠŠ <strong>å±€ éƒ¨ å¯¹ è±¡ åœ° å€</strong> ä½œä¸ºå¼‚å¸¸ å¯¹ è±¡ <strong>æŠ› å‡º</strong><br>
å›  ä¸º å±€ éƒ¨ å¯¹ è±¡ ä¼š èœ¡ å¸¸ å‡º å å‡½æ•° å †æ ˆ æ¸… é€€ çš„ è¿‡ ç¨‹ ä¸­é”€æ¯</p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230602161511.png" alt></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">double</span> <span class="title">Devide</span><span class="params">(<span class="type">double</span> x, <span class="type">double</span> y)</span> <span class="title">throw</span><span class="params">(DevidedByZero)</span></span>;  <span class="comment">// åª å¯ èƒ½ å‡º ä¸€ç§ å¼‚å¸¸</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">func</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *)</span> <span class="title">throw</span><span class="params">(T1, T2,T3)</span></span>; <span class="comment">// å¯ èƒ½ æŠ› 3 ç§ å¼‚å¸¸</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">g</span><span class="params">()</span> <span class="title">throw</span><span class="params">()</span></span>; <span class="comment">// (3) ä¸æŠ›å‡ºä»»ä½•å¼‚å¸¸</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">k</span><span class="params">()</span></span>;  <span class="comment">// å¯ èƒ½ å‡º ä»»ä½• å¼‚å¸¸ ä¹Ÿ å¯èƒ½ ä¸ å‡º ä»»ä½•å¼‚å¸¸</span></span><br></pre></td></tr></table></figure>
<p>æ‰€ æœ‰ä»try åˆ° throw è¯­å¥ ä¹‹é—´ æ„é€  èµ· æ¥ çš„ å±€ éƒ¨å¯¹ è±¡ çš„æ æ„ å‡½æ•°å°†è¢« è‡ªåŠ¨ è°ƒç”¨<br>
(ä»¥ ä¸æ„é€ ç›¸ å çš„ é¡ºåº )ï¼Œ ç„¶ å æ¸… é€€ å †æ ˆ (å°±åƒ å‡½ æ•° æ­£ é€€å‡º é‚£æ · )ã€‚</p>
<p>å¦‚ æœ ä¸€ ä¸ª å‡½æ•° åœ¨ è¿è¡Œ æ—¶ æŠ› äº† å¼‚å¸¸<br>
äº æ˜¯ å¼‚å¸¸ å¤„ ç† æœºåˆ¶ è°ƒç”¨ å±€ éƒ¨ å¯¹ è±¡ ææ„ å‡½æ•° ã€ˆ æ¸…é€€ æ‰’ )ï¼Œ<br>
è€Œå¦‚ æœ æ­¤ æ—¶ æŸ ä¸€ æ æ„ å‡½ æ•° æ° ä¹Ÿ è¦ æŠ› å‡ºä¸€ ä¸ª å¼‚å¸¸ é‚£ è¿™ä¸ª å¼‚å¸¸ ç”± è° å¤„ ç† ?<br>
æ²¡æœ‰ åŠ æ³• å¼‚ å¸¸ å¤„ ç† æœº åˆ¶ åª å¥½ è°ƒç”¨;terminate0ã€‚</p>
<p>å¦‚ æœ ä½  çœŸ çš„ ä¸ å¾— ä¸ ä» æ æ„ å‡½æ•° å†… æŠ› å‡º å¼‚å¸¸ çš„ è¯ ä½ åº” è¯¥<br>
é¦–å…ˆ æ£€æŸ¥ä¸€ ä¸‹ çœ‹ å½“å‰ æ˜¯ æœ‰ ä¸€ ä¸ª æœª æ•è· çš„ å¼‚å¸¸ è¦ è¢« å¤„ ç† å¦‚ æœ æ²¡æœ‰ ï¼Œ<br>
è¯´ æ˜ è¯¥ æ æ„ å‡½æ•° çš„ç”¨ å¹¶ é ç”± ä¸€ å¤– éƒ¨ å¼‚å¸¸ å¼•èµ· è€Œ æ˜¯ æ­£å¸¸ çš„ é”€æ¯<br>
äºæ˜¯ ä½  å¯ ä»¥ å‡º ä¸€ ä¸ª å¼‚å¸¸ ä¸Š å±‚:ç¨‹åº æ¥ æ•è·</p>
<p>ä¸€ äº› ç¼–è¯‘ å™¨å¯ ä»¥ è®¾ å¼‚ å¸¸ å¤„ ç† æ”¯æŒ å¼€å…³ ï¼Œ å½“ å…³é—­ å¼‚å¸¸ ç† æ”¯æŒ å é™„åŠ  çš„ æ•°æ® ç»“æ„ æŸ¥ æ‰¾è¡¨ ã€ é¢ å¤– çš„ ä»£ç  éƒ½ ä¸ ç”Ÿæˆ</p>
<p>è¦ åˆç† å®‰æ’ å¼‚å¸¸ å¤„ ç† çš„ å±‚æ¬¡ : ä¸€ è¦ æŠŠ æ´¾ç”Ÿ ç±» çš„ å¼‚å¸¸ .<br>
è· æ”¾ åœ¨ åŸº ç±» å¼‚å¸¸ æ•è· çš„ å‰ é¢ å¦ åˆ™æ´¾ç”Ÿ ç±» å¼‚å¸¸ åŒ¹é… æ°¸è¿œ ä¹Ÿ ä¸ ä¼šæ‰§è¡Œåˆ°</p>
<p>å¦‚ æœå® åœ¨ æ—  æ³•åˆ¤æ–­ åˆ° åº• æœ‰ä»€ä¹ˆ å¼‚å¸¸ æŠ› å‡º é‚£ å°± ä½¿ â€œä¸€ æ‰“ å°½â€çš„ ç­–<br>
ç•¥ äº† : catch(void*) å’Œ catch(â€¦)ã€‚ ä½† è¦ è®° ä½ catch(void*) å’Œ catch(â€¦)<br>
å¿…é¡» æ”¾ åœ¨ å¼‚å¸¸ ç»„ åˆ çš„ æœ€ å é¢ å¹¶ ä¸” cateh(void*) æ”¾ åœ¨ catch(â€¦) çš„ å‰</p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230602165212.png" alt></p>
<p>ä¸º äº† æ”¯æŒ dynamic_cast&lt;&gt; è¿ ç®— ç¬¦ ï¼ŒRTTI æœº åˆ¶ å¿…é¡» ç»´ æŠ¤ ä¸€ æ£µ ç»§æ‰¿ ï¼Œ<br>
å³ base class table æ¨¡å‹ ( æˆ– ç±» ä¼¼ çš„ ç´¢å¼• è¡¨æ ¼ )</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">DeviceControllor::ControlThem</span><span class="params">(HomeElectricDevice&amp; device)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">Command cmd = <span class="built_in">GetCommand</span>();</span><br><span class="line"><span class="keyword">switch</span>(cmd)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> OPEN:</span><br><span class="line"><span class="keyword">case</span> PLAY VCD:</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Television tv = <span class="built_in">dynamic_cast</span>&lt;Television &amp;&gt;(device);</span><br><span class="line">tv.PlayVCDQ; <span class="comment">// PRCERESE ADEE Television WRAEAIE BCH!</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span>(std::bad_cast&amp;) &#123;</span><br><span class="line"><span class="built_in">MsgBox</span>(<span class="string">&quot;This device cannot play VCD!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>
<h2 id="11-16ç« -å†…å­˜ç®¡ç†"><a class="header-anchor" href="#11-16ç« -å†…å­˜ç®¡ç†">ğŸŒ³</a>11. 16ç«  å†…å­˜ç®¡ç†</h2>
<p>é‡ æŒ‡ é’ˆ<br>
free å®Œ deleteå®Œ ç½®NULL</p>
<p>å¯¹ äº å†… éƒ¨ æ•°æ® ç±» (å¦‚ ADT/UDT) çš„ å¯¹ è±¡ è€Œ è¨€ å…‰ ç”¨ mallocO/free0 æ—  æ³• æ»¡è¶³ åŠ¨æ€ å¯¹ è±¡ çš„ è¦ æ±‚<br>
å¯¹è±¡ åœ¨ åˆ›å»º çš„ åŒæ—¶ è¦ <strong>è‡ªåŠ¨ è°ƒç”¨ æ„é€  å‡½æ•°</strong> å¯¹è±¡åœ¨ é”€æ¯ çš„ æ—¶ å€™è¦ <strong>è‡ªåŠ¨ è°ƒç”¨ æ æ„ å‡½æ•°</strong><br>
ç”± mallocO/free0 æ˜¯ åº“ å‡½ æ•°è€Œ ä¸ æ˜¯ è¿ç®— ç¬¦ ä¸ åœ¨ ç¼–è¯‘ å™¨ æ§åˆ¶ æƒé™<br>
ä¸ èƒ½ æŠŠè°ƒç”¨ æ„é€ å‡½æ•° å’Œ æ æ„ å‡½æ•° çš„ä»»åŠ¡å¼ºåŠ  ç»™ å®ƒä»¬ ã€‚<br>
å›  æ­¤ C++ è¯­è¨€ éœ€è¦ ä¸€èƒ½ å®Œæˆ åŠ¨æ€ å†… å­˜ åˆ† å’Œ åˆå§‹ åŒ– å·¥ä½œ çš„è¿ç®— new,<br>
ä»¥ åŠä¸€ ä¸ª èƒ½ å¤Ÿ å®Œæˆæ¸… ç†ä¸ é‡Šæ”¾ å†…å­˜å·¥ä½œ çš„è¿ç®—ç¬¦ deleteã€‚</p>
<p>plain newã€nothrow new åŠ placement new.</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> çš„ ä½¿ ç”¨ æ–¹ æ³• è§ ç¤º ä¾‹ <span class="number">16</span><span class="number">-10</span>ã€‚</span><br><span class="line"><span class="comment">// plain new å®šä¹‰</span></span><br><span class="line"><span class="type">void</span> * <span class="keyword">operator</span> <span class="built_in">new</span>(std::<span class="type">size_t</span>) <span class="built_in">throw</span>(std::bad_alloc);</span><br><span class="line">| <span class="function"><span class="type">void</span> <span class="keyword">operator</span> <span class="title">delete</span><span class="params">(<span class="type">void</span> *)</span> <span class="title">throw</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Char * <span class="title">GetMemory</span><span class="params">(<span class="type">unsigned</span> <span class="type">long</span> size)</span></span></span><br><span class="line"><span class="function">ã€Š</span></span><br><span class="line"><span class="function"><span class="type">char</span> *p </span>= <span class="keyword">new</span> <span class="type">char</span>[size];</span><br><span class="line"><span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">char</span> *p = <span class="built_in">GetMemory</span>(<span class="number">1000000</span>); / å¯ èƒ½ æŠ› å‡º std::bad_alloc å¼‚ å¸¸</span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> []p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span>(<span class="type">const</span> std::bad_alloc&amp; ex) &#123;</span><br><span class="line">cout &lt;&lt; ex.<span class="built_in">what</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// nothrow new å®šä¹‰</span></span><br><span class="line"><span class="function"><span class="type">void</span> * <span class="keyword">operator</span> <span class="title">new</span><span class="params">(std::<span class="type">size_t</span>, <span class="type">const</span> std::<span class="type">nothrow_t</span>&amp;)</span> <span class="title">throw</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="keyword">operator</span> <span class="title">delete</span><span class="params">(<span class="type">void</span> *)</span> <span class="title">throw</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Void <span class="title">func</span><span class="params">(<span class="type">unsigned</span> <span class="type">long</span> length)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> *p = <span class="built_in">new</span>(nothrow) <span class="type">unsigned</span> <span class="type">char</span>[length];</span><br><span class="line"><span class="keyword">if</span>(p == <span class="literal">NULL</span>) cout &lt;&lt; <span class="string">&quot;allocate failed!&quot;</span>&lt;&lt; endl;</span><br><span class="line">Hf...</span><br><span class="line"><span class="keyword">delete</span> []p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>placement new ä¸ ç”¨ æ‹…å¿ƒ å†… å­˜ åˆ†é… å¤±è´¥ å›  ä¸º å®ƒ æ ¹æœ¬ å°± ä¸ ä¼š åˆ†é… å†… å­˜<br>
å®ƒæ‰€ åš çš„ å”¯ä¸€ ä¸€ä»¶ äº‹æƒ… å°± æ˜¯ è°ƒç”¨ å¯¹ è±¡ çš„ æ„é€  å‡½æ•°</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">include &lt;<span class="keyword">new</span>&gt;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="built_in">main</span>(<span class="type">void</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">char</span> *p = <span class="built_in">new</span>(nothrow) <span class="type">char</span>[<span class="number">4</span>]; <span class="comment">// nothrow new</span></span><br><span class="line"><span class="keyword">if</span>(p == <span class="literal">NULL</span>) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;allocate failed!&quot;</span>&lt;&lt; endl;</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line">ä» â€¦</span><br><span class="line"><span class="type">long</span> *q = <span class="built_in">new</span>(p) <span class="built_in">long</span>(<span class="number">1000</span>); <span class="comment">// placement new</span></span><br><span class="line">Ie.</span><br><span class="line"><span class="keyword">delete</span> [ip; / é‡Šæ”¾ å†… å­˜</span><br></pre></td></tr></table></figure>
<p>Placementnew çš„ ä¸» è¦ ç”¨ é€” å°± æ˜¯ : å å¤ ä½¿ ç”¨ ä¸€ å— è¾ƒ å¤§ çš„ åŠ¨ æ€ åˆ† é… æˆ åŠŸ çš„ å†… å­˜ æ¥ æ„ é€  ä¸ åŒ ç±» å‹ çš„ å¯¹ è±¡ æˆ– è€… å®ƒ ä»¬ çš„ æ•° ç»„ ã€‚ æ¯” å¦‚ , å¯ ä»¥ å…ˆ ç”³ è¯· ä¸€ ä¸ª å°¸ å¤Ÿ å¤§ çš„ å­— ç¬¦ æ•° ç»„ , ç„¶ å å½“ éœ€ è¦ æ—¶ åœ¨ å®ƒ ä¸Š é¢ æ„ é€  ä¸ åŒ ç±» å‹ å¯¹ è±¡ æˆ– å…¶ æ•°ç»„</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"> â€œ ä½¿ ç”¨ placement <span class="keyword">new</span> æ„ é€  èµ· æ¥ çš„ å¯¹ è±¡ æˆ– å…¶ æ•° ç»„ , è¦ æ˜¾ å¼ åœ° è°ƒ ç”¨ å®ƒ ä»¬ çš„ æ æ„ å‡½ æ•° æ¥ é”€ æ¯ ( æ æ„ å‡½ æ•° å¹¶ ä¸ é‡Š æ”¾ å¯¹ è±¡ çš„ å†… å­˜ , åƒ ä¸‡ ä¸ è¦ ä½¿ ç”¨ <span class="keyword">delete</span>ã€‚ è¿™ æ˜¯ å›  ä¸º ,placement <span class="keyword">new</span> æ„ é€  èµ· æ¥ çš„ å¯¹ è±¡ æˆ– å…¶ æ•° ç»„ çš„ å¤§ å° å¹¶ ä¸ ä¸€ å®š ç­‰ äº åŸ æ¥ åˆ† é… çš„ å†… å­˜ å¤§ å° , å›  æ­¤ ä½¿ ç”¨ <span class="keyword">delete</span> ä¼š é€  æˆ å†… å­˜ æ³„ æ¼ª , æˆ– è€… åœ¨ ä¹‹ å é‡Š æ”¾ å†… å­˜ æ—¶ å‡º ç° è¿ è¡Œ æ—¶ é”™ è¯¯ ã€‚ è§ ç¤º ä¾‹ <span class="number">16</span><span class="number">-14</span> ( å‡ è®¾ ADT è¡¨ ç¤º ä»» æ„ å¤ åˆ æ•° æ® ç±» # ).</span><br><span class="line">ç¤º ä¾‹ <span class="number">16</span><span class="number">-14</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;new&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostrem&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="built_in">main</span>(<span class="type">void</span>)</span><br><span class="line">ã€Š</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std:</span><br><span class="line"><span class="type">char</span> *p = <span class="built_in">new</span>(nothrow) <span class="type">char</span>[<span class="built_in">sizeof</span>(ADT) + <span class="number">2</span>]:; / nothrow <span class="keyword">new</span></span><br><span class="line"><span class="keyword">if</span>(p == <span class="literal">NULL</span>) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;allocate failed!&quot;</span>&lt;&lt; endl;</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line">ADT *q = <span class="built_in">new</span>(p) ADT; <span class="comment">// placement new: ä¸ å¿… æ‹… å¿ƒ å¤± è´¥</span></span><br><span class="line">å† .</span><br><span class="line"><span class="comment">// deleteq; / é”™ è¯¯ ! ä¸ èƒ½ åœ¨ æ­¤ å¤„ è°ƒ ç”¨ deleteq;</span></span><br><span class="line">q-&gt;ADT::-ADTO; / æ˜¾ ç¤º è°ƒ ç”¨ æ æ„ å‡½ æ•°</span><br><span class="line"><span class="keyword">delete</span> []p; / å† é‡Š æ”¾ å†… å­˜</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">char</span>) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">int</span>) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">unsigned</span> <span class="type">int</span>) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">long</span>) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">unsigned</span> <span class="type">long</span>) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">float</span>) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">double</span>) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">void</span> *) &lt;&lt; endl;</span><br></pre></td></tr></table></figure>
<h2 id="12-ç”¨å¯¹è±¡æ¨¡æ‹ŸæŒ‡é’ˆ"><a class="header-anchor" href="#12-ç”¨å¯¹è±¡æ¨¡æ‹ŸæŒ‡é’ˆ">ğŸŒ³</a>12. ç”¨å¯¹è±¡æ¨¡æ‹ŸæŒ‡é’ˆ</h2>
<p>äº› è½¯ ä»¶ åº“ ä½¿ ç”¨ è¿™ ç§ æŠ€ æœ¯ æ¥ å° è£… æŒ‡ é’ˆ , åŸº æœ¬ ä¸Š åˆ† ä¸º å¦‚ ä¸‹ å‡  ç§ æƒ… å†µ ã€‚</p>
<ol>
<li>é‡‡ ç”¨ æ‹· è´ æ–¹ å¼ ã€‚ è¿™ æ · çš„ æŒ‡ é’ˆ å¯¹ è±¡ æ—¢ è´Ÿ è´£ åˆ› å»º æ•° æ® å¯¹ è±¡ , åˆ è´Ÿ è´£ åˆ  é™¤ æ•° æ® å¯¹<br>
è±¡ ,STL å®¹ å™¨ å¯¹ è±¡ é‡‡ ç”¨ çš„ å°± æ˜¯ è¿™ ç§ æ–¹ å¼ ã€‚æ˜¾ ç„¶ , é‡‡ ç”¨ è¿™ ç§ æ–¹ å¼ çš„ æŒ‡ é’ˆ å¯¹ è±¡<br>
è´£ä»» æœ€ æ¸… æ™° ã€‚</li>
<li>é‡‡ ç”¨ å®Œ å…¨ æ¥ ç®¡ æ–¹ å¼ , æŒ‡ é’ˆ å¯¹ è±¡ ä¸ è´Ÿ è´£ åˆ› å»º æ•° æ® å¯¹ è±¡ , ä½†æ˜¯è´Ÿè´£åˆ é™¤æ•°æ®å¯¹<br>
è±¡ , å³ ä¸ ä»… æ¥ ç®¡ äº† æº æŒ‡ é’ˆ æŒ‡ å‘ çš„ å¯¹ è±¡ , è€Œ ä¸” æ¥ ç®¡ äº† å®ƒ çš„ æ‰€ æœ‰ æƒ ã€‚auto ptr&lt;&gt;<br>
ç±» å°± æ˜¯ é‡‡ ç”¨ è¿™ ç§ æ–¹ å¼ å® ç° çš„ ã€‚</li>
<li>é‡‡ ç”¨ æ¥ ç®¡ æ–¹ å¼ , æ˜¯ æ—¢ ä¸ è´Ÿ è´£ åˆ› å»º æ•° æ® å¯¹ è±¡ ä¹Ÿ ä¸ è´Ÿ è´£ åˆ  é™¤ æ•° æ® å¯¹ è±¡ , è¿™ å°± æ˜¯<br>
æˆ‘ ä»¬ çš„ æ¨¡ æ‹Ÿ æŒ‡ é’ˆ ã€‚STL ä¸­ çš„ è¿­ ä»£ å™¨ (iteratorã€‹ é‡‡ ç”¨ çš„ å°± æ˜¯ è¿™ ç§ æ–¹ å¼ , å®ƒä»¬ åœ¨<br>
è¡Œ ä¸º ä¸Š ä¸ åº• å±‚ çš„ æŒ‡ é’ˆ å˜ é‡ æ²¡ æœ‰ ä»€ ä¹ˆ å¤ª å¤§ åŒº åˆ« , åª æ˜¯ åœ¨ ä½¿ ç”¨ æ–¹ å¼ ä¸Š ç»Ÿ ä¸€ äº† èµ·<br>
æ¥ ã€‚</li>
<li>å®Œ å…¨ æ¥ ç®¡ æ–¹ å¼ å’Œ æ·± æ‹· è´ æ–¹ å¼ ç»“ åˆ ã€‚ ä¸€ èˆ¬ æƒ… å†µ æ˜¯ : æ‹· è´ æ„ é€  å’Œ æ‹· è´ èµ‹ å€¼ é‡‡ ç”¨<br>
æ·±æ‹· è´ æ–¹ å¼ , è€Œ æŒ‡ é’ˆ æ„ é€  å’Œ æŒ‡ é’ˆ èµ‹ å€¼ é‡‡ ç”¨ æ¥ ç®¡ æ–¹ å¼ ã€‚ è¿™ ç§ æ–¹ å¼ æœ€ å®¹ æ˜“ äº§ ç”Ÿ<br>
è¿ è¡Œ æ—¶ å†… å­˜ è®¿ é—® å†² çª å’Œ å†… å­˜ æ³„ æ¼ é—® é¢˜ , å›  æ­¤ å»º è®® ä¸ è¦ ä½¿ ç”¨ ã€‚</li>
</ol>
<h3 id="æ³›å‹æŒ‡é’ˆauto-ptr"><a class="header-anchor" href="#æ³›å‹æŒ‡é’ˆauto-ptr">ğŸŒ³</a>æ³›å‹æŒ‡é’ˆauto_ptr</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">auto_ptr</span> ã€</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">explicit</span> <span class="title">autp_ptr</span><span class="params">(T *p = <span class="number">0</span>)</span> : m_ptr(p)&#123;</span>&#125;</span><br><span class="line"><span class="built_in">auto_ptr</span>(<span class="type">const</span> auto_ptr&lt;T&gt;&amp; copy) : <span class="built_in">m_ptr</span>(copy.<span class="built_in">release</span>())&#123;&#125;</span><br><span class="line">auto_ptr&lt;T&gt;&amp; <span class="keyword">operator</span>=(<span class="type">const</span> auto_ptr&lt;T&gt;&amp; assign) &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span> != &amp;assign) &#123;</span><br><span class="line"><span class="keyword">delete</span> m_ptr;</span><br><span class="line">m_ptr = assign.<span class="built_in">release</span>(); H é‡Š æ”¾ å¹¶ ç§» äº¤ æ‹¥ æœ‰ æƒ</span><br><span class="line">å¤š</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">hs</span><br><span class="line">~<span class="built_in">auto_ptr</span>()&#123; <span class="keyword">delete</span> m_ptr; &#125; / è´Ÿ è´£ é‡Š æ”¾ å­˜ å‚¨</span><br><span class="line">T&amp; <span class="keyword">operator</span>*()&#123; <span class="keyword">return</span>.*m_p; &#125; / é‡ è½½ â€œ*<span class="number">2</span></span><br><span class="line">T* <span class="keyword">operator</span>-&gt;()&#123; <span class="keyword">return</span> m_p; &#125; / é‡ è½½ â€œ-&gt;â€œ</span><br><span class="line"><span class="function">T* <span class="title">release</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">T *temp = m_ptr;</span><br><span class="line">(<span class="keyword">const_cast</span>&lt;auto_ptr&lt;T&gt; *&gt;(<span class="keyword">this</span>))-&gt;m_ptr = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">å·¥ * m_ptr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ ç”¨ auto_ptr&lt;&gt; è¿™ æ · çš„ çµ å·§ æŒ‡ é’ˆ æœ‰ ä¸€ ä¸ª å¥½ å¤„ : å½“ å‡½ æ•° å³ å°† é€€ å‡º æˆ– æœ‰ å¼‚ å¸¸ æŠ› å‡º çš„ æ—¶ å€™ ,<br>
ä¸ å† éœ€ è¦ æˆ‘ ä»¬ æ˜¾ å¼ åœ° ç”¨ delete æ¥ åˆ  é™¤ æ¯ ä¸€ ä¸ª åŠ¨ æ€ åˆ› å»º èµ· æ¥ çš„ å¯¹ è±¡</p>
<h3 id="å¸¦å¼•ç”¨æŠ€æœ¯çš„æ™ºèƒ½æŒ‡é’ˆ"><a class="header-anchor" href="#å¸¦å¼•ç”¨æŠ€æœ¯çš„æ™ºèƒ½æŒ‡é’ˆ">ğŸŒ³</a>å¸¦å¼•ç”¨æŠ€æœ¯çš„æ™ºèƒ½æŒ‡é’ˆ</h3>
<p>å¸¦ æœ‰ å¼• ç”¨ è®¡ æ•° åŠŸ èƒ½ çš„ æ™º èƒ½ æŒ‡ é’ˆ å…¼ æœ‰, æ™º é€š æŒ‡ é’ˆ å…± äº« å® å€¼ å¯¹ è±¡ å’Œ auto ptr è‡ª åŠ¨ é‡Š æ”¾ å® å€¼ å¯¹ è±¡ çš„ åŒ é‡ åŠŸ èƒ½</p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230603113212.png" alt></p>
<p>â€œauto_pträ¸ æ»¡ è¶³ STL æ ‡ å‡† å®¹ å™¨ å¯¹ å…ƒ ç´  çš„ æœ€ åŸº æœ¬ è¦ æ±‚<br>
,auto ptr å¯¹ è±¡ å’Œ å®ƒ çš„ æ‹· è´ ä¸ ä¼š å…± äº« å® å€¼ | å¯¹ è±¡ , ä»» ä½• ä¸¤ ä¸ª auto_ptr ä¹Ÿ ä¸ åº” è¯¥ å…± äº« åŒ ä¸€ ä¸ª å® å€¼ å¯¹ è±¡ ã€‚ è¿™ å°± æ˜¯ è¯´ ,auto ptr å¯¹ è±¡ å’Œ | å®ƒ çš„ æ‹· è´ å¹¶ ä¸ ç›¸ åŒ ã€‚ ç„¶ è€Œ æ ¹ æ® STL å®¹ å™¨ â€œ å€¼ â€œ è¯­ ä¹‰ çš„ è¦ æ±‚ , å¯ æ‹· è´ æ„ é€  æ„ å‘³ ç€ ä¸€ ä¸ª || å¯¹ è±¡ å¿… é¡» å’Œ å®ƒ çš„ æ‹· è´ ç›¸ åŒ ( æ ‡ å‡† ä¸­ çš„ æ­£ å¼ å®š ä¹‰ æ¯” è¿™ ç¨ å¤ æ‚ ä¸€ äº› ã€‚ åŒ æ · , å¯ èµ‹ å€¼ æ„ å‘³ è€’è±æŠŠ ä¸ª å¯¹ è±¡ èµ‹ å€¼ ç»™ å¦ ä¸€ ä¸ª åŒ ç±» å‹ å¯¹ è±¡ å°† äº§ ç”Ÿ ä¸¤ ä¸ª ç›¸ åŒ çš„ å¯¹ è±¡ ã€‚ æ˜¾ ç„¶ ,auto ptr ä¸ èƒ½ LK è¦ æ±‚ , å®ƒ ä¸ ä¸Š é¢ çš„ ç»“ è®º çŸ› ç›¾</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">ç¤ºä¾‹<span class="number">16</span><span class="number">-23</span></span><br><span class="line">std::list&lt; std::auto_ptr&lt;<span class="type">int</span>&gt; &gt; la; / auto_ptr åˆ— è¡¨</span><br><span class="line"><span class="function">std::auto_ptr&lt;<span class="type">int</span>&gt; <span class="title">p1</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">1</span>))</span></span>;</span><br><span class="line"><span class="function">std::auto_ptr&lt;<span class="type">int</span>&gt; <span class="title">p2</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">2</span>))</span></span>;</span><br><span class="line"><span class="function">std::auto_ptr&lt;<span class="type">int</span>&gt; <span class="title">p3</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">3</span>))</span></span>;</span><br><span class="line">la.<span class="built_in">push_back</span>(p1); <span class="comment">// compiling-error!</span></span><br><span class="line">la.<span class="built_in">push_back</span>(p2); <span class="comment">// compiling-error!</span></span><br><span class="line">la.<span class="built_in">push_back</span>(p3); <span class="comment">// compiling-error!</span></span><br><span class="line">set&lt;auto_ptr&lt;<span class="type">int</span>&gt; &gt; sa; / auto_ptr RA: å‡ è®¾ ä¸º <span class="keyword">auto</span> ptr å®š ä¹‰ äº† <span class="keyword">operator</span>&lt;</span><br><span class="line">sa.<span class="built_in">insert</span>(p1); <span class="comment">// compiling-error!</span></span><br><span class="line">sa.<span class="built_in">insert</span>(p2); <span class="comment">// compiling-error!</span></span><br><span class="line">sa.<span class="built_in">insert</span>(p3); <span class="comment">// compiling-error!</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="type">void</span> list&lt;T&gt;::<span class="built_in">push_back</span>(<span class="type">const</span> T&amp; x)</span><br><span class="line">&#123;</span><br><span class="line">T *p = <span class="keyword">operator</span> <span class="built_in">new</span>(<span class="built_in">sizeof</span>(T)); / åˆ† é… å†… å­˜ç©º é—´</span><br><span class="line"><span class="keyword">new</span> (p) <span class="built_in">T</span>(x); <span class="comment">// placement new, è°ƒ ç”¨ T çš„ copy constructor</span></span><br><span class="line">------ / å°† p äº¤ ç»™ å®¹ å™¨ ç®¡ ç† , è°ƒ æ•´ å®¹ å™¨ å¤§ å°</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">typedef</span> std::vector&lt;std::auto_ptr&lt;<span class="type">int</span>&gt; &gt; IntPtrVector;</span><br><span class="line">IntPtrVector va;</span><br><span class="line"><span class="function">std::auto_ptr&lt;<span class="type">int</span>&gt; <span class="title">p1</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">1</span>))</span></span>;</span><br><span class="line"><span class="function">std::auto_ptr&lt;<span class="type">int</span>&gt; <span class="title">p2</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">2</span>))</span></span>;</span><br><span class="line"><span class="function">std::auto_ptr&lt;<span class="type">int</span>&gt; <span class="title">p3</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">3</span>))</span></span>;</span><br><span class="line"><span class="function">std::auto_ptr&lt;<span class="type">int</span>&gt; <span class="title">p4</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">4</span>))</span></span>;</span><br><span class="line"><span class="function">std::auto_ptr&lt;<span class="type">int</span>&gt; <span class="title">p5</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">5</span>))</span></span>;</span><br><span class="line">va.<span class="built_in">push_back</span>(p1);</span><br><span class="line">va.<span class="built_in">push_back</span>(p2);</span><br><span class="line">va.<span class="built_in">push_back</span>(p3);</span><br><span class="line">va.<span class="built_in">push_back</span>(p4);</span><br><span class="line">va.<span class="built_in">push_back</span>(p5);</span><br><span class="line"><span class="number">1</span> ( æ³¨æ„ : ä»¥ ä¸‹ æ“ ä½œ å¹¶ é æ”¾ åœ¨ ä¸€ èµ· è¿› è¡Œ , ä»… æ˜¯ ç¤º èŒƒ )</span><br><span class="line">IntPtrVector vb = va; va ä¸§ å¤± å¯¹ æ‰€ æœ‰ å® å€¼ å¯¹ è±¡ çš„ æ‹¥ æœ‰ æƒ ,</span><br><span class="line">/ å…ƒ ç´  æˆ ä¸º <span class="literal">NULL</span> æŒ‡ é’ˆ</span><br><span class="line">vb.<span class="built_in">resize</span>(<span class="number">10</span>); / æ–° å¢ çš„ å…ƒ ç´  éƒ½ ä¸º <span class="literal">NULL</span>æŒ‡ é’ˆ</span><br><span class="line">std::<span class="built_in">sort</span>(vb.<span class="built_in">begin</span>(),</span><br><span class="line">vb.end0);</span><br><span class="line"></span><br><span class="line">std::auto_ptr&lt;<span class="type">int</span>&gt;</span><br><span class="line">t</span><br><span class="line">=</span><br><span class="line">vb.<span class="built_in">front</span>();</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">æ”¹</span><br><span class="line">å˜</span><br><span class="line">äº†</span><br><span class="line">å®¹</span><br><span class="line">å™¨</span><br><span class="line">å…ƒ</span><br><span class="line">ç´ </span><br><span class="line">std::auto_ptr&lt;<span class="type">int</span>&gt; r = vb[<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line">std::list&lt;std::auto_ptr&lt;<span class="type">int</span>&gt; &gt; la;</span><br><span class="line">std::<span class="built_in">copy</span>(vb.<span class="built_in">begin</span>(), vb.<span class="built_in">end</span>(), std::<span class="built_in">back_inserter</span>(la));</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>
<p>Scott Meyers åœ¨ ã€ŠEffective STL) Item 8 ä¸­ è¯¦ ç»† åœ° åˆ† æ äº† å¯¹ auto ptr å®¹ å™¨ è¿› è¡Œ æ’ åº<br>
| æ—¶ å¯ èƒ½ ä¼š å¯¼ è‡´ çš„ é—® é¢˜ ã€‚ ä½† æ˜¯ åœ¨ MS VC++ ç¯ å¢ƒ ä¸‹ ç» æµ‹ è¯• , å¹¶ æ²¡ æœ‰ å‡º ç° ä¹¦ ä¸­ æ‰€ æ è¿° çš„ æ‚²<br>
| æƒ¨ ç»“ å±€ , è€Œ æ˜¯ ç»“ æœ æ­£ ç¡® ã€‚ ä¸» è¦ åŸ å›  åœ¨ äº C++ æ ‡ å‡† å¹¶ æ²¡ æœ‰ è¦ æ±‚ std::sortç­‰ æ³› å‹ ç®— æ³• çš„ å®<br>
ç° å¿… é¡» é‡‡ ç”¨ æŸ ä¸€ ç§ æ–¹ æ³• , è€Œ æ˜¯ åª è§„ å®š äº† å®ƒ ä»¬ çš„ æ¥ å£ ã€ åŠŸ èƒ½ å’Œ åº” è¯¥ è¾¾ åˆ° çš„ æ€§ èƒ½ è¦ æ±‚ ( å®¹<br>
å™¨ä¹Ÿ æ˜¯ å¦‚ æ­¤ )ã€‚ å›  æ­¤ , ä¸ åŒ çš„ STL å® ç° å¯ èƒ½ é‡‡ å– ä¸ åŒ çš„ æ–¹ æ³• , æ¯” å¦‚ æœ‰ çš„ sort å® ç° é‡‡ ç”¨<br>
å¿«é€Ÿ æ’ åº æ³• , è€Œ æœ‰ çš„ é‡‡ ç”¨ æ’ å…¥ å¼ æ’ åº æ³• ç­‰ ã€‚ ä¸ åŒ çš„ æ’ åº æ–¹ æ³• åœ¨ é®é‡ auto_ptrè¿™ æ · çš„ å®¹<br>
| å™¨ æ—¶ å¯ èƒ½ å°± ä¼š äº§ ç”Ÿ ä¸ åŒ çš„ ç»“ æœ</p>
<p>å¯ è§ , ç£ èƒ½ æŒ‡ é’ˆ â€œ å¯ ä»¥ â€œ è¿˜ æ˜¯ â€œ ä¸ å¯ ä»¥ â€œ ä½œ ä¸º å®¹ å™¨ çš„ å…ƒ ç´  å¹¶ é ç» å¯¹ çš„ , ä¸ ä»… ä¸ ,STL çš„ å® ç° æœ‰ å…³ , è€Œ ä¸” ä¸ STL å®ª å™¨ çš„ éœ€ æ±‚ å’Œ å®‰ å…¨ æ€§ åŠ å®¹ å™¨ çš„ è¯­ ä¹‰ æœ‰ å…³</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">ç”±äº auto_ptr æ˜¯ å¯¹ è±¡ åŒ– çš„ æ™º èƒ½ æŒ‡ é’ˆ , å…· æœ‰ è‡ª åŠ¨ é‡Š æ”¾ èµ„ æº çš„ èƒ½ åŠ› , å›  æ­¤ å®ƒ çœŸ æ­£ æœ‰ ä»·</span><br><span class="line">, å€¼ çš„ ç”¨ é€” æ˜¯ åœ¨ å‘ ç”Ÿ å¼‚ å¸¸ æ—¶ é¿ å… èµ„ æº æ³„ æ¿¡ ã€‚ æ¯” å¦‚ , å¦‚ æœ ä¸ ä½¿ ç”¨ <span class="keyword">auto</span> ptr, åˆ™ ä¸‹ åˆ— ä»£ ç  åœ¨</span><br><span class="line">å‘ ç”Ÿ å¼‚ å¸¸ çš„ æƒ… å†µ ä¸‹ ä¸ å¾— ä¸ å¤š æ¬¡ æ‰‹ å·¥ é‡Š æ”¾ èµ„ æº ( è§ ç¤º ä¾‹ <span class="number">16</span><span class="number">-28</span>)ã€‚</span><br><span class="line">ç¤º ä¾‹ <span class="number">16</span><span class="number">-28</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123; ... &#125;<span class="number">5</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function">ã€Š</span></span><br><span class="line"><span class="function">A *pA</span>= ä¸€ <span class="keyword">new</span> A;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">wee <span class="comment">// using *pA</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span>(...) &#123;</span><br><span class="line"><span class="keyword">delete</span> pA; MBERTAIN BE LAE IK</span><br><span class="line"><span class="keyword">throw</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">delete</span> pA; / å‡½ æ•° é€€ å‡º æ—¶ è¿˜ è¦ æ˜¾ å¼ é‡Š æ”¾</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ç° åœ¨ æœ‰ äº† <span class="keyword">auto</span> ptr, æˆ‘ ä»¬ å°± å¯ ä»¥ è¿™ ä¹ˆ åš ( è§ ç¤º ä¾‹ <span class="number">16</span><span class="number">-29</span>).</span><br><span class="line">ç¤º ä¾‹ <span class="number">16</span><span class="number">-29</span> |</span><br><span class="line">classA&#123; ... &#125;<span class="number">5</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">auto_ptr&lt;A&gt; <span class="title">pA</span><span class="params">(<span class="keyword">new</span> A)</span></span>;</span><br><span class="line"><span class="comment">// using *pA</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¦‚æœ æƒ³ é˜² æ­¢ æ—  æ„ ä¸­ ä¿® æ”¹ <span class="keyword">auto</span> ptr å¯¹ å® å€¼ å¯¹ è±¡ çš„ æ‹¥ æœ‰ æƒ , å¯ä»¥ ä½¿ ç”¨ <span class="type">const</span> auto_ptr,</span><br><span class="line">! è¿™ æ · çš„ auto_ptr åª èƒ½ ä½¿ ç”¨ å¼• ç”¨ æˆ– æŒ‡ é’ˆ ä¼  é€’ , ä¸ èƒ½ ä½¿ ç”¨ å€¼ ä¼  é€’ , ä¹Ÿ ä¸ èƒ½ èµ‹ å€¼ å’Œ æ‹· è´ æ„ é€  </span><br><span class="line"></span><br><span class="line">classA&#123; ... &#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function"><span class="type">const</span> auto_ptr&lt;A&gt; <span class="title">pl</span><span class="params">(<span class="keyword">new</span> A)</span></span>;</span><br><span class="line">we <span class="comment">// using *pA</span></span><br><span class="line"><span class="function">auto_ptr&lt;A&gt; <span class="title">p2</span><span class="params">(p1)</span></span>; <span class="comment">// error!</span></span><br><span class="line">auto_ptr&lt;A&gt; p3;</span><br><span class="line">p3=pl; <span class="comment">// error!</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// smart pointer stl</span></span><br><span class="line"></span><br><span class="line">ç¤º ä¾‹ <span class="number">16</span><span class="number">-31</span></span><br><span class="line">) <span class="keyword">typedef</span> SmartPtr&lt;Shape&gt; ShapeSmartPtr;</span><br><span class="line"><span class="keyword">typedef</span> std::list&lt;ShapeSmartPt&gt; ShapeList;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> Point&amp; left, <span class="type">const</span> Point&amp; right)</span><br><span class="line">&#123; <span class="keyword">return</span> ((left.m_x &lt; right.m_x) &amp;&amp; (left.m_y &lt;right.m_y); &#125;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>â€”=(<span class="type">const</span> Point&amp; left, <span class="type">const</span> Point&amp; right)</span><br><span class="line">&#123; <span class="built_in">return</span> ((left.m_x == right.m_x) &amp;&amp; (left.m_y == right.m_y); )</span><br><span class="line">| <span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> ShapeSmartPtr left, <span class="type">const</span> ShapeSmartPtr right)</span><br><span class="line">&#123; <span class="built_in">return</span> (left-&gt;GetOriginQ &lt; right-&gt;<span class="built_in">GetOrigin</span>()); ã€‹</span><br><span class="line"><span class="number">1</span> <span class="type">bool</span> <span class="keyword">operator</span>==(<span class="type">const</span> ShapeSmartPtr left, <span class="type">const</span> ShapeSmartPtr right)</span><br><span class="line">&#123; <span class="built_in">return</span> (left-&gt;GetOriginQ == right-&gt;<span class="built_in">GetOrigin</span>()); &#125;</span><br><span class="line">ShapeList shapes;</span><br><span class="line">ShapeSmartPtr <span class="built_in">p</span>(<span class="keyword">new</span> <span class="built_in">Shape</span>(<span class="built_in">Point</span>(<span class="number">1</span>, <span class="number">1</span>)));</span><br><span class="line">ShapeSmartPtr <span class="built_in">q</span>(<span class="keyword">new</span> <span class="built_in">Circle</span>(<span class="built_in">Point</span>(<span class="number">2</span>, <span class="number">2</span>), <span class="number">5</span>));</span><br><span class="line">ShapeSmartPtr <span class="built_in">r</span>(<span class="keyword">new</span> <span class="built_in">Rectangle</span>(<span class="built_in">Point</span>(<span class="number">3</span>, <span class="number">3</span>), <span class="built_in">Point</span>(<span class="number">4</span>, <span class="number">4</span>)));</span><br><span class="line">shapes.<span class="built_in">push_back</span>(p);</span><br><span class="line">shapes.<span class="built_in">push_back</span>(q);</span><br><span class="line">shapes.<span class="built_in">push_back</span>(r);</span><br><span class="line">|</span><br><span class="line">std::<span class="built_in">sort</span>(shapes.<span class="built_in">begin</span>(), shapes.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(ShapeList::const_iterator first=shapes.<span class="built_in">begin</span>();first !=shapes.<span class="built_in">end</span>();++first)</span><br><span class="line">(*first)-&gt;DrawQ);</span><br></pre></td></tr></table></figure>
<h2 id="13-17ç« -stl"><a class="header-anchor" href="#13-17ç« -stl">ğŸŒ³</a>13. 17ç«  STL</h2>
<p>STL ä¸» è¦ åŒ… æ‹¬ ä¸‹ é¢ è¿™ äº› ç»„ ä»¶<br>
IOæµã€ string ç±» ã€ å®¹ å™¨ ç±»(Container)ã€ è¿­ ä»£ å™¨ ç†¹ (Iterator)ã€ å­˜ å‚¨ åˆ† é… å™¨ (Allocator)ã€<br>
é€‚ é… å™¨ (Adapter)ã€ å‡½ æ•° å¯¹ è±¡ (Functor)ã€ æ³› | å‹ ç®— æ³• (Algorithm)ã€<br>
æ•° å€¼ è¿ ç®— ã€ å›½ é™… åŒ– å’Œ æœ¬ åœ° åŒ– æ”¯ æŒ , ä»¥ åŠ æ ‡ å‡† å¼‚ å¸¸ ç±» ç­‰ ã€‚</p>
<p>C++æ ‡ å‡† è§„ å®š , STL çš„ å¤´ æ–‡ ä»¶ éƒ½ ä¸ ä½¿ ç”¨ æ‰© å±•å<br>
è¿‡ å» çš„ C ç¨‹ åº åº“ å¤´ æ–‡ ä»¶ åœ¨, å¹¶ å…¥ C++ æ ‡ å‡† åº“ æ—¶ ä¹Ÿ éƒ½ å» æ‰ äº† .h æ‰© å±• å , åŒ æ—¶ å¢ åŠ  äº† å‰ ç¼€ â€œcâ€œã€‚<br>
STL ç»„ ä»¶ éƒ½ è¢« çº³ å…¥ äº† å å­— ç©º é—´ std::, æ‰€ ä»¥ åœ¨ ä½¿ ç”¨ å…¶ ä¸­ çš„ ç»„ ä»¶ ä¹‹ å‰ éœ€ ä½¿ ç”¨ using å£° æ˜ æˆ– using æŒ‡ ä»¤ ,<br>
æˆ– è€… ä¹Ÿ å¯ ä»¥ åœ¨ æ¯ ä¸€ å¤„ éƒ½ ç›´ æ¥ ä½¿ ç”¨ å®Œ å…¨ é™ å®š å std::ã€‚</p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230603051215.png" alt></p>
<h3 id="stlå¤´æ–‡ä»¶åˆ†å¸ƒ"><a class="header-anchor" href="#stlå¤´æ–‡ä»¶åˆ†å¸ƒ">ğŸŒ³</a>STLå¤´æ–‡ä»¶åˆ†å¸ƒ</h3>
<h3 id="å®¹å™¨ç±»"><a class="header-anchor" href="#å®¹å™¨ç±»">ğŸŒ³</a>å®¹å™¨ç±»</h3>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230603050007.png" alt></p>
<pre><code>å…³ è” å¼ å®¹ å™¨ multimap å’Œ multiset ä¹Ÿ éƒ½ åˆ† åˆ« å®š ä¹‰ åœ¨ &lt;map&gt; å’Œ &lt;set&gt; ä¸­ ,
hash_multimap å’Œ hash_multiset å®š ä¹‰ åœ¨ &lt;hash_map&gt;å’Œ&lt;hash_set&gt;ä¸­
</code></pre>
<h3 id="æ³›å‹ç®—æ³•"><a class="header-anchor" href="#æ³›å‹ç®—æ³•">ğŸŒ³</a>æ³›å‹ç®—æ³•</h3>
<pre><code>åƒ C++VC æ•° ç»„ ã€ å­— ç¬¦ ç•™ ã€UO æµ ç­‰ ç‰¹ æ®Š çš„ å®¹ å™¨ ä¹Ÿ å¯ ä»¥ ä½¿ ç”¨ æ ‡ äº› æ³› å‹ ç®— æ³• ä¸€ ä¸€
å®ƒ ä»¬ å®š ä¹‰ åœ¨ å¤´ æ–‡ ä»¶ &lt;algorithm&gt;å’Œ &lt;utility&gt; ä¸­ 
</code></pre>
<h3 id="è¿­ä»£å™¨"><a class="header-anchor" href="#è¿­ä»£å™¨">ğŸŒ³</a>è¿­ä»£å™¨</h3>
<pre><code>å¦‚ è¾“ å…¥ / è¾“ å‡º è¿­ ä»£ å™¨ ã€ æ’ å…¥ è¿­ ä»£ å™¨ ã€ å å‘ è¿­ ä»£ å™¨ ç­‰ éƒ½ æ˜¯ è¿¢ ä»£ å™¨ é€‚ é… å™¨ , 
å®š ä¹‰ åœ¨ å¤´ æ–‡ ä»¶ &lt;iterator&gt;ä¸­ 
</code></pre>
<h3 id="æ•°å­¦è¿ç®—åº“"><a class="header-anchor" href="#æ•°å­¦è¿ç®—åº“">ğŸŒ³</a>æ•°å­¦è¿ç®—åº“</h3>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230603050515.png" alt></p>
<h3 id="é€šç”¨å·¥å…·"><a class="header-anchor" href="#é€šç”¨å·¥å…·">ğŸŒ³</a>é€šç”¨å·¥å…·</h3>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230603050604.png" alt></p>
<h3 id="å…¶ä»–å¤´æ–‡ä»¶"><a class="header-anchor" href="#å…¶ä»–å¤´æ–‡ä»¶">ğŸŒ³</a>å…¶ä»–å¤´æ–‡ä»¶</h3>
<pre><code>&lt;typeinfo&gt; ã€&lt;stdexcept&gt;ã€&lt;strsteam&gt;ã€&lt;string&gt;ã€&lt;istream&gt;ã€
&lt;ostream&gt;ã€&lt;iostream&gt;ã€&lt;new&gt;ã€&lt;iomanip&gt;ã€&lt;fstream&gt; 
</code></pre>
<h3 id="å®¹å™¨è®¾è®¡åŸç†"><a class="header-anchor" href="#å®¹å™¨è®¾è®¡åŸç†">ğŸŒ³</a>å®¹å™¨è®¾è®¡åŸç†</h3>
<p>å®¹ å™¨ åœ¨ æ¦‚ å¿µ ä¸Š æ˜¯ ä¸€ ç§ å¯ ä»¥ åŠ¨ æ€ å¢ å¤§ å’Œ å‡ å° çš„ æ¨¡ å‹<br>
å…¶<strong>å…ƒ ç´  å¯¹ è±¡</strong> åœ¨ å® ç° ä¸Š ä¸ å¯ èƒ½ ç›´ æ¥ ä¿ å­˜ åœ¨ å®¹ å™¨ å¯¹ è±¡ é‡Œ é¢<br>
åº” è¯¥ ä¿ å­˜ åœ¨ è‡ª ç”± å†… å­˜ (Free Memory) æˆ– å † , CHeap)ã€‹ ä¸Š</p>
<h3 id="å†…å­˜æ˜ åƒ"><a class="header-anchor" href="#å†…å­˜æ˜ åƒ">ğŸŒ³</a>å†…å­˜æ˜ åƒ</h3>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230603051108.png" alt></p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230603052000.png" alt></p>
<h3 id="å­˜å‚¨æ–¹å¼-è®¿é—®æ–¹å¼"><a class="header-anchor" href="#å­˜å‚¨æ–¹å¼-è®¿é—®æ–¹å¼">ğŸŒ³</a>å­˜å‚¨æ–¹å¼ è®¿é—®æ–¹å¼</h3>
<p>å‘ é‡ Cvector) å’Œ é“¾ è¡¨ (linked list) æ˜¯ ä¸¤ ç§ æœ€ åŸº æœ¬ çš„ åŠ¨ æ€ ç»“ æ„ ,<br>
ä¹Ÿæ˜¯ STL ä¸­ ä¸¤ ç§ æœ€ åŸº æœ¬ çš„ å®¹ å™¨ ,<br>
åˆ† åˆ« å¯¹ åº” åŠ¨ æ€ æ•° ç»„ å’Œ é“¾ æ¥ è¡¨ ç»“ æ„<br>
åŒ æ—¶ å®ƒ ä»¬ åˆ† åˆ« ä»£ è¡¨ äº† å†… å­˜ ä¸­ åŒ ç±»å‹ æ‰¹ é‡ æ•° æ® å­˜ æ”¾ çš„ ä¸¤ ç§ åŸº æœ¬ æ–¹ å¼ , è¿ ç»­ å­˜ å‚¨ å’Œ éš æœº å­˜ å‚¨ ( ä¸ è¿ ç»­ å­˜ å‚¨ )ã€‚</p>
<p>éš æœº è®¿ é—® å°± æ˜¯ æŒ‡ å¯ ä»¥ ç›´ æ¥ é€š è¿‡ å¼€ é”€ æ’ å®š çš„ ç®— æœ¯ è¿ ç®— æ¥ å¾— åˆ° ä»» ä¸€ å…ƒ ç´  çš„ å†… å­˜ åœ° å€ çš„ è®¿ é—® æ–¹ æ³•</p>
<p>é¡º åº è®¿ é—® åˆ™ æ˜¯ æŒ‡ å¿… é¡» ä» ç¬¬ ä¸€ ä¸ª å…ƒ ç´  å¼€ å§‹ é å† , ç›´ åˆ° æ‰¾ åˆ° æ‰€ éœ€ çš„ å…ƒ ç´  å¯¹ è±¡ ä¸ºæ­¢ ,<br>
è€Œ æ—  æ³• ç›´ æ¥ å¾— åˆ° ä»» ä¸€ ä¸­ é—´ å…ƒ ç´  å¯¹ è±¡ çš„ åœ°å€</p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230603052600.png" alt></p>
<p>stackã€queue åŠ priorityqueue åœ¨ æ¦‚ å¿µ å’Œ æ¥ å£ ä¸Š éƒ½ ä¸ æ”¯ æŒ éš æœº è®¿ é—®å’Œ éå† ,<br>
è¿™ æ˜¯ ç”± å®ƒ ä»¬ çš„ è¯­ ä¹‰ å†³ å®š çš„ , è€Œ ä¸ æ˜¯ ç”± åº• å±‚ å­˜ å‚¨ æ–¹ å¼ å†³ å®š çš„ , å› æ­¤ æ²¡ æœ‰ é€‰ ä»£ å™¨<br>
( æ‰€ ä»¥ å®ƒ ä»¬ æ‰ è¢« å« åš å®¹ å™¨ è¿‘ é… å™¨ è€Œ ä¸ æ˜¯ å½’ ä¸º å®¹ å™¨ ç±» ),</p>
<p>è¿™ ä¸¤ ç§ åŸº æœ¬ çš„ å­˜ å‚¨ æ–¹ å¼ å¯ ä»¥ æ¼” å˜ å‡º å„ ç§ ä¸ åŒ çš„ å­˜ å‚¨ æ–¹ å¼ ,<br>
æ¯” å¦‚ åˆ† å±‚ è¿ ç»­ å­˜ å‚¨ ã€ æ ‘ (Tree)ã€ é‚» æ¥ è¡¨ ã€ å›¾ ç­‰ , ç”š è‡³ å¯ ä»¥ æŠŠ äºŒ è€… ç»„ åˆ èµ· æ¥</p>
<p>å°± æ‹¿ â€œ æ ‘ â€œ æ¥ è¯´ , å®ƒ åœ¨ æœ¬ è´¨ ä¸Š å°± æ˜¯ ä¸€ ç§ ç‰¹ æ®Š çš„ é“¾ è¡¨ ç»“ æ„ , å›  æ­¤ åª èƒ½ é¡º åº è®¿ é—® ,<br>
å³ ä» æŸ ä¸ª èŠ‚ ç‚¹ å¼€ å§‹ æœ ç´¢ ç›´ è‡³ åˆ° è¾¾ æ‰€ è¦ è®¿ é—® çš„ å…ƒ ç´  å¯¹ è±¡ ,<br>
æˆ– è€… é‡‡ ç”¨ æ·± åº¦ ä¼˜ å…ˆ ã€ å¹¿ åº¦ ä¼˜ å…ˆ æˆ– è€… å‰ åº ã€ ä¸­ åº ã€ å åº ç­‰ æ–¹ æ³• é å† æ•´ æ£µ æ ‘ ,<br>
ä½† æ˜¯ ä¸ å¯ èƒ½ ç›´ æ¥ å®š ä½ åˆ° æ ‘ ä¸Š çš„ ä»» ä¸€ ä¸ª ç»“ ç‚¹ å¯¹ è±¡ ã€‚</p>
<p>ä¸» è¦ æœ‰ ä¸€ å‰ æœ ç´¢ æ ‘ (binary-search)ã€ å¹³ è¡¡ äºŒ å‰ æ ‘ (balanced binary search). çº¢ é»‘ æ ‘ (red-black) ç­‰</p>
<p>ç”±äº çº¢ é»‘ æ ‘ ( å¹³ è¡¡ äºŒ åˆ æœ ç´¢ æ ‘ çš„ ä¸€ ç§ ) åœ¨ å…ƒç´  å®š ä½ ä¸Š çš„ ä¼˜ å¼‚ æ€§ èƒ½ (CO(logyW),STL é€š å¸¸ ä½¿ ç”¨ å®ƒ æ¥ å® ç° å…³ è” å¼ å®¹ å™¨</p>
<p>é¡ºåº å®¹ å™¨ ä¸» è¦ é‡‡ ç”¨ å‘ é‡ å’Œ é“¾ è¡¨ åŠ å…¶ ç»„ åˆ ä½œ ä¸º åŸº æœ¬ å­˜ å‚¨ ç»“ æ„ , å¦‚ å † æ ˆ å’Œ å„ ç§ é˜Ÿ åˆ—<br>
è€Œ å…³ è” å¼ å®¹ å™¨ é‡‡ ç”¨ å¹³ è¡¡ äºŒ å‰ æœ ç´¢ æ ‘ ä½œ ä¸º åº• å±‚ å­˜ å‚¨ ç»ª æ„</p>
<p>ç”± äº é¡º åº å®¹ å™¨ æœ¬ æ¥ å°± æœ‰ â€œ åº â€œ, æ‰€ ä»¥ å®ƒ æ˜¯ é€š è¿‡ å…ƒ ç´  å¯¹ è±¡ åœ¨ å®¹ å™¬ ä¸­ çš„ä½ ç½® æ¥æ ‡ è¯† ä¸€ ä¸ª å…ƒ ç´  çš„ ,<br>
è€Œ ä¸ æ˜¯ é€š è¿‡ å…ƒ ç´  çš„ å€¼ ( å›  ä¸º å®ƒ å¯ ä»¥ å­˜ å‚¨ å€¼ ç›¸ ç­‰ çš„ å¤š å…ƒ ç´  å¯¹ è±¡ , è€Œ ä¸” å®ƒ ä»¬ çš„ ä½ ç½® ä¸ ä¸€ å®š ç›¸ é‚» ),<br>
è¿™ ä¹Ÿ å°± æ˜¯ è°ƒ ç”¨ é¡º åº å®¹ å™¨ çš„ insert0 å‡½ æ•° å’Œ erase0 å‡½ æ•° æ—¶ å¿… é¡» æŒ‡ å®š æ’ å…¥ ä½ ç½® å’Œ åˆ  é™¤ ä½ ç½®<br>
è€Œ ä¸ èƒ½ ä»… æŒ‡ å®š å…ƒ ç´  å€¼ çš„ åŸ å›  .<br>
å½“ ç„¶ , å…³ è” å¼ å®¹ å™© ä¹Ÿ èƒ½ å­˜ å‚¨ å€¼ ç›¸ ç­‰ çš„ å…ƒ ç´  , æ¯” å¦‚ multimap å’Œ multiset ç­‰ ,<br>
ä½† æ˜¯ å®ƒ ä»¬ åœ¨ å®¹ å™¨ ä¸­ çš„ ä½ ç½® è‚¯ å®š æ˜¯ ç›¸ é‚» çš„</p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230603055357.png" alt></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (Container:iiterator first = theContainerObj.<span class="built_in">begin</span>(),</span><br><span class="line">fast = theContainerObj.<span class="built_in">end</span>(Q);</span><br><span class="line">first != last;</span><br><span class="line">++first) </span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; first-&gt;.,. &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; (*first)... &lt;&lt; endl;</span><br><span class="line">/</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Inputlterator, <span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Inputlterator, <span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function">Inputlterator <span class="title">find</span><span class="params">(Inputlterator first, Inputfterator last, <span class="type">const</span> T&amp; value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(first != last &amp;&amp; *first != value) ++first;</span><br><span class="line"><span class="keyword">return</span> first;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>hash table åŠ ç”± å®ƒ æ¼” åŒ– å‡º æ¥ çš„ hash_set/ hash_map/hash_ multiset/hash_multimap<br>
ä½œ ä¸º å…³ è” å¼ å®¹ ç£ åŠ  è¿›æ¥</p>
<p>STL å®¹ å™¨ é‡‡ ç”¨ æ‹· è´ æ–¹ å¼ æ¥ æ¥ æ”¶ å¾… æ’ å…¥ çš„ å…ƒ ç´  å¯¹ è±¡ ä¸€ ä¸€ åœ¨ æ’å…¥ çš„ æ—¶ å€™ å®¹ å™¨<br>
è‡ª åŠ¨ æ–° å»º ç­‰ é‡ çš„ å…ƒ ç´  å¯¹ è±¡ , å¹¶ ç”¨ å¾… æ’ å…¥ å¯¹ è±¡ ä¾ æ¬¡ åˆ å§‹ åŒ– å®ƒ ä»¬ ( è°ƒ ç”¨ æ‹· è´ æ„ é€  å‡½ æ•°</p>
<p>åœ¨ åˆ  é™¤ å…ƒ ç´  æ—¶ , å®¹ å™¨ è´Ÿ è´£ é‡Š æ”¾ å…¶ å†… å­˜ èµ„ æº ( å¯¹ æœ­ ç”¨ éš æœº å­˜ å‚¨ ç­– ç•¥ çš„ å®¹ å™¨ )<br>
æˆ–è€… ä»… ä»…è°ƒ ç”¨ å…ƒ ç´  çš„ æ æ„ å‡½ æ•° ( å¯¹ é‡‡ ç”¨ è¿ ç»­ å­˜ å‚¨ ç­– ç•¥ çš„ å®¹ å™¨</p>
<p>å¯¹ è±¡ ç±» å‹ ä¸€ èˆ¬ éœ€ è¦ ç¬¦ åˆ ä¸‹ è¿° è¦ æ±‚ , æ‰ èƒ½ å¤Ÿ ä½œ ä¸º STL å®¹ å™¨ çš„ å…ƒ ç´  ã€‚<br>
(1) å¯ é»˜ è®¤ æ„ é€  çš„ ã€‚ ä½† ä¸ æ˜¯ åœ¨ ä»» ä½• æƒ… å†µ ä¸‹ éƒ½ éœ€ è¦ æ»¡ è¶³ è¿™ ä¸€ æ¡ , æ¯” å¦‚ å…³ è” å¼ å®¹ å™¨ ,<br>
i å¯¹ äº é¡º åº å®¹ å™¨ , é™¤ é åœ¨ åˆ å§‹ åŒ– çš„ æ—¶ å€™ éœ€ è¦ æ’ å…¥ é»˜ è®¤ æ„ é€  çš„ è‹¥ å¹² ä¸ª å¯¹ è±¡ , æˆ– è€… è°ƒ ç”¨ å®¹<br>
| å™¨ çš„ resize0ã€assign0ã€insert0ç­‰ å‡½ æ•° çš„ èœ äº› ç‰ˆ æœ¬ , å¦ åˆ™ ä¹Ÿ ä¸ éœ€ è¦ æ»¡ è¶³ è¿™ â€“ æ¡ ã€‚<br>
(2)) å¯ æ‹· è´ æ„ é€  çš„ ã€‚<br>
(3) å¯ æ‹· è´ èµ‹ å€¼ çš„ ( ä½† ä¹Ÿ ä¸ æ˜¯ åœ¨ ä»» ä½• æƒ… å†µ ä¸‹ éƒ½ éœ€ è¦ )ã€‚<br>
è¿™ å‡  æ¡ æ¡ å¯¹ åŸº æœ¬ æ•° æ® ç±» å‹ åŠ ä¸ å« æŒ‡ é’ˆ æˆ å‘˜ å’Œ å¼• ç”¨ æˆ å‘˜ çš„ ç±» å‹ éƒ½ æ˜¯ é€‚ ç”¨ çš„ ã€‚<br>
(4) æˆ– è€… , å…· æœ‰ publicçš„ ã€ é‡‡ ç”¨ æ‹· è´ çš„ æ–¹ å¼ æ˜¾ å¼ å®š ä¹‰ çš„ æ‹· è´ æ„ é€  å‡½ æ•° ã€ æ‹· è´ èµ‹<br>
, å€¼ å‡½ æ•° å’Œ æ æ„ å‡½ æ•° ã€‚ è¿™ ä¸€ æ¡ é€‚ ç”¨ äº å« æœ‰ æŒ‡ é’ˆ æˆ å‘˜ æˆ– å¼• ç”¨ æˆ å‘˜ çš„ å¯¹ è±¡ ,<br>
ä½† æ¨¡ æ‹Ÿ æŒ‡ é’ˆ ( ä¾‹å¦‚ è¿­ ä»£ å™¨ ) åº” è¯¥ å½’ å…¥ å‰ é¢ å‡  æ¡ ä¸­</p>
<p>å¼• ç”¨ ä¸ èƒ½ ä½œ ä¸º STL å®¹ å™© çš„ å…ƒ ç´  ç±» å‹ :<br>
ç¬¬ ä¸€ , å¼•ç”¨ åœ¨åˆ› å»º æ—¶ å¿… é¡» åˆ å§‹ åŒ– ä¸º ä¸€ ä¸ª å…· ä½“ çš„ å¯¹ æ°¢ , è€Œ STL å®¹ å™¨ ä¸ èƒ½ æ»¡ å°¸ è¿™ ä¸€ è¦ æ±‚ ;<br>
ç¬¬ äºŒ , å¼• ç”¨ æ²¡ æœ‰ æ„ é€  å‡½ æ•° å’Œ æ æ„ å‡½ æ•° , æ›´ æ²¡ æœ‰ èµ‹ å€¼ è¯­ ä¹‰ .</p>
<h3 id="è¿­ä»£å™¨"><a class="header-anchor" href="#è¿­ä»£å™¨">ğŸŒ³</a>è¿­ä»£å™¨</h3>
<p>è¿­ ä»£ å™¨ æ˜¯ ä¸º äº† é™ ä½ å®¹ å™¨ å’Œ æ³› å‹ ç®— æ³• ä¹‹ é—´ çš„ ç³– åˆ æ€§ è€Œ è®¾ è®¡<br>
æŒ‡ é’ˆ ä»£ è¡¨ çœ  æ­£ çš„ å†… å­˜ åœ° å€ , å³ å¯¹ è±¡ åœ¨ å†… å­˜ ä¸­ çš„ å­˜ å‚¨ ä½ ç½® ;<br>
è€Œ è¿­ ä»£ å™¨ åˆ™ ä»£ è¡¨ å…ƒ ç´  åœ¨ å®¹ å™¨ ä¸­ çš„ ç›¸ å¯¹ ä½ ç½®<br>
( å½“ é“ å† å®¹ å‘½ çš„ æ—¶ å€™ , å…³ è” å¼ å®¹ å™¨ çš„ å…ƒ ç´  ä¹Ÿ å°± å…· æœ‰ äº† â€œ ç›¸ å¯¹ ä½ ç½® â€œ)ã€‚</p>
<p>vector, æ²¡ æœ‰ å¿… è¦ é‡ æ–° å®š ä¹‰ è¿­ ä»£ å™¨ ç±» å‹ , å…¶ å…ƒ ç´  ! çš„ æŒ‡ é’ˆ å°± å¯ ä»¥ ç›´ æ¥ å…… å½“ è¿­ ä»£ å™¨</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> T* iterator;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">const</span> T* iterator;</span><br></pre></td></tr></table></figure>
<p>é‡‡ ç”¨ ä¸ è¿ ç»­ å­˜ å‚¨ æˆ– å…¶ ä»– å­˜ å‚¨ æ–¹ å¼ çš„ å®¹ å™¨ , ä¾‹ å¦‚ ist. deque. set. map ç­‰ ,<br>
åˆ™ | éœ€ å®š ä¹‰ è‡ª å·± çš„ è¿­ ä»£ å™¨ ç±» (class), ä¸€ èˆ¬ æƒ… å†µ ä¸‹ å®ƒ ä»¬ æ˜¯ å¯¹ å…ƒ ç´  æŒ‡ é’ˆ çš„ å° è£… , å³ æ¨¡ æ‹Ÿ æŒ‡ é’ˆ</p>
<p>ä¸€ äº› ç‰¹ æ®Š å®¹ å™¨ å¦‚ <code>vector&lt;bool&gt;</code> å’Œ <code>bitset&lt;N&gt;</code> ç­‰ ,</p>
<p>è¾ƒ å…¸ å‹ çš„ ç®— æ³• å°± æ˜¯ distance å’Œ advanceã€‚ è¿™ æ–¹ é¢ çš„ çŸ¥ è¯† æ¶‰ åŠ åˆ° traits æŠ€æœ¯<br>
ä½¿ ç”¨ <code>vector&lt;int&gt;::iterator</code>, è€Œä¸æ˜¯<code>int*</code> è™½ç„¶å®ƒä»¬æ˜¯ç­‰ä»·çš„â€™,</p>
<h4 id="è¿­ä»£å™¨å¤±æ•ˆ"><a class="header-anchor" href="#è¿­ä»£å™¨å¤±æ•ˆ">ğŸŒ³</a>è¿­ä»£å™¨å¤±æ•ˆ</h4>
<p>è¿­ ä»£ å™¨ å¤± æ•ˆ æ˜¯ æŒ‡ å½“ <strong>å®¹ å™¨ åº• å±‚ å­˜ å‚¨ å‘ ç”Ÿ å˜ åŠ¨</strong> æ—¶ , åŸ æ¥ æŒ‡ å‘ å®¹ å™¨ ä¸­ æŸ ä¸ª æˆ– æŸ äº› å…ƒ ç´  çš„ è¿­ ä»£ å™¨<br>
ç”± äº å…ƒ ç´  çš„ å­˜ å‚¨ ä½ ç½® å‘ ç”Ÿ äº† æ”¹ å˜ è€Œ ä¸ å† æŒ‡ å‘ å®ƒ ä»¬ , ä» è€Œ æˆ ä¸º æ—  æ•ˆ çš„ è¿­ ä»£ å™¨ ã€‚ |<br>
ä½¿ ç”¨ æ—  æ•ˆ çš„ è¿­ ä»£ å™¨ å°± åƒ ä½¿ ç”¨ æ—  æ•ˆ çš„ æŒ‡ é’ˆ ( é‡ æŒ‡ é’ˆ ) ä¸€ æ · å± é™© ã€‚</p>
<p>å¼• èµ· å®¹ å™¨ å­˜ å‚¨ çš„ å˜ åŠ¨ å‘¢<br>
ä¸» è¦ æœ‰ : reserve(0ã€ resize(). push_back(), pop_back(). insert(). erase(). clear() ç­‰ å®¹ å™¨ æ–¹ æ³•<br>
å’Œ ä¸€ äº› æ³› å‹ ç®— æ³• , å¦‚ sort()ã€copy()ã€ replace()ã€remove()ã€unique(),<br>
ä»¥ åŠ é›† åˆ æ“ ä½œ ( å¹¶ ã€ äº¤ ã€ å·® ) ç®— æ³• ç­‰</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function">ã€Š</span></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; ages</span>; / æœª é¢„ ç•™ ç©º é—´</span><br><span class="line">ages.<span class="built_in">push_back</span>(<span class="number">2</span>); / å¼• èµ· å†… å­˜ é‡ åˆ† é…</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::const_iterator p = ages.<span class="built_in">begin</span>();</span><br><span class="line"><span class="keyword">for</span> Ginti=<span class="number">0</span>;i&lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">ages.<span class="built_in">push_back</span>(<span class="number">5</span>); / ä¼š å¼• èµ· è‹¥ å¹² æ¬¡ å†… å­˜ é‡ åˆ† é… æ“ ä½œ</span><br><span class="line">&#125;</span><br><span class="line">. cout &lt;&lt; â€œThe first age :â€œ&lt;&lt;*p &lt;&lt; endl: /p å·² ç» å¤± æ•ˆ , å± é™© !</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::const_iterator p = ages.<span class="built_in">begin</span>();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i= <span class="number">0</span>; i&lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">ages.<span class="built_in">push_back</span>(<span class="number">5</span>); / ä¼š å¼• èµ· è‹¥ å¹² æ¬¡ å†… å­˜ é‡ åˆ† é… æ“ ä½œ</span><br><span class="line">&#125;</span><br><span class="line">p = ages.<span class="built_in">begin</span>(); / é‡ æ–° è· å– è¿­ ä»£ å™¨</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;The first age : â€œ&lt;&lt; *p &lt;&lt; endl; å…« ok</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>
<p>å®¹ é‡ æ˜¯ ä¸º äº† å‡ å°‘ é‚£ äº› ä½¿ ç”¨ è¿ ç»­ ç©º é—´ ( çº¿ æ€§ ç©º é—´ ã€‹ å­˜ å‚¨ å…ƒ ç´  çš„ å®¹ å™¨ åœ¨ å¢ åŠ  å…ƒ ç´  æ—¶<br>
é‡ æ–° åˆ† é… å†… å­˜ çš„ æ¬¡ æ•° çš„ ä¸€ ç§ æœº åˆ¶ , å³ å½“ å¢ åŠ  å…ƒ ç´  ä¸” å‰© ä½™ ç©º é—² ç©º é—´ ä¸ è¶³ æ—¶ ,<br>
æŒ‰ç…§ ä¸€ å®š æ¯” ä¾‹ ( é€š å¸¸ æ˜¯ åŸ æ¥ å®¹ é‡ çš„ 2 æˆ– 1.5 å€ )<br>
<img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230603075716.png" alt></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">æˆ‘ ä»¬ å¯ ä»¥ ä» std::vector&lt;T&gt;çš„ size0å’Œ capacity0è¿™ ä¸¤ ä¸ª</span><br><span class="line">æˆ å‘˜ å‡½ æ•° çš„ å® ç° ä¸Š çœ‹ å‡º å®¹ å™¨ æ‰€ è¾– å…ƒ ç´  ç©º é—´ å’Œ å®¹ é‡ çš„ åŒº åˆ« :</span><br><span class="line"><span class="function">size_type <span class="title">capacity</span><span class="params">()</span> <span class="type">const</span></span>&#123; <span class="keyword">return</span> (start == <span class="number">0</span> ? <span class="number">0</span> : end_of_storage - start); &#125;</span><br><span class="line"><span class="function">size_type <span class="title">size</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> (start == (<span class="number">70</span>: finish - start); &#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="built_in">reserve</span>(size_type n);</span><br></pre></td></tr></table></figure>
<p>(1)) å¦‚ æœ n å¤§ äº å®¹ å™¨ ç° æœ‰ çš„ å®¹ é‡ ( å³ capacity0),<br>
åˆ™ éœ€ è¦ åœ¨ è‡ª ç”± å†… å­˜ åŒº ä¸º æ•´ ä¸ª å®¹ å™¨ é‡ æ–° åˆ† é… ä¸€ å— æ–° çš„ æ›´ å¤§ çš„ è¿ ç»­ ç©º é—´ , å…¶ å¤§ å° ä¸º n * sizeof (T),<br>
ç„¶ å å°† å®¹ å™¨ å†… æ‰€ æœ‰æœ‰ æ•ˆ å…ƒ ç´  ä» æ—§ ä½ ç½® å…¨ éƒ¨ æ‹· è´ åˆ° æ–° ä½ ç½® ( è°ƒ ç”¨ æ‹· è´ æ„ é€  å‡½ æ•° ),<br>
æœ€ å é‡Š æ”¾ æ—§ ä½ ç½® çš„ æ‰€ æœ‰å­˜ å‚¨ ç©º é—´ å¹¶ è°ƒ æ•´ å®¹ å™¨ å¯¹ è±¡ çš„ å…ƒ ç´  ä½ ç½® æŒ‡ ç¤º å™¨<br>
( å°± æ˜¯ è®© é‚£ ä¸‰ ä¸ª æŒ‡ é’ˆ æŒ‡ å‘ æ–° å†… å­˜ åŒº çš„ ç›¸ åº” ä½ ç½® )ã€‚<br>
ä¹Ÿ å°± æ˜¯ è¯´ , å¦‚ æœ è¯· æ±‚ å®¹ é‡ æ¯” åŸ æœ‰ å®¹ é‡ å¤§ çš„ è¯ , ç»“ æœ æ˜¯ å®¹ å™¨ çš„ å†— ä½™ å®¹ é‡ åŠ  å¤§<br>
(2) &lt;=n ä»€ä¹ˆéƒ½ä¸åš</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">std::list&lt;<span class="type">int</span>&gt; li;</span><br><span class="line">std::vector&lt;<span class="type">int</span>&gt; vi;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> Â¢ = <span class="number">0</span>; Â¢ &lt; <span class="number">10</span>; c++)</span><br><span class="line"><span class="built_in">lipush_back</span> (c);</span><br><span class="line">vi.<span class="built_in">reserve</span>(li.<span class="built_in">size</span>());<span class="comment">// é¢„ ç•™ ç©º é—´ , ä½† æ˜¯ å¹¶ æ²¡ æœ‰ æ”¹ å˜ å®¹ å™¨ çš„ å¤§ å° , é¢„ ç•™ ç©º é—´ æœª åˆ å§‹ åŒ–</span></span><br><span class="line">std::<span class="built_in">copy</span> (libegin0, liendO vi.<span class="built_in">begin</span>()); / æ‹· è´èµ‹ å€¼</span><br><span class="line">std::<span class="built_in">copy</span> (vi-<span class="built_in">begin</span>(), vi.<span class="built_in">end</span>(), std::<span class="built_in">ostream_iterator</span>&lt;<span class="type">int</span>&gt;(std::cerr, <span class="string">&quot;\t&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®ä½¿ç”¨æ–¹æ³•</span></span><br><span class="line">vi.<span class="built_in">reserve</span> (li.<span class="built_in">size</span>()); <span class="comment">// é¢„ç•™ ç©º é—´ , ä½† æ˜¯ å¹¶ æ²¡ æœ‰ æ”¹ </span></span><br><span class="line">std::<span class="built_in">copy</span>(t.beginO, <span class="built_in">liend</span>(), std::<span class="built_in">back_inserter</span>(vi));</span><br></pre></td></tr></table></figure>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230603081048.png" alt></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">resize</span><span class="params">(size type n, <span class="type">const</span> T&amp; c = T())</span></span>;</span><br></pre></td></tr></table></figure>
<p>å…¶ ä¸­ n å°± æ˜¯ æœ€ å è¦ ä¿ æŒ çš„ å…ƒ ç´  ä¸ª æ•° , å¦‚ æœ éœ€ è¦ æ–° å¢ å…ƒ ç´  çš„ è¯ ,c åˆ™ æ˜¯ æ–° å¢ å…ƒ ç´  çš„ é»˜ è®¤<br>
å£¹ åˆ å§‹ å€¼ ã€‚ ä¸‹ é¢ æ˜¯ resize()çš„ å® ç° ç­– ç•¥ ã€‚<br>
(1) å¦‚ æœ n å¤§ äº å®¹ å™¨ å½“ å‰ çš„ å¤§ å° ( å³ size0), åˆ™ åœ¨ å®¹ å™¨ çš„ æœ« å°¾ æ’ å…¥ ( è¿½åŠ  ) n<br>
size0ä¸ª åˆ å€¼ ä¸º c çš„ å…ƒ ç´  , å¦‚ æœ ä¸ æŒ‡ å®š åˆ å€¼ , åˆ™ ç”¨ å…ƒ ç´  ç±» å‹ çš„ é»˜ è®¤ æ„ é€  å‡½ æ•° æ¥ åˆ å§‹ åŒ–<br>
æ¯ä¸€ ä¸ª æ–° å…ƒ ç´  ã€” è¿™ å¯ èƒ½ å¼• èµ· å†… å­˜ é‡ åˆ† é… ä»¥ åŠ å®¹ å™¨ å®¹ é‡ çš„ æ‰© å¼  )ã€‚<br>
(2) å¦‚ æœ n å° äº å®¹ å™¨ å½“ å‰ çš„ å¤§ å° , åˆ™ ä» å®¹ å™¨ çš„ æœ« å°¾ åˆ  é™¤ size 0 ~ n ä¸ª å…ƒ ç´  ,<br>
ä½†i <strong>ä¸ é‡Š æ”¾ å…ƒ ç´  æœ¬ èº« çš„ å†… å­˜ ç©º é—´</strong>, å›  æ­¤ å®¹ é‡ ä¸ å˜ ã€‚<br>
(3) å¦ åˆ™ , ä»€ ä¹ˆ ä¹Ÿ ä¸ åš</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">td::list&lt;<span class="type">int</span>&gt; ã€‚ æ­¢ ;</span><br><span class="line">std::vector&lt;<span class="type">int</span>&gt; vi;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> c = <span class="number">0</span>; c &lt; <span class="number">10</span>; c++)</span><br><span class="line">li.<span class="built_in">push_back</span> (c);</span><br><span class="line">vi-<span class="built_in">resize</span>(li.<span class="built_in">size</span>(); / è°ƒ æ•´ å®¹ å™¨ å¤§ å°</span><br><span class="line">std::<span class="built_in">copy</span> (li-<span class="built_in">begin</span>(), li.<span class="built_in">end</span>(), vi-<span class="built_in">begin</span>()); UMA</span><br><span class="line">std::<span class="built_in">copy</span> (vi-<span class="built_in">begin</span>(), vi.<span class="built_in">end</span>(), std::<span class="built_in">ostream_iterator</span>&lt;<span class="type">int</span>&gt;(std::cerr, <span class="string">&quot;\t&quot;</span>));</span><br></pre></td></tr></table></figure>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230603081829.png" alt></p>
<p>å‹ ç¼© å®¹ å™¨çš„ å¤š ä½™ å®¹ é‡ ä» è€Œ èŠ‚ çœ å­˜ å‚¨ ç©º é—´</p>
 <figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"> std::vector&lt;<span class="type">int</span>&gt; â€” vi;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> c = <span class="number">0</span>; c &lt; <span class="number">10</span>; c++)</span><br><span class="line">vi.<span class="built_in">push_back</span> (c);</span><br><span class="line">std::<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(vi).<span class="built_in">swap</span>(vi); W æ„ é€  ä¸€ ä¸ª ä¸´ æ—¶ å¯¹ è±¡ , ç„¶ å ä¸ ä¹‹ äº¤ æ¢ å…ƒ ç´ </span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">ç¤ºä¾‹ <span class="number">17</span><span class="number">-7</span> ä¸€ ä¸ª å›º å®š å®¹ é‡ çš„ å¾ª ç¯ é˜Ÿ </span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T <span class="comment">/* å…ƒ ç´  ç±» å‹ */</span> , <span class="type">unsigned</span> <span class="type">int</span> N <span class="comment">/* å®¹ é‡ */</span> &gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CyclicQueue</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="keyword">typedef</span> T value_type;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">size_t</span> size_type;</span><br><span class="line"><span class="keyword">typedef</span> T&amp; reference;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">const</span> T&amp; const_reference;</span><br><span class="line"><span class="built_in">CyclicQueue</span>() : <span class="built_in">m_popPos</span>(<span class="number">0</span>), <span class="built_in">m_count</span>(<span class="number">0</span>) &#123;</span><br><span class="line"><span class="built_in">assert</span>(N &gt; <span class="number">0</span>);</span><br><span class="line">m_beginPtr = (T*)(::<span class="keyword">operator</span> <span class="built_in">new</span>(<span class="built_in">sizeof</span>(T) * N)); / åˆ† é… åŸ å§‹ ç©º é—´</span><br><span class="line">&#125; ã€‚</span><br><span class="line">~<span class="built_in">CyclicQueue</span>() &#123;</span><br><span class="line">_Clear(); <span class="comment">// this-&gt;_Clear(Q);</span></span><br><span class="line"><span class="function"><span class="keyword">operator</span> <span class="title">delete</span><span class="params">((<span class="type">void</span>*)m_beginPtr)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">CyclicQueue</span>(<span class="type">const</span> CyclicQueue&lt;T, N&gt;&amp; copy) : <span class="built_in">m_popPos</span>(<span class="number">0</span>), <span class="built_in">m_count</span>(<span class="number">0</span>) &#123;</span><br><span class="line"><span class="built_in">assert</span>(N &gt; <span class="number">0</span>);</span><br><span class="line">m_beginPtr = (T*)(<span class="keyword">operator</span> <span class="built_in">new</span>(<span class="built_in">sizeof</span>(T) * N)); / åˆ† é… åŸ å§‹ ç©º é—´</span><br><span class="line"><span class="type">size_t</span> copyPos = copy.m_popPos;</span><br><span class="line"><span class="keyword">for</span> (size_type idx = <span class="number">0</span>; idx &lt; copy.m_count; ++idx) ã€</span><br><span class="line">_Copy(idx, copy.m_beginPtr[copyPos&#125;); <span class="comment">// this-&gt;_Copy0Q;</span></span><br><span class="line">++copyPos; copyPos %= N; ++m_count;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">CyclicQueue&amp; <span class="keyword">operator</span>=(<span class="type">const</span> CyclicQueue&lt;T, N&gt;&amp; other) &#123;</span><br><span class="line">CyclicQueue&lt;T, N&gt; <span class="built_in">temp</span>(other); W è°ƒ ç”¨ æ‹· è´ æ„ é€  å‡½ æ•°</span><br><span class="line"><span class="built_in">swap</span>(temp); [ff <span class="keyword">this</span>-&gt;swapQ);</span><br><span class="line"><span class="keyword">return</span> (*<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">is_empty</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> (m_count == <span class="number">0</span>); &#125;</span><br><span class="line"><span class="type">bool</span> isfulO <span class="type">const</span> &#123; <span class="keyword">return</span> (m_count == N); &#125;</span><br><span class="line"><span class="function">value_type <span class="title">front</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">assert</span>(m_count != <span class="number">0</span>);</span><br><span class="line"><span class="keyword">return</span> (m_beginPtr[m_popPos&#125;);</span><br><span class="line">&#125; .</span><br><span class="line"><span class="function">value_type <span class="title">front</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line"><span class="built_in">assert</span>(m_count != <span class="number">0</span>);</span><br><span class="line"><span class="keyword">return</span> (m_beginPtr[m_popPos]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">value_type <span class="title">back</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">assert</span>(m_count != <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">size_type pushPos = (m_popPos + m_count) % N;</span><br><span class="line"><span class="keyword">if</span> (pushPos== <span class="number">0</span>)</span><br><span class="line"><span class="keyword">return</span> (*(m_beginPtr + N - <span class="number">1</span>));</span><br><span class="line"><span class="keyword">return</span> (m_beginPtr[pushPos - <span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line">) <span class="function">value_type <span class="title">back</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line"><span class="built_in">assert</span>(m_count &#123;= <span class="number">0</span>);</span><br><span class="line">size_type pushPos = (m_popPos + m_count) % N;</span><br><span class="line"><span class="keyword">if</span> (pushPos == <span class="number">0</span>)</span><br><span class="line"><span class="keyword">return</span> (*(m_beginPtr + N - <span class="number">1</span>);</span><br><span class="line"><span class="built_in">return</span> (m_beginPtr[pushPos - <span class="number">1</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line">; <span class="type">bool</span> <span class="built_in">push</span>(const_reference data = TO) &#123;</span><br><span class="line">| <span class="keyword">if</span> (m_count &lt;N) t / ä¸ æ»¡ !</span><br><span class="line">size_type pushPos = (m_popPos + m_count) % N;</span><br><span class="line">i _Copy(pushPos, data); /! <span class="keyword">this</span>-&gt;_CopyQ;</span><br><span class="line">++m_count;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">)</span><br><span class="line">) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">) <span class="function"><span class="type">bool</span> <span class="title">pop</span><span class="params">(reference data)</span> </span>&#123;</span><br><span class="line">| <span class="keyword">if</span> (m_count &gt; <span class="number">0</span>) &#123; ä¸« ä¸ å®‡ !</span><br><span class="line">data = m_beginPtr[m_popPos]; /f <span class="keyword">operator</span>=</span><br><span class="line">å½— _Destroy(m_popPos); <span class="comment">// this-&gt;_Destroy(Q);</span></span><br><span class="line">--m_count; ++m_popPos; m_popPos %= N; / æ–° çš„ pop ä½ ç½®</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">size_type <span class="title">size</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> m_count; &#125;</span><br><span class="line"><span class="function">size_type <span class="title">capacity</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> N; &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;_Clear(); &#125; / <span class="keyword">this</span>-&gt;_Clear();</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(CyclicQueue&lt;T, N&gt;&amp; other)</span> </span>&#123;</span><br><span class="line">std::<span class="built_in">swap</span>(m_beginPtr, other.m_beginPtr);</span><br><span class="line">std::<span class="built_in">swap</span>(m_popPos, other.m_popPos);</span><br><span class="line">std::<span class="built_in">swap</span>(m_count, other.m_count);i|</span><br><span class="line">i</span><br><span class="line"><span class="string">&#x27; &#125;</span></span><br><span class="line"><span class="string">i</span></span><br><span class="line"><span class="string">ii private:</span></span><br><span class="line"><span class="string">void Clear() &#123;</span></span><br><span class="line"><span class="string">for (; m_count &gt; 0; --m_count) &#123;</span></span><br><span class="line"><span class="string">_Destroy(m_popPos); H this-&gt;_Destroy();</span></span><br><span class="line"><span class="string">| ++m_popPos; m_popPos %= N;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">m_popPos = 0;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">void _Destroy(sizetype idx) &#123;</span></span><br><span class="line"><span class="string">assert(idx &lt; NJ;</span></span><br><span class="line"><span class="string">T *pTemp = (m_beginPtr + idx);</span></span><br><span class="line"><span class="string">pTemp-&gt;~TQ; W è°ƒ ç”¨ æ æ„ å‡½ æ•° é”€ æ¯ å…ƒ ç´  å¯¹ è±¡</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">void _Copy(size_type idx, const_reference data) &#123;</span></span><br><span class="line"><span class="string">assert(idx &lt; N);</span></span><br><span class="line"><span class="string">T *pTemp = (m_beginPtr + idx);</span></span><br><span class="line"><span class="string">new ((void*)pTemp) T(data); // è°ƒ ç”¨ placement new å’Œ æ‹· è´ æ„ é€  å‡½ æ•° æ‹· è´ å¯¹ è±¡</span></span><br><span class="line"><span class="string">| &#125;|</span></span><br><span class="line"><span class="string">| value_type *m_beginPtr; / é˜Ÿ åˆ— å­˜ å‚¨ ç©º é—´ èµ· å§‹ ä½ ç½®</span></span><br><span class="line"><span class="string">size_type m_popPos; / ä¸‹ æ¬¡ pop ä½ ç½®</span></span><br><span class="line"><span class="string">| size_type m_count; / æœ‰ æ•ˆ å…ƒ ç´« ä¸ª æ•°</span></span><br><span class="line"><span class="string">&#125;;</span></span><br></pre></td></tr></table></figure>
<p><strong>å°½ é‡ ä¸ è¦ åœ¨ é“ å† å®¹ å™¨ çš„ è¿‡ ç¨‹ ä¸­ ä¹‰ å®¹ å™¨ è¿› è¡Œ æ’ å…¥ å…ƒ ç´  ã€ åˆ é™¤ å…ƒ ç´  ç­‰ ä¿® æ”¹ æ“ä½œ ,</strong><br>
è¿™ å’Œ ä¸ è¦ åœ¨ for å¾ª ç¯ ä¸­ ä¿® æ”¹ è®¡ æ•° å™¨ æ˜¯ ä¸€ ä¸ª é“ ç† , ç‰¹ åˆ« æ˜¯ è¿ ç»­ å­˜ å‚¨ çš„ å®¹å™¨ ä¸­ ã€‚<br>
å›  ä¸º è¿™ äº› æ“ ä½œ ä¼š ä½¿ ä¸€ äº› è¿½ ä»£ å™¨ å¤± æ•ˆ , ç‰¹ åˆ« æ˜¯ å½“ å‰ é€‰ ä»£ å™¨ , è¿™ åœ¨ æ•ˆæœ ä¸Š ç­‰ ä»· äº ä¿® æ”¹ äº† å¾ª ç¯ è®¡ æ•° å™¨ ã€‚<br>
æ›´ è¿› ä¸€ æ­¥ çš„ åŸ å›  æ˜¯ ä¸‹ ä¸€ æ¬¡ è¿­ ä»£ æ“ ä½œ , å³++iterator ä¼š ä½¿ ç”¨ æœ¬ æ¬¡ é€‰ ä»£ æ“ ä½œ çš„ é€‰ ä»£ å™¨ ,<br>
è€Œ å½“ å‰ è¿­ ä»£ å™¨ å¯ èƒ½ å·² ç» å¤± æ•ˆ</p>
<p>è™½ç„¶ æœ‰ äº› å®¹ å™¨ å¦‚ list, ä¿® æ”¹ æ“ ä½œ åª ä¼š ä½¿ å½“ å‰ é€‰ ä»£ å™¨ å¤± æ•ˆ , å³ å¹¶ ä¸ ä¼š å¼• èµ· å­˜å‚¨ ç©º é—´ é‡ åˆ† é… ,<br>
æ‰€ ä»¥ å¯ ä»¥ åœ¨ é‚‹ å† çš„ è¿‡ ç¨‹ ä¸­ æ­£ ç¡® åœ° åˆ  é™¤ å½“ å‰ å…ƒ ç´  ( è¿™ é‡Œ é¢æœ‰ä¸€ ä¸ª æŠ€ å·§ ),<br>
ä½† æ˜¯ ä¹Ÿ æœ€ å¥½ ä¸ è¦ è¿™ æ · åš , å¦ åˆ™ å¯ èƒ½ å­˜ åœ¨ é‡ å¤§ éš æƒ  . å‚ è§ listç­‰ çš„ remove(). remove_if() æˆ å‘˜ å‡½ æ•° çš„ å® ç°</p>
<h3 id="å­˜å‚¨åˆ†é…å™¨"><a class="header-anchor" href="#å­˜å‚¨åˆ†é…å™¨">ğŸŒ³</a>å­˜å‚¨åˆ†é…å™¨</h3>
<p>allocatorç±» æ˜¯ ä¸€ ä¸ª æ¨¡ æ¿ , ä½œ ä¸º å®¹ å™¨ ç±» æ¨¡ æ¿ çš„ ä¸€ ä¸ª policy å‚ æ•° , å®ƒ ä¸ ä»… ä¸ å°† è¦ ä¸º ä¹‹<br>
åˆ† é… ç©º é—´ çš„ æ•° æ® å¯¹ è±¡ çš„ ç±» å‹ æ—  å…³ , å¹¶ ä¸” ä¸º åŠ¨ æ€ å†… å­˜ çš„ åˆ† é… å’Œ é‡Š æ”¾ æ ä¾› äº† é¢ å‘ å¯¹ è±¡ çš„<br>
æ¥ å£ ã€‚ å®ƒ æ˜¯ å¯¹ new è¿ ç®— ç¬¦ çš„ æ›´ é«˜ å±‚ æ¬¡ çš„ æŠ½ è±¡ , å³ éš è— äº† åº• å±‚ çš„ å†… å­˜ æ¨¡ å¼ ã€” æ®µ å†… å­˜ ã€<br>
! å…±äº« å†… å­˜ ã€ åˆ† å¸ƒ å¼ å†… å­˜ ç­‰ ), å° è£… äº† åŠ¨ æ€ å†… å­˜ åˆ† é… å’Œ é‡Š æ”¾ æ“ ä½œ , éš è— äº† æŒ‡ é’ˆ æœ¬ èº« çš„ å¤§<br>
| å° ã€ å­˜ å‚¨ ç©º é—´ é‡ åˆ† é… æ¨¡ å‹ åŠ å†… å­˜ é¡µ å¤§ å° ç­‰ ç»† èŠ‚ , æ ä¾› äº† æ›´ å¥½ çš„ å¯ ç§» æ¤ æ€§ ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">ç¤ºä¾‹<span class="number">17</span><span class="number">-8</span>  COM ç¯ å¢ƒ ä¸‹ STL å®¹ å™¨ çš„ allocator å® </span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> _Ty&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">STLCOMAllocator</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">size_t</span> size_type;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">ptrdiff_t</span> difference_type;</span><br><span class="line"><span class="keyword">typedef</span> _Ty value_type;</span><br><span class="line"><span class="keyword">typedef</span> _Ty* pointer;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">const</span> _Ty* const_pointer;</span><br><span class="line"><span class="keyword">typedef</span> _Ty&amp; reference;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">const</span> _Ty&amp; const_reference;</span><br><span class="line"><span class="function">pointer <span class="title">address</span><span class="params">(reference ref)</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> (&amp;ref); &#125;</span><br><span class="line"><span class="function">const_pointer <span class="title">address</span><span class="params">(const_reference ref)</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> (&amp;ref); &#125;</span><br><span class="line"><span class="function">_Ty* <span class="title">allocate</span><span class="params">(size_type n, <span class="type">const</span> <span class="type">void</span>* <span class="comment">/* no use */</span> )</span></span></span><br><span class="line"><span class="function">çš‡ </span>&#123; <span class="keyword">return</span> (pointer)(::<span class="built_in">CoTaskMemAlloc</span>(n * <span class="built_in">sizeof</span>(_Ty))); &#125; <span class="comment">// aligned!</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">deallocate</span><span class="params">(<span class="type">void</span> *p, size_type <span class="comment">/* no use */</span> )</span></span></span><br><span class="line"><span class="function"></span>&#123; ::<span class="built_in">CoTaskMemFree</span>(p); </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">construct</span><span class="params">(pointer p, <span class="type">const</span> Ty&amp; v)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (p != <span class="literal">NULL</span>) <span class="keyword">new</span> ((<span class="type">void</span>*)p)_Ty(v); <span class="comment">// placement new &amp; copy constructor</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">destroy</span><span class="params">(pointer p)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (p != <span class="literal">NULL</span>) p-&gt;~_TyQ; <span class="comment">// destructor</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function">size_type <span class="title">max_size</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">size_type sz = (size_type)(<span class="number">-1</span>) / <span class="built_in">sizeof</span>(_ Ty);</span><br><span class="line"><span class="keyword">return</span> (<span class="number">0</span> &lt; sz? sz: <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Ty, <span class="keyword">typename</span> _U&gt; <span class="keyword">inline</span></span><br><span class="line"><span class="type">bool</span> __stdcall <span class="keyword">operator</span> ==(<span class="type">const</span> STLCOMAllocator&lt;_Ty&gt;&amp;,</span><br><span class="line"><span class="type">const</span> STLCOMAllocator&lt;_U&gt;&amp;)</span><br><span class="line">&#123; <span class="built_in">return</span> (<span class="literal">true</span>); &#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Ty, <span class="keyword">typename</span> _U&gt; <span class="keyword">inline</span></span><br><span class="line"><span class="type">bool</span> __stdcall <span class="keyword">operator</span> !=(<span class="type">const</span> STLCOMAIlocator&lt;_Ty&gt;&amp;,</span><br><span class="line"><span class="type">const</span> STLCOMAIlocator&lt;_U&gt;&amp;)</span><br><span class="line">&#123; <span class="built_in">return</span> (<span class="literal">false</span>); </span><br></pre></td></tr></table></figure>
<h3 id="é€‚é…å™¨-å®¹å™¨é€‚é…å™¨-stack-deque-list"><a class="header-anchor" href="#é€‚é…å™¨-å®¹å™¨é€‚é…å™¨-stack-deque-list">ğŸŒ³</a>é€‚é…å™¨ å®¹å™¨é€‚é…å™¨ stack deque list</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iterator&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt; li;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; <span class="number">10</span>; k<span class="number">+4</span>) &#123;</span><br><span class="line">li.<span class="built_in">push_back</span>(k);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">copy</span>(li.<span class="built_in">begin</span>(), li.endQ, ostream _iterator&lt;<span class="type">int</span>&gt;(cout, <span class="string">&quot; &quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt; list ;</span><br><span class="line">istream_iterator&lt;<span class="type">int</span>&gt; eos, <span class="built_in">isiter</span>(cin);</span><br><span class="line"><span class="built_in">copy</span>(isiter, eos, <span class="built_in">back_inserter</span>(li));</span><br><span class="line"><span class="built_in">copy</span>(li.<span class="built_in">begin</span>(),li.<span class="built_in">end</span>(), <span class="built_in">ostream_iterator</span>&lt;<span class="type">int</span>&gt;(cout,<span class="string">&quot;&quot;</span>));</span><br></pre></td></tr></table></figure>
<h3 id="æ³›å‹ç®—æ³•"><a class="header-anchor" href="#æ³›å‹ç®—æ³•">ğŸŒ³</a>æ³›å‹ç®—æ³•</h3>
<p>STL æ ä¾› çš„ æ³› å‹ ç®— æ³• ä¸» è¦ æœ‰ å¦‚ ä¸‹ å‡  ç§ ;</p>
<blockquote>
<p>â€œ æŸ¥ æ‰¾ ç®— æ³• , å¦‚ find0ã€search0ã€binary search()ã€find_if0ç­‰ ã€‚<br>
ä»Š â€œ æ’ åº ç®— æ³• , å¦‚ sort)ã€merge0ç­‰ ã€‚<br>
ä» â€œ æ•° å­¦ è®¡ ç®— , å¦‚ accumulate0ã€inner product0ã€partial sum0 ç­‰ ã€‚</p>
</blockquote>
<ul>
<li>â€œ é›†åˆ è¿ ç®— , å¦‚ set_union0ã€set_intersection0ã€includes0ç­‰ ã€‚</li>
<li>â€œå®¹å™¨ ç®¡ ç† , å¦‚ copy0ã€replace0ã€transform0ã€remove()ã€for each() ç­‰ ã€‚</li>
</ul>
<blockquote>
<p>â€œ ç»Ÿ è®¡ è¿ ç®— , å¦‚ max(0Oã€min0ã€count0ã€max_element0ç­‰ ã€‚<br>
ä»Š â€œ å † ç®¡ ç† , å¦‚ make_heap()ã€push_heap0ã€pop_ heap(). sort_heap().<br>
â€œ æ¯” è¾ƒ è¿ ç®— , å¦‚ equal0ç­‰</p>
</blockquote>
<p>æ³› å‹ ç®— æ³• ä¸€ èˆ¬ æ¥ å— ä¸‹ åˆ— å‚ æ•° ç±» å‹ çš„ ä¸€ ç§ æˆ– å‡  ç§<br>
â€œ è¿­ ä»£ å™¨ , æ ‡ ç¤º å®¹ å™¨ æˆ– åŒº é—´ çš„ èŒƒ å›´ , ä»¥å€¼ ä¼  é€’ ã€‚<br>
ä» â€œ è°“ è¯ , è¿” å› bool å€¼ çš„ å‡½ æ•° å¯¹ è±¡ , æŒ‡ å®š ç®— æ³• çš„ æ“ ä½œ æ–¹ å¼ , ä¾‹ å¦‚ find_if0çš„ ç¬¬ ä¸‰<br>
ä¸ª å‚ æ•° ã€‚<br>
ä» å‡½ æ•° å¯¹ è±¡ , ç”¨ æˆ· æŒ‡ å®š è¦ åš çš„ æ“ ä½œ , ä¾‹ å¦‚ for_ each(0)çš„ ç¬¬ ä¸‰ ä¸ª å‚ æ•° ã€‚<br>
ä»Š â€œ å®¹å™¨ å…ƒ ç´  , ç”¨ æˆ· æŒ‡ å®š çš„ åŸº å‡† å¯¹ è±¡ , ä¾‹ å¦‚ find0çš„ ç¬¬ ä¸‰ ä¸ª å‚ æ•°</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Template&lt;<span class="keyword">typename</span> Inputlterator, <span class="keyword">typename</span> Outputlterator&gt; <span class="keyword">inline</span></span></span><br><span class="line"><span class="function">Outputlterator <span class="title">copy</span><span class="params">(Inputlterator first, InputIterator last, Outputlterator oi)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(; first != last; ++first, ++oi)</span><br><span class="line">	*oi = *first;</span><br><span class="line">	<span class="keyword">return</span> Oi;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt; i; vector&lt;<span class="type">int</span>&gt; vi;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> c = <span class="number">0</span>; c&lt; <span class="number">10</span>; c++) li.<span class="built_in">push_back</span>(c);</span><br><span class="line">vi.<span class="built_in">resize</span>(li.<span class="built_in">size</span>());</span><br><span class="line"><span class="built_in">copy</span>(libeginO, liendO, vi.<span class="built_in">begin</span>()); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt; i; vector&lt;<span class="type">int</span>&gt; vi;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> c = <span class="number">0</span>; c&lt; <span class="number">10</span>; c++) li.<span class="built_in">push_back</span>(c);</span><br><span class="line">/ æ‹· è´ é“¾ è¡¨ å…ƒ ç´  åˆ° vi ä¸­ , ä½¿ ç”¨ æ’ å…¥ è¿­ ä»£ å™¨</span><br><span class="line"><span class="built_in">copy</span>(<span class="built_in">libegin</span>(, li.endQ), <span class="built_in">back_inserter</span>(vi)); / è°ƒ ç”¨ vi.<span class="built_in">push_back</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¾ƒ å¤š æ³› å‹ ç®— æ³• æ€» æ˜¯ å‡ å®š å®¹ å™¨ çš„ å…ƒ ç´  ç±» å‹ å®š ä¹‰ äº† operator-(ã€operatorâ€“0ã€ operatorl=()ã€operator&lt;() æˆ– operator&gt;() ç­‰ å‡½ æ•° , å›  æ­¤ ä½  æœ‰ ä¹‰ åŠ¡ ä¸º ä½  çš„ å®¶ å™¨ å…ƒ ç´  ç±» å‹ å®š ä¹‰ å®ƒ ä»¬ , å¦ åˆ™ æ³› å‹ ç®— æ³• å°† é‡‡ ç”¨ å…ƒ ç´  ç±» å‹ çš„ é»˜ è®¤ è¯­ ä¹‰ æˆ– è€… æŠ¥ é”™ã€‚</p>
<p>åœ¨ åº” ç”¨ ç¼– ç¨‹ æ—¶ è¦ é€‰ ç”¨ æœ€ åˆ é€‚ çš„ ç®—æ³•<br>
,find0 ç®— æ³• çš„ å¤ æ‚ åº¦ ä¸º O(, è€Œ binary seareh0 ç®— æ³• çš„ å¤ æ‚ åº¦ ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mn>2</mn><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(log{2}N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord">2</span></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>å½“ å®¹ å™¨ ä¸­ çš„ å…ƒ ç´  æœ‰ åº æ—¶ , å½“ ç„¶ åº” é€‰ ç”¨ binary seareh0ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">ç¤ºä¾‹ <span class="number">17</span><span class="number">-15</span> åŸº äº STL æ¡† æ¶ å® ç° çš„ â€œ æŠ˜ åŠ â€œ æŸ¥æ‰¾ ç®—æ³•</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> RandomAccessIterator, <span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function">RandomAccessIterator <span class="title">binary_search</span><span class="params">(RandomAccesslterator first,</span></span></span><br><span class="line"><span class="params"><span class="function">RandomAccesslterator last,</span></span></span><br><span class="line"><span class="params"><span class="function"><span class="type">const</span> T&amp; value)</span></span></span><br><span class="line"><span class="function">RandomAccesslterator mid, not_found </span>= last;</span><br><span class="line"><span class="keyword">while</span> (first != last) &#123;</span><br><span class="line">mid = first + (last - frst) / <span class="number">2</span>:; / æ³¨ æ„ : ä¸æ˜¯ (first + last) / <span class="number">2</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">L</span>(value &lt; *mid) &amp;&amp; !(*mid &lt; value))</span><br><span class="line"><span class="keyword">return</span> mid; /! è°ƒ ç”¨ T::<span class="keyword">operator</span>&lt;()</span><br><span class="line"><span class="keyword">if</span> (value &lt; *mid)</span><br><span class="line">last = mid; <span class="comment">// è°ƒ ç”¨ T::operator&lt;()</span></span><br><span class="line"><span class="keyword">else</span> first = mid + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> not_found;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¸€äº›ç‰¹æ®Šå®¹å™¨"><a class="header-anchor" href="#ä¸€äº›ç‰¹æ®Šå®¹å™¨">ğŸŒ³</a>ä¸€äº›ç‰¹æ®Šå®¹å™¨</h3>
<h3 id="string-ç±»"><a class="header-anchor" href="#string-ç±»">ğŸŒ³</a>string ç±»</h3>
<h3 id="bitset-å¹¶éset"><a class="header-anchor" href="#bitset-å¹¶éset">ğŸŒ³</a>bitset å¹¶éset</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="type">size_t</span> Length&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">bitset</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">reference</span>&#123; ... &#125;; / å¯ ä»¥ è‡ª åŠ¨ è½¬ æ¢ ä¸º <span class="type">bool</span> å˜ é‡</span><br><span class="line"><span class="comment">// constructors...</span></span><br><span class="line">Hf accessors...</span><br><span class="line"><span class="comment">// rautators...</span></span><br><span class="line"><span class="comment">// convertors...</span></span><br><span class="line"><span class="comment">// statistics...</span></span><br><span class="line"><span class="comment">// test...</span></span><br><span class="line">I &amp;=, |=, *=, &lt;&lt;=, &gt;&gt;=, &gt;&gt;, &lt;&lt;, ==, !=, ~ overloading...</span><br><span class="line">/ &lt;&lt;(output), &gt;&gt;(input), &amp;, |, ^ <span class="keyword">friend</span> overloading...</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="keyword">enum</span> &#123;</span><br><span class="line">WORD BITS = <span class="built_in">sizeof</span>(<span class="type">unsigned</span> <span class="type">long</span>) * <span class="number">8</span>, / WORD çš„ bit æ•°</span><br><span class="line">N_WORD= ( Length== <span class="number">0</span> ? <span class="number">0</span> : (Length - <span class="number">1</span>) /,WORD_BITS )</span><br><span class="line"><span class="comment">// Length ä¸ª bit æŠ˜ åˆ å¤š å°‘ ä¸ª WORD</span></span><br><span class="line">å‡º</span><br><span class="line"><span class="type">unsigned</span> <span class="type">long</span> array[N_WORD + <span class="number">1</span>]; <span class="built_in">ABBA</span> ( ä¸ èƒ½ å®š ä¹‰ é•¿ åº¦ ä¸º <span class="number">0</span> çš„ æ•° ç»„ )</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230603090456.png" alt></p>
<h3 id="vector-bool"><a class="header-anchor" href="#vector-bool">ğŸŒ³</a><code>vector&lt;bool&gt;</code></h3>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230603091045.png" alt></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">typedef</span> vector&lt;<span class="type">bool</span>&gt; BoolVector; <span class="comment">// vector&lt;bool&gt;çš„ å…· ä½“ å å­— ä¸ STL å®ç° æœ‰ å…³</span></span><br><span class="line">BoolVector bvect;</span><br><span class="line">bvect.<span class="built_in">reserve</span>(<span class="number">100</span>);</span><br><span class="line"><span class="keyword">for</span> (inti = <span class="number">0</span>; i &lt; <span class="number">100</span>; i += <span class="number">2</span>) &#123;</span><br><span class="line">bvect.<span class="built_in">insert</span>(bvect.<span class="built_in">end</span>(), <span class="literal">true</span>);</span><br><span class="line">bvect.<span class="built_in">insert</span>(bvect.<span class="built_in">end</span>(), <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (BoolVector::iterator first = bvect.<span class="built_in">begin</span>(),</span><br><span class="line">last = bvect.<span class="built_in">end</span>(); first != last; ++first) &#123;</span><br><span class="line">cout &lt;&lt; *first &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; bvect.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">bvect.<span class="built_in">front</span>(). flipQ;</span><br><span class="line">bvect.<span class="built_in">back</span>().flipQ;</span><br><span class="line">bvect.flipQ;</span><br><span class="line">bvect.<span class="built_in">clear</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç©ºå®¹å™¨"><a class="header-anchor" href="#ç©ºå®¹å™¨">ğŸŒ³</a>ç©ºå®¹å™¨</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt; li; / ç©º å®¹ å™¨</span><br><span class="line">li.pop_backQ; <span class="comment">// runtime error!</span></span><br><span class="line"><span class="keyword">if</span></span><br><span class="line">(!li.<span class="built_in">empty</span>()) li.<span class="built_in">erase</span>(li.<span class="built_in">begin</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> ä¾‹ <span class="number">17</span><span class="number">-20</span>ã€‚ ç¤º ä¾‹ <span class="number">17</span><span class="number">-20</span> </span><br><span class="line"> <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span> / é¡º åº å®¹ å™¨ </span></span><br><span class="line"> <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span> / è” åˆ å®¹ å™¨</span></span><br><span class="line"> <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span> using namespace std; </span></span><br><span class="line"> <span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"> </span>&#123; <span class="type">int</span> *p = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">100</span>);</span><br><span class="line">  list&lt;<span class="type">int</span>&gt; temp1;</span><br><span class="line">   temp] .<span class="built_in">insert</span>(temp<span class="number">1.</span><span class="built_in">end</span>(), <span class="number">10</span>);</span><br><span class="line">    list&lt;<span class="type">int</span>&gt; li; W ç©º å®¹ å™¨</span><br><span class="line">liinsertdisend0, <span class="number">10</span>); / åˆ› å»º æ–° å¯¹ è±¡</span><br><span class="line">li.<span class="built_in">insert</span>(li.endQ, <span class="number">10</span>); / åˆ› å»º æ–° å¯¹ è±¡</span><br><span class="line"><span class="built_in">Iierase</span>(temp1l.begin0O); â€œ ä¸« runtime error! è™« ç„¶ li ä¸­ ä¹Ÿ æœ‰ å€¼ ä¸º <span class="number">10</span> çš„ <span class="type">int</span> å…ƒ ç´ </span><br><span class="line">/ ä½† æ˜¯ temp<span class="number">1.</span>begin0æŒ‡ å‘ çš„ å…ƒ ç´  å¯¹ è±¡ å¹¶ ä¸ å± äº li æ‰€ æœ‰</span><br><span class="line"><span class="built_in">lierase</span>(li-<span class="built_in">begin</span>(Q)); ok! libegin0æŒ‡ å‘ çš„ å¯¹ è±¡ ä¸º ii æ‰€ æœ‰</span><br><span class="line">| <span class="built_in">lierase</span>(*p); W compiling error! æ²¡ æœ‰ å®š ä¹‰ è¿™ æ · çš„ æ–¹ æ³• , å¯¹è±¡ *p ä¸</span><br><span class="line">W å± äº i æ‰€ æœ‰ ã€‚ ä¸ èƒ½ ä»¥ å…ƒ ç´  çš„ å€¼ æ¥ åˆ¤ æ–­ å…¶ æ˜¯ å¦ å± äº ä¸€</span><br><span class="line">W ä¸ª é¡º åº å®¹ å™¨ , å›  ä¸º é¡º åº å®¹ å™¨ å¯ ä»¥ åŒ æ—¶ å­˜ å‚¨ å€¼ å®Œ å…¨ ç›¸ åŒ</span><br><span class="line">W çš„ å¤š ä¸ª å¯¹ è±¡ ; å¦ åˆ™ å®¹ å™¨ å°† ä¸ çŸ¥ é“ è¯¥ åˆ  é™¤ å“ª ä¸€ ä¸ª å…ƒ ç´  äº†</span><br><span class="line"><span class="number">1</span> set&lt;<span class="type">int</span>&gt; temp2;</span><br><span class="line">| temp<span class="number">2.</span><span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">set&lt;<span class="type">int</span>&gt; si; / ç©ºå®¹ å™¨</span><br><span class="line"><span class="built_in">siinsert</span>(<span class="number">10</span>); / si åŒ… å« ä¸€ ä¸ª å€¼ ä¸º <span class="number">10</span> çš„å…ƒ ç´ </span><br><span class="line"><span class="built_in">siinsert</span>(si.<span class="built_in">end</span>(<span class="number">0</span>), <span class="number">20</span>);</span><br><span class="line"><span class="built_in">siinsert</span>(<span class="built_in">sisend</span>(<span class="number">0</span>), <span class="number">20</span>); ä¸« å¿½ ç•¥ !</span><br><span class="line">si.<span class="built_in">erase</span>(temp<span class="number">2.</span>beginQ); â€”_<span class="comment">// runtime error! temp2.begin0æŒ‡ å‘ çš„ å¯¹ å‚ ä¸ å± äº si æ‰€ æœ‰</span></span><br><span class="line">si.<span class="built_in">erase</span>(*p); (OK! ä» si ä¸­ åˆ  é™¤ å€¼ ç­‰ äº *p çš„å…ƒ ç´ </span><br><span class="line">si.<span class="built_in">erase</span>(si.<span class="built_in">begin</span>()); OK! sitbegin0 æŒ‡ å‘ çš„ å¯¹ è±¡ ä¸º si æ‰€ æœ‰</span><br><span class="line"><span class="keyword">delete</span> p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é™¤ äº† ä¸Š é¢ è¿™ äº› ç‰¹ æ®Š å®¹ å™¨ å¤– , è¿˜ æœ‰ ä¸€ äº› ä¸“ ç”¨ äº æ•° å­¦ è¿ ç®— çš„ å®¹ å™¨ ã€ ç®— æ³• å’Œ ç±» å‹ ,<br>
å¦‚ valarrayã€ complex ç­‰ , åˆ† åˆ« å®š ä¹‰ åœ¨ å¤´ æ–‡ ä»¶ <code>&lt;valarray&gt;å’Œ &lt;complex&gt;</code> ä¸­ ,<br>
å¤´ æ–‡ ä»¶ <code>&lt;numeric&gt;</code> ä¸­ å®š ä¹‰ äº† ç”¨ äº å‘ é‡ è®¡ ç®— çš„ ç®— æ³•</p>
<p>å¾€ å®¹ å™¨ ä¸­ æ’ å…¥ å…ƒ ç´  æ—¶ , è‹¥ å…ƒ ç´  åœ¨ å®¹ å™¨ ä¸­ çš„ é¡º åº æ—  å…³ ç´§ è¦ , è¯· å°½ é‡ åŠ  åœ¨ æœ€<br>
å é¢ ã€‚ è‹¥ ç» å¸¸ éœ€ è¦ åœ¨ åº åˆ— å®¹ å™¨ çš„ å¼€ å¤´ æˆ– ä¸­ é—´ å¢ åŠ  æˆ– åˆ  é™¤ å…ƒ ç´  æ—¶ , åº”é€‰ ç”¨<br>
list.</p>
<p>å½“ å®¹ å™¨ ä½œ ä¸º å‚ æ•° è¢« ä¼  é€’ æ—¶ , è¯· é‡‡ ç”¨ å¼• ç”¨ ä¼  é€’ æ–¹ å¼ ã€‚ å¦ åˆ™ å°† è°ƒ ç”¨ å®¹ å™¨ çš„ æ‹·<br>
è´æ„ é€  å‡½ æ•° , å…¶ å¼€ é”€ æ˜¯ éš¾ ä»¥ æƒ³ è±¡ çš„</p>
<p>å½“ å…ƒ ç´  çš„ æœ‰ åº æ¯” æœ ç´¢ é€Ÿ åº¦ æ›´ é‡ è¦ æ—¶ , åº” é€‰ ç”¨ set. multiset.mapæˆ– multimapã€‚<br>
å¦ åˆ™ , é€‰ ç”¨ hash_setã€hash_multisetã€hash_map æˆ– hash_multimapã€‚</p>
<p><img src="/2023/05/31/%E9%AB%98%E8%B4%A8%E9%87%8FC++%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Pasted%20image%2020230603100246.png" alt></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">char</span>* <span class="title">strcpy</span><span class="params">(<span class="type">char</span>* strDest, <span class="type">char</span>* strSrc)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">assert</span>( (strDest != <span class="literal">NULL</span>) &amp;&amp; (srtSrc != <span class="literal">NULL</span>) );</span><br><span class="line">	<span class="type">char</span>* address = strDest;</span><br><span class="line">	<span class="keyword">while</span> ( (*strDest++ = *strSrc++) != <span class="string">&#x27;\0&#x27;</span> );</span><br><span class="line">	<span class="keyword">return</span> address;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">String</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">String</span>(<span class="type">const</span> <span class="type">char</span> *str = <span class="string">&quot;&quot;</span>); <span class="comment">//æ™º é€š æ„ é€  å‡½ æ•°</span></span><br><span class="line">	<span class="built_in">String</span>(<span class="type">const</span> String &amp;other);  <span class="comment">// æ‹· è´ æ„ é€  å‡½ æ•°</span></span><br><span class="line">	~ <span class="built_in">String</span>(<span class="type">void</span>);</span><br><span class="line">	String&amp; operate =(<span class="type">const</span> String &amp;other);</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">char</span> *m_data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">//String çš„ æ™® é€š æ„ é€  å‡½ æ•°</span></span><br><span class="line">String::<span class="built_in">String</span>(<span class="type">const</span> <span class="type">char</span> *str) / <span class="number">6</span> åˆ†</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span>(str == <span class="literal">NULL</span>)</span><br><span class="line">	&#123; </span><br><span class="line">		m_data = <span class="keyword">new</span> <span class="type">char</span>[<span class="number">1</span>];</span><br><span class="line">		*m_data = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> length = <span class="built_in">strlen</span>(str);</span><br><span class="line">		m_data = <span class="keyword">new</span> <span class="type">char</span>[length<span class="number">+1</span>];</span><br><span class="line">		<span class="built_in">strcpy</span>(m_data, str);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// String çš„ æ æ„ å‡½ æ•°</span></span><br><span class="line">String::~<span class="built_in">String</span>(<span class="type">void</span>)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">delete</span> [] m_data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‹· è´ æ„ é€  å‡½ æ•°</span></span><br><span class="line">String::<span class="built_in">String</span>(<span class="type">const</span> String &amp;other)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> length = <span class="built_in">strlen</span>(other.m_data);</span><br><span class="line">	m_data = <span class="keyword">new</span> <span class="type">char</span>[length<span class="number">+1</span>];</span><br><span class="line">	<span class="built_in">strcpy</span>(m_data, other.m_data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// èµ‹å€¼ å‡½ æ•°</span></span><br><span class="line">String &amp; String::operate =(<span class="type">const</span> String &amp;other)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">this</span> != &amp;other)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">char</span> *temp = <span class="keyword">new</span> <span class="type">char</span>[<span class="built_in">strlen</span>(other.m_data) + <span class="number">1</span>];</span><br><span class="line">		<span class="built_in">strcpy</span>(temp, other.m_data);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">delete</span> [] m_data;</span><br><span class="line">		m_data = temp;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>è®¡ç®—æœºç§‘å­¦</category>
      </categories>
  </entry>
</search>
